# Repository: Telegram-Mini-Apps/tma.js (Branch: master)

*Source: [https://github.com/Telegram-Mini-Apps/tma.js](https://github.com/Telegram-Mini-Apps/tma.js) | Generated by [CopyMarkdown.com](https://copymarkdown.com)*
---
## Directory Structure
- .changeset/
  - config.json
  - README.md
- .github/
  - ISSUE_TEMPLATE/
    - bug-report.yml
    - feature-request.yml
  - workflows/
    - run-changeset.yml
    - test-pull-request.yml
  - dependabot.yml
- apps/
  - docs/
    - .vitepress/
      - theme/
        - custom.css
        - index.ts
      - packages.ts
      - platform.ts
      - utils.ts
    - packages/
      - telegram-apps-bridge/
        - 2-x/
          - advanced.md
          - environment.md
          - events.md
          - globals.md
          - launch-parameters.md
          - methods.md
          - migrate-v1-v2.md
        - 2-x.md
        - environment.md
        - events.md
        - globals.md
        - launch-parameters.md
        - methods.md
      - telegram-apps-init-data-node/
        - 2-x.md
      - telegram-apps-mate/
        - hosting.md
      - telegram-apps-sdk/
        - 1-x/
          - components/
            - back-button.md
            - biometry-manager.md
            - closing-behavior.md
            - cloud-storage.md
            - haptic-feedback.md
            - init-data.md
            - invoice.md
            - main-button.md
            - mini-app.md
            - popup.md
            - qr-scanner.md
            - settings-button.md
            - swipe-behavior.md
            - theme-params.md
            - utils.md
            - viewport.md
          - init-data/
            - chat.md
            - init-data.md
            - user.md
          - navigation/
            - browser-navigator.md
          - components.md
          - css-variables.md
          - environment.md
          - init-data.md
          - launch-parameters.md
          - methods-and-events.md
          - navigation.md
          - theme-parameters.md
        - 2-x/
          - components/
            - back-button.md
            - biometry.md
            - closing-behavior.md
            - cloud-storage.md
            - haptic-feedback.md
            - init-data.md
            - invoice.md
            - main-button.md
            - mini-app.md
            - popup.md
            - qr-scanner.md
            - secondary-button.md
            - settings-button.md
            - swipe-behavior.md
            - theme-params.md
            - viewport.md
          - utils/
            - emoji-status.md
            - home-screen.md
            - links.md
            - privacy.md
            - uncategorized.md
          - initializing.md
          - scopes.md
          - usage-tips.md
        - 3-x/
          - components/
            - back-button.md
            - biometry.md
            - closing-behavior.md
            - cloud-storage.md
            - haptic-feedback.md
            - init-data.md
            - invoice.md
            - location-manager.md
            - main-button.md
            - mini-app.md
            - popup.md
            - qr-scanner.md
            - secondary-button.md
            - settings-button.md
            - swipe-behavior.md
            - theme-params.md
            - viewport.md
          - utils/
            - emoji-status.md
            - home-screen.md
            - links.md
            - privacy.md
            - uncategorized.md
          - initializing.md
          - migrate-v2-v3.md
          - scopes.md
          - usage-tips.md
        - 1-x.md
        - 2-x.md
        - 3-x.md
      - telegram-apps-sdk-react/
        - 1-x.md
        - 2-x.md
        - 3-x.md
      - telegram-apps-sdk-solid/
        - 1-x.md
        - 2-x.md
        - 3-x.md
      - telegram-apps-sdk-svelte/
        - 2-x.md
      - telegram-apps-sdk-vue/
        - 2-x.md
      - tma-js-bridge/
        - advanced.md
        - environment.md
        - events.md
        - functional-approach.md
        - globals.md
        - launch-parameters.md
        - methods.md
        - migrate-from-telegram-apps.md
      - tma-js-init-data-node/
        - functional-approach.md
        - migrate-from-telegram-apps.md
        - parsing.md
        - signing.md
        - validating.md
      - tma-js-sdk/
        - features/
          - back-button.md
          - biometry.md
          - closing-behavior.md
          - cloud-storage.md
          - emoji-status.md
          - haptic-feedback.md
          - home-screen.md
          - init-data.md
          - invoice.md
          - links.md
          - location-manager.md
          - main-button.md
          - mini-app.md
          - popup.md
          - privacy.md
          - qr-scanner.md
          - secondary-button.md
          - settings-button.md
          - swipe-behavior.md
          - theme-params.md
          - uncategorized.md
          - viewport.md
        - features.md
        - initializing.md
        - migrate-from-telegram-apps.md
        - usage-tips.md
      - init-data-golang.md
      - telegram-apps-bridge.md
      - telegram-apps-create-mini-app.md
      - telegram-apps-init-data-node.md
      - telegram-apps-mate.md
      - telegram-apps-react-router-integration.md
      - telegram-apps-sdk-svelte.md
      - telegram-apps-sdk-vue.md
      - telegram-apps-signals.md
      - telegram-apps-solid-router-integration.md
      - tma-js-bridge.md
      - tma-js-create-mini-app.md
      - tma-js-init-data-node.md
      - tma-js-sdk-react.md
      - tma-js-sdk-solid.md
      - tma-js-sdk-svelte.md
      - tma-js-sdk-vue.md
      - tma-js-sdk.md
      - tma-js-signals.md
    - platform/
      - about.md
      - apps-communication.md
      - authorizing-user.md
      - back-button.md
      - closing-behavior.md
      - creating-new-app.md
      - debugging.md
      - events.md
      - getting-app-link.md
      - haptic-feedback.md
      - init-data.md
      - launch-parameters.md
      - main-button.md
      - methods.md
      - migrating-from-vk.md
      - popup.md
      - settings-button.md
      - start-parameter.md
      - sticky-app.md
      - swipe-behavior.md
      - test-environment.md
      - theming.md
      - viewport.md
    - public/
      - components/
        - viewport/
      - functionality/
      - mate/
      - analytics.js
      - google9b165606060ff733.html
    - index.md
    - package.json
    - vercel.json
- packages/
  - bridge/
    - src/
      - env/
        - hasWebviewProxy.test.ts
        - hasWebviewProxy.ts
        - isIframe.test.ts
        - isIframe.ts
        - isTMA.test.ts
        - isTMA.ts
        - mockTelegramEnv.test.ts
        - mockTelegramEnv.ts
      - events/
        - types/
          - events.ts
          - index.ts
          - listening.ts
          - misc.ts
        - createEmitter.ts
        - emitEvent.test.ts
        - emitEvent.ts
        - emitter.test.ts
        - emitter.ts
      - methods/
        - types/
          - custom-method.ts
          - haptic-feedback.ts
          - index.ts
          - methods.ts
          - misc.ts
          - popup.ts
          - utils.ts
        - captureSameReq.test.ts
        - captureSameReq.ts
        - createPostEvent.test.ts
        - createPostEvent.ts
        - getReleaseVersion.test.ts
        - getReleaseVersion.ts
        - postEvent.test.ts
        - postEvent.ts
        - postMessage.ts
        - supports.test.ts
        - supports.ts
      - utils/
        - compareVersions.test.ts
        - compareVersions.ts
        - invokeCustomMethod.test.ts
        - invokeCustomMethod.ts
        - request.test.ts
        - request.ts
      - applyPolyfills.ts
      - base64-url.test.ts
      - base64-url.ts
      - errors.ts
      - globals.ts
      - index.ts
      - launch-params.test.ts
      - launch-params.ts
      - obj-prop-helpers.ts
      - start-param.test.ts
      - start-param.ts
    - tools/
      - getConfig.ts
    - CHANGELOG.md
    - LICENSE
    - package.json
    - README.md
    - tsconfig.build.json
    - tsconfig.eslint.json
    - tsconfig.json
    - tsconfig.node.json
    - tsconfig.test.json
    - vite.config.ts
    - vite.iife.config.ts
  - create-mini-app/
    - src/
      - prompts/
        - input.ts
      - templates/
        - promptTemplate/
          - promptTemplate.ts
          - sections.ts
          - types.ts
        - templates.ts
        - types.ts
      - utils/
        - lines.ts
        - spaces.ts
      - cloneTemplate.ts
      - createCustomTheme.ts
      - index.ts
      - isGitInstalled.ts
      - spawnWithSpinner.ts
      - types.ts
    - CHANGELOG.md
    - package.json
    - README.md
    - tsconfig.eslint.json
    - tsconfig.json
    - vite.config.ts
  - init-data-node/
    - src/
      - entries/
        - node.test.ts
        - node.ts
        - shared.test.ts
        - shared.ts
        - web.test.ts
        - web.ts
      - buf-converters.ts
      - errors.ts
      - hashToken.test.ts
      - hashToken.ts
      - parsing.test.ts
      - parsing.ts
      - signDataFp.ts
      - signFp.ts
      - types.ts
      - validation.ts
    - CHANGELOG.md
    - package.json
    - README.md
    - tsconfig.eslint.json
    - tsconfig.json
    - tsconfig.node.json
    - vite.config.ts
  - sdk/
    - src/
      - composables/
        - AsyncMountable.ts
        - Button.ts
        - Mountable.ts
        - Stateful.ts
      - features/
        - BackButton/
          - BackButton.test.ts
          - BackButton.ts
          - exports.ts
          - instance.ts
        - Biometry/
          - Biometry.test.ts
          - Biometry.ts
          - exports.ts
          - instance.ts
          - types.ts
        - ClosingBehavior/
          - ClosingBehavior.test.ts
          - ClosingBehavior.ts
          - exports.ts
          - instance.ts
        - CloudStorage/
          - CloudStorage.test.ts
          - CloudStorage.ts
          - exports.ts
          - instance.ts
        - emoji-status/
          - exports.ts
          - requestEmojiStatusAccess.ts
          - setEmojiStatus.ts
        - HapticFeedback/
          - exports.ts
          - HapticFeedback.test.ts
          - HapticFeedback.ts
          - instance.ts
        - home-screen/
          - addToHomeScreen.ts
          - checkHomeScreenStatus.ts
          - exports.ts
        - InitData/
          - exports.ts
          - InitData.test.ts
          - InitData.ts
          - instance.ts
        - Invoice/
          - exports.ts
          - instance.ts
          - Invoice.test.ts
          - Invoice.ts
        - links/
          - exports.ts
          - openLink.ts
          - openTelegramLink.ts
          - shareURL.ts
        - LocationManager/
          - exports.ts
          - instance.ts
          - LocationManager.ts
          - types.ts
        - MainButton/
          - exports.ts
          - instance.ts
          - MainButton.test.ts
          - MainButton.ts
        - MiniApp/
          - exports.ts
          - instance.ts
          - MiniApp.ts
        - Popup/
          - exports.ts
          - instance.ts
          - Popup.test.ts
          - Popup.ts
          - prepareParams.test.ts
          - prepareParams.ts
          - types.ts
        - privacy/
          - exports.ts
          - requestContact.ts
          - requestPhoneAccess.ts
          - requestWriteAccess.ts
        - QrScanner/
          - exports.ts
          - instance.ts
          - QrScanner.ts
        - SecondaryButton/
          - exports.ts
          - instance.ts
          - SecondaryButton.test.ts
          - SecondaryButton.ts
        - SettingsButton/
          - exports.ts
          - instance.ts
          - SettingsButton.test.ts
          - SettingsButton.ts
        - SwipeBehavior/
          - exports.ts
          - instance.ts
          - SwipeBehavior.test.ts
          - SwipeBehavior.ts
        - ThemeParams/
          - exports.ts
          - instance.ts
          - ThemeParams.ts
        - uncategorized/
          - copyTextToClipboard.ts
          - downloadFile.ts
          - exports.ts
          - getCurrentTime.ts
          - hideKeyboard.ts
          - readTextFromClipboard.ts
          - retrieveAndroidDeviceData.test.ts
          - retrieveAndroidDeviceData.ts
          - retrieveAndroidDeviceDataFrom.test.ts
          - retrieveAndroidDeviceDataFrom.ts
          - sendData.ts
          - shareMessage.ts
          - shareStory.ts
          - switchInlineQuery.ts
        - Viewport/
          - exports.ts
          - instance.ts
          - Viewport.ts
      - fn-options/
        - bottomButtonOptions.ts
        - buttonOptions.ts
        - createFnOption.ts
        - sharedFeatureOptions.ts
        - withInvokeCustomMethod.ts
        - withPostEvent.ts
        - withRequest.ts
        - withStateRestore.ts
        - withVersion.ts
      - globals/
        - createRequestId.ts
        - inline-mode.ts
        - invokeCustomMethod.ts
        - post-event.ts
        - request.ts
        - resetGlobals.ts
        - signals-registry.ts
        - themeParams.ts
        - version.ts
      - helpers/
        - access.ts
        - component-storage.ts
        - createIsSupportedSignal.ts
        - css-vars.test.ts
        - css-vars.ts
        - isColorDark.test.ts
        - isColorDark.ts
        - navigation.test.ts
        - navigation.ts
        - removeUndefined.ts
        - shallowEqual.ts
      - with-checks/
        - throwifyWithChecksFp.ts
        - withChecksFp.ts
      - errors.ts
      - index.ts
      - init.test.ts
      - init.ts
      - types.ts
    - test-utils/
      - predefined/
        - testIsSupportedGlobal.ts
        - testIsSupportedPure.ts
        - testSafetyGlobal.ts
        - testSafetyPure.ts
      - types.ts
      - utils.ts
    - tools/
      - getConfig.ts
    - CHANGELOG.md
    - LICENSE
    - package.json
    - README.md
    - tsconfig.build.json
    - tsconfig.eslint.json
    - tsconfig.json
    - tsconfig.node.json
    - tsconfig.test.json
    - vite.config.ts
    - vite.iife.config.ts
  - sdk-react/
    - src/
      - hooks.ts
      - index.ts
    - CHANGELOG.md
    - LICENSE
    - package.json
    - README.md
    - tsconfig.eslint.json
    - tsconfig.json
    - tsconfig.node.json
    - vite.config.ts
  - sdk-solid/
    - src/
      - index.ts
      - useSignal.ts
    - CHANGELOG.md
    - LICENSE
    - package.json
    - README.md
    - tsconfig.eslint.json
    - tsconfig.json
    - tsconfig.node.json
    - vite.config.ts
  - sdk-svelte/
    - src/
      - index.ts
      - useSignal.ts
    - CHANGELOG.md
    - LICENSE
    - package.json
    - README.md
    - tsconfig.eslint.json
    - tsconfig.json
    - tsconfig.node.json
    - vite.config.ts
  - sdk-vue/
    - src/
      - index.ts
      - useSignal.ts
    - CHANGELOG.md
    - LICENSE
    - package.json
    - README.md
    - tsconfig.eslint.json
    - tsconfig.json
    - tsconfig.node.json
    - vite.config.ts
  - signals/
    - src/
      - batch.test.ts
      - batch.ts
      - computed.test.ts
      - computed.ts
      - index.ts
      - signal.test.ts
      - signal.ts
    - CHANGELOG.md
    - LICENSE
    - package.json
    - tsconfig.build.json
    - tsconfig.eslint.json
    - tsconfig.json
    - tsconfig.node.json
    - tsconfig.test.json
    - vite.config.ts
  - test-utils/
    - src/
      - createDomEmitter.ts
      - createWindow.ts
      - formatImplementation.ts
      - index.ts
      - mockPageReload.ts
      - mockPerformanceGetEntriesByType.ts
      - mockWindow.ts
      - session-storage.ts
    - package.json
    - tsconfig.eslint.json
    - tsconfig.json
  - toolkit/
    - src/
      - casing/
        - camelToKebab.ts
        - camelToSnake.ts
        - camelToSnakeObjKeys.ts
        - deepSnakeToCamelObjKeys.ts
        - snakeToCamel.ts
        - snakeToCamelObjKeys.ts
        - snakeToKebab.ts
      - storage/
        - storage.test.ts
        - storage.ts
      - types/
        - logical.ts
        - misc.ts
        - predicates.ts
        - unions.ts
      - createCbCollector.ts
      - createLogger.test.ts
      - createLogger.ts
      - index.ts
      - monads.ts
    - CHANGELOG.md
    - LICENSE
    - package.json
    - tsconfig.build.json
    - tsconfig.eslint.json
    - tsconfig.json
    - tsconfig.node.json
    - tsconfig.test.json
    - vite.config.ts
  - transformers/
    - src/
      - index.ts
      - parsers.test.ts
      - parsers.ts
      - pipes.ts
      - rgb.test.ts
      - rgb.ts
      - serializers.test.ts
      - serializers.ts
      - structures.test.ts
      - structures.ts
      - transformers.ts
    - CHANGELOG.md
    - LICENSE
    - package.json
    - tsconfig.build.json
    - tsconfig.eslint.json
    - tsconfig.json
    - tsconfig.node.json
    - tsconfig.test.json
    - vite.config.ts
  - tsconfig/
    - esnext-dom.json
    - esnext.json
    - package.json
  - types/
    - src/
      - colors.ts
      - common.ts
      - index.ts
      - init-data.ts
      - launch-params.ts
      - theme-params.ts
    - CHANGELOG.md
    - LICENSE
    - package.json
    - tsconfig.build.json
    - tsconfig.eslint.json
    - tsconfig.json
    - tsconfig.node.json
    - tsconfig.test.json
    - vite.config.ts
- playgrounds/
  - custom/
    - src/
      - index.ts
    - index.html
    - package.json
    - README.md
    - tsconfig.json
    - tsconfig.node.json
    - vite.config.ts
- .gitattributes
- .gitignore
- CODE_OF_CONDUCT.md
- CONTRIBUTING.md
- eslint.config.js
- LICENSE
- MOTIVATION.md
- package.json
- pnpm-lock.yaml
- pnpm-workspace.yaml
- README.md
- turbo.json
- vite.config.ts

---
## Files
---
## File: .changeset/config.json

```json
{
  "$schema": "https://unpkg.com/@changesets/config@2.3.1/schema.json",
  "changelog": "@changesets/cli/changelog",
  "commit": true,
  "fixed": [],
  "linked": [],
  "access": "restricted",
  "baseBranch": "master",
  "updateInternalDependencies": "patch",
  "ignore": [
    "docs",
    "custom-playground"
  ]
}

```
---
## File: .changeset/README.md

```markdown
# Changesets

Hello and welcome! This folder has been automatically generated by `@changesets/cli`, a build tool that works
with multi-package repos, or single-package repos to help you version and publish your code. You can
find the full documentation for it [in our repository](https://github.com/changesets/changesets)

We have a quick list of common questions to get you started engaging with this project in
[our documentation](https://github.com/changesets/changesets/blob/main/docs/common-questions.md)

```
---
## File: .github/ISSUE_TEMPLATE/bug-report.yml

```yaml
name: Bug report
description: File a bug report
title: "[Bug]: "
labels:
  - bug
assignees:
  - heyqbnk
body:
  - type: dropdown
    attributes:
      label: Telegram Application
      description: The Telegram application you met the bug in.
      multiple: true
      options:
        - Telegram for Android
        - Telegram for iOS
        - Telegram for macOS
        - Telegram Desktop
        - Telegram Web A
        - Telegram Web K
        - Other
      default: 0
    validations:
      required: true
  - type: textarea
    attributes:
      label: Describe the Bug
      description: A clear and concise description of what the bug is.
    validations:
      required: true
  - type: textarea
    attributes:
      label: To Reproduce
      description: A clear and concise description of what the bug is.
      value: |
        Steps to reproduce the behavior:
        1. Go to '...'
        2. Click on '....'
        3. Scroll down to '....'
        4. See error
    validations:
      required: true
  - type: textarea
    attributes:
      label: Expected Behavior
      description: A clear and concise description of what you expected to happen.
    validations:
      required: true
```
---
## File: .github/ISSUE_TEMPLATE/feature-request.yml

```yaml
name: Feature request
description: Suggest an idea.
title: "[Feature]: "
labels:
  - enhancement
assignees:
  - heyqbnk
body:
  - type: textarea
    attributes:
      label: Is your feature request related to a problem? Please describe.
      description: A clear and concise description of what the problem is. Ex. I'm always frustrated when [...]
  - type: textarea
    attributes:
      label: Describe the solution you'd like
      description: A clear and concise description of what you want to happen.
    validations:
      required: true
  - type: textarea
    attributes:
      label: Describe alternatives you've considered
      description: A clear and concise description of any alternative solutions or features you've considered.
  - type: textarea
    attributes:
      label: Additional context
      description: Add any other context or screenshots about the feature request here.
```
---
## File: .github/workflows/run-changeset.yml

```yaml
name: Run changeset

on:
  workflow_dispatch:
  push:
    branches:
      - "master"
    paths:
      - ".changeset/**.md"

jobs:
  run-changeset:
    name: Run changeset
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v5

      - name: Install pnpm
        uses: pnpm/action-setup@v4

      - name: Setup node
        uses: actions/setup-node@v5
        with:
          node-version: 22
          registry-url: 'https://registry.npmjs.org'
          cache: 'pnpm'

      - name: Rollup
        run: pnpm run ci:packages:rollup

      - name: Run changeset
        uses: changesets/action@v1
        with:
          publish: pnpm changeset publish
          commit: 'chore(packages): version packages'
          title: 'chore(packages): version packages'
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          NPM_TOKEN: ${{ secrets.NPM_TOKEN }}
          NODE_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}
```
---
## File: .github/workflows/test-pull-request.yml

```yaml
name: Test pull request

on:
  workflow_dispatch:
  pull_request:
    types: [opened, reopened]
    branches:
      - "master"

jobs:
  validate:
    name: Test pull request
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v5

      - name: Install pnpm
        uses: pnpm/action-setup@v4

      - name: Setup node
        uses: actions/setup-node@v5
        with:
          node-version: 22.14.0
          registry-url: 'https://registry.npmjs.org'
          cache: 'pnpm'

      - name: Rollup
        run: pnpm run ci:packages:rollup
```
---
## File: .github/dependabot.yml

```yaml
version: 2
updates:
  - package-ecosystem: 'github-actions'
    directory: '/'
    schedule:
      interval: 'weekly'
```
---
## File: apps/docs/.vitepress/theme/custom.css

```css
@media (max-width: 768px) {
  /* In mobile version we would like to move hashtag ("#") to the right side of section title. */
  .vp-doc h1,
  .vp-doc h2,
  .vp-doc h3,
  .vp-doc h4,
  .vp-doc h5,
  .vp-doc h6 {
    padding-right: 1em;
  }

  .vp-doc h1 .header-anchor,
  .vp-doc h2 .header-anchor,
  .vp-doc h3 .header-anchor,
  .vp-doc h4 .header-anchor,
  .vp-doc h5 .header-anchor,
  .vp-doc h6 .header-anchor {
    left: auto;
    top: auto;
    bottom: 0;
    margin-left: .3em;
  }
}

.guides-image {
  width: 100%;
  border-radius: 10px;
}
```
---
## File: apps/docs/.vitepress/theme/index.ts

```typescript
import DefaultTheme from 'vitepress/theme';
import './custom.css';

export default DefaultTheme;
```
---
## File: apps/docs/.vitepress/packages.ts

```typescript
import type { DefaultTheme } from 'vitepress';

import { sectionGen } from './utils';

type Sidebar = DefaultTheme.Sidebar;
type NavItemWithLink = DefaultTheme.NavItemWithLink;

function feature(prefix: string, path: string, title?: string): [string, string] {
  title ||=
    path[0].toUpperCase() +
    path.slice(1).replace(/-./g, (m) => ' ' + m[1].toUpperCase());

  return [`${prefix}${title}`, path];
}

function component(path: string, title?: string): [string, string] {
  return feature('ðŸ’ ', path, title);
}

function utils(path: string, title?: string): [string, string] {
  return feature('âš™ï¸', path, title);
}

export const packagesLinksGenerator = (prefix: string = '') => {
  const BASE = prefix + '/packages';

  const section = sectionGen(BASE);

  const packagesNavItem: NavItemWithLink = {
    text: 'Packages',
    link: `${BASE}/tma-js-signals`,
  };

  const packagesSidebar: Sidebar = {
    [BASE]: [
      section('TypeScript', {
        '@tma.js/signals': 'tma-js-signals',
        '@tma.js/bridge': ['tma-js-bridge', {
          'Methods': 'methods',
          'Events': 'events',
          'Launch Parameters': 'launch-parameters',
          'Environment': 'environment',
          'Globals': 'globals',
          'Advanced': 'advanced',
          'Functional Approach': 'functional-approach',
          'Migrating from telegram-apps': 'migrate-from-telegram-apps',
        }],
        '@tma.js/sdk': ['tma-js-sdk', {
          'Initializing': 'initializing',
          'Usage Tips': 'usage-tips',
          'Features': ['features', {
            ...Object.fromEntries([
              component('back-button'),
              component('biometry'),
              component('closing-behavior'),
              component('cloud-storage'),
              utils('emoji-status'),
              component('haptic-feedback'),
              utils('home-screen'),
              component('init-data'),
              component('invoice'),
              utils('links'),
              component('location-manager'),
              component('main-button'),
              component('mini-app'),
              component('popup'),
              utils('privacy'),
              component('qr-scanner', 'QR Scanner'),
              component('secondary-button'),
              component('settings-button'),
              component('swipe-behavior'),
              component('theme-params'),
              utils('uncategorized'),
              component('viewport'),
            ]),
          }],
          'Migrating from telegram-apps': 'migrate-from-telegram-apps',
        }],
        '@tma.js/sdk-react': 'tma-js-sdk-react',
        '@tma.js/sdk-svelte': 'tma-js-sdk-svelte',
        '@tma.js/sdk-vue': 'tma-js-sdk-vue',
        '@tma.js/sdk-solid': 'tma-js-sdk-solid',
      }),
      section('Node', {
        '@tma.js/init-data-node': ['tma-js-init-data-node', {
          'Parsing': 'parsing',
          'Validating': 'validating',
          'Signing': 'signing',
          'Functional Approach': 'functional-approach',
          'Migrating from telegram-apps': 'migrate-from-telegram-apps',
        }],
      }),
      section('CLI', {
        '@tma.js/create-mini-app': 'tma-js-create-mini-app',
      }),
      section('GoLang', { 'init-data-golang': 'init-data-golang' }),
      section('âš ï¸ Deprecated. Docs to be removed in 2026. Switch to @tma.js', {
        '@telegram-apps/create-mini-app': 'telegram-apps-create-mini-app',
        '@telegram-apps/mate': ['telegram-apps-mate', { 'Hosting': 'hosting' }],
        '@telegram-apps/bridge': ['telegram-apps-bridge', {
          '@2.x': ['2-x', {
            'Methods': 'methods',
            'Events': 'events',
            'Launch Parameters': 'launch-parameters',
            'Environment': 'environment',
            'Globals': 'globals',
            'Advanced': 'advanced',
            'Migrate v1 -> v2': 'migrate-v1-v2',
          }],
          'Methods': 'methods',
          'Events': 'events',
          'Environment': 'environment',
          'Launch Parameters': 'launch-parameters',
          'Globals': 'globals',
        }],
        '@telegram-apps/signals': 'telegram-apps-signals',
        '@telegram-apps/sdk': [{ url: 'telegram-apps-sdk', page: false }, {
          '@1.x': ['1-x', {
            'Components': ['components', {
              BackButton: 'back-button',
              BiometryManager: 'biometry-manager',
              ClosingBehavior: 'closing-behavior',
              CloudStorage: 'cloud-storage',
              HapticFeedback: 'haptic-feedback',
              InitData: 'init-data',
              Invoice: 'invoice',
              MainButton: 'main-button',
              MiniApp: 'mini-app',
              Popup: 'popup',
              QRScanner: 'qr-scanner',
              SettingsButton: 'settings-button',
              SwipeBehavior: 'swipe-behavior',
              ThemeParams: 'theme-params',
              Utils: 'utils',
              Viewport: 'viewport',
            }],
            'Environment': 'environment',
            'Methods and Events': 'methods-and-events',
            'Launch Parameters': 'launch-parameters',
            'Theme Parameters': 'theme-parameters',
            'Init Data': ['init-data', {
              InitData: 'init-data',
              Chat: 'chat',
              User: 'user',
            }],
            'Navigation': ['navigation', {
              BrowserNavigator: 'browser-navigator',
            }],
            'CSS Variables': 'css-variables',
          }],
          '@2.x': ['2-x', {
            'Initializing': 'initializing',
            'Scopes': 'scopes',
            'Usage Tips': 'usage-tips',
            'Components': [
              { url: 'components', page: false },
              Object.fromEntries([
                component('back-button'),
                component('biometry'),
                component('closing-behavior'),
                component('cloud-storage'),
                component('haptic-feedback'),
                component('init-data'),
                component('invoice'),
                component('main-button'),
                component('mini-app'),
                component('popup'),
                component('qr-scanner', 'QR Scanner'),
                component('secondary-button'),
                component('settings-button'),
                component('swipe-behavior'),
                component('theme-params'),
                component('viewport'),
              ]),
            ],
            'Utilities': [{ url: 'utils', page: false }, Object.fromEntries([
              component('emoji-status'),
              component('home-screen'),
              component('links'),
              component('privacy'),
              component('uncategorized'),
            ])],
          }],
          '@3.x': ['3-x', {
            'Initializing': 'initializing',
            'Scopes': 'scopes',
            'Usage Tips': 'usage-tips',
            'Components': [
              { url: 'components', page: false },
              Object.fromEntries([
                component('back-button'),
                component('biometry'),
                component('closing-behavior'),
                component('cloud-storage'),
                component('haptic-feedback'),
                component('init-data'),
                component('invoice'),
                component('location-manager'),
                component('main-button'),
                component('mini-app'),
                component('popup'),
                component('qr-scanner', 'QR Scanner'),
                component('secondary-button'),
                component('settings-button'),
                component('swipe-behavior'),
                component('theme-params'),
                component('viewport'),
              ]),
            ],
            'Utilities': [{ url: 'utils', page: false }, Object.fromEntries([
              component('emoji-status'),
              component('home-screen'),
              component('links'),
              component('privacy'),
              component('uncategorized'),
            ])],
            'Migrate v2 -> v3': 'migrate-v2-v3',
          }],
        }],
        '@telegram-apps/sdk-react': [{
          url: 'telegram-apps-sdk-react',
          page: false,
        }, {
          '@1.x': '1-x',
          '@2.x': '2-x',
          '@3.x': '3-x',
        }],
        '@telegram-apps/sdk-solid': [{
          url: 'telegram-apps-sdk-solid',
          page: false,
        }, {
          '@1.x': '1-x',
          '@2.x': '2-x',
          '@3.x': '3-x',
        }],
        '@telegram-apps/sdk-vue': [{ url: 'telegram-apps-sdk-vue' }, {
          '@2.x': '2-x',
        }],
        '@telegram-apps/sdk-svelte': [{ url: 'telegram-apps-sdk-svelte' }, {
          '@2.x': '2-x',
        }],
        '@telegram-apps/solid-router-integration': '/telegram-apps-solid-router-integration',
        '@telegram-apps/react-router-integration': '/telegram-apps-react-router-integration',
        '@telegram-apps/init-data-node': [{ url: 'telegram-apps-init-data-node' }, {
          '@2.x': '2-x',
        }],
      }),
    ],
  };

  return {
    packagesNavItem,
    packagesSidebar,
  };
};

```
---
## File: apps/docs/.vitepress/platform.ts

```typescript
import { sectionGen } from './utils';

export const platformLinksGenerator = (prefix: string = '') => {
  const BASE = prefix + '/platform';

  const section = sectionGen(BASE);

  const platformNavItem = {
    text: 'Platform',
    link: `${BASE}/about`,
  };

  const platformSidebar = {
    [BASE]: [
      section('Introduction', {
        'About Platform': 'about',
      }),
      section('Functional Features', {
        'Closing Behavior': 'closing-behavior',
        'Swipe Behavior': 'swipe-behavior',
        'Haptic Feedback': 'haptic-feedback',
      }),
      section('Apps Communication', {
        'Flow Definition': 'apps-communication',
        Methods: 'methods',
        Events: 'events',
      }),
      section('Launch Parameters', {
        About: 'launch-parameters',
        'Start Parameter': 'start-parameter',
        'Init Data': 'init-data',
      }),
      section('Development', {
        Debugging: 'debugging',
        'Test Environment': 'test-environment',
      }),
      section('UI', {
        'Back Button': 'back-button',
        'Main Button': 'main-button',
        Popup: 'popup',
        'Settings Button': 'settings-button',
        Theming: 'theming',
        Viewport: 'viewport',
      }),
      section('Guides', {
        'Authorizing User': 'authorizing-user',
        'Creating New App': 'creating-new-app',
        'Getting App Link': 'getting-app-link',
        'Sticky App': 'sticky-app',
        'Migrating from VK': 'migrating-from-vk',
      }),
    ],
  };

  return {
    platformNavItem,
    platformSidebar,
  };
};

```
---
## File: apps/docs/.vitepress/utils.ts

```typescript
import type { DefaultTheme } from 'vitepress';

type SidebarItem = DefaultTheme.SidebarItem;

interface Items {
  [Title: string]: string | Items | [
    itemUrlOrOptions: string | {
      /**
       * Item own URL. If `page` is false, the value will be used as items' link prefix.
       */
      url?: string;
      /**
       * Custom title for this item.
       */
      title?: string;
      /**
       * True, if this item has its own documentation page.
       */
      page?: boolean
    },
    items: Items,
  ];
}

/**
 * Converts locally determined items to items, accepted by VitePress.
 * @param items - local items.
 * @param base - links' base.
 */
function itemsToConfigItems(items: Items, base: string): SidebarItem[] {
  const result: SidebarItem[] = [];

  for (let title in items) {
    let link: string | undefined;
    let linkItems: Items;
    let hasOwnPage: boolean | undefined;

    const tupleOrLinkOrItems = items[title];
    if (typeof tupleOrLinkOrItems === 'string') {
      // Item own link is specified.
      [link, linkItems, hasOwnPage] = [tupleOrLinkOrItems, {}, true];
    } else if (Array.isArray(tupleOrLinkOrItems)) {
      // Item options and subitems specified.
      const [linkOrOptions] = tupleOrLinkOrItems;
      if (typeof linkOrOptions === 'string') {
        link = linkOrOptions;
        hasOwnPage = true;
      } else {
        linkOrOptions.title && (title = linkOrOptions.title);
        link = linkOrOptions.url;
        hasOwnPage = typeof linkOrOptions.page === 'undefined'
          ? true
          : linkOrOptions.page;
      }
      linkItems = tupleOrLinkOrItems[1];
    } else {
      // Only subitems specified.
      linkItems = tupleOrLinkOrItems;
    }

    link = link ? `${base}/${link}` : undefined;
    result.push({
      text: title,
      link: hasOwnPage ? link : undefined,
      items: itemsToConfigItems(linkItems, link || base),
      collapsed: true,
    });
  }

  return result;
}

/**
 * Creates a new config item generator.
 * @param base - items' link base.
 */
export function sectionGen(base: string) {
  return (title: string, items: Items): SidebarItem => ({
    text: title,
    items: itemsToConfigItems(items, base),
  });
}
```
---
## File: apps/docs/packages/telegram-apps-bridge/2-x/advanced.md

```markdown
# Advanced

This article covers advanced usage of the bridge.

## Calling Method, Receiving Event

The `request` function should be used when a developer needs to call a Telegram Mini Apps method and
receive a specific event.

For example, to call
the [web_app_request_viewport](../../../platform/methods.md#web-app-request-viewport) method and catch
the [viewport_changed](../../../platform/events.md#viewport-changed) event for actual viewport data:

```typescript
import { request } from '@telegram-apps/bridge';

await request('web_app_request_viewport', 'viewport_changed');
// {
//   is_state_stable: true,
//   is_expanded: false,
//   height: 320
// };
```

If the Telegram Mini Apps method accepts parameters, they should be passed in the `params` property
of the third argument:

```typescript
const { button_id } = await request('web_app_open_popup', 'popup_closed', {
  params: {
    title: 'Caution',
    message: 'Should we delete your account?',
    buttons: [
      { id: 'yes', type: 'ok' },
      { id: 'no', type: 'cancel' },
    ],
  },
});
```

It is also allowed to track several events at the same time:

```typescript
await request(
  'web_app_open_scan_qr_popup',
  ['qr_text_received', 'scan_qr_popup_closed'],
);

// The result will either be the qr_text_received 
// or scan_qr_popup_closed event payload.
```

This function allows passing additional options such as `postEvent`, `abortSignal`, `timeout`,
and `capture`.

### `postEvent`

The `postEvent` option allows a developer to override the method used to call the Telegram Mini Apps
method.

```typescript
request('web_app_request_viewport', 'viewport_changed', {
  postEvent() {
    console.log('Hey, I am not going to do anything. Live with that');
  },
});
```

### `abortSignal`

To abort the returned promise externally, the `abortSignal` option is used.

```ts
const controller = new AbortController();

request('web_app_request_viewport', 'viewport_changed', {
  abortSignal: controller.signal,
});

setTimeout(() => {
  controller.abort(new Error('Not going to wait anymore'));
}, 500);
```

### `timeout`

The `timeout` option assigns a timeout to the request.

```typescript
import { request } from '@telegram-apps/bridge';

try {
  await request(
    'web_app_invoke_custom_method',
    'custom_method_invoked',
    {
      timeout: 5000,
      params: {
        req_id: '1',
        method: 'deleteStorageValues',
        params: { keys: ['a'] },
      },
    },
  );
} catch (e) {
  console.error(e); // e.name will be 'TimeoutError'
}
```

#### `capture`

The `capture` property is a function that allows developers to determine if an occurred Mini Apps
event should be captured and returned from the `request` function:

```typescript
const slug = 'jjKSJnm1k23lodd';

request('web_app_open_invoice', 'invoice_closed', {
  params: { slug },
  capture(data) {
    return slug === data.slug;
  },
});
```

By default, the `request` function captures the first event with the required name. In this case,
the function will capture the event only if it has the expected slug, specific for the
[invoice_closed](../../../platform/events.md#invoice-closed) event.

When passing an array of events, the `capture` function will receive an object with
the `event: EventName` and `payload?: EventPayload` properties.

## Invoking Custom Methods

Custom methods are those methods which can be used with
the [web_app_invoke_custom_method](../../../platform/methods.md#web-app-invoke-custom-method) Mini
Apps
method.

The `invokeCustomMethod` function simplifies the usage of such methods by reusing the `request`
function.

Hereâ€™s an example without using this function:

```typescript
const reqId = 'ABC';

request('web_app_invoke_custom_method', 'custom_method_invoked', {
  params: {
    req_id: reqId,
    method: 'deleteStorageValues',
    params: { keys: ['a'] },
  },
  capture(data) {
    return data.req_id === reqId;
  }
})
  .then(({ data, error }) => {
    if (error) {
      throw new Error(error);
    }
    return data;
  })
  .then(data => {
    console.log('We got some data', data);
  });
```

Now, rewritten using the `invokeCustomMethod` function:

```typescript
import { invokeCustomMethod } from '@telegram-apps/bridge';

invokeCustomMethod('deleteStorageValues', { keys: ['a'] }, 'ABC')
  .then(data => {
    console.log('We got some data', data);
  });
```

Internally, it just encapsulates a specific logic related to the methods, so a developer shouldn't
do it.

Unlike the `request` function, the `invokeCustomMethod` function parses the result and checks if it
contains the `error` property. If it does, the function throws the corresponding error; otherwise,
the `result` property is returned.
```
---
## File: apps/docs/packages/telegram-apps-bridge/2-x/environment.md

```markdown
# Environment

This package is designed to be used only inside the Telegram application. Since non-Telegram
environments lack Telegram-specific traits, calling methods such
as [retrieveLaunchParams](launch-parameters.md) or [postEvent](methods.md#postevent) will lead to
errors.

Nevertheless, the package provides utilities that help developers either develop the application
outside of Telegram or determine if the current environment is not a Telegram Mini App at all.

## Validating Current Environment

To check if the current environment is Telegram Mini Apps, a developer can use the `isTMA` function.
It works in two modes: **simple** and **complete**.

### Simple

In this mode, the function attempts to retrieve launch parameters from the environment.

If the extraction is successful, the environment is considered Telegram Mini Apps.
Simple mode is synchronous and returns a boolean value.

```ts
import { isTMA } from '@telegram-apps/bridge';

if (isTMA()) {
  // ...
}
```

This mode is somewhat superficial but may still be sufficient for most applications. For a more
reliable check, use the [complete](#complete) mode.

### Complete

In this mode, the function calls a Telegram Mini Apps-specific method and waits for a
method-specific event to occur.

```ts
import { isTMA } from '@telegram-apps/bridge';

if (await isTMA('complete')) {
  console.log('It\'s Telegram Mini Apps');
}
```

The function waits for an event for 100 milliseconds and most of the time it is enough, but a
developer can change this behavior by passing an object as the second argument with
the `timeout: number` property.

```ts
if (await isTMA('complete', { timeout: 50 })) {
  console.log('It\'s Telegram Mini Apps');
}
```

## Mocking Environment

The package provides the `mockTelegramEnv` function, which imitates the environment provided by
Telegram. It helps developers start building applications even without creating a mini app record in
[BotFather](https://t.me/botfather).

This function optionally accepts an object with two optional propertiesâ€”**launchParams** and
**onEvent**.

### `launchParams`

Launch parameters to use in the mock. It can be presented as a query parameters
list (a string or a `URLSearchParams` instance) described
in [this](../../../platform/launch-parameters) article, or launch parameters-like object with the
`tgWebAppData` property missing, or presented as a query parameters list described
in [this](../../../platform/init-data#parameters-list) article.

> [!TIP]
> Don't worry, this value will be validated, and the package will let you know that something is off.

### `onEvent`

Function that will be called in case any Mini Apps method was called by your
application. It allows a developer to define a custom handling behavior if needed.

The function receives a tuple, containing the method name as the first argument, and its payload as
the second one.

As the second argument, it accepts a function that attempts to call the native `postEvent`
function usually defined by the Telegram client. So, the `mockTelegramEnv` function may be used
even inside Telegram Mini Apps environment to intercept all methods' calls and pass them further
if needed.

### Example

Here is the complete example you may use in your application:

```ts
import { mockTelegramEnv, emitEvent } from '@telegram-apps/bridge';

const noInsets = {
  left: 0,
  top: 0,
  bottom: 0,
  right: 0,
} as const;
const themeParams = {
  accent_text_color: '#6ab2f2',
  bg_color: '#17212b',
  button_color: '#5288c1',
  button_text_color: '#ffffff',
  destructive_text_color: '#ec3942',
  header_bg_color: '#17212b',
  hint_color: '#708499',
  link_color: '#6ab3f3',
  secondary_bg_color: '#232e3c',
  section_bg_color: '#17212b',
  section_header_text_color: '#6ab3f3',
  subtitle_text_color: '#708499',
  text_color: '#f5f5f5',
} as const;

mockTelegramEnv({
  launchParams: {
    tgWebAppThemeParams: themeParams,
    tgWebAppData: new URLSearchParams([
      ['user', JSON.stringify({
        id: 1,
        first_name: 'Pavel',
      })],
      ['hash', ''],
      ['signature', ''],
      ['auth_date', Date.now().toString()],
    ]),
    tgWebAppStartParam: 'debug',
    tgWebAppVersion: '8',
    tgWebAppPlatform: 'tdesktop',
  },
  onEvent(e) {
    if (e[0] === 'web_app_request_theme') {
      return emitEvent('theme_changed', { theme_params: themeParams });
    }
    if (e[0] === 'web_app_request_viewport') {
      return emitEvent('viewport_changed', {
        height: window.innerHeight,
        width: window.innerWidth,
        is_expanded: true,
        is_state_stable: true,
      });
    }
    if (e[0] === 'web_app_request_content_safe_area') {
      return emitEvent('content_safe_area_changed', noInsets);
    }
    if (e[0] === 'web_app_request_safe_area') {
      return emitEvent('safe_area_changed', noInsets);
    }
  },
});
```

```
---
## File: apps/docs/packages/telegram-apps-bridge/2-x/events.md

```markdown
# Events

This article covers topics related to [apps communication](../../platform/apps-communication.md)
events.

## Tracking Events

To start tracking events, use the `on`. It returns a new function, removing the bound event
listener.

```typescript
import { on } from '@telegram-apps/bridge';

// Start listening to the "viewport_changed" event. The returned value
// is a function that removes this event listener.
const removeListener = on('viewport_changed', (payload) => {
  console.log('Viewport changed:', payload);
  // Remove this event listener.
  removeListener();
});
```

Alternatively, to stop listening to the event, a developer can use the `off` function:

```typescript
import { on, off, type EventListener } from '@telegram-apps/bridge';

const listener: EventListener<'viewport_changed'> = (payload) => {
  console.log('Viewport changed:', payload);
  // Remove the event listener.
  off('viewport_changed', listener);
};

// Start listening to the event.
on('viewport_changed', listener);

```

### One-Time Listener

To call the listener only once and remove it after, the third boolean argument is used:

```typescript
import { on } from '@telegram-apps/bridge';

// the listener will automatically be removed after the first 
// its execution.
on('viewport_changed', payload => {
  console.log('Viewport changed:', payload);
}, true);
```

### Wildcard Listener

In case, it is required to track all events, pass the `*` value as the first argument. In this case,
the listener will receive a tuple containing two elements: the event name and its payload.

```ts
import { on } from '@telegram-apps/bridge';

on('*', event => {
  if (event[0] === 'viewport_changed') {
    console.log('Viewport changed:', event[1]);
    return;
  }
  // ...
});
```

> [!TIP] Why tuple?
> The listener receives a tuple for better typing when using TypeScript.

```
---
## File: apps/docs/packages/telegram-apps-bridge/2-x/globals.md

```markdown
# Globals

By globals, we mean global values used across methods in the package.

## Enabling Debug Mode

Enabling debug mode will lead to showing additional useful logs. To enable or disable it,
use the `setDebug` function:

```typescript
import { setDebug } from '@telegram-apps/bridge';

setDebug(true);
```

After setting it to `true`, you will see logs when calling the `postEvent` function or receiving
Mini Apps events.

## `targetOrigin`

If the package is used in a browser environment (iframe), it employs the `window.parent.postMessage`
function. This function requires specifying the target origin to ensure events are only sent to
trusted parent iframes. By default, the package uses `https://web.telegram.org` as the origin.

```typescript
import { targetOrigin } from '@telegram-apps/bridge';

targetOrigin.set('https://i-know-what-i-am.doing');
```

> [!WARNING]
> It is strongly recommended not to override this value, as it could lead to security issues.
> Specify this value only when you are certain of its impact.

```
---
## File: apps/docs/packages/telegram-apps-bridge/2-x/launch-parameters.md

```markdown
# Launch Parameters

Launch parameters are essential to the mini application lifecycle. To learn more about what launch
parameters are and their importance, it is worth reading [this](../../../platform/launch-parameters)
article.

## Retrieving Launch Parameters

This package allows a developer to extract launch parameters from the current environment using
the `retrieveLaunchParams` function. It tries to retrieve them from all possible sources, and if it
fails, an error will be thrown.

```typescript
import { retrieveLaunchParams } from '@telegram-apps/bridge';

retrieveLaunchParams();
// {
//   tgWebAppBotInline: false,
//   tgWebAppData: {
//     user: { ... },
//     auth_date: Date(...),
//     query_id: ...,
//     hash: ...
//   },
//   ...
// };
```

To retrieve launch params deeply converted to camel case, pass the `true` value as the first
argument:

```ts
retrieveLaunchParams(true);
// {
//   tgWebAppBotInline: false,
//   tgWebAppData: {
//     user: { ... },
//     authDate: Date(...),
//     queryId: ...
//     hash: ...
//   },
//   ...
// };
```

### Raw

To retrieve launch parameters in their initial formatâ€”as query parameters, use
the `retrieveRawLaunchParams` function:

```ts
import { retrieveRawLaunchParams } from '@telegram-apps/bridge';

retrieveRawLaunchParams();
// tgWebAppBotInline=0&tgWebAppData=%7B%22user%22%3A%7B%7D%2C%22auth_date%22%3A1787367222%2C%22query_id%22%3A%22abc%22%7D...&...
```

## Retrieving Raw Init Data

It is a rather common case when the application requires extracting init data in its raw format
to send to a backend server then. You must not use the `retrieveLaunchParams` function and then
manipulate the `tgWebAppData` value, but utilize the `retrieveRawInitData` function designed for
this purpose:

```ts
import { retrieveRawInitData } from '@telegram-apps/bridge';

retrieveRawInitData();
// '{"user":...,"auth_date":...,"query_id":...,...}'
```

The reason is using something else rather than this function, there is no guarantee that the init
data will not become malformed. This is the only function which guarantees that the returned
value will be returned unmodified, as it was passed by the Telegram client.
```
---
## File: apps/docs/packages/telegram-apps-bridge/2-x/methods.md

```markdown
# Methods

This article covers topics related to [apps communication](../../platform/apps-communication.md)
methods.

## Calling Methods

To call Telegram Mini Apps methods, developers should use the `postEvent` function:

```typescript
import { postEvent } from '@telegram-apps/bridge';

postEvent('web_app_setup_back_button', { is_visible: true });
```

This function automatically determines the correct way to send the event based on the current
environment. It identifies the Telegram app type and selects the appropriate flow.

## Checking Method Support

By default, the `postEvent` function does not check if the specified method is supported by the
current Telegram app. To do this, the `supports` function is used.

It accepts a Mini Apps method name and the current platform version:

```typescript
import { supports } from '@telegram-apps/bridge';

supports('web_app_trigger_haptic_feedback', '6.0'); // false
supports('web_app_trigger_haptic_feedback', '6.1'); // true
```

The `supports` function also allows checking if a specific parameter in the method parameters is
supported:

```typescript
import { supports } from '@telegram-apps/bridge';

supports('web_app_open_link', 'try_instant_view', '6.0'); // false
supports('web_app_open_link', 'try_instant_view', '6.7'); // true
```

> [!TIP]
> It is recommended to use this function before calling Mini Apps methods to prevent apps from
> stalling or encountering unexpected behavior.

## Creating Safer `postEvent`

This package includes a function named `createPostEvent` that takes the current Mini Apps version as
input.

It returns a new `postEvent` function, which internally checks if the passed method and
parameters are supported.

```typescript
import { createPostEvent } from '@telegram-apps/bridge';

const postEvent = createPostEvent('6.5');

// Will work fine.
postEvent('web_app_read_text_from_clipboard');

// Will throw an error, this method is not supported 
// in Mini Apps version 6.5.
postEvent('web_app_request_phone');
```

As a second optional argument, the function accepts a callback that is called if the method or
parameter is unsupported.

```ts
createPostEvent('6.0', data => {
  if ('param' in data) {
    console.warn(
      'Oops, the parameter', data.param,
      'in method', data.method,
      'is not supported',
    );
  } else {
    console.warn('Oops, method', data.method, 'is not supported');
  }
});
```

Despite the fact, that it is not recommended, to log warnings instead of throwing errors,
the `'non-strict'` value can be passed:

```ts
const postEvent = createPostEvent('6.5', 'non-strict');

// Will work fine.
postEvent('web_app_read_text_from_clipboard');

// Will show a warning in the console, stating that specified
// method is unsupported in version 6.5. Nothing else will happen.
postEvent('web_app_request_phone');
```
```
---
## File: apps/docs/packages/telegram-apps-bridge/2-x/migrate-v1-v2.md

```markdown
# Migrating from v1 to v2

This guide provides a summary of the migration process from version 1 to version 2 of the `@telegram-apps/bridge`
package.

## Changes to `retrieveLaunchParams`

### Native key naming

In version 3, the returned launch parameters now preserve the original key names passed by the Telegram client. That
means all keys use the `tgWebApp` prefix and are no longer modified into camelCase by default.

Additionally, the result now includes all parametersâ€”even those not explicitly typedâ€”to better support future updates.

You can optionally pass `true` as an argument to `retrieveLaunchParams()` if you want the result to be deeply
camelCased, similar to v1 behavior.

Be sure to update any usages of v1-style keys like `themeParams` or `initData` to their new equivalents, such as
`tgWebAppThemeParams` and `tgWebAppData`. The `initData` property has been renamed to its original form: `tgWebAppData`.

:::code-group

```ts [v1]
import { retrieveLaunchParams } from '@telegram-apps/bridge';

retrieveLaunchParams();
// Returns:
// {
//   botInline: false,
//   initData: {
//     user: { ... },
//     authDate: Date(...),
//     queryId: ...,
//     hash: ...
//   },
//   ...
// };
```

```ts [v2]
import { retrieveLaunchParams } from '@telegram-apps/bridge';

retrieveLaunchParams();
// Returns:
// {
//   tgWebAppBotInline: false,
//   tgWebAppData: {
//     user: { ... },
//     auth_date: Date(...),
//     query_id: ...,
//     hash: ...
//   },
//   ...
// };
```

```ts [v2 with true]
import { retrieveLaunchParams } from '@telegram-apps/bridge';

retrieveLaunchParams(true);
// Returns:
// {
//   tgWebAppBotInline: false,
//   tgWebAppData: {
//     user: { ... },
//     authDate: Date(...),
//     queryId: ...,
//     hash: ...
//   },
//   ...
// };
```

:::

### `initDataRaw` moved

Since the raw init data isn't technically a separate launch parameter, it's now retrieved via a new function:
`retrieveRawInitData()`.

:::code-group

```ts [v1]
import { retrieveLaunchParams } from '@telegram-apps/bridge';

retrieveLaunchParams().initDataRaw;
// â†’ '{"user":...,"auth_date":...,"query_id":...,...}'
```

```ts [v2]
import { retrieveRawInitData } from '@telegram-apps/bridge';

retrieveRawInitData();
// â†’ '{"user":...,"auth_date":...,"query_id":...,...}'
```

:::

## Changes to `mockTelegramEnv`

### Changes to the argument

The function now accepts an object with optional properties `launchParams`, `onEvent` and `resetPostMessage`.

In v2, the `launchParams` option passed to `mockTelegramEnv` supports:

- Query string format (`string` or `URLSearchParams`)
- Object with the same shape returned by `retrieveLaunchParams()`

However, note one key requirement: if using an object `launchParams`, the `tgWebAppData` value must be provided as a
query string, since `retrieveRawInitData()` needs access to that exact format to work correctly.

## Changes to signals

### `$debug` variable removed

The `$debug` variable was removed from the package exports. To set debug mode, use the `setDebug` function.

:::code-group

```ts [v1]
import { $debug } from '@telegram-apps/bridge';

$debug.set(true);
```

```ts [v2]
import { setDebug } from '@telegram-apps/bridge';

setDebug(true);
```

:::

### `$targetOrigin` variable renamed

The `$targetOrigin` variable was renamed to `targetOrigin`.

:::code-group

```ts [v1]
import { $targetOrigin } from '@telegram-apps/bridge';

$targetOrigin.set('https://my-domain.com');
```

```ts [v2]
import { targetOrigin } from '@telegram-apps/bridge';

targetOrigin.set('https://my-domain.com');
```

:::

## Changes to `isTMA`

The default mode for this function is now `simple`. To use the synchronous way, use the `complete` value.

:::code-group

```ts [v1]
import { isTMA } from '@telegram-apps/bridge';

if (isTMA('simple')) {
  // ...
}

if (await isTMA()) {
  // ...
}
```

```ts [v2]
import { isTMA } from '@telegram-apps/bridge';

if (isTMA()) {
  // ...
}

if (await isTMA('complete')) {
  // ...
}
```

:::

## Changes to events listening

The functions `susbcribe`, `unsubscribe` were removed in favor of the `on` function. To start listening to all events,
use the `on(*, ...)` expression. To remove bound global listener, use the `off('*', ...)` expression.

:::code-group

```ts [v1]
import { susbcribe, unsubscribe } from '@telegram-apps/bridge';

function handler(event) {

}

susbcribe(handler);
unsubscribe(handler);
```

```ts [v2]
import { on, off } from '@telegram-apps/bridge';

function handler(event) {

}

on('*', handler);
off('*', handler);
```

:::

The function `defineEventHandlers` was also removed. You now have no need to define any special event handlers yourself.
```
---
## File: apps/docs/packages/telegram-apps-bridge/2-x.md

```markdown
# @telegram-apps/bridge@2

<p style="display: flex; gap: 8px; min-height: 20px">
  <a href="https://npmjs.com/package/@telegram-apps/bridge">
    <img src="https://img.shields.io/npm/v/@telegram-apps/bridge?logo=npm"/>
  </a>
  <img src="https://img.shields.io/bundlephobia/minzip/@telegram-apps/bridge"/>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/packages/bridge">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

The lowest level communication layer with Telegram Mini Apps.

This package provides fundamental utilities and types for developing applications on the Telegram
Mini Apps platform.

While a developer can use this package alone, it's recommended to use a higher-level package
like [@telegram-apps/sdk](telegram-apps-sdk/2-x).

## Installation

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/bridge
```

```bash [npm]
npm i @telegram-apps/bridge
```

```bash [yarn]
yarn add @telegram-apps/bridge
```

:::

## Usage

Hereâ€™s a basic example of how to use this package. For more details, refer to the next articles in
the documentation.

```ts
import { on, postEvent, applyPolyfills } from '@telegram-apps/bridge';

// Apply polyfills for Object.hasOwn. Bridge validators use it.
applyPolyfills();

// Show the back button, wait for it to be clicked once,
// then hide it.
postEvent('web_app_setup_back_button', { is_visible: true });

const off = on('back_button_pressed', () => {
  postEvent('web_app_setup_back_button', { is_visible: false });
  off();
});
```
```
---
## File: apps/docs/packages/telegram-apps-bridge/environment.md

```markdown
# Environment

This package is designed to be used only inside the Telegram application. Since non-Telegram
environments lack Telegram-specific traits, calling methods such
as [retrieveLaunchParams](launch-parameters.md) or [postEvent](methods.md#postevent) will lead to
errors.

Nevertheless, the package provides utilities that help developers either develop the application
outside of Telegram or determine if the current environment is not a Telegram Mini App at all.

## `isTMA`

To check if the current environment is Telegram Mini Apps, a developer can use the `isTMA` function.
It works in two modes: **simple** and **complete**.

### Simple

In this mode, the function attempts to retrieve launch parameters from the environment.

If the extraction is successful, the environment is considered Telegram Mini Apps.
Simple mode is synchronous and returns a boolean value.

```ts
import { isTMA } from '@telegram-apps/bridge';

if (isTMA('simple')) {
  console.log('It\'s Telegram Mini Apps');
}
```

This mode is somewhat superficial but may still be sufficient for most applications. For a more
reliable check, use the [complete](#complete) mode.

### Complete

In this mode, the function calls a Telegram Mini Apps-specific method and waits for a
method-specific event to occur.

```ts
import { isTMA } from '@telegram-apps/bridge';

if (await isTMA()) {
  console.log('It\'s Telegram Mini Apps');
}
```

The function waits for an event for 100 milliseconds, but a developer can change this time
by passing an object with the `timeout: number` property.

```ts
if (await isTMA({ timeout: 50 })) {
  console.log('It\'s Telegram Mini Apps');
}
```

## `mockTelegramEnv`

The package provides the `mockTelegramEnv` function, which imitates the environment provided by
Telegram. It helps developers start building applications even without creating a mini app record in
[BotFather](https://t.me/botfather).

This function accepts launch parameters in raw or parsed format. Here is an example:

```ts
mockTelegramEnv({
  themeParams: {
    accentTextColor: '#6ab2f2',
    bgColor: '#17212b',
    buttonColor: '#5288c1',
    buttonTextColor: '#ffffff',
    destructiveTextColor: '#ec3942',
    headerBgColor: '#17212b',
    hintColor: '#708499',
    linkColor: '#6ab3f3',
    secondaryBgColor: '#232e3c',
    sectionBgColor: '#17212b',
    sectionHeaderTextColor: '#6ab3f3',
    subtitleTextColor: '#708499',
    textColor: '#f5f5f5',
  },
  initData: {
    user: {
      id: 99281932,
      firstName: 'Andrew',
      lastName: 'Rogue',
      username: 'rogue',
      languageCode: 'en',
      isPremium: true,
      allowsWriteToPm: true,
    },
    hash: '89d6079ad6762351f38c6dbbc41bb53048019256a9443988af7a48bcad16ba31',
    authDate: new Date(1716922846000),
    signature: 'abc',
    startParam: 'debug',
    chatType: 'sender',
    chatInstance: '8428209589180549439',
  },
  initDataRaw: new URLSearchParams([
    ['user', JSON.stringify({
      id: 99281932,
      first_name: 'Andrew',
      last_name: 'Rogue',
      username: 'rogue',
      language_code: 'en',
      is_premium: true,
      allows_write_to_pm: true,
    })],
    ['hash', '89d6079ad6762351f38c6dbbc41bb53048019256a9443988af7a48bcad16ba31'],
    ['auth_date', '1716922846'],
    ['start_param', 'debug'],
    ['signature', 'abc'],
    ['chat_type', 'sender'],
    ['chat_instance', '8428209589180549439'],
  ]).toString(),
  version: '7.2',
  platform: 'tdesktop',
});
```

> [!WARNING]
> This function only imitates Telegram environment behavior. It doesn't send any real
> requests or perform actions that will only be visible in the Telegram application.

```
---
## File: apps/docs/packages/telegram-apps-bridge/events.md

```markdown
# Events

This article covers topics related to [apps communication](../../platform/apps-communication.md)
events.

## Define Event Handlers

To avoid side effects, this package does not call any functions upon import. Telegram Mini Apps
require a specific way of communication between the native Telegram app and the mini application,
which involves defining certain methods in the global `window` object.

To enable this and start receiving Telegram Mini Apps events, use the `defineEventHandlers`
function:

```typescript
import { defineEventHandlers } from '@telegram-apps/bridge';

defineEventHandlers();
```

This setup ensures that the mini app can properly interact with the native Telegram app by listening
for and handling the necessary events.

## `on` and `off`

To start working with events, the `on` and `off` functions are used.

Hereâ€™s a basic example of the `on` function:

```typescript
import { on } from '@telegram-apps/bridge';

// Start listening to the "viewport_changed" event. The returned value
// is a function that removes this event listener.
const removeListener = on('viewport_changed', (payload) => {
  console.log('Viewport changed:', payload);
});

// Remove this event listener.
removeListener();
```

Alternatively, to stop listening to events, a developer can use the `off` function:

```typescript
import { on, off, type EventListener } from '@telegram-apps/bridge';

const listener: EventListener<'viewport_changed'> = (payload) => {
  console.log('Viewport changed:', payload);
};

// Start listening to the event.
on('viewport_changed', listener);

// Remove the event listener.
off('viewport_changed', listener);
```

To call the listener only once, the third boolean argument is used:

```typescript
import { on } from '@telegram-apps/bridge';

// Will automatically be removed after the first listener execution.
on('viewport_changed', (payload) => {
  console.log('Viewport changed:', payload);
}, true);
```

## `subscribe` and `unsubscribe`

To listen to all events sent from the native Telegram application, the `subscribe`
and `unsubscribe` functions are used:

```typescript
import {
  subscribe,
  unsubscribe,
  type SubscribeListener,
} from '@telegram-apps/bridge';

const listener: SubscribeListener = (event) => {
  console.log('Received event', event);
};

// Listen to all events.
subscribe(listener);

// Remove the listener.
unsubscribe(listener);
```

```
---
## File: apps/docs/packages/telegram-apps-bridge/globals.md

```markdown
# Globals

By globals, we mean global values used across methods in the package.

## `$debug`

The `$debug` signal is responsible for enabling or disabling additional debug logs.

```typescript
import { $debug } from '@telegram-apps/bridge';

$debug.set(true);
```

After setting it to `true`, you will see logs when calling the `postEvent` function or receiving
Mini Apps events.

## `$targetOrigin`

If the package is used in a browser environment (iframe), it employs the `window.parent.postMessage`
function. This function requires specifying the target origin to ensure events are only sent to
trusted parent iframes. By default, the package uses `https://web.telegram.org` as the origin.

```typescript
import { $targetOrigin } from '@telegram-apps/bridge';

$targetOrigin.set('https://i-know-what-i-am.doing');
```

> [!WARNING]
> It is strongly recommended not to override this value, as it could lead to security issues.
> Specify this value only when you are certain of its impact.

```
---
## File: apps/docs/packages/telegram-apps-bridge/launch-parameters.md

```markdown
# Launch Parameters

Launch parameters are essential to the mini application lifecycle. To learn more about what launch
parameters are and their importance, it is worth reading [this](../../platform/launch-parameters.md)
article.

This package allows a developer to extract launch parameters from the current environment using
the `retrieveLaunchParams` function. It tries to retrieve them from all possible sources, and if it
fails, an error will be thrown.

```typescript
import { retrieveLaunchParams } from '@telegram-apps/bridge';

const launchParams = retrieveLaunchParams();
```
```
---
## File: apps/docs/packages/telegram-apps-bridge/methods.md

```markdown
# Methods

This article covers topics related to [apps communication](../../platform/apps-communication.md)
methods.

## Calling Methods

To call Telegram Mini Apps methods, developers should use the `postEvent` function:

```typescript
import { postEvent } from '@telegram-apps/bridge';

postEvent('web_app_setup_back_button', { is_visible: true });
```

This function automatically determines the correct way to send the event based on the current
environment. It identifies the Telegram app type and selects the appropriate flow.

### `request`

The `request` function should be used when a developer needs to call a Telegram Mini Apps method and
receive a specific event.

For example, to call
the [web_app_request_viewport](../../platform/methods.md#web-app-request-viewport) method and catch
the [viewport_changed](../../platform/events.md#viewport-changed) event for actual viewport data:

```typescript
import { request } from '@telegram-apps/bridge';

const viewport = await request(
  'web_app_request_viewport',
  'viewport_changed',
);

console.log(viewport);
// Output:
// {
//   is_state_stable: true,
//   is_expanded: false,
//   height: 320
// };
```

If the Telegram Mini Apps method accepts parameters, they should be passed in the `params` property
of the third argument:

```typescript
const buttonId = await request('web_app_open_popup', 'popup_closed', {
  params: {
    title: 'Caution',
    message: 'Should we delete your account?',
    buttons: [
      { id: 'yes', type: 'ok' },
      { id: 'no', type: 'cancel' },
    ],
  },
});
```

It is also allowed to track several events at the same time:

```typescript
const result = await request(
  'web_app_open_scan_qr_popup',
  ['qr_text_received', 'scan_qr_popup_closed'],
);

// The result will either be the qr_text_received 
// or scan_qr_popup_closed event payload.
```

This function allows passing additional options such as `postEvent`, `abortSignal`, `timeout`,
and `capture`.

#### `postEvent`

The `postEvent` option allows a developer to override the method used to call the Telegram Mini Apps
method.

```typescript
request('web_app_request_viewport', 'viewport_changed', {
  postEvent() {
    console.log('Hey, I am not going to do anything');
  },
});
```

#### `abortSignal`

To abort the returned promise externally, the `abortSignal` option is used.

```ts
const controller = new AbortController();

request('web_app_request_viewport', 'viewport_changed', {
  abortSignal: controller.signal,
});

setTimeout(() => {
  controller.abort(new Error('Not going to wait anymore'));
}, 500);
```

#### `timeout`

The `timeout` option assigns a timeout to the request.

```typescript
import { request } from '@telegram-apps/bridge';

try {
  await request(
    'web_app_invoke_custom_method',
    'custom_method_invoked',
    {
      timeout: 5000,
      params: {
        req_id: '1',
        method: 'deleteStorageValues',
        params: { keys: ['a'] },
      },
    },
  );
} catch (e) {
  console.error(e); // TypedError with e.type === 'ERR_TIMED_OUT'
}
```

#### `capture`

The `capture` property is a function that allows developers to determine if an occurred Mini Apps
event should be captured and returned from the `request` function:

```typescript
const slug = 'jjKSJnm1k23lodd';

request('web_app_open_invoice', 'invoice_closed', {
  params: { slug },
  capture(data) {
    return slug === data.slug;
  },
});
```

By default, the `request` function captures the first event with the required name. In this case,
the function will capture the event only if it has the expected slug, specific for the
[invoice_closed](../../platform/events.md#invoice-closed) event.

When passing an array of events, the `capture` function will receive an object with
the `event: EventName` and `payload?: EventPayload` properties.

## Invoking Custom Methods

Custom methods are those methods which can be used with
the [web_app_invoke_custom_method](../../platform/methods.md#web-app-invoke-custom-method) Mini Apps
method.

The `invokeCustomMethod` function simplifies the usage of such methods by reusing the `request`
function.

Hereâ€™s an example without using this function:

```typescript
const reqId = 'ABC';

request('web_app_invoke_custom_method', 'custom_method_invoked', {
  params: {
    req_id: reqId,
    method: 'deleteStorageValues',
    params: { keys: ['a'] },
  },
  capture(data) {
    return data.req_id === reqId;
  }
});
```

Now, rewritten using the `invokeCustomMethod` function:

```typescript
import { invokeCustomMethod } from '@telegram-apps/bridge';

invokeCustomMethod('deleteStorageValues', { keys: ['a'] }, 'ABC');
```

Internally, it just encapsulates a specific logic related to the methods, so a developer shouldn't
do it.

Unlike the `request` function, the `invokeCustomMethod` function parses the result and checks if it
contains the `error` property. If it does, the function throws the corresponding error; otherwise,
the `result` property is returned.

## Checking Method Support

The `postEvent` function does not check if the specified method is supported by the current Telegram
app. To do this, the `supports` function is used.

It accepts a Mini Apps method name and the current platform version:

```typescript
import { supports } from '@telegram-apps/bridge';

supports('web_app_trigger_haptic_feedback', '6.0'); // false
supports('web_app_trigger_haptic_feedback', '6.1'); // true
```

The `supports` function also allows checking if a specific parameter in the method parameters is
supported:

```typescript
import { supports } from '@telegram-apps/bridge';

supports('web_app_open_link', 'try_instant_view', '6.0'); // false
supports('web_app_open_link', 'try_instant_view', '6.7'); // true
```

> [!TIP]
> It is recommended to use this function before calling Mini Apps methods to prevent apps from
> stalling or encountering unexpected behavior.

## Creating Safer `postEvent`

This package includes a function named `createPostEvent` that takes the current Mini Apps version as
input.

It returns the `postEvent` function, which internally checks if the passed method and
parameters are supported.

```typescript
import { createPostEvent } from '@telegram-apps/bridge';

const postEvent = createPostEvent('6.5');

// Will work fine.
postEvent('web_app_read_text_from_clipboard');

// Will throw an error, this method is not supported 
// in Mini Apps version 6.5.
postEvent('web_app_request_phone');
```

As a second optional argument, the function accepts a callback that is called if the method or
parameter is unsupported.

```ts
createPostEvent('6.0', (data) => {
  if ('param' in data) {
    console.warn(
      'Oops, the parameter', data.param,
      'in method', data.method,
      'is not supported',
    );
  } else {
    console.warn('Oops, method', data.method, 'is not supported');
  }
});
```

To log warnings instead of throwing errors, the `'non-strict'` value can be passed:

```ts
createPostEvent('6.0', 'non-strict');
```
```
---
## File: apps/docs/packages/telegram-apps-init-data-node/2-x.md

```markdown
---
outline: [2, 3]
---

# @telegram-apps/init-data-node@2

<p style="display: flex; gap: 8px; min-height: 20px">
  <a href="https://npmjs.com/package/@telegram-apps/init-data-node">
    <img src="https://img.shields.io/npm/v/@telegram-apps/init-data-node?logo=npm"/>
  </a>
  <img src="https://img.shields.io/bundlephobia/minzip/@telegram-apps/init-data-node"/>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/packages/init-data-node">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

The package provides utilities to work with the initialization data of Telegram Mini Apps on the
server side. To learn more about the initialization data and its usage, please refer to
the [documentation](../platform/init-data.md).

## Installation

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/init-data-node
```

```bash [npm]
npm i @telegram-apps/init-data-node
```

```bash [yarn]
yarn add @telegram-apps/init-data-node
```

:::

## Parsing

To parse a value as init data, use the `parse` method.

The method accepts init data presented as a `string` or `URLSearchParams`.

```ts
import { parse } from '@telegram-apps/init-data-node';

try {
  const initData = parse('...');
  // {
  //   can_send_after: 10000,
  //   chat: {
  //     id: 1,
  //     type: 'group',
  //     username: 'my-chat',
  //     title: 'chat-title',
  //     photo_url: 'chat-photo',
  //   },
  //   chat_instance: '888',
  //   chat_type: 'sender',
  //   query_id: 'QUERY',
  //   receiver: {
  //     added_to_attachment_menu: false,
  //     allows_write_to_pm: true,
  //     first_name: 'receiver-first-name',
  //     id: 991,
  //     is_bot: false,
  //     is_premium: true,
  //     language_code: 'ru',
  //     last_name: 'receiver-last-name',
  //     photo_url: 'receiver-photo',
  //     username: 'receiver-username',
  //   },
  //   start_param: 'debug',
  //   user: {
  //     added_to_attachment_menu: false,
  //     allows_write_to_pm: false,
  //     first_name: 'user-first-name',
  //     id: 222,
  //     is_bot: true,
  //     is_premium: false,
  //     language_code: 'en',
  //     last_name: 'user-last-name',
  //     photo_url: 'user-photo',
  //     username: 'user-username',
  //   },
  // }
} catch (e) {
  console.error('Something is wrong', e);
}
```

To return a value camel-cased, pass `true` as the second argument:

```ts
try {
  const initData = parse('...', true);
  // {
  //   canSendAfter: 10000,
  //   chat: {
  //     id: 1,
  //     type: 'group',
  //     username: 'my-chat',
  //     title: 'chat-title',
  //     photoUrl: 'chat-photo',
  //   },
  //   chatInstance: '888',
  //   chatType: 'sender',
  //   ...
  // }
} catch (e) {
  console.error('Something is wrong', e);
}
```

## Validating

### `validate`

To validate the signature of the initialization data, the `validate` function is used. It expects
the initialization data to be passed in a raw format (search parameters) and throws an error in
certain cases.

```typescript
import { validate } from '@telegram-apps/init-data-node';

const secretToken = '5768337691:AAH5YkoiEuPk8-FZa32hStHTqXiLPtAEhx8';
const initData =
  'query_id=AAHdF6IQAAAAAN0XohDhrOrc' +
  '&user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%7D' +
  '&auth_date=1662771648' +
  '&hash=c501b71e775f74ce10e377dea85a7ea24ecd640b223ea86dfe453e0eaed2e2b2';

validate(initData, secretToken);
```

Function will throw an error in one of these cases:

- `AuthDateInvalidError`: `auth_date` is empty or not found
- `SignatureMissingError`: `hash` is empty or not found
- `SignatureInvalidError`: signature is invalid
- `ExpiredError`: init data expired

Here is the code you could use to check the error type:

```ts
import { validate, isSignatureInvalidError } from '@telegram-apps/init-data-node';

try {
  validate('init-data', 'token');
} catch (e) {
  if (isSignatureInvalidError(e)) {
    console.log('Signature is invalid');
  }
}
```

By default, the function checks the expiration of the initialization data. The default expiration
duration is set to 1 day (86,400 seconds). It is recommended to always check the expiration of the
initialization data, as it could be stolen but still remain valid. To disable this feature,
pass `{ expiresIn: 0 }` as the third argument.

### `validate3rd`

The `validate3rd` function is used to check if the passed init data was signed by Telegram. As
well as the `validate` function, this one accepts the init data in the same format.

As the second argument, it accepts the Telegram Bot identifier that was used to sign this
init data.

The third argument is an object with the following properties:

- `expiresIn` is responsible for init data expiration validation
- `test: boolean`: should be equal `true` if the init data was received in the test Telegram
  environment

Here is the usage example:

```ts
const initData =
  'user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%20%2B%20-%20%3F%20%5C%2F%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%22%7D' +
  '&chat_instance=8134722200314281151' +
  '&chat_type=private' +
  '&auth_date=1733584787' +
  '&signature=zL-ucjNyREiHDE8aihFwpfR9aggP2xiAo3NSpfe-p7IbCisNlDKlo7Kb6G4D0Ao2mBrSgEk4maLSdv6MLIlADQ' +
  '&hash=2174df5b000556d044f3f020384e879c8efcab55ddea2ced4eb752e93e7080d6';
const botId = 7342037359;

await validate3rd(initData, botId);
```

Function will throw an error in one of these cases:

- `AuthDateInvalidError`: `auth_date` is empty or not found
- `SignatureMissingError`: `signature` is empty or not found
- `SignatureInvalidError`: signature is invalid
- `ExpiredError`: init data expired

> [!WARNING]
> This function uses **Web Crypto API** instead of Node.js modules.

### `isValid`

Alternatively, to check the init data validity, a developer could use the `isValid` function.
It doesn't throw an error, but returns a boolean value indicating the init data validity.

```ts
import { isValid } from '@telegram-apps/init-data-node';

if (isValid('... init data', 'my-bot-token')) {
  console.log('Init data is fine');
}
```

### `isValid3rd`

Does the same as the `isValid` function, but checks if the init data was signed by Telegram:

```ts
import { isValid3rd } from '@telegram-apps/init-data-node';

const botId = 7342037359;

if (await isValid3rd('... init data', botId)) {
  console.log('Init data is fine');
}
```

> [!WARNING]
> This function uses **Web Crypto API** instead of Node.js modules.

## Signing

There could be some cases when a developer needs to create their own init data. For instance,
Telegram does not send this data automatically if you are using something like `KeyboardButton`
or `InlineKeyboardButton`. Telegram cannot do this because it doesn't know which Telegram Bot token
should be used.

To implement such a process, it is required to use the `sign` method. Here is the complete example:

::: code-group

```ts [Signing]
import { sign } from '@telegram-apps/init-data-node';

sign(
  {
    can_send_after: 10000,
    chat: {
      id: 1,
      type: 'group',
      username: 'my-chat',
      title: 'chat-title',
      photo_url: 'chat-photo',
    },
    chat_instance: '888',
    chat_type: 'sender',
    query_id: 'QUERY',
    receiver: {
      added_to_attachment_menu: false,
      allows_write_to_pm: true,
      first_name: 'receiver-first-name',
      id: 991,
      is_bot: false,
      is_premium: true,
      language_code: 'ru',
      last_name: 'receiver-last-name',
      photo_url: 'receiver-photo',
      username: 'receiver-username',
    },
    start_param: 'debug',
    user: {
      added_to_attachment_menu: false,
      allows_write_to_pm: false,
      first_name: 'user-first-name',
      id: 222,
      is_bot: true,
      is_premium: false,
      language_code: 'en',
      last_name: 'user-last-name',
      photo_url: 'user-photo',
      username: 'user-username',
    },
  },
  '5768337691:AAH5YkoiEuPk8-FZa32hStHTqXiLPtAEhx8',
  new Date(1000),
);
```

```ts [Expected result]
'auth_date=1' +
'&can_send_after=10000' +
'&chat=%7B%22id%22%3A1%2C%22type%22%3A%22group%22%2C%22title%22%3A%22chat-title%22%2C%22photo_url%22%3A%22group%22%2C%22username%22%3A%22my-chat%22%7D' +
'&chat_instance=888' +
'&chat_type=sender' +
'&query_id=QUERY' +
'&receiver=%7B%22added_to_attachment_menu%22%3Afalse%2C%22allows_write_to_pm%22%3Atrue%2C%22first_name%22%3A%22receiver-first-name%22%2C%22id%22%3A991%2C%22is_bot%22%3Afalse%2C%22is_premium%22%3Atrue%2C%22language_code%22%3A%22ru%22%2C%22last_name%22%3A%22receiver-last-name%22%2C%22photo_url%22%3A%22receiver-photo%22%2C%22username%22%3A%22receiver-username%22%7D' +
'&start_param=debug' +
'&user=%7B%22added_to_attachment_menu%22%3Afalse%2C%22allows_write_to_pm%22%3Afalse%2C%22first_name%22%3A%22user-first-name%22%2C%22id%22%3A222%2C%22is_bot%22%3Atrue%2C%22is_premium%22%3Afalse%2C%22language_code%22%3A%22en%22%2C%22last_name%22%3A%22user-last-name%22%2C%22photo_url%22%3A%22user-photo%22%2C%22username%22%3A%22user-username%22%7D' +
'&hash=47cfa22e72b887cba90c9cb833c5ea0f599975b6ce7193741844b5c4a4228b40'
```

:::

This function accepts three arguments:

- **Data to sign**: It represents a parsed init data object excluding the `auth_date` and `hash`
  properties. The `signature` property is optional as it can't be computed.
- **Bot token**: This token is received from [@BotFather](https://t.me/botfather).
- **Signing date**: This value will be used as the value of the `auth_date` property.

As a result, the function returns signed init data.

## Web Crypto API

If this package is used in an environment other than Node.js, a developer can use the `web`
subdirectory, which exports the same methods as described above but returns promises.

```ts
import {
  validate,
  sign,
  signData,
  isValid,
} from '@telegram-apps/init-data-node/web';

await validate(...);
await sign(...);
await signData(...);
await isValid(...);
```

## Passing Hashed Token

All package methods allow developers to use a hashed token instead of a raw token.

By "hashed token," we mean a token hashed using the HMAC-SHA-256 algorithm with a key derived
from `WebAppData`, as specified in
the [validation](../platform/init-data#validating) section of the documentation.

Here are some examples:

```ts
import { validate, sign } from '@telegram-apps/init-data-node';

const secretTokenHashed = 'a5c609aa52f63cb5e6d8ceb6e4138726ea82bbc36bb786d64482d445ea38ee5f';
const initData =
  'query_id=AAHdF6IQAAAAAN0XohDhrOrc' +
  '&user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%7D' +
  '&auth_date=1662771648' +
  '&hash=c501b71e775f74ce10e377dea85a7ea24ecd640b223ea86dfe453e0eaed2e2b2';

// Validating.
validate(initData, secretTokenHashed, { tokenHashed: true });

// Signing.
sign(
  {
    can_send_after: 10000,
    chat: {
      id: 1,
      type: 'group',
      username: 'my-chat',
      title: 'chat-title',
      photo_url: 'chat-photo',
    },
    chat_instance: '888',
    chat_type: 'sender',
    query_id: 'QUERY',
    receiver: {
      added_to_attachment_menu: false,
      allows_write_to_pm: true,
      first_name: 'receiver-first-name',
      id: 991,
      is_bot: false,
      is_premium: true,
      language_code: 'ru',
      last_name: 'receiver-last-name',
      photo_url: 'receiver-photo',
      username: 'receiver-username',
    },
    start_param: 'debug',
    user: {
      added_to_attachment_menu: false,
      allows_write_to_pm: false,
      first_name: 'user-first-name',
      id: 222,
      is_bot: true,
      is_premium: false,
      language_code: 'en',
      last_name: 'user-last-name',
      photo_url: 'user-photo',
      username: 'user-username',
    },
  },
  secretTokenHashed,
  new Date(1000),
  { tokenHashed: true }
);
```

You can use this approach to reduce the number of instances where you directly pass a raw token.

```
---
## File: apps/docs/packages/telegram-apps-mate/hosting.md

```markdown
---
outline: [2, 3]
---

# Hosting

With Mate's fast and reliable hosting, developers can effectively manage static
assets for their mini applications. Delivering static files efficiently and
securely is vital for optimal performance.

By utilizing a Content Delivery Network (CDN), Mate's hosting boosts reliability
and accelerates file loading for users across various regions, surpassing the
performance of single-server solutions.

The hosting service is free, though there are some limitations on data transfer.

> [!WARNING]
> If youâ€™re currently using a single server for both static file hosting and
> server-side operations, transitioning to Mate's hosting may require code
> adjustments. If your app already distinguishes between static and dynamic
> requests, integration will be much simpler.


###	Important Recommendation:
When deploying an SPA on a static hosting platform (like Mate's hosting), itâ€™s crucial to choose
routing methods that do not depend on server-side configurations.

Hash-based routing (using the # symbol in URLs) is a simple and effective way to manage routes without needing server support. Many frameworks offer built-in solutions or plugins to implement this type of routing.

For instance, if you are using *React*, use `HashRouter` instead of `BrowserRouter`:

```jsx
import { HashRouter as Router, Route, Switch } from 'react-router-dom';

function App() {
  return (
    <Router>
      <Switch>
        <Route exact path="/" component={Home} />
        {/* Other routes */}
      </Switch>
    </Router>
  );
}

export default App;
```

## Features

### Lightning Speed

The crucial feature of Mate's hosting is its well-configured Content Delivery
Network spread across the world, in countries where mini applications are
commonly used. This feature allows developers to focus on building their
applications rather than worrying about how to deliver static assets as quickly
as possible.

### Version Management System

Another notable hosting feature is the version management system.

Mate allows the creation of up to five deployment tags, enabling developers to
deploy the project with a specific tag without affecting previously deployed
assets.

#### Usage Example

A common use case here is when the project has two versions: `latest` and
`staging`. The developer can use the `latest` version for production and
`staging` for the Quality Assurance team.

After deploying the `staging` assets, the QA team checks if this staging state
is acceptable. Then, the same assets can be deployed with the `latest` tag for
production.

#### About Base URL

When deploying static assets, Mate uses the following base URL pattern:

```
https://{storage_key}.tapps.global/{tag}
```

Hereâ€™s some information on these parameters for clarification:

- `storage_key`: a unique key for the deployed project. This value is
  non-configurable and is assigned to the project upon creation.
- `tag`: a deployment tag. This value is set during the deployment process by
  the developer. Examples include `staging`, `latest`, `dev`, etc.

## Getting Started

### Step 1: Register a Project

To start using the hosting functionality, you must register the project and
obtain its deployment token. To get the token, go
to [@tma_mate_bot](https://t.me/tma_mate_bot) and press the `Start` button to
begin the conversation with the bot.

<p align="center">
  <img src="/mate/start.png" width="320"/>
</p>

Next, press the `Create a Project` button and enter the title of the project to
be created, following the specified rules.

<p align="center">
  <img src="/mate/create.png" width="320"/>
</p>

After this step, the bot will return the created project information, including
the **deployment token**.

### Step 2: Update the Static Assets Base URL

Before deploying the project, ensure that all static assets have a valid base
URL. You can learn more about how Mate generates the static assets base
URL [here](#about-base-url).

To retrieve the project deployment information using a specific tag, use the
following command:

```bash
mate deploy info \
  --token {DEPLOYMENT_TOKEN} \
  --project {PROJECT_ID} \
  --tag {TAG}
```

Here, the `DEPLOYMENT_TOKEN` and `PROJECT_ID` values refer to the deployment
token and project identifier received from the previous step. `TAG` is a
deployment version tag name.

Output example:

```
âœ” Fetched deploy information for paper-planes (id 48) project
Project Title: paper-planes
Short title of the project
--------
Base Path (using tag "staging"): https://35f105bd6b.tapps.global/staging
This path will be used as a base path for the uploaded assets associated with this project. 
Consider using this value as a base path in your bundler. You can also use different tags using the --tag option.
--------
Allowed file extensions: html, css, js, cjs, mjs, png, jpg, jpeg, webp, ttf, woff, woff2, eot, json, ico
Files extensions that are allowed to be uploaded.
--------
Maximum size: 10485760 bytes
Maximum upload size.
--------
Maximum files count: 100
Maximum number of files a single upload can contain.
```

The value `https://35f105bd6b.tapps.global/staging` is the base URL that should
be used in the project bundler.

Hereâ€™s how it can be applied using [Vite](https://vitejs.dev).

```ts
import { defineConfig } from 'vite';

export default defineConfig({
  base: 'https://35f105bd6b.tapps.global/staging'
});
```

### Step 3: Deploy the Project

To deploy the project, Mate requires specifying a folder to be uploaded to the
hosting service. The folder must only contain files that can be opened by the
user's browser, so no source files or files for different purposes should be
present in the directory.

Letâ€™s assume the following conditions:

- A project with ID `48` and token `aabbccdd` was created.
- A folder named `dist` contains all the mini application built static assets.
- It is required to deploy the static assets with the tag `latest`.

To deploy the project under these conditions, run the following command:

```bash
mate deploy upload \
  --dir dist \
  --token aabbccdd \
  --project 48 \
  --tag latest
```

Hereâ€™s the possible output:

```
âœ” Fetched deploy information for paper-planes (id 48) project
i Assets base path (using tag "latest"): 
https://35f105bd6b.tapps.global/latest
i Allowed file extensions: html, css, js, cjs, mjs, png, jpg, jpeg, webp, ttf, woff, woff2, eot, json, ico
i Maximum upload size: 10485760 bytes
i Maximum files count: 100
âœ” Directory compressed successfully from 24185 to 7168 bytes
âœ” Archive uploaded successfully
ðŸ“ dist
â•° ðŸ“„ index.js (https://35f105bd6b.tapps.global/latest/index.js)
```

> [!WARNING]
> The deployed directory must include only standard files and directories,
> excluding private ones (starting with the `.` symbol). All other types of
> files (such as symlinks) are forbidden. If found during the deployment process,
> the CLI tool will throw a corresponding error.

### Step 4: Verify Deployment and Configure Telegram Mini-App

After deploying, itâ€™s recommended to verify that your application is working correctly 
by accessing it via the direct link:

```
https://{storage_key}.tapps.global/{tag}/index.html
```

If everything functions properly, use this link as the web app URL when creating your Telegram mini-app.

**Example:**

If your storage_key is 35f105bd6b and your tag is latest, the link will look like this:

```
https://35f105bd6b.tapps.global/latest/index.html
```

Ensure that when you navigate to this link, your application loads and operates without errors. This guarantees 
that your Telegram mini-app will work correctly with your hosting setup.

## Using Config

To avoid repeatedly specifying parameters, Mate allows creating a special
configuration with all the parameters included.

To start using the Mate config along with the optional commands' options,
create the `mate.yml` or `mate.json` file in the project root directory
with the following example content:

:::code-group

```yml [mate.yml]
deploy:
  projectId: 48
  directory: dist
  token: aabbccdd
  tag: latest
```

```json [mate.json]
{
  "deploy": {
    "projectId": 48,
    "directory": "dist",
    "token": "aabbccdd",
    "tag": "latest"
  }
}
```

:::

Then, the `info` and `upload` commands will retrieve the values from the
configuration.

```bash
# Both of these commands will use the following 
# options from the Mate config:
# --project = 48
# --dir "dist"
# --token "aabbccdd"
# --tag "latest"
mate deploy info
mate deploy upload
```

If any parameter override is required, it should be specified in the command.
For example, to override the `tag` option with the `staging` value, use the
following command:

```bash
mate deploy info --tag staging
```

```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/components/back-button.md

```markdown
# `BackButton`

Implements Telegram Mini Apps [Back Button](../../../../platform/back-button.md).

## Initialization

To initialize the component, use the `initBackButton` function:

```typescript
import { initBackButton } from '@telegram-apps/sdk';

const [backButton] = initBackButton();  
```

## Showing and Hiding

To show and hide `BackButton`, it is required to use `show()` and `hide()` methods. These methods
update the button's `isVisible` property:

```typescript
backButton.show();
console.log(backButton.isVisible); // true  

backButton.hide();
console.log(backButton.isVisible); // false  
```  

## Events

List of events, which could be [tracked](#events):

| Event              | Listener                   | Triggered when                 |
|--------------------|----------------------------|--------------------------------|
| `click`            | `() => void`               | Back Button was clicked        |
| `change`           | `() => void`               | Something in component changed |
| `change:isVisible` | `(value: boolean) => void` | `isVisible` property changed   |

## Methods Support

List of methods, which could be used in [support checks](#methods-support): `show` and `hide`

```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/components/biometry-manager.md

```markdown
# `BiometryManager`

## Initialization

To initialize the component, use the `initBiometryManager` function:

```typescript
import { initBiometryManager } from '@telegram-apps/sdk';

const [biometryManager] = initBiometryManager();  
```

::: info

Since BiometryManager can't be instantiated synchronously, this function returns a promise that will
be resolved when the biometry manager data is retrieved.

:::

## Authenticating

To authenticate a user, use the `authenticate` method:

```ts
bm
  .authenticate({ reason: 'Authorize to unlock the storage' })
  .then(token => {
    console.log('Token received', token);
  });
```

This method accepts an optional `reason: string` property with length up to 128 symbols.

## Opening Settings

To open a modal window with biometry settings, use the `openSettings` method:

```ts
bm.openSettings();
```

In this modal, a user is capable of turning on and off the biometry functionality.

## Requesting Access

To request a permission to use the biometry, use the `requestAccess` method:

```ts
bm
  .requestAccess({ reason: 'Authorize to start using biometry' })
  .then(accessGranted => {
    console.log('Access granted', accessGranted);
  });
```

As well as the `authenticate` method, it accepts an optional `reason: string` property with length
up to 128 symbols.

## Updating Biometry Token

To update a token, stored in the secure storage, use the `updateToken` method:

```ts
bm
  .updateToken({ token: 'My token' })
  .then(status => {
    console.log('Token updated', status);
  });
```

This method returns a promise with the execution status.

## Events

List of events, which could be [tracked](#events):

| Event                    | Listener                        | Triggered when                     |
|--------------------------|---------------------------------|------------------------------------|
| `change:accessGranted`   | `(value: boolean) => void`      | `accessGranted` property changed   |
| `change:accessRequested` | `(value: boolean) => void`      | `accessRequested` property changed |
| `change:available`       | `(value: boolean) => void`      | `available` property changed       |
| `change:deviceId`        | `(value: string) => void`       | `deviceId` property changed        |
| `change:tokenSaved`      | `(value: boolean) => void`      | `tokenSaved` property changed      |
| `change:token`           | `(value: string) => void`       | `token` property changed           |
| `change:biometryType`    | `(value: BiometryType) => void` | `biometryType` property changed    |

## Methods Support

List of methods, which could be used in [support checks](#methods-support):
`auth`, `openSettings`, `requestAccess` and `updateToken`.
```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/components/closing-behavior.md

```markdown
# `ClosingBehavior`

Implements Telegram Mini
Apps [closing behavior](../../../../platform/closing-behavior.md) functionality.

## Initialization

To initialize the component, use the `initClosingBehavior` function:

```typescript
import { initClosingBehavior } from '@telegram-apps/sdk';

const [closingBehavior] = initClosingBehavior();  
```

## Closing Confirmation

To enable and disable closing confirmation, it is required to use `enableConfirmation()`
and `disableConfirmation()` methods. These methods update `isConfirmationNeeded` property:

```typescript  
closingBehavior.enableConfirmation();
console.log(closingBehavior.isConfirmationNeeded); // true  

closingBehavior.disableConfirmation();
console.log(closingBehavior.isConfirmationNeeded); // false
```

## Events

List of events, which could be [tracked](#events):

| Event                         | Listener                   | Triggered when                          |
|-------------------------------|----------------------------|-----------------------------------------|
| `change`                      | `() => void`               | Something in component changed          |
| `change:isConfirmationNeeded` | `(value: boolean) => void` | `isConfirmationNeeded` property changed |

```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/components/cloud-storage.md

```markdown
# `CloudStorage`

Implements functionality related to Telegram Mini Apps cloud storage.

## Initialization

To initialize the component, use the `initCloudStorage` function:

```typescript
import { initCloudStorage } from '@telegram-apps/sdk';

const cloudStorage = initCloudStorage();  
```

## Setting Items

To save a value in the cloud storage, it is required to use the `set` method:

```typescript
cloudStorage
  .set('my-key', 'my-value')
  .then(() => console.log('Item saved'));
```

## Getting Items

To get values by keys, it is required to use `get` method, which acquires both single string
value and array of string values:

::: code-group

```typescript [Single value]
cloudStorage
  .get('my-key')
  .then((value) => {
    console.log(value);
    // Output: 'my-value'
  });

cloudStorage
  .get('non-existent')
  .then((value) => {
    console.log(value);
    // Output: ''
  });
```

```typescript [Array of values]
cloudStorage
  .get(['my-key', 'non-existent'])
  .then((result) => {
    console.log('Result is', result);
    // Output:
    // {
    //   'my-key': 'my-value',
    //   'non-existent': ''
    // }
  });
```

:::

This method returns empty strings for those keys, which don't exist in the cloud storage.

## Getting Keys

To retrieve all registered keys in the cloud storage, it is required to use the `getKeys` method:

```typescript
cloudStorage
  .getKeys()
  .then((keys) => {
    // Will be ['my-key'].
    console.log('Keys are', keys);
  })
```

## Deleting Items

To delete items in the cloud storage, it is required to use `delete` method. This method allows
deleting both single and multiple items:

::: code-group

```typescript [Single item]
cloudStorage
  .delete('my-key')
  .then(() => console.log('Key was deleted'));
```

```typescript [Multiple items]
cloudStorage
  .delete(['my-key', 'another-key'])
  .then(() => console.log('Keys were deleted'));
```

:::

## Methods Support

List of methods, which could be used in [support checks](#methods-support):
`delete`, `get`, `getKeys` and `set`

```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/components/haptic-feedback.md

```markdown
# `HapticFeedback`

Implements Telegram Mini
Apps [haptic feedback](../../../../platform/haptic-feedback.md) functionality.

::: info

If this functionality does not work on your device: check the settings. For example, 
for the Android mobile system, you need to go to _"Settings" > "Sound & Vibration" > 
"Vibration & Haptics"_ and find the _"Touch feedback"_ option. It should **not** be 
zero.

:::

## Initialization

To initialize the component, use the `initHapticFeedback` function:

```typescript
import { initHapticFeedback } from '@telegram-apps/sdk';

const hapticFeedback = initHapticFeedback();  
```

## Notifications

`HapticFeedback` supports 3 types of haptic events - `impactOccurred`, `notificationOccurred`
and `selectionChanged`.

### `impactOccurred`

A method tells that an impact occurred. The Telegram app may play the appropriate haptics based on
style value passed. Style of impact occurred haptic event:

- `light`, indicates a collision between small or lightweight UI objects
- `medium`, indicates a collision between medium-sized or medium-weight UI objects
- `heavy`, indicates a collision between large or heavyweight UI objects
- `rigid`, indicates a collision between hard or inflexible UI objects
- `soft`, indicates a collision between soft or flexible UI objects

```typescript
hapticFeedback.impactOccurred('medium');
```

### `notificationOccurred`

A method tells that a task or action has succeeded, failed, or produced a warning. The Telegram app
may play the appropriate haptics based on type value passed. Type of notification occurred type
event.

- `error`, indicates that a task or action has failed,
- `success`, indicates that a task or action has completed successfully,
- `warning`, indicates that a task or action produced a warning.

```typescript
hapticFeedback.notificationOccurred('success');
```

### `selectionChanged`

A method tells that the user has changed a selection.

```typescript
hapticFeedback.selectionChanged();
```

## Methods Support

List of methods, which could be used in [support checks](#methods-support):
`notificationOccurred`, `impactOccurred` and `selectionChanged`

```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/components/init-data.md

```markdown
---
outline: [2, 3]
---

# `InitData`

The component which is responsible for implementing the Telegram Mini
Apps [init data](../../../../platform/init-data.md). 

## Initialization

To initialize the component, use the `initInitData` function:

```typescript
import { initInitData } from '@telegram-apps/sdk';

const initData = initInitData();
```

## Properties

### `authDate`

Type: `Date`

Init data generation date.

### `canSendAfter`

Type: `number`, _optional_

The number of seconds after which a message can be sent via the
method [answerWebAppQuery](https://core.telegram.org/bots/api#answerwebappquery).

### `canSendAfterDate`

Type: `Date`, _optional_

Date after which it is allowed to call
the [answerWebAppQuery](https://core.telegram.org/bots/api#answerwebappquery) method.

### `chat`

Type: [`Chat`](../init-data/chat.md), _optional_

An object containing data about the chat where the bot was launched via the attachment menu.
Returned for supergroups, channels and group chats â€“ only for Mini Apps launched via the attachment
menu.

### `chatType`

Type: `'sender' | 'private' | 'group' | 'supergroup' | 'channel' | string`, _optional_

The type of chat from which Mini App was opened.

### `chatInstance`

Type: `string`, _optional_

A global identifier indicating the chat from which Mini App was opened. Returned only for
applications opened by direct link.

### `hash`

Type: `string`

A hash of all passed parameters, which the bot server can use to check
their [validity](https://core.telegram.org/bots/webapps#validating-data-received-via-the-web-app).

### `queryId`

Type: `string`, _optional_

A unique identifier for the Mini App session, required for sending
messages via the [answerWebAppQuery](https://core.telegram.org/bots/api#answerwebappquery) method.

### `receiver`

Type: [`User`](../init-data/user.md), _optional_

An object containing data about the chat partner of the current user in the chat where the bot was
launched via the attachment menu. Returned only for private chats and only for Mini Apps launched
via the attachment menu.

### `startParam`

Type: `string`, _optional_

The value of the `startattach` parameter, passed via link. Only returned for
Mini Apps when launched from the attachment menu via link.

### `user`

Type: [`User`](../init-data/user.md), _optional_

An object containing data about the current user.

```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/components/invoice.md

```markdown
# `Invoice`

Implements Telegram [invoices](https://core.telegram.org/bots/payments#introducing-payments-2-0)
functionality.

## Initialization

To initialize the component, use the `initInvoice` function:

```typescript
import { initInvoice } from '@telegram-apps/sdk';

const invoice = initInvoice();  
```

## Opening Invoice

To open an invoice, it is required to use the `open` method. This method allows opening invoices
using their URLs or slugs.

Opening an invoice in URL mode requires passing the second argument equal to `url`, so the method
will interpret the passed value as a URL.

To interpret the passed value as a slug, omit the second argument.

::: code-group

```typescript [Using slug]
invoice
  .open('abIIks213')
  .then((status) => {
    // Output: 'paid'
    return console.log(status);
  });
```

```typescript [Using URL]
invoice
  .open('https://t.me/invoice/abIIks213', 'url')
  .then((status) => {
    // Output: 'paid'
    return console.log(status);
  });
```

:::

::: info

Note that slug is a part of the string which is placed after the `$` symbol. So, having the `$abcdefghi` value returned from Telegram Bot API, you must call the `open` method using the `abcdefghi` value, or a complete URL (https://t.me/invoice/abcdefghi or https://t.me/$abcdefghi).

:::

## Events

List of events, which could be [tracked](#events):

| Event             | Listener                   | Triggered when                 |
|-------------------|----------------------------|--------------------------------|
| `change`          | `() => void`               | Something in component changed |
| `change:isOpened` | `(value: boolean) => void` | `isOpened` property changed    |

## Methods Support

List of methods, which could be used in [support checks](#methods-support): `open`

```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/components/main-button.md

```markdown
# `MainButton`

Implements Telegram Mini Apps [Main Button](../../../../platform/main-button.md).

## Initialization

To initialize the component, use the `initMainButton` function:

```typescript
import { initMainButton } from '@telegram-apps/sdk';

const [mainButton] = initMainButton();  
```

## Button Visibility

To control the Main Button visibility, developer could use such methods as `show()` and `hide()`.
Both of them update component's `isVisible` property:

```typescript
mainButton.show();
console.log(mainButton.isVisible); // true  

mainButton.hide();
console.log(mainButton.isVisible); // false  
```

## Loader

The Main Button could display a loader inside of it. To control its visibility,
use `showLoader()` and `hideLoader()` methods. The `isLoaderVisible` property will be changed.

```typescript
mainButton.showLoader();
console.log(mainButton.isLoaderVisible); // true  

mainButton.hideLoader();
console.log(mainButton.isLoaderVisible); // false
```

## Active State

The Main Button can be enabled and disabled by calling `disable()` and `enable()` methods. Both of
the methods will update the `isEnabled` property.

```typescript
mainButton.enable();
console.log(mainButton.isEnabled); // true  

mainButton.disable();
console.log(mainButton.isEnabled); // false
```

Enabling the Main Button will allow a user to click it. As the result, the Main Button will
receive the `click` event.

## Background Color

To update the Main Button background color, use the `setBackgroundColor(color: RGB)` method. It
will update the `backgroundColor` property.

```typescript
mainButton.setBackgroundColor('#ffffaa');
console.log(mainButton.color); // '#ffffaa'
```

## Text Color

To update the Main Button text color, use the `setTextColor(color: RGB)` method. It will update
the `textColor` property.

```typescript
mainButton.setTextColor('#cca233');
console.log(mainButton.textColor); // '#cca233'
```

## Text

To update the Main Button text, use the `setText(text: string)` method. It will update the `text`
property.

```typescript
mainButton.setText('Submit');
console.log(mainButton.text); // 'Submit'
```

## Setting Multiple Properties

Sometimes, a consecutive set of several Main Button parameters may lead to problematic artifacts in
the UI. To avoid this issue, it is allowed to use the `setParams` method:

```typescript
mainButton.setParams({
  backgroundColor: '#aa1388',
  text: 'Stop',
  isVisible: true,
});
```

## Events

List of events, which could be [tracked](#events):

| Event                    | Listener                   | Triggered when                     |
|--------------------------|----------------------------|------------------------------------|
| `click`                  | `() => void`               | Main Button was clicked            |
| `change`                 | `() => void`               | Something in component changed     |
| `change:backgroundColor` | `(value: RGB) => void`     | `backgroundColor` property changed |
| `change:isLoaderVisible` | `(value: boolean) => void` | `isLoaderVisible` property changed |
| `change:isEnabled`       | `(value: boolean) => void` | `isEnabled` property changed       |
| `change:isVisible`       | `(value: boolean) => void` | `isVisible` property changed       |
| `change:text`            | `(value: string) => void`  | `text` property changed            |
| `change:textColor`       | `(value: RGB) => void`     | `textColor` property changed       |

```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/components/mini-app.md

```markdown
---
outline: [2, 3]
---

# `MiniApp`

The component which provides the common Telegram Mini Apps functionality not covered by other system
components.

## Initialization

To initialize the component, use the `initMiniApp` function:

```typescript
import { initMiniApp } from '@telegram-apps/sdk';

const [miniApp] = initMiniApp();  
```

## Colors

### Header

Developer is able to get and update Mini App header and background colors. To get current value
of header color, developer could refer to the `headerColor` property and update it via
`setHeaderColor` method:

```typescript
miniApp.setHeaderColor('secondary_bg_color');
// or starting from v6.10:
miniApp.setHeaderColor('#aa1132');
```

### Background

As well as Mini App header color, developer is also able to manipulate its background color:

```typescript
miniApp.setBgColor('#888311');
```

Mini App background color is used to determine if current Mini App has dark palette. To know
if current palette is dark, developer should use `isDark` property:

```typescript
console.log(miniApp.isDark); // false
```

## Access Requests

Starting from Telegram Mini Apps version 6.9, Mini Apps are allowed to request access to the phone
number and request access to write the current user. To do so, developers are allowed to use
the `requestPhoneAccess` and `requestWriteAccess` methods:

```typescript
miniApp.requestPhoneAccess().then(() => {
  // done.
});

miniApp.requestWriteAccess().then(() => {
  // done.
});
```

To request the contact information (the phone number, for example), utilize the `requestContact`
method:

```typescript
miniApp.requestContact().then(contact => {
  console.log(contact);
  // Output:
  // {
  //   authDate: Date(...),
  //   hash: '...',
  //   contact: {
  //     firstName: '...',
  //     phoneNumber: '+38291789233',
  //   },
  // };
});
```

## Inline Mode

Mini Apps are available to be launched in [inline mode](https://core.telegram.org/bots/inline). When
a Mini App is launched in such a mode, the developer is allowed to use the `switchInlineQuery`
method:

```typescript
miniApp.switchInlineQuery('Show me something', ['users', 'groups']);
```

When calling this method, the Telegram application sends the bot username and the specified text to
the chat selected by the user. The list of available chats will be restricted by the chat types
specified in the second argument.

To check if the current Mini App is launched in inline mode, the developer should refer to
the `isBotInline` property:

```typescript
console.log(miniApp.isBotInline); // false
```

## Lifecycle Methods

### `ready`

Informs the Telegram app that the Mini App is ready to be displayed.

It is recommended to call this method as early as possible, as soon as all essential interface
elements loaded. Once this method called, the loading placeholder is hidden and the Mini App shown.

If the method not called, the placeholder will be hidden only when the page fully loaded.

```typescript
miniApp.ready();
```

### `close`

Closes the Mini App.

```typescript
miniApp.close();
```

If you would like to wrap the application into the bottom app bar, but not to close it, 
consider using the first argument `returnBack: boolean`.

```ts
// Will wrap the application into the bottom app bar.
miniApp.close(true);
```

## Other Methods

### `sendData`

A method used to send data to the bot. When this method is called, a service message is sent to the
bot containing data of a length up to 4096 bytes, and the Mini App is closed. Refer to
the `web_app_data` field in the [Message](https://core.telegram.org/bots/api#message) class.

## Events

List of events, which could be [tracked](#events):

| Event                | Listener                                 | Triggered when                 |
|----------------------|------------------------------------------|--------------------------------|
| `change`             | `() => void`                             | Something in component changed |
| `change:bgColor`     | `(value: RGB) => void`                   | `bgColor` property changed     |
| `change:headerColor` | `(value: HeaderColorKey or RGB) => void` | `headerColor` property changed |

## Methods Support

List of methods and parameters, which could be used
in [support checks](../components.md#methods-support): `requestWriteAccess`, `requestPhoneAccess`, 
`switchInlineQuery`, `setHeaderColor`, `setBgColor` and `setHeaderColor.color`.

```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/components/popup.md

```markdown
# `Popup`

Implements Telegram Mini Apps [popup](../../../../platform/popup.md).

## Initialization

To initialize the component, use the `initPopup` function:

```typescript
import { initPopup } from '@telegram-apps/sdk';

const popup = initPopup();  
```

## Opening New Popup

To open a popup, it is required to call the `open` method specifying popup properties: title,
message, and a list of up to 3 buttons.

```typescript
popup
  .open({
    title: 'Hello!',
    message: 'Here is a test message.',
    buttons: [{ id: 'my-id', type: 'default', text: 'Default text' }],
  })
  .then(buttonId => {
    console.log(
      buttonId === null 
        ? 'User did not click any button'
        : `User clicked a button with ID "${buttonId}"`
    );
  });

console.log(popup.isOpened); // true
```

This method returns a promise, which will be fulfilled with the clicked button identifier. In the
case where the user didn't click any button, the method will return `null`.

## Events

List of events, which could be [tracked](#events):

| Event              | Listener                   | Triggered when                 |
|--------------------|----------------------------|--------------------------------|
| `changed`          | `() => void`               | Something in component changed |
| `changed:isOpened` | `(value: boolean) => void` | `isOpened` property changed    |

## Methods Support

List of methods, which could be used in [support checks](#methods-support): `open`

```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/components/qr-scanner.md

```markdown
# `QRScanner`

The component which provides the QR scanner functionality.

## Initialization

To initialize the component, use the `initQRScanner` function:

```typescript
import { initQRScanner } from '@telegram-apps/sdk';

const qrScanner = initQRScanner();  
```

## Opening and Closing

To open the QR scanner, the developer should use the `open` method:

```typescript
qrScanner.open('Scan QR code').then((content) => {
  console.log(content);
  // Output: 'some-data=22l&app=93...'
});
console.log(qrScanner.isOpened); // true
```

As a result, the method returns a promise that will be resolved in case some QR
was scanned. It may also resolve `null` if the scanner was closed.

It is allowed to pass an object with optional properties `text` and `capture` responsible
for displaying a text in QR scanner and determining if scanned QR should be captured and promise
should be fulfilled.

```ts
qrScanner.open({ 
  text: 'Scan QR code',
  capture({ data }) {
    // Capture QRs contanining Telegram user link.
    return data.startsWith('https://t.me');
  }
}).then((qr) => {
  // May be something like 'https://t.me/heyqbnk' or null.
  console.log(qr);
});
```

To close the scanner, use the `close` method:

```typescript
qrScanner.close();
console.log(qrScanner.isOpened); // false
```

## Events

List of events, which could be [tracked](#events):

| Event             | Listener                   | Triggered when                 |
|-------------------|----------------------------|--------------------------------|
| `change`          | `() => void`               | Something in component changed |
| `change:isOpened` | `(value: boolean) => void` | `isOpened` property changed    |

## Methods Support

List of methods, which could be used in [support checks](#methods-support): `open`
and `close`

```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/components/settings-button.md

```markdown
# `SettingsButton`

Implements Telegram Mini Apps [Settings Button](../../../../platform/settings-button.md).

## Initialization

To initialize the component, use the `initSettingsButton` function:

```typescript
import { initSettingsButton } from '@telegram-apps/sdk';

const [settingsButton] = initSettingsButton();  
```

## Showing and Hiding

To show and hide the `SettingsButton`, it is required to use `show()` and `hide()` methods. These
methods update the button's `isVisible` property:

```typescript  
settingsButton.show();
console.log(settingsButton.isVisible); // true  

settingsButton.hide();
console.log(settingsButton.isVisible); // false  
```  

## Events

List of events, which could be [tracked](#events):

| Event              | Listener                   | Triggered when                 |
|--------------------|----------------------------|--------------------------------|
| `click`            | `() => void`               | Settings Button was clicked    |
| `change`           | `() => void`               | Something in component changed |
| `change:isVisible` | `(value: boolean) => void` | `isVisible` property changed   |

## Methods Support

List of methods, which could be used in [support checks](#methods-support): `show`
and `hide`
```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/components/swipe-behavior.md

```markdown
# `SwipeBehavior`

Implements Telegram Mini Apps [swipe behavior](../../../../platform/swipe-behavior.md) functionality.

## Initialization

To initialize the component, use the `initSwipeBehavior` function:

```typescript
import { initSwipeBehavior } from '@telegram-apps/sdk';

const [swipeBehavior] = initSwipeBehavior();  
```

## Vertical Swipe

By default, users are allowed to hide the application just by swiping the application down.
To prevent a possible closure, you can disable this behavior by calling the `disableVerticalSwipe()`
method, or enable via the `enableVerticalSwipe()` method. In turn,
both of these methods update the `isVerticalSwipeEnabled` property:

```typescript  
swipeBehavior.enableVerticalSwipe();
console.log(swipeBehavior.isVerticalSwipeEnabled); // true  

swipeBehavior.disableVerticalSwipe();
console.log(swipeBehavior.isVerticalSwipeEnabled); // false
```

## Events

List of events, which could be [tracked](#events):

| Event                           | Listener                   | Triggered when                            |
|---------------------------------|----------------------------|-------------------------------------------|
| `change`                        | `() => void`               | Something in component changed            |
| `change:isVerticalSwipeEnabled` | `(value: boolean) => void` | `isVerticalSwipeEnabled` property changed |

## Methods Support

List of methods, which could be used in [support checks](#methods-support):
`disableVerticalSwipe`, `enableVerticalSwipe`.
```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/components/theme-params.md

```markdown
# `ThemeParams`

The component which contains an information about currently
used [theme](../../../../platform/theming.md) by the Telegram application.

## Initialization

To initialize the component, use the `initThemeParams` function:

```typescript
import { initThemeParams } from '@telegram-apps/sdk';

const [themeParams] = initThemeParams();  
```

## Requesting Actual Data

To get the actual theme parameters information, developer could use the `requestThemeParams`
function:

```typescript
import { requestThemeParams } from '@telegram-apps/sdk';

requestThemeParams.then(console.log);

// Output:
// { bgColor: '#ffaabb', ... }
```

## Colors

The developer can retrieve the theme color by using the `get` method:

```typescript
themeParams.get('bgColor');
themeParams.get('packageUnknownColor');
```

To retrieve all colors via one object, use `getState` method:

```typescript
themeParams.getState();
// Output:
// {
//   accentTextColor: '#aa1399',
//   bgColor: '#baac12',
//   linkColor: '#887722'
//   packageUnknownColor: '#676767,
// }
```

The `ThemeParams` component provides direct access to the list of colors:

- `accentTextColor: RGB | undefined`
- `bgColor: RGB | undefined`
- `buttonColor: RGB | undefined`
- `buttonTextColor: RGB | undefined`
- `destructiveTextColor: RGB | undefined`
- `headerBgColor: RGB | undefined`
- `hintColor: RGB | undefined`
- `linkColor: RGB | undefined`
- `secondaryBgColor: RGB | undefined`
- `sectionBgColor: RGB | undefined`
- `sectionHeaderTextColor: RGB | undefined`
- `subtitleTextColor: RGB | undefined`
- `textColor: RGB | undefined`

Example:

```typescript
themeParams.accentTextColor; // '#aa1399'
```

## Events

List of events, which could be [tracked](#events):

| Event                | Listener               | Triggered when                   |
|----------------------|------------------------|----------------------------------|
| `change`             | `() => void`           | Something in component changed   |
| `change:{theme_key}` | `(value: RGB) => void` | Color with specified key changed |
```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/components/utils.md

```markdown
# `Utils`

Implements functionality that doesn't require state and can't be categorized.

## Initialization

To initialize the component, use the `initUtils` function:

```typescript
import { initUtils } from '@telegram-apps/sdk';

const utils = initUtils();  
```

## Links

### `openLink`

`MiniApp` class is capable of opening links of different types. For example, it can open a link
in an external browser not closing current Mini App, using method `openLink`:

```typescript
utils.openLink('https://google.com');
```

This method also allows opening a link using
Telegram's [Instant View](https://instantview.telegram.org/) when possible:

```typescript
utils.openLink('https://google.com', { tryInstantView: true });
```

To try opening a link using a user preferred browser, use the `tryBrowser` option:

```typescript
utils.openLink('https://google.com', { tryBrowser: true });
```

### `openTelegramLink`

In case, a developer would like to open a link related to Telegram (starting with `https://t.me`) 
the method `openTelegramLink` can be used. 

Using this method, the Telegram application will handle such a link on its own side:

```typescript
utils.openTelegramLink('https://t.me/heyqbnk');
```

### `shareURL`

Sharing a URL is a common functionality in mini applications. To achieve this, a developer can use
the shareURL method, which accepts the URL to be shared and optional text to append to the message
after the URL.

When called, it opens the chat selector to share the URL.

```ts
utils.shareURL('https://t.me/mybot/myapp', 'Look! Some cool app here!');
```

::: warning

Currently, there is no native method to share anything directly. Therefore, this method utilizes
the [openTelegramLink](#opentelegramlink) method, which closes the app after being called. This
method uses [Share links](https://core.telegram.org/api/links#share-links) under the hood.

:::

## Clipboard

Developers are allowed to read the text from the clipboard using the `readTextFromClipboard`
method.

This method reads text from the clipboard and returns a string or null. Null is returned in cases:

- The value in the clipboard is not text.
- Access to the clipboard is not allowed.

```typescript
utils.readTextFromClipboard().then((data) => {
  console.log('Clipboard data:', data);
  // Output: string or null
});
```

## Methods Support

List of methods and parameters, which could be used
in [support checks](#methods-support): `readTextFromClipboard`
and `openLink.tryInstantView`

```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/components/viewport.md

```markdown
# `Viewport`

Implements Telegram Mini
Apps [viewport](../../../../platform/viewport.md) functionality.

## Initialization

To initialize the component, use the `initViewport` function:

```typescript
import { initViewport } from '@telegram-apps/sdk';

const [viewport] = initViewport();  
```

::: info

Since Viewport can't be instantiated synchronously, this function returns a promise as the first
value in the tuple that will be resolved when the actual viewport state is retrieved.

:::

## Dimensions

The application can display just the top part of the Mini App, with its lower part remaining outside
the screen area. From this position, the user can "pull" the Mini App to its maximum height, while
the developer can do the same by calling `expand` method (use `isExpanded` prop to get current
expansion state):

```typescript
const [viewport] = initViewport();

const vp = await viewport;

if (!vp.isExpanded) {
    vp.expand(); // will expand the Mini App, if it's not
}
```

As the position of the Mini App changes, the current height value of the visible
area will be updated in real time.

::: info
Please note that the refresh rate of this value (`height`) is not sufficient to smoothly follow the
lower border of the window. It should not be used to pin interface elements to the bottom of the
visible area. It's more appropriate to use the value of the `stableHeight` field for this purpose.
:::

## Requesting Actual Data

To get actual viewport information, developer could use `requestViewport` function:

```typescript
import {requestViewport} from '@telegram-apps/sdk';

requestViewport().then((data) => {
    // Output:
    // { height: 122, isExpanded: false, width: 375, isStateStable: true }
    console.log(data);
});
```

## Events

List of events, which could be [tracked](#events):

| Event                 | Listener                          | Triggered when                  |
|-----------------------|-----------------------------------|---------------------------------|
| `change`              | `() => void`                      | Something in component changed  |
| `change:height`       | `(height: number) => void`        | `height` property changed       |
| `change:isExpanded`   | `(isExpanded: boolean) => void`   | `isExpanded` property changed   |
| `change:stableHeight` | `(stableHeight: boolean) => void` | `stableHeight` property changed |
| `change:width`        | `(width: boolean) => void`        | `width` property changed        |

```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/init-data/chat.md

```markdown
# `Chat`

### `id`

Type: `number`

Unique identifier for this chat.

### `photoUrl`

Type: `string`, _optional_

URL of the chatâ€™s photo. The photo can be in .jpeg or .svg formats.
Only returned for Mini Apps launched from the attachment menu.

### `type`

Type: `'group' | 'supergroup' | 'channel' | string`

Type of chat.

### `title`

Type: `string`

Title of the chat.

### `username`

Type: `string`, _optional_

Username of the chat.
```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/init-data/init-data.md

```markdown
# `InitData`

### `authDate`

Type: `Date`

Init data generation date.

### `canSendAfter`

Type: `number`, _optional_

The number of seconds after which a message can be sent via the
method [answerWebAppQuery](https://core.telegram.org/bots/api#answerwebappquery)

### `chat`

Type: [`Chat`](chat.md), _optional_

An object containing data about the chat where the bot was launched via
the attachment menu. Returned for supergroups, channels and group
chats â€“ only for Mini Apps launched via the attachment menu.

### `chatType`

Type: `'sender' | 'private' | 'group' | 'supergroup' | 'channel' | string`, _optional_

The type of chat from which Mini App was opened.

### `chatInstance`

Type: `string`, _optional_

A global identifier indicating the chat from which Mini App was
opened. Returned only for applications opened by direct link.

### `hash`

Type: `string`

A hash of all passed parameters, which the bot server can use to check
their [validity](https://core.telegram.org/bots/webapps#validating-data-received-via-the-web-app).

### `queryId`

Type: `string`, _optional_

A unique identifier for the Mini App session, required for sending
messages via the [answerWebAppQuery](https://core.telegram.org/bots/api#answerwebappquery) method.

### `receiver`

Type: [`User`](user.md), _optional_

An object containing data about the chat partner of the current user in
the chat where the bot was launched via the attachment menu.
Returned only for private chats and only for Mini Apps launched
via the attachment menu.

### `startParam`

Type: `string`, _optional_

The value of the `startattach` parameter, passed via link. Only returned for
Mini Apps when launched from the attachment menu via link.

### `user`

Type: [`User`](user.md), _optional_

An object containing data about the current user.

```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/init-data/user.md

```markdown
# `User`

### `addedToAttachmentMenu`

Type: `boolean`, _optional_

True, if this user added the bot to the attachment menu.

### `allowsWriteToPm`

Type: `boolean`, _optional_

True, if this user allowed the bot to message them.

### `firstName`

Type: `string`

First name of the user or bot.

### `id`

Type: `number`

A unique identifier for the user or bot.

### `isBot`

Type: `boolean`, _optional_

True, if this user is a bot. Returned in the `receiver` field only.

### `isPremium`

Type: `boolean`, _optional_

True, if this user is a Telegram Premium user.

### `lastName`

Type: `string`, _optional_

Last name of the user or bot.

### `languageCode`

Type: `string`, _optional_

[IETF language tag](https://en.wikipedia.org/wiki/IETF_language_tag) of the user's language. Returns
in user field only.

### `photoUrl`

Type: `string`, _optional_

URL of the userâ€™s profile photo. The photo can be in .jpeg or .svg formats. Only returned for Web
Apps launched from the attachment menu.

### `username`

Type: `string`, _optional_

Username of the user or bot.
```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/navigation/browser-navigator.md

```markdown
# `BrowserNavigator`

`BrowserNavigator` is a class that implements navigation using the browser's History API. This
navigator extends the standard one, providing basic navigation functionality and logic specific to
the browser's history.

## Constructor

To create an instance of this class, developers can use the class constructor, which accepts history
items, a cursor (index) pointing to the entry in the history items list, and additional options:

```typescript
import { BrowserNavigator } from '@telegram-apps/sdk';

new BrowserNavigator(['/index'], 0);
new BrowserNavigator([{ pathname: '/a' }, { pathname: '/b' }], 1);
```

::: warning
If an empty history items list or a cursor pointing to a non-existent item is passed, the
constructor will throw an appropriate error.
:::

### `postEvent`

The `postEvent` function allows replacing a function that calls Mini Apps methods on behalf of the
navigator.

```ts
const n = new BrowserNavigator(['/'], 0, {
  postEvent(method, payload) {
    console.log('postEvent:', method, payload);
  },
});
```

### `hashMode`

The `hashMode` property allows a developer to set the navigation mode used by the navigator. Allowed
values are `classic` (`#pathname`), `slash` (`#/pathname`), and `null`. Passing the `null` value
switches the navigator from SPA mode to MPA mode, using the entire `href` instead of the hash part
of the location.

By default, the navigator uses the `classic` mode.

```ts
const n = new BrowserNavigator(['/'], 0, {
  hashMode: 'slash'
});
```

### `base`

The `base` property is responsible for parsing routes and rendering paths assuming that they must
start with the specified `base` value.

```ts
const n = new BrowserNavigator(['/'], 0, {
  hashMode: null,
  base: '/solidjs-template',
});

n.renderPath('/home'); // -> /solidjs-template/home
```

This value is only useful when you are using the MPA mode.

## `createBrowserNavigatorFromLocation`

To simplify the process of creating `BrowserNavigator`, the package provides
the `createBrowserNavigatorFromLocation` method. Depending on the options (which are constructor
options described previously) passed, it parses the current location and creates
a `BrowserNavigator` instance.

```typescript
import { createBrowserNavigatorFromLocation } from '@telegram-apps/sdk';

const navigator = createBrowserNavigatorFromLocation({
  hashMode: 'slash',
});
```

## `initNavigator`

The `initNavigator` function is responsible for creating a `BrowserNavigator` instance
using previously saved navigator state. It also automatically saves it in the session storage
for future state restoration.

This function accepts session storage key name, which will contain navigator's state and an 
optional object, representing navigator constructor options.

```ts
import { initNavigator } from '@telegram-apps/sdk';

const n = initNavigator('app-navigator-state', {
  hashMode: 'slash',
});
```

In case, the function was unable to restore the navigator using the session storage, it will
utilize the `createBrowserNavigatorFromLocation` function.

## Attaching

Creating an instance of `BrowserNavigator` and using its methods doesn't automatically update the
browser history. To achieve this, developers should attach it. Until then, the
navigator will only update its internal state and notify all its subscribers about changes. Manual
attachment is necessary to prevent situations where several navigators of this type are created,
each trying to control the browser history with its internal state.

To allow the navigator to control the browser's history, it is required to attach it via
the `attach` method:

```typescript
import { BrowserNavigator } from '@telegram-apps/sdk';

const navigator = new BrowserNavigator(...);

navigator.attach().then(() => {
  console.log('Attachment completed');
});
```

This method returns a promise that will be resolved when the attachment is completed.

To stop the navigator from modifying the browser's history, use the `detach` method:

```typescript
navigator.detach();
```

## Navigating

The navigator provides a list of methods for developers to manipulate the navigation history.

### `back`

Goes back in history by 1.

```typescript
navigator.back();
```

### `forward`

Goes forward in history by 1.

```typescript
navigator.forward();
```

### `go`

Changes the currently active history item index by the specified delta. This method doesn't change
the index if the updated index points to a non-existing history item. This behavior is preserved
until the `fit` argument is specified. If it is specified, the method adjusts the passed delta to
fit within the bounds `[0, history.length - 1]`.

```typescript
// Goes back in history by 3 entries.
navigator.go(-3);

// Will surely do nothing in real-world applications.
navigator.go(-100000);

// Will go back to the oldest entry.
navigator.go(-100000, true);

// Will go forward to the newest entry.
navigator.go(100000, true);
```

### `goTo`

Goes to the specified index. The method does nothing if the passed index is out of bounds.

If the `fit` option is specified and the index is out of bounds, it will be adjusted to the nearest
bound.

```typescript
// Will do nothing.
navigator.goTo(-1);

// Will go to the oldest entry.
navigator.goTo(0);

// Will surely do nothing in real-world applications.
navigator.goTo(100000);

// Will go back to the oldest entry.
navigator.goTo(-100000, true);

// Will go forward to the newest entry.
navigator.goTo(100000, true);
```

### `push`

Pushes a new history item. The method replaces all entries after the current one with the one being
pushed. Note that the passed item is always relative. If you want to use it as an absolute one, use
the `/` prefix. Example: `/absolute`, `{ pathname: '/absolute' }`.

To create a final path, the navigator uses a method, used in the URL class constructor, resolving a
path based on the current one.

In the upcoming examples, let's assume that the current entry is `/home/blog`.

#### Absolute pathname

Specifying an absolute path will not merge it with the current one; instead, it will be used in its
entirety:

```typescript
navigator.push('/database');
// or
navigator.push({ pathname: '/database' });
// Navigator will add a new entry, and the current one becomes /database
```

#### Relative pathname

Specifying a relative pathname will exhibit the same behavior as in the browser:

```typescript
navigator.push('license');
// or
navigator.push({ pathname: 'license' });
// Navigator will add a new entry, and the current one becomes /home/license
```

#### Search

To add an entry with query parameters, use a question mark (`?`) or the `search` entry property:

```typescript
navigator.push('?id=1');
// or
navigator.push({ search: '?id=1' });
// Navigator will add a new entry, and the current one becomes /home/blog?id=1
```

::: info
Pushing a new pathname with different or missing query parameters will result in the loss of current
query parameters. To prevent this, the developer should pass them again.
:::

#### Hash

Adding the hash part of the entry follows the same logic as [search](#search), but using a
hashtag (`#`) and the `hash` entry property.

```typescript
navigator.push('#introduction');
// or
navigator.push({ hash: '#introduction' });
// Navigator will add a new entry, and the current 
// one becomes /home/blog#introduction
```

### `replace`

The `replace` method functions similarly to the [push](#push) method, but it doesn't create a new
entry. Instead, it replaces the current one.

## Properties

### `index`

Current history cursor.

```typescript
const navigator = new BrowserNavigator(['/'], 0);
navigator.index; // 0
```

### `id`

Current history item identifier. The navigator generates them itself if an id is not specified
explicitly.

```typescript
const navigator = new BrowserNavigator(['/'], 0);
navigator.id; // 'abb721'

const navigator2 = new BrowserNavigator([{ id: 'a', pathname: '/' }], 0);
navigator2.id; // 'a'
```

### `hash`

Current history item hash.

```typescript
const navigator = new BrowserNavigator(['/#jungle'], 0);
navigator.hash; // "#jungle"
```

### `hasPrev`

True if the navigator has items before the current item.

```typescript
const navigator = new BrowserNavigator(['/'], 0);
navigator.hasPrev; // false

const navigator2 = new BrowserNavigator(['/a', '/b'], 1);
navigator2.hasPrev; // true
```

### `hasNext`

True if the navigator has items after the current item.

```typescript
const navigator = new BrowserNavigator(['/'], 0);
navigator.hasNext; // false

const navigator2 = new BrowserNavigator(['/a', '/b'], 0);
navigator2.hasNext; // true
```

### `history`

Safe to modify navigation history.

```typescript
const navigator = new BrowserNavigator(['/a#a-hash', '/b?b-query=1'], 0);
navigator.history;
// [
//   { pathname: '/a', hash: '#a-hash', search: '', id: 'ahJJ123' },
//   { pathname: '/b', hash: '', search: '?b-query=1', id: 'dd82' },
// ]
```

### `path`

Path, including pathname, search, and hash.

```typescript
const navigator = new BrowserNavigator([{
  pathname: '/a',
  hash: '#mama',
  search: '?joe',
}], 0);
navigator.path; // '/a?joe#mama'
```

### `pathname`

Current pathname. Always starts with a slash.

```typescript
const navigator = new BrowserNavigator([{
  pathname: '/a',
  hash: '#mama',
  search: '?joe',
}], 0);
navigator.pathname; // '/a'
```

### `search`

Current query parameters.

```typescript
const navigator = new BrowserNavigator([{
  pathname: '/a',
  hash: '#mama',
  search: '?joe',
}], 0);
navigator.search; // '?joe'
```

### `state`

Current history item state.

```typescript
const navigator = new BrowserNavigator([{ state: 'test' }], 0);


navigator.state; // 'test'
```

## Events

`BrowserNavigator` provides `on` and `off` methods to manage event listeners. Currently, the only
event available for listening is `change`. The `change` event's payload is an object containing the
following properties:

- `navigator: BrowserNavigator`: The related navigator instance.
- `delta: number`: The delta of the currently active item cursor.
- `from: { pathname: string; hash: string; search: string; id: string; state?: State }`: The
  previously active history item.
- `to`: An object with the same structure as `from`, representing the currently active history item.

### Adding an Event Listener

To add an event listener for the `change` event, use the `on` method:

```typescript
const removeEventListener = navigator.on('change', (ev) => {
  console.warn('Navigation state changed', ev);
});
```

### Removing an Event Listener

To remove an event listener, call the function returned by the `on` method:

```typescript
removeEventListener();
```

Alternatively, you could use the navigator's `off` method:

```typescript
function listener(ev) {
  console.warn('Navigation state changed', ev);
}
navigator.on('change', listener);
navigator.off('change', listener);
```

## Other Methods

### `renderPath`

The `renderPath` method combines the navigator's `base` property with the given path data, applying
the navigator's navigation mode. This method returns the fully rendered path as a string.

```typescript
const n = new BrowserNavigator(['/'], 0, {
  hashMode: 'slash',
});
n.renderPath('/test'); // '#/test'

const n2 = new BrowserNavigator(['/'], 0, {
  base: '/my-base',
  hashMode: 'slash',
});
n2.renderPath('/test'); // '#/my-base/test'

const n3 = new BrowserNavigator(['/'], 0, {
  base: '/my-base',
  hashMode: null,
});
n3.renderPath('/test'); // '/my-base/test'
```

### `parsePath`

The `parsePath` method parses the provided path according to the current navigation type and returns
it as an object. This method helps to understand how the navigator interprets the given path.

```typescript
const n = new BrowserNavigator(['/'], 0);
n.parsePath('/test');
// { pathname: '/', search: '', hash: '' }

n.parsePath('/test#abc');
// { pathname: '/abc', search: '', hash: '' }

n.parsePath('/test#abc?query#some-hash');
// { pathname: '/abc', search: '?query', hash: '#some-hash' }

const n2 = new BrowserNavigator(['/'], 0, { hashMode: null });
n2.parsePath('/test');
// { pathname: '/test', search: '', hash: '' }

n2.parsePath('/test#abc');
// { pathname: '/test', search: '', hash: '#abc' }

n2.parsePath('/test?query#abc');
// { pathname: '/test', search: '?query', hash: '#abc' }
```
```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/components.md

```markdown
---
outline: [2, 3]
---

# Components

## Init

According to the design of this package, the developer has complete control over its lifecycle,
including the initialization process. This means that there are no pre-initialized global components
available for use by the developer. They must create the components themselves.

To simplify the developer's workflow, the package includes special functions prefixed with
the `init` string. These functions return a tuple, containing an instance of the initialized component
and a cleanup function, removing all side effects created by this init function.

Here is an example:

```typescript
import { initBackButton, initMainButton } from '@telegram-apps/sdk';

const [mb, cleanupMb] = initMainButton();
const [bb, cleanupBb] = initBackButton();

// Clicking the MainButton hides it and shows the BackButton.
mb.on('click', () => {
  mb.hide();
  bb.show();
});

// Clicking the BackButton hides it and shows the MainButton.
bb.on('click', () => {
  mb.show();
  bb.hide();
});

// Configure the MainButton.
mb
  .setBgColor('#ff0000')
  .setTextColor('#ffffff')
  .setText('Expand')
  .enable()
  .show();

// When we don't need BackButton and MainButton anymore, we can 
// perform a cleanup. After calling a cleanup, the initialized 
// component will not receive any events.
cleanupMb();
cleanupBb();
```

:::info

Take note that some components cannot be instantiated synchronously as long as there is no
information about them locally. Use each component's documentation to learn more about how the
component initializes.

:::

## Events

Component instances use the common way of events listening through the `on` and `off` methods.
Here is the example with the `BackButton` component:

```typescript
import { initBackButton } from '@telegram-apps/sdk';

const [bb] = initBackButton();

// Clicking the BackButton hides it and shows the MainButton.
bb.on('click', () => {
  console.log('BackButton clicked.');
});
```

You can find the list of supported events in components own documentations.

## Methods Support

Almost each component is capable of checking whether its method is supported by the current
Mini Apps version or not. To check if some methods are supported, developer should use the component
instance `supports()` function. For example:

```typescript
import { BackButton } from '@telegram-apps/sdk';

let bb = new BackButton('6.0', ...);
bb.supports('show'); // false

bb = new BackButton('6.3', ...);
bb.supports('hide'); // true
```

Some of the components support an additional method `supportsParam` which allows checking if
method <ins>parameter</ins> is supported:

```typescript
import { Utils } from '@telegram-apps/sdk';

let utils = new Utils('6.0', ...);
utils.supportsParam('openLink.tryInstantView'); // false

utils = new Utils('6.10', ...);
utils.supportsParam('openLink.tryInstantView'); // true
```

::: tip

It is recommended to use this functionality before calling some component method as long as this
will make developer sure, it will work. The list of supported methods by components is described in
each component documentation.

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/css-variables.md

```markdown
# CSS Variables

This package provides utilities to help developers automate component CSS variables management.
Similar to the Telegram SDK, `@telegram-apps/sdk` allows developers to set global CSS variables connected
to specific components.

## `bindViewportCSSVars`

The `bindViewportCSSVars` function accepts a [Viewport](components/viewport.md) instance and creates
variables for the following properties: `height`, `width`, and `stableHeight`.

```ts
import { bindViewportCSSVars, initViewport } from '@telegram-apps/sdk';

const vp = await initViewport();

bindViewportCSSVars(vp);
```

By default, this function creates global CSS variables with the
names `--tg-viewport-height`, `--tg-viewport-width`, and `--tg-viewport-stable-height`. However, the
function allows passing a CSS variable name generator, which accepts one of the string values, each
responsible for a specific property: `width`, `height`, or `stable-height`.

```ts
bindViewportCSSVars(vp, key => {
  switch (key) {
    case 'height':
      return `--viewportHeight`;
    case 'width':
      return `--viewportWidth`;
    case 'stable-height':
      return `--viewportStableHeight`;
    default:
      return `--void`;
  }
});
```

## `bindThemeParamsCSSVars`

This function accepts a [ThemeParams](components/theme-params.md) instance and creates global CSS
variables related to the theme parameters.

```ts
import { bindThemeParamsCSSVars, initThemeParams } from '@telegram-apps/sdk';

const tp = initThemeParams();

bindThemeParamsCSSVars(tp);
```

By default, this function converts ThemeParams instance properties from camel case to kebab case and
adds the prefix `--tg-theme-`. Here is an example of the created variables:

- `--tg-theme-bg-color`
- `--tg-theme-secondary-bg-color`
- `--tg-theme-accent-text-color`
- etc.

Similar to the [bindViewportCSSVars](#bindViewportCSSVars) function, it allows passing a CSS
variable name generator that accepts ThemeParams instance properties.

```ts
bindThemeParamsCSSVars(tp, key => {
  // Converts camel case to kebab case.
  return `--${key.replace(/[A-Z]/g, m => `-${m.toLowerCase()}`)}`;
});
```

## `bindMiniAppCSSVars`

The `bindMiniAppCSSVars` function accepts an instance of [MiniApp](components/mini-app.md) along
with a [ThemeParams](components/theme-params.md) instance, creating global CSS variables related to
the MiniApp instance.

```ts
import { bindMiniAppCSSVars, initMiniApp, initThemeParams } from '@telegram-apps/sdk';

const ma = initMiniApp();
const tp = initThemeParams();

bindMiniAppCSSVars(ma, tp);
```

By default, it creates variables such as `--tg-bg-color` and `--tg-header-color`. However, like all
other CSS variable binding functions, it allows customizing generated names. The passed generator
accepts one of the keys: `bg` and `header`, expecting it to return a complete CSS variable name.

```ts
bindMiniAppCSSVars(ma, tp, key => {
  switch (key) {
    case 'bg':
      return `--miniAppBg`;
    case 'header':
      return `--miniAppHeader`;
    default:
      return `--void`;
  }
});
```
```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/environment.md

```markdown
# Environment

This package is designed to be used only inside the Telegram application. Since non-Telegram
environments lack Telegram-specific traits, calling methods such
as [retrieveLaunchParams](launch-parameters.md#retrieving)
or [postEvent](methods-and-events.md#postevent) will lead to errors.

Nevertheless, the package provides the `mockTelegramEnv` function, which imitates the environment
provided by Telegram. It helps developers start developing applications even without creating a mini
app record in BotFather.

This function accepts launch parameters in a raw or parsed format. Here is an example:

```ts
import { mockTelegramEnv, parseInitData } from '@telegram-apps/sdk';

const initDataRaw = new URLSearchParams([
  ['user', JSON.stringify({
    id: 99281932,
    first_name: 'Andrew',
    last_name: 'Rogue',
    username: 'rogue',
    language_code: 'en',
    is_premium: true,
    allows_write_to_pm: true,
  })],
  ['hash', '89d6079ad6762351f38c6dbbc41bb53048019256a9443988af7a48bcad16ba31'],
  ['auth_date', '1716922846'],
  ['start_param', 'debug'],
  ['chat_type', 'sender'],
  ['chat_instance', '8428209589180549439'],
]).toString();

mockTelegramEnv({
  themeParams: {
    accentTextColor: '#6ab2f2',
    bgColor: '#17212b',
    buttonColor: '#5288c1',
    buttonTextColor: '#ffffff',
    destructiveTextColor: '#ec3942',
    headerBgColor: '#17212b',
    hintColor: '#708499',
    linkColor: '#6ab3f3',
    secondaryBgColor: '#232e3c',
    sectionBgColor: '#17212b',
    sectionHeaderTextColor: '#6ab3f3',
    subtitleTextColor: '#708499',
    textColor: '#f5f5f5',
  },
  initData: parseInitData(initDataRaw),
  initDataRaw,
  version: '7.2',
  platform: 'tdesktop',
});
```

::: warning
Note that this function only imitates Telegram environment behavior. It doesn't send any real
requests or perform actions that you will only see in the Telegram application.
:::
```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/init-data.md

```markdown
# Init Data

This section of SDK provides utilities to work with Mini
Apps [init data](../../../platform/init-data.md).

## Parsing

This library includes the function `parseInitData`, which can extract initialization data
information from query parameters. Here is an example of its usage:

```typescript
import { parseInitData } from '@telegram-apps/sdk';

// Let's imagine, we have init data in a raw format like this. Telegram application is
// sending it in the exact same format.
const initDataString =
  'query_id=AAHdF6IQAAAAAN0XohDhrOrc' +
  '&user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%7D' +
  '&auth_date=1662771648' +
  '&hash=c501b71e775f74ce10e377dea85a7ea24ecd640b223ea86dfe453e0eaed2e2b2';

// Extract init data.
console.log(parseInitData(initDataString));
// or
console.log(parseInitData(new URLSearchParams(initDataString)));

// Output:
// {
//   authDate: 2022-09-10T01:00:48.000Z,
//   hash: 'c501b71e775f74ce10e377dea85a7ea24ecd640b223ea86dfe453e0eaed2e2b2',
//   queryId: 'AAHdF6IQAAAAAN0XohDhrOrc',
//   user: {
//     id: 279058397,
//     firstName: 'Vladislav',
//     lastName: 'Kibenko',
//     username: 'vdkfrost',
//     languageCode: 'ru',
//     isPremium: true
//   }
// }
```

The function extracts the required parameters and automatically validates their types. If a property
has an invalid type or value, it will throw an error. To learn more about returned type, refer
to [InitData](init-data/init-data.md) type page.

## Validating and Signing

Validation and signing utilities has been moved to the separate
package - [@telegram-apps/init-data-node](../../telegram-apps-init-data-node).

```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/launch-parameters.md

```markdown
# Launch Parameters

This section of SDK covers the topic related
to [launch parameters](../../../platform/launch-parameters.md).

## Parsing

To parse a value as launch parameters, the package provides the method `parseLaunchParams`. This
method accepts query parameters presented as a string or an instance of `URLSearchParams`, returning
the `LaunchParams` interface. It throws an error if the passed data is invalid.

::: code-group

```typescript [Usage example]
import { parseLaunchParams, launchParamsParser } from '@telegram-apps/sdk';

parseLaunchParams(
  new URLSearchParams([
    ['tgWebAppVersion', '6.7'],
    ['tgWebAppPlatform', 'tdekstop'],
    ['tgWebAppBotInline', '1'],
    ['tgWebAppData', new URLSearchParams([
      ['query_id', 'AAHdF6IQAAAAAN0XohAOqR8k'],
      ['user', JSON.stringify({
        id: 279058397,
        first_name: 'Vladislav',
        last_name: 'Kibenko',
        username: 'vdkfrost',
        language_code: 'ru',
        is_premium: true,
        allows_write_to_pm: true,
      })],
      ['auth_date', '1691441944'],
      ['hash', 'abc'],
    ]).toString()],
    ['tgWebAppThemeParams', JSON.stringify({
      bg_color: '#17212b',
      button_color: '#5288c1',
      button_text_color: '#ffffff',
      hint_color: '#708499',
      link_color: '#6ab3f3',
      secondary_bg_color: '#232e3c',
      text_color: '#f5f5f5',
    })],
  ]),
);
```

```typescript [Expected result]
const result = {
  botInline: true,
  version: '6.7',
  platform: 'tdesktop',
  themeParams: {
    bgColor: '#17212b',
    buttonColor: '#5288c1',
    buttonTextColor: '#ffffff',
    hintColor: '#708499',
    linkColor: '#6ab3f3',
    secondaryBgColor: '#232e3c',
    textColor: '#f5f5f5',
  },
  initDataRaw: 'query_id=AAHdF6IQAAAAAN0XohAOqR8k&user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%7D&auth_date=1691441944&hash=abc',
  initData: {
    queryId: 'AAHdF6IQAAAAAN0XohAOqR8k',
    authDate: new Date(1691441944000),
    hash: 'abc',
    user: {
      id: 279058397,
      firstName: 'Vladislav',
      lastName: 'Kibenko',
      username: 'vdkfrost',
      languageCode: 'ru',
      isPremium: true,
      allowsWriteToPm: true,
    },
  },
};
```

:::

## Serializing

To convert the launch parameters object representation to a string, developers should use
the `serializeLaunchParams` function:

```typescript
import { serializeLaunchParams } from '@telegram-apps/sdk';

serializeLaunchParams({
  version: '6.7',
  platform: 'tdesktop',
  themeParams: {
    bgColor: '#17212b',
    buttonColor: '#5288c1',
    buttonTextColor: '#ffffff',
    hintColor: '#708499',
    linkColor: '#6ab3f3',
    secondaryBgColor: '#232e3c',
    textColor: '#f5f5f5',
  },
});

// Result:
// tgWebAppVersion=6.7
// &tgWebAppPlatform=tdesktop
// &tgWebAppThemeParams=%7B%22bg_color%22%3A%22%2317212b%22%2C%22button_color%22%3A%22%235288c1%22%2C%22button_text_color%22%3A%22%23ffffff%22%2C%22hint_color%22%3A%22%23708499%22%2C%22link_color%22%3A%22%236ab3f3%22%2C%22secondary_bg_color%22%3A%22%23232e3c%22%2C%22text_color%22%3A%22%23f5f5f5%22%7D
```

## Retrieving

This package enables the extraction of launch parameters from the current environment using
the `retrieveLaunchParams` function which surely extracts launch parameters. This function
throws an error if all known sources contain invalid data.

```typescript
import { retrieveLaunchParams } from '@telegram-apps/sdk';

const launchParams = retrieveLaunchParams();
```

```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/methods-and-events.md

```markdown
# Methods and Events

This section of SDK covers the topic related
to [apps communication](../../../platform/apps-communication.md).

## Calling Methods

To call the Telegram Mini Apps methods, developer should use `postEvent` function:

```typescript
import { postEvent } from '@telegram-apps/sdk';

postEvent('web_app_setup_back_button', { is_visible: true });
```

This function automatically finds the correct way to send this event based on the current
environment features. For greater accuracy, it determines the current Telegram application type and
selects the appropriate flow.

### `request`

`request` function should be used in case, it is required to call some Telegram Mini Apps method
and receive specified event. For example, developer would like to
call [web_app_request_viewport](../../../platform/methods.md#web-app-request-viewport)
method and catch [viewport_changed](../../../platform/events.md#viewport-changed)
event, to receive actual viewport data.

```typescript
import { request } from '@telegram-apps/sdk';

const viewport = await request({
  method: 'web_app_request_viewport',
  event: 'viewport_changed'
});

console.log(viewport);
// Output:
// {
//   is_state_stable: true,
//   is_expanded: false,
//   height: 320
// };
```

In case, Telegram Mini Apps method accepts parameters, you should pass them in the `params`
property of the third argument:

```typescript
import { request } from '@telegram-apps/sdk';

const buttonId = await request({
  method: 'web_app_open_popup',
  event: 'popup_closed',
  params: {
    title: 'Caution',
    message: 'Should we delete you account?',
    buttons: [
      { id: 'yes', type: 'ok' },
      { id: 'no', type: 'cancel' },
    ],
  },
});
```

Moreover, you can track several events in the same time:

```typescript
import { request } from '@telegram-apps/sdk';

const result = await request({
  method: 'web_app_open_scan_qr_popup',
  event: ['qr_text_received', 'scan_qr_popup_closed'],
});

// result will either be qr_text_received or 
// scan_qr_popup_closed events payload.
```

This function allows passing additional options, such as `postEvent`, `timeout` and `capture`.

#### `postEvent`

We use `postEvent` option to override the method, which is used to call the Telegram Mini Apps
method.

```typescript
import { request, createPostEvent } from '@telegram-apps/sdk';

request({
  method: 'web_app_request_viewport',
  event: 'viewport_changed',
  postEvent: createPostEvent('6.5'),
});
```

#### `timeout`

`timeout` option is responsible for assigning the request timeout. In case, timeout was reached,
an error will be thrown.

```typescript
import { request, isTimeoutError } from '@telegram-apps/sdk';

try {
  await request({
    method: 'web_app_invoke_custom_method',
    event: 'custom_method_invoked',
    timeout: 5000,
    params: {
      req_id: '1',
      method: 'deleteStorageValues',
      params: { keys: ['a'] },
    },
  });
} catch (e) {
  console.error(isTimeoutError(e) ? 'Timeout error' : 'Some different error', e);
}
```

#### `capture`

`capture` property is a function, that allows developer to determine if occurred Mini Apps
event should be captured and returned from the `request` function:

```typescript
const slug = 'jjKSJnm1k23lodd';

request({
  method: 'web_app_open_invoice',
  event: 'invoice_closed',
  params: { slug },
  capture(data) {
    return slug === data.slug;
  },
});
```

By default, the `request` function captures the first event with required name. In this
case, `request` function will capture the event only in case, it has the expected slug.

## Invoking Custom Methods

Custom methods are methods, which could be used by Telegram Mini Apps
[web_app_invoke_custom_method](../../../platform/methods.md#web-app-invoke-custom-method)
method. `invokeCustomMethod` function simplifies usage of such methods and reuses the `request`
function.

Here is the code example without using this function:

```typescript
import { request } from '@telegram-apps/sdk';

const reqId = 'ABC';

request({
  method: 'web_app_invoke_custom_method',
  event: 'custom_method_invoked',
  params: {
    req_id: reqId,
    method: 'deleteStorageValues',
    params: { keys: ['a'] },
  },
  capture(data) {
    return data.req_id === reqId;
  }
});
```

And that is how we could rewrite it using the `invokeCustomMethod` function:

```typescript
import { invokeCustomMethod } from '@telegram-apps/sdk';

invokeCustomMethod('deleteStorageValues', { keys: ['a'] }, 'ABC');
```

In contrary to the `request` function, the `invokeCustomMethod` function parses the result and
checks if contains the `error` property. In case it does, the function will throw the according
error. Otherwise, the `result` property will be returned.

## Listening to Events

### `on` and `off`

To start working with events, developer could use `on` and `off` functions. Here is how basic
`on` function usage looks like:

```typescript
import { on } from '@telegram-apps/sdk';

// Start listening to "viewport_changed" event. Returned value
// is a function, which removes this event listener.
const removeListener = on('viewport_changed', payload => {
  console.log('Viewport changed:', payload);
});

// Remove this event listener.
removeListener();
```

To stop listening to events, developer could alternatively use `off` function:

```typescript
import { on, off, type MiniAppsEventListener } from '@telegram-apps/sdk';

const listener: MiniAppsEventListener<'viewport_changed'> = payload => {
  console.log('Viewport changed:', payload);
};

// Start listening to event.
on('viewport_changed', listener);

// Remove event listener.
off('viewport_changed', listener);
```

To call listener only once, use the third boolean argument.

```typescript
import { on } from '@telegram-apps/sdk';

// Will be automatically removed after the first listener execution.
on('viewport_changed', (payload) => {
  console.log('Viewport changed:', payload);
}, true);
```

### `subscribe` and `unsubscribe`

To listen to all events sent from the native Telegram application, developer should utilize
such functions as `subscribe` and `unsubscribe`:

```typescript
import {
  subscribe,
  unsubscribe,
  type MiniAppsGlobalEventListener,
} from '@telegram-apps/sdk';

const listener: MiniAppsSubscribeListener = (event) => {
  console.log('Received event', event);
};

// Listen to all events.
subscribe(listener);

// Remove this listener.
unsubscribe(listener);
```

The listener accepts an object, containing the `name` and `payload` properties, which are Mini Apps
event name and payload.

## Checking Method Support

`postEvent` function itself is not checking if specified method supported by current native Telegram
application. To do this, developer could use `supports` function which accepts Mini Apps
method name and current platform version:

```typescript
import { supports } from '@telegram-apps/sdk';

supports('web_app_trigger_haptic_feedback', '6.0'); // false
supports('web_app_trigger_haptic_feedback', '6.1'); // true
```

The `supports` function also allows checking if specified parameter in method parameters is
supported:

```typescript
import { supports } from '@telegram-apps/sdk';

supports('web_app_open_link', 'try_instant_view', '6.0'); // false
supports('web_app_open_link', 'try_instant_view', '6.7'); // true
```

::: tip

It is recommended to use this function before calling Mini Apps methods to prevent applications from
stalling and other unexpected behavior.

:::

### Creating safer `postEvent`

This package includes a function named `createPostEvent` that takes the current Mini Apps
version as input. It returns the `postEvent` function, which internally checks if the specified
method and parameters are supported. If they are not, the function will throw an error.

```typescript
import { createPostEvent } from '@telegram-apps/sdk';

const postEvent = createPostEvent('6.5');

// Will work fine.
postEvent('web_app_read_text_from_clipboard');

// Will throw an error.
postEvent('web_app_request_phone');
```

It is highly recommended to use this `postEvent` generator to ensure that method calls work as
expected.

## Debugging

Package supports enabling the debug mode, which leads to logging messages related to events
handling. To change debug mode, use `setDebug` function:

```typescript
import { setDebug } from '@telegram-apps/sdk';

setDebug(true);
```

## Target Origin

If the package is being used in a browser environment (iframe), packages employs the
function `window.parent.postMessage`. This function requires specifying the target origin to ensure
events are only sent to trusted parent iframes. By default, the package
utilizes `https://web.telegram.org` as the origin. To enable event transmission to other origins,
developer should utilize the `setTargetOrigin` function:

```typescript
import { setTargetOrigin } from '@telegram-apps/sdk';

setTargetOrigin('https://myendpoint.org');
```

::: warning

It is strongly recommended not to override this value as long as it could lead to security issues.
Specify this value only when you know what you are doing.

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/navigation.md

```markdown
# Navigation

Navigation in mobile applications has a rather complex nature. We use the term 'mobile' here
because, at the moment, Mini Apps are designed to resemble mobile applications, so the navigation
should follow suit.

Since Mini Apps are web applications meant to emulate mobile interfaces, it's essential to compare
browser and mobile navigation mechanisms. It's safe to say that they don't have much in common.

In simple terms, browser navigation operates over a two-linked list of history entries. Developers
can navigate through each node using forward or back navigation methods. It's also possible to
replace the current entry and add new entries, removing all those placed after the current one.

On the contrary, mobile navigation allows developers to use a multi-navigation context, implying the
existence of several navigation contexts across the application.

However, browser navigation comes with rather strict restrictions that make it challenging to
comfortably mimic the behavior seen in mobile applications within Telegram Mini Apps. This is why
`@telegram-apps/sdk` provides functionality related to navigation.

```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x/theme-parameters.md

```markdown
# Theme Parameters

This section of SDK covers the topic related
to [theme parameters](../../../platform/theming.md).

## Parsing

To parse a value as theme parameters, the package provides the method `parseThemeParams`. This
method accepts a JSON object as a string or a JavaScript object, returning the `ThemeParams`
interface. It throws an error if the provided data is invalid.

::: code-group

```typescript [Usage example]
import { parseThemeParams } from '@telegram-apps/sdk';

parseThemeParams({
  accent_text_color: "#6ab2f2",
  bg_color: "#17212b",
  button_color: "#5288c1",
  button_text_color: "#ffffff",
  destructive_text_color: "#ec3942",
  header_bg_color: "#17212b",
  hint_color: "#708499",
  link_color: "#6ab3f3",
  secondary_bg_color: "#232e3c",
  section_bg_color: "#17212b",
  section_header_text_color: "#6ab3f3",
  subtitle_text_color: "#708499",
  text_color: "#f5f5f5"
});
```

```typescript [Expected result]
const result = {
  accentTextColor: "#6ab2f2",
  bgColor: "#17212b",
  buttonColor: "#5288c1",
  buttonTextColor: "#ffffff",
  destructiveTextColor: "#ec3942",
  headerBgColor: "#17212b",
  hintColor: "#708499",
  linkColor: "#6ab3f3",
  secondaryBgColor: "#232e3c",
  sectionBgColor: "#17212b",
  sectionHeaderTextColor: "#6ab3f3",
  subtitleTextColor: "#708499",
  textColor: "#f5f5f5"
};
```

:::

Assuming each property is written using snake case it converts them to camel case.

## Serializing

To convert the theme parameters object representation to a string, developers should use
the `serializeThemeParams` function:

```typescript
import { serializeThemeParams } from '@telegram-apps/sdk';

serializeThemeParams({
  accentTextColor: "#6ab2f2",
  bgColor: "#17212b",
  buttonColor: "#5288c1",
  buttonTextColor: "#ffffff",
  destructiveTextColor: "#ec3942",
  headerBgColor: "#17212b",
  hintColor: "#708499",
  linkColor: "#6ab3f3",
  secondaryBgColor: "#232e3c",
  sectionBgColor: "#17212b",
  sectionHeaderTextColor: "#6ab3f3",
  subtitleTextColor: "#708499",
  textColor: "#f5f5f5"
});

// Result:
// `{
//   "accent_text_color":"#6ab2f2",
//   "bg_color":"#17212b",
//   "button_color":"#5288c1",
//   "button_text_color":"#ffffff",
//   "destructive_text_color":"#ec3942",
//   "header_bg_color":"#17212b",
//   "hint_color":"#708499",
//   "link_color":"#6ab3f3",
//   "secondary_bg_color":"#232e3c",
//   "section_bg_color":"#17212b",
//   "section_header_text_color":"#6ab3f3",
//   "subtitle_text_color":"#708499",
//   "text_color":"#f5f5f5"
// }`
```

```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x/components/back-button.md

```markdown
# Back Button

The ðŸ’ [component](../scopes.md) responsible for the Telegram Mini
Apps [back button](../../../../platform/back-button.md).

## Checking Support

To check if the back button is supported by the current Telegram Mini Apps version, use the
`isSupported` method:

::: code-group

```ts [Variable]
import { backButton } from '@telegram-apps/sdk';

backButton.isSupported(); // boolean
```

```ts [Functions]
import { isBackButtonSupported } from '@telegram-apps/sdk';

isBackButtonSupported(); // boolean
```

:::

## Mounting

Before using this component, it is necessary to mount it to work with properly configured
properties. To do so, use the `mount` method. It will update the `isMounted` signal property.

::: code-group

```ts [Variable]
import { backButton } from '@telegram-apps/sdk';

if (backButton.mount.isAvailable()) {
  backButton.mount();
  backButton.isMounted(); // true
}
```

```ts [Functions]
import { mountBackButton, isBackButtonMounted } from '@telegram-apps/sdk';

if (mountBackButton.isAvailable()) {
  mountBackButton();
  isBackButtonMounted(); // true
}
```

:::

To unmount, use the `unmount` method:

::: code-group

```ts [Variable]
backButton.unmount();
backButton.isMounted(); // false
```

```ts [Functions]
import { unmountBackButton, isBackButtonMounted } from '@telegram-apps/sdk';

unmountBackButton();
isBackButtonMounted(); // false
```

:::

## Showing and Hiding

To change the button's visibility, use the `hide()` and `show()` methods. These methods update
the `isVisible` signal property value.

::: code-group

```ts [Variable]
if (backButton.show.isAvailable()) {
  backButton.show();
  backButton.isVisible(); // true
}

if (backButton.hide.isAvailable()) {
  backButton.hide();
  backButton.isVisible(); // false
}
```

```ts [Functions]
import {
  showBackButton,
  hideBackButton,
  isBackButtonVisible,
} from '@telegram-apps/sdk';

if (showBackButton.isAvailable()) {
  showBackButton();
  isBackButtonVisible(); // true
}

if (hideBackButton.isAvailable()) {
  hideBackButton();
  isBackButtonVisible(); // false
}
```

:::

## Tracking Click

To add a button click listener, use the `onClick` method. It returns a function to remove the bound
listener. Alternatively, you can use the `offClick` method.

::: code-group

```ts [Variable]
if (backButton.onClick.isAvailable()) {
  function listener() {
    console.log('Clicked!');
  }

  const offClick = backButton.onClick(listener);
  offClick();
  // or
  backButton.onClick(listener);
  backButton.offClick(listener);
}
```

```ts [Functions]
import { onBackButtonClick, offBackButtonClick } from '@telegram-apps/sdk';

if (onBackButtonClick.isAvailable()) {
  function listener() {
    console.log('Clicked!');
  }

  const offClick = onBackButtonClick(listener);
  offClick();
  // or
  onBackButtonClick(listener);
  offBackButtonClick(listener);
}
```

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x/components/biometry.md

```markdown
# Biometry

The ðŸ’ [component](../scopes.md) responsible for biometry functionality for Telegram Mini Apps.

## Checking Support

To check if biometry is supported by the current Telegram Mini Apps version, use the `isSupported`
method:

::: code-group

```ts [Variable]
import { biometry } from '@telegram-apps/sdk';

biometry.isSupported(); // boolean
```

```ts [Functions]
import { isBiometrySupported } from '@telegram-apps/sdk';

isBiometrySupported(); // boolean
```

:::

## Mounting

Before using the component, it must be mounted.

This process is asynchronous, as biometry data needs to be requested from the Telegram application.
The `isMounting` signal will be set to `true` during the process and updated to `false` when
complete.

If mounting is successful, the `isMounted` signal will be set to `true`. If errors occur,
the `mountError` signal will reflect the error.

::: code-group

```ts [Variable]
if (biometry.mount.isAvailable()) {
  try {
    const promise = biometry.mount();
    biometry.isMounting(); // true
    await promise;
    biometry.isMounting(); // false
    biometry.isMounted(); // true
  } catch (err) {
    biometry.mountError(); // equals "err"
    biometry.isMounting(); // false
    biometry.isMounted(); // false
  }
}
```

```ts [Functions]
import {
  mountBiometry,
  isBiometryMounting,
  isBiometryMounted,
  biometryMountError,
} from '@telegram-apps/sdk';

if (mountBiometry.isAvailable()) {
  try {
    const promise = mountBiometry();
    isBiometryMounting(); // true
    await promise;
    isBiometryMounting(); // false
    isBiometryMounted(); // true
  } catch (err) {
    biometryMountError(); // equals "err"
    isBiometryMounting(); // false
    isBiometryMounted(); // false
  }
}
```

:::

To unmount, use the `unmount` method:

::: code-group

```ts [Variable]
biometry.unmount();
biometry.isMounted(); // false
```

```ts [Functions]
import { unmountBiometry, isBiometryMounted } from '@telegram-apps/sdk';

unmountBiometry();
isBiometryMounted(); // false
```

:::

## Requesting Biometry Access

To request biometry access, use the `requestAccess` method. It returns a promise with boolean
value indicating whether access was granted by the user.

::: code-group

```ts [Variable]
if (biometry.requestAccess.isAvailable()) {
  const granted = await biometry.requestAccess(); // boolean
}
```

```ts [Functions]
import { requestBiometryAccess } from '@telegram-apps/sdk';

if (requestBiometryAccess.isAvailable()) {
  const granted = await requestBiometryAccess(); // boolean
}
```

:::

## Authenticating

To authenticate a user and retrieve a previously saved token, use the `authenticate` method.

It optionally accepts an object with the following properties:

- `reason?: string`: a reason for authentication to display to the user.

The method returns an object with `status` (`'failed'` or `'authorized'`) and, if successful,
a `token: string`.

::: code-group

```ts [Variable]
if (biometry.authenticate.isAvailable()) {
  const { status, token } = await biometry.authenticate({
    reason: 'Please!',
  });

  if (status === 'authorized') {
    console.log(`Authorized. Token: ${token}`);
  } else {
    console.log('Not authorized');
  }
}
```

```ts [Functions]
import { authenticateBiometry } from '@telegram-apps/sdk';

if (authenticateBiometry.isAvailable()) {
  const { status, token } = await authenticateBiometry({
    reason: 'Please!',
  });

  if (status === 'authorized') {
    console.log(`Authorized. Token: ${token}`);
  } else {
    console.log('Not authorized');
  }
}
```

:::

## Updating Token

To update the token stored in local secure storage, use the `updateToken` method.

The method accepts an optional object with the `reason` and `token` properties. If no token is
provided, the existing token will be deleted.

It returns a promise with boolean indicating if any changes were made.

::: code-group

```ts [Variable]
if (biometry.updateToken.isAvailable()) {
  const updated = await biometry.updateToken({
    reason: 'Want to delete',
  });

  await biometry.updateToken({
    reason: 'Will set a new one',
    token: 'new token',
  });
}
```

```ts [Functions]
import { updateBiometryToken } from '@telegram-apps/sdk';

if (updateBiometryToken.isAvailable()) {
  const updated = await updateBiometryToken({
    reason: 'Want to delete',
  });

  await updateBiometryToken({
    reason: 'Will set a new one',
    token: 'new token',
  });
}
```

:::

## Opening Settings

To open the biometry-related settings modal, use the `openSettings` method. This method can only be
triggered in response to user interaction.

::: code-group

```ts [Variable]
if (biometry.openSettings.isAvailable()) {
  biometry.openSettings();
}
```

```ts [Functions]
import { openBiometrySettings } from '@telegram-apps/sdk';

if (openBiometrySettings.isAvailable()) {
  openBiometrySettings();
}
```

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x/components/closing-behavior.md

```markdown
# Closing Behavior

The ðŸ’ [component](../scopes.md) responsible for the Telegram Mini
Apps [closing behavior](../../../../platform/closing-behavior.md).

## Mounting

Before using this component, it is necessary to mount it to work with properly configured
properties. To do so, use the `mount` method. It will update the `isMounted` signal property.

::: code-group

```ts [Variable]
import { closingBehavior } from '@telegram-apps/sdk';

if (closingBehavior.mount.isAvailable()) {
  closingBehavior.mount();
  closingBehavior.isMounted(); // true
}
```

```ts [Functions]
import {
  mountClosingBehavior,
  isClosingBehaviorMounted,
} from '@telegram-apps/sdk';

if (mountClosingBehavior.isAvailable()) {
  mountClosingBehavior();
  isClosingBehaviorMounted(); // true
}
```

:::

To unmount, use the `unmount` method:

::: code-group

```ts [Variable]
closingBehavior.unmount();
closingBehavior.isMounted(); // false
```

```ts [Functions]
import {
  unmountClosingBehavior,
  isClosingBehaviorMounted,
} from '@telegram-apps/sdk';

unmountClosingBehavior();
isClosingBehaviorMounted(); //  false
```

:::

## Closing Confirmation

To change the closing confirmation behavior, use the `enableConfirmation()`
and `disableConfirmation()` methods. These methods update the `isConfirmationEnabled` signal
property value.

::: code-group

```ts [Variable]
if (closingBehavior.enableConfirmation.isAvailable()) {
  closingBehavior.enableConfirmation();
  closingBehavior.isConfirmationEnabled(); // true
}

if (closingBehavior.disableConfirmation.isAvailable()) {
  closingBehavior.disableConfirmation();
  closingBehavior.isConfirmationEnabled(); // false
}
```

```ts [Functions]
import {
  enableClosingConfirmation,
  disableClosingConfirmation,
} from '@telegram-apps/sdk';

if (enableClosingConfirmation.isAvailable()) {
  enableClosingConfirmation();
  isClosingConfirmationEnabled(); // true
}

if (disableClosingConfirmation.isAvailable()) {
  disableClosingConfirmation();
  isClosingConfirmationEnabled(); // false
}
```

:::
```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x/components/cloud-storage.md

```markdown
# Cloud Storage

The ðŸ’ [component](../scopes.md) responsible for managing the cloud storage in Telegram Mini Apps.

## Checking Support

To check if the cloud storage is supported by the current Telegram Mini Apps version, the
`isSupported` method is used:

::: code-group

```ts [Variable]
import { cloudStorage } from '@telegram-apps/sdk';

cloudStorage.isSupported(); // boolean
```

```ts [Functions]
import { isCloudStorageSupported } from '@telegram-apps/sdk';

isCloudStorageSupported(); // boolean
```

:::

## Setting Items

To set a key value, use the `setItem` method.

::: code-group

```ts [Variable]
if (cloudStorage.setItem.isAvailable()) {
  await cloudStorage.setItem('a', 'a-value');
}
```

```ts [Functions]
import { setCloudStorageItem } from '@telegram-apps/sdk';

if (setCloudStorageItem.isAvailable()) {
  await setCloudStorageItem('a', 'a-value');
}
```

:::

## Getting Keys

To retrieve a list of all existing keys, use the `getKeys` method.

::: code-group

```ts [Variable]
if (cloudStorage.getKeys.isAvailable()) {
  const keys = await cloudStorage.getKeys(); // ['a', 'b', 'c']
}
```

```ts [Functions]
import { getCloudStorageKeys } from '@telegram-apps/sdk';

if (getCloudStorageKeys.isAvailable()) {
  const keys = await getCloudStorageKeys(); // ['a', 'b', 'c']
}
```

:::

To get the value of a specific key or multiple keys, use the `getItem` method.

::: code-group

```ts [Variable]
if (cloudStorage.getItem.isAvailable()) {
  const nonExistent = await cloudStorage.getItem('non-existent');
  // The result is an empty string: ''

  const existent = await cloudStorage.getItem('a');
  // The result is the value of the 'a' key. Example: 'a-value'

  const values = await cloudStorage.getItem(['a', 'b', 'non-existent']);
  // The result is a record of the keys 'a', 'b', and 'non-existent'. 
  // Example:
  // { 
  //   a: 'a-value', 
  //   b: 'b-value', 
  //   'non-existent': '', 
  // }
}
```

```ts [Functions]
import { getCloudStorageItem } from '@telegram-apps/sdk';

if (getCloudStorageItem.isAvailable()) {
  const nonExistent = await getCloudStorageItem('non-existent');
  // The result is an empty string: ''

  const existent = await getCloudStorageItem('a');
  // The result is the value of the 'a' key. Example: 'a-value'

  const values = await getCloudStorageItem(['a', 'b', 'non-existent']);
  // The result is a record of the keys 'a', 'b', and 'non-existent'. 
  // Example:
  // { 
  //   a: 'a-value', 
  //   b: 'b-value', 
  //   'non-existent': '', 
  // }
}
```

:::

## Deleting Items

To delete a key or a list of keys, use the `deleteItem` method.

::: code-group

```ts [Variable]
if (cloudStorage.deleteItem.isAvailable()) {
  await cloudStorage.deleteItem('a');
  await cloudStorage.deleteItem(['a', 'b', 'c']);
}
```

```ts [Functions]
import { deleteCloudStorageItem } from '@telegram-apps/sdk';

if (deleteCloudStorageItem.isAvailable()) {
  await deleteCloudStorageItem('a');
  await deleteCloudStorageItem(['a', 'b', 'c']);
}
```

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x/components/haptic-feedback.md

```markdown
# Haptic Feedback

The ðŸ’ [component](../scopes.md) responsible for the Telegram Mini
Apps [haptic feedback](../../../../platform/haptic-feedback.md).

## Checking Support

To check if the haptic feedback is supported by the current Telegram Mini Apps version, the
`isSupported` method is used:

::: code-group

```ts [Variable]
import { hapticFeedback } from '@telegram-apps/sdk';

hapticFeedback.isSupported(); // boolean
```

```ts [Functions]
import { isHapticFeedbackSupported } from '@telegram-apps/sdk';

isHapticFeedbackSupported(); // boolean
```

:::

## Impact Occurred

`impactOccurred` is the method that signals an impact event. The Telegram app may play the
appropriate haptic feedback based on the style value passed.

::: code-group 

```ts [Variable]
if (hapticFeedback.impactOccurred.isAvailable()) {
  hapticFeedback.impactOccurred('medium');
}
```

```ts [Functions]
import { hapticFeedbackImpactOccurred } from '@telegram-apps/sdk';

if (hapticFeedbackImpactOccurred.isAvailable()) {
  hapticFeedbackImpactOccurred('medium');
}
```

:::

The available styles for the impact haptic event are:

- `light`: indicates a collision between small or lightweight UI objects.
- `medium`: indicates a collision between medium-sized or medium-weight UI objects.
- `heavy`: indicates a collision between large or heavyweight UI objects.
- `rigid`: indicates a collision between hard or inflexible UI objects.
- `soft`: indicates a collision between soft or flexible UI objects.

## Notification Occurred

`notificationOccurred` is the method that signals a task or action has succeeded, failed, or
triggered a warning. The Telegram app may play the appropriate haptic feedback based on the type
value passed.

::: code-group

```ts [Variable]
if (hapticFeedback.notificationOccurred.isAvailable()) {
  hapticFeedback.notificationOccurred('success');
}
```

```ts [Functions]
import { hapticFeedbackNotificationOccurred } from '@telegram-apps/sdk';

if (hapticFeedbackNotificationOccurred.isAvailable()) {
  hapticFeedbackNotificationOccurred('success');
}
```

:::

The types of notification events are:

- `error`: indicates that a task or action has failed.
- `success`: indicates that a task or action has been completed successfully.
- `warning`: indicates that a task or action has triggered a warning.

## Selection Changed

`selectionChanged` is the method that signals a user has changed a selection. The Telegram app may
play the appropriate haptic feedback.

Use this feedback only when the selection changes, not when a selection is made or confirmed.

::: code-group

```ts [Variable]
if (hapticFeedback.selectionChanged.isAvailable()) {
  hapticFeedback.selectionChanged();
}
```

```ts [Functions]
import { hapticFeedbackSelectionChanged } from '@telegram-apps/sdk';

if (hapticFeedbackSelectionChanged.isAvailable()) {
  hapticFeedbackSelectionChanged();
}
```

```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x/components/init-data.md

```markdown
---
outline: [ 2, 3 ]
---

# Init Data

The ðŸ’ [component](../scopes.md) responsible for the Telegram Mini
Apps [init data](../../../../platform/init-data.md).

## Restoring

To restore the component state, use the `restore` method.

::: code-group

```ts [Variable]
import { initData } from '@telegram-apps/sdk';

initData.restore();
```

```ts [Functions]
import { restoreInitData } from '@telegram-apps/sdk';

restoreInitData();
```

:::

## Parsing

To parse the value as init data, use the `parseInitData` function.

```ts
import { parseInitData } from '@telegram-apps/sdk';

const initData = parseInitData('auth_date=123&query_id=anQQ231vs&...');
// {
//   user: {
//     id: 99281932,
//     firstName: 'Andrew',
//     lastName: 'Rogue',
//     username: 'rogue',
//     languageCode: 'en',
//     isPremium: true,
//     allowsWriteToPm: true,
//   },
//   hash: 'abcedef123',
//   authDate: Date(1716922846000),
//   startParam: 'debug',
//   chatType: 'sender',
//   chatInstance: '8428209589180549439',
// };
```

The function returns the [init data](../../../../platform/init-data.md#parameters-list) object
with deeply camel-cased properties.

## Signals

This section provides a complete list of signals related to the init data.

### `authDate`

Return type: `Date | undefined`

The date the initialization data was created.

::: code-group

```ts [Variable]
initData.authDate(); // Date(1727368894000)
```

```ts [Functions]
import { initDataAuthDate } from '@telegram-apps/sdk';

initDataAuthDate(); // Date(1727368894000)
```

:::

### `canSendAfter`

Return type: `number | undefined`

The number of seconds after which a message can be sent via the
method [answerWebAppQuery](https://core.telegram.org/bots/api#answerwebappquery).

::: code-group

```ts [Variable]
initData.canSendAfter(); // 3600
```

```ts [Functions]
import { initDataCanSendAfter } from '@telegram-apps/sdk';

initDataAuthDate(); // 3600
```

:::

### `canSendAfterDate`

Return type: `Date | undefined`

[canSendAfter](#cansendafter) but as a Date.

::: code-group

```ts [Variable]
initData.canSendAfterDate(); // Date(1727368897600)
```

```ts [Functions]
import { initDataCanSendAfterDate } from '@telegram-apps/sdk';

initDataCanSendAfterDate(); // Date(1727368897600)
```

:::

### `chat`

Return type: `undefined` or [`Chat`](../../../../platform/init-data.md#chat) with camel-cased
properties.

An object containing data about the chat where the bot was launched via the attachment menu.

> [!NOTE]
> Returned for supergroups, channels and group chats â€“ only for Mini Apps launched via the
> attachment menu.

::: code-group

```ts [Variable]
initData.chat();
// {
//   id: 7728725378876215,
//   type: 'group',
//   title: '@BotFather',
//   photoUrl: 'https://example.com/image.png',
//   username: 'botfather'
// }
```

```ts [Functions]
import { initDataChat } from '@telegram-apps/sdk';

initDataChat();
// {
//   id: 7728725378876215,
//   type: 'group',
//   title: '@BotFather',
//   photoUrl: 'https://example.com/image.png',
//   username: 'botfather'
// }
```

:::

### `chatType`

Return type: `string | undefined`

The type of chat from which the Mini Apps was opened. Values:

- `sender`
- `private`
- `group`
- `supergroup`
- `channel`

> [!NOTE]
> Returned only for applications opened by direct link.

::: code-group

```ts [Variable]
initData.chatType(); // 'group'
```

```ts [Functions]
import { initDataChatType } from '@telegram-apps/sdk';

initDataChatType(); // 'group'
```

:::

### `chatInstance`

Return type: `string | undefined`

A global identifier indicating the chat from which the Mini Apps was opened.

> [!WARNING]
> Returned only for applications opened by direct link.

::: code-group

```ts [Variable]
initData.chatInstance(); // 'group'
```

```ts [Functions]
import { initDataChatInstance } from '@telegram-apps/sdk';

initDataChatInstance(); // '899667289674387257'
```

:::

### `hash`

Return type: `string | undefined`

Initialization data signature.

::: code-group

```ts [Variable]
initData.hash(); // 'group'
```

```ts [Functions]
import { initDataHash } from '@telegram-apps/sdk';

initDataHash(); // 'sgbbc62g3bvdhg3djsaasd'
```

:::

### `queryId`

Return type: `string | undefined`

The unique session ID of the Mini App. Used in the process of
sending a message via the
method [answerWebAppQuery](https://core.telegram.org/bots/api#answerwebappquery).

::: code-group

```ts [Variable]
initData.queryId(); // 'group'
```

```ts [Functions]
import { initDataQueryId } from '@telegram-apps/sdk';

initDataQueryId(); // 'ssVXZ231ger'
```

:::

### `raw`

Return type: `string | undefined`

A raw string representation of the initialization data.

::: code-group

```ts [Variable]
initData.raw(); // 'user=...&chat=...&...'
```

```ts [Functions]
import { initDataRaw } from '@telegram-apps/sdk';

initDataRaw(); // 'user=...&chat=...&...'
```

:::

### `receiver`

Return type: `undefined` or [`User`](../../../../platform/init-data.md#user) with camel-cased
properties.

An object containing data about the chat partner of the current user in
the chat where the bot was launched via the attachment menu.

> [!NOTE]
> Returned only for private chats and only for Mini Apps launched via the attachment menu.

::: code-group

```ts [Variable]
initData.user();
// {
//   addedToAttachmentMenu: false,
//   allowsWriteToPm: true,
//   isPremium: true,
//   firstName: 'Pavel',
//   id: 78262681,
//   isBot: false,
//   lastName: 'Durov',
//   languageCode: 'ru',
//   photoUrl: 'https://example.com/image.png',
//   username: 'durove',
// }
```

```ts [Functions]
import { initDataUser } from '@telegram-apps/sdk';

initDataUser();
// {
//   addedToAttachmentMenu: false,
//   allowsWriteToPm: true,
//   isPremium: true,
//   firstName: 'Pavel',
//   id: 78262681,
//   isBot: false,
//   lastName: 'Durov',
//   languageCode: 'ru',
//   photoUrl: 'https://example.com/image.png',
//   username: 'durove',
// }
```

:::

### `state`

Return type: `undefined` or [`InitData`](../../../../platform/init-data.md#parameters-list) with
deeply camel-cased properties.

An object containing the initialization data in object format.

::: code-group

```ts [Variable]
initData.state();
```

```ts [Functions]
import { initDataState } from '@telegram-apps/sdk';

initDataState();
```

:::

### `startParam`

Return type: `string | undefined`

The value of the `startattach` or `startapp` query parameter specified in the link.

::: code-group

```ts [Variable]
initData.startParam(); // 'my-value'
```

```ts [Functions]
import { initDataStartParam } from '@telegram-apps/sdk';

initDataStartParam(); // 'my-value'
```

:::

### `user`

Return type: `undefined` or [`User`](../../../../platform/init-data.md#user) with camel-cased
properties.

An object containing information about the current user.

::: code-group

```ts [Variable]
initData.user();
// {
//   addedToAttachmentMenu: false,
//   allowsWriteToPm: true,
//   isPremium: true,
//   firstName: 'Pavel',
//   id: 78262681,
//   isBot: false,
//   lastName: 'Durov',
//   languageCode: 'ru',
//   photoUrl: 'https://example.com/image.png',
//   username: 'durove',
// }
```

```ts [Functions]
import { initDataUser } from '@telegram-apps/sdk';

initDataUser();
// {
//   addedToAttachmentMenu: false,
//   allowsWriteToPm: true,
//   isPremium: true,
//   firstName: 'Pavel',
//   id: 78262681,
//   isBot: false,
//   lastName: 'Durov',
//   languageCode: 'ru',
//   photoUrl: 'https://example.com/image.png',
//   username: 'durove',
// }
```

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x/components/invoice.md

```markdown
# Invoice

The ðŸ’ [component](../scopes.md) responsible for the
Telegram [invoices](https://core.telegram.org/bots/payments#introducing-payments-2-0).

## Checking Support

To check if invoices are supported by the current Telegram Mini Apps version, the
`isSupported` method is used:

::: code-group

```ts [Variable]
import { invoice } from '@telegram-apps/sdk';

invoice.isSupported(); // boolean
```

```ts [Functions]
import { isInvoiceSupported } from '@telegram-apps/sdk';

isInvoiceSupported(); // boolean
```

:::

## Opening

To open an invoice, it is required to use the `open` method. This method allows opening invoices
using their URLs or slugs.

Opening an invoice in URL mode requires passing the second argument equal to `url`, so the method
will interpret the passed value as a URL.

Calling the method updates the `isOpened` signal property value.

::: code-group

```ts [Variable]
import { invoice } from '@telegram-apps/sdk';

if (invoice.open.isAvailable()) {
  invoice.isOpened(); // false
  const promise = invoice.open('abIIks213');
  invoice.isOpened(); // true
  const status = await promise;
  invoice.isOpened(); // false

  // Or in URL mode:
  await invoice.open('https://t.me/invoice/abIIks213', 'url');
}
```

```ts [Functions]
import { openInvoice, isInvoiceOpened } from '@telegram-apps/sdk';

if (openInvoice.isAvailable()) {
  isInvoiceOpened(); // false
  const promise = openInvoice('abIIks213');
  isInvoiceOpened(); // true
  const status = await promise;
  isInvoiceOpened(); // false

  // Or in URL mode:
  await openInvoice('https://t.me/invoice/abIIks213', 'url');
}
```

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x/components/main-button.md

```markdown
# Main Button

The ðŸ’ [component](../scopes.md) responsible for the Telegram Mini
Apps [main button](../../../../platform/main-button.md).

## Mounting

Before using this component, it is necessary to mount it to work with properly configured
properties. To do so, use the `mount` method. It will update the `isMounted` signal property.

::: code-group

```ts [Variable]
import { mainButton } from '@telegram-apps/sdk';

if (mainButton.mount.isAvailable()) {
  mainButton.mount();
  mainButton.isMounted(); // true
}
```

```ts [Functions]
import { mountMainButton, isMainButtonMounted } from '@telegram-apps/sdk';

if (mountMainButton.isAvailable()) {
  mountMainButton();
  isMainButtonMounted(); // true
}
```

:::

To unmount, use the `unmount` method:

::: code-group

```ts [Variable]
mainButton.unmount(); 
mainButton.isMounted(); // false
```

```ts [Functions]
import { unmountMainButton, isMainButtonMounted } from '@telegram-apps/sdk';

unmountMainButton();
isMainButtonMounted(); // false
```

:::

> [!WARNING]
> This component's properties depend on values from the [Theme Params](theme-params.md) component.
> Make sure to mount Theme Params before using the Main Button.

## Settings Properties

To update the button properties, use the `setParams` method. It accepts an object with optional
properties, each responsible for its own button trait.

In turn, calling this method updates such signals
as `backgroundColor`, `hasShineEffect`, `isVisible`, `isEnabled`, `isLoaderVisible`, `state`, `textColor`
and `text`.

::: code-group

```ts [Variable]
if (mainButton.setParams.isAvailable()) {
  mainButton.setParams({
    backgroundColor: '#000000',
    hasShineEffect: true,
    isEnabled: true,
    isLoaderVisible: true,
    isVisible: true,
    text: 'My text',
    textColor: '#ffffff'
  });
  mainButton.backgroundColor(); // '#000000'
  mainButton.hasShineEffect(); // true
  mainButton.isEnabled(); // true
  mainButton.isLoaderVisible(); // true
  mainButton.isVisible(); // true
  mainButton.text(); // 'My text'
  mainButton.textColor(); // '#ffffff'

  mainButton.state();
  // {
  //   backgroundColor: '#000000',
  //   hasShineEffect: true,
  //   isActive: true,
  //   isLoaderVisible: true,
  //   isVisible: true,
  //   text: 'My text',
  //   textColor: '#ffffff'
  // }
}
```

```ts [Functions]
import {
  setMainButtonParams,
  mainButtonBackgroundColor,
  mainButtonHasShineEffect,
  isMainButtonVisible,
  isMainButtonEnabled,
  isMainButtonLoaderVisible,
  mainButtonState,
  mainButtonTextColor,
  mainButtonText,
} from '@telegram-apps/sdk';

if (setMainButtonParams.isAvailable()) {
  setMainButtonParams({
    backgroundColor: '#000000',
    hasShineEffect: true,
    isEnabled: true,
    isLoaderVisible: true,
    isVisible: true,
    text: 'My text',
    textColor: '#ffffff'
  });
  mainButtonBackgroundColor(); // '#000000'
  mainButtonHasShineEffect(); // true
  isMainButtonEnabled(); // true
  isMainButtonLoaderVisible(); // true
  isMainButtonVisible(); // true
  mainButtonText(); // 'My text'
  mainButtonTextColor(); // '#ffffff'

  mainButtonState();
  // {
  //   backgroundColor: '#000000',
  //   hasShineEffect: true,
  //   isActive: true,
  //   isLoaderVisible: true,
  //   isVisible: true,
  //   text: 'My text',
  //   textColor: '#ffffff'
  // }
}
```

:::

## Tracking Click

To add a button click listener, use the `onClick` method. It returns a function to remove the bound
listener. Alternatively, you can use the `offClick` method.

::: code-group

```ts [Variable]
if (mainButton.onClick.isAvailable()) {
  function listener() {
    console.log('Clicked!');
  }

  const offClick = mainButton.onClick(listener);
  offClick();
  // or
  mainButton.onClick(listener);
  mainButton.offClick(listener);
}
```

```ts [Functions]
import {
  onMainButtonClick,
  offMainButtonClick,
} from '@telegram-apps/sdk';

if (onMainButtonClick.isAvailable()) {
  function listener() {
    console.log('Clicked!');
  }

  const offClick = onMainButtonClick(listener);
  offClick();
  // or
  onMainButtonClick(listener);
  offMainButtonClick(listener);
}
```

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x/components/mini-app.md

```markdown
# Mini App

The ðŸ’ [component](../scopes.md) responsible for managing functionality within Telegram Mini Apps.

## Mounting

Before using this component, it must be mounted using the `mount` method, which updates
the `isMounted` signal property.

::: code-group

```ts [Variable]
import { miniApp } from '@telegram-apps/sdk';

if (miniApp.mount.isAvailable()) {
  miniApp.mount();
  miniApp.isMounted(); // true
}
```

```ts [Functions]
import { mountMiniApp, isMiniAppMounted } from '@telegram-apps/sdk';

if (mountMiniApp.isAvailable()) {
  mountMiniApp();
  isMiniAppMounted(); // true
}
```

:::

> [!INFO]
> The `mount` method also mounts the [Theme Params](theme-params.md) scope to extract correctly
> configured values.

To unmount the component, use the `unmount` method:

::: code-group

```ts [Variable]
miniApp.unmount();
miniApp.isMounted(); // false
```

```ts [Functions]
import { unmountMiniApp, isMiniAppMounted } from '@telegram-apps/sdk';

unmountMiniApp();
isMiniAppMounted(); // false
```

:::

## Binding CSS Variables

To expose the `miniApp` properties via CSS variables, use the `bindCssVars` method.
The `isCssVarsBound` signal property is updated after the method is called.

This method optionally accepts a function that transforms the values `bgColor` and `headerColor`
into CSS variable names. By default, values are converted to kebab case with the prefix `--tg-`.

::: code-group

```ts [Variable]
if (miniApp.bindCssVars.isAvailable()) {
  miniApp.bindCssVars();
  // Creates CSS variables like:
  // --tg-bg-color: #aabbcc
  // --tg-header-color: #aabbcc

  miniApp.bindCssVars(key => `--my-prefix-${key}`);
  // Creates CSS variables like:
  // --my-prefix-bgColor: #aabbcc
  // --my-prefix-headerColor: #aabbcc

  miniApp.isCssVarsBound(); // true
}
```

```ts [Functions]
import { bindMiniAppCssVars, isMiniAppCssVarsBound } from '@telegram-apps/sdk';

if (bindMiniAppCssVars.isAvailable()) {
  bindMiniAppCssVars();
  // Creates CSS variables like:
  // --tg-bg-color: #aabbcc
  // --tg-header-color: #aabbcc

  bindMiniAppCssVars(key => `--my-prefix-${key}`);
  // Creates CSS variables like:
  // --my-prefix-bgColor: #aabbcc
  // --my-prefix-headerColor: #aabbcc

  isMiniAppCssVarsBound(); // true
}
```

:::

## Header Color

To change the mini application header color, the method `setHeaderColor` is used. In turn,
calling this method updates the `headerColor` signal property value.

The method accepts either an RGB color value or one of the following
strings: `bg_color`, `secondary_bg_color`.

::: code-group

```ts [Variable]
if (miniApp.setHeaderColor.isAvailable()) {
  miniApp.setHeaderColor('bg_color');
  miniApp.headerColor(); // 'bg_color'
}

if (
  miniApp.setHeaderColor.isAvailable()
  && miniApp.setHeaderColor.supports('rgb')
) {
  miniApp.setHeaderColor('#aabbcc');
  miniApp.headerColor(); // '#aabbcc'
}
```

```ts [Functions]
import {
  setMiniAppHeaderColor,
  miniAppHeaderColor,
} from '@telegram-apps/sdk';

if (setMiniAppHeaderColor.isAvailable()) {
  setMiniAppHeaderColor('bg_color');
  miniAppHeaderColor(); // 'bg_color'
}

if (
  setMiniAppHeaderColor.isAvailable()
  && setMiniAppHeaderColor.supports('rgb')
) {
  setMiniAppHeaderColor('#aabbcc');
  miniAppHeaderColor(); // '#aabbcc'
}
```

:::

## Background Color

To update the mini application background color, use the `setBackgroundColor` method. Calling
this method updates the `headerColor` signal property value.

::: code-group

```ts [Variable]
if (miniApp.setBackgroundColor.isAvailable()) {
  miniApp.setBackgroundColor('#ffffff');
  miniApp.backgroundColor(); // '#ffffff'
}
```

```ts [Functions]
import {
  setMiniAppBackgroundColor,
  miniAppBackgroundColor,
} from '@telegram-apps/sdk';

if (setMiniAppBackgroundColor.isAvailable()) {
  setMiniAppBackgroundColor('#ffffff');
  miniAppBackgroundColor(); // '#ffffff'
}
```

:::

## Active State

The mini application becomes inactive if it is wrapped into the bottom native Telegram client tray
or if the currently active tab of the mini apps browser is changed to another one.

To track if the mini application is currently active, use the `isActive` signal.

::: code-group

```ts [Variable]
miniApp.isActive();
```

```ts [Functions]
import { isMiniAppActive } from '@telegram-apps/sdk';

isMiniAppActive()
```

:::

## Methods

### `close`

To close the mini application, use the `close` method.

::: code-group

```ts [Variable]
if (miniApp.close.isAvailable()) {
  miniApp.close();
}
```

```ts [Functions]
import { closeMiniApp } from '@telegram-apps/sdk';

if (miniApp.close.isAvailable()) {
  miniApp.close();
}
```

:::

### `ready`

To signal that the Mini App is ready to be displayed, use the `ready` method. Once called, the
loading placeholder is hidden, and the Mini App is shown.

::: code-group

```ts [Variable]
if (miniApp.ready.isAvailable()) {
  miniApp.ready();
}
```

```ts [Functions]
import { miniAppReady } from '@telegram-apps/sdk';

if (miniAppReady.isAvailable()) {
  miniAppReady();
}
```

:::

> [!TIP]
> Call this function as early as possible after loading essential interface elements to ensure a
> smooth user experience.
```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x/components/popup.md

```markdown
# Popup

The ðŸ’ [component](../scopes.md) responsible for the Telegram Mini Apps [popup](../../../../platform/popup.md).

## Checking Support

To check if the popup is supported by the current Telegram Mini Apps version, the
`isSupported` method is used:

::: code-group

```ts [Variable]
import { popup } from '@telegram-apps/sdk';

popup.isSupported(); // boolean
```

```ts [Functions]
import { isPopupSupported } from '@telegram-apps/sdk';

isPopupSupported(); // boolean
```

:::

## Opening

To open a popup, it is required to call the `open` method specifying popup properties: title,
message, and a list of up to 3 buttons.

The method returns a promise, which will be fulfilled with the clicked button identifier. In the
case where the user didn't click any button, the method will return `null`.

Calling the method updates the `isOpened` signal property value.

::: code-group

```ts [Variable]
import { popup } from '@telegram-apps/sdk';

if (popup.open.isAvailable()) {
  // popup.isOpened() -> false
  const promise = popup.open({
    title: 'Hello!',
    message: 'Here is a test message.',
    buttons: [{ id: 'my-id', type: 'default', text: 'Default text' }],
  });
  // popup.isOpened() -> true
  const buttonId = await promise;
  // popup.isOpened() -> false
}
```


```ts [Functions]
import { openPopup, isPopupOpened } from '@telegram-apps/sdk';

if (openPopup.isAvailable()) {
  // isPopupOpened() -> false
  const promise = openPopup({
    title: 'Hello!',
    message: 'Here is a test message.',
    buttons: [{ id: 'my-id', type: 'default', text: 'Default text' }],
  });
  // isPopupOpened() -> true
  const buttonId = await promise;
  // isPopupOpened() -> false
}
```

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x/components/qr-scanner.md

```markdown
# QR Scanner

The ðŸ’ [component](../scopes.md) which provides the QR scanner functionality.

## Opening and Closing

To open the QR scanner, a developer should use the `open` method. It accepts the optional `text`
property responsible for displaying the scanner title properties, depending on the open style.

In turn, calling the `open` method updates the `isOpened` signal property value.

To close the scanner, use the `close` method.

### Callback Style

Accepts the `onCaptured` option, which is a function receiving the scanned QR content. This method
returns a promise which will be resolved upon the scanner was closed.

::: code-group

```ts [Variable]
import { qrScanner } from '@telegram-apps/sdk';

if (qrScanner.open.isAvailable()) {
  qrScanner.isOpened(); // false
  const promise = qrScanner.open({
    text: 'Scan the QR',
    onCaptured(qr) {
      if (qr === 'qr-content-we-expect') {
        qrScanner.close();
      }
    },
  });
  qrScanner.isOpened(); // true
  await promise;
  qrScanner.isOpened(); // false
}
```

```ts [Functions]
import {
  openQrScanner,
  closeQrScanner,
  isQrScannerOpened,
} from '@telegram-apps/sdk';

if (openQrScanner.isAvailable()) {
  isQrScannerOpened(); // false
  const promise = openQrScanner({
    text: 'Scan the QR',
    onCaptured(qr) {
      if (qr === 'qr-content-we-expect') {
        closeQrScanner();
      }
    },
  });
  isQrScannerOpened(); // true
  await promise;
  isQrScannerOpened(); // true
}
```

:::

### Promise Style

Accepts the optional `capture` option receiving the scanned QR content and
returning `true` if it should be captured and promise resolved. If omitted, the first captured
QR content will be resolved. The promise may be resolved to `undefined`, if the scanner was closed
due to some reason.

::: code-group

```ts [Variable]
import { qrScanner } from '@telegram-apps/sdk';

if (qrScanner.open.isAvailable()) {
  // Getting the first captured QR.
  qrScanner.isOpened(); // false
  let promise = qrScanner.open({ text: 'Scan any QR' });
  qrScanner.isOpened(); // true
  await promise;
  qrScanner.isOpened(); // false

  // Getting some specific QR.
  qrScanner.isOpened(); // false
  promise = qrScanner.open({
    text: 'Scan some specific QR',
    capture(qr) {
      return qr === 'some-specific-qr';
    },
  });
  qrScanner.isOpened(); // true
  await promise;
  qrScanner.isOpened(); // false
}
```

```ts [Functions]
import {
  openQrScanner,
  closeQrScanner,
  isQrScannerOpened,
} from '@telegram-apps/sdk';

if (openQrScanner.isAvailable()) {
  // Getting the first captured QR.
  // isQrScannerOpened() -> false
  let promise = openQrScanner({ text: 'Scan any QR' });
  // isQrScannerOpened() -> true
  await promise;
  // isQrScannerOpened() -> false

  // Getting some specific QR.
  // isQrScannerOpened() -> false
  promise = openQrScanner({
    text: 'Scan some specific QR',
    capture(qr) {
      return qr === 'some-specific-qr';
    },
  });
  // isQrScannerOpened() -> true
  await promise;
  // isQrScannerOpened() -> false
}
```

:::
```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x/components/secondary-button.md

```markdown
# Secondary Button

The ðŸ’ [component](../scopes.md) responsible for the Telegram Mini Apps Secondary Button.

## Checking Support

To check if the Secondary Button is supported by the current Telegram Mini Apps version, use the
`isSupported` method:

::: code-group

```ts [Variable]
import { secondaryButton } from '@telegram-apps/sdk';

secondaryButton.isSupported(); // boolean
```

```ts [Functions]
import { isSecondaryButtonSupported } from '@telegram-apps/sdk';

isSecondaryButtonSupported(); // boolean
```

:::

## Mounting

Before using this component, it is necessary to mount it to work with properly configured
properties. To do so, use the `mount` method. It will update the `isMounted` signal property.

::: code-group

```ts [Variable]
import { secondaryButton } from '@telegram-apps/sdk';

if (secondaryButton.mount.isAvailable()) {
  secondaryButton.mount();
  secondaryButton.isMounted(); // true
}
```

```ts [Functions]
import {
  mountSecondaryButton,
  isSecondaryButtonMounted,
} from '@telegram-apps/sdk';

if (mountSecondaryButton.isAvailable()) {
  mountSecondaryButton();
  isSecondaryButtonMounted(); // true
}
```

:::

To unmount, use the `unmount` method:

::: code-group

```ts [Variable]
secondaryButton.unmount();
secondaryButton.isMounted(); // false
```

```ts [Functions]
import {
  unmountSecondaryButton,
  isSecondaryButtonMounted,
} from '@telegram-apps/sdk';

unmountSecondaryButton();
isSecondaryButtonMounted(); // false
```

:::

> [!WARNING]
> This component's properties depend on values from the [Mini App](mini-app.md)
> and [Theme Params](theme-params.md) components. Specifically, the Secondary Button uses the Mini
> App's `bottomBarBgColor` and some of the Theme Params colors. Make sure to mount these components
> before using the Secondary Button.

## Settings Properties

To update the button properties, use the `setParams` method. It accepts an object with optional
properties, each responsible for its own button trait.

In turn, calling this method updates such signals
as `backgroundColor`, `hasShineEffect`, `isVisible`, `isEnabled`, `isLoaderVisible`, `position`,
`state`, `textColor` and `text`.

::: code-group

```ts [Variable]
if (secondaryButton.setParams.isAvailable()) {
  secondaryButton.setParams({
    backgroundColor: '#000000',
    hasShineEffect: true,
    isEnabled: true,
    isLoaderVisible: true,
    isVisible: true,
    position: 'top',
    text: 'My text',
    textColor: '#ffffff'
  });
  secondaryButton.backgroundColor(); // '#000000'
  secondaryButton.hasShineEffect(); // true
  secondaryButton.isEnabled(); // true
  secondaryButton.isLoaderVisible(); // true
  secondaryButton.isVisible(); // true
  secondaryButton.position(); // 'top'
  secondaryButton.text(); // 'My text'
  secondaryButton.textColor(); // '#ffffff'

  secondaryButton.state();
  // {
  //   backgroundColor: '#000000',
  //   hasShineEffect: true,
  //   isActive: true,
  //   isLoaderVisible: true,
  //   isVisible: true,
  //   position: 'top',
  //   text: 'My text',
  //   textColor: '#ffffff'
  // }
}
```

```ts [Functions]
import {
  setSecondaryButtonParams,
  secondaryButtonBackgroundColor,
  secondaryButtonHasShineEffect,
  isSecondaryButtonVisible,
  isSecondaryButtonEnabled,
  isSecondaryButtonLoaderVisible,
  secondaryButtonState,
  secondaryButtonTextColor,
  secondaryButtonText,
  secondaryButtonPosition,
} from '@telegram-apps/sdk';

if (setSecondaryButtonParams.isAvailable()) {
  setSecondaryButtonParams({
    backgroundColor: '#000000',
    hasShineEffect: true,
    isEnabled: true,
    isLoaderVisible: true,
    isVisible: true,
    position: 'top',
    text: 'My text',
    textColor: '#ffffff'
  });
  secondaryButtonBackgroundColor(); // '#000000'
  secondaryButtonHasShineEffect(); // true
  isSecondaryButtonEnabled(); // true
  isSecondaryButtonLoaderVisible(); // true
  isSecondaryButtonVisible(); // true
  secondaryButtonPosition(); // 'top'
  secondaryButtonText(); // 'My text'
  secondaryButtonTextColor(); // '#ffffff'

  secondaryButtonState();
  // {
  //   backgroundColor: '#000000',
  //   hasShineEffect: true,
  //   isActive: true,
  //   isLoaderVisible: true,
  //   isVisible: true,
  //   position: 'top',
  //   text: 'My text',
  //   textColor: '#ffffff'
  // }
}
```

:::

## Tracking Click

To add a button click listener, use the `onClick` method. It returns a function to remove the bound
listener. Alternatively, you can use the `offClick` method.

::: code-group

```ts [Variable]
if (secondaryButton.onClick.isAvailable()) {
  function listener() {
    console.log('Clicked!');
  }

  const offClick = secondaryButton.onClick(listener);
  offClick();
  // or
  secondaryButton.onClick(listener);
  secondaryButton.offClick(listener);
}
```

```ts [Functions]
import {
  onSecondaryButtonClick,
  offSecondaryButtonClick,
} from '@telegram-apps/sdk';

if (onSecondaryButtonClick.isAvailable()) {
  function listener() {
    console.log('Clicked!');
  }

  const offClick = onSecondaryButtonClick(listener);
  offClick();
  // or
  onSecondaryButtonClick(listener);
  offSecondaryButtonClick(listener);
}
```

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x/components/settings-button.md

```markdown
# Settings Button

The ðŸ’ [component](../scopes.md) responsible for the Telegram Mini
Apps [settings button](../../../../platform/settings-button.md).

## Checking Support

To check if the settings button supported by the current Telegram Mini Apps version, the
`isSupported` method is used:

::: code-group

```ts [Variable]
import { settingsButton } from '@telegram-apps/sdk';

settingsButton.isSupported(); // boolean
```

```ts [Functions]
import { isSettingsButtonSupported } from '@telegram-apps/sdk';

isSettingsButtonSupported(); // boolean
```

:::

## Mounting

Before using the component, it is necessary to mount it to work with properly configured properties.
To do so, use the `mount` method. It will update the `isMounted` signal property.

::: code-group

```ts [Variable]
import { settingsButton } from '@telegram-apps/sdk';

if (settingsButton.mount.isAvailable()) {
  settingsButton.mount();
  settingsButton.isMounted(); // true
}
```

```ts [Functions]
import {
  mountSettingsButton,
  isSettingsButtonMounted,
} from '@telegram-apps/sdk';

if (mountSettingsButton.isAvailable()) {
  mountSettingsButton();
  isSettingsButtonMounted(); // true
}
```

:::

To unmount, use the `unmount` method:

::: code-group

```ts [Variable]
settingsButton.unmount();
settingsButton.isMounted(); // false
```

```ts [Functions]
import { 
  unmountSettingsButton,
  isSettingsButtonMounted,
} from '@telegram-apps/sdk';

unmountSettingsButton();
isSettingsButtonMounted(); // false
```

:::

## Showing and Hiding

To change the button's visibility, use the `hide()` and `show()` methods. These methods update
the `isVisible` signal property value.

::: code-group

```ts [Variable]
if (settingsButton.show.isAvailable()) {
  settingsButton.show();
  settingsButton.isVisible(); // true
}

if (settingsButton.hide.isAvailable()) {
  settingsButton.hide();
  settingsButton.isVisible(); // false
}
```

```ts [Functions]
import {
  showSettingsButton,
  hideSettingsButton,
  isSettingsButtonVisible,
} from '@telegram-apps/sdk';

if (showSettingsButton.isAvailable()) {
  showSettingsButton();
  isSettingsButtonVisible(); // true
}

if (hideSettingsButton.isAvailable()) {
  hideSettingsButton();
  isSettingsButtonVisible(); // false
}
```

:::

## Tracking Click

To add a button click listener, use the `onClick` method. It returns a function to remove the bound
listener. Alternatively, you can use the `offClick` method.

::: code-group

```ts [Variable]
if (settingsButton.onClick.isAvailable()) {
  function listener() {
    console.log('Clicked!');
  }

  const offClick = settingsButton.onClick(listener);
  offClick();
  // or
  settingsButton.onClick(listener);
  settingsButton.offClick(listener);
}
```

```ts [Functions]
import {
  onSettingsButtonClick,
  offSettingsButtonClick,
} from '@telegram-apps/sdk';

if (onSettingsButtonClick.isAvailable()) {
  function listener() {
    console.log('Clicked!');
  }

  const offClick = onSettingsButtonClick(listener);
  offClick();
  // or
  onSettingsButtonClick(listener);
  offSettingsButtonClick(listener);
}
```

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x/components/swipe-behavior.md

```markdown
# Swipe Behavior

The ðŸ’ [component](../scopes.md) responsible for the Telegram Mini Apps swipe behavior.

## Checking Support

To check if the swipe behavior supported by the current Telegram Mini Apps version, the
`isSupported` method is used:

::: code-group

```ts [Variable]
import { swipeBehavior } from '@telegram-apps/sdk';

swipeBehavior.isSupported(); // boolean
```

```ts [Functions]
import { isSwipeBehaviorSupported } from '@telegram-apps/sdk';

isSwipeBehaviorSupported(); // boolean
```

:::

## Mounting

Before using the component, it is necessary to mount it to work with properly configured properties.
To do so, use the `mount` method. It will update the `isMounted` signal property.

::: code-group

```ts [Variable]
import { swipeBehavior } from '@telegram-apps/sdk';

if (swipeBehavior.mount.isAvailable()) {
  swipeBehavior.mount();
  swipeBehavior.isMounted(); // true
}
```

```ts [Functions]
import {
  mountSwipeBehavior,
  isSwipeBehaviorMounted,
} from '@telegram-apps/sdk';

if (mountSwipeBehavior.isAvailable()) {
  mountSwipeBehavior();
  isSwipeBehaviorMounted(); // true
}
```

:::

To unmount, use the `unmount` method:

::: code-group

```ts [Variable]
swipeBehavior.unmount(); 
swipeBehavior.isMounted(); // false
```

```ts [Functions]
import {
  unmountClosingBehavior,
  isSwipeBehaviorMounted,
} from '@telegram-apps/sdk';

unmountSwipeBehavior(); 
isSwipeBehaviorMounted(); // false
```

:::

## Controlling Vertical Swipes

To enable or disable vertical swipes, use the `enableVertical` and `disableVertical` methods.
Calling these methods, update the `isVerticalEnabled` signal property value.

::: code-group

```ts [Variable]
if (swipeBehavior.enableVertical.isAvailable()) {
  swipeBehavior.enableVertical();
  swipeBehavior.isVerticalEnabled(); // true
}

if (swipeBehavior.disableVertical.isAvailable()) {
  swipeBehavior.disableVertical();
  swipeBehavior.isVerticalEnabled(); // false
}
```

```ts [Functions]
import {
  enableVerticalSwipes,
  disableVerticalSwipes,
  isVerticalSwipesEnabled,
} from '@telegram-apps/sdk';

if (enableVerticalSwipes.isAvailable()) {
  enableVerticalSwipes();
  isVerticalSwipesEnabled(); // true
}

if (disableVerticalSwipes.isAvailable()) {
  disableVerticalSwipes();
  isVerticalSwipesEnabled(); // false
}
```

:::
```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x/components/theme-params.md

```markdown
# Theme Params

The ðŸ’ [component](../scopes.md) responsible for the Telegram Mini
Apps [theme parameters](../../../../platform/theming.md).

## Mounting

Before using this component, it must be mounted to ensure properties are properly configured. To do
so, use the `mount` method, which updates the `isMounted` signal property.

::: code-group

```ts [Variable]
import { themeParams } from '@telegram-apps/sdk';

if (themeParams.mount.isAvailable()) {
  themeParams.mount();
  themeParams.isMounted(); // true
}
```

```ts [Functions]
import {
  mountThemeParams,
  isThemeParamsMounted,
} from '@telegram-apps/sdk';

if (mountThemeParams.isAvailable()) {
  mountThemeParams();
  isThemeParamsMounted(); // true
}
```

:::

To unmount, use the `unmount` method:

::: code-group

```ts [Variable]
themeParams.unmount(); 
themeParams.isMounted(); // false
```

```ts [Functions]
import {
  unmountThemeParams,
  isThemeParamsMounted,
} from '@telegram-apps/sdk';

unmountThemeParams();
isThemeParamsMounted(); // false
```

:::

## Binding CSS Variables

This scope allows its properties to be exposed via CSS variables.

To create new CSS variables, use the `bindCssVars` method. When called, it updates
the `isCssVarsBound` signal property.

This method optionally accepts a function that receives a theme palette key in camel case format and
returns a CSS variable name. By default, the method transforms the palette key using these rules:

- Converts the value to kebab case.
- Prepends the `--tg-theme-` prefix.

::: code-group

```ts [Variable]
if (themeParams.bindCssVars.isAvailable()) {
  themeParams.bindCssVars();
  // Creates CSS variables like:
  // --tg-theme-button-color: #aabbcc
  // --tg-theme-accent-text-color: #aabbcc
  // --tg-theme-bg-color: #aabbcc
  // ...

  themeParams.bindCssVars(key => `--my-prefix-${key}`);
  // Creates CSS variables like:
  // --my-prefix-buttonColor: #aabbcc
  // --my-prefix-accentTextColor: #aabbcc
  // --my-prefix-bgColor: #aabbcc
  // ...

  // themeParams.isCssVarsBound() -> true
}
```

```ts [Functions]
import {
  bindThemeParamsCssVars,
  isThemeParamsCssVarsBound,
} from '@telegram-apps/sdk';

if (bindThemeParamsCssVars.isAvailable()) {
  bindThemeParamsCssVars();
  // Creates CSS variables like:
  // --tg-theme-button-color: #aabbcc
  // --tg-theme-accent-text-color: #aabbcc
  // --tg-theme-bg-color: #aabbcc
  // ...

  bindThemeParamsCssVars(key => `--my-prefix-${key}`);
  // Creates CSS variables like:
  // --my-prefix-buttonColor: #aabbcc
  // --my-prefix-accentTextColor: #aabbcc
  // --my-prefix-bgColor: #aabbcc
  // ...
  
  // isThemeParamsCssVarsBound() -> true
}
```

:::

## Properties

::: code-group

```ts [Variable]
themeParams.accentTextColor(); // RGB | undefined
themeParams.backgroundColor(); // RGB | undefined
themeParams.buttonTextColor(); // RGB | undefined
themeParams.buttonColor(); // RGB | undefined
themeParams.destructiveTextColor(); // RGB | undefined
themeParams.headerBackgroundColor(); // RGB | undefined
themeParams.hintColor(); // RGB | undefined
themeParams.linkColor(); // RGB | undefined
themeParams.subtitleTextColor(); // RGB | undefined
themeParams.sectionBackgroundColor(); // RGB | undefined
themeParams.secondaryBackgroundColor(); // RGB | undefined
themeParams.sectionSeparatorColor(); // RGB | undefined
themeParams.sectionHeaderTextColor(); // RGB | undefined
themeParams.textColor(); // RGB | undefined

themeParams.state(); // Record<string, RGB>;
```

```ts [Functions]
import {
  themeParamsAccentTextColor,
  themeParamsBackgroundColor,
  themeParamsButtonTextColor,
  themeParamsButtonColor,
  themeParamsDestructiveTextColor,
  themeParamsHeaderBackgroundColor,
  themeParamsHintColor,
  themeParamsLinkColor,
  themeParamsSubtitleTextColor,
  themeParamsSectionBackgroundColor,
  themeParamsSecondaryBackgroundColor,
  themeParamsSectionSeparatorColor,
  themeParamsSectionHeaderTextColor,
  themeParamsTextColor,
  themeParamsState,
} from '@telegram-apps/sdk';

themeParamsAccentTextColor(); // RGB | undefined
themeParamsBackgroundColor(); // RGB | undefined
themeParamsButtonTextColor(); // RGB | undefined
themeParamsButtonColor(); // RGB | undefined
themeParamsDestructiveTextColor(); // RGB | undefined
themeParamsHeaderBackgroundColor(); // RGB | undefined
themeParamsHintColor(); // RGB | undefined
themeParamsLinkColor(); // RGB | undefined
themeParamsSubtitleTextColor(); // RGB | undefined
themeParamsSectionBackgroundColor(); // RGB | undefined
themeParamsSecondaryBackgroundColor(); // RGB | undefined
themeParamsSectionSeparatorColor(); // RGB | undefined
themeParamsSectionHeaderTextColor(); // RGB | undefined
themeParamsTextColor(); // RGB | undefined

themeParamsState(); // Record<string, RGB>;
```

:::
```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x/components/viewport.md

```markdown
# Viewport

The ðŸ’ [component](../scopes.md) responsible for the Telegram Mini
Apps [viewport](../../../../platform/viewport.md).

## Mounting

Before using the component, it is necessary to mount it to work with properly configured properties.
To do so, use the `mount` method. It will update the `isMounted` signal property.

::: code-group

```ts [Variable]
import { viewport } from '@telegram-apps/sdk';

if (viewport.mount.isAvailable()) {
  viewport.mount();
  viewport.isMounted(); // true
}
```

```ts [Functions]
import {
  mountViewport,
  isViewportMounted,
} from '@telegram-apps/sdk';

if (mountViewport.isAvailable()) {
  mountViewport();
  isViewportMounted(); // true
}
```

:::

To unmount, use the `unmount` method:

::: code-group

```ts [Variable]
viewport.unmount();
viewport.isMounted(); // false
```

```ts [Functions]
import {
  unmountViewport,
  isViewportMounted,
} from '@telegram-apps/sdk';

unmountViewport();
isViewportMounted(); // false
```

:::

## Binding CSS Variables

To expose the `viewport` properties via CSS variables, use the `bindCssVars` method.
The `isCssVarsBound` signal property is updated after the method is called.

This method optionally accepts a function that transforms the values `width`, `height`
and `stableHeight` into CSS variable names. By default, values are converted to kebab case with the
prefix `--tg-viewport-`.

::: code-group

```ts [Variable]
import { viewport } from '@telegram-apps/sdk';

if (viewport.bindCssVars.isAvailable()) {
  viewport.bindCssVars();
  // Creates CSS variables like:
  // --tg-viewport-height: 675px
  // --tg-viewport-width: 320px
  // --tg-viewport-stable-height: 675px

  viewport.bindCssVars(key => `--my-prefix-${key}`);
  // Creates CSS variables like:
  // --my-prefix-height: 675px
  // --my-prefix-width: 320px
  // --my-prefix-stableHeight: 675px

  viewport.isCssVarsBound(); // true
}
```

```ts [Functions]
import {
  bindViewportCssVars,
  isViewportCssVarsBound,
} from '@telegram-apps/sdk';

if (bindViewportCssVars.isAvailable()) {
  bindViewportCssVars();
  // Creates CSS variables like:
  // --tg-viewport-height: 675px
  // --tg-viewport-width: 320px
  // --tg-viewport-stable-height: 675px

  bindViewportCssVars(key => `--my-prefix-${key}`);
  // Creates CSS variables like:
  // --my-prefix-height: 675px
  // --my-prefix-width: 320px
  // --my-prefix-stableHeight: 675px

  isViewportCssVarsBound(); // true
}
```

:::

## Expanding

To expand the viewport, use the `expand` method.

::: code-group

```ts [Variable]
if (viewport.expand.isAvailable()) {
  viewport.expand();
}
```

```ts [Functions]
import { expandViewport } from '@telegram-apps/sdk';

if (expandViewport.isAvailable()) {
  expandViewport();
}
```

:::

## Fullscreen Mode

To enable the fullscreen mode, the method `requestFullscreen` is used:

::: code-group

```ts [Variable]
if (viewport.requestFullscreen.isAvailable()) {
  await viewport.requestFullscreen();
  viewport.isFullscreen(); // true
}
```

```ts [Functions]
import { requestFullscreen, isFullscreen } from '@telegram-apps/sdk';

if (requestFullscreen.isAvailable()) {
  await requestFullscreen();
  isFullscreen(); // true
}
```

:::

To exit the fullscreen mode, use the `exitFullscreen` method:

::: code-group

```ts [Variable]
if (viewport.exitFullscreen.isAvailable()) {
  await viewport.exitFullscreen();
  viewport.isFullscreen(); // false
}
```

```ts [Functions]
import { exitFullscreen, isFullscreen } from '@telegram-apps/sdk';

if (exitFullscreen.isAvailable()) {
  await exitFullscreen();
  isFullscreen(); // false
}
```

:::

## Safe Area Insets

The viewport component offers access to two types of insets:

- **Safe area insets**
- **Content safe area insets**

For more details on the differences between these inset types, visit the
[**Viewport**](../../../../platform/viewport.md) page.

The component provides access to these insets through the following signals:

::: code-group

```ts [Variable]
// Objects with numeric properties "top", "bottom", "left" and "right".
viewport.safeAreaInsets();
viewport.contentSafeAreaInsets();

// Numeric values.
viewport.safeAreaInsetTop();
viewport.safeAreaInsetBottom();
viewport.safeAreaInsetLeft();
viewport.safeAreaInsetRight();
viewport.contentSafeAreaInsetTop();
viewport.contentSafeAreaInsetBottom();
viewport.contentSafeAreaInsetLeft();
viewport.contentSafeAreaInsetRight();
```

```ts [Functions]
import {
  viewportSafeAreaInsets,
  viewportSafeAreaInsetTop,
  viewportSafeAreaInsetBottom,
  viewportSafeAreaInsetLeft,
  viewportSafeAreaInsetRight,
  viewportContentSafeAreaInsets,
  viewportContentSafeAreaInsetTop,
  viewportContentSafeAreaInsetBottom,
  viewportContentSafeAreaInsetLeft,
  viewportContentSafeAreaInsetRight,
} from '@telegram-apps/sdk';

// Objects with numeric properties "top", "bottom", "left" and "right".
viewportSafeAreaInsets();
viewportContentSafeAreaInsets();

// Numeric values.
viewportSafeAreaInsetTop();
viewportSafeAreaInsetBottom();
viewportSafeAreaInsetLeft();
viewportSafeAreaInsetRight();
viewportContentSafeAreaInsetTop();
viewportContentSafeAreaInsetBottom();
viewportContentSafeAreaInsetLeft();
viewportContentSafeAreaInsetRight();
```

:::
```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x/utils/emoji-status.md

```markdown
# Emoji Status

## `requestEmojiStatusAccess`

To request access to user emoji status update, use the `requestEmojiStatusAccess` function:

::: code-group

```ts [Using isAvailable]
import { requestEmojiStatusAccess } from '@telegram-apps/sdk';

if (requestEmojiStatusAccess.isAvailable()) {
  const status = await requestEmojiStatusAccess();
}
```

```ts [Using ifAvailable]
import { requestEmojiStatusAccess } from '@telegram-apps/sdk';

const status = await requestEmojiStatusAccess.ifAvailable();
```

:::

## `setEmojiStatus`

To set an emoji status on user's behalf, use the `setEmojiStatus` function.

As the first argument, it accepts a custom emoji id. Optionally, you can pass the second
argument determining for how many seconds the status must be set.

::: code-group

```ts [Using isAvailable]
import { setEmojiStatus } from '@telegram-apps/sdk';

if (setEmojiStatus.isAvailable()) {
  // Set for unlimited period of time.
  await setEmojiStatus('5361800828313167608');

  // Set for 1 day.
  await setEmojiStatus('5361800828313167608', 86400);
}
```

```ts [Using ifAvailable]
import { setEmojiStatus } from '@telegram-apps/sdk';

// Set for unlimited period of time.
await setEmojiStatus.ifAvailable('5361800828313167608');

// Set for 1 day.
await setEmojiStatus.ifAvailable('5361800828313167608', 86400);
```

:::
```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x/utils/home-screen.md

```markdown
# Home Screen

## `addToHomeScreen`

To prompt the user to add the Mini App to the home screen, use the `addToHomeScreen` function.

::: code-group

```ts [Using isAvailable]
import { addToHomeScreen } from '@telegram-apps/sdk';

if (addToHomeScreen.isAvailable()) {
  addToHomeScreen();
}
```

```ts [Using ifAvailable]
import { addToHomeScreen } from '@telegram-apps/sdk';

addToHomeScreen.ifAvailable();
```

:::

To track whether the current Mini App is added to the device's home screen, use
the `onAddedToHomeScreen` and `offAddedToHomeScreen` functions:

```ts
import {
  onAddedToHomeScreen,
  onAddToHomeScreenFailed,
  offAddedToHomeScreen,
  offAddToHomeScreenFailed,
} from '@telegram-apps/sdk';

function onAdded() {
  console.log('Added');
}

onAddedToHomeScreen(onAdded);
offAddedToHomeScreen(onAdded);

function onFailed() {
  console.log('User declined the request');
}

onAddToHomeScreenFailed(onFailed);
offAddToHomeScreenFailed(onFailed);
```

> [!NOTE]  
> If the device cannot determine the installation status, the corresponding event may not be
> received even if the icon has been added.

## `checkHomeScreenStatus`

The `checkHomeScreenStatus` function checks if the user has already added the Mini App to the
device's home screen.

```ts
import { checkHomeScreenStatus } from '@telegram-apps/sdk';

if (checkHomeScreenStatus.isAvailable()) {
  checkHomeScreenStatus().then(status => {
    console.log(status);
  });
}
```

```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x/utils/links.md

```markdown
# Links

## `openLink`

To open a link in an external browser or using [Instant View](https://instantview.telegram.org/),
use the `openLink` method. You can also pass an optional second argument, an object with optional
properties `tryBrowser: OpenLinkBrowser (string)` and `tryInstantView: boolean`.

::: code-group

```ts [Using isAvailable]
import { openLink } from '@telegram-apps/sdk';

if (openLink.isAvailable()) {
  openLink('https://telegram.org', {
    tryBrowser: 'chrome',
    tryInstantView: true,
  });
}
```

```ts [Using ifAvailable]
import { openLink } from '@telegram-apps/sdk';

openLink.ifAvailable('https://telegram.org', {
  tryBrowser: 'chrome',
  tryInstantView: true,
});
```

:::

## `openTelegramLink`

To open a Telegram link with predefined behavior, use the `openTelegramLink` method. This method
allows you to apply the native behavior as described in
the [Deep Links](https://core.telegram.org/api/links) documentation.

::: code-group

```ts [Using isAvailable]
import { openTelegramLink } from '@telegram-apps/sdk';

if (openTelegramLink.isAvailable()) {
  openTelegramLink('https://t.me/heyqbnk');
}
```

```ts [Using ifAvailable]
import { openTelegramLink } from '@telegram-apps/sdk';

openTelegramLink.ifAvailable('https://t.me/heyqbnk');
```

:::

## `shareURL`

To share a URL with another user, channel, or group, use the `shareURL` method.

::: code-group

```ts [Using isAvailable]
import { shareURL } from '@telegram-apps/sdk';

if (shareURL.isAvailable()) {
  shareURL('https://t.me/heyqbnk', 'Check out this cool group!');
}
```

```ts [Using ifAvailable]
import { shareURL } from '@telegram-apps/sdk';

shareURL.ifAvailable(
  'https://t.me/heyqbnk', 
  'Check out this cool group!',
);
```

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x/utils/privacy.md

```markdown
# Privacy

## `requestPhoneAccess`

To request access to a user's phone information, use the `requestPhoneAccess` method. If the user
grants access, the developer's bot will receive the phone details.

::: code-group

```ts [Using isAvailable]
import { requestPhoneAccess } from '@telegram-apps/sdk';

if (requestPhoneAccess.isAvailable()) {
  const status = await requestPhoneAccess();
  // status will be 'sent' | 'cancelled' | string
}
```

```ts [Using ifAvailable]
import { requestPhoneAccess } from '@telegram-apps/sdk';

const status = await requestPhoneAccess.ifAvailable();
// status will be 'sent' | 'cancelled' | string | undefined
```

:::

## `requestWriteAccess`

To request permission to send messages to the user, use the `requestWriteAccess` method.

::: code-group

```ts [Using isAvailable]
import { requestWriteAccess } from '@telegram-apps/sdk';

if (requestWriteAccess.isAvailable()) {
  const status = await requestWriteAccess();
  // status will be 'allowed' | string
}
```

```ts [Using ifAvailable]
import { requestWriteAccess } from '@telegram-apps/sdk';

const status = await requestWriteAccess.ifAvailable();
// status will be 'allowed' | string | undefined
```

:::


## `requestContact`

To retrieve a user's contact information, use the `requestContact` method.



::: code-group

```ts [Using isAvailable]
import { requestContact } from '@telegram-apps/sdk';

if (requestContact.isAvailable()) {
  const contact = await requestContact();
  // {
  //   contact: {
  //     userId: 1,
  //     phoneNumber: '+987654321',
  //     firstName: 'Vladislav',
  //     lastName: 'Kibenko'
  //   },
  //   authDate: Date(12345678),
  //   hash: 'abcdefgh'
  // };
}
```

```ts [Using ifAvailable]
import { requestContact } from '@telegram-apps/sdk';

const contact = await requestContact.ifAvailable();
// {
//   contact: {
//     userId: 1,
//     phoneNumber: '+987654321',
//     firstName: 'Vladislav',
//     lastName: 'Kibenko'
//   },
//   authDate: Date(12345678),
//   hash: 'abcdefgh'
// } | undefined;
```

:::





```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x/utils/uncategorized.md

```markdown
# Uncategorized

## `getCurrentTime`

To retrieve the current Telegram server time, use the `getCurrentTime` function. It returns
a JavaScript `Date` object.

::: code-group

```ts [Using isAvailable]
import { getCurrentTime } from '@telegram-apps/sdk';

if (getCurrentTime.isAvailable()) {
  const time = await getCurrentTime(); // Date
}
```

```ts [Using ifAvailable]
import { getCurrentTime } from '@telegram-apps/sdk';

const time = await getCurrentTime.ifAvailable(); // Date | undefined
```

:::

## `readTextFromClipboard`

To read text from the clipboard, use the `readTextFromClipboard` function.

::: code-group

```ts [Using isAvailable]
import { readTextFromClipboard } from '@telegram-apps/sdk';

if (readTextFromClipboard.isAvailable()) {
  const contents = await readTextFromClipboard(); // string | null
}
```

```ts [Using ifAvailable]
import { readTextFromClipboard } from '@telegram-apps/sdk';

const contents = await readTextFromClipboard.ifAvailable(); 
// string | null | undefined
```

:::

## `shareStory`

The `shareStory` method opens the native story editor.

It has one required parameter: a media URL that will be used as the background for the story.

::: code-group

```ts [Using isAvailable]
import { shareStory } from '@telegram-apps/sdk';

if (shareStory.isAvailable()) {
  shareStory('https://my.media/background.png');
}
```

```ts [Using ifAvailable]
import { shareStory } from '@telegram-apps/sdk';

shareStory.ifAvailable('https://my.media/background.png');
```

:::

The function optionally accepts an object with additional options:

- `text?: string` - a caption to add to the media, with a limit of 0-200 characters for regular
  users, and 0-2048 characters
  for [premium subscribers](https://telegram.org/faq_premium#telegram-premium).
- `widgetLink?: object` - an object for including a widget link in the story.
  Only [premium subscribers](https://telegram.org/faq_premium#telegram-premium) can post stories
  with links.
  - `url: string` - the URL to be included in the story.
  - `name?: string` - the display name for the widget link (0-48 characters).

```ts
shareStory('https://my.media/background.png', {
  text: 'Today was a good day. Love it! Thanks to this public!',
  widgetLink: {
    url: 'https://t.me/heyqbnk',
    name: 'heyqbnk public group',
  },
});
```

## `sendData`

To send data to the bot, use the `sendData` function. This function sends a service message to the
bot and closes the Mini App.

::: code-group

```ts [Using isAvailable]
import { sendData } from '@telegram-apps/sdk';

if (sendData.isAvailable()) {
  sendData('my-data-goes-here');
}
```

```ts [Using ifAvailable]
import { sendData } from '@telegram-apps/sdk';

sendData.ifAvailable('my-data-goes-here');
```

:::

> [!TIP]
> This function sends data up to 4096 bytes to the bot and is available for Mini Apps launched via a
> Keyboard button.

> [!WARNING]
> This function is only accessible for Mini Apps started through a Keyboard button. See
> the `web_app_data` field in the [Message](https://core.telegram.org/bots/api#message) class for
> more details.

## `switchInlineQuery`

To create a message prefixed with the bot username and a specific text, and share it in another
chat, use the `switchInlineQuery` method. You can use the second optional argument to specify which
chat types can be selected to send the message.

::: code-group

```ts [Using isAvailable]
import { switchInlineQuery } from '@telegram-apps/sdk';

if (switchInlineQuery.isAvailable()) {
  switchInlineQuery('Check this bot!', [
    'users',
    'bots',
    'groups',
    'channels',
  ]);
}
```

```ts [Using ifAvailable]
import { switchInlineQuery } from '@telegram-apps/sdk';

switchInlineQuery.ifAvailable('Check this bot!', [
  'users',
  'bots',
  'groups',
  'channels',
]);
```

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x/initializing.md

```markdown
# Initializing

As mentioned in
the `@telegram-apps/bridge` [documentation](../../telegram-apps-bridge/events.md#define-event-handlers),
event handlers must be defined manually to start listening to Telegram Mini Apps events.

Additionally, in our code, we want to ensure that if a method is called, it will either work or we
will be notified that it won't. To achieve this, it is necessary to know the currently used Telegram
Mini Apps version.

To address these requirements, the package provides the `init` function, which accepts an object
with the following structure:

```ts
interface Options {
  /**
   * True if the SDK should accept styles sent from the Telegram
   * application.
   * @default true
   */
  acceptCustomStyles?: boolean;
  /**
   * The maximum supported Mini Apps version.
   * @default Extracted using the `retrieveLaunchParams`
   * function.
   * @see retrieveLaunchParams
   */
  version?: Version;
  /**
   * Custom postEvent function.
   *
   * Passing the "strict" value creates a function that always
   * checks if the specified call is supported by the current Mini
   * Apps version. If the method is unsupported, an error
   * will be thrown.
   *
   * Passing the "non-strict" value creates a postEvent function
   * that doesn't throw errors but warns about missing method
   * support.
   *
   * @default 'strict'
   * @see createPostEvent
   */
  postEvent?: PostEventFn | 'strict' | 'non-strict';
}
```

In most scenarios, a developer does not need to use these options.

By calling this function, the package's global dependencies will be configured, and the Telegram
Mini Apps event handlers will be created.

```ts
import { init } from '@telegram-apps/sdk';

init();
```
```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x/scopes.md

```markdown
---
outline: [ 2, 3 ]
---

# Scopes

This package is designed to give developers full control over its lifecycle, including the
initialization process. Therefore, there are no pre-initialized global scopes available for use;
developers must configure the scopes themselves.

By *scope*, we refer to a collection of related functionality grouped into a single entity. Examples
of scopes include `backButton` and `mainButton`. This design makes the SDK more intuitive and
efficient to use.

It's important to note that scopes are provided in the following forms:

ðŸ’ **Components**. They are exported as both a variable and a set of functions simultaneously.
For instance, developers can work with the exported `backButton` variable or
its alternative function set: `showBackButton`, `mountBackButton`, etc.

âš™ï¸**Utilities**. They are exported as a set of functions. These scopes are abstract and not grouped
into a single variable. Examples include `openLink`, `shareURL`, etc.

Effectively, exported variables are simply compositions of the same exported functions.
So, `backButton.isMounted` and `isBackButtonMounted` are essentially the same entity.

Here's an example:

```ts
import {
  backButton,
  hideBackButton,
  isBackButtonVisible,
} from '@telegram-apps/sdk';

isBackButtonVisible(); // false

backButton.show();
// backButton.isVisible and isBackButtonVisible are the same 
// entity (signal). We can say the same about backButton.show 
// and showBackButton.
//
// backButton.isVisible() -> true
// isBackButtonVisible() -> true

hideBackButton();
// backButton.isVisible() -> false
// isBackButtonVisible() -> false
```

The key difference here lies in the final bundle size. Internally, the `backButton` export is
handled through the following code:

```ts
export * as backButton from 'somewhere';
```

When not using the package source code while building the application, the bundler is more likely to
make `backButton` a non-treeshakeable object. As a result, all dependencies from `somewhere` will be
bundled, slightly increasing the final bundle size (though not by much).

## Usage Prerequisites

Each SDK method related to ðŸ’ components or âš™ï¸utilities has at least two requirements:

1. **The SDK must be [initialized](./initializing.md)**. This ensures that you are using valid
   global dependencies (such as `postEvent`).

```ts
import { init } from '@telegram-apps/sdk';

init();
```

2. **The method must be run inside Telegram Mini Apps**. Calling the method outside Telegram Mini
   Apps will not produce the expected behavior.

For component-related methods, there is an additional requirement:

3. **The parent component must be mounted**. This ensures that you are using a properly configured
   component.

```ts
import { init, backButton } from '@telegram-apps/sdk';

// Initialize the SDK.
init();

// Mount the Back Button component.
backButton.mount();
```

When all requirements are met, the method call becomes safe.

### Methods Availability

To check if a method is safe to call (available), use the `isAvailable()` signal:

```ts
import { backButton } from '@telegram-apps/sdk';

if (backButton.show.isAvailable()) {
  backButton.show();
}
```

This signal performs all checks described in the [Usage Prerequisites](#usage-prerequisites) section
and returns `true` if the current state satisfies them.

As an alternative, you may find the `ifAvailable(...args)` method useful. It calls the original
function with the provided arguments only if it is available (`isAvailable()` returns `true`):

```ts
import { backButton } from '@telegram-apps/sdk';

backButton.show.ifAvailable();
```

In case the original method (`backButton.show` in this case) is unavailable, the `ifAvailable`
method call will return `undefined`.

## Optimizing Bundle

> [!TIP]
> The SDK works efficiently out of the box, so there is generally no need to follow the
> optimizations described in this section. However, these guidelines can be helpful if you want to
> maximize the package's efficiency in specific scenarios.

Letâ€™s look at how we can use the package more efficiently:

- Using functions exclusively allows the bundler to tree-shake unused scope code.

```ts
import { showBackButton, backButton } from '@telegram-apps/sdk';

showBackButton();
// Only showBackButton's source code will be bundled.

backButton.show();
// All backButton dependencies will be bundled, even 
// if not used in the code: backButton.show(), 
// backButton.hide(), backButton.isVisible(), etc.
```

- Configure the bundler to use the source code instead of the built version.

```ts
import { backButton } from '@telegram-apps/sdk';

backButton.show();
// Only backButton.show's source code will be bundled 
// because the bundler is smart enough to understand 
// that backButton.show is just the showBackButton 
// function, so only its source code is bundled.
```

Here's an example of a Vite config using the `resolve` option:

```ts
import { defineConfig } from 'vite';
import { resolve } from 'node:path';

export default defineConfig({
  resolve: {
    alias: {
      '@telegram-apps/sdk': resolve('node_modules/@telegram-apps/sdk/src'),
    },
  },
});
```

```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x/usage-tips.md

```markdown
# Usage Tips

## Avoid Using With Telegram SDK

Telegram provides a file `telegram-web-app.js`. When using `@telegram-apps/sdk`, you must avoid
using it alongside the SDK provided by Telegram. This is because both packages use the same
communication channel for transmitting events and calling methods.

> [!DANGER] What if I use both packages?
> In this case, some of these packages will not receive events sent from the native Telegram
> application, which will surely lead to bugs.

## Installing the SDK

Before installing the package, it is important to understand what specifically must be installed.
This depends on the technologies you are planning to use.

If your core library is one of the following, you should install a package specific to your main
library instead of `@telegram-apps/sdk`:

- React: [@telegram-apps/sdk-react](../../telegram-apps-sdk-react/2-x.md)
- Vue: [@telegram-apps/sdk-vue](../../telegram-apps-sdk-vue.md)
- Svelte: [@telegram-apps/sdk-svelte](../../telegram-apps-sdk-svelte.md)

For example, if your main library is React, you should install `@telegram-apps/sdk-react` instead
of `@telegram-apps/sdk`.

Here is the command to install the package:

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/sdk-react
```

```bash [npm]
npm i @telegram-apps/sdk-react
```

```bash [yarn]
yarn add @telegram-apps/sdk-react
```

:::

If your main library is not on the list specified above or if you prefer a pure TypeScript solution,
install the `@telegram-apps/sdk` package:

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/sdk
```

```bash [npm]
npm i @telegram-apps/sdk
```

```bash [yarn]
yarn add @telegram-apps/sdk
```

:::

> [!DANGER] Avoid installing both packages
> Installing both `@telegram-apps/sdk` and `@telegram-apps/sdk-react` (for example) may lead to bugs
> due to SDK package duplication, resulting in incorrect application behavior.

> [!TIP] Start with @telegram-apps/create-mini-app
> To avoid potential issues with bootstrapping your project, consider using the
> [@telegram-apps/create-mini-app](../../telegram-apps-create-mini-app.md) package. This will
> quickly generate a properly configured application for you.

## Initialize the SDK

The SDK provides a list of components that might seem ready to use once imported, but this is only
partially true.

Itâ€™s important to understand that the SDK does not have any side effects. To avoid various issues,
it doesnâ€™t perform operations automatically upon import. Instead, you need to initialize it
manually.

By default, the SDK is uninitialized and not ready for use. All components remain unmounted. To
initialize the SDK and unlock not only the componentsâ€™ `mount` method but also other
non-component-related methods, you **must** use the `init` function.

```ts
import { init } from '@telegram-apps/sdk';

init();
```

After calling this, it is now safe to mount any components you wish to use in your application.

## Mount Used Components

In the previous section, we initialized the SDK, allowing us to use components.

Before using specific components in your application, you must mount them. Not mounting components
will cause their methods to throw errors. For example, the following code will cause issues:

```ts
import { init, backButton } from '@telegram-apps/sdk';

// Initialize the SDK.
init();

// Attempt to show the Back Button.
backButton.show();
// TypedError: ERR_NOT_MOUNTED: The backButton component 
// was not mounted.
```

To avoid this issue, mount the component before using its methods:

```ts
import { init, backButton } from '@telegram-apps/sdk';

// Initialize the SDK.
init();

// Mount the Back Button.
backButton.mount();

// Show the Back Button.
backButton.show();
```

> [!TIP]
> The mount-checking mechanism ensures that you are working with a properly initialized component.

## Always Check Availability

Not all Telegram Mini Apps methods were implemented in a single release. Some may have been
implemented years ago, while others were introduced only recently.

Because there are many users with different versions of the native Telegram application, you must
check if a method is available on their device before using it:

```ts
import { backButton } from '@telegram-apps/sdk';

// ... the SDK is already initialized, and the Back Button is mounted.
if (backButton.show.isAvailable()) {
  backButton.show();
}
```

The `isAvailable()` method verifies if the function is currently available and can be safely called.
It performs the following checks:

- The current environment is Telegram Mini Apps
- The SDK is initialized
- The method is supported by the current Telegram Mini Apps version
- The parent component is mounted

Not using this signal and simply calling the method may lead to errors related to one of the above
checks.

If you donâ€™t want to perform this check every time and the result of the method execution is not
crucial, use the `ifAvailable(...args)` method. This method accepts the same parameters as the
original function:

```ts
import { backButton } from '@telegram-apps/sdk';

// ... the SDK is already initialized, and the Back Button is mounted.
backButton.show.ifAvailable();
```
```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/components/back-button.md

```markdown
# Back Button

The ðŸ’ [component](../scopes.md) responsible for the Telegram Mini
Apps [back button](../../../../platform/back-button.md).

## Checking Support

To check if the back button is supported by the current Telegram Mini Apps version, use the
`isSupported` method:

::: code-group

```ts [Variable]
import { backButton } from '@telegram-apps/sdk';

backButton.isSupported(); // boolean
```

```ts [Functions]
import { isBackButtonSupported } from '@telegram-apps/sdk';

isBackButtonSupported(); // boolean
```

:::

## Mounting

Before using this component, it is necessary to mount it to work with properly configured
properties. To do so, use the `mount` method. It will update the `isMounted` signal property.

::: code-group

```ts [Variable]
import { backButton } from '@telegram-apps/sdk';

if (backButton.mount.isAvailable()) {
  backButton.mount();
  backButton.isMounted(); // true
}
```

```ts [Functions]
import { mountBackButton, isBackButtonMounted } from '@telegram-apps/sdk';

if (mountBackButton.isAvailable()) {
  mountBackButton();
  isBackButtonMounted(); // true
}
```

:::

To unmount, use the `unmount` method:

::: code-group

```ts [Variable]
backButton.unmount();
backButton.isMounted(); // false
```

```ts [Functions]
import { unmountBackButton, isBackButtonMounted } from '@telegram-apps/sdk';

unmountBackButton();
isBackButtonMounted(); // false
```

:::

## Showing and Hiding

To change the button's visibility, use the `hide()` and `show()` methods. These methods update
the `isVisible` signal property value.

::: code-group

```ts [Variable]
if (backButton.show.isAvailable()) {
  backButton.show();
  backButton.isVisible(); // true
}

if (backButton.hide.isAvailable()) {
  backButton.hide();
  backButton.isVisible(); // false
}
```

```ts [Functions]
import {
  showBackButton,
  hideBackButton,
  isBackButtonVisible,
} from '@telegram-apps/sdk';

if (showBackButton.isAvailable()) {
  showBackButton();
  isBackButtonVisible(); // true
}

if (hideBackButton.isAvailable()) {
  hideBackButton();
  isBackButtonVisible(); // false
}
```

:::

## Tracking Click

To add a button click listener, use the `onClick` method. It returns a function to remove the bound
listener. Alternatively, you can use the `offClick` method.

::: code-group

```ts [Variable]
if (backButton.onClick.isAvailable()) {
  function listener() {
    console.log('Clicked!');
  }

  const offClick = backButton.onClick(listener);
  offClick();
  // or
  backButton.onClick(listener);
  backButton.offClick(listener);
}
```

```ts [Functions]
import { onBackButtonClick, offBackButtonClick } from '@telegram-apps/sdk';

if (onBackButtonClick.isAvailable()) {
  function listener() {
    console.log('Clicked!');
  }

  const offClick = onBackButtonClick(listener);
  offClick();
  // or
  onBackButtonClick(listener);
  offBackButtonClick(listener);
}
```

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/components/biometry.md

```markdown
# Biometry

The ðŸ’ [component](../scopes.md) responsible for biometry functionality for Telegram Mini Apps.

## Checking Support

To check if biometry is supported by the current Telegram Mini Apps version, use the `isSupported`
method:

::: code-group

```ts [Variable]
import { biometry } from '@telegram-apps/sdk';

biometry.isSupported(); // boolean
```

```ts [Functions]
import { isBiometrySupported } from '@telegram-apps/sdk';

isBiometrySupported(); // boolean
```

:::

## Mounting

Before using the component, it must be mounted.

This process is asynchronous, as biometry data needs to be requested from the Telegram application.
The `isMounting` signal will be set to `true` during the process and updated to `false` when
complete.

If mounting is successful, the `isMounted` signal will be set to `true`. If errors occur,
the `mountError` signal will reflect the error.

::: code-group

```ts [Variable]
if (biometry.mount.isAvailable()) {
  try {
    const promise = biometry.mount();
    biometry.isMounting(); // true
    await promise;
    biometry.isMounting(); // false
    biometry.isMounted(); // true
  } catch (err) {
    biometry.mountError(); // equals "err"
    biometry.isMounting(); // false
    biometry.isMounted(); // false
  }
}
```

```ts [Functions]
import {
  mountBiometry,
  isBiometryMounting,
  isBiometryMounted,
  biometryMountError,
} from '@telegram-apps/sdk';

if (mountBiometry.isAvailable()) {
  try {
    const promise = mountBiometry();
    isBiometryMounting(); // true
    await promise;
    isBiometryMounting(); // false
    isBiometryMounted(); // true
  } catch (err) {
    biometryMountError(); // equals "err"
    isBiometryMounting(); // false
    isBiometryMounted(); // false
  }
}
```

:::

To unmount, use the `unmount` method:

::: code-group

```ts [Variable]
biometry.unmount();
biometry.isMounted(); // false
```

```ts [Functions]
import { unmountBiometry, isBiometryMounted } from '@telegram-apps/sdk';

unmountBiometry();
isBiometryMounted(); // false
```

:::

## Requesting Biometry Access

To request biometry access, use the `requestAccess` method. It returns a promise with boolean
value indicating whether access was granted by the user.

::: code-group

```ts [Variable]
if (biometry.requestAccess.isAvailable()) {
  const granted = await biometry.requestAccess(); // boolean
}
```

```ts [Functions]
import { requestBiometryAccess } from '@telegram-apps/sdk';

if (requestBiometryAccess.isAvailable()) {
  const granted = await requestBiometryAccess(); // boolean
}
```

:::

## Authenticating

To authenticate a user and retrieve a previously saved token, use the `authenticate` method.

It optionally accepts an object with the following properties:

- `reason?: string`: a reason for authentication to display to the user.

The method returns an object with `status` (`'failed'` or `'authorized'`) and, if successful,
a `token: string`.

::: code-group

```ts [Variable]
if (biometry.authenticate.isAvailable()) {
  const { status, token } = await biometry.authenticate({
    reason: 'Please!',
  });

  if (status === 'authorized') {
    console.log(`Authorized. Token: ${token}`);
  } else {
    console.log('Not authorized');
  }
}
```

```ts [Functions]
import { authenticateBiometry } from '@telegram-apps/sdk';

if (authenticateBiometry.isAvailable()) {
  const { status, token } = await authenticateBiometry({
    reason: 'Please!',
  });

  if (status === 'authorized') {
    console.log(`Authorized. Token: ${token}`);
  } else {
    console.log('Not authorized');
  }
}
```

:::

## Updating Token

To update the token stored in local secure storage, use the `updateToken` method.

The method accepts an optional object with the `reason` and `token` properties. If no token is
provided, the existing token will be deleted.

It returns a promise with boolean indicating if any changes were made.

::: code-group

```ts [Variable]
if (biometry.updateToken.isAvailable()) {
  const updated = await biometry.updateToken({
    reason: 'Want to delete',
  });

  await biometry.updateToken({
    reason: 'Will set a new one',
    token: 'new token',
  });
}
```

```ts [Functions]
import { updateBiometryToken } from '@telegram-apps/sdk';

if (updateBiometryToken.isAvailable()) {
  const updated = await updateBiometryToken({
    reason: 'Want to delete',
  });

  await updateBiometryToken({
    reason: 'Will set a new one',
    token: 'new token',
  });
}
```

:::

## Opening Settings

To open the biometry-related settings modal, use the `openSettings` method. This method can only be
triggered in response to user interaction.

::: code-group

```ts [Variable]
if (biometry.openSettings.isAvailable()) {
  biometry.openSettings();
}
```

```ts [Functions]
import { openBiometrySettings } from '@telegram-apps/sdk';

if (openBiometrySettings.isAvailable()) {
  openBiometrySettings();
}
```

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/components/closing-behavior.md

```markdown
# Closing Behavior

The ðŸ’ [component](../scopes.md) responsible for the Telegram Mini
Apps [closing behavior](../../../../platform/closing-behavior.md).

## Mounting

Before using this component, it is necessary to mount it to work with properly configured
properties. To do so, use the `mount` method. It will update the `isMounted` signal property.

::: code-group

```ts [Variable]
import { closingBehavior } from '@telegram-apps/sdk';

if (closingBehavior.mount.isAvailable()) {
  closingBehavior.mount();
  closingBehavior.isMounted(); // true
}
```

```ts [Functions]
import {
  mountClosingBehavior,
  isClosingBehaviorMounted,
} from '@telegram-apps/sdk';

if (mountClosingBehavior.isAvailable()) {
  mountClosingBehavior();
  isClosingBehaviorMounted(); // true
}
```

:::

To unmount, use the `unmount` method:

::: code-group

```ts [Variable]
closingBehavior.unmount();
closingBehavior.isMounted(); // false
```

```ts [Functions]
import {
  unmountClosingBehavior,
  isClosingBehaviorMounted,
} from '@telegram-apps/sdk';

unmountClosingBehavior();
isClosingBehaviorMounted(); //  false
```

:::

## Closing Confirmation

To change the closing confirmation behavior, use the `enableConfirmation()`
and `disableConfirmation()` methods. These methods update the `isConfirmationEnabled` signal
property value.

::: code-group

```ts [Variable]
if (closingBehavior.enableConfirmation.isAvailable()) {
  closingBehavior.enableConfirmation();
  closingBehavior.isConfirmationEnabled(); // true
}

if (closingBehavior.disableConfirmation.isAvailable()) {
  closingBehavior.disableConfirmation();
  closingBehavior.isConfirmationEnabled(); // false
}
```

```ts [Functions]
import {
  enableClosingConfirmation,
  disableClosingConfirmation,
} from '@telegram-apps/sdk';

if (enableClosingConfirmation.isAvailable()) {
  enableClosingConfirmation();
  isClosingConfirmationEnabled(); // true
}

if (disableClosingConfirmation.isAvailable()) {
  disableClosingConfirmation();
  isClosingConfirmationEnabled(); // false
}
```

:::
```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/components/cloud-storage.md

```markdown
# Cloud Storage

The ðŸ’ [component](../scopes.md) responsible for managing the cloud storage in Telegram Mini Apps.

## Checking Support

To check if the cloud storage is supported by the current Telegram Mini Apps version, the
`isSupported` method is used:

::: code-group

```ts [Variable]
import { cloudStorage } from '@telegram-apps/sdk';

cloudStorage.isSupported(); // boolean
```

```ts [Functions]
import { isCloudStorageSupported } from '@telegram-apps/sdk';

isCloudStorageSupported(); // boolean
```

:::

## Setting Items

To set a key value, use the `setItem` method.

::: code-group

```ts [Variable]
if (cloudStorage.setItem.isAvailable()) {
  await cloudStorage.setItem('a', 'a-value');
}
```

```ts [Functions]
import { setCloudStorageItem } from '@telegram-apps/sdk';

if (setCloudStorageItem.isAvailable()) {
  await setCloudStorageItem('a', 'a-value');
}
```

:::

## Getting Keys

To retrieve a list of all existing keys, use the `getKeys` method.

::: code-group

```ts [Variable]
if (cloudStorage.getKeys.isAvailable()) {
  const keys = await cloudStorage.getKeys(); // ['a', 'b', 'c']
}
```

```ts [Functions]
import { getCloudStorageKeys } from '@telegram-apps/sdk';

if (getCloudStorageKeys.isAvailable()) {
  const keys = await getCloudStorageKeys(); // ['a', 'b', 'c']
}
```

:::

To get the value of a specific key or multiple keys, use the `getItem` method.

::: code-group

```ts [Variable]
if (cloudStorage.getItem.isAvailable()) {
  const nonExistent = await cloudStorage.getItem('non-existent');
  // The result is an empty string: ''

  const existent = await cloudStorage.getItem('a');
  // The result is the value of the 'a' key. Example: 'a-value'

  const values = await cloudStorage.getItem(['a', 'b', 'non-existent']);
  // The result is a record of the keys 'a', 'b', and 'non-existent'. 
  // Example:
  // { 
  //   a: 'a-value', 
  //   b: 'b-value', 
  //   'non-existent': '', 
  // }
}
```

```ts [Functions]
import { getCloudStorageItem } from '@telegram-apps/sdk';

if (getCloudStorageItem.isAvailable()) {
  const nonExistent = await getCloudStorageItem('non-existent');
  // The result is an empty string: ''

  const existent = await getCloudStorageItem('a');
  // The result is the value of the 'a' key. Example: 'a-value'

  const values = await getCloudStorageItem(['a', 'b', 'non-existent']);
  // The result is a record of the keys 'a', 'b', and 'non-existent'. 
  // Example:
  // { 
  //   a: 'a-value', 
  //   b: 'b-value', 
  //   'non-existent': '', 
  // }
}
```

:::

## Deleting Items

To delete a key or a list of keys, use the `deleteItem` method.

::: code-group

```ts [Variable]
if (cloudStorage.deleteItem.isAvailable()) {
  await cloudStorage.deleteItem('a');
  await cloudStorage.deleteItem(['a', 'b', 'c']);
}
```

```ts [Functions]
import { deleteCloudStorageItem } from '@telegram-apps/sdk';

if (deleteCloudStorageItem.isAvailable()) {
  await deleteCloudStorageItem('a');
  await deleteCloudStorageItem(['a', 'b', 'c']);
}
```

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/components/haptic-feedback.md

```markdown
# Haptic Feedback

The ðŸ’ [component](../scopes.md) responsible for the Telegram Mini
Apps [haptic feedback](../../../../platform/haptic-feedback.md).

## Checking Support

To check if the haptic feedback is supported by the current Telegram Mini Apps version, the
`isSupported` method is used:

::: code-group

```ts [Variable]
import { hapticFeedback } from '@telegram-apps/sdk';

hapticFeedback.isSupported(); // boolean
```

```ts [Functions]
import { isHapticFeedbackSupported } from '@telegram-apps/sdk';

isHapticFeedbackSupported(); // boolean
```

:::

## Impact Occurred

`impactOccurred` is the method that signals an impact event. The Telegram app may play the
appropriate haptic feedback based on the style value passed.

::: code-group 

```ts [Variable]
if (hapticFeedback.impactOccurred.isAvailable()) {
  hapticFeedback.impactOccurred('medium');
}
```

```ts [Functions]
import { hapticFeedbackImpactOccurred } from '@telegram-apps/sdk';

if (hapticFeedbackImpactOccurred.isAvailable()) {
  hapticFeedbackImpactOccurred('medium');
}
```

:::

The available styles for the impact haptic event are:

- `light`: indicates a collision between small or lightweight UI objects.
- `medium`: indicates a collision between medium-sized or medium-weight UI objects.
- `heavy`: indicates a collision between large or heavyweight UI objects.
- `rigid`: indicates a collision between hard or inflexible UI objects.
- `soft`: indicates a collision between soft or flexible UI objects.

## Notification Occurred

`notificationOccurred` is the method that signals a task or action has succeeded, failed, or
triggered a warning. The Telegram app may play the appropriate haptic feedback based on the type
value passed.

::: code-group

```ts [Variable]
if (hapticFeedback.notificationOccurred.isAvailable()) {
  hapticFeedback.notificationOccurred('success');
}
```

```ts [Functions]
import { hapticFeedbackNotificationOccurred } from '@telegram-apps/sdk';

if (hapticFeedbackNotificationOccurred.isAvailable()) {
  hapticFeedbackNotificationOccurred('success');
}
```

:::

The types of notification events are:

- `error`: indicates that a task or action has failed.
- `success`: indicates that a task or action has been completed successfully.
- `warning`: indicates that a task or action has triggered a warning.

## Selection Changed

`selectionChanged` is the method that signals a user has changed a selection. The Telegram app may
play the appropriate haptic feedback.

Use this feedback only when the selection changes, not when a selection is made or confirmed.

::: code-group

```ts [Variable]
if (hapticFeedback.selectionChanged.isAvailable()) {
  hapticFeedback.selectionChanged();
}
```

```ts [Functions]
import { hapticFeedbackSelectionChanged } from '@telegram-apps/sdk';

if (hapticFeedbackSelectionChanged.isAvailable()) {
  hapticFeedbackSelectionChanged();
}
```

```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/components/init-data.md

```markdown
---
outline: [ 2, 3 ]
---

# Init Data

The ðŸ’ [component](../scopes.md) responsible for the Telegram Mini
Apps [init data](../../../../platform/init-data.md).

## Restoring

To restore the component state, use the `restore` method.

::: code-group

```ts [Variable]
import { initData } from '@telegram-apps/sdk';

initData.restore();
```

```ts [Functions]
import { restoreInitData } from '@telegram-apps/sdk';

restoreInitData();
```

:::

## Parsing

To parse the value as init data, use the `parseInitData` function.

```ts
import { parseInitData } from '@telegram-apps/sdk';

const initData = parseInitData('auth_date=123&query_id=anQQ231vs&...');
// {
//   user: {
//     id: 99281932,
//     firstName: 'Andrew',
//     lastName: 'Rogue',
//     username: 'rogue',
//     languageCode: 'en',
//     isPremium: true,
//     allowsWriteToPm: true,
//   },
//   hash: 'abcedef123',
//   authDate: Date(1716922846000),
//   startParam: 'debug',
//   chatType: 'sender',
//   chatInstance: '8428209589180549439',
// };
```

The function returns the [init data](../../../../platform/init-data.md#parameters-list) object
with deeply camel-cased properties.

## Signals

This section provides a complete list of signals related to the init data.

### `authDate`

Return type: `Date | undefined`

The date the initialization data was created.

::: code-group

```ts [Variable]
initData.authDate(); // Date(1727368894000)
```

```ts [Functions]
import { initDataAuthDate } from '@telegram-apps/sdk';

initDataAuthDate(); // Date(1727368894000)
```

:::

### `canSendAfter`

Return type: `number | undefined`

The number of seconds after which a message can be sent via the
method [answerWebAppQuery](https://core.telegram.org/bots/api#answerwebappquery).

::: code-group

```ts [Variable]
initData.canSendAfter(); // 3600
```

```ts [Functions]
import { initDataCanSendAfter } from '@telegram-apps/sdk';

initDataAuthDate(); // 3600
```

:::

### `canSendAfterDate`

Return type: `Date | undefined`

[canSendAfter](#cansendafter) but as a Date.

::: code-group

```ts [Variable]
initData.canSendAfterDate(); // Date(1727368897600)
```

```ts [Functions]
import { initDataCanSendAfterDate } from '@telegram-apps/sdk';

initDataCanSendAfterDate(); // Date(1727368897600)
```

:::

### `chat`

Return type: `undefined` or [`Chat`](../../../../platform/init-data.md#chat) with camel-cased
properties.

An object containing data about the chat where the bot was launched via the attachment menu.

> [!NOTE]
> Returned for supergroups, channels and group chats â€“ only for Mini Apps launched via the
> attachment menu.

::: code-group

```ts [Variable]
initData.chat();
// {
//   id: 7728725378876215,
//   type: 'group',
//   title: '@BotFather',
//   photoUrl: 'https://example.com/image.png',
//   username: 'botfather'
// }
```

```ts [Functions]
import { initDataChat } from '@telegram-apps/sdk';

initDataChat();
// {
//   id: 7728725378876215,
//   type: 'group',
//   title: '@BotFather',
//   photoUrl: 'https://example.com/image.png',
//   username: 'botfather'
// }
```

:::

### `chatType`

Return type: `string | undefined`

The type of chat from which the Mini Apps was opened. Values:

- `sender`
- `private`
- `group`
- `supergroup`
- `channel`

> [!NOTE]
> Returned only for applications opened by direct link.

::: code-group

```ts [Variable]
initData.chatType(); // 'group'
```

```ts [Functions]
import { initDataChatType } from '@telegram-apps/sdk';

initDataChatType(); // 'group'
```

:::

### `chatInstance`

Return type: `string | undefined`

A global identifier indicating the chat from which the Mini Apps was opened.

> [!WARNING]
> Returned only for applications opened by direct link.

::: code-group

```ts [Variable]
initData.chatInstance(); // 'group'
```

```ts [Functions]
import { initDataChatInstance } from '@telegram-apps/sdk';

initDataChatInstance(); // '899667289674387257'
```

:::

### `hash`

Return type: `string | undefined`

Initialization data signature.

::: code-group

```ts [Variable]
initData.hash(); // 'group'
```

```ts [Functions]
import { initDataHash } from '@telegram-apps/sdk';

initDataHash(); // 'sgbbc62g3bvdhg3djsaasd'
```

:::

### `queryId`

Return type: `string | undefined`

The unique session ID of the Mini App. Used in the process of
sending a message via the
method [answerWebAppQuery](https://core.telegram.org/bots/api#answerwebappquery).

::: code-group

```ts [Variable]
initData.queryId(); // 'group'
```

```ts [Functions]
import { initDataQueryId } from '@telegram-apps/sdk';

initDataQueryId(); // 'ssVXZ231ger'
```

:::

### `raw`

Return type: `string | undefined`

A raw string representation of the initialization data.

::: code-group

```ts [Variable]
initData.raw(); // 'user=...&chat=...&...'
```

```ts [Functions]
import { initDataRaw } from '@telegram-apps/sdk';

initDataRaw(); // 'user=...&chat=...&...'
```

:::

### `receiver`

Return type: `undefined` or [`User`](../../../../platform/init-data.md#user) with camel-cased
properties.

An object containing data about the chat partner of the current user in
the chat where the bot was launched via the attachment menu.

> [!NOTE]
> Returned only for private chats and only for Mini Apps launched via the attachment menu.

::: code-group

```ts [Variable]
initData.user();
// {
//   addedToAttachmentMenu: false,
//   allowsWriteToPm: true,
//   isPremium: true,
//   firstName: 'Pavel',
//   id: 78262681,
//   isBot: false,
//   lastName: 'Durov',
//   languageCode: 'ru',
//   photoUrl: 'https://example.com/image.png',
//   username: 'durove',
// }
```

```ts [Functions]
import { initDataUser } from '@telegram-apps/sdk';

initDataUser();
// {
//   addedToAttachmentMenu: false,
//   allowsWriteToPm: true,
//   isPremium: true,
//   firstName: 'Pavel',
//   id: 78262681,
//   isBot: false,
//   lastName: 'Durov',
//   languageCode: 'ru',
//   photoUrl: 'https://example.com/image.png',
//   username: 'durove',
// }
```

:::

### `state`

Return type: `undefined` or [`InitData`](../../../../platform/init-data.md#parameters-list) with
deeply camel-cased properties.

An object containing the initialization data in object format.

::: code-group

```ts [Variable]
initData.state();
```

```ts [Functions]
import { initDataState } from '@telegram-apps/sdk';

initDataState();
```

:::

### `startParam`

Return type: `string | undefined`

The value of the `startattach` or `startapp` query parameter specified in the link.

::: code-group

```ts [Variable]
initData.startParam(); // 'my-value'
```

```ts [Functions]
import { initDataStartParam } from '@telegram-apps/sdk';

initDataStartParam(); // 'my-value'
```

:::

### `user`

Return type: `undefined` or [`User`](../../../../platform/init-data.md#user) with camel-cased
properties.

An object containing information about the current user.

::: code-group

```ts [Variable]
initData.user();
// {
//   addedToAttachmentMenu: false,
//   allowsWriteToPm: true,
//   isPremium: true,
//   firstName: 'Pavel',
//   id: 78262681,
//   isBot: false,
//   lastName: 'Durov',
//   languageCode: 'ru',
//   photoUrl: 'https://example.com/image.png',
//   username: 'durove',
// }
```

```ts [Functions]
import { initDataUser } from '@telegram-apps/sdk';

initDataUser();
// {
//   addedToAttachmentMenu: false,
//   allowsWriteToPm: true,
//   isPremium: true,
//   firstName: 'Pavel',
//   id: 78262681,
//   isBot: false,
//   lastName: 'Durov',
//   languageCode: 'ru',
//   photoUrl: 'https://example.com/image.png',
//   username: 'durove',
// }
```

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/components/invoice.md

```markdown
# Invoice

The ðŸ’ [component](../scopes.md) responsible for the
Telegram [invoices](https://core.telegram.org/bots/payments#introducing-payments-2-0).

## Checking Support

To check if invoices are supported by the current Telegram Mini Apps version, the
`isSupported` method is used:

::: code-group

```ts [Variable]
import { invoice } from '@telegram-apps/sdk';

invoice.isSupported(); // boolean
```

```ts [Functions]
import { isInvoiceSupported } from '@telegram-apps/sdk';

isInvoiceSupported(); // boolean
```

:::

## Opening

To open an invoice, it is required to use the `open` method. This method allows opening invoices
using their URLs or slugs.

Opening an invoice in URL mode requires passing the second argument equal to `url`, so the method
will interpret the passed value as a URL.

Calling the method updates the `isOpened` signal property value.

::: code-group

```ts [Variable]
import { invoice } from '@telegram-apps/sdk';

if (invoice.open.isAvailable()) {
  invoice.isOpened(); // false
  const promise = invoice.open('abIIks213');
  invoice.isOpened(); // true
  const status = await promise;
  invoice.isOpened(); // false

  // Or in URL mode:
  await invoice.open('https://t.me/invoice/abIIks213', 'url');
}
```

```ts [Functions]
import { openInvoice, isInvoiceOpened } from '@telegram-apps/sdk';

if (openInvoice.isAvailable()) {
  isInvoiceOpened(); // false
  const promise = openInvoice('abIIks213');
  isInvoiceOpened(); // true
  const status = await promise;
  isInvoiceOpened(); // false

  // Or in URL mode:
  await openInvoice('https://t.me/invoice/abIIks213', 'url');
}
```

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/components/location-manager.md

```markdown
# Location Manager

The ðŸ’ [component](../scopes.md) responsible for location tracking functionality for Telegram Mini
Apps.

## Checking Support

To check if location tracking is supported by the current Telegram Mini Apps version, use the
`isSupported` signal:

::: code-group

```ts [Variable]
import { locationManager } from '@telegram-apps/sdk';

locationManager.isSupported(); // boolean
```

```ts [Functions]
import { isLocationManagerSupported } from '@telegram-apps/sdk';

isLocationManagerSupported(); // boolean
```

:::

## Mounting

Before using the component, it must be mounted.

This process is asynchronous, as location manager settings need to be requested from the Telegram
application. The `isMounting` signal will be set to `true` during the process and updated to `false`
when complete.

If mounting is successful, the `isMounted` signal will be set to `true`. If errors occur,
the `mountError` signal will reflect the error.

::: code-group

```ts [Variable]
if (locationManager.mount.isAvailable()) {
  try {
    const promise = locationManager.mount();
    locationManager.isMounting(); // true
    await promise;
    locationManager.isMounting(); // false
    locationManager.isMounted(); // true
  } catch (err) {
    locationManager.mountError(); // equals "err"
    locationManager.isMounting(); // false
    locationManager.isMounted(); // false
  }
}
```

```ts [Functions]
import {
  mountLocationManager,
  isLocationManagerMounting,
  isLocationManagerMounted,
  locationManagerMountError,
} from '@telegram-apps/sdk';

if (mountLocationManager.isAvailable()) {
  try {
    const promise = mountLocationManager();
    isLocationManagerMounting(); // true
    await promise;
    isLocationManagerMounting(); // false
    isLocationManagerMounted(); // true
  } catch (err) {
    locationManagerMountError(); // equals "err"
    isLocationManagerMounting(); // false
    isLocationManagerMounted(); // false
  }
}
```

:::

To unmount, use the `unmount` method:

::: code-group

```ts [Variable]
locationManager.unmount();
locationManager.isMounted(); // false
```

```ts [Functions]
import { unmountLocationManager, isLocationManagerMounted } from '@telegram-apps/sdk';

unmountLocationManager();
isLocationManagerMounted(); // false
```

:::

## Requesting Location

To request the current location, use the `requestLocation` method. It returns a cancelable promise
with an object, describing the current device location.

The object contains the following numeric properties:

| Property            | Description                                                          |
|---------------------|----------------------------------------------------------------------|
| latitude            | Latitude in degrees.                                                 |
| longitude           | Longitude in degrees.                                                |
| altitude            | _Optional_. Altitude above sea level in meters.                      |
| course              | _Optional_. The direction the device is moving in degrees.           |
| speed               | _Optional_. The speed of the device in m/s.                          |
| horizontal_accuracy | _Optional_. Accuracy of the latitude and longitude values in meters. |
| vertical_accuracy   | _Optional_. Accuracy of the altitude value in meters.                |
| course_accuracy     | _Optional_. Accuracy of the course value in degrees.                 |
| speed_accuracy      | _Optional_. Accuracy of the speed value in m/s.                      |

::: code-group

```ts [Variable]
if (locationManager.requestLocation.isAvailable()) {
  const location = await locationManager.requestLocation();
}
```

```ts [Functions]
import { requestLocation } from '@telegram-apps/sdk';

if (requestLocation.isAvailable()) {
  const location = await requestLocation();
}
```

:::

## Opening Settings

To open the location manager-related settings modal, use the `openSettings` method. This method can
only be triggered in response to user interaction.

::: code-group

```ts [Variable]
if (locationManager.openSettings.isAvailable()) {
  locationManager.openSettings();
}
```

```ts [Functions]
import { openLocationManagerSettings } from '@telegram-apps/sdk';

if (openLocationManagerSettings.isAvailable()) {
  openLocationManagerSettings();
}
```

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/components/main-button.md

```markdown
# Main Button

The ðŸ’ [component](../scopes.md) responsible for the Telegram Mini
Apps [main button](../../../../platform/main-button.md).

## Mounting

Before using this component, it is necessary to mount it to work with properly configured
properties. To do so, use the `mount` method. It will update the `isMounted` signal property.

::: code-group

```ts [Variable]
import { mainButton } from '@telegram-apps/sdk';

if (mainButton.mount.isAvailable()) {
  mainButton.mount();
  mainButton.isMounted(); // true
}
```

```ts [Functions]
import { mountMainButton, isMainButtonMounted } from '@telegram-apps/sdk';

if (mountMainButton.isAvailable()) {
  mountMainButton();
  isMainButtonMounted(); // true
}
```

:::

To unmount, use the `unmount` method:

::: code-group

```ts [Variable]
mainButton.unmount(); 
mainButton.isMounted(); // false
```

```ts [Functions]
import { unmountMainButton, isMainButtonMounted } from '@telegram-apps/sdk';

unmountMainButton();
isMainButtonMounted(); // false
```

:::

> [!WARNING]
> This component's properties depend on values from the [Theme Params](theme-params.md) component.
> Make sure to mount Theme Params before using the Main Button.

## Settings Properties

To update the button properties, use the `setParams` method. It accepts an object with optional
properties, each responsible for its own button trait.

In turn, calling this method updates such signals
as `backgroundColor`, `hasShineEffect`, `isVisible`, `isEnabled`, `isLoaderVisible`, `state`, `textColor`
and `text`.

::: code-group

```ts [Variable]
if (mainButton.setParams.isAvailable()) {
  mainButton.setParams({
    backgroundColor: '#000000',
    hasShineEffect: true,
    isEnabled: true,
    isLoaderVisible: true,
    isVisible: true,
    text: 'My text',
    textColor: '#ffffff'
  });
  mainButton.backgroundColor(); // '#000000'
  mainButton.hasShineEffect(); // true
  mainButton.isEnabled(); // true
  mainButton.isLoaderVisible(); // true
  mainButton.isVisible(); // true
  mainButton.text(); // 'My text'
  mainButton.textColor(); // '#ffffff'

  mainButton.state();
  // {
  //   backgroundColor: '#000000',
  //   hasShineEffect: true,
  //   isActive: true,
  //   isLoaderVisible: true,
  //   isVisible: true,
  //   text: 'My text',
  //   textColor: '#ffffff'
  // }
}
```

```ts [Functions]
import {
  setMainButtonParams,
  mainButtonBackgroundColor,
  mainButtonHasShineEffect,
  isMainButtonVisible,
  isMainButtonEnabled,
  isMainButtonLoaderVisible,
  mainButtonState,
  mainButtonTextColor,
  mainButtonText,
} from '@telegram-apps/sdk';

if (setMainButtonParams.isAvailable()) {
  setMainButtonParams({
    backgroundColor: '#000000',
    hasShineEffect: true,
    isEnabled: true,
    isLoaderVisible: true,
    isVisible: true,
    text: 'My text',
    textColor: '#ffffff'
  });
  mainButtonBackgroundColor(); // '#000000'
  mainButtonHasShineEffect(); // true
  isMainButtonEnabled(); // true
  isMainButtonLoaderVisible(); // true
  isMainButtonVisible(); // true
  mainButtonText(); // 'My text'
  mainButtonTextColor(); // '#ffffff'

  mainButtonState();
  // {
  //   backgroundColor: '#000000',
  //   hasShineEffect: true,
  //   isActive: true,
  //   isLoaderVisible: true,
  //   isVisible: true,
  //   text: 'My text',
  //   textColor: '#ffffff'
  // }
}
```

:::

## Tracking Click

To add a button click listener, use the `onClick` method. It returns a function to remove the bound
listener. Alternatively, you can use the `offClick` method.

::: code-group

```ts [Variable]
if (mainButton.onClick.isAvailable()) {
  function listener() {
    console.log('Clicked!');
  }

  const offClick = mainButton.onClick(listener);
  offClick();
  // or
  mainButton.onClick(listener);
  mainButton.offClick(listener);
}
```

```ts [Functions]
import {
  onMainButtonClick,
  offMainButtonClick,
} from '@telegram-apps/sdk';

if (onMainButtonClick.isAvailable()) {
  function listener() {
    console.log('Clicked!');
  }

  const offClick = onMainButtonClick(listener);
  offClick();
  // or
  onMainButtonClick(listener);
  offMainButtonClick(listener);
}
```

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/components/mini-app.md

```markdown
# Mini App

The ðŸ’ [component](../scopes.md) responsible for managing functionality within Telegram Mini Apps.

## Mounting

Before using the component, it must be mounted.

> [!TIP] Actual sync mount
> To mount the component, use the `mountSync` method. It will update the `isMounted` signal property.
> 
> ::: code-group
> 
> ```ts [Variable]
> import { miniApp } from '@telegram-apps/sdk';
> 
> if (miniApp.mountSync.isAvailable()) {
>   miniApp.mountSync();
>   miniApp.isMounted(); // true
> }
> ```
> 
> ```ts [Functions]
> import { mountMiniAppSync, isMiniAppMounted } from '@telegram-apps/sdk';
> 
> if (mountMiniAppSync.isAvailable()) {
>   mountMiniAppSync();
>   isMiniAppMounted(); // true
> }
> ```
> 
> :::

> [!WARNING] Deprecated async mount
> This process is asynchronous, as theme parameters need to be requested from the Telegram
> application. The `isMounting` signal will be set to `true` during the process and updated to `false`
> when complete.
>
> If mounting is successful, the `isMounted` signal will be set to `true`. If errors occur,
> the `mountError` signal will reflect the error.
>
> ::: code-group
> 
> ```ts [Variable]
> if (miniApp.mount.isAvailable()) {
>   try {
>     const promise = miniApp.mount();
>     miniApp.isMounting(); // true
>     await promise;
>     miniApp.isMounting(); // false
>     miniApp.isMounted(); // true
>   } catch (err) {
>     miniApp.mountError(); // equals "err"
>     miniApp.isMounting(); // false
>     miniApp.isMounted(); // false
>   }
> }
> ```
> 
> ```ts [Functions]
> import {
>   mountminiApp,
>   isMiniAppMounting,
>   isMiniAppMounted,
>   miniAppMountError,
> } from '@telegram-apps/sdk';
> 
> if (mountminiApp.isAvailable()) {
>   try {
>     const promise = mountminiApp();
>     isMiniAppMounting(); // true
>     await promise;
>     isMiniAppMounting(); // false
>     isMiniAppMounted(); // true
>   } catch (err) {
>     miniAppMountError(); // equals "err"
>     isMiniAppMounting(); // false
>     isMiniAppMounted(); // false
>   }
> }
> ```
> 
> :::
> 
> > [!INFO]
> > The `mount` method also mounts the [Theme Params](theme-params.md) scope to extract correctly
> > configured values.

To unmount the component, use the `unmount` method:

::: code-group

```ts [Variable]
miniApp.unmount();
miniApp.isMounted(); // false
```

```ts [Functions]
import { unmountMiniApp, isMiniAppMounted } from '@telegram-apps/sdk';

unmountMiniApp();
isMiniAppMounted(); // false
```

:::

## Binding CSS Variables

To expose the `miniApp` properties via CSS variables, use the `bindCssVars` method.
The `isCssVarsBound` signal property is updated after the method is called.

This method optionally accepts a function that transforms the values `bgColor` and `headerColor`
into CSS variable names. By default, values are converted to kebab case with the prefix `--tg-`.

::: code-group

```ts [Variable]
if (miniApp.bindCssVars.isAvailable()) {
  miniApp.bindCssVars();
  // Creates CSS variables like:
  // --tg-bg-color: #aabbcc
  // --tg-header-color: #aabbcc

  miniApp.bindCssVars(key => `--my-prefix-${key}`);
  // Creates CSS variables like:
  // --my-prefix-bgColor: #aabbcc
  // --my-prefix-headerColor: #aabbcc

  miniApp.isCssVarsBound(); // true
}
```

```ts [Functions]
import { bindMiniAppCssVars, isMiniAppCssVarsBound } from '@telegram-apps/sdk';

if (bindMiniAppCssVars.isAvailable()) {
  bindMiniAppCssVars();
  // Creates CSS variables like:
  // --tg-bg-color: #aabbcc
  // --tg-header-color: #aabbcc

  bindMiniAppCssVars(key => `--my-prefix-${key}`);
  // Creates CSS variables like:
  // --my-prefix-bgColor: #aabbcc
  // --my-prefix-headerColor: #aabbcc

  isMiniAppCssVarsBound(); // true
}
```

:::

## Header Color

To change the mini application header color, the method `setHeaderColor` is used. In turn,
calling this method updates the `headerColor` signal property value.

The method accepts either an RGB color value or one of the following
strings: `bg_color`, `secondary_bg_color`.

::: code-group

```ts [Variable]
if (miniApp.setHeaderColor.isAvailable()) {
  miniApp.setHeaderColor('bg_color');
  miniApp.headerColor(); // 'bg_color'
}

if (
  miniApp.setHeaderColor.isAvailable()
  && miniApp.setHeaderColor.supports('rgb')
) {
  miniApp.setHeaderColor('#aabbcc');
  miniApp.headerColor(); // '#aabbcc'
}
```

```ts [Functions]
import {
  setMiniAppHeaderColor,
  miniAppHeaderColor,
} from '@telegram-apps/sdk';

if (setMiniAppHeaderColor.isAvailable()) {
  setMiniAppHeaderColor('bg_color');
  miniAppHeaderColor(); // 'bg_color'
}

if (
  setMiniAppHeaderColor.isAvailable()
  && setMiniAppHeaderColor.supports('rgb')
) {
  setMiniAppHeaderColor('#aabbcc');
  miniAppHeaderColor(); // '#aabbcc'
}
```

:::

## Background Color

To update the mini application background color, use the `setBackgroundColor` method. Calling
this method updates the `headerColor` signal property value.

::: code-group

```ts [Variable]
if (miniApp.setBackgroundColor.isAvailable()) {
  miniApp.setBackgroundColor('#ffffff');
  miniApp.backgroundColor(); // '#ffffff'
}
```

```ts [Functions]
import {
  setMiniAppBackgroundColor,
  miniAppBackgroundColor,
} from '@telegram-apps/sdk';

if (setMiniAppBackgroundColor.isAvailable()) {
  setMiniAppBackgroundColor('#ffffff');
  miniAppBackgroundColor(); // '#ffffff'
}
```

:::

## Active State

The mini application becomes inactive if it is wrapped into the bottom native Telegram client tray
or if the currently active tab of the mini apps browser is changed to another one.

To track if the mini application is currently active, use the `isActive` signal.

::: code-group

```ts [Variable]
miniApp.isActive();
```

```ts [Functions]
import { isMiniAppActive } from '@telegram-apps/sdk';

isMiniAppActive()
```

:::

## Methods

### `close`

To close the mini application, use the `close` method.

::: code-group

```ts [Variable]
if (miniApp.close.isAvailable()) {
  miniApp.close();
}
```

```ts [Functions]
import { closeMiniApp } from '@telegram-apps/sdk';

if (miniApp.close.isAvailable()) {
  miniApp.close();
}
```

:::

### `ready`

To signal that the Mini App is ready to be displayed, use the `ready` method. Once called, the
loading placeholder is hidden, and the Mini App is shown.

::: code-group

```ts [Variable]
if (miniApp.ready.isAvailable()) {
  miniApp.ready();
}
```

```ts [Functions]
import { miniAppReady } from '@telegram-apps/sdk';

if (miniAppReady.isAvailable()) {
  miniAppReady();
}
```

:::

> [!TIP]
> Call this function as early as possible after loading essential interface elements to ensure a
> smooth user experience.
```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/components/popup.md

```markdown
# Popup

The ðŸ’ [component](../scopes.md) responsible for the Telegram Mini Apps [popup](../../../../platform/popup.md).

## Checking Support

To check if the popup is supported by the current Telegram Mini Apps version, the
`isSupported` method is used:

::: code-group

```ts [Variable]
import { popup } from '@telegram-apps/sdk';

popup.isSupported(); // boolean
```

```ts [Functions]
import { isPopupSupported } from '@telegram-apps/sdk';

isPopupSupported(); // boolean
```

:::

## Opening

To open a popup, it is required to call the `open` method specifying popup properties: title,
message, and a list of up to 3 buttons.

The method returns a promise, which will be fulfilled with the clicked button identifier. In the
case where the user didn't click any button, the method will return `null`.

Calling the method updates the `isOpened` signal property value.

::: code-group

```ts [Variable]
import { popup } from '@telegram-apps/sdk';

if (popup.open.isAvailable()) {
  // popup.isOpened() -> false
  const promise = popup.open({
    title: 'Hello!',
    message: 'Here is a test message.',
    buttons: [{ id: 'my-id', type: 'default', text: 'Default text' }],
  });
  // popup.isOpened() -> true
  const buttonId = await promise;
  // popup.isOpened() -> false
}
```


```ts [Functions]
import { openPopup, isPopupOpened } from '@telegram-apps/sdk';

if (openPopup.isAvailable()) {
  // isPopupOpened() -> false
  const promise = openPopup({
    title: 'Hello!',
    message: 'Here is a test message.',
    buttons: [{ id: 'my-id', type: 'default', text: 'Default text' }],
  });
  // isPopupOpened() -> true
  const buttonId = await promise;
  // isPopupOpened() -> false
}
```

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/components/qr-scanner.md

```markdown
# QR Scanner

The ðŸ’ [component](../scopes.md) which provides the QR scanner functionality.

## Opening and Closing

To open the QR scanner, a developer should use the `open` method. It accepts the optional `text`
property responsible for displaying the scanner title properties, depending on the open style.

In turn, calling the `open` method updates the `isOpened` signal property value.

To close the scanner, use the `close` method.

### Callback Style

Accepts the `onCaptured` option, which is a function receiving the scanned QR content. This method
returns a promise which will be resolved upon the scanner was closed.

::: code-group

```ts [Variable]
import { qrScanner } from '@telegram-apps/sdk';

if (qrScanner.open.isAvailable()) {
  qrScanner.isOpened(); // false
  const promise = qrScanner.open({
    text: 'Scan the QR',
    onCaptured(qr) {
      if (qr === 'qr-content-we-expect') {
        qrScanner.close();
      }
    },
  });
  qrScanner.isOpened(); // true
  await promise;
  qrScanner.isOpened(); // false
}
```

```ts [Functions]
import {
  openQrScanner,
  closeQrScanner,
  isQrScannerOpened,
} from '@telegram-apps/sdk';

if (openQrScanner.isAvailable()) {
  isQrScannerOpened(); // false
  const promise = openQrScanner({
    text: 'Scan the QR',
    onCaptured(qr) {
      if (qr === 'qr-content-we-expect') {
        closeQrScanner();
      }
    },
  });
  isQrScannerOpened(); // true
  await promise;
  isQrScannerOpened(); // true
}
```

:::

### Promise Style

Accepts the optional `capture` option receiving the scanned QR content and
returning `true` if it should be captured and promise resolved. If omitted, the first captured
QR content will be resolved. The promise may be resolved to `undefined`, if the scanner was closed
due to some reason.

::: code-group

```ts [Variable]
import { qrScanner } from '@telegram-apps/sdk';

if (qrScanner.open.isAvailable()) {
  // Getting the first captured QR.
  qrScanner.isOpened(); // false
  let promise = qrScanner.open({ text: 'Scan any QR' });
  qrScanner.isOpened(); // true
  await promise;
  qrScanner.isOpened(); // false

  // Getting some specific QR.
  qrScanner.isOpened(); // false
  promise = qrScanner.open({
    text: 'Scan some specific QR',
    capture(qr) {
      return qr === 'some-specific-qr';
    },
  });
  qrScanner.isOpened(); // true
  await promise;
  qrScanner.isOpened(); // false
}
```

```ts [Functions]
import {
  openQrScanner,
  closeQrScanner,
  isQrScannerOpened,
} from '@telegram-apps/sdk';

if (openQrScanner.isAvailable()) {
  // Getting the first captured QR.
  // isQrScannerOpened() -> false
  let promise = openQrScanner({ text: 'Scan any QR' });
  // isQrScannerOpened() -> true
  await promise;
  // isQrScannerOpened() -> false

  // Getting some specific QR.
  // isQrScannerOpened() -> false
  promise = openQrScanner({
    text: 'Scan some specific QR',
    capture(qr) {
      return qr === 'some-specific-qr';
    },
  });
  // isQrScannerOpened() -> true
  await promise;
  // isQrScannerOpened() -> false
}
```

:::
```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/components/secondary-button.md

```markdown
# Secondary Button

The ðŸ’ [component](../scopes.md) responsible for the Telegram Mini Apps Secondary Button.

## Checking Support

To check if the Secondary Button is supported by the current Telegram Mini Apps version, use the
`isSupported` method:

::: code-group

```ts [Variable]
import { secondaryButton } from '@telegram-apps/sdk';

secondaryButton.isSupported(); // boolean
```

```ts [Functions]
import { isSecondaryButtonSupported } from '@telegram-apps/sdk';

isSecondaryButtonSupported(); // boolean
```

:::

## Mounting

Before using this component, it is necessary to mount it to work with properly configured
properties. To do so, use the `mount` method. It will update the `isMounted` signal property.

::: code-group

```ts [Variable]
import { secondaryButton } from '@telegram-apps/sdk';

if (secondaryButton.mount.isAvailable()) {
  secondaryButton.mount();
  secondaryButton.isMounted(); // true
}
```

```ts [Functions]
import {
  mountSecondaryButton,
  isSecondaryButtonMounted,
} from '@telegram-apps/sdk';

if (mountSecondaryButton.isAvailable()) {
  mountSecondaryButton();
  isSecondaryButtonMounted(); // true
}
```

:::

To unmount, use the `unmount` method:

::: code-group

```ts [Variable]
secondaryButton.unmount();
secondaryButton.isMounted(); // false
```

```ts [Functions]
import {
  unmountSecondaryButton,
  isSecondaryButtonMounted,
} from '@telegram-apps/sdk';

unmountSecondaryButton();
isSecondaryButtonMounted(); // false
```

:::

> [!WARNING]
> This component's properties depend on values from the [Mini App](mini-app.md)
> and [Theme Params](theme-params.md) components. Specifically, the Secondary Button uses the Mini
> App's `bottomBarBgColor` and some of the Theme Params colors. Make sure to mount these components
> before using the Secondary Button.

## Settings Properties

To update the button properties, use the `setParams` method. It accepts an object with optional
properties, each responsible for its own button trait.

In turn, calling this method updates such signals
as `backgroundColor`, `hasShineEffect`, `isVisible`, `isEnabled`, `isLoaderVisible`, `position`,
`state`, `textColor` and `text`.

::: code-group

```ts [Variable]
if (secondaryButton.setParams.isAvailable()) {
  secondaryButton.setParams({
    backgroundColor: '#000000',
    hasShineEffect: true,
    isEnabled: true,
    isLoaderVisible: true,
    isVisible: true,
    position: 'top',
    text: 'My text',
    textColor: '#ffffff'
  });
  secondaryButton.backgroundColor(); // '#000000'
  secondaryButton.hasShineEffect(); // true
  secondaryButton.isEnabled(); // true
  secondaryButton.isLoaderVisible(); // true
  secondaryButton.isVisible(); // true
  secondaryButton.position(); // 'top'
  secondaryButton.text(); // 'My text'
  secondaryButton.textColor(); // '#ffffff'

  secondaryButton.state();
  // {
  //   backgroundColor: '#000000',
  //   hasShineEffect: true,
  //   isActive: true,
  //   isLoaderVisible: true,
  //   isVisible: true,
  //   position: 'top',
  //   text: 'My text',
  //   textColor: '#ffffff'
  // }
}
```

```ts [Functions]
import {
  setSecondaryButtonParams,
  secondaryButtonBackgroundColor,
  secondaryButtonHasShineEffect,
  isSecondaryButtonVisible,
  isSecondaryButtonEnabled,
  isSecondaryButtonLoaderVisible,
  secondaryButtonState,
  secondaryButtonTextColor,
  secondaryButtonText,
  secondaryButtonPosition,
} from '@telegram-apps/sdk';

if (setSecondaryButtonParams.isAvailable()) {
  setSecondaryButtonParams({
    backgroundColor: '#000000',
    hasShineEffect: true,
    isEnabled: true,
    isLoaderVisible: true,
    isVisible: true,
    position: 'top',
    text: 'My text',
    textColor: '#ffffff'
  });
  secondaryButtonBackgroundColor(); // '#000000'
  secondaryButtonHasShineEffect(); // true
  isSecondaryButtonEnabled(); // true
  isSecondaryButtonLoaderVisible(); // true
  isSecondaryButtonVisible(); // true
  secondaryButtonPosition(); // 'top'
  secondaryButtonText(); // 'My text'
  secondaryButtonTextColor(); // '#ffffff'

  secondaryButtonState();
  // {
  //   backgroundColor: '#000000',
  //   hasShineEffect: true,
  //   isActive: true,
  //   isLoaderVisible: true,
  //   isVisible: true,
  //   position: 'top',
  //   text: 'My text',
  //   textColor: '#ffffff'
  // }
}
```

:::

## Tracking Click

To add a button click listener, use the `onClick` method. It returns a function to remove the bound
listener. Alternatively, you can use the `offClick` method.

::: code-group

```ts [Variable]
if (secondaryButton.onClick.isAvailable()) {
  function listener() {
    console.log('Clicked!');
  }

  const offClick = secondaryButton.onClick(listener);
  offClick();
  // or
  secondaryButton.onClick(listener);
  secondaryButton.offClick(listener);
}
```

```ts [Functions]
import {
  onSecondaryButtonClick,
  offSecondaryButtonClick,
} from '@telegram-apps/sdk';

if (onSecondaryButtonClick.isAvailable()) {
  function listener() {
    console.log('Clicked!');
  }

  const offClick = onSecondaryButtonClick(listener);
  offClick();
  // or
  onSecondaryButtonClick(listener);
  offSecondaryButtonClick(listener);
}
```

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/components/settings-button.md

```markdown
# Settings Button

The ðŸ’ [component](../scopes.md) responsible for the Telegram Mini
Apps [settings button](../../../../platform/settings-button.md).

## Checking Support

To check if the settings button supported by the current Telegram Mini Apps version, the
`isSupported` method is used:

::: code-group

```ts [Variable]
import { settingsButton } from '@telegram-apps/sdk';

settingsButton.isSupported(); // boolean
```

```ts [Functions]
import { isSettingsButtonSupported } from '@telegram-apps/sdk';

isSettingsButtonSupported(); // boolean
```

:::

## Mounting

Before using the component, it is necessary to mount it to work with properly configured properties.
To do so, use the `mount` method. It will update the `isMounted` signal property.

::: code-group

```ts [Variable]
import { settingsButton } from '@telegram-apps/sdk';

if (settingsButton.mount.isAvailable()) {
  settingsButton.mount();
  settingsButton.isMounted(); // true
}
```

```ts [Functions]
import {
  mountSettingsButton,
  isSettingsButtonMounted,
} from '@telegram-apps/sdk';

if (mountSettingsButton.isAvailable()) {
  mountSettingsButton();
  isSettingsButtonMounted(); // true
}
```

:::

To unmount, use the `unmount` method:

::: code-group

```ts [Variable]
settingsButton.unmount();
settingsButton.isMounted(); // false
```

```ts [Functions]
import { 
  unmountSettingsButton,
  isSettingsButtonMounted,
} from '@telegram-apps/sdk';

unmountSettingsButton();
isSettingsButtonMounted(); // false
```

:::

## Showing and Hiding

To change the button's visibility, use the `hide()` and `show()` methods. These methods update
the `isVisible` signal property value.

::: code-group

```ts [Variable]
if (settingsButton.show.isAvailable()) {
  settingsButton.show();
  settingsButton.isVisible(); // true
}

if (settingsButton.hide.isAvailable()) {
  settingsButton.hide();
  settingsButton.isVisible(); // false
}
```

```ts [Functions]
import {
  showSettingsButton,
  hideSettingsButton,
  isSettingsButtonVisible,
} from '@telegram-apps/sdk';

if (showSettingsButton.isAvailable()) {
  showSettingsButton();
  isSettingsButtonVisible(); // true
}

if (hideSettingsButton.isAvailable()) {
  hideSettingsButton();
  isSettingsButtonVisible(); // false
}
```

:::

## Tracking Click

To add a button click listener, use the `onClick` method. It returns a function to remove the bound
listener. Alternatively, you can use the `offClick` method.

::: code-group

```ts [Variable]
if (settingsButton.onClick.isAvailable()) {
  function listener() {
    console.log('Clicked!');
  }

  const offClick = settingsButton.onClick(listener);
  offClick();
  // or
  settingsButton.onClick(listener);
  settingsButton.offClick(listener);
}
```

```ts [Functions]
import {
  onSettingsButtonClick,
  offSettingsButtonClick,
} from '@telegram-apps/sdk';

if (onSettingsButtonClick.isAvailable()) {
  function listener() {
    console.log('Clicked!');
  }

  const offClick = onSettingsButtonClick(listener);
  offClick();
  // or
  onSettingsButtonClick(listener);
  offSettingsButtonClick(listener);
}
```

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/components/swipe-behavior.md

```markdown
# Swipe Behavior

The ðŸ’ [component](../scopes.md) responsible for the Telegram Mini Apps swipe behavior.

## Checking Support

To check if the swipe behavior supported by the current Telegram Mini Apps version, the
`isSupported` method is used:

::: code-group

```ts [Variable]
import { swipeBehavior } from '@telegram-apps/sdk';

swipeBehavior.isSupported(); // boolean
```

```ts [Functions]
import { isSwipeBehaviorSupported } from '@telegram-apps/sdk';

isSwipeBehaviorSupported(); // boolean
```

:::

## Mounting

Before using the component, it is necessary to mount it to work with properly configured properties.
To do so, use the `mount` method. It will update the `isMounted` signal property.

::: code-group

```ts [Variable]
import { swipeBehavior } from '@telegram-apps/sdk';

if (swipeBehavior.mount.isAvailable()) {
  swipeBehavior.mount();
  swipeBehavior.isMounted(); // true
}
```

```ts [Functions]
import {
  mountSwipeBehavior,
  isSwipeBehaviorMounted,
} from '@telegram-apps/sdk';

if (mountSwipeBehavior.isAvailable()) {
  mountSwipeBehavior();
  isSwipeBehaviorMounted(); // true
}
```

:::

To unmount, use the `unmount` method:

::: code-group

```ts [Variable]
swipeBehavior.unmount(); 
swipeBehavior.isMounted(); // false
```

```ts [Functions]
import {
  unmountClosingBehavior,
  isSwipeBehaviorMounted,
} from '@telegram-apps/sdk';

unmountSwipeBehavior(); 
isSwipeBehaviorMounted(); // false
```

:::

## Controlling Vertical Swipes

To enable or disable vertical swipes, use the `enableVertical` and `disableVertical` methods.
Calling these methods, update the `isVerticalEnabled` signal property value.

::: code-group

```ts [Variable]
if (swipeBehavior.enableVertical.isAvailable()) {
  swipeBehavior.enableVertical();
  swipeBehavior.isVerticalEnabled(); // true
}

if (swipeBehavior.disableVertical.isAvailable()) {
  swipeBehavior.disableVertical();
  swipeBehavior.isVerticalEnabled(); // false
}
```

```ts [Functions]
import {
  enableVerticalSwipes,
  disableVerticalSwipes,
  isVerticalSwipesEnabled,
} from '@telegram-apps/sdk';

if (enableVerticalSwipes.isAvailable()) {
  enableVerticalSwipes();
  isVerticalSwipesEnabled(); // true
}

if (disableVerticalSwipes.isAvailable()) {
  disableVerticalSwipes();
  isVerticalSwipesEnabled(); // false
}
```

:::
```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/components/theme-params.md

```markdown
# Theme Params

The ðŸ’ [component](../scopes.md) responsible for the Telegram Mini
Apps [theme parameters](../../../../platform/theming.md).

## Mounting

Before using the component, it must be mounted.

> [!TIP] Actual sync mount
> To mount the component, use the `mountSync` method. It will update the `isMounted` signal property.
>
> ::: code-group
>
> ```ts [Variable]
> import { themeParams } from '@telegram-apps/sdk';
> 
> if (themeParams.mountSync.isAvailable()) {
>   themeParams.mountSync();
>   themeParams.isMounted(); // true
> }
> ```
>
> ```ts [Functions]
> import { mountThemeParamsSync, isThemeParamsMounted } from '@telegram-apps/sdk';
> 
> if (mountThemeParamsSync.isAvailable()) {
>   mountThemeParamsSync();
>   isThemeParamsMounted(); // true
> }
> ```
>
> :::

> [!WARNING] Deprecated async mount
> This process is asynchronous, as theme parameters need to be requested from the Telegram application.
> The `isMounting` signal will be set to `true` during the process and updated to `false` when
> complete.
> 
> If mounting is successful, the `isMounted` signal will be set to `true`. If errors occur,
> the `mountError` signal will reflect the error.
> 
> ::: code-group
> 
> ```ts [Variable]
> if (themeParams.mount.isAvailable()) {
>   try {
>     const promise = themeParams.mount();
>     themeParams.isMounting(); // true
>     await promise;
>     themeParams.isMounting(); // false
>     themeParams.isMounted(); // true
>   } catch (err) {
>     themeParams.mountError(); // equals "err"
>     themeParams.isMounting(); // false
>     themeParams.isMounted(); // false
>   }
> }
> ```
> 
> ```ts [Functions]
> import {
>   mountThemeParams,
>   isThemeParamsMounting,
>   isThemeParamsMounted,
>   themeParamsMountError,
> } from '@telegram-apps/sdk';
> 
> if (mountThemeParams.isAvailable()) {
>   try {
>     const promise = mountThemeParams();
>     isThemeParamsMounting(); // true
>     await promise;
>     isThemeParamsMounting(); // false
>     isThemeParamsMounted(); // true
>   } catch (err) {
>     themeParamsMountError(); // equals "err"
>     isThemeParamsMounting(); // false
>     isThemeParamsMounted(); // false
>   }
> }
> ```
> 
> :::

To unmount, use the `unmount` method:

::: code-group

```ts [Variable]
themeParams.unmount(); 
themeParams.isMounted(); // false
```

```ts [Functions]
import {
  unmountThemeParams,
  isThemeParamsMounted,
} from '@telegram-apps/sdk';

unmountThemeParams();
isThemeParamsMounted(); // false
```

:::

## Binding CSS Variables

This scope allows its properties to be exposed via CSS variables.

To create new CSS variables, use the `bindCssVars` method. When called, it updates
the `isCssVarsBound` signal property.

This method optionally accepts a function that receives a theme palette key in camel case format and
returns a CSS variable name. By default, the method transforms the palette key using these rules:

- Converts the value to kebab case.
- Prepends the `--tg-theme-` prefix.

::: code-group

```ts [Variable]
if (themeParams.bindCssVars.isAvailable()) {
  themeParams.bindCssVars();
  // Creates CSS variables like:
  // --tg-theme-button-color: #aabbcc
  // --tg-theme-accent-text-color: #aabbcc
  // --tg-theme-bg-color: #aabbcc
  // ...

  themeParams.bindCssVars(key => `--my-prefix-${key}`);
  // Creates CSS variables like:
  // --my-prefix-buttonColor: #aabbcc
  // --my-prefix-accentTextColor: #aabbcc
  // --my-prefix-bgColor: #aabbcc
  // ...

  // themeParams.isCssVarsBound() -> true
}
```

```ts [Functions]
import {
  bindThemeParamsCssVars,
  isThemeParamsCssVarsBound,
} from '@telegram-apps/sdk';

if (bindThemeParamsCssVars.isAvailable()) {
  bindThemeParamsCssVars();
  // Creates CSS variables like:
  // --tg-theme-button-color: #aabbcc
  // --tg-theme-accent-text-color: #aabbcc
  // --tg-theme-bg-color: #aabbcc
  // ...

  bindThemeParamsCssVars(key => `--my-prefix-${key}`);
  // Creates CSS variables like:
  // --my-prefix-buttonColor: #aabbcc
  // --my-prefix-accentTextColor: #aabbcc
  // --my-prefix-bgColor: #aabbcc
  // ...
  
  // isThemeParamsCssVarsBound() -> true
}
```

:::

## Properties

::: code-group

```ts [Variable]
themeParams.accentTextColor(); // RGB | undefined
themeParams.backgroundColor(); // RGB | undefined
themeParams.buttonTextColor(); // RGB | undefined
themeParams.buttonColor(); // RGB | undefined
themeParams.destructiveTextColor(); // RGB | undefined
themeParams.headerBackgroundColor(); // RGB | undefined
themeParams.hintColor(); // RGB | undefined
themeParams.linkColor(); // RGB | undefined
themeParams.subtitleTextColor(); // RGB | undefined
themeParams.sectionBackgroundColor(); // RGB | undefined
themeParams.secondaryBackgroundColor(); // RGB | undefined
themeParams.sectionSeparatorColor(); // RGB | undefined
themeParams.sectionHeaderTextColor(); // RGB | undefined
themeParams.textColor(); // RGB | undefined

themeParams.state(); // Record<string, RGB>;
```

```ts [Functions]
import {
  themeParamsAccentTextColor,
  themeParamsBackgroundColor,
  themeParamsButtonTextColor,
  themeParamsButtonColor,
  themeParamsDestructiveTextColor,
  themeParamsHeaderBackgroundColor,
  themeParamsHintColor,
  themeParamsLinkColor,
  themeParamsSubtitleTextColor,
  themeParamsSectionBackgroundColor,
  themeParamsSecondaryBackgroundColor,
  themeParamsSectionSeparatorColor,
  themeParamsSectionHeaderTextColor,
  themeParamsTextColor,
  themeParamsState,
} from '@telegram-apps/sdk';

themeParamsAccentTextColor(); // RGB | undefined
themeParamsBackgroundColor(); // RGB | undefined
themeParamsButtonTextColor(); // RGB | undefined
themeParamsButtonColor(); // RGB | undefined
themeParamsDestructiveTextColor(); // RGB | undefined
themeParamsHeaderBackgroundColor(); // RGB | undefined
themeParamsHintColor(); // RGB | undefined
themeParamsLinkColor(); // RGB | undefined
themeParamsSubtitleTextColor(); // RGB | undefined
themeParamsSectionBackgroundColor(); // RGB | undefined
themeParamsSecondaryBackgroundColor(); // RGB | undefined
themeParamsSectionSeparatorColor(); // RGB | undefined
themeParamsSectionHeaderTextColor(); // RGB | undefined
themeParamsTextColor(); // RGB | undefined

themeParamsState(); // Record<string, RGB>;
```

:::
```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/components/viewport.md

```markdown
# Viewport

The ðŸ’ [component](../scopes.md) responsible for the Telegram Mini
Apps [viewport](../../../../platform/viewport.md).

## Mounting

Before using the component, it must be mounted.

This process is asynchronous, as viewport information needs to be requested from the Telegram
application. The `isMounting` signal will be set to `true` during the process and updated to `false`
when complete.

If mounting is successful, the `isMounted` signal will be set to `true`. If errors occur,
the `mountError` signal will reflect the error.

::: code-group

```ts [Variable]
if (viewport.mount.isAvailable()) {
  try {
    const promise = viewport.mount();
    viewport.isMounting(); // true
    await promise;
    viewport.isMounting(); // false
    viewport.isMounted(); // true
  } catch (err) {
    viewport.mountError(); // equals "err"
    viewport.isMounting(); // false
    viewport.isMounted(); // false
  }
}
```

```ts [Functions]
import {
  mountViewport,
  isViewportMounting,
  isViewportMounted,
  viewportMountError,
} from '@telegram-apps/sdk';

if (mountViewport.isAvailable()) {
  try {
    const promise = mountViewport();
    isViewportMounting(); // true
    await promise;
    isViewportMounting(); // false
    isViewportMounted(); // true
  } catch (err) {
    viewportMountError(); // equals "err"
    isViewportMounting(); // false
    isViewportMounted(); // false
  }
}
```

:::

To unmount, use the `unmount` method:

::: code-group

```ts [Variable]
viewport.unmount();
viewport.isMounted(); // false
```

```ts [Functions]
import {
  unmountViewport,
  isViewportMounted,
} from '@telegram-apps/sdk';

unmountViewport();
isViewportMounted(); // false
```

:::

## Binding CSS Variables

To expose the `viewport` properties via CSS variables, use the `bindCssVars` method.
The `isCssVarsBound` signal property is updated after the method is called.

This method optionally accepts a function that transforms the values `width`, `height`
and `stableHeight` into CSS variable names. By default, values are converted to kebab case with the
prefix `--tg-viewport-`.

::: code-group

```ts [Variable]
import { viewport } from '@telegram-apps/sdk';

if (viewport.bindCssVars.isAvailable()) {
  viewport.bindCssVars();
  // Creates CSS variables like:
  // --tg-viewport-height: 675px
  // --tg-viewport-width: 320px
  // --tg-viewport-stable-height: 675px

  viewport.bindCssVars(key => `--my-prefix-${key}`);
  // Creates CSS variables like:
  // --my-prefix-height: 675px
  // --my-prefix-width: 320px
  // --my-prefix-stableHeight: 675px

  viewport.isCssVarsBound(); // true
}
```

```ts [Functions]
import {
  bindViewportCssVars,
  isViewportCssVarsBound,
} from '@telegram-apps/sdk';

if (bindViewportCssVars.isAvailable()) {
  bindViewportCssVars();
  // Creates CSS variables like:
  // --tg-viewport-height: 675px
  // --tg-viewport-width: 320px
  // --tg-viewport-stable-height: 675px

  bindViewportCssVars(key => `--my-prefix-${key}`);
  // Creates CSS variables like:
  // --my-prefix-height: 675px
  // --my-prefix-width: 320px
  // --my-prefix-stableHeight: 675px

  isViewportCssVarsBound(); // true
}
```

:::

## Expanding

To expand the viewport, use the `expand` method.

::: code-group

```ts [Variable]
if (viewport.expand.isAvailable()) {
  viewport.expand();
}
```

```ts [Functions]
import { expandViewport } from '@telegram-apps/sdk';

if (expandViewport.isAvailable()) {
  expandViewport();
}
```

:::

## Fullscreen Mode

To enable the fullscreen mode, the method `requestFullscreen` is used:

::: code-group

```ts [Variable]
if (viewport.requestFullscreen.isAvailable()) {
  await viewport.requestFullscreen();
  viewport.isFullscreen(); // true
}
```

```ts [Functions]
import { requestFullscreen, isFullscreen } from '@telegram-apps/sdk';

if (requestFullscreen.isAvailable()) {
  await requestFullscreen();
  isFullscreen(); // true
}
```

:::

To exit the fullscreen mode, use the `exitFullscreen` method:

::: code-group

```ts [Variable]
if (viewport.exitFullscreen.isAvailable()) {
  await viewport.exitFullscreen();
  viewport.isFullscreen(); // false
}
```

```ts [Functions]
import { exitFullscreen, isFullscreen } from '@telegram-apps/sdk';

if (exitFullscreen.isAvailable()) {
  await exitFullscreen();
  isFullscreen(); // false
}
```

:::

## Safe Area Insets

The viewport component offers access to two types of insets:

- **Safe area insets**
- **Content safe area insets**

For more details on the differences between these inset types, visit the
[**Viewport**](../../../../platform/viewport.md) page.

The component provides access to these insets through the following signals:

::: code-group

```ts [Variable]
// Objects with numeric properties "top", "bottom", "left" and "right".
viewport.safeAreaInsets();
viewport.contentSafeAreaInsets();

// Numeric values.
viewport.safeAreaInsetTop();
viewport.safeAreaInsetBottom();
viewport.safeAreaInsetLeft();
viewport.safeAreaInsetRight();
viewport.contentSafeAreaInsetTop();
viewport.contentSafeAreaInsetBottom();
viewport.contentSafeAreaInsetLeft();
viewport.contentSafeAreaInsetRight();
```

```ts [Functions]
import {
  viewportSafeAreaInsets,
  viewportSafeAreaInsetTop,
  viewportSafeAreaInsetBottom,
  viewportSafeAreaInsetLeft,
  viewportSafeAreaInsetRight,
  viewportContentSafeAreaInsets,
  viewportContentSafeAreaInsetTop,
  viewportContentSafeAreaInsetBottom,
  viewportContentSafeAreaInsetLeft,
  viewportContentSafeAreaInsetRight,
} from '@telegram-apps/sdk';

// Objects with numeric properties "top", "bottom", "left" and "right".
viewportSafeAreaInsets();
viewportContentSafeAreaInsets();

// Numeric values.
viewportSafeAreaInsetTop();
viewportSafeAreaInsetBottom();
viewportSafeAreaInsetLeft();
viewportSafeAreaInsetRight();
viewportContentSafeAreaInsetTop();
viewportContentSafeAreaInsetBottom();
viewportContentSafeAreaInsetLeft();
viewportContentSafeAreaInsetRight();
```

:::
```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/utils/emoji-status.md

```markdown
# Emoji Status

## `requestEmojiStatusAccess`

To request access to user emoji status update, use the `requestEmojiStatusAccess` function:

::: code-group

```ts [Using isAvailable]
import { requestEmojiStatusAccess } from '@telegram-apps/sdk';

if (requestEmojiStatusAccess.isAvailable()) {
  const status = await requestEmojiStatusAccess();
}
```

```ts [Using ifAvailable]
import { requestEmojiStatusAccess } from '@telegram-apps/sdk';

const result = requestEmojiStatusAccess.ifAvailable();
if (result[0]) {
  const status = await result[1];
}
```

:::

## `setEmojiStatus`

To set an emoji status on user's behalf, use the `setEmojiStatus` function.

As the first argument, it accepts a custom emoji id. Optionally, you can pass the second
argument determining for how many seconds the status must be set.

::: code-group

```ts [Using isAvailable]
import { setEmojiStatus } from '@telegram-apps/sdk';

if (setEmojiStatus.isAvailable()) {
  // Set for unlimited period of time.
  await setEmojiStatus('5361800828313167608');

  // Set for 1 day.
  await setEmojiStatus('5361800828313167608', 86400);
}
```

```ts [Using ifAvailable]
import { setEmojiStatus } from '@telegram-apps/sdk';

// Set for unlimited period of time.
const foo = setEmojiStatus.ifAvailable('5361800828313167608');
foo[0] && await foo[1];

// Set for 1 day.
const bar = await setEmojiStatus.ifAvailable('5361800828313167608', 86400);
bar[0] && await bar[1];
```

:::
```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/utils/home-screen.md

```markdown
# Home Screen

## `addToHomeScreen`

To prompt the user to add the Mini App to the home screen, use the `addToHomeScreen` function.

::: code-group

```ts [Using isAvailable]
import { addToHomeScreen } from '@telegram-apps/sdk';

if (addToHomeScreen.isAvailable()) {
  addToHomeScreen();
}
```

```ts [Using ifAvailable]
import { addToHomeScreen } from '@telegram-apps/sdk';

addToHomeScreen.ifAvailable();
```

:::

To track whether the current Mini App is added to the device's home screen, use
the `onAddedToHomeScreen` and `offAddedToHomeScreen` functions:

```ts
import {
  onAddedToHomeScreen,
  onAddToHomeScreenFailed,
  offAddedToHomeScreen,
  offAddToHomeScreenFailed,
} from '@telegram-apps/sdk';

function onAdded() {
  console.log('Added');
}

onAddedToHomeScreen(onAdded);
offAddedToHomeScreen(onAdded);

function onFailed() {
  console.log('User declined the request');
}

onAddToHomeScreenFailed(onFailed);
offAddToHomeScreenFailed(onFailed);
```

> [!NOTE]  
> If the device cannot determine the installation status, the corresponding event may not be
> received even if the icon has been added.

## `checkHomeScreenStatus`

The `checkHomeScreenStatus` function checks if the user has already added the Mini App to the
device's home screen.

```ts
import { checkHomeScreenStatus } from '@telegram-apps/sdk';

if (checkHomeScreenStatus.isAvailable()) {
  checkHomeScreenStatus().then(status => {
    console.log(status);
  });
}
```

```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/utils/links.md

```markdown
# Links

## `openLink`

To open a link in an external browser or using [Instant View](https://instantview.telegram.org/),
use the `openLink` method. You can also pass an optional second argument, an object with optional
properties `tryBrowser: OpenLinkBrowser (string)` and `tryInstantView: boolean`.

::: code-group

```ts [Using isAvailable]
import { openLink } from '@telegram-apps/sdk';

if (openLink.isAvailable()) {
  openLink('https://telegram.org', {
    tryBrowser: 'chrome',
    tryInstantView: true,
  });
}
```

```ts [Using ifAvailable]
import { openLink } from '@telegram-apps/sdk';

openLink.ifAvailable('https://telegram.org', {
  tryBrowser: 'chrome',
  tryInstantView: true,
});
```

:::

## `openTelegramLink`

To open a Telegram link with predefined behavior, use the `openTelegramLink` method. This method
allows you to apply the native behavior as described in
the [Deep Links](https://core.telegram.org/api/links) documentation.

::: code-group

```ts [Using isAvailable]
import { openTelegramLink } from '@telegram-apps/sdk';

if (openTelegramLink.isAvailable()) {
  openTelegramLink('https://t.me/heyqbnk');
}
```

```ts [Using ifAvailable]
import { openTelegramLink } from '@telegram-apps/sdk';

openTelegramLink.ifAvailable('https://t.me/heyqbnk');
```

:::

## `shareURL`

To share a URL with another user, channel, or group, use the `shareURL` method.

::: code-group

```ts [Using isAvailable]
import { shareURL } from '@telegram-apps/sdk';

if (shareURL.isAvailable()) {
  shareURL('https://t.me/heyqbnk', 'Check out this cool group!');
}
```

```ts [Using ifAvailable]
import { shareURL } from '@telegram-apps/sdk';

shareURL.ifAvailable(
  'https://t.me/heyqbnk', 
  'Check out this cool group!',
);
```

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/utils/privacy.md

```markdown
# Privacy

## `requestPhoneAccess`

To request access to a user's phone information, use the `requestPhoneAccess` method. If the user
grants access, the developer's bot will receive the phone details.

::: code-group

```ts [Using isAvailable]
import { requestPhoneAccess } from '@telegram-apps/sdk';

if (requestPhoneAccess.isAvailable()) {
  const status = await requestPhoneAccess();
  // status will be 'sent' | 'cancelled' | string
}
```

```ts [Using ifAvailable]
import { requestPhoneAccess } from '@telegram-apps/sdk';

const result = requestPhoneAccess.ifAvailable();
if (result[0]) {
  // status will be 'sent' | 'cancelled' | string | undefined
  const status = await result[1];
}
```

:::

## `requestWriteAccess`

To request permission to send messages to the user, use the `requestWriteAccess` method.

::: code-group

```ts [Using isAvailable]
import { requestWriteAccess } from '@telegram-apps/sdk';

if (requestWriteAccess.isAvailable()) {
  const status = await requestWriteAccess();
  // status will be 'allowed' | string
}
```

```ts [Using ifAvailable]
import { requestWriteAccess } from '@telegram-apps/sdk';

const result = requestWriteAccess.ifAvailable();
if (result[0]) {
  // status will be 'allowed' | string | undefined
  const status = await result[1];
}
```

:::

## `requestContact`

To retrieve a user's contact information, use the `requestContact` method.

::: code-group

```ts [Using isAvailable]
import { requestContact } from '@telegram-apps/sdk';

if (requestContact.isAvailable()) {
  const contact = await requestContact();
  // {
  //   contact: {
  //     user_id: 1,
  //     phone_number: '+987654321',
  //     first_name: 'Vladislav',
  //     last_name: 'Kibenko'
  //   },
  //   auth_date: Date(12345678),
  //   hash: 'abcdefgh'
  // };
}
```

```ts [Using ifAvailable]
import { requestContact } from '@telegram-apps/sdk';

const result = requestContact.ifAvailable();
if (result[0]) {
  const contact = await result[1];
  // {
  //   contact: {
  //     userId: 1,
  //     phoneNumber: '+987654321',
  //     firstName: 'Vladislav',
  //     lastName: 'Kibenko'
  //   },
  //   authDate: Date(12345678),
  //   hash: 'abcdefgh'
  // };
}
```

:::

## `requestContactComplete`

This function works the same as [requestContactComplete](#requestContactComplete), but it also returns a raw
representation of the contact data from the Telegram client, so its signature could be verified.

::: code-group

```ts [Using isAvailable]
import { requestContactComplete } from '@telegram-apps/sdk';

if (requestContactComplete.isAvailable()) {
  const contact = await requestContactComplete();
  // {
  //   raw: 'contact=...&auth_date=...&hash=...',
  //   contact: { ... }
  // }
}
```

```ts [Using ifAvailable]
import { requestContact } from '@telegram-apps/sdk';

const result = requestContact.ifAvailable();
if (result[0]) {
  const contact = await result[1];
  // {
  //   raw: 'contact=...&auth_date=...&hash=...',
  //   contact: { ... }
  // }
}
```

:::
```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/utils/uncategorized.md

```markdown
# Uncategorized

## `copyTextToClipboard`

Copies specified text to the clipboard using all known methods.

```ts
import { copyTextToClipboard } from '@telegram-apps/sdk';

await copyTextToClipboard('My text goes here');
```

## `downloadFile`

To request file download, use the `downloadFile` function. It accepts a file URL and its proposed saved name.

::: code-group

```ts [Using isAvailable]
import { downloadFile } from '@telegram-apps/sdk';

if (downloadFile.isAvailable()) {
  await downloadFile(
    'https://telegram.org/js/telegram-web-app.js',
    'telegram-sdk.js',
  );
}
```

```ts [Using ifAvailable]
import { downloadFile } from '@telegram-apps/sdk';

const foo = downloadFile.ifAvailable(
  'https://telegram.org/js/telegram-web-app.js',
  'telegram-sdk.js',
);
foo[0] && await foo[1];
```

:::

## `getCurrentTime`

To retrieve the current Telegram server time, use the `getCurrentTime` function. It returns
a JavaScript `Date` object.

::: code-group

```ts [Using isAvailable]
import { getCurrentTime } from '@telegram-apps/sdk';

if (getCurrentTime.isAvailable()) {
  const time = await getCurrentTime(); // Date
}
```

```ts [Using ifAvailable]
import { getCurrentTime } from '@telegram-apps/sdk';

const result = getCurrentTime.ifAvailable();
if (result[0]) {
  const date = await result[1];
}
```

:::

## `hideKeyboard`

To hide the on-screen keyboard, use the `hideKeyboard` function.

::: code-group

```ts [Using isAvailable]
import { hideKeyboard } from '@telegram-apps/sdk';

if (hideKeyboard.isAvailable()) {
  hideKeyboard();
}
```

```ts [Using ifAvailable]
import { hideKeyboard } from '@telegram-apps/sdk';

hideKeyboard.ifAvailable();
```

:::

## `readTextFromClipboard`

To read text from the clipboard, use the `readTextFromClipboard` function.

::: code-group

```ts [Using isAvailable]
import { readTextFromClipboard } from '@telegram-apps/sdk';

if (readTextFromClipboard.isAvailable()) {
  const contents = await readTextFromClipboard(); // string | null
}
```

```ts [Using ifAvailable]
import { readTextFromClipboard } from '@telegram-apps/sdk';

const result = readTextFromClipboard.ifAvailable();
if (result[0]) {
  // string | null | undefined
  const contents = await result[1];
}
```

:::

## `retrieveAndroidDeviceData`

Retrieves [Android device data](https://core.telegram.org/bots/webapps#additional-data-in-user-agent) from the
`navigator.userAgent`.

The function always returns an object describing the Android device data with all keys marked as optional.

```ts
import { retrieveAndroidDeviceData } from '@telegram-apps/sdk';

const data = retrieveAndroidDeviceData();
// Example complete output:
// {
//   manufacturer: 'Samsung',
//   performanceClass: 'AVERAGE',
//   model: 'SM-A155F',
//   androidVersion: '14',
//   sdkVersion: 34,
// }
```

## `retrieveAndroidDeviceDataFrom`

This function works the same as [retrieveAndroidDeviceData](#retrieveandroiddevicedata), but allows passing a custom
value to parse.

```ts
import { retrieveAndroidDeviceDataFrom } from '@telegram-apps/sdk';

const data = retrieveAndroidDeviceDataFrom(navigator.userAgent);
// Example complete output:
// {
//   manufacturer: 'Samsung',
//   performanceClass: 'AVERAGE',
//   model: 'SM-A155F',
//   androidVersion: '14',
//   sdkVersion: 34,
// }
```

## `shareStory`

The `shareStory` method opens the native story editor.

It has one required parameter: a media URL that will be used as the background for the story.

::: code-group

```ts [Using isAvailable]
import { shareStory } from '@telegram-apps/sdk';

if (shareStory.isAvailable()) {
  shareStory('https://my.media/background.png');
}
```

```ts [Using ifAvailable]
import { shareStory } from '@telegram-apps/sdk';

shareStory.ifAvailable('https://my.media/background.png');
```

:::

The function optionally accepts an object with additional options:

- `text?: string` - a caption to add to the media, with a limit of 0-200 characters for regular
  users, and 0-2048 characters
  for [premium subscribers](https://telegram.org/faq_premium#telegram-premium).
- `widgetLink?: object` - an object for including a widget link in the story.
  Only [premium subscribers](https://telegram.org/faq_premium#telegram-premium) can post stories
  with links.
  - `url: string` - the URL to be included in the story.
  - `name?: string` - the display name for the widget link (0-48 characters).

```ts
shareStory('https://my.media/background.png', {
  text: 'Today was a good day. Love it! Thanks to this public!',
  widgetLink: {
    url: 'https://t.me/heyqbnk',
    name: 'heyqbnk public group',
  },
});
```

## `sendData`

To send data to the bot, use the `sendData` function. This function sends a service message to the
bot and closes the Mini App.

::: code-group

```ts [Using isAvailable]
import { sendData } from '@telegram-apps/sdk';

if (sendData.isAvailable()) {
  sendData('my-data-goes-here');
}
```

```ts [Using ifAvailable]
import { sendData } from '@telegram-apps/sdk';

sendData.ifAvailable('my-data-goes-here');
```

:::

> [!TIP]
> This function sends data up to 4096 bytes to the bot and is available for Mini Apps launched via a
> Keyboard button.

> [!WARNING]
> This function is only accessible for Mini Apps started through a Keyboard button. See
> the `web_app_data` field in the [Message](https://core.telegram.org/bots/api#message) class for
> more details.

## `shareMessage`

To share a prepared by your server message, use the `shareMessage` function. It opens a dialog
allowing the user to share a message provided by the bot.

::: code-group

```ts [Using isAvailable]
import { shareMessage } from '@telegram-apps/sdk';

if (shareMessage.isAvailable()) {
  await shareMessage('my message id');
}
```

```ts [Using ifAvailable]
import { shareMessage } from '@telegram-apps/sdk';

shareMessage.ifAvailable('my message id');
```

:::

The value passed to the function is a message identifier returned by
the [savePreparedInlineMessage](https://core.telegram.org/bots/api#savepreparedinlinemessage)
Telegram Bot API method.

## `switchInlineQuery`

To create a message prefixed with the bot username and a specific text, and share it in another
chat, use the `switchInlineQuery` method. You can use the second optional argument to specify which
chat types can be selected to send the message.

::: code-group

```ts [Using isAvailable]
import { switchInlineQuery } from '@telegram-apps/sdk';

if (switchInlineQuery.isAvailable()) {
  switchInlineQuery('Check this bot!', [
    'users',
    'bots',
    'groups',
    'channels',
  ]);
}
```

```ts [Using ifAvailable]
import { switchInlineQuery } from '@telegram-apps/sdk';

switchInlineQuery.ifAvailable('Check this bot!', [
  'users',
  'bots',
  'groups',
  'channels',
]);
```

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/initializing.md

```markdown
# Initializing

As long as the SDK uses some internal global dependencies, before using it, the package must be
configured. Not doing it, most package functions will not work at all and will throw a
corresponding error.

To initialize the SDK, the package provides the `init` function, which accepts an object
with the following structure:

```ts
interface Options {
  /**
   * True if SDK should accept styles sent from the Telegram application.
   * @default true
   */
  acceptCustomStyles?: boolean;
  /**
   * Launch parameters used across the package.
   * @default Being extracted using the `retrieveLaunchParams` function.
   * @see retrieveLaunchParams
   */
  launchParams?:
    & Omit<LaunchParamsLike, 'tgWebAppThemeParams'>
    & Partial<Pick<LaunchParamsLike, 'tgWebAppThemeParams'>>;
  /**
   * Custom postEvent function.
   * @default The `createPostEvent` function will be used with the version, specified in
   * the `launchParams` option.
   * @see createPostEvent
   */
  postEvent?: PostEventFn;
}
```

In most scenarios, a developer does not need to use these options.

By calling this function, the package's global dependencies will be configured, and the package
becomes ready to use.

```ts
import { init } from '@telegram-apps/sdk';

init();
```
```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/migrate-v2-v3.md

```markdown
# Migrating from v2 to v3

Since the package mostly re-exports from [@telegram-apps/bridge](../../telegram-apps-bridge/2-x.md), we recommend
reviewing its own [migration guide](../../telegram-apps-bridge/2-x/migrate-v1-v2.md) first.

This document outlines the migration steps from version 2 to version 3 of the `@telegram-apps/sdk` package.

## Changes to `ThemeParams` and `MiniApp` Mounting

In v3, the mounting process for both `ThemeParams` and `MiniApp` was unintentionally made asynchronous. This means
calling their `mount` methods now returns a promise. Since `MiniApp` mounts `ThemeParams` internally, you should **not
mount both simultaneously**.

To avoid potential issues, you can use the synchronous alternative `mountSync`, which safely mounts both components in
any order.

:::code-group

```ts [v2]
import { themeParams, miniApp } from '@telegram-apps/bridge';

themeParams.mount();
miniApp.mount();
```

```ts [v3]
import { themeParams, miniApp } from '@telegram-apps/bridge';

// If ThemeParams is required.
await themeParams.mount();

// Or if MiniApp is required.
await miniApp.mount();

// Avoid this â€” it may cause issues.
await Promise.all([themeParams.mount(), miniApp.mount()]);
```

```ts [v3 sync]
import { themeParams, miniApp } from '@telegram-apps/bridge';

// Safe to call in any order.
themeParams.mountSync();
miniApp.mountSync();
```

:::

## Changes to `requestContact`

The function now returns data with the fields that were originally presented in response from the Telegram
client (camelCased).

:::code-group

```ts [v2]
import { requestContact } from '@telegram-apps/sdk';

if (requestContact.isAvailable()) {
  const contact = await requestContact();
  // {
  //   contact: {
  //     userId: 1,
  //     phoneNumber: '+987654321',
  //     firstName: 'Vladislav',
  //     lastName: 'Kibenko'
  //   },
  //   authDate: Date(12345678),
  //   hash: 'abcdefgh'
  // };
}
```

```ts [v3]
import { requestContact } from '@telegram-apps/sdk';

if (requestContact.isAvailable()) {
  const contact = await requestContact();
  // {
  //   contact: {
  //     user_id: 1,
  //     phone_number: '+987654321',
  //     first_name: 'Vladislav',
  //     last_name: 'Kibenko'
  //   },
  //   auth_date: Date(12345678),
  //   hash: 'abcdefgh'
  // };
}
```

:::

## Changes to `*.ifAvailable()`

The method now returns a tuple, having `false` on the first place if the call is unavailable, and `true` with a
call result, if the function is available.

:::code-group

```ts [v2]
import { requestContact } from '@telegram-apps/sdk';

const result = requestContact.ifAvailable();
// Result will either be a Promise with the contact data or undefined.
```

```ts [v3]
import { requestContact } from '@telegram-apps/sdk';

const result = requestContact.ifAvailable();
// Result will be one of the following:
// [false]
// [true, Promise<...>]
```

:::
```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/scopes.md

```markdown
---
outline: [ 2, 3 ]
---

# Scopes

This package is designed to give developers full control over its lifecycle, including the
initialization process. Therefore, there are no pre-initialized global scopes available for use;
developers must configure the scopes themselves.

By *scope*, we refer to a collection of related functionality grouped into a single entity. Examples
of scopes include `backButton` and `mainButton`. This design makes the SDK more intuitive and
efficient to use.

It's important to note that scopes are provided in the following forms:

ðŸ’ **Components**. They are exported as both a variable and a set of functions simultaneously.
For instance, developers can work with the exported `backButton` variable or
its alternative function set: `showBackButton`, `mountBackButton`, etc.

âš™ï¸**Utilities**. They are exported as a set of functions. These scopes are abstract and not grouped
into a single variable. Examples include `openLink`, `shareURL`, etc.

Effectively, exported variables are simply compositions of the same exported functions.
So, `backButton.isMounted` and `isBackButtonMounted` are essentially the same entity.

Here's an example:

```ts
import {
  backButton,
  hideBackButton,
  isBackButtonVisible,
} from '@telegram-apps/sdk';

isBackButtonVisible(); // false

backButton.show();
// backButton.isVisible and isBackButtonVisible are the same 
// entity (signal). We can say the same about backButton.show 
// and showBackButton.
//
// backButton.isVisible() -> true
// isBackButtonVisible() -> true

hideBackButton();
// backButton.isVisible() -> false
// isBackButtonVisible() -> false
```

The key difference here lies in the final bundle size. Internally, the `backButton` export is
handled through the following code:

```ts
export * as backButton from 'somewhere';
```

When not using the package source code while building the application, the bundler is more likely to
make `backButton` a non-treeshakeable object. As a result, all dependencies from `somewhere` will be
bundled, slightly increasing the final bundle size (though not by much).

## Usage Prerequisites

Each SDK method related to ðŸ’ components or âš™ï¸utilities has at least two requirements:

1. **The SDK must be [initialized](./initializing.md)**. This ensures that you are using valid
   global dependencies (such as `postEvent`).

```ts
import { init } from '@telegram-apps/sdk';

init();
```

2. **The method must be run inside Telegram Mini Apps**. Calling the method outside Telegram Mini
   Apps will not produce the expected behavior.

For component-related methods, there is an additional requirement:

3. **The parent component must be mounted**. This ensures that you are using a properly configured
   component.

```ts
import { init, backButton } from '@telegram-apps/sdk';

// Initialize the SDK.
init();

// Mount the Back Button component.
backButton.mount();
```

When all requirements are met, the method call becomes safe.

### Methods Availability

To check if a method is safe to call (available), use the `isAvailable()` signal:

```ts
import { backButton } from '@telegram-apps/sdk';

if (backButton.show.isAvailable()) {
  backButton.show();
}
```

This signal performs all checks described in the [Usage Prerequisites](#usage-prerequisites) section
and returns `true` if the current state satisfies them.

As an alternative, you may find the `ifAvailable(...args)` method useful. It calls the original
function with the provided arguments only if it is available (`isAvailable()` returns `true`):

```ts
import { backButton } from '@telegram-apps/sdk';

backButton.show.ifAvailable();
```

In case the original method (`backButton.show` in this case) is unavailable, the `ifAvailable`
method call will return a tuple with `false` value. Otherwise `[true, *result*]` will be received.

## Optimizing Bundle

> [!TIP]
> The SDK works efficiently out of the box, so there is generally no need to follow the
> optimizations described in this section. However, these guidelines can be helpful if you want to
> maximize the package's efficiency in specific scenarios.

Letâ€™s look at how we can use the package more efficiently:

- Using functions exclusively allows the bundler to tree-shake unused scope code.

```ts
import { showBackButton, backButton } from '@telegram-apps/sdk';

showBackButton();
// Only showBackButton's source code will be bundled.

backButton.show();
// All backButton dependencies will be bundled, even 
// if not used in the code: backButton.show(), 
// backButton.hide(), backButton.isVisible(), etc.
```

- Configure the bundler to use the source code instead of the built version.

```ts
import { backButton } from '@telegram-apps/sdk';

backButton.show();
// Only backButton.show's source code will be bundled 
// because the bundler is smart enough to understand 
// that backButton.show is just the showBackButton 
// function, so only its source code is bundled.
```

Here's an example of a Vite config using the `resolve` option:

```ts
import { defineConfig } from 'vite';
import { resolve } from 'node:path';

export default defineConfig({
  resolve: {
    alias: {
      '@telegram-apps/sdk': resolve('node_modules/@telegram-apps/sdk/src'),
    },
  },
});
```

```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x/usage-tips.md

```markdown
# Usage Tips

## Avoid Using With Telegram SDK

Telegram provides a file `telegram-web-app.js`. When using `@telegram-apps/sdk`, you must avoid
using it alongside the SDK provided by Telegram. This is because both packages use the same
communication channel for transmitting events and calling methods.

> [!DANGER] What if I use both packages?
> In this case, some of these packages will not receive events sent from the native Telegram
> application, which will surely lead to bugs.

## Installing the SDK

Before installing the package, it is important to understand what specifically must be installed.
This depends on the technologies you are planning to use.

If your core library is one of the following, you should install a package specific to your main
library instead of `@telegram-apps/sdk`:

- React: [@telegram-apps/sdk-react](../../telegram-apps-sdk-react/3-x.md)
- Vue: [@telegram-apps/sdk-vue](../../telegram-apps-sdk-vue/2-x.md)
- Svelte: [@telegram-apps/sdk-svelte](../../telegram-apps-sdk-svelte/2-x.md)

For example, if your main library is React, you should install `@telegram-apps/sdk-react` instead
of `@telegram-apps/sdk`.

Here is the command to install the package:

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/sdk-react
```

```bash [npm]
npm i @telegram-apps/sdk-react
```

```bash [yarn]
yarn add @telegram-apps/sdk-react
```

:::

If your main library is not on the list specified above or if you prefer a pure TypeScript solution,
install the `@telegram-apps/sdk` package:

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/sdk
```

```bash [npm]
npm i @telegram-apps/sdk
```

```bash [yarn]
yarn add @telegram-apps/sdk
```

:::

> [!DANGER] Avoid installing both packages
> Installing both `@telegram-apps/sdk` and `@telegram-apps/sdk-react` (for example) may lead to bugs
> due to SDK package duplication, resulting in incorrect application behavior.

> [!TIP] Start with @telegram-apps/create-mini-app
> To avoid potential issues with bootstrapping your project, consider using the
> [@telegram-apps/create-mini-app](../../telegram-apps-create-mini-app.md) package. This will
> quickly generate a properly configured application for you.

## Initialize the SDK

The SDK provides a list of components that might seem ready to use once imported, but this is only
partially true.

Itâ€™s important to understand that the SDK does not have any side effects. To avoid various issues,
it doesnâ€™t perform operations automatically upon import. Instead, you need to initialize it
manually.

By default, the SDK is uninitialized and not ready for use. All components remain unmounted. To
initialize the SDK and unlock not only the componentsâ€™ `mount` method but also other
non-component-related methods, you **must** use the `init` function.

```ts
import { init } from '@telegram-apps/sdk';

init();
```

After calling this, it is now safe to mount any components you wish to use in your application.

## Mount Used Components

In the previous section, we initialized the SDK, allowing us to use components.

Before using specific components in your application, you must mount them. Not mounting components
will cause their methods to throw errors. For example, the following code will cause issues:

```ts
import { init, backButton } from '@telegram-apps/sdk';

// Initialize the SDK.
init();

// Attempt to show the Back Button.
backButton.show();
// Error: The backButton component was not mounted.
```

To avoid this issue, mount the component before using its methods:

```ts
import { init, backButton } from '@telegram-apps/sdk';

// Initialize the SDK.
init();

// Mount the Back Button.
backButton.mount();

// Show the Back Button.
backButton.show();
```

> [!TIP]
> The mount-checking mechanism ensures that you are working with a properly initialized component.

## Always Check Availability

Not all Telegram Mini Apps methods were implemented in a single release. Some may have been
implemented years ago, while others were introduced only recently.

Because there are many users with different versions of the native Telegram application, you must
check if a method is available on their device before using it:

```ts
import { backButton } from '@telegram-apps/sdk';

// ... the SDK is already initialized, and the Back Button is mounted.
if (backButton.show.isAvailable()) {
  backButton.show();
}
```

The `isAvailable()` method verifies if the function is currently available and can be safely called.
It performs the following checks:

- The current environment is Telegram Mini Apps
- The SDK is initialized
- The method is supported by the current Telegram Mini Apps version
- The parent component is mounted

Not using this signal and simply calling the method may lead to errors related to one of the above
checks.

If you donâ€™t want to perform this check every time and the result of the method execution is not
crucial, use the `ifAvailable(...args)` method. This method accepts the same parameters as the
original function:

```ts
import { backButton } from '@telegram-apps/sdk';

// ... the SDK is already initialized, and the Back Button is mounted.
backButton.show.ifAvailable();
```
```
---
## File: apps/docs/packages/telegram-apps-sdk/1-x.md

```markdown
# @telegram-apps/sdk

<p style="display: flex; gap: 8px; min-height: 20px">
  <a href="https://npmjs.com/package/@telegram-apps/sdk">
    <img src="https://img.shields.io/npm/v/@telegram-apps/sdk?logo=npm"/>
  </a>
  <img src="https://img.shields.io/bundlephobia/minzip/@telegram-apps/sdk"/>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/packages/sdk">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

Made-from-scratch TypeScript library for seamless communication with Telegram Mini Apps
functionality.

The code of this library is designed to simplify the process for developers interacting with
Telegram Mini Apps. It consists of several individual components, each responsible for a specific
aspect of the Telegram Mini Apps ecosystem.

Before you begin using the SDK, we highly recommend familiarizing yourself with the Telegram Mini
Apps [documentation](../../platform/about.md) to grasp the fundamental concepts of the platform.

## Installation

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/sdk
```

```bash [npm]
npm i @telegram-apps/sdk
```

```bash [yarn]
yarn add @telegram-apps/sdk
```

:::

```
---
## File: apps/docs/packages/telegram-apps-sdk/2-x.md

```markdown
# @telegram-apps/sdk@2

> [!TIP] Newer version available
> `@telegram-apps/sdk@3.x` is [out](./3-x)!

<p style="display: flex; gap: 8px; min-height: 20px">
  <a href="https://npmjs.com/package/@telegram-apps/sdk">
    <img src="https://img.shields.io/npm/v/@telegram-apps/sdk?logo=npm"/>
  </a>
  <img src="https://img.shields.io/bundlephobia/minzip/@telegram-apps/sdk"/>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/packages/sdk">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

Made-from-scratch TypeScript library for seamless communication with Telegram Mini Apps
functionality.

The code of this library is designed to simplify the process for developers interacting with
Telegram Mini Apps. It consists of several individual components, each responsible for a specific
aspect of the Telegram Mini Apps ecosystem.

Before you begin using the SDK, we highly recommend familiarizing yourself with the Telegram Mini
Apps [documentation](../../platform/about.md) to grasp the fundamental concepts of the platform.

## Installation

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/sdk
```

```bash [npm]
npm i @telegram-apps/sdk
```

```bash [yarn]
yarn add @telegram-apps/sdk
```

:::

## Prerequisites

Before diving deep into the documentation of this package, it is recommended to familiarize
yourself with the following packages:

- [@telegram-apps/signals](../telegram-apps-signals.md) - our own JavaScript signals used almost
  everywhere in the package.
- [@telegram-apps/bridge](../telegram-apps-bridge.md) - the lowest level communication layer with
  Telegram Mini Apps. The SDK uses it under the hood and re-exports some functionality.

## Usage Example

```ts
import { init, backButton } from '@telegram-apps/sdk';

// Init the package and actualize all global dependencies.
init();

// Mount the back button component and retrieve its actual
// state.
backButton.mount();

// When a user clicked the back button, go back in the
// navigation history.
const off = backButton.onClick(() => {
  off();
  window.history.back();
});
```
```
---
## File: apps/docs/packages/telegram-apps-sdk/3-x.md

```markdown
# @telegram-apps/sdk@3

<p style="display: flex; gap: 8px; min-height: 20px">
  <a href="https://npmjs.com/package/@telegram-apps/sdk">
    <img src="https://img.shields.io/npm/v/@telegram-apps/sdk?logo=npm"/>
  </a>
  <img src="https://img.shields.io/bundlephobia/minzip/@telegram-apps/sdk"/>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/packages/sdk">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

Made-from-scratch TypeScript library for seamless communication with Telegram Mini Apps
functionality.

The code of this library is designed to simplify the process for developers interacting with
Telegram Mini Apps. It consists of several individual components, each responsible for a specific
aspect of the Telegram Mini Apps ecosystem.

Before you begin using the SDK, we highly recommend familiarizing yourself with the Telegram Mini
Apps [documentation](../../platform/about.md) to grasp the fundamental concepts of the platform.

## Installation

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/sdk
```

```bash [npm]
npm i @telegram-apps/sdk
```

```bash [yarn]
yarn add @telegram-apps/sdk
```

:::

## Prerequisites

Before diving deep into the documentation of this package, it is recommended to familiarize
yourself with the following packages:

- [@telegram-apps/signals](../telegram-apps-signals.md) - our own JavaScript signals used almost
  everywhere in the package.
- [@telegram-apps/bridge](../telegram-apps-bridge/2-x) - the lowest level communication layer with
  Telegram Mini Apps. The SDK uses it under the hood and re-exports some functionality.

## Usage Example

```ts
import { init, backButton } from '@telegram-apps/sdk';

// Init the package and actualize all global dependencies.
init();

// Mount the back button component and retrieve its actual
// state.
backButton.mount();

// When a user clicked the back button, go back in the
// navigation history.
const off = backButton.onClick(() => {
  off();
  window.history.back();
});
```
```
---
## File: apps/docs/packages/telegram-apps-sdk-react/1-x.md

```markdown
---
outline: [ 2, 3 ]
---

# @telegram-apps/sdk-react

<p style="display: inline-flex; gap: 8px">
  <a href="https://npmjs.com/package/@telegram-apps/sdk-react">
    <img src="https://img.shields.io/npm/v/@telegram-apps/sdk-react?logo=npm"/>
  </a>
  <img src="https://img.shields.io/bundlephobia/minzip/@telegram-apps/sdk-react"/>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/packages/sdk-react">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

React JS bindings for [client SDK](../telegram-apps-sdk/1-x). Includes hooks, components and
utilities for comfortable usage of React JS on the Telegram Mini Apps platform.

## Installation

Before anything else, it is assumed that you have already installed the `react` package, as it is
a peer dependency of this package.

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/sdk-react
```

```bash [npm]
npm i @telegram-apps/sdk-react
```

```bash [yarn]
yarn add @telegram-apps/sdk-react
```

:::

## SDKProvider

`SDKProvider` is a component responsible for providing the SDK functionality. It accepts
such properties as `acceptCustomStyles: boolean` and `debug: boolean`. Both of them are optional.

The `acceptCustomStyles` property is responsible for accepting custom styles from the web version of
Telegram.

The `debug` property is responsible for enabling a debug mode.

```jsx
import { SDKProvider } from '@telegram-apps/sdk-react';

/**
 * Root component for the whole project.
 */
export function Root() {
  return (
    <SDKProvider acceptCustomStyles debug>
      <div>My application!</div>
    </SDKProvider>
  );
}
```

## Hooks

For better understanding, each component hook uses its own component-related init function. If the
init function returns a non-promise value, the hook will instantly retrieve it. If the init function
is asynchronous, the hook will return an `undefined` value while the component is still
initializing. Then, it will be updated to the initialized value.

All component hooks in this package are divided into two parts:

1. Retrieving the actual init function value. These hooks are non-suffixed, like `useBackButton`.
2. Retrieving a meta item related to the init function value. These hooks include a suffix such
   as `Raw`, like `useBackButtonRaw`.

The first category of hooks returns the actual init function value. They throw an error if something
goes wrong during component initialization.

The second category of hooks returns an object containing the initialization process information.
Here is the object shape:

```ts
export interface SDKContextItem<T> {
  /**
   * This item execution result. The property may be missing
   * in case the execution is async.
   */
  result?: T;
  /**
   * Function to clean up item side effects.
   */
  cleanup?(): void;
  /**
   * An error occurred during execution.
   */
  error?: unknown;
}
```

Using the second category of hooks, you can extract an error without throwing it.

Here is the complete usage example:

```ts
import {
  useBackButton,
  useBackButtonRaw,
  useViewport,
  useViewportRaw,
  useBiometryManagerRaw,
} from '@telegram-apps/sdk-react';
import { useEffect } from 'react';

// BackButton initializes synchronously. So, bb will be 
// the BackButton instance.
const bb = useBackButton();

// Viewport is being initialized asynchronously, so signal may return undefined.
// After some time it will receive a valid value.
const vp = useViewport();

useEffect(() => {
  console.log(vp); // will be undefined and then Viewport instance.
}, [vp]);

const bm = useBiometryManagerRaw();

useEffect(() => {
  if (bm.error) {
    console.error('Something went wrong for BiometryManager', bm.error);
  }
}, [bm]);
```

### SSR

This package also supports SSR mode, widely used in popular frameworks like Next.js. When using
package hooks on the server side, you must pass `true` as the first argument. This notifies the hook
that server-side mode is enabled. Not specifying this value and calling the hook on the server side
will lead to an error.

Server-side mode returns `undefined` for each component hook on the server side and also before the
current component is mounted. This is required for persistence between trees rendered on the server
and client sides.

```ts
import { useBackButton } from '@telegram-apps/sdk-react';
import { useEffect } from 'react';

function Component() {
  const bb = useBackButton(true); // will be undefined or BackButton.

  useEffect(() => {
    if (bb) {
      // Here we can safely work with the BackButton.
    }
  }, [bb]);
}
```

### HOCs

All package Higher Order Components utilize the hooks described previously. The usage is rather
simple:

```ts
import { withBackButton } from '@telegram-apps/sdk-react';
import { useEffect } from 'react';

const A = withBackButton('bb', false, ({ bb }) => {
  useEffect(() => {
    bb.show();
  }, [bb]);
  return null;
});

const B = withBackButton('bb', true, ({ bb }) => {
  useEffect(() => {
    bb && bb.show();
  }, [bb]);
  return null;
});
```

As the first argument, you must pass a value responsible for the component property name receiving a
hook result. The second argument is SSR flag mode, which will be passed to the hook, used
internally.

## Hooks and HOCs List

| Hook and HOC (Raw)                                | Hook and HOC (Result)                       | Returned value                                                                            |
|---------------------------------------------------|---------------------------------------------|-------------------------------------------------------------------------------------------|
| `useBackButtonRaw`, `withBackButtonRaw`           | `useBackButton`, `withBackButton`           | [BackButton](../telegram-apps-sdk/1-x/components/back-button.md)                          |
| `useBiometryManagerRaw`, `withBiometryManagerRaw` | `useBiometryManager`, `withBiometryManager` | [BiometryManager](../telegram-apps-sdk/1-x/components/biometry-manager.md) or `undefined` |
| `useClosingBehaviorRaw`, `withClosingBehaviorRaw` | `useClosingBehavior`, `withClosingBehavior` | [ClosingBehavior](../telegram-apps-sdk/1-x/components/closing-behavior.md)                |
| `useCloudStorageRaw`, `withCloudStorageRaw`       | `useCloudStorage`, `withCloudStorage`       | [CloudStorage](../telegram-apps-sdk/1-x/components/cloud-storage.md)                      |
| `useHapticFeedbackRaw`, `withHapticFeedbackRaw`   | `useHapticFeedback`, `withHapticFeedback`   | [HapticFeedback](../telegram-apps-sdk/1-x/components/haptic-feedback.md)                  |
| `useInitDataRaw`, `withInitDataRaw`               | `useInitData`, `withInitData`               | [InitData](../telegram-apps-sdk/1-x/components/init-data.md)                              |
| `useInvoiceRaw`, `withInvoiceRaw`                 | `useInvoice`, `withInvoice`                 | [Invoice](../telegram-apps-sdk/1-x/components/invoice.md)                                 |
|                                                   | `useLaunchParams`                           | [Launch params](../telegram-apps-sdk/1-x/launch-parameters.md)                            |
| `useMainButtonRaw`, `withMainButtonRaw`           | `useMainButton`, `withMainButton`           | [MainButton](../telegram-apps-sdk/1-x/components/main-button.md)                          |
| `useMiniAppRaw`, `withMiniAppRaw`                 | `useMiniApp`, `withMiniApp`                 | [MiniApp](../telegram-apps-sdk/1-x/components/mini-app.md)                                |
| `usePopupRaw`, `withPopupRaw`                     | `usePopup`, `withPopup`                     | [Popup](../telegram-apps-sdk/1-x/components/popup.md)                                     |
| `useQRScannerRaw`, `withQRScannerRaw`             | `useQRScanner`, `withQRScanner`             | [QRScanner](../telegram-apps-sdk/1-x/components/qr-scanner.md)                            |
| `useSettingsButtonRaw`, `withSettingsButtonRaw`   | `useSettingsButton`, `withSettingsButton`   | [SettingsButton](../telegram-apps-sdk/1-x/components/settings-button.md)                  |
| `useSwipeBehaviorRaw`, `withSwipeBehaviorRaw`     | `useSwipeBehavior`, `withSwipeBehavior`     | [SwipeBehavior](../telegram-apps-sdk/1-x/components/swipe-behavior.md)                    |
| `useThemeParamsRaw`, `withThemeParamsRaw`         | `useThemeParams`, `withThemeParams`         | [ThemeParams](../telegram-apps-sdk/1-x/components/theme-params.md)                        |
| `useUtilsRaw`, `withUtilsRaw`                     | `useUtils`, `withUtils`                     | [Utils](../telegram-apps-sdk/1-x/components/utils.md)                                     |
| `useViewportRaw`, `withViewportRaw`               | `useViewport`, `withViewport`               | [Viewport](../telegram-apps-sdk/1-x/components/viewport.md) or `undefined`                |

## Template

We have already created a [template](https://github.com/Telegram-Mini-Apps/reactjs-template) for
React JS that utilizes the current package, so you can use it.
```
---
## File: apps/docs/packages/telegram-apps-sdk-react/2-x.md

```markdown
---
outline: [ 2, 3 ]
---

# @telegram-apps/sdk-react@2

> [!TIP] Newer version available
> `@telegram-apps/sdk-react@3.x` is [out](./3-x)!

<p style="display: inline-flex; gap: 8px">
  <a href="https://npmjs.com/package/@telegram-apps/sdk-react">
    <img src="https://img.shields.io/npm/v/@telegram-apps/sdk-react?logo=npm"/>
  </a>
  <img src="https://img.shields.io/bundlephobia/minzip/@telegram-apps/sdk-react"/>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/packages/sdk-react">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

React.js package providing utilities that developers may find useful when developing a mini
application.

> [!TIP]
> Since this package offers utility functions that extend the functionality
> of [@telegram-apps/sdk](../telegram-apps-sdk/2-x.md), it is recommended to review the SDK package
> documentation first.

## Installation

Before proceeding, it is assumed that you have already installed the `react` package, as it is a
peer dependency of this package.

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/sdk-react
```

```bash [npm]
npm i @telegram-apps/sdk-react
```

```bash [yarn]
yarn add @telegram-apps/sdk-react
```

:::

> [!INFO]
> This package fully re-exports the [@telegram-apps/sdk](../telegram-apps-sdk/2-x) package, so
> you don't need to install it separately.

## Usage

Here is a simple usage example of the package:

:::code-group

```tsx [index.tsx]
import ReactDOM from 'react-dom/client';
import { init, backButton } from '@telegram-apps/sdk-react';

import { BackButton } from './BackButton.js';

// Initialize the package.
init();

// Mount the Back Button, so we will work with 
// the actual component properties.
backButton.mount();

ReactDOM
  .createRoot(document.getElementById('root')!)
  .render(<BackButton/>);
```

```ts [BackButton.ts]
import { useEffect } from 'react';
import { backButton, useSignal } from '@telegram-apps/sdk-react';

/**
 * Component which controls the Back Button visibility.
 */
export function BackButton() {
  const isVisible = useSignal(backButton.isVisible);

  useEffect(() => {
    console.log('The button is', isVisible ? 'visible' : 'invisible');
  }, [isVisible]);

  useEffect(() => {
    backButton.show();
    return () => {
      backButton.hide();
    };
  }, []);

  return null;
}
```

:::

## Hooks

### `useSignal`

A helper that allows a developer to use our [signals](../telegram-apps-signals.md) in the
application.

It returns the underlying value and updates it whenever the signal value changes.

```ts
import { useEffect } from 'react';
import { backButton, useSignal } from '@telegram-apps/sdk-react';

function Component() {
  const isVisible = useSignal(backButton.isVisible);

  useEffect(() => {
    console.log('The button is', isVisible ? 'visible' : 'invisible');
  }, [isVisible]);

  useEffect(() => {
    backButton.show();
    return () => {
      backButton.hide();
    };
  }, []);

  return null;
}
```

### `useLaunchParams`

A function that returns the mini application's launch parameters.

```tsx
import { useLaunchParams } from '@telegram-apps/sdk-react';

function Component() {
  const lp = useLaunchParams();
  return <div>Start parameter: {lp.startParam}</div>;
}
```

```
---
## File: apps/docs/packages/telegram-apps-sdk-react/3-x.md

```markdown
---
outline: [ 2, 3 ]
---

# @telegram-apps/sdk-react@3

<p style="display: inline-flex; gap: 8px">
  <a href="https://npmjs.com/package/@telegram-apps/sdk-react">
    <img src="https://img.shields.io/npm/v/@telegram-apps/sdk-react?logo=npm"/>
  </a>
  <img src="https://img.shields.io/bundlephobia/minzip/@telegram-apps/sdk-react"/>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/packages/sdk-react">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

React.js package providing utilities that developers may find useful when developing a mini
application.

> [!TIP]
> Since this package offers utility functions that extend the functionality
> of [@telegram-apps/sdk](../telegram-apps-sdk/3-x.md), it is recommended to review the SDK package
> documentation first.

## Installation

Before proceeding, it is assumed that you have already installed the `react` package, as it is a
peer dependency of this package.

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/sdk-react
```

```bash [npm]
npm i @telegram-apps/sdk-react
```

```bash [yarn]
yarn add @telegram-apps/sdk-react
```

:::

> [!INFO]
> This package fully re-exports the [@telegram-apps/sdk](../telegram-apps-sdk/3-x) package, so
> you don't need to install it separately.

## Usage

Here is a simple usage example of the package:

:::code-group

```tsx [index.tsx]
import ReactDOM from 'react-dom/client';
import { init, backButton } from '@telegram-apps/sdk-react';

import { BackButton } from './BackButton.js';

// Initialize the package.
init();

// Mount the Back Button, so we will work with 
// the actual component properties.
backButton.mount();

ReactDOM
  .createRoot(document.getElementById('root')!)
  .render(<BackButton/>);
```

```ts [BackButton.ts]
import { useEffect } from 'react';
import { backButton, useSignal } from '@telegram-apps/sdk-react';

/**
 * Component which controls the Back Button visibility.
 */
export function BackButton() {
  const isVisible = useSignal(backButton.isVisible);

  useEffect(() => {
    console.log('The button is', isVisible ? 'visible' : 'invisible');
  }, [isVisible]);

  useEffect(() => {
    backButton.show();
    return () => {
      backButton.hide();
    };
  }, []);

  return null;
}
```

:::

## Hooks

### `useLaunchParams`

A hook that retrieves the application launch parameters. It works exactly as the `retrieveLaunchParams` function
described in the `@telegram-apps/bridge`'
s [documentation](https://docs.telegram-mini-apps.com/packages/telegram-apps-bridge/2-x/launch-parameters#retrieving-launch-parameters).

```ts
import { useLaunchParams } from '@telegram-apps/sdk-react';

function Component() {
  console.log(useLaunchParams());
  // {
  //   tgWebAppBotInline: false,
  //   tgWebAppData: {
  //     user: { ... },
  //     auth_date: Date(...),
  //     query_id: ...,
  //     hash: ...
  //   },
  //   ...
  // };
}

function Component2() {
  console.log(useLaunchParams(true));
  // {
  //   tgWebAppBotInline: false,
  //   tgWebAppData: {
  //     user: { ... },
  //     authDate: Date(...),
  //     queryId: ...
  //     hash: ...
  //   },
  //   ...
  // };
}
```

### `useRawLaunchParams`

Returns launch parameters in a raw format from any known source.

```ts
import { useRawLaunchParams } from '@telegram-apps/sdk-react';

function Component() {
  console.log(useRawLaunchParams());
  // tgWebAppBotInline=0&tgWebAppData=%7B%22user%22%3A%7B%7D...
}
```

### `useRawInitData`

Uses
the [retrieveRawInitData](https://docs.telegram-mini-apps.com/packages/telegram-apps-bridge/2-x/launch-parameters#retrieving-raw-init-data)
function under the hood and allows retrieving the init data passed in its initial format.

```ts
import { useRawInitData } from '@telegram-apps/sdk-react';

function Component() {
  console.log(useRawInitData());
  // '{"user":...,"auth_date":...,"query_id":...,...}'
}
```

### `useSignal`

A helper that allows a developer to use our [signals](../telegram-apps-signals.md) in the
application.

It returns the underlying value and updates it whenever the signal value changes.

```ts
import { useEffect } from 'react';
import { backButton, useSignal } from '@telegram-apps/sdk-react';

function Component() {
  const isVisible = useSignal(backButton.isVisible);

  useEffect(() => {
    console.log('The button is', isVisible ? 'visible' : 'invisible');
  }, [isVisible]);

  useEffect(() => {
    backButton.show();
    return () => {
      backButton.hide();
    };
  }, []);

  return null;
}
```

### `useAndroidDeviceData`

Retrieves [Android device data](https://core.telegram.org/bots/webapps#additional-data-in-user-agent) from the
`navigator.userAgent`.

The function always returns an object describing the Android device data with all keys marked as optional.

```ts
import { useAndroidDeviceData } from '@telegram-apps/sdk-react';

function Component() {
  const deviceData = useAndroidDeviceData();
  // Example complete output:
  // {
  //   manufacturer: 'Samsung',
  //   performanceClass: 'AVERAGE',
  //   model: 'SM-A155F',
  //   androidVersion: '14',
  //   sdkVersion: 34,
  // }
}
```

### `useAndroidDeviceDataFrom`

This function works the same as [useAndroidDeviceData](#useandroiddevicedata), but allows passing a custom
value to parse.

```ts
import { useAndroidDeviceDataFrom } from '@telegram-apps/sdk-react';

function Component() {
  const deviceData = useAndroidDeviceDataFrom(navigator.userAgent);
  // Example complete output:
  // {
  //   manufacturer: 'Samsung',
  //   performanceClass: 'AVERAGE',
  //   model: 'SM-A155F',
  //   androidVersion: '14',
  //   sdkVersion: 34,
  // }
}
```

## Migrating From v2 to v3

As long the package itself completely re-exports the [@telegram-apps/sdk](../telegram-apps-sdk/3-x.md) package,
familiarize yourself with its own [migration guide](../telegram-apps-sdk/3-x/migrate-v2-v3).

### `useLaunchParams` behavior changed

As long as the underlying `retrieveLaunchParams` function was changed, the result of calling this hook was changed
also. It now returns an object with launch parameters with their initially defined names (prefixed with the `tgWebApp`
substring). So, make sure you are not using previous properties from the hook's result like `themeParams`,
`initData`, etc.

The result now also doesn't contain the `initDataRaw` property, as long as it is not really a separate launch parameter.
To extract raw init data use the `useRawInitData` hook instead.
```
---
## File: apps/docs/packages/telegram-apps-sdk-solid/1-x.md

```markdown
---
outline: [ 2, 3 ]
---

# @telegram-apps/sdk-solid

<p style="display: inline-flex; gap: 8px">
  <a href="https://npmjs.com/package/@telegram-apps/sdk-solid">
    <img src="https://img.shields.io/npm/v/@telegram-apps/sdk-solid?logo=npm"/>
  </a>
  <img src="https://img.shields.io/bundlephobia/minzip/@telegram-apps/sdk-solid"/>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/packages/sdk-solid">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

Solid JS bindings for [client SDK](../telegram-apps-sdk/1-x). Includes hooks, components and
utilities for comfortable usage of Solid JS on the Telegram Mini Apps platform.

## Installation

Before anything else, it is assumed that you have already installed the `solid-js` package, as it is
a peer dependency of this package.

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/sdk-solid
```

```bash [npm]
npm i @telegram-apps/sdk-solid
```

```bash [yarn]
yarn add @telegram-apps/sdk-solid
```

:::

## SDKProvider

`SDKProvider` is a component responsible for providing the SDK functionality. It accepts
such properties as `acceptCustomStyles: boolean` and `debug: boolean`. Both of them are optional.

The `acceptCustomStyles` property is responsible for accepting custom styles from the web version of
Telegram.

The `debug` property is responsible for enabling a debug mode.

```jsx
import { SDKProvider } from '@telegram-apps/sdk-solid';

/**
 * Root component for the whole project.
 */
export function Root() {
  return (
    <SDKProvider acceptCustomStyles debug>
      <div>My application!</div>
    </SDKProvider>
  );
}
```

## Hooks

Each component hook in this package returns a custom signal. The returned signal contains a
property `error?: unknown`, which will be set if something goes wrong during component
initialization. Calling a signal containing this property will lead to throwing a corresponding
error. If no error occurs, the signal will return a component instance.

For better understanding, each component hook uses its own component-related init function. If the
init function returns a non-promise value, the hook will instantly retrieve it. If the init function
is asynchronous, the hook will return a signal with an `undefined` value while the component is
still initializing. Then, it will be updated to the initialized value.

Here is an example:

```ts
import { useBackButton, useViewport } from '@telegram-apps/sdk-solid';

// BackButton initializes synchronously. So, bb will be a signal
// returning an instance of BackButton.
const bb = useBackButton();
const bbV = bb(); // will be BackButton

// Viewport is being initialized asynchronously, so signal may return undefined.
// After some time it will receive a valid value.
const vp = useViewport();
const vpV = vp(); // will be undefined

// ...after some time
const vpV2 = vp(); // will be Viewport
```

It is important to note that all properties of the components are reactive. So, if something changes
in a value returned from the hook signal, the signal itself will not be notified. This is because
the component itself did not change, but its property did.

Let's take a look at this example:

```ts
import { useViewport } from '@telegram-apps/sdk-solid';
import { createEffect } from 'solid-js';

// Let's assume that viewport is already initialized.
const vp = useViewport();

createEffect(() => {
  // This line of code will not be called if the viewport height 
  // or expansion state changes.
  console.log('Viewport changed', vp());
});

createEffect(() => {
  // But this line of code will be called every time the viewport
  // height changes.
  console.log('Viewport height changed', vp().height);
});
```

We have this granular reactivity to provide maximal performance, like Solid itself does.

## HOCs

All package Higher Order Components utilize the hooks described previously. The usage is rather
simple:

```ts
import { withBackButton } from '@telegram-apps/sdk-solid';

const MyComponent = withBackButton('bb', (props) => {
  createEffect(() => {
    props.bb().show();
  });
  return null;
});
```

As the first argument, you must pass a value responsible for the component property name receiving a
hook result. Note that the received value will be a signal, not the value behind it.

## Hooks and HOCs List

| Hook                 | HOC                   | Signal value                                                                              |
|----------------------|-----------------------|-------------------------------------------------------------------------------------------|
| `useBackButton`      | `withBackButton`      | [BackButton](../telegram-apps-sdk/1-x/components/back-button.md)                          |
| `useBiometryManager` | `withBiometryManager` | [BiometryManager](../telegram-apps-sdk/1-x/components/biometry-manager.md) or `undefined` |
| `useClosingBehavior` | `withClosingBehavior` | [ClosingBehavior](../telegram-apps-sdk/1-x/components/closing-behavior.md)                |
| `useCloudStorage`    | `withCloudStorage`    | [CloudStorage](../telegram-apps-sdk/1-x/components/cloud-storage.md)                      |
| `useHapticFeedback`  | `withHapticFeedback`  | [HapticFeedback](../telegram-apps-sdk/1-x/components/haptic-feedback.md)                  |
| `useInitData`        | `withInitData`        | [InitData](../telegram-apps-sdk/1-x/components/init-data.md)                              |
| `useInvoice`         | `withInvoice`         | [Invoice](../telegram-apps-sdk/1-x/components/invoice.md)                                 |
| `useMainButton`      | `withMainButton`      | [MainButton](../telegram-apps-sdk/1-x/components/main-button.md)                          |
| `useMiniApp`         | `withMiniApp`         | [MiniApp](../telegram-apps-sdk/1-x/components/mini-app.md)                                |
| `usePopup`           | `withPopup`           | [Popup](../telegram-apps-sdk/1-x/components/popup.md)                                     |
| `useQRScanner`       | `withQRScanner`       | [QRScanner](../telegram-apps-sdk/1-x/components/qr-scanner.md)                            |
| `useSettingsButton`  | `withSettingsButton`  | [SettingsButton](../telegram-apps-sdk/1-x/components/settings-button.md)                  |
| `useSwipeBehavior`   | `withSwipeBehavior`   | [SwipeBehavior](../telegram-apps-sdk/1-x/components/swipe-behavior.md)                    |
| `useThemeParams`     | `withThemeParams`     | [ThemeParams](../telegram-apps-sdk/1-x/components/theme-params.md)                        |
| `useUtils`           | `withUtils`           | [Utils](../telegram-apps-sdk/1-x/components/utils.md)                                     |
| `useViewport`        | `withViewport`        | [Viewport](../telegram-apps-sdk/1-x/components/viewport.md) or `undefined`                |

## Template

We have already created a [template](https://github.com/Telegram-Mini-Apps/solidjs-template) for
Solid JS that utilizes the current package, so you can use it.
```
---
## File: apps/docs/packages/telegram-apps-sdk-solid/2-x.md

```markdown
---
outline: [ 2, 3 ]
---

# @telegram-apps/sdk-solid@2

> [!TIP] Newer version available
> `@telegram-apps/sdk-solid@3.x` is [out](./3-x)!

<p style="display: inline-flex; gap: 8px">
  <a href="https://npmjs.com/package/@telegram-apps/sdk-solid">
    <img src="https://img.shields.io/npm/v/@telegram-apps/sdk-solid?logo=npm"/>
  </a>
  <img src="https://img.shields.io/bundlephobia/minzip/@telegram-apps/sdk-solid"/>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/packages/sdk-solid">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

Solid.js package providing utilities that developers may find useful when developing a mini
application.

> [!TIP]
> Since this package offers utility functions that extend the functionality
> of [@telegram-apps/sdk](../telegram-apps-sdk/2-x.md), it is recommended to review the SDK package
> documentation first.

## Installation

Before proceeding, it is assumed that you have already installed the `solid-js` package, as it is a
peer dependency of this package.

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/sdk-solid
```

```bash [npm]
npm i @telegram-apps/sdk-solid
```

```bash [yarn]
yarn add @telegram-apps/sdk-solid
```

:::

> [!INFO]
> This package fully re-exports the [@telegram-apps/sdk](../telegram-apps-sdk/2-x) package, so
> you don't need to install it separately.

## Usage

Here is a simple usage example of the package:

:::code-group

```tsx [index.tsx]
import { render } from 'solid-js/web';
import { init, backButton } from '@telegram-apps/sdk-solid';

import { BackButton } from './BackButton.js';

// Initialize the package.
init();

// Mount the Back Button, so we will work with 
// the actual component properties.
backButton.mount();

render(() => <BackButton/>, document.getElementById('root')!);
```

```ts [BackButton.ts]
import { createEffect, onCleanup, onMount } from 'solid-js';
import { backButton, useSignal } from '@telegram-apps/sdk-solid';

/**
 * Component which controls the Back Button visibility.
 */
export function BackButton() {
  const isVisible = useSignal(backButton.isVisible);

  createEffect(() => {
    console.log('The button is', isVisible() ? 'visible' : 'invisible');
  });

  onMount(() => {
    backButton.show();
    onCleanup(() => {
      backButton.hide();
    });
  });

  return null;
}
```

:::

## Hooks

### `useSignal`

A helper that allows you to use our [signals](../telegram-apps-signals.md) in the application. It
returns a Solid signal which updates every time, our signal changes.

```ts
import { createEffect, onCleanup, onMount } from 'solid-js';
import { backButton, useSignal } from '@telegram-apps/sdk-solid';

function Component() {
  const isVisible = useSignal(backButton.isVisible);

  createEffect(() => {
    console.log('The button is', isVisible() ? 'visible' : 'invisible');
  });

  onMount(() => {
    backButton.show();
    onCleanup(() => {
      backButton.hide();
    });
  });

  return null;
}
```

### `useLaunchParams`

A function that returns the mini application's launch parameters.

```tsx
import { useLaunchParams } from '@telegram-apps/sdk-solid';

function Component() {
  const lp = useLaunchParams();
  return <div>Start param: {lp.startParam}</div>;
}
```

```
---
## File: apps/docs/packages/telegram-apps-sdk-solid/3-x.md

```markdown
---
outline: [ 2, 3 ]
---

# @telegram-apps/sdk-solid@3

<p style="display: inline-flex; gap: 8px">
  <a href="https://npmjs.com/package/@telegram-apps/sdk-solid">
    <img src="https://img.shields.io/npm/v/@telegram-apps/sdk-solid?logo=npm"/>
  </a>
  <img src="https://img.shields.io/bundlephobia/minzip/@telegram-apps/sdk-solid"/>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/packages/sdk-solid">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

Solid.js package providing utilities that developers may find useful when developing a mini
application.

> [!TIP]
> Since this package offers utility functions that extend the functionality
> of [@telegram-apps/sdk](../telegram-apps-sdk/3-x.md), it is recommended to review the SDK package
> documentation first.

## Installation

Before proceeding, it is assumed that you have already installed the `solid-js` package, as it is a
peer dependency of this package.

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/sdk-solid
```

```bash [npm]
npm i @telegram-apps/sdk-solid
```

```bash [yarn]
yarn add @telegram-apps/sdk-solid
```

:::

> [!INFO]
> This package fully re-exports the [@telegram-apps/sdk](../telegram-apps-sdk/3-x) package, so
> you don't need to install it separately.

## Usage

Here is a simple usage example of the package:

:::code-group

```tsx [index.tsx]
import { render } from 'solid-js/web';
import { init, backButton } from '@telegram-apps/sdk-solid';

import { BackButton } from './BackButton.js';

// Initialize the package.
init();

// Mount the Back Button, so we will work with 
// the actual component properties.
backButton.mount();

render(() => <BackButton/>, document.getElementById('root')!);
```

```ts [BackButton.ts]
import { createEffect, onCleanup, onMount } from 'solid-js';
import { backButton, useSignal } from '@telegram-apps/sdk-solid';

/**
 * Component which controls the Back Button visibility.
 */
export function BackButton() {
  const isVisible = useSignal(backButton.isVisible);

  createEffect(() => {
    console.log('The button is', isVisible() ? 'visible' : 'invisible');
  });

  onMount(() => {
    backButton.show();
    onCleanup(() => {
      backButton.hide();
    });
  });

  return null;
}
```

:::

## Hooks

### `useSignal`

A helper that allows you to use our [signals](../telegram-apps-signals.md) in the application. It
returns a Solid signal which updates every time, our signal changes.

```ts
import { createEffect, onCleanup, onMount } from 'solid-js';
import { backButton, useSignal } from '@telegram-apps/sdk-solid';

function Component() {
  const isVisible = useSignal(backButton.isVisible);

  createEffect(() => {
    console.log('The button is', isVisible() ? 'visible' : 'invisible');
  });

  onMount(() => {
    backButton.show();
    onCleanup(() => {
      backButton.hide();
    });
  });

  return null;
}
```

## Migrating From v2 to v3

As long the package itself completely re-exports the [@telegram-apps/sdk](../telegram-apps-sdk/3-x.md) package,
familiarize yourself with its own [migration guide](../telegram-apps-sdk/3-x/migrate-v2-v3).

There was only one breaking change presented in v3 - the `useLaunchParams` hook was removed.
```
---
## File: apps/docs/packages/telegram-apps-sdk-svelte/2-x.md

```markdown
---
outline: [2, 3]
---

# @telegram-apps/sdk-svelte@2

<p style="display: inline-flex; gap: 8px">
  <a href="https://npmjs.com/package/@telegram-apps/sdk-svelte">
    <img src="https://img.shields.io/npm/v/@telegram-apps/sdk-svelte?logo=npm"/>
  </a>
  <img src="https://img.shields.io/bundlephobia/minzip/@telegram-apps/sdk-svelte"/>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/packages/sdk-svelte">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

Svelte.js package providing utilities that developers may find useful when developing a mini
application.

> [!TIP]
> Since this package offers utility functions that extend the functionality
> of [@telegram-apps/sdk](../telegram-apps-sdk/3-x.md), it is recommended to review the SDK package
> documentation first.

## Installation

Before proceeding, it is assumed that you have already installed the `svelte-js` package, as it is a
peer dependency of this package.

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/sdk-svelte
```

```bash [npm]
npm i @telegram-apps/sdk-svelte
```

```bash [yarn]
yarn add @telegram-apps/sdk-svelte
```

:::

> [!INFO]
> This package fully re-exports the [@telegram-apps/sdk](../telegram-apps-sdk/3-x) package, so
> you don't need to install it separately.

## Usage

Here is a simple usage example of the package:

:::code-group

```svelte [index.svelte]
<script lang="ts">
  import { init, backButton } from '@telegram-apps/sdk-svelte';

  import { BackButton } from './BackButton.svelte';

  // Initialize the package.
  init();
</script>

<BackButton />
```

```svelte [BackButton.svelte]
/**
 * Component which controls the Back Button visibility.
 */
<script lang="ts">
  import { onMount, onDestroy } from 'svelte';
  import { backButton, useSignal } from '@telegram-apps/sdk-svelte';

  const isVisible = useSignal(backButton.isVisible);

  $: console.log('The button is', isVisible.value ? 'visible' : 'invisible')

  onMount(() => {
    backButton.show();
  });

  onDestroy(() => {
    backButton.hide();
  });
</script>
```

:::

## Hooks

### `useSignal`

A helper that allows you to use our [signals](./telegram-apps-signals.md) in the application. It
returns a Svelte ref which updates every time, our signal changes.

```svelte
<script lang="ts">
  import { onMount, onDestroy } from 'svelte';
  import { backButton, useSignal } from '@telegram-apps/sdk-svelte';

  const isVisible = useSignal(backButton.isVisible);

  $: console.log('The button is', isVisible.value ? 'visible' : 'invisible')

  onMount(() => {
    backButton.show();
  });

  onDestroy(() => {
    backButton.hide();
  });
</script>
```

## Migrating From v1 to v2

As long the package itself completely re-exports the [@telegram-apps/sdk](../telegram-apps-sdk/3-x.md) package,
familiarize yourself with its own [migration guide](../telegram-apps-sdk/3-x/migrate-v2-v3).

There was only one breaking change presented in v2 - the `useLaunchParams` hook was removed.
```
---
## File: apps/docs/packages/telegram-apps-sdk-vue/2-x.md

```markdown
---
outline: [ 2, 3 ]
---

# @telegram-apps/sdk-vue@2

<p style="display: inline-flex; gap: 8px">
  <a href="https://npmjs.com/package/@telegram-apps/sdk-vue">
    <img src="https://img.shields.io/npm/v/@telegram-apps/sdk-vue?logo=npm"/>
  </a>
  <img src="https://img.shields.io/bundlephobia/minzip/@telegram-apps/sdk-vue"/>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/packages/sdk-vue">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

Vue.js package providing utilities that developers may find useful when developing a mini
application.

> [!TIP]
> Since this package offers utility functions that extend the functionality
> of [@telegram-apps/sdk](../telegram-apps-sdk/3-x.md), it is recommended to review the SDK package
> documentation first.

## Installation

Before proceeding, it is assumed that you have already installed the `vue` package, as it is a
peer dependency of this package.

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/sdk-vue
```

```bash [npm]
npm i @telegram-apps/sdk-vue
```

```bash [yarn]
yarn add @telegram-apps/sdk-vue
```

:::

> [!INFO]
> This package fully re-exports the [@telegram-apps/sdk](../telegram-apps-sdk/3-x) package, so
> you don't need to install it separately.

## Usage

Here is a simple usage example of the package:

:::code-group

```ts [index.ts]
import { createApp } from 'vue';
import { init } from '@telegram-apps/sdk-vue';
import App from './App.vue';

// Initialize the package.
init();

const app = createApp(App);

app.mount('#root');
```

```vue [PopupButton.vue]
<script setup lang="ts">
/**
 * Component which opens native Telegram Popup.
 */
import { popup } from '@telegram-apps/sdk-vue'

const props = defineProps<{ title: string, message: string }>()

function open() {
  if (popup.isSupported()) {
    popup.open(props);
    return;
  }

  // Open fallback HTML dialog...
}
</script>

<template>
  <button aria-haspopup="dialog" @click="open">
    Open popup
  </button>
</template>
```

:::

## Hooks

### `useSignal`

A helper that allows you to use our [signals](./telegram-apps-signals.md) in the application. It
returns a Vue ref which updates every time, our signal changes.

```ts [useMainButton.vue]
/**
 * Composable which encapsulates mainButton interaction logic
 */
import { mainButton, useSignal } from '@telegram-apps/sdk-vue';

export function useMainButton() {
  if (!mainButton.isMounted()) {
    mainButton.mount();
  }

  const isVisible = useSignal(mainButton.isVisible);

  return { isVisible };
}
```

## Vue Router integration

Telegram application uses URL's hash to transmit launch parameters into TMA, see [that article](https://docs.telegram-mini-apps.com/platform/launch-parameters#transmission-method) for more details.

Therefore, [Vue router](https://router.vuejs.org/) should use [HTML5 mode](https://router.vuejs.org/guide/essentials/history-mode.html#HTML5-Mode):

```ts [router.ts]
import { createRouter, createWebHistory } from 'vue-router'

const router = createRouter({
  history: createWebHistory(),
  routes: [
    //...
  ],
})
```

## Migrating From v1 to v2

As long the package itself completely re-exports the [@telegram-apps/sdk](../telegram-apps-sdk/3-x.md) package,
familiarize yourself with its own [migration guide](../telegram-apps-sdk/3-x/migrate-v2-v3).

There was only one breaking change presented in v2 - the `useLaunchParams` hook was removed.

```
---
## File: apps/docs/packages/tma-js-bridge/advanced.md

```markdown
# Advanced

This article covers advanced usage of the bridge.

## Calling Method, Receiving Event

The `request` function should be used when a developer needs to call a Telegram Mini Apps method and
receive a specific event.

For example, to call
the [web_app_request_viewport](../../platform/methods.md#web-app-request-viewport) method and catch
the [viewport_changed](../../platform/events.md#viewport-changed) event for actual viewport data:

```typescript
import { request } from '@tma.js/bridge';

await request('web_app_request_viewport', 'viewport_changed');
// {
//   is_state_stable: true,
//   is_expanded: false,
//   height: 320
// };
```

If the Telegram Mini Apps method accepts parameters, they should be passed in the `params` property
of the third argument:

```typescript
const { button_id } = await request('web_app_open_popup', 'popup_closed', {
  params: {
    title: 'Caution',
    message: 'Should we delete your account?',
    buttons: [
      { id: 'yes', type: 'ok' },
      { id: 'no', type: 'cancel' },
    ],
  },
});
```

It is also allowed to track several events at the same time:

```typescript
await request(
  'web_app_open_scan_qr_popup',
  ['qr_text_received', 'scan_qr_popup_closed'],
);

// The result will either be the qr_text_received 
// or scan_qr_popup_closed event payload.
```

This function allows passing additional options such as `postEvent`, `abortSignal`, `timeout`,
and `capture`.

### `postEvent`

The `postEvent` option allows a developer to override the method used to call the Telegram Mini Apps
method.

```typescript
request('web_app_request_viewport', 'viewport_changed', {
  postEvent() {
    console.log('Hey, I am not going to do anything. Live with that');
  },
});
```

### `abortSignal`

To abort the returned promise externally, the `abortSignal` option is used.

```ts
const controller = new AbortController();

request('web_app_request_viewport', 'viewport_changed', {
  abortSignal: controller.signal,
});

setTimeout(() => {
  controller.abort(new Error('Not going to wait anymore'));
}, 500);
```

### `timeout`

The `timeout` option assigns a timeout to the request.

```typescript
import { request } from '@tma.js/bridge';

try {
  await request(
    'web_app_invoke_custom_method',
    'custom_method_invoked',
    {
      timeout: 5000,
      params: {
        req_id: '1',
        method: 'deleteStorageValues',
        params: { keys: ['a'] },
      },
    },
  );
} catch (e) {
  console.error(e); // e.name will be 'TimeoutError'
}
```

#### `capture`

The `capture` property is a function that allows developers to determine if an occurred Mini Apps
event should be captured and returned from the `request` function:

```typescript
const slug = 'jjKSJnm1k23lodd';

request('web_app_open_invoice', 'invoice_closed', {
  params: { slug },
  capture(data) {
    return slug === data.slug;
  },
});
```

By default, the `request` function captures the first event with the required name. In this case,
the function will capture the event only if it has the expected slug, specific for the
[invoice_closed](../../platform/events.md#invoice-closed) event.

When passing an array of events, the `capture` function will receive an object with
the `event: EventName` and `payload?: EventPayload` properties.

### Functional Approach

This function supports a [functional alternative](functional-approach.md) - `requestFp`:

```typescript
import { requestFp } from '@tma.js/bridge';
import { pipe } from 'fp-ts/function';
import * as TE from 'fp-ts/TaskEither';

pipe(
  requestFp('web_app_request_viewport', 'viewport_changed'),
  TE.match(
    error => {
      // Something went wrong.
    },
    viewport => {
      // Data was received.
    }
  )
);
```

## Invoking Custom Methods

Custom methods are those methods which can be used with
the [web_app_invoke_custom_method](../../platform/methods.md#web-app-invoke-custom-method) Mini
Apps
method.

The `invokeCustomMethod` function simplifies the usage of such methods by reusing the `request`
function.

Hereâ€™s an example without using this function:

```typescript
const reqId = 'ABC';

request('web_app_invoke_custom_method', 'custom_method_invoked', {
  params: {
    req_id: reqId,
    method: 'deleteStorageValues',
    params: { keys: ['a'] },
  },
  capture(data) {
    return data.req_id === reqId;
  }
})
  .then(({ data, error }) => {
    if (error) {
      throw new Error(error);
    }
    return data;
  })
  .then(data => {
    console.log('We got some data', data);
  });
```

Now, rewritten using the `invokeCustomMethod` function:

```typescript
import { invokeCustomMethod } from '@tma.js/bridge';

invokeCustomMethod('deleteStorageValues', { keys: ['a'] }, 'ABC')
  .then(data => {
    console.log('We got some data', data);
  });
```

Internally, it just encapsulates a specific logic related to the methods, so a developer shouldn't
do it.

Unlike the `request` function, the `invokeCustomMethod` function parses the result and checks if it
contains the `error` property. If it does, the function throws the corresponding error; otherwise,
the `result` property is returned.

### Functional Approach

This function supports a [functional alternative](functional-approach.md) - `invokeCustomMethodFp`:

```typescript
import { invokeCustomMethodFp } from '@tma.js/bridge';
import { pipe } from 'fp-ts/function';
import * as TE from 'fp-ts/TaskEither';

pipe(
  invokeCustomMethodFp('deleteStorageValues', { keys: ['a'] }, 'ABC'),
  TE.match(
    error => {
      // Something went wrong.
    },
    response => {
      // Method was executed.
    }
  )
);
```
```
---
## File: apps/docs/packages/tma-js-bridge/environment.md

```markdown
# Environment

This package is designed to be used only inside the Telegram application. Since non-Telegram
environments lack Telegram-specific traits, calling methods such
as [retrieveLaunchParams](launch-parameters.md) or [postEvent](methods.md#postevent) will lead to
errors.

Nevertheless, the package provides utilities that help developers either develop the application
outside of Telegram or determine if the current environment is not a Telegram Mini Apps at all.

## Validating Current Environment

To check if the current environment is Telegram Mini Apps, a developer can use the `isTMA` function.
It works in two modes: **simple** and **complete**.

### Simple

In this mode, the function attempts to retrieve launch parameters from the environment.

If the extraction is successful, the environment is considered Telegram Mini Apps.
Simple mode is synchronous and returns a boolean value.

```ts
import { isTMA } from '@tma.js/bridge';

if (isTMA()) {
  // ...
}
```

This mode is somewhat superficial but may still be sufficient for most applications. For a more
reliable check, use the [complete](#complete) mode.

### Complete

In this mode, the function calls a Telegram Mini Apps-specific method and waits for a
method-specific event to occur.

```ts
import { isTMA } from '@tma.js/bridge';

if (await isTMA('complete')) {
  console.log('It\'s Telegram Mini Apps');
}
```

The function waits for an event for 100 milliseconds and most of the time it is enough, but a
developer can change this behavior by passing an object as the second argument with
the `timeout: number` property.

```ts
if (await isTMA('complete', { timeout: 50 })) {
  console.log('It\'s Telegram Mini Apps');
}
```

You can also use a [functional alternative](functional-approach.md) - `isTMAFp`:

```typescript
import * as TE from 'fp-ts/TaskEither';
import { pipe } from 'fp-ts/function';
import { isTMAFp } from '@tma.js/bridge';

pipe(isTMAFp('complete'), TE.match(
  error => {
    // Something went wrong.
  },
  isTMA => {
    // Check is done, use the argument.
  }
));
```

## Mocking Environment

The package provides the `mockTelegramEnv` function, which imitates the environment provided by
Telegram. It helps developers start building applications even without creating a mini app record in
[BotFather](https://t.me/botfather).

This function optionally accepts an object with two optional propertiesâ€”**launchParams** and
**onEvent**.

### `launchParams`

Launch parameters to use in the mock. It can be presented as a query parameters
list (a string or a `URLSearchParams` instance) described
in [this](../../../platform/launch-parameters) article, or launch parameters-like object with the
`tgWebAppData` property missing, or presented as a query parameters list described
in [this](../../../platform/init-data#parameters-list) article.

> [!TIP]
> Don't worry, this value will be validated, and the package will let you know that something is off.

### `onEvent`

Function that will be called in case any Mini Apps method was called by your
application. It allows a developer to define a custom handling behavior if needed.

The function receives a tuple, containing the method name as the first argument, and its payload as
the second one.

As the second argument, it accepts a function that attempts to call the native `postEvent`
function usually defined by the Telegram client. So, the `mockTelegramEnv` function may be used
even inside Telegram Mini Apps environment to intercept all methods' calls and pass them further
if needed.

### Example

Here is the complete example you may use in your application:

```ts
import { mockTelegramEnv, emitEvent } from '@tma.js/bridge';

const noInsets = {
  left: 0,
  top: 0,
  bottom: 0,
  right: 0,
} as const;
const themeParams = {
  accent_text_color: '#6ab2f2',
  bg_color: '#17212b',
  button_color: '#5288c1',
  button_text_color: '#ffffff',
  destructive_text_color: '#ec3942',
  header_bg_color: '#17212b',
  hint_color: '#708499',
  link_color: '#6ab3f3',
  secondary_bg_color: '#232e3c',
  section_bg_color: '#17212b',
  section_header_text_color: '#6ab3f3',
  subtitle_text_color: '#708499',
  text_color: '#f5f5f5',
} as const;

mockTelegramEnv({
  launchParams: {
    tgWebAppThemeParams: themeParams,
    tgWebAppData: new URLSearchParams([
      ['user', JSON.stringify({
        id: 1,
        first_name: 'Pavel',
      })],
      ['hash', ''],
      ['signature', ''],
      ['auth_date', Date.now().toString()],
    ]),
    tgWebAppStartParam: 'debug',
    tgWebAppVersion: '8',
    tgWebAppPlatform: 'tdesktop',
  },
  onEvent(event) {
    // event here is an object { event: string; params?: any }, but 
    // typed depending on the "event" prop.
    if (event.name === 'web_app_request_theme') {
      return emitEvent('theme_changed', { theme_params: themeParams });
    }
    if (event.name === 'web_app_request_viewport') {
      return emitEvent('viewport_changed', {
        height: window.innerHeight,
        width: window.innerWidth,
        is_expanded: true,
        is_state_stable: true,
      });
    }
    if (event.name === 'web_app_request_content_safe_area') {
      return emitEvent('content_safe_area_changed', noInsets);
    }
    if (event.name === 'web_app_request_safe_area') {
      return emitEvent('safe_area_changed', noInsets);
    }
  },
});
```

```
---
## File: apps/docs/packages/tma-js-bridge/events.md

```markdown
# Events

This article covers topics related to [apps communication](../../platform/apps-communication.md)
events.

## Tracking Events

To start tracking events, use the `on`. It returns a new function, removing the bound event
listener.

```typescript
import { on } from '@tma.js/bridge';

// Start listening to the "viewport_changed" event. The returned value
// is a function that removes this event listener.
const removeListener = on('viewport_changed', payload => {
  console.log('Viewport changed:', payload);
  // Remove this event listener.
  removeListener();
});
```

Alternatively, to stop listening to the event, a developer can use the `off` function:

```typescript
import { on, off, type EventListener } from '@tma.js/bridge';

const listener: EventListener<'viewport_changed'> = (payload) => {
  console.log('Viewport changed:', payload);
  // Remove the event listener.
  off('viewport_changed', listener);
};

// Start listening to the event.
on('viewport_changed', listener);

```

### One-Time Listener

To call the listener only once and remove it after, the third boolean argument is used:

```typescript
import { on } from '@tma.js/bridge';

// the listener will automatically be removed after the first 
// its execution.
on('viewport_changed', payload => {
  console.log('Viewport changed:', payload);
}, true);
```

### Wildcard Listener

In case, it is required to track all events, pass the `*` value as the first argument. In this case,
the listener will receive the event name and its payload.

```ts
import { on } from '@tma.js/bridge';

on('*', event => {
  if (event.name === 'viewport_changed') {
    console.log('Viewport changed:', event.payload);
    return;
  }
  // ...
});
```

```
---
## File: apps/docs/packages/tma-js-bridge/functional-approach.md

```markdown
# Functional Approach

This package provides alternatives to many functions that are not throwing any errors, but
returning them. We recommend using such package as [fp-ts](https://npmjs.com/package/fp-ts) to
process such kind of results.

Here are some examples:

```typescript
import * as E from 'fp-ts/Either';
import { pipe } from 'fp-ts/function';
import { postEventFp, retrieveLaunchParamsFp } from '@tma.js/bridge';

pipe(postEventFp('web_app_expand'), E.match(
  error => {
    // error will be typed here, you will know exactly what is wrong.
  },
  () => {
    // Everything is ok.
  },
));

pipe(retrieveLaunchParamsFp(), E.match(
  error => {
    // ...
  },
  launchParams => {
    // ...
  },
));
```
```
---
## File: apps/docs/packages/tma-js-bridge/globals.md

```markdown
# Globals

By globals, we mean global values used across methods in the package.

## Enabling Debug Mode

Enabling debug mode will lead to showing additional useful logs. To enable or disable it,
use the `setDebug` function:

```typescript
import { setDebug } from '@tma.js/bridge';

setDebug(true);
```

After setting it to `true`, you will see logs when calling the `postEvent` function or receiving
Mini Apps events.

## Changing Target Origin

If the package is used in a browser environment (iframe), it employs the `window.parent.postMessage`
function. This function requires specifying the target origin to ensure events are only sent to
trusted parent iframes. By default, the package uses `https://web.telegram.org` as the origin.

```typescript
import { setTargetOrigin } from '@tma.js/bridge';

setTargetOrigin('https://i-know-what-i-am.doing');
```

> [!DANGER]
> It is strongly recommended not to override this value, as it could lead to security issues.
> Specify this value only when you are certain of its impact.

```
---
## File: apps/docs/packages/tma-js-bridge/launch-parameters.md

```markdown
# Launch Parameters

Launch parameters are essential to the mini application lifecycle. To learn more about what launch
parameters are and their importance, it is worth reading [this](../../platform/launch-parameters)
article.

## Retrieving Launch Parameters

This package allows a developer to extract launch parameters from the current environment using
the `retrieveLaunchParams` function. It tries to retrieve them from all possible sources, and if it
fails, an error will be thrown.

```typescript
import { retrieveLaunchParams } from '@tma.js/bridge';

retrieveLaunchParams();
// {
//   tgWebAppBotInline: false,
//   tgWebAppData: {
//     user: { ... },
//     auth_date: Date(...),
//     query_id: ...,
//     hash: ...
//   },
//   ...
// };
```

### Raw

To retrieve launch parameters in their initial formatâ€”as query parameters, use
the `retrieveRawLaunchParams` function:

```ts
import { retrieveRawLaunchParams } from '@tma.js/bridge';

retrieveRawLaunchParams();
// tgWebAppBotInline=0&tgWebAppData=%7B%22user%22%3A%7B%7D%2C%22auth_date%22%3A1787367222%2C%22query_id%22%3A%22abc%22%7D...&...
```

## Retrieving Raw Init Data

It is a rather common case when the application requires extracting init data in its raw format
to send to a backend server then. You must not use the `retrieveLaunchParams` function and then
manipulate the `tgWebAppData` value, but utilize the `retrieveRawInitData` function designed for
this purpose:

```ts
import { retrieveRawInitData } from '@tma.js/bridge';

retrieveRawInitData();
// '{"user":...,"auth_date":...,"query_id":...,...}'
```

The reason is using something else rather than this function, there is no guarantee that the init
data will not become malformed. This is the only function which guarantees that the returned
value will be returned unmodified, as it was passed by the Telegram client.

## Functional Approach

The package provides [functional alternatives](functional-approach.md) for the following functions:

- `retrieveLaunchParams` -> `retrieveLaunchParamsFp`
- `retrieveRawLaunchParams` -> `retrieveRawLaunchParamsFp`
- `retrieveRawInitData` -> `retrieveRawInitDataFp`

Here is the usage example:

```typescript
import * as E from 'fp-ts/Either';
import { pipe } from 'fp-ts/function';
import { retrieveLaunchParamsFp } from '@tma.js/bridge';

pipe(retrieveLaunchParamsFp(), E.match(
  error => {
    // ...
  },
  launchParams => {
    // ...
  },
));
```
```
---
## File: apps/docs/packages/tma-js-bridge/methods.md

```markdown
# Methods

This article covers topics related to [apps communication](../../platform/apps-communication.md)
methods.

## Calling Methods

To call Telegram Mini Apps methods, developers should use the `postEvent` function:

```typescript
import { postEvent } from '@tma.js/bridge';

postEvent('web_app_setup_back_button', { is_visible: true });
```

This function automatically determines the correct way to send the event based on the current
environment. It identifies the Telegram app type and selects the appropriate flow.

## Checking Method Support

By default, the `postEvent` function does not check if the specified method is supported by the
current Telegram app. To do this, the `supports` function is used.

It accepts a Mini Apps method name and the current platform version:

```typescript
import { supports } from '@tma.js/bridge';

supports('web_app_trigger_haptic_feedback', '6.0'); // false
supports('web_app_trigger_haptic_feedback', '6.1'); // true
```

The `supports` function also allows checking if a specific parameter in the method parameters is
supported:

```typescript
import { supports } from '@tma.js/bridge';

supports('web_app_open_link', 'try_instant_view', '6.0'); // false
supports('web_app_open_link', 'try_instant_view', '6.7'); // true
```

> [!TIP]
> It is recommended to use this function before calling Mini Apps methods to prevent apps from
> stalling or encountering unexpected behavior.

## Creating Safer `postEvent`

This package includes a function named `createPostEvent` that takes the current Mini Apps version as
input.

It returns a new `postEvent` function, which internally checks if the passed method and
parameters are supported.

```typescript
import { createPostEvent } from '@tma.js/bridge';

const postEvent = createPostEvent('6.5');

// Will work fine.
postEvent('web_app_read_text_from_clipboard');

// Will throw an error, this method is not supported 
// in Mini Apps version 6.5.
postEvent('web_app_request_phone');
```

As a second optional argument, the function accepts a callback that is called if the method or
parameter is unsupported.

```ts
createPostEvent('6.0', data => {
  if ('param' in data) {
    console.warn(
      'Oops, the parameter', data.param,
      'in method', data.method,
      'is not supported',
    );
  } else {
    console.warn('Oops, method', data.method, 'is not supported');
  }
});
```

Despite the fact, that it is not recommended, to log warnings instead of throwing errors,
the `'non-strict'` value can be passed:

```ts
const postEvent = createPostEvent('6.5', 'non-strict');

// Will work fine.
postEvent('web_app_read_text_from_clipboard');

// Will show a warning in the console, stating that specified
// method is unsupported in version 6.5. Nothing else will happen.
postEvent('web_app_request_phone');
```

## Functional Approach

```typescript
import * as E from 'fp-ts/Either';
import { pipe } from 'fp-ts/function';
import { postEventFp, retrieveLaunchParamsFp } from '@tma.js/bridge';

pipe(postEventFp('web_app_expand'), E.match(
  error => {
    // error will be typed here, you will know exactly what is wrong.
  },
  () => {
    // Everything is ok.
  },
));
```

-> [Learn more about functional approach](functional-approach.md)
```
---
## File: apps/docs/packages/tma-js-bridge/migrate-from-telegram-apps.md

```markdown
# Migrating from @telegram-apps/bridge

This guide provides a summary of the migration process from `@telegram-apps/bridge` to `@tma.js/bridge`.

## `mockTelegramEnv`

- `onEvent` option now receives not a tuple, but an object with properties `event: string` and
  `params?: any`. The actual typing depends on the `event` property.

## `retrieveLaunchParams`

- The function now has no way of returning a camel-cased version of launch parameters. Instead, it always returns them
  in form they were passed from Telegram. Nevertheless, you can import the `deepSnakeToCamelObjKeys` function from the
  package in order to deeply camelize keys:

```typescript
import { deepSnakeToCamelObjKeys, retrieveLaunchParams } from '@tma.js/bridge';

const lpCamelCased = deepSnakeToCamelObjKeys(retrieveLaunchParams());
```

- Type `RetrieveLPResult` was renamed to `RetrieveLaunchParamsResult`;
- Type `RetrieveLPResultCamelCased` was removed.

## `on`

- Listening to all events (using `on(*)`) you will now receive not a tuple, but an object with properties
  `event: string` and `payload?: any`. The actual typing depends on the `event` property.

## `targetOrigin`

- This signal became readonly, so the `targetOrigin.set` method is inaccessible now. You should use the
  `setTargetOrigin` function instead:

```typescript
import { setTargetOrigin } from '@tma.js/bridge';

setTargetOrigin('https://some-domain.com');
```

## `debug`

- This signal became readonly, so the `debug.set` method is inaccessible now.

## `postMessageImplementation`

- The signal was renamed to `postMessageImpl`.

## Errors

- The following functions were removed:
  - `isMethodUnsupportedError`
  - `isMethodMethodParameterUnsupportedError`
  - `isLaunchParamsRetrieveError`
  - `isInvalidLaunchParamsError`
  - `isUnknownEnvError`
  - `isInvokeCustomMethodError`

Instead, you should use the errors' static `is()` method:

```typescript
import { UnknownEnvError } from '@tma.js/bridge';

if (UnknownEnvError.is(someValue)) {
  // someValue is instance of UnknownEnvError.
}
```

- `InvokeCustomMethodError` was renamed to `InvokeCustomMethodFailedError`
```
---
## File: apps/docs/packages/tma-js-init-data-node/functional-approach.md

```markdown
# Functional Approach

This package provides alternatives to many functions that are not throwing any errors, but
returning them. We recommend using such package as [fp-ts](https://npmjs.com/package/fp-ts) to
process such kind of results.

Here are some examples:

```typescript
import * as E from 'fp-ts/Either';
import { pipe } from 'fp-ts/function';
import { validateFp, signFp } from '@tma.js/init-data-node';

pipe(
  validateFp('...', '...'),
  E.match(
    error => {
      // error will be typed here, you will know exactly what is wrong.
    },
    () => {
      // Everything is ok.
    },
  ),
);

pipe(
  signFp({ ... }, '...', new Date()),
  E.match(
    error => {
      // ...
    },
    signedData => {
      // ...
    },
  ),
);
```
```
---
## File: apps/docs/packages/tma-js-init-data-node/migrate-from-telegram-apps.md

```markdown
# Migrating from @telegram-apps/init-data-node

This guide provides a summary of the migration process from `@telegram-apps/init-data-node` to `@tma.js/init-data-node`.

## `parse`

- The function now has no way of returning a camel-cased version of init data. Instead, it always returns them
  in form they were passed from Telegram. Nevertheless, you can import the `deepSnakeToCamelObjKeys` function from the
  package in order to deeply camelize keys:

```typescript
import { deepSnakeToCamelObjKeys, parse } from '@tma.js/init-data-node';

const initDataCamelCased = deepSnakeToCamelObjKeys(parse('...'));
```

## Errors

- The following functions were removed:
  - `isAuthDateInvalidError`
  - `isSignatureInvalidError`
  - `isHexStringLengthInvalidError`
  - `isSignatureMissingError`
  - `isExpiredError`

Instead, you should use the errors' static `is()` method:

```typescript
import { ExpiredError } from '@tma.js/bridge';

if (ExpiredError.is(someValue)) {
  // someValue is instance of ExpiredError.
}
```

```
---
## File: apps/docs/packages/tma-js-init-data-node/parsing.md

```markdown
# Parsing

To parse a value as init data, use the `parse` and `parseFp` ([functional alternative](functional-approach.md))
methods. They both accept init data presented as a `string` or `URLSearchParams`.

:::code-group

```ts [Using parse]
import { parse } from '@tma.js/init-data-node';

try {
  const initData = parse('...');
  // {
  //   hash: 'jkn1mn239hgxzkjcbkb1278',
  //   auth_date: 1757699236,
  //   user: {
  //     first_name: 'Vladislav',
  //     id: 279058397,
  //     is_premium: true,
  //     language_code: 'en',
  //     last_name: 'Kibenko',
  //     username: 'vdkfrost',
  //   },
  // }
} catch (e) {
  console.error('Something is wrong', e);
}
```

```typescript [Using parseFp (functional)]
import { parseFp } from '@tma.js/init-data-node';
import * as E from 'fp-ts/Either';
import { pipe } from 'fp-ts/function';

pipe(parseFp('...'), E.match(
  error => {
    // Something went wrong.
  },
  initData => {
    // Init data parsed.
  },
));
```

:::

To return a camel-cased value, use the `deepSnakeToCamelObjKeys` function:

```ts
import { parse, deepSnakeToCamelObjKeys } from '@tma.js/init-data-node';

const initData = deepSnakeToCamelObjKeys(parse('...'));
// {
//   hash: 'jkn1mn239hgxzkjcbkb1278',
//   authDate: 1757699236,
//   user: {
//     firstName: 'Vladislav',
//     id: 279058397,
//     isPremium: true,
//     languageCode: 'en',
//     lastName: 'Kibenko',
//     username: 'vdkfrost',
//   },
// }
```

```
---
## File: apps/docs/packages/tma-js-init-data-node/signing.md

```markdown
# Signing

There could be some cases when a developer needs to create their own init data. For instance,
Telegram does not send this data automatically if you are using something like `KeyboardButton`
or `InlineKeyboardButton`. Telegram cannot do this because it doesn't know which Telegram Bot token
should be used.

The package provides utilities for both Node.js and non-Node.js environments. Node.js utilities are imported from
the root of the package. Web Crypto API (non-Node.js environments) utilities are imported from the `web` subdirectory,
these functions are all async due to the Web Crypto API nature.

:::code-group

```typescript [Node.js]
import { sign } from '@tma.js/init-data-node';

sign({ ... }, '...', new Date());
```

```typescript [Web Crypto API]
import { sign } from '@tma.js/init-data-node/web';

await sign({ ... }, '...', new Date());
```

:::

To implement signing process, it is required to use the `sign` method. Here is the complete example:

::: code-group

```ts [Node.js]
import { sign } from '@tma.js/init-data-node';

sign(
  {
    can_send_after: 10000,
    chat: {
      id: 1,
      type: 'group',
      username: 'my-chat',
      title: 'chat-title',
      photo_url: 'chat-photo',
    },
    chat_instance: '888',
    chat_type: 'sender',
    query_id: 'QUERY',
    receiver: {
      added_to_attachment_menu: false,
      allows_write_to_pm: true,
      first_name: 'receiver-first-name',
      id: 991,
      is_bot: false,
      is_premium: true,
      language_code: 'ru',
      last_name: 'receiver-last-name',
      photo_url: 'receiver-photo',
      username: 'receiver-username',
    },
    start_param: 'debug',
    user: {
      added_to_attachment_menu: false,
      allows_write_to_pm: false,
      first_name: 'user-first-name',
      id: 222,
      is_bot: true,
      is_premium: false,
      language_code: 'en',
      last_name: 'user-last-name',
      photo_url: 'user-photo',
      username: 'user-username',
    },
  },
  '5768337691:AAH5YkoiEuPk8-FZa32hStHTqXiLPtAEhx8',
  new Date(1000),
);
```

```ts [Node.js (functional)]
import { signFp } from '@tma.js/init-data-node';
import * as E from 'fp-ts/Either';
import { pipe } from 'fp-ts/function';

pipe(
  signFp(
    {
      can_send_after: 10000,
      chat: {
        id: 1,
        type: 'group',
        username: 'my-chat',
        title: 'chat-title',
        photo_url: 'chat-photo',
      },
      chat_instance: '888',
      chat_type: 'sender',
      query_id: 'QUERY',
      receiver: {
        added_to_attachment_menu: false,
        allows_write_to_pm: true,
        first_name: 'receiver-first-name',
        id: 991,
        is_bot: false,
        is_premium: true,
        language_code: 'ru',
        last_name: 'receiver-last-name',
        photo_url: 'receiver-photo',
        username: 'receiver-username',
      },
      start_param: 'debug',
      user: {
        added_to_attachment_menu: false,
        allows_write_to_pm: false,
        first_name: 'user-first-name',
        id: 222,
        is_bot: true,
        is_premium: false,
        language_code: 'en',
        last_name: 'user-last-name',
        photo_url: 'user-photo',
        username: 'user-username',
      },
    },
    '5768337691:AAH5YkoiEuPk8-FZa32hStHTqXiLPtAEhx8',
    new Date(1000),
  ),
  E.match(
    error => {
      // Something went wrong.
    },
    signedData => {
      // Signing is successful.
    },
  ),
);
```

```typescript [Web Crypto API]
import { sign } from '@tma.js/init-data-node/web';

await sign(
  {
    can_send_after: 10000,
    chat: {
      id: 1,
      type: 'group',
      username: 'my-chat',
      title: 'chat-title',
      photo_url: 'chat-photo',
    },
    chat_instance: '888',
    chat_type: 'sender',
    query_id: 'QUERY',
    receiver: {
      added_to_attachment_menu: false,
      allows_write_to_pm: true,
      first_name: 'receiver-first-name',
      id: 991,
      is_bot: false,
      is_premium: true,
      language_code: 'ru',
      last_name: 'receiver-last-name',
      photo_url: 'receiver-photo',
      username: 'receiver-username',
    },
    start_param: 'debug',
    user: {
      added_to_attachment_menu: false,
      allows_write_to_pm: false,
      first_name: 'user-first-name',
      id: 222,
      is_bot: true,
      is_premium: false,
      language_code: 'en',
      last_name: 'user-last-name',
      photo_url: 'user-photo',
      username: 'user-username',
    },
  },
  '5768337691:AAH5YkoiEuPk8-FZa32hStHTqXiLPtAEhx8',
  new Date(1000),
);
```

```typescript [Web Crypto API (functional)]
import { signFp } from '@tma.js/init-data-node/web';
import * as TE from 'fp-ts/TaskEither';
import { pipe } from 'fp-ts/function';

pipe(
  signFp(
    {
      can_send_after: 10000,
      chat: {
        id: 1,
        type: 'group',
        username: 'my-chat',
        title: 'chat-title',
        photo_url: 'chat-photo',
      },
      chat_instance: '888',
      chat_type: 'sender',
      query_id: 'QUERY',
      receiver: {
        added_to_attachment_menu: false,
        allows_write_to_pm: true,
        first_name: 'receiver-first-name',
        id: 991,
        is_bot: false,
        is_premium: true,
        language_code: 'ru',
        last_name: 'receiver-last-name',
        photo_url: 'receiver-photo',
        username: 'receiver-username',
      },
      start_param: 'debug',
      user: {
        added_to_attachment_menu: false,
        allows_write_to_pm: false,
        first_name: 'user-first-name',
        id: 222,
        is_bot: true,
        is_premium: false,
        language_code: 'en',
        last_name: 'user-last-name',
        photo_url: 'user-photo',
        username: 'user-username',
      },
    },
    '5768337691:AAH5YkoiEuPk8-FZa32hStHTqXiLPtAEhx8',
    new Date(1000),
  ),
  TE.match(
    error => {
      // Something went wrong.
    },
    signedData => {
      // Signing is successful.
    },
  ),
);
```

```ts [Expected result]
'auth_date=1' +
'&can_send_after=10000' +
'&chat=%7B%22id%22%3A1%2C%22type%22%3A%22group%22%2C%22title%22%3A%22chat-title%22%2C%22photo_url%22%3A%22group%22%2C%22username%22%3A%22my-chat%22%7D' +
'&chat_instance=888' +
'&chat_type=sender' +
'&query_id=QUERY' +
'&receiver=%7B%22added_to_attachment_menu%22%3Afalse%2C%22allows_write_to_pm%22%3Atrue%2C%22first_name%22%3A%22receiver-first-name%22%2C%22id%22%3A991%2C%22is_bot%22%3Afalse%2C%22is_premium%22%3Atrue%2C%22language_code%22%3A%22ru%22%2C%22last_name%22%3A%22receiver-last-name%22%2C%22photo_url%22%3A%22receiver-photo%22%2C%22username%22%3A%22receiver-username%22%7D' +
'&start_param=debug' +
'&user=%7B%22added_to_attachment_menu%22%3Afalse%2C%22allows_write_to_pm%22%3Afalse%2C%22first_name%22%3A%22user-first-name%22%2C%22id%22%3A222%2C%22is_bot%22%3Atrue%2C%22is_premium%22%3Afalse%2C%22language_code%22%3A%22en%22%2C%22last_name%22%3A%22user-last-name%22%2C%22photo_url%22%3A%22user-photo%22%2C%22username%22%3A%22user-username%22%7D' +
'&hash=47cfa22e72b887cba90c9cb833c5ea0f599975b6ce7193741844b5c4a4228b40'
```

:::

This function accepts three arguments:

- **Data to sign**: It represents a parsed init data object excluding the `auth_date` and `hash`
  properties. The `signature` property is optional as it can't be computed.
- **Bot token**: This token is received from [@BotFather](https://t.me/botfather).
- **Signing date**: This value will be used as the value of the `auth_date` property.

As a result, the function returns signed init data.

## Passing Hashed Token

This package allow developers to use a hashed token instead of a raw token.

By "hashed token," we mean a token hashed using the HMAC-SHA-256 algorithm with a key derived
from `WebAppData`, as specified in
the [validation](../../platform/init-data#validating) section of the documentation.

Here are some examples:

```ts
import { sign } from '@tma.js/init-data-node';

sign(
  {
    can_send_after: 10000,
    chat: {
      id: 1,
      type: 'group',
      username: 'my-chat',
      title: 'chat-title',
      photo_url: 'chat-photo',
    },
    chat_instance: '888',
    chat_type: 'sender',
    query_id: 'QUERY',
    receiver: {
      added_to_attachment_menu: false,
      allows_write_to_pm: true,
      first_name: 'receiver-first-name',
      id: 991,
      is_bot: false,
      is_premium: true,
      language_code: 'ru',
      last_name: 'receiver-last-name',
      photo_url: 'receiver-photo',
      username: 'receiver-username',
    },
    start_param: 'debug',
    user: {
      added_to_attachment_menu: false,
      allows_write_to_pm: false,
      first_name: 'user-first-name',
      id: 222,
      is_bot: true,
      is_premium: false,
      language_code: 'en',
      last_name: 'user-last-name',
      photo_url: 'user-photo',
      username: 'user-username',
    },
  },
  // Hashed secret token.
  'a5c609aa52f63cb5e6d8ceb6e4138726ea82bbc36bb786d64482d445ea38ee5f',
  new Date(1000),
  { tokenHashed: true }
);
```

You can use this approach to reduce the number of instances where you directly pass a raw token.
```
---
## File: apps/docs/packages/tma-js-init-data-node/validating.md

```markdown
# Validating

The package provides utilities for both Node.js and non-Node.js environments. Node.js utilities are imported from
the root of the package. Web Crypto API (non-Node.js environments) utilities are imported from the `web` subdirectory,
these functions are all async due to the Web Crypto API nature.

:::code-group

```typescript [Node.js]
import { validate } from '@tma.js/init-data-node';

validate('...', '...');
```

```typescript [Web Crypto API]
import { validate } from '@tma.js/init-data-node/web';

await validate('...', '...');
```

:::

## General Init Data Validation

To validate the signature of the initialization data, the `validate` function is used. It expects
the initialization data to be passed in a raw format (query parameters) and throws an error in
certain cases.

:::code-group

```typescript [Node.js]
import { validate } from '@tma.js/init-data-node';

validate(
  // Init data.
  'query_id=AAHdF6IQAAAAAN0XohDhrOrc' +
  '&user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%7D' +
  '&auth_date=1662771648' +
  '&hash=c501b71e775f74ce10e377dea85a7ea24ecd640b223ea86dfe453e0eaed2e2b2',
  // Bot secret token.
  '5768337691:AAH5YkoiEuPk8-FZa32hStHTqXiLPtAEhx8',
);
```

```typescript [Node.js (functional)]
import { validateFp } from '@tma.js/init-data-node';
import * as E from 'fp-ts/Either';
import { pipe } from 'fp-ts/function';

pipe(validateFp('...', '...'), E.match(
  error => {
    // Something went wrong.
  },
  () => {
    // Data is valid.
  },
));
```

```typescript [Web Crypto API]
import { validate } from '@tma.js/init-data-node/web';

await validate(
  // Init data.
  'query_id=AAHdF6IQAAAAAN0XohDhrOrc' +
  '&user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%7D' +
  '&auth_date=1662771648' +
  '&hash=c501b71e775f74ce10e377dea85a7ea24ecd640b223ea86dfe453e0eaed2e2b2',
  // Bot secret token.
  '5768337691:AAH5YkoiEuPk8-FZa32hStHTqXiLPtAEhx8',
);
```

```typescript [Web Crypto API (functional)]
import { validateFp } from '@tma.js/init-data-node/web';
import * as TE from 'fp-ts/TaskEither';
import { pipe } from 'fp-ts/function';

pipe(validateFp('...', '...'), TE.match(
  error => {
    // Something went wrong.
  },
  () => {
    // Data is valid.
  },
));
```

:::

Function will throw (or return) an error in one of these cases:

- `AuthDateInvalidError`: `auth_date` is empty or not found;
- `SignatureMissingError`: `hash` is empty or not found;
- `SignatureInvalidError`: signature is invalid;
- `ExpiredError`: init data expired.

Here is the code you could use to check the error type:

:::code-group

```typescript [non-functional]
import { validate } from '@tma.js/init-data-node';

try {
  validate('init data', 'token');
} catch (e) {
  if (SignatureInvalidError.is(e)) {
    console.log('Signature is invalid');
  }
}
```

```typescript [functional]
import { validateFp } from '@tma.js/init-data-node';
import * as E from 'fp-ts/Either';
import { pipe } from 'fp-ts/function';

pipe(validateFp('...', '...'), E.match(
  error => {
    if (SignatureInvalidError.is(error)) {
      console.log('Signature is invalid');
    }
  },
  () => {
    // Data is valid.
  },
));
```

:::

By default, the function checks the expiration of the initialization data. The default expiration
duration is set to 1 day (86,400 seconds). It is recommended to always check the expiration of the
initialization data, as it could be stolen but still remain valid. To disable this feature,
pass `{ expiresIn: 0 }` as the third argument.

Alternatively, to check the init data validity, a developer could use the `isValid` function.
It doesn't throw an error, but returns a boolean value indicating the init data validity.

:::code-group

```ts [Node.js]
import { isValid } from '@tma.js/init-data-node';

if (isValid('init data', 'bot secret token')) {
  console.log('Init data is fine');
}
```

```ts [Web Crypto API]
import { isValid } from '@tma.js/init-data-node/web';

if (await isValid('init data', 'bot secret token')) {
  console.log('Init data is fine');
}
```

```ts [Web Crypto API (functional)]
import { isValidFp } from '@tma.js/init-data-node/web';
import * as TE from 'fp-ts/TaskEither';
import { pipe } from 'fp-ts/function';

pipe(
  isValidFp('init data', 'bot secret token'),
  TE.match(
    error => {
      // Something exceptional went wrong.
    },
    isValid => {
      // ...
    },
  ),
);
```

:::

### Passing Hashed Token

This package allow developers to use a hashed token instead of a raw token.

By "hashed token," we mean a token hashed using the HMAC-SHA-256 algorithm with a key derived
from `WebAppData`, as specified in
the [validation](../../platform/init-data#validating) section of the documentation.

Here are some examples:

```ts
import { validate } from '@tma.js/init-data-node';

validate(
  // Init data.
  'query_id=AAHdF6IQAAAAAN0XohDhrOrc' +
  '&user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%7D' +
  '&auth_date=1662771648' +
  '&hash=c501b71e775f74ce10e377dea85a7ea24ecd640b223ea86dfe453e0eaed2e2b2',
  // Hashed secret token.
  'a5c609aa52f63cb5e6d8ceb6e4138726ea82bbc36bb786d64482d445ea38ee5f',
  { tokenHashed: true },
);
```

You can use this approach to reduce the number of instances where you directly pass a raw token.

## Third-party Validation

The `validate3rd` function is used to check if the passed init data was signed by Telegram. As
well as the `validate` function, this one accepts the init data in the same format.

As the second argument, it accepts the Telegram Bot identifier that was used to sign this
init data.

The third argument is an object with the following properties:

- `expiresIn: number` is responsible for init data expiration validation;
- `test: boolean`: should be equal `true` if the init data was received in the Telegram test environment.

> [!WARNING]
> Unlike the `validate` function, `validate3rd` uses only Web Crypto API as long as Node.js lacks required functionality
> at the moment. Importing related functionality from the package's root or the `web` subdirectory, you will get
> the same functions.

Here is the usage example:

:::code-group

```ts [non-functional]
import { validate3rd } from '@tma.js/init-data-node';

await validate3rd(
  // Init data.
  'user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%20%2B%20-%20%3F%20%5C%2F%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%22%7D' +
  '&chat_instance=8134722200314281151' +
  '&chat_type=private' +
  '&auth_date=1733584787' +
  '&signature=zL-ucjNyREiHDE8aihFwpfR9aggP2xiAo3NSpfe-p7IbCisNlDKlo7Kb6G4D0Ao2mBrSgEk4maLSdv6MLIlADQ' +
  '&hash=2174df5b000556d044f3f020384e879c8efcab55ddea2ced4eb752e93e7080d6',
  // Bot ID.
  7342037359,
);
```

```ts [functional]
import { validate3rdFp } from '@tma.js/init-data-node';
import * as TE from 'fp-ts/TaskEither';
import { pipe } from 'fp-ts/function';

pipe(validate3rdFp('...', '...'), TE.match(
  error => {
    // Something went wrong.
  },
  () => {
    // Data is valid.
  },
));
```

:::

Function will throw (or return) an error in one of these cases:

- `AuthDateInvalidError`: `auth_date` is empty or not found;
- `SignatureMissingError`: `signature` is empty or not found;
- `SignatureInvalidError`: signature is invalid;
- `ExpiredError`: init data expired.

You can also use the `isValid3rd` function not throwing an error, but returning a boolean value:

:::code-group

```ts [non-functional]
import { isValid3rd } from '@tma.js/init-data-node';

if (await isValid3rd('init data', 7342037359)) {
  console.log('Init data is fine');
}
```

```ts [functional]
import { isValid3rdFp } from '@tma.js/init-data-node';
import * as TE from 'fp-ts/TaskEither';
import { pipe } from 'fp-ts/function';

pipe(
  isValid3rdFp('init data', 7342037359),
  TE.match(
    error => {
      // Something exceptional went wrong.
    },
    isValid => {
      // ...
    },
  ),
);
```

:::

```
---
## File: apps/docs/packages/tma-js-sdk/features/back-button.md

```markdown
# ðŸ’ Back Button

A component responsible for the Telegram Mini Apps [back button](../../../platform/back-button.md).

## Checking Support

To check if the back button is supported by the current Telegram Mini Apps version, use the `isSupported` signal:

```ts
import { backButton } from '@tma.js/sdk';

backButton.isSupported(); // boolean
```

## Mounting

Before using this component, it is necessary to mount it to work with properly configured
properties. To do so, use the `mount` method. It will update the `isMounted` signal.

```ts
import { backButton } from '@tma.js/sdk';

backButton.mount();
backButton.isMounted(); // true
```

To unmount, use the `unmount` method:

```ts
backButton.unmount();
backButton.isMounted(); // false
```

## Showing and Hiding

To change the button's visibility, use the `hide()` and `show()` methods. These methods update the `isVisible` signal.

```ts
backButton.show();
backButton.isVisible(); // true

backButton.hide();
backButton.isVisible(); // false
```

## Tracking Click

To add a button click listener, use the `onClick` method. It returns a function to remove the bound
listener. Alternatively, you can use the `offClick` method.

```ts
function listener() {
  console.log('Clicked!');
}

const offClick = backButton.onClick(listener);
offClick();
// or
backButton.onClick(listener);
backButton.offClick(listener);
```

```
---
## File: apps/docs/packages/tma-js-sdk/features/biometry.md

```markdown
# ðŸ’ Biometry

A component responsible for biometry functionality for Telegram Mini Apps.

## Checking Support

To check if biometry is supported by the current Telegram Mini Apps version, use the `isSupported` signal:

```ts
import { biometry } from '@tma.js/sdk';

biometry.isSupported(); // boolean
```

## Mounting

Before using the component, it must be mounted.

This process is asynchronous, as biometry data needs to be requested from the Telegram application. The `isMounting`
signal will be set to `true` during the process and updated to `false` when complete.

If mounting is successful, the `isMounted` signal will be set to `true`.

```ts
try {
  const promise = biometry.mount();
  biometry.isMounting(); // true
  await promise;
  biometry.isMounting(); // false
  biometry.isMounted(); // true
} catch (err) {
  biometry.isMounting(); // false
  biometry.isMounted(); // false
}
```

To unmount, use the `unmount` method:

```ts
biometry.unmount();
biometry.isMounted(); // false
```

## Requesting Biometry Access

To request biometry access, use the `requestAccess` method. It returns a promise with boolean value indicating whether
access was granted by the user.

```ts
const isAccessGranted = await biometry.requestAccess(); // boolean
```

## Authenticating

To authenticate a user and retrieve a previously saved token, use the `authenticate` method.

It optionally accepts an object with the following properties:

- `reason?: string`: a reason for authentication to display to the user.

The method returns an object with `status` (`'failed'` or `'authorized'`) and, if successful, a `token: string`.

```ts
const { status, token } = await biometry.authenticate({
  reason: 'Please!',
});

if (status === 'authorized') {
  console.log(`Authorized. Token: ${token}`);
} else {
  console.log('Not authorized');
}
```

## Updating Token

To update the token stored in local secure storage, use the `updateToken` method.

The method accepts an optional object with the `reason` and `token` properties. If no token is provided, the existing
token will be deleted.

It returns a promise with boolean indicating if any changes were made.

```ts
const updated = await biometry.updateToken({
  reason: 'Want to delete',
});

await biometry.updateToken({
  reason: 'Will set a new one',
  token: 'new token',
});
```

## Opening Settings

To open the biometry-related settings modal, use the `openSettings` method. This method can only be triggered in
response to user interaction.

```ts
biometry.openSettings();
```

```
---
## File: apps/docs/packages/tma-js-sdk/features/closing-behavior.md

```markdown
# ðŸ’ Closing Behavior

A component responsible for the Telegram Mini
Apps [closing behavior](../../../platform/closing-behavior.md).

## Mounting

Before using this component, it is necessary to mount it to work with properly configured
properties. To do so, use the `mount` method. It will update the `isMounted` signal.

```ts
import { closingBehavior } from '@tma.js/sdk';

closingBehavior.mount();
closingBehavior.isMounted(); // true
```

To unmount, use the `unmount` method:

```ts
closingBehavior.unmount();
closingBehavior.isMounted(); // false
```

## Closing Confirmation

To change the closing confirmation behavior, use the `enableConfirmation()`
and `disableConfirmation()` methods. These methods update the `isConfirmationEnabled` signal
property value.

```ts
closingBehavior.enableConfirmation();
closingBehavior.isConfirmationEnabled(); // true

closingBehavior.disableConfirmation();
closingBehavior.isConfirmationEnabled(); // false
```
```
---
## File: apps/docs/packages/tma-js-sdk/features/cloud-storage.md

```markdown
# ðŸ’ Cloud Storage

A component responsible for managing the cloud storage in Telegram Mini Apps.

## Checking Support

To check if the cloud storage is supported by the current Telegram Mini Apps version, the `isSupported` signal is used:

```ts
import { cloudStorage } from '@tma.js/sdk';

cloudStorage.isSupported(); // boolean
```

## Setting Items

To set a key value, use the `setItem` method.

```ts
await cloudStorage.setItem('a', 'a-value');
```

## Getting Keys

To retrieve a list of all existing keys, use the `getKeys` method.

```ts
const keys = await cloudStorage.getKeys(); // ['a', 'b', 'c']
```

## Getting Items

To get the value of a specific key or multiple keys, use the `getItem` and `getItems` methods.

```ts
const nonExistent = await cloudStorage.getItem('non-existent');
// The result is an empty string: ''

const existent = await cloudStorage.getItem('a');
// The result is the value of the 'a' key. Example: 'a-value'

const values = await cloudStorage.getItems(['a', 'b', 'non-existent']);
// The result is a record of the keys 'a', 'b', and 'non-existent'. 
// Example:
// { 
//   a: 'a-value', 
//   b: 'b-value', 
//   'non-existent': '', 
// }
```

## Deleting Items

To delete a key or a list of keys, use the `deleteItem` method.

```ts
await cloudStorage.deleteItem('a');
await cloudStorage.deleteItem(['a', 'b', 'c']);
```

```
---
## File: apps/docs/packages/tma-js-sdk/features/emoji-status.md

```markdown
# âš™ï¸Emoji Status

## `requestEmojiStatusAccess`

To request access to user emoji status update, use the `requestEmojiStatusAccess` function:

```ts
import { requestEmojiStatusAccess } from '@tma.js/sdk';

const status = await requestEmojiStatusAccess();
```

## `setEmojiStatus`

To set an emoji status on user's behalf, use the `setEmojiStatus` function.

As the first argument, it accepts a custom emoji id. Optionally, you can pass the second
argument determining for how many seconds the status must be set.

```ts
import { setEmojiStatus } from '@tma.js/sdk';

// Set for unlimited period of time.
await setEmojiStatus('5361800828313167608');

// Set for 1 day.
await setEmojiStatus('5361800828313167608', 86400);
```
```
---
## File: apps/docs/packages/tma-js-sdk/features/haptic-feedback.md

```markdown
# ðŸ’ Haptic Feedback

A component responsible for the Telegram Mini
Apps [haptic feedback](../../../platform/haptic-feedback.md).

## Checking Support

To check if the haptic feedback is supported by the current Telegram Mini Apps version, the `isSupported` signal is used:

```ts
import { hapticFeedback } from '@tma.js/sdk';

hapticFeedback.isSupported(); // boolean
```

## Impact Occurred

`impactOccurred` is the method that signals an impact event. The Telegram app may play the
appropriate haptic feedback based on the style value passed.

```ts
hapticFeedback.impactOccurred('medium');
```

The available styles for the impact haptic event are:

- `light`: indicates a collision between small or lightweight UI objects.
- `medium`: indicates a collision between medium-sized or medium-weight UI objects.
- `heavy`: indicates a collision between large or heavyweight UI objects.
- `rigid`: indicates a collision between hard or inflexible UI objects.
- `soft`: indicates a collision between soft or flexible UI objects.

## Notification Occurred

`notificationOccurred` is the method that signals a task or action has succeeded, failed, or
triggered a warning. The Telegram app may play the appropriate haptic feedback based on the type
value passed.

```ts
hapticFeedback.notificationOccurred('success');
```

The types of notification events are:

- `error`: indicates that a task or action has failed.
- `success`: indicates that a task or action has been completed successfully.
- `warning`: indicates that a task or action has triggered a warning.

## Selection Changed

`selectionChanged` is the method that signals a user has changed a selection. The Telegram app may
play the appropriate haptic feedback.

Use this feedback only when the selection changes, not when a selection is made or confirmed.

```ts
hapticFeedback.selectionChanged();
```

```
---
## File: apps/docs/packages/tma-js-sdk/features/home-screen.md

```markdown
# âš™ï¸Home Screen

## `addToHomeScreen`

To prompt the user to add the Mini App to the home screen, use the `addToHomeScreen` function.

```ts
import { addToHomeScreen } from '@tma.js/sdk';

addToHomeScreen();
```

To track whether the current Mini App is added to the device's home screen, use the `on` and `off` functions:

```ts
import { on, off } from '@tma.js/sdk';

function onAdded() {
  console.log('Added');
}

on('home_screen_added', onAdded);
off('home_screen_added', onAdded);

function onFailed() {
  console.log('User declined the request');
}

on('home_screen_failed', onFailed);
off('home_screen_failed', onFailed);
```

> [!NOTE]  
> If the device cannot determine the installation status, the corresponding event may not be received even if the icon
> has been added.

## `checkHomeScreenStatus`

The `checkHomeScreenStatus` function checks if the user has already added the Mini App to the
device's home screen.

```ts
import { checkHomeScreenStatus } from '@tma.js/sdk';

const status = await checkHomeScreenStatus();
```

```
---
## File: apps/docs/packages/tma-js-sdk/features/init-data.md

```markdown
---
outline: [ 2, 3 ]
---

# ðŸ’ Init Data

A component responsible for the Telegram Mini
Apps [init data](../../../platform/init-data.md).

## Restoring

To restore the component state, use the `restore` method.

```ts
import { initData } from '@tma.js/sdk';

initData.restore();
```

## Parsing

To parse a value as init data, use the `parseInitDataQuery` function.

```ts
import { parseInitDataQuery } from '@tma.js/sdk';

const initData = parseInitDataQuery('auth_date=123&query_id=anQQ231vs&...');
// {
//   user: {
//     id: 99281932,
//     first_name: 'Andrew',
//     last_name: 'Rogue',
//     username: 'rogue',
//     language_code: 'en',
//     is_premium: true,
//     allows_write_to_pm: true,
//   },
//   hash: 'abcedef123',
//   auth_date: Date(1716922846000),
//   start_param: 'debug',
//   chat_type: 'sender',
//   chat_instance: '8428209589180549439',
// };
```

The function returns the [init data](../../../platform/init-data.md#parameters-list) object.

## Signals

This section provides a complete list of signals related to the init data.

### `authDate`

Return type: `Date | undefined`

A date the initialization data was created.

```ts
initData.authDate(); // Date(1727368894000)
```

### `canSendAfter`

Return type: `number | undefined`

A number of seconds after which a message can be sent via the
method [answerWebAppQuery](https://core.telegram.org/bots/api#answerwebappquery).

```ts
initData.canSendAfter(); // 3600
```

### `canSendAfterDate`

Return type: `Date | undefined`

[canSendAfter](#cansendafter) but as a Date.

```ts
initData.canSendAfterDate(); // Date(1727368897600)
```

### `chat`

Return type: `undefined` or [`Chat`](../../../platform/init-data.md#chat)

An object containing data about the chat where the bot was launched via the attachment menu.

> [!NOTE]
> Returned for supergroups, channels and group chats â€“ only for Mini Apps launched via the attachment menu.

```ts
initData.chat();
// {
//   id: 7728725378876215,
//   type: 'group',
//   title: '@BotFather',
//   photo_url: 'https://example.com/image.png',
//   username: 'botfather'
// }
```

### `chatType`

Return type: `string | undefined`

A type of chat from which the Mini Apps was opened. Values:

- `sender`
- `private`
- `group`
- `supergroup`
- `channel`

> [!NOTE]
> Returned only for applications opened by direct link.

```ts
initData.chatType(); // 'group'
```

### `chatInstance`

Return type: `string | undefined`

A global identifier indicating the chat from which the Mini Apps was opened.

> [!WARNING]
> Returned only for applications opened by direct link.

```ts
initData.chatInstance(); // 'group'
```

### `hash`

Return type: `string | undefined`

An initialization data signature.

```ts
initData.hash(); // 'group'
```

### `queryId`

Return type: `string | undefined`

A unique session ID of the Mini App. Used in the process of sending a message via the
method [answerWebAppQuery](https://core.telegram.org/bots/api#answerwebappquery).

```ts
initData.queryId(); // 'hSvhacj28716'
```

### `raw`

Return type: `string | undefined`

A raw string representation of the initialization data.

```ts
initData.raw(); // 'user=...&chat=...&...'
```

### `receiver`

Return type: `undefined` or [`User`](../../../platform/init-data.md#user)

An object containing data about the chat partner of the current user in the chat where the bot was launched via the
attachment menu.

> [!NOTE]
> Returned only for private chats and only for Mini Apps launched via the attachment menu.

```ts
initData.receiver();
// {
//   added_to_attachment_menu: false,
//   allows_write_to_pm: true,
//   is_premium: true,
//   first_name: 'Pavel',
//   id: 78262681,
//   is_bot: false,
//   last_name: 'Durov',
//   language_code: 'ru',
//   photo_url: 'https://example.com/image.png',
//   username: 'durove',
// }
```

### `state`

Return type: `undefined` or [`InitData`](../../../platform/init-data.md#parameters-list)

An object containing the initialization data in object format.

```ts
initData.state();
```

### `startParam`

Return type: `string | undefined`

A value of the `startattach` or `startapp` query parameter specified in the link.

```ts
initData.startParam(); // 'my-value'
```

### `user`

Return type: `undefined` or [`User`](../../../platform/init-data.md#user)

An object containing information about the current user.

```ts
initData.user();
// {
//   added_to_attachment_menu: false,
//   allows_write_to_pm: true,
//   is_premium: true,
//   first_name: 'Pavel',
//   id: 78262681,
//   is_bot: false,
//   last_name: 'Durov',
//   language_code: 'ru',
//   photo_url: 'https://example.com/image.png',
//   username: 'durove',
// }
```

```
---
## File: apps/docs/packages/tma-js-sdk/features/invoice.md

```markdown
# ðŸ’ Invoice

A component responsible for the
Telegram [invoices](https://core.telegram.org/bots/payments#introducing-payments-2-0).

## Checking Support

To check if invoices are supported by the current Telegram Mini Apps version, the `isSupported` signal is used:

```ts
import { invoice } from '@tma.js/sdk';

invoice.isSupported(); // boolean
```

## Opening

To open an invoice, it is required to use the `openSlug` or `openUrl` methods. These method allow opening invoices
using their URLs or slugs.

Calling the method updates the `isOpened` signal.

```ts
import { invoice } from '@tma.js/sdk';

// Opening via slug:
invoice.isOpened(); // false
const promise = invoice.openSlug('abIIks213');
invoice.isOpened(); // true
const status = await promise;
invoice.isOpened(); // false

// Opening via URL:
await invoice.openUrl('https://t.me/invoice/abIIks213');
```

```
---
## File: apps/docs/packages/tma-js-sdk/features/links.md

```markdown
# âš™ï¸Links

## `openLink`

To open a link in an external browser or using [Instant View](https://instantview.telegram.org/),
use the `openLink` method. You can also pass an optional second argument, an object with optional
properties `tryBrowser: OpenLinkBrowser (string)` and `tryInstantView: boolean`.

```ts
import { openLink } from '@tma.js/sdk';

openLink('https://telegram.org', {
  tryBrowser: 'chrome',
  tryInstantView: true,
});
```

## `openTelegramLink`

To open a Telegram link with predefined behavior, use the `openTelegramLink` method. This method
allows you to apply the native behavior as described in
the [Deep Links](https://core.telegram.org/api/links) documentation.

```ts
import { openTelegramLink } from '@tma.js/sdk';

openTelegramLink('https://t.me/heyqbnk');
```

## `shareURL`

To share a URL with another user, channel, or group, use the `shareURL` method.

```ts
import { shareURL } from '@tma.js/sdk';

shareURL('https://t.me/heyqbnk', 'Check out this cool group!');
```

```
---
## File: apps/docs/packages/tma-js-sdk/features/location-manager.md

```markdown
# ðŸ’ Location Manager

A component responsible for location tracking functionality for Telegram Mini Apps.

## Checking Support

To check if location tracking is supported by the current Telegram Mini Apps version, use the `isSupported` signal:

```ts
import { locationManager } from '@tma.js/sdk';

locationManager.isSupported(); // boolean
```

## Mounting

Before using the component, it must be mounted.

This process is asynchronous, as location manager settings need to be requested from the Telegram application. The
`isMounting` signal will be set to `true` during the process and updated to `false` when complete.

If mounting is successful, the `isMounted` signal will be set to `true`.

```ts
try {
  const promise = locationManager.mount();
  locationManager.isMounting(); // true
  await promise;
  locationManager.isMounting(); // false
  locationManager.isMounted(); // true
} catch (err) {
  locationManager.isMounting(); // false
  locationManager.isMounted(); // false
}
```

To unmount, use the `unmount` method:

```ts
locationManager.unmount();
locationManager.isMounted(); // false
```

## Requesting Location

To request the current location, use the `requestLocation` method. It returns a cancelable promise
with an object, describing the current device location.

```ts
const location = await locationManager.requestLocation();
```

The object contains the following numeric properties:

| Property              | Description                                                          |
|-----------------------|----------------------------------------------------------------------|
| `latitude`            | Latitude in degrees.                                                 |
| `longitude`           | Longitude in degrees.                                                |
| `altitude`            | _Optional_. Altitude above sea level in meters.                      |
| `course`              | _Optional_. The direction the device is moving in degrees.           |
| `speed`               | _Optional_. The speed of the device in m/s.                          |
| `horizontal_accuracy` | _Optional_. Accuracy of the latitude and longitude values in meters. |
| `vertical_accuracy`   | _Optional_. Accuracy of the altitude value in meters.                |
| `course_accuracy`     | _Optional_. Accuracy of the course value in degrees.                 |
| `speed_accuracy`      | _Optional_. Accuracy of the speed value in m/s.                      |

## Opening Settings

To open the location manager-related settings modal, use the `openSettings` method. This method can
only be triggered in response to user interaction.

```ts
locationManager.openSettings();
```

```
---
## File: apps/docs/packages/tma-js-sdk/features/main-button.md

```markdown
# ðŸ’ Main Button

A component responsible for the Telegram Mini Apps [main button](../../../platform/main-button.md).

## Mounting

Before using this component, it is necessary to mount it to work with properly configured
properties. To do so, use the `mount` method. It will update the `isMounted` signal.

```ts
import { mainButton } from '@tma.js/sdk';

mainButton.mount();
mainButton.isMounted(); // true
```

To unmount, use the `unmount` method:

```ts
mainButton.unmount();
mainButton.isMounted(); // false
```

> [!WARNING]
> This component's properties depend on values from the [Theme Params](theme-params.md) component.
> Make sure to mount Theme Params before using the Main Button.

## Settings Properties

To update the button properties, use the `setParams` method. It accepts an object with optional properties, each
responsible for its own button trait.

In turn, calling this method updates such signals as `bgColor`, `hasShineEffect`, `isVisible`, `isEnabled`,
`isLoaderVisible`, `state`, `textColor` and `text`.

```ts
mainButton.setParams({
  bgColor: '#000000',
  hasShineEffect: true,
  isEnabled: true,
  isLoaderVisible: true,
  isVisible: true,
  text: 'My text',
  textColor: '#ffffff'
});
mainButton.bgColor(); // '#000000'
mainButton.hasShineEffect(); // true
mainButton.isEnabled(); // true
mainButton.isLoaderVisible(); // true
mainButton.isVisible(); // true
mainButton.text(); // 'My text'
mainButton.textColor(); // '#ffffff'

mainButton.state();
// {
//   bgColor: '#000000',
//   hasShineEffect: true,
//   isActive: true,
//   isLoaderVisible: true,
//   isVisible: true,
//   text: 'My text',
//   textColor: '#ffffff'
// }
```

## Tracking Click

To add a button click listener, use the `onClick` method. It returns a function to remove the bound
listener. Alternatively, you can use the `offClick` method.

```ts
function listener() {
  console.log('Clicked!');
}

const offClick = mainButton.onClick(listener);
offClick();
// or
mainButton.onClick(listener);
mainButton.offClick(listener);
```

```
---
## File: apps/docs/packages/tma-js-sdk/features/mini-app.md

```markdown
# ðŸ’ Mini App

A component responsible for managing functionality within Telegram Mini Apps.

## Mounting

Before using the component, it must be mounted.

To mount the component, use the `mount` method, it will update the `isMounted` signal. But to have proper
properties' values, before mounting the `miniApp`, it is required to mount `themeParams`.

So, the final correct mount example will be the following:

```ts
import { miniApp, themeParams } from '@tma.js/sdk';

themeParams.mount();
miniApp.mount();
miniApp.isMounted(); // true
```

To unmount the component, use the `unmount` method:

```ts
miniApp.unmount();
miniApp.isMounted(); // false
```

## Binding CSS Variables

To expose the `miniApp` properties via CSS variables, use the `bindCssVars` method. The `isCssVarsBound` signal
is updated after the method is called.

This method optionally accepts a function that transforms the values `bgColor` and `headerColor`
into CSS variable names. By default, values are converted to kebab case with the prefix `--tg-`.

```ts
miniApp.bindCssVars();
// Creates CSS variables like:
// --tg-bg-color: #aabbcc
// --tg-header-color: #aabbcc

miniApp.bindCssVars(key => `--my-prefix-${key}`);
// Creates CSS variables like:
// --my-prefix-bgColor: #aabbcc
// --my-prefix-headerColor: #aabbcc

miniApp.isCssVarsBound(); // true
```

## Header Color

To change the mini application header color, the method `setHeaderColor` is used. In turn, calling this method updates
the `headerColor` signal.

The method accepts either an RGB color value or one of the following strings: `bg_color`, `secondary_bg_color`.

```ts
miniApp.setHeaderColor('bg_color');
miniApp.headerColor(); // 'bg_color'

if (miniApp.setHeaderColor.supports('rgb')) {
  miniApp.setHeaderColor('#aabbcc');
  miniApp.headerColor(); // '#aabbcc'
}
```

## Background Color

To update the mini application background color, use the `setBgColor` method. Calling this method updates the `bgColor`
signal.

```ts
miniApp.setBgColor('#ffffff');
miniApp.bgColor(); // '#ffffff'
```

## Active State

The mini application becomes inactive if it is wrapped into the bottom native Telegram client tray
or if the currently active tab of the mini apps browser is changed to another one.

To track if the mini application is currently active, use the `isActive` signal.

```ts
miniApp.isActive();
```

## Methods

### `close`

To close the mini application, use the `close` method.

```ts
miniApp.close();
```

### `ready`

To signal that the Mini App is ready to be displayed, use the `ready` method. Once called, the loading placeholder is
hidden, and the Mini App is shown.

```ts
miniApp.ready();
```

> [!TIP]
> Call this function as early as possible after loading essential interface elements to ensure a smooth user experience.
```
---
## File: apps/docs/packages/tma-js-sdk/features/popup.md

```markdown
# ðŸ’ Popup

A component responsible for the Telegram Mini Apps [popup](../../../platform/popup.md).

## Checking Support

To check if the popup is supported by the current Telegram Mini Apps version, the `isSupported` signal is used:

```ts
import { popup } from '@tma.js/sdk';

popup.isSupported(); // boolean
```

## Opening

To open a popup, it is required to call the `open` method specifying popup properties: title, message, and a list of up
to 3 buttons.

The method returns a promise, which will be fulfilled with the clicked button identifier. In the case where the user
didn't click any button, the method will return `null`.

Calling the method updates the `isOpened` signal.

```ts
import { popup } from '@tma.js/sdk';

// popup.isOpened() -> false
const promise = popup.open({
  title: 'Hello!',
  message: 'Here is a test message.',
  buttons: [{ id: 'my-id', type: 'default', text: 'Default text' }],
});
// popup.isOpened() -> true
const buttonId = await promise;
// popup.isOpened() -> false
```

```
---
## File: apps/docs/packages/tma-js-sdk/features/privacy.md

```markdown
# âš™ï¸Privacy

## `requestPhoneAccess`

To request access to a user's phone information, use the `requestPhoneAccess` method. If the user
grants access, the developer's bot will receive the phone details.

```ts
import { requestPhoneAccess } from '@tma.js/sdk';

const status = await requestPhoneAccess();
// status will be 'sent' | 'cancelled' | string
```

## `requestWriteAccess`

To request permission to send messages to the user, use the `requestWriteAccess` method.

```ts
import { requestWriteAccess } from '@tma.js/sdk';

const status = await requestWriteAccess();
// status will be 'allowed' | string
```

## `requestContact`

To retrieve a user's contact information, use the `requestContact` method.

```ts
import { requestContact } from '@tma.js/sdk';

const contact = await requestContact();
// {
//   contact: {
//     user_id: 1,
//     phone_number: '+987654321',
//     first_name: 'Vladislav',
//     last_name: 'Kibenko'
//   },
//   auth_date: Date(12345678),
//   hash: 'abcdefgh'
// };
```

## `requestContactComplete`

This function works the same as [requestContactComplete](#requestContactComplete), but it also returns a raw
representation of the contact data from the Telegram client, so its signature could be verified.

```ts
import { requestContactComplete } from '@tma.js/sdk';

const contact = await requestContactComplete();
// {
//   raw: 'contact=...&auth_date=...&hash=...',
//   contact: { ... }
// }
```
```
---
## File: apps/docs/packages/tma-js-sdk/features/qr-scanner.md

```markdown
# ðŸ’ QR Scanner

The component which provides the QR scanner functionality.

## Capturing a Single QR

To capture a single QR, use the `capture` method with the `capture` option.

```ts
import { qrScanner } from '@tma.js/sdk';

const promise = qrScanner.capture({
  capture(scannedQr) {
    return scannedQr === 'expected qr by me';
  },
});
// qrScanner.isOpened() -> true
const qr = await promise;
// qrScanner.isOpened() -> false
```

The `capture` option should return true if the captured QR should be returned. After resolving the promise, the QR
scanner will be closed automatically. 

Note that the promise may also resolve with `undefined` in case the QR scanner was closed.

## Capturing Multiple QR-s

To capture multiple QR-s, use the `open` method with the `onCaptured` option.

```ts
import { qrScanner } from '@tma.js/sdk';

const promise = qrScanner.open({
  onCapture(scannedQr) {
    if (scannedQr === 'expected qr by me') {
      console.log('Ok, we got a valid QR');
      qrScanner.close();
    }
  },
});
// qrScanner.isOpened() -> true
await promise;
// qrScanner.isOpened() -> false
```

In this case, you should close the QR scanner by yourself when it is needed.

```
---
## File: apps/docs/packages/tma-js-sdk/features/secondary-button.md

```markdown
# ðŸ’ Secondary Button

A component responsible for the Telegram Mini Apps Secondary Button.

## Checking Support

To check if the Secondary Button is supported by the current Telegram Mini Apps version, use the `isSupported` signal:

```ts
import { secondaryButton } from '@tma.js/sdk';

secondaryButton.isSupported(); // boolean
```

## Mounting

Before using this component, it is necessary to mount it to work with properly configured properties. To do so, use the
`mount` method, it will update the `isMounted` signal.

As long as the secondary button depends on some values from [Mini App](mini-app.md) and [Theme Params](theme-params.md)
components, they should be mounted first.

```ts
import { secondaryButton, miniApp, themeParams } from '@tma.js/sdk';

miniApp.mount();
themeParams.mount();
secondaryButton.mount();
secondaryButton.isMounted(); // true
```

To unmount, use the `unmount` method:

```ts
secondaryButton.unmount();
secondaryButton.isMounted(); // false
```

## Settings Properties

To update the button properties, use the `setParams` method. It accepts an object with optional properties, each
responsible for its own button trait.

In turn, calling this method updates such signals
as `bgColor`, `hasShineEffect`, `isVisible`, `isEnabled`, `isLoaderVisible`, `position`,
`state`, `textColor` and `text`.

```ts
secondaryButton.setParams({
  bgColor: '#000000',
  hasShineEffect: true,
  isEnabled: true,
  isLoaderVisible: true,
  isVisible: true,
  position: 'top',
  text: 'My text',
  textColor: '#ffffff'
});
secondaryButton.bgColor(); // '#000000'
secondaryButton.hasShineEffect(); // true
secondaryButton.isEnabled(); // true
secondaryButton.isLoaderVisible(); // true
secondaryButton.isVisible(); // true
secondaryButton.position(); // 'top'
secondaryButton.text(); // 'My text'
secondaryButton.textColor(); // '#ffffff'

secondaryButton.state();
// {
//   bgColor: '#000000',
//   hasShineEffect: true,
//   isActive: true,
//   isLoaderVisible: true,
//   isVisible: true,
//   position: 'top',
//   text: 'My text',
//   textColor: '#ffffff'
// }
```

## Tracking Click

To add a button click listener, use the `onClick` method. It returns a function to remove the bound listener.
Alternatively, you can use the `offClick` method.

```ts
function listener() {
  console.log('Clicked!');
}

const offClick = secondaryButton.onClick(listener);
offClick();
// or
secondaryButton.onClick(listener);
secondaryButton.offClick(listener);
```

```
---
## File: apps/docs/packages/tma-js-sdk/features/settings-button.md

```markdown
# ðŸ’ Settings Button

A component responsible for the Telegram Mini Apps [settings button](../../../platform/settings-button.md).

## Checking Support

To check if the settings button supported by the current Telegram Mini Apps version, the `isSupported` signal is used:

```ts
import { settingsButton } from '@tma.js/sdk';

settingsButton.isSupported(); // boolean
```

## Mounting

Before using the component, it is necessary to mount it to work with properly configured properties. To do so, use the
`mount` method. It will update the `isMounted` signal.

```ts
import { settingsButton } from '@tma.js/sdk';

settingsButton.mount();
settingsButton.isMounted(); // true
```

To unmount, use the `unmount` method:

```ts
settingsButton.unmount();
settingsButton.isMounted(); // false
```

## Showing and Hiding

To change the button's visibility, use the `hide()` and `show()` methods. These methods update the `isVisible` signal.

```ts
settingsButton.show();
settingsButton.isVisible(); // true

settingsButton.hide();
settingsButton.isVisible(); // false
```

## Tracking Click

To add a button click listener, use the `onClick` method. It returns a function to remove the bound listener.
Alternatively, you can use the `offClick` method.

```ts
function listener() {
  console.log('Clicked!');
}

const offClick = settingsButton.onClick(listener);
offClick();
// or
settingsButton.onClick(listener);
settingsButton.offClick(listener);
```

```
---
## File: apps/docs/packages/tma-js-sdk/features/swipe-behavior.md

```markdown
# ðŸ’ Swipe Behavior

A component responsible for the Telegram Mini Apps swipe behavior.

## Checking Support

To check if the swipe behavior supported by the current Telegram Mini Apps version, the `isSupported` signal is used:

```ts
import { swipeBehavior } from '@tma.js/sdk';

swipeBehavior.isSupported(); // boolean
```

## Mounting

Before using the component, it is necessary to mount it to work with properly configured properties. To do so, use the
`mount` method. It will update the `isMounted` signal.

```ts
import { swipeBehavior } from '@tma.js/sdk';

swipeBehavior.mount();
swipeBehavior.isMounted(); // true
```

To unmount, use the `unmount` method:

```ts
swipeBehavior.unmount();
swipeBehavior.isMounted(); // false
```

## Controlling Vertical Swipes

To enable or disable vertical swipes, use the `enableVertical` and `disableVertical` methods. Calling these methods,
update the `isVerticalEnabled` signal.

```ts
swipeBehavior.enableVertical();
swipeBehavior.isVerticalEnabled(); // true

swipeBehavior.disableVertical();
swipeBehavior.isVerticalEnabled(); // false
```
```
---
## File: apps/docs/packages/tma-js-sdk/features/theme-params.md

```markdown
# ðŸ’ Theme Params

A component responsible for the Telegram Mini Apps [theme parameters](../../../platform/theming.md).

## Mounting

Before using the component, it must be mounted.

To mount the component, use the `mount` method. It will update the `isMounted` signal.

```ts
import { themeParams } from '@tma.js/sdk';

themeParams.mount();
themeParams.isMounted(); // true
```

To unmount, use the `unmount` method:

```ts
themeParams.unmount();
themeParams.isMounted(); // false
```

## Binding CSS Variables

This component allows its properties to be exposed via CSS variables.

To create new CSS variables, use the `bindCssVars` method. When called, it updates the `isCssVarsBound` signal.

This method optionally accepts a function that receives a theme palette key in camel case format and
returns a CSS variable name. By default, the method transforms the palette key using these rules:

- Converts the value to kebab case.
- Prepends the `--tg-theme-` prefix.

```ts
themeParams.bindCssVars();
// Creates CSS variables like:
// --tg-theme-button-color: #aabbcc
// --tg-theme-accent-text-color: #aabbcc
// --tg-theme-bg-color: #aabbcc
// ...

themeParams.bindCssVars(key => `--my-prefix-${key}`);
// Creates CSS variables like:
// --my-prefix-buttonColor: #aabbcc
// --my-prefix-accentTextColor: #aabbcc
// --my-prefix-bgColor: #aabbcc
// ...

// themeParams.isCssVarsBound() -> true
```

## Properties

```ts
themeParams.accentTextColor(); // RGB | undefined
themeParams.bgColor(); // RGB | undefined
themeParams.buttonTextColor(); // RGB | undefined
themeParams.buttonColor(); // RGB | undefined
themeParams.destructiveTextColor(); // RGB | undefined
themeParams.headerBgColor(); // RGB | undefined
themeParams.hintColor(); // RGB | undefined
themeParams.linkColor(); // RGB | undefined
themeParams.subtitleTextColor(); // RGB | undefined
themeParams.sectionBgColor(); // RGB | undefined
themeParams.secondaryBgColor(); // RGB | undefined
themeParams.sectionSeparatorColor(); // RGB | undefined
themeParams.sectionHeaderTextColor(); // RGB | undefined
themeParams.textColor(); // RGB | undefined

themeParams.state(); // Record<string, RGB>;
```
```
---
## File: apps/docs/packages/tma-js-sdk/features/uncategorized.md

```markdown
# âš™ï¸Uncategorized

## `copyTextToClipboard`

Copies specified text to the clipboard using all known methods.

```ts
import { copyTextToClipboard } from '@tma.js/sdk';

await copyTextToClipboard('My text goes here');
```

## `downloadFile`

To request file download, use the `downloadFile` function. It accepts a file URL and its proposed saved name.

```ts
import { downloadFile } from '@tma.js/sdk';

await downloadFile(
  'https://telegram.org/js/telegram-web-app.js',
  'telegram-sdk.js',
);
```

## `getCurrentTime`

To retrieve the current Telegram server time, use the `getCurrentTime` function. It returns
a JavaScript `Date` object.

```ts
import { getCurrentTime } from '@tma.js/sdk';

const time = await getCurrentTime(); // Date
```

## `hideKeyboard`

To hide the on-screen keyboard, use the `hideKeyboard` function.

```ts
import { hideKeyboard } from '@tma.js/sdk';

hideKeyboard();
```

## `readTextFromClipboard`

To read text from the clipboard, use the `readTextFromClipboard` function.

```ts
import { readTextFromClipboard } from '@tma.js/sdk';

const text = await readTextFromClipboard(); // string | null
```

## `retrieveAndroidDeviceData`

Retrieves [Android device data](https://core.telegram.org/bots/webapps#additional-data-in-user-agent) from the
`navigator.userAgent`.

The function always returns an object describing the Android device data with all keys marked as optional.

```ts
import { retrieveAndroidDeviceData } from '@tma.js/sdk';

const data = retrieveAndroidDeviceData();
// Example complete output:
// {
//   manufacturer: 'Samsung',
//   performanceClass: 'AVERAGE',
//   model: 'SM-A155F',
//   androidVersion: '14',
//   sdkVersion: 34,
// }
```

## `retrieveAndroidDeviceDataFrom`

This function works the same as [retrieveAndroidDeviceData](#retrieveandroiddevicedata), but allows passing a custom
value to parse.

```ts
import { retrieveAndroidDeviceDataFrom } from '@tma.js/sdk';

const data = retrieveAndroidDeviceDataFrom(navigator.userAgent);
// Example complete output:
// {
//   manufacturer: 'Samsung',
//   performanceClass: 'AVERAGE',
//   model: 'SM-A155F',
//   androidVersion: '14',
//   sdkVersion: 34,
// }
```

## `shareStory`

The `shareStory` method opens the native story editor.

It has one required parameter: a media URL that will be used as the background for the story.

```ts
import { shareStory } from '@tma.js/sdk';

shareStory('https://my.media/background.png');
```

The function optionally accepts an object with additional options:

- `text?: string` - a caption to add to the media, with a limit of 0-200 characters for regular
  users, and 0-2048 characters
  for [premium subscribers](https://telegram.org/faq_premium#telegram-premium).
- `widgetLink?: object` - an object for including a widget link in the story.
  Only [premium subscribers](https://telegram.org/faq_premium#telegram-premium) can post stories
  with links.
  - `url: string` - the URL to be included in the story.
  - `name?: string` - the display name for the widget link (0-48 characters).

```ts
shareStory('https://my.media/background.png', {
  text: 'Today was a good day. Love it! Thanks to this public!',
  widgetLink: {
    url: 'https://t.me/heyqbnk',
    name: 'heyqbnk public group',
  },
});
```

## `sendData`

To send data to the bot, use the `sendData` function. This function sends a service message to the
bot and closes the Mini App.

```ts
import { sendData } from '@tma.js/sdk';

sendData('my-data-goes-here');
```

> [!TIP]
> This function sends data up to 4096 bytes to the bot and is available for Mini Apps launched via a
> Keyboard button.

> [!WARNING]
> This function is only accessible for Mini Apps started through a Keyboard button. See
> the `web_app_data` field in the [Message](https://core.telegram.org/bots/api#message) class for
> more details.

## `shareMessage`

To share a prepared by your server message, use the `shareMessage` function. It opens a dialog
allowing the user to share a message provided by the bot.

```ts
import { shareMessage } from '@tma.js/sdk';

await shareMessage('my message id');
```

The value passed to the function is a message identifier returned by
the [savePreparedInlineMessage](https://core.telegram.org/bots/api#savepreparedinlinemessage)
Telegram Bot API method.

## `switchInlineQuery`

To create a message prefixed with the bot username and a specific text, and share it in another
chat, use the `switchInlineQuery` method. You can use the second optional argument to specify which
chat types can be selected to send the message.

```ts
import { switchInlineQuery } from '@tma.js/sdk';

switchInlineQuery('Check this bot!', [
  'users',
  'bots',
  'groups',
  'channels',
]);
```

```
---
## File: apps/docs/packages/tma-js-sdk/features/viewport.md

```markdown
# ðŸ’ Viewport

A component responsible for the Telegram Mini Apps [viewport](../../../platform/viewport.md).

## Mounting

Before using the component, it must be mounted.

This process is asynchronous, as viewport information needs to be requested from the Telegram application. The
`isMounting` signal will be set to `true` during the process and updated to `false` when complete.

If mounting is successful, the `isMounted` signal will be set to `true`.

```ts
try {
  const promise = viewport.mount();
  viewport.isMounting(); // true
  await promise;
  viewport.isMounting(); // false
  viewport.isMounted(); // true
} catch (err) {
  viewport.isMounting(); // false
  viewport.isMounted(); // false
}
```

To unmount, use the `unmount` method:

```ts
viewport.unmount();
viewport.isMounted(); // false
```

## Binding CSS Variables

To expose the `viewport` properties via CSS variables, use the `bindCssVars` method. The `isCssVarsBound` signal is
updated after the method is called.

This method optionally accepts a function that transforms the values `width`, `height` and `stableHeight` into CSS
variable names. By default, values are converted to kebab case with the prefix `--tg-viewport-`.

```ts
import { viewport } from '@tma.js/sdk';

viewport.bindCssVars();
// Creates CSS variables like:
// --tg-viewport-height: 675px
// --tg-viewport-width: 320px
// --tg-viewport-stable-height: 675px

viewport.bindCssVars(key => `--my-prefix-${key}`);
// Creates CSS variables like:
// --my-prefix-height: 675px
// --my-prefix-width: 320px
// --my-prefix-stableHeight: 675px

viewport.isCssVarsBound(); // true
```

## Expanding

To expand the viewport, use the `expand` method.

```ts
viewport.expand();
```

## Fullscreen Mode

To enable the fullscreen mode, the method `requestFullscreen` is used:

```ts
await viewport.requestFullscreen();
viewport.isFullscreen(); // true
```

To exit the fullscreen mode, use the `exitFullscreen` method:

```ts
await viewport.exitFullscreen();
viewport.isFullscreen(); // false
```

## Safe Area Insets

The viewport component offers access to two types of insets:

- **Safe area insets**
- **Content safe area insets**

For more details on the differences between these inset types, visit the [**Viewport**](../../../platform/viewport.md)
page.

The component provides access to these insets through the following signals:

```ts
// Objects with numeric properties "top", "bottom", "left" and "right".
viewport.safeAreaInsets();
viewport.contentSafeAreaInsets();

// Numeric values.
viewport.safeAreaInsetTop();
viewport.safeAreaInsetBottom();
viewport.safeAreaInsetLeft();
viewport.safeAreaInsetRight();
viewport.contentSafeAreaInsetTop();
viewport.contentSafeAreaInsetBottom();
viewport.contentSafeAreaInsetLeft();
viewport.contentSafeAreaInsetRight();
```
```
---
## File: apps/docs/packages/tma-js-sdk/features.md

```markdown
---
outline: [ 2, 3 ]
---

# Features

This package is designed to give developers full control over its lifecycle, including the
initialization process. Therefore, there are no pre-initialized features available for use;
developers must configure them themselves.

By *feature*, we refer to a collection of related functionality grouped into a single entity, or a collection itself.
Examples of features include `backButton` and `mainButton`. This design makes the SDK more intuitive and efficient to
use.

It's important to note that features are provided in the following forms:

ðŸ’ **Components**. They are exported as variables and usually represent a stateful object. The simplest examples are
`backButton`, `mainButton` and `hapticFeedback`.

âš™ï¸**Utilities**. They are exported as a set of functions. These features are abstract and not grouped
into a single variable. Examples include `openLink`, `shareURL`, etc.

## Usage Prerequisites

Each feature has at least two requirements:

1. **The SDK must be [initialized](./initializing.md)**. This ensures that you are using valid global dependencies.

```ts
import { init } from '@tma.js/sdk';

init();
```

2. **The method must be run inside Telegram Mini Apps**. Calling the method outside Telegram Mini Apps will not produce
   the expected behavior.

For component-related methods, there is an additional requirement:

3. **The parent component must be mounted**. This ensures that you are using a properly configured component.

```ts
import { init, backButton } from '@tma.js/sdk';

// Initialize the SDK.
init();

// Mount the Back Button component.
backButton.mount();
```

When all requirements are met, the method call becomes safe.

### Functions Availability

To check if a function is safe to call (available), use the `isAvailable()` signal:

```ts
import { backButton } from '@tma.js/sdk';

if (backButton.show.isAvailable()) {
  backButton.show();
}
```

This signal performs all checks described in the [Usage Prerequisites](#usage-prerequisites) section
and returns `true` if the current state satisfies them.

As an alternative, you may find the `ifAvailable(...args)` method useful. It calls the original
function with the provided arguments only if it is available (`isAvailable()` returns `true`):

```ts
import { backButton } from '@tma.js/sdk';

backButton.show.ifAvailable();
```

In case the original function (`backButton.show` in this case) is unavailable, the `ifAvailable`
method call will return one of the objects:

- `{ ok: true; data: *result* }` if the function was available 
- `{ ok: false }` if the function was unavailable

```
---
## File: apps/docs/packages/tma-js-sdk/initializing.md

```markdown
# Initializing

As long as the SDK uses some internal global dependencies, before using it, the package must be
configured. Not doing it, most package functions will not work at all and will throw a
corresponding error.

To initialize the SDK, the package provides the `init` function, which accepts an object
with the following structure:

```ts
interface InitOptions {
  /**
   * True if SDK should accept styles sent from
   * the Telegram client.
   * @default true
   */
  acceptCustomStyles?: boolean;
  /**
   * True if the application is launched in inline mode.
   * @default Will be calculated based on the launch
   * parameters' tgWebAppBotInline field.
   */
  isInlineMode?: boolean;
  /**
   * A custom `postEvent` function to use across the package.
   * @default tma.js/bridge's postEventFp function
   * will be used.
   */
  postEvent?: PostEventFpFn;
  /**
   * Mini application theme parameters.
   * @default Will be calculated based on the launch
   * parameters' tgWebAppThemeParams field.
   */
  themeParams?: ThemeParams;
  /**
   * Telegram Mini Apps version supported by the Telegram client.
   * @default Will be calculated based on the launch
   * parameters' tgWebAppVersion field.
   */
  version?: Version;
}
```

In most scenarios, a developer does not need to use these options.

By calling this function, the package's global dependencies will be configured, and the package becomes ready to use.

::: code-group
```ts [Throwing]
import { init } from '@tma.js/sdk';

init();
```

```ts [Functional]
import { initFp } from '@tma.js/sdk';

initFp();
```
:::
```
---
## File: apps/docs/packages/tma-js-sdk/migrate-from-telegram-apps.md

```markdown
# Migrating from @telegram-apps/sdk

This guide provides a summary of the migration process from `@telegram-apps/sdk` to `@tma.js/sdk`.

Before reading this document, it is recommended to first learn more about migration process related
to [@tma.js/bridge](../tma-js-bridge/migrate-from-telegram-apps.md) as you probably used some functionality from it.

## Loggers

The `bridgeLogger` variable and `BridgeLogger` type have been removed. You should now use `logger` and `Logger` if
needed.

## Component-related Functions and Variables Removed

`@tma.js/sdk` has moved away from this approach as it was quite difficult to support and didn't provide significant
benefits. Previously used component-related functions and variables such as `showBackButton`, `hideBackButton`,
`isBackButtonVisible`, and others should now be replaced with their component counterparts.

So, having this code:

```typescript
import {
  showBackButton,
  hideBackButton,
  isBackButtonVisible,
} from '@telegram-apps/sdk';

showBackButton();
isBackButtonVisible(); // true

hideBackButton();
isBackButtonVisible(); // false
```

You should update it to this one:

```typescript
import { backButton } from '@tma.js/sdk';

backButton.show();
backButton.isVisible(); // true

backButton.hide();
backButton.isVisible(); // false
```

## Errors

We have removed functions responsible for determining if a value is a specific error. Previously, you could use them
like this:

```typescript
import { isNotAvailableError } from '@telegram-apps/sdk';

if (isNotAvailableError(value)) {
  // value is NotAvailableError.
}
```

Now, you can achieve the same functionality with this code:

```typescript
import { NotAvailableError } from '@tma.js/sdk';

if (NotAvailableError.is(value)) {
  // value is NotAvailableError.
}
```

## `.ifAvailable()` Now Returns Object

Previously, functions' `ifAvailable` method returned a tuple: `[ok: true, value: something] | [ok: false]`. We've
updated it to return an object with `ok` and `data` fields for better clarity.

Here is an example:

```typescript
import { invoice } from '@tma.js/sdk';

console.log(invoice.openSlug.ifAvailable('abc'));
// Output:
// { ok: true, data: Promise<...> }
```

## `Biometry`

- `requestBiometry` has been removed. You can use the SDK's `request` method to achieve the same functionality.
- `isMounting`, `mountError`, and `mountPromise` have been removed.

## `Invoice`

- `openError` and `openPromise` have been removed.
- The `open` method was replaced with separate `openUrl` and `openSlug` methods.

## `LocationManager`

- `requestLocation` may now return `null` if there is no access to the location.

## `MainButton`

- The `backgroundColor` signal name was shortened to `bgColor`.

## `ThemeParams`

- Some signal names were shortened:
  - `backgroundColor` â†’ `bgColor`
  - `headerBackgroundColor` â†’ `headerBgColor`
  - `secondaryBackgroundColor` â†’ `secondaryBgColor`
  - `sectionBackgroundColor` â†’ `sectionBgColor`
- `mountSync` was removed.
- `mount` is now synchronous.

## `init`

The function options were updated. There is no longer a need to pass a complete set of launch parameters. Here is the
list of all options:

```typescript
interface InitOptions {
  /**
   * True if SDK should accept styles sent from the Telegram
   * application.
   * @default true
   */
  acceptCustomStyles?: boolean;
  /**
   * True if the application is launched in inline mode.
   * @default Will be calculated based on the launch parameters'
   * tgWebAppBotInline field.
   */
  isInlineMode?: boolean;
  /**
   * A custom `postEvent` function to use across the package.
   * @default tma.js/bridge's postEventFp function will be used.
   */
  postEvent?: PostEventFpFn;
  /**
   * Mini application theme parameters.
   * @default Will be calculated based on the launch parameters'
   * tgWebAppThemeParams field.
   */
  themeParams?: ThemeParams;
  /**
   * Telegram Mini Apps version supported by the Telegram
   * client.
   * @default Will be calculated based on the launch parameters'
   * tgWebAppVersion field.
   */
  version?: Version;
}
```

## `CloudStorage`

- The `getItem` method no longer accepts a list of keys.
- The `getItems` method is now used to get a list of keys.

## `Popup`

- The `show` method now returns `string | undefined` instead of `string | null`.

## `QrScanner`

- The `open` method was divided into `open` and `capture`. The `open` method allows capturing multiple QR-s, when
  the `capture` method is responsible for capturing a single QR. [Learn more](./features/qr-scanner.md)

## `Viewport`

- Static methods `requestContentSafeAreaInsets`, `requestViewport`, and `requestSafeAreaInsets` have been removed. You
  can use the SDK's `request` function to achieve the same functionality.

## `InitData`

- Signals such as `chat`, `receiver`, and `user` now return objects as they are presented in the init dataâ€”with
  snake_case keys instead of camelCase.

## `MiniApp`

- Signals and methods renamed:
  - `backgroundColor` â†’ `bgColor`
  - `backgroundColorRGB` â†’ `bgColorRgb`
  - `bottomBarColor` â†’ `bottomBarBgColor`
  - `bottomBarColorRGB` â†’ `bottomBarBgColorRgb`
  - `headerColorRGB` â†’ `headerColorRgb`
  - `setBackgroundColor` â†’ `setBgColor`
  - `setBottomColor` â†’ `setBottomBarColor`

## `.supports()`

The functions' `supports` field is now a function that accepts an option name, rather than an object. You should rewrite
this code:

```typescript
import { miniApp } from '@telegram-apps/sdk';

if (miniApp.setHeaderColor.supports.rgb()) {
  miniApp.setHeaderColor('#aabbcc');
}
```

Into this one:

```typescript
import { miniApp } from '@tma.js/sdk';

if (miniApp.setHeaderColor.supports('rgb')) {
  miniApp.setHeaderColor('#aabbcc');
}
```

## Utilities

- Functions `onAddToHomeScreenFailed`, `offAddToHomeScreenFailed`, `onAddedToHomeScreen` and `offAddedToHomeScreen`
  were removed. Use SDK's `on` and `off` functions instead.
```
---
## File: apps/docs/packages/tma-js-sdk/usage-tips.md

```markdown
# Usage Tips

## Installing the SDK

Before installing the package, it is important to understand what specifically must be installed.
This depends on the technologies you are planning to use.

If your core library is one of the following, you should install a package specific to your main
library instead of `@tma.js/sdk`:

- React: [@tma.js/sdk-react](../tma-js-sdk-react.md)
- Vue: [@tma.js/sdk-vue](../tma-js-sdk-vue.md)
- Svelte: [@tma.js/sdk-svelte](../tma-js-sdk-svelte.md)
- Solid: [@tma.js/sdk-solid](../tma-js-sdk-solid.md)

For example, if your main library is React, you should install `@tma.js/sdk-react` instead
of `@tma.js/sdk`.

Here is the command to install the package:

::: code-group

```bash [pnpm]
pnpm i @tma.js/sdk-react
```

```bash [npm]
npm i @tma.js/sdk-react
```

```bash [yarn]
yarn add @tma.js/sdk-react
```

:::

If your main library is not on the list specified above or if you prefer a pure TypeScript solution,
install the `@tma.js/sdk` package:

::: code-group

```bash [pnpm]
pnpm i @tma.js/sdk
```

```bash [npm]
npm i @tma.js/sdk
```

```bash [yarn]
yarn add @tma.js/sdk
```

:::

> [!DANGER] Avoid installing both packages
> Installing both `@tma.js/sdk` and `@tma.js/sdk-react` (for example) may lead to bugs
> due to SDK package duplication, resulting in incorrect application behavior.

> [!TIP] Start with @tma.js/create-mini-app
> To avoid potential issues with bootstrapping your project, consider using the
> [@tma.js/create-mini-app](../tma-js-create-mini-app.md) package. This will
> quickly generate a properly configured application for you.

## Initialize the SDK

The SDK provides a list of components that might seem ready to use once imported, but this is only
partially true.

Itâ€™s important to understand that the SDK does not have any side effects. To avoid various issues,
it doesnâ€™t perform operations automatically upon import. Instead, you need to initialize it
manually.

By default, the SDK is uninitialized and not ready for use. All components remain unmounted. To
initialize the SDK and unlock not only the componentsâ€™ `mount` method but also other
non-component-related methods, you **must** use the `init` function.

```ts
import { init } from '@tma.js/sdk';

init();
```

After calling this, it is now safe to mount any components you wish to use in your application.

## Mount Used Components

In the previous section, we initialized the SDK, allowing us to use components.

Before using specific components in your application, you must mount them. Not mounting components
will cause their methods to throw errors. For example, the following code will cause issues:

```ts
import { init, backButton } from '@tma.js/sdk';

// Initialize the SDK.
init();

// Attempt to show the Back Button.
backButton.show();
// Error: The backButton component was not mounted.
```

To avoid this issue, mount the component before using its methods:

```ts
import { init, backButton } from '@tma.js/sdk';

// Initialize the SDK.
init();

// Mount the Back Button.
backButton.mount();

// Show the Back Button.
backButton.show();
```

> [!TIP]
> The mount-checking mechanism ensures that you are working with a properly initialized component.

## Always Check Availability

Not all Telegram Mini Apps methods were implemented in a single release. Some may have been
implemented years ago, while others were introduced only recently.

Because there are many users with different versions of the native Telegram application, you must
check if a method is available on their device before using it:

```ts
import { backButton } from '@tma.js/sdk';

// ... the SDK is already initialized, and the Back Button is mounted.
if (backButton.show.isAvailable()) {
  backButton.show();
}
```

The `isAvailable()` method verifies if the function is currently available and can be safely called.
It performs the following checks:

- The current environment is Telegram Mini Apps
- The SDK is initialized
- The method is supported by the current Telegram Mini Apps version
- The parent component is mounted

Not using this signal and simply calling the method may lead to errors related to one of the above
checks.

If you donâ€™t want to perform this check every time and the result of the method execution is not
crucial, use the `ifAvailable(...args)` method. This method accepts the same parameters as the
original function:

```ts
import { backButton } from '@tma.js/sdk';

// ... the SDK is already initialized, and the Back Button is mounted.
backButton.show.ifAvailable();
```
```
---
## File: apps/docs/packages/init-data-golang.md

```markdown
# init-data-golang

The package that provides utilities to work with
the [initialization data](../platform/launch-parameters.md) of Telegram Mini Apps.

## Installation

```bash
go get github.com/telegram-mini-apps/init-data-golang
```

## Validation

If the expiration time is set to `0`, the function will skip the expiration time check. However, it
is recommended to specify a non-zero value, as this check is considered important in preventing the
usage of old stolen initialization data.

```go
package main

import (
	"fmt"
	"time"

	initdata "github.com/telegram-mini-apps/init-data-golang"
)

func main() {
	// Init data in raw format.
	initData := "user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%20%2B%20-%20%3F%20%5C%2F%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%22%7D&chat_instance=8134722200314281151&chat_type=private&auth_date=1733509682&signature=TYJxVcisqbWjtodPepiJ6ghziUL94-KNpG8Pau-X7oNNLNBM72APCpi_RKiUlBvcqo5L-LAxIc3dnTzcZX_PDg&hash=a433d8f9847bd6addcc563bff7cc82c89e97ea0d90c11fe5729cae6796a36d73"

	// Telegram Bot secret key.
	token := "7342037359:AAHI25ES9xCOMPokpYoz-p8XVrZUdygo2J4"

	// Define how long since init data generation date init data is valid.
	expIn := 24 * time.Hour

	// Will return error in case, init data is invalid.
	fmt.Println(initdata.Validate(initData, token, expIn))
}

```

### Third-Party Validation

The package allows validating init data to check if it was signed by Telegram.

To do so, call the `ValidateThirdParty` function with the following arguments:

- `initData: string`: Init data in raw format.
- `botID: int64`: The Telegram Bot issuer identifier for the init data.
- `expIn: time.Time`: The maximum lifetime of the init data.

Here is an example:

```go
package main

import (
	"fmt"
	"time"

	initdata "github.com/telegram-mini-apps/init-data-golang"
)

func main() {
	// Init data in raw format.
	initData := "user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%20%2B%20-%20%3F%20%5C%2F%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%22%7D&chat_instance=8134722200314281151&chat_type=private&auth_date=1733584787&hash=2174df5b000556d044f3f020384e879c8efcab55ddea2ced4eb752e93e7080d6&signature=zL-ucjNyREiHDE8aihFwpfR9aggP2xiAo3NSpfe-p7IbCisNlDKlo7Kb6G4D0Ao2mBrSgEk4maLSdv6MLIlADQ"

	// Telegram Bot secret key.
	var botID int64 = 7342037359

	// Define how long since init data generation date init data is valid.
	expIn := 24 * time.Hour

	// Will return an error if init data is invalid.
	fmt.Println(initdata.ValidateThirdParty(initData, botID, expIn))
}
```

You can also use the `ValidateThirdPartyWithEnv` function with the additional boolean
argument responsible for marking the environment as the testing one.

## Parsing

It is important to note that the `Parse` function does not perform the same checks as the `Validate`
function. Therefore, this function solely parses incoming data without conducting validations for
the hash or expiration time.

```go
package main

import (
	"fmt"

	initdata "github.com/telegram-mini-apps/init-data-golang"
)

func main() {
	// Init data in raw format.
	initData := "user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%20%2B%20-%20%3F%20%5C%2F%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%22%7D&chat_instance=8134722200314281151&chat_type=private&auth_date=1733509682&signature=TYJxVcisqbWjtodPepiJ6ghziUL94-KNpG8Pau-X7oNNLNBM72APCpi_RKiUlBvcqo5L-LAxIc3dnTzcZX_PDg&hash=a433d8f9847bd6addcc563bff7cc82c89e97ea0d90c11fe5729cae6796a36d73"

	// Will return 2 values.
	// 1. InitData instance if passed data has a correct format.
	// 2. Error in case, something is wrong. 
	fmt.Println(initdata.Parse(initData))
}

```

## Signing

The functions that sign data remove parameters such as `hash` and `auth_date` since it is assumed
that the `hash` will be returned by the function and the `auth_date` will be set by the function
itself.

```go
package main

import (
	"fmt"
	"time"

	initdata "github.com/telegram-mini-apps/init-data-golang"
)

func main() {
	// Init data in raw format.
	initData := "user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%20%2B%20-%20%3F%20%5C%2F%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%22%7D&chat_instance=8134722200314281151&chat_type=private&auth_date=1733509682&signature=TYJxVcisqbWjtodPepiJ6ghziUL94-KNpG8Pau-X7oNNLNBM72APCpi_RKiUlBvcqo5L-LAxIc3dnTzcZX_PDg&hash=a433d8f9847bd6addcc563bff7cc82c89e97ea0d90c11fe5729cae6796a36d73"

	// Telegram Bot secret key.
	token := "7342037359:AAHI25ES9xCOMPokpYoz-p8XVrZUdygo2J4"

	// Signing timestamp.
	// Here we took the value from the initData variable
	// above (auth_date query parameter).
	authDate := time.Unix(1733509682, 0)

	// Signing query parameters.
	// Returned values:
	// 1. Parameters sign result ("hash" init data property).
	// 2. Error occurring while parsing query string as query parameters.
	fmt.Println(initdata.SignQueryString(initData, token, authDate))

	// Signing the same query parameters presented as a map.
	fmt.Println(initdata.Sign(map[string]string{
		"user":          "{\"id\":279058397,\"first_name\":\"Vladislav + - ? \\/\",\"last_name\":\"Kibenko\",\"username\":\"vdkfrost\",\"language_code\":\"ru\",\"is_premium\":true,\"allows_write_to_pm\":true,\"photo_url\":\"https:\\/\\/t.me\\/i\\/userpic\\/320\\/4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg\"}",
		"chat_instance": "8134722200314281151",
		"chat_type":     "private",
		"signature":     "TYJxVcisqbWjtodPepiJ6ghziUL94-KNpG8Pau-X7oNNLNBM72APCpi_RKiUlBvcqo5L-LAxIc3dnTzcZX_PDg",
	}, token, authDate))

	// In the console, you should see the same results.
}

```

## GoDoc

To see GoDoc documentation,
visit [this link](https://pkg.go.dev/github.com/telegram-mini-apps/init-data-golang).
```
---
## File: apps/docs/packages/telegram-apps-bridge.md

```markdown
# @telegram-apps/bridge

> [!TIP] Newer version available
> `@telegram-apps/bridge@2.x` is [out](./telegram-apps-bridge/2-x)!

<p style="display: flex; gap: 8px; min-height: 20px">
  <a href="https://npmjs.com/package/@telegram-apps/bridge">
    <img src="https://img.shields.io/npm/v/@telegram-apps/bridge?logo=npm"/>
  </a>
  <img src="https://img.shields.io/bundlephobia/minzip/@telegram-apps/bridge"/>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/packages/bridge">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

The lowest level communication layer with Telegram Mini Apps.

This package provides fundamental utilities and types for developing applications on the Telegram
Mini Apps platform.

While a developer can use this package alone, it's recommended to use a higher-level package
like [@telegram-apps/sdk](telegram-apps-sdk/2-x).

## Installation

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/bridge
```

```bash [npm]
npm i @telegram-apps/bridge
```

```bash [yarn]
yarn add @telegram-apps/bridge
```

:::

## Usage

Hereâ€™s a basic example of how to use this package. For more details, refer to the next articles in
the documentation.

```ts
import {
  defineEventHandlers,
  on,
  postEvent,
} from '@telegram-apps/bridge';

// Define Mini Apps event handlers to receive 
// events from the Telegram native application.
defineEventHandlers();

// Show the back button, wait for it to be clicked once,
// then hide it.
postEvent('web_app_setup_back_button', { is_visible: true });

const off = on('back_button_pressed', () => {
  postEvent('web_app_setup_back_button', { is_visible: false });
  off();
});
```
```
---
## File: apps/docs/packages/telegram-apps-create-mini-app.md

```markdown
# @telegram-apps/create-mini-app

<p style="display: inline-flex; gap: 8px">
  <a href="https://npmjs.com/package/@telegram-apps/create-mini-app">
    <img src="https://img.shields.io/npm/v/@telegram-apps/create-mini-app?logo=npm"/>
  </a>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/packages/create-mini-app">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

`@telegram-apps/create-mini-app` is a CLI tool designed to scaffold your new
mini application on the Telegram Mini Apps platform. It generates a project with pre-configured libraries and template files, 
allowing you to customize the content based on your specific requirements.

## Usage

To run the tool, use one of the following scripts depending on your package manager.

::: code-group
```bash [pnpm]
pnpm dlx @telegram-apps/create-mini-app@latest
```

```bash [npm]
npx @telegram-apps/create-mini-app@latest
```

```bash [yarn]
yarn create @telegram-apps/mini-app
```
:::

## Creating a New Application

The above command executes a script that guides you through the creation of
your application by sequentially prompting for the following information:

### 1. Project Directory Name

- 	**Prompt**: Enter the name of the folder where the project files will be located.

-	**Default**: mini-app
     The script will create a subfolder with the specified name in the current directory.

### 2.	Preferred Technologies

| Option         | Details                                                                                                                                                                                                                                                                                                                                 |
|----------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Language**   | Choose between **TypeScript** or **JavaScript**.                                                                                                                                                                                                                                                                                        |
| **SDK**        | **â€¢ tma.js** [@telegram-apps/sdk](https://www.npmjs.com/package/@telegram-apps/sdk) <br/>A TypeScript library for seamless communication with Telegram Mini Apps functionality. <br/> **â€¢ Telegram SDK** [@twa-dev/sdk](https://www.npmjs.com/package/@twa-dev/sdk)<br/>This package allows you to work with the SDK as an npm package. |
| **Frameworks** | **â€¢ React.js** [template](https://github.com/Telegram-Mini-Apps/reactjs-template)<br/> **â€¢ Next.js** [template](https://github.com/Telegram-Mini-Apps/nextjs-template)<br/> **â€¢ Solid.js** [template](https://github.com/Telegram-Mini-Apps/solidjs-js-template)<br/> **â€¢ Vue.js** [template](https://github.com/Telegram-Mini-Apps/vuejs-template)<br/>                                                                   |

### 3.	Git Remote Repository URL (Optional)

Enter the Git remote repository URL. This value will be used to connect the created project with your
remote Git repository. It should be either an HTTPS link or an SSH connection string.

## Build Configuration

Projects created with `create-mini-app` are configured to use the [Vite](https://vite.dev/) bundler. The project includes a `vite.config.js` file,
which you can customize to adjust the build settings according to your needs.

```
---
## File: apps/docs/packages/telegram-apps-init-data-node.md

```markdown
---
outline: [2, 3]
---

# @telegram-apps/init-data-node

> [!TIP] Newer version available
> `@telegram-apps/init-data-node@2.x` is [out](./telegram-apps-init-data-node/2-x)!

<p style="display: flex; gap: 8px; min-height: 20px">
  <a href="https://npmjs.com/package/@telegram-apps/init-data-node">
    <img src="https://img.shields.io/npm/v/@telegram-apps/init-data-node?logo=npm"/>
  </a>
  <img src="https://img.shields.io/bundlephobia/minzip/@telegram-apps/init-data-node"/>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/packages/init-data-node">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

The package provides utilities to work with the initialization data of Telegram Mini Apps on the
server side. To learn more about the initialization data and its usage, please refer to
the [documentation](../platform/init-data.md).

## Installation

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/init-data-node
```

```bash [npm]
npm i @telegram-apps/init-data-node
```

```bash [yarn]
yarn add @telegram-apps/init-data-node
```

:::

## Parsing

To parse a value as init data, use the `parse` method.

The method accepts init data presented as a `string` or `URLSearchParams`.

```ts
import { parse } from '@telegram-apps/init-data-node';

try {
  const initData = parse('...');
  // {
  //   canSendAfter: 10000,
  //   chat: {
  //     id: 1,
  //     type: 'group',
  //     username: 'my-chat',
  //     title: 'chat-title',
  //     photoUrl: 'chat-photo',
  //   },
  //   chatInstance: '888',
  //   chatType: 'sender',
  //   queryId: 'QUERY',
  //   receiver: {
  //     addedToAttachmentMenu: false,
  //     allowsWriteToPm: true,
  //     firstName: 'receiver-first-name',
  //     id: 991,
  //     isBot: false,
  //     isPremium: true,
  //     languageCode: 'ru',
  //     lastName: 'receiver-last-name',
  //     photoUrl: 'receiver-photo',
  //     username: 'receiver-username',
  //   },
  //   startParam: 'debug',
  //   user: {
  //     addedToAttachmentMenu: false,
  //     allowsWriteToPm: false,
  //     firstName: 'user-first-name',
  //     id: 222,
  //     isBot: true,
  //     isPremium: false,
  //     languageCode: 'en',
  //     lastName: 'user-last-name',
  //     photoUrl: 'user-photo',
  //     username: 'user-username',
  //   },
  // }
} catch (e) {
  console.error('Something is wrong', e);
}
```

## Validating

### `validate`

To validate the signature of the initialization data, the `validate` function is used. It expects
the initialization data to be passed in a raw format (search parameters) and throws an error in
certain cases.

```typescript
import { validate } from '@telegram-apps/init-data-node';

const secretToken = '5768337691:AAH5YkoiEuPk8-FZa32hStHTqXiLPtAEhx8';
const initData =
  'query_id=AAHdF6IQAAAAAN0XohDhrOrc' +
  '&user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%7D' +
  '&auth_date=1662771648' +
  '&hash=c501b71e775f74ce10e377dea85a7ea24ecd640b223ea86dfe453e0eaed2e2b2';

validate(initData, secretToken);
```

Function will throw an error in one of these cases:

- `ERR_AUTH_DATE_INVALID`: `auth_date` is empty or not found
- `ERR_HASH_INVALID`: `hash` is empty or not found
- `ERR_SIGN_INVALID`: signature is invalid
- `ERR_EXPIRED`: init data expired

Here is the code you could use to check the error type:

```ts
import { validate, isErrorOfType } from '@telegram-apps/init-data-node';

try {
  validate('init-data', 'token');
} catch (e) {
  if (isErrorOfType(e, 'ERR_SIGN_INVALID')) {
    console.log('Sign is invalid');
  }
}
```

By default, the function checks the expiration of the initialization data. The default expiration
duration is set to 1 day (86,400 seconds). It is recommended to always check the expiration of the
initialization data, as it could be stolen but still remain valid. To disable this feature,
pass `{ expiresIn: 0 }` as the third argument.

### `validate3rd`

The `validate3rd` function is used to check if the passed init data was signed by Telegram. As
well as the `validate` function, this one accepts the init data in the same format.

As the second argument, it accepts the Telegram Bot identifier that was used to sign this
init data.

The third argument is an object with the following properties:

- `expiresIn` is responsible for init data expiration validation
- `test: boolean`: should be equal `true` if the init data was received in the test Telegram
  environment

Here is the usage example:

```ts
const initData =
  'user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%20%2B%20-%20%3F%20%5C%2F%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%22%7D' +
  '&chat_instance=8134722200314281151' +
  '&chat_type=private' +
  '&auth_date=1733584787' +
  '&signature=zL-ucjNyREiHDE8aihFwpfR9aggP2xiAo3NSpfe-p7IbCisNlDKlo7Kb6G4D0Ao2mBrSgEk4maLSdv6MLIlADQ' +
  '&hash=2174df5b000556d044f3f020384e879c8efcab55ddea2ced4eb752e93e7080d6';
const botId = 7342037359;

await validate3rd(initData, botId);
```

Function will throw an error in one of these cases:

- `ERR_AUTH_DATE_INVALID`: `auth_date` is empty or not found
- `ERR_SIGNATURE_MISSING`: `signature` is empty or not found
- `ERR_SIGN_INVALID`: signature is invalid
- `ERR_EXPIRED`: init data expired

> [!WARNING]
> This function uses **Web Crypto API** instead of Node.js modules.

### `isValid`

Alternatively, to check the init data validity, a developer could use the `isValid` function.
It doesn't throw an error, but returns a boolean value indicating the init data validity.

```ts
import { isValid } from '@telegram-apps/init-data-node';

if (isValid('... init data', 'my-bot-token')) {
  console.log('Init data is fine');
}
```

### `isValid3rd`

Does the same as the `isValid` function, but checks if the init data was signed by Telegram:

```ts
import { isValid3rd } from '@telegram-apps/init-data-node';

const botId = 7342037359;

if (await isValid3rd('... init data', botId)) {
  console.log('Init data is fine');
}
```

> [!WARNING]
> This function uses **Web Crypto API** instead of Node.js modules.

## Signing

There could be some cases when a developer needs to create their own init data. For instance,
Telegram does not send this data automatically if you are using something like `KeyboardButton`
or `InlineKeyboardButton`. Telegram cannot do this because it doesn't know which Telegram Bot token
should be used.

To implement such a process, it is required to use the `sign` method. Here is the complete example:

::: code-group

```ts [Signing]
import { sign } from '@telegram-apps/init-data-node';

sign(
  {
    canSendAfter: 10000,
    chat: {
      id: 1,
      type: 'group',
      username: 'my-chat',
      title: 'chat-title',
      photoUrl: 'chat-photo',
    },
    chatInstance: '888',
    chatType: 'sender',
    queryId: 'QUERY',
    receiver: {
      addedToAttachmentMenu: false,
      allowsWriteToPm: true,
      firstName: 'receiver-first-name',
      id: 991,
      isBot: false,
      isPremium: true,
      languageCode: 'ru',
      lastName: 'receiver-last-name',
      photoUrl: 'receiver-photo',
      username: 'receiver-username',
    },
    startParam: 'debug',
    user: {
      addedToAttachmentMenu: false,
      allowsWriteToPm: false,
      firstName: 'user-first-name',
      id: 222,
      isBot: true,
      isPremium: false,
      languageCode: 'en',
      lastName: 'user-last-name',
      photoUrl: 'user-photo',
      username: 'user-username',
    },
  },
  '5768337691:AAH5YkoiEuPk8-FZa32hStHTqXiLPtAEhx8',
  new Date(1000),
);
```

```ts [Expected result]
'auth_date=1' +
'&can_send_after=10000' +
'&chat=%7B%22id%22%3A1%2C%22type%22%3A%22group%22%2C%22title%22%3A%22chat-title%22%2C%22photo_url%22%3A%22group%22%2C%22username%22%3A%22my-chat%22%7D' +
'&chat_instance=888' +
'&chat_type=sender' +
'&query_id=QUERY' +
'&receiver=%7B%22added_to_attachment_menu%22%3Afalse%2C%22allows_write_to_pm%22%3Atrue%2C%22first_name%22%3A%22receiver-first-name%22%2C%22id%22%3A991%2C%22is_bot%22%3Afalse%2C%22is_premium%22%3Atrue%2C%22language_code%22%3A%22ru%22%2C%22last_name%22%3A%22receiver-last-name%22%2C%22photo_url%22%3A%22receiver-photo%22%2C%22username%22%3A%22receiver-username%22%7D' +
'&start_param=debug' +
'&user=%7B%22added_to_attachment_menu%22%3Afalse%2C%22allows_write_to_pm%22%3Afalse%2C%22first_name%22%3A%22user-first-name%22%2C%22id%22%3A222%2C%22is_bot%22%3Atrue%2C%22is_premium%22%3Afalse%2C%22language_code%22%3A%22en%22%2C%22last_name%22%3A%22user-last-name%22%2C%22photo_url%22%3A%22user-photo%22%2C%22username%22%3A%22user-username%22%7D' +
'&hash=47cfa22e72b887cba90c9cb833c5ea0f599975b6ce7193741844b5c4a4228b40'
```

:::

This function accepts three arguments:

- **Data to sign**: It represents a parsed init data object excluding the `authDate` and `hash`
  properties.
- **Bot token**: This token is received from [@BotFather](https://t.me/botfather).
- **Signing date**: This value will be used as the value of the `authDate` property.

As a result, the function returns signed init data.

## Web Crypto API

If this package is used in an environment other than Node.js, a developer can use the `web`
subdirectory, which exports the same methods as described above but returns promises.

```ts
import {
  validate,
  sign,
  signData,
  isValid,
} from '@telegram-apps/init-data-node/web';

await validate(...);
await sign(...);
await signData(...);
await isValid(...);
```

## Passing Hashed Token

All package methods allow developers to use a hashed token instead of a raw token.

By "hashed token," we mean a token hashed using the HMAC-SHA-256 algorithm with a key derived
from `WebAppData`, as specified in
the [validation](../platform/init-data#validating) section of the documentation.

Here are some examples:

```ts
import { validate, sign } from '@telegram-apps/init-data-node';

const secretTokenHashed = 'a5c609aa52f63cb5e6d8ceb6e4138726ea82bbc36bb786d64482d445ea38ee5f';
const initData =
  'query_id=AAHdF6IQAAAAAN0XohDhrOrc' +
  '&user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%7D' +
  '&auth_date=1662771648' +
  '&hash=c501b71e775f74ce10e377dea85a7ea24ecd640b223ea86dfe453e0eaed2e2b2';

// Validating.
validate(initData, secretTokenHashed, { tokenHashed: true });

// Signing.
sign(
  {
    canSendAfter: 10000,
    chat: {
      id: 1,
      type: 'group',
      username: 'my-chat',
      title: 'chat-title',
      photoUrl: 'chat-photo',
    },
    chatInstance: '888',
    chatType: 'sender',
    queryId: 'QUERY',
    receiver: {
      addedToAttachmentMenu: false,
      allowsWriteToPm: true,
      firstName: 'receiver-first-name',
      id: 991,
      isBot: false,
      isPremium: true,
      languageCode: 'ru',
      lastName: 'receiver-last-name',
      photoUrl: 'receiver-photo',
      username: 'receiver-username',
    },
    startParam: 'debug',
    user: {
      addedToAttachmentMenu: false,
      allowsWriteToPm: false,
      firstName: 'user-first-name',
      id: 222,
      isBot: true,
      isPremium: false,
      languageCode: 'en',
      lastName: 'user-last-name',
      photoUrl: 'user-photo',
      username: 'user-username',
    },
  },
  secretTokenHashed,
  new Date(1000),
  { tokenHashed: true }
);
```

You can use this approach to reduce the number of instances where you directly pass a raw token.

```
---
## File: apps/docs/packages/telegram-apps-mate.md

```markdown
# @telegram-apps/mate

Mate is a multifunctional tool for developers at the Telegram Mini Apps 
platform, that solves a wide range of problems.

## Installing

To start using Mate, it is required to install the `@telegram-apps/mate`
package. The developer can do it both locally and globally: 

:::code-group

```bash [pnpm]
# Locally.
pnpm i -D @telegram-apps/mate
# Globally.
pnpm i -g @telegram-apps/mate
```

```bash [npm]
# Locally.
npm i -D @telegram-apps/mate
# Globally.
npm i -g @telegram-apps/mate
```

```bash [yarn]
# Locally.
yarn add -D @telegram-apps/mate
# Globally.
yarn global add @telegram-apps/mate
```

:::

Once installed, the package will be accessible via the `mate` CLI tool:

```bash
mate --help
```

> [!TIP]
> It is highly recommended to install the package locally to avoid confusion
> over package versions and to ensure a consistent usage experience within the
> development team.

## Install-free Usage

Not to install the package, you can also use the package using `pnpm` or `npx`:

:::code-group

```bash [pnpm]
pnpm dlx @telegram-apps/mate@latest --help
```

```bash [npx]
npx @telegram-apps/mate@latest --help
```

:::

```
---
## File: apps/docs/packages/telegram-apps-react-router-integration.md

```markdown
# @telegram-apps/react-router-integration

<p style="display: inline-flex; gap: 8px">
  <a href="https://npmjs.com/package/@telegram-apps/react-router-integration">
    <img src="https://img.shields.io/npm/v/@telegram-apps/react-router-integration?logo=npm"/>
  </a>
  <img src="https://img.shields.io/bundlephobia/minzip/@telegram-apps/react-router-integration"/>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/packages/react-router-integration">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

Telegram Mini Apps [Navigator](telegram-apps-sdk/1-x/navigation.md) integration
for [react-router-dom](https://www.npmjs.com/package/react-router-dom).

## Installation

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/react-router-integration
```

```bash [npm]
npm i @telegram-apps/react-router-integration
```

```bash [yarn]
yarn add @telegram-apps/react-router-integration
```

:::

## Usage

At the moment, this package provides the only 1 function, which creates the integration for
`react-router-dom` Router - `useIntegration`.

Here is how it could be used:

```jsx
import { useIntegration } from '@telegram-apps/react-router-integration';
import { initNavigator } from '@telegram-apps/sdk-react';
import { useEffect, useMemo } from 'react';
import {
  Navigate,
  Route,
  Router,
  Routes,
} from 'react-router-dom';

import { IndexPage } from './IndexPage.js';

function App() {
  // Create a new application navigator and attach it to the browser history, so it could modify
  // it and listen to its changes.
  const navigator = useMemo(() => initNavigator('app-navigation-state'), []);
  const [location, reactNavigator] = useIntegration(navigator);

  // Don't forget to attach the navigator to allow it to control the BackButton state as well
  // as browser history.
  useEffect(() => {
    navigator.attach();
    return () => navigator.detach();
  }, [navigator]);

  return (
    <Router location={location} navigator={reactNavigator}>
      <Routes>
        <Route path={'/'} component={IndexPage}/>
        <Route path={'*'} element={<Navigate href={'/'}/>}/>
      </Routes>
    </Router>
  );
}
```

You can learn more about how to use it real world applications using
our [React template](https://github.com/Telegram-Mini-Apps/reactjs-template).


```
---
## File: apps/docs/packages/telegram-apps-sdk-svelte.md

```markdown
---
outline: [2, 3]
---

# @telegram-apps/sdk-svelte

> [!TIP] Newer version available
> `@telegram-apps/sdk-svelte@2.x` is [out](./telegram-apps-sdk-svelte/2-x)!

<p style="display: inline-flex; gap: 8px">
  <a href="https://npmjs.com/package/@telegram-apps/sdk-svelte">
    <img src="https://img.shields.io/npm/v/@telegram-apps/sdk-svelte?logo=npm"/>
  </a>
  <img src="https://img.shields.io/bundlephobia/minzip/@telegram-apps/sdk-svelte"/>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/packages/sdk-svelte">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

Svelte.js package providing utilities that developers may find useful when developing a mini
application.

> [!TIP]
> Since this package offers utility functions that extend the functionality
> of [@telegram-apps/sdk](./telegram-apps-sdk/2-x.md), it is recommended to review the SDK package
> documentation first.

## Installation

Before proceeding, it is assumed that you have already installed the `svelte-js` package, as it is a
peer dependency of this package.

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/sdk-svelte
```

```bash [npm]
npm i @telegram-apps/sdk-svelte
```

```bash [yarn]
yarn add @telegram-apps/sdk-svelte
```

:::

> [!INFO]
> This package fully re-exports the [@telegram-apps/sdk](./telegram-apps-sdk/2-x) package, so
> you don't need to install it separately.

## Usage

Here is a simple usage example of the package:

:::code-group

```svelte [index.svelte]
<script lang="ts">
  import { init, backButton } from '@telegram-apps/sdk-svelte';

  import { BackButton } from './BackButton.svelte';

  // Initialize the package.
  init();
</script>

<BackButton />
```

```svelte [BackButton.svelte]
/**
 * Component which controls the Back Button visibility.
 */
<script lang="ts">
  import { onMount, onDestroy } from 'svelte';
  import { backButton, useSignal } from '@telegram-apps/sdk-svelte';

  const isVisible = useSignal(backButton.isVisible);

  $: console.log('The button is', isVisible.value ? 'visible' : 'invisible')

  onMount(() => {
    backButton.show();
  });

  onDestroy(() => {
    backButton.hide();
  });
</script>
```

:::

## Hooks

### `useSignal`

A helper that allows you to use our [signals](./telegram-apps-signals.md) in the application. It
returns a Svelte ref which updates every time, our signal changes.

```svelte
<script lang="ts">
  import { onMount, onDestroy } from 'svelte';
  import { backButton, useSignal } from '@telegram-apps/sdk-svelte';

  const isVisible = useSignal(backButton.isVisible);

  $: console.log('The button is', isVisible.value ? 'visible' : 'invisible')

  onMount(() => {
    backButton.show();
  });

  onDestroy(() => {
    backButton.hide();
  });
</script>
```

### `useLaunchParams`

A function that returns the mini application's launch parameters.

```svelte
<script lang="ts">
  import { useLaunchParams } from '@telegram-apps/sdk-svelte';

  const lp = useLaunchParams();
</script>

<div>Start param: {lp.startParam}</div>
```

```
---
## File: apps/docs/packages/telegram-apps-sdk-vue.md

```markdown
---
outline: [ 2, 3 ]
---

# @telegram-apps/sdk-vue

> [!TIP] Newer version available
> `@telegram-apps/sdk-vue@2.x` is [out](./telegram-apps-sdk-vue/2-x)!

<p style="display: inline-flex; gap: 8px">
  <a href="https://npmjs.com/package/@telegram-apps/sdk-vue">
    <img src="https://img.shields.io/npm/v/@telegram-apps/sdk-vue?logo=npm"/>
  </a>
  <img src="https://img.shields.io/bundlephobia/minzip/@telegram-apps/sdk-vue"/>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/packages/sdk-vue">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

Vue.js package providing utilities that developers may find useful when developing a mini
application.

> [!TIP]
> Since this package offers utility functions that extend the functionality
> of [@telegram-apps/sdk](./telegram-apps-sdk/2-x.md), it is recommended to review the SDK package
> documentation first.

## Installation

Before proceeding, it is assumed that you have already installed the `vue` package, as it is a
peer dependency of this package.

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/sdk-vue
```

```bash [npm]
npm i @telegram-apps/sdk-vue
```

```bash [yarn]
yarn add @telegram-apps/sdk-vue
```

:::

> [!INFO]
> This package fully re-exports the [@telegram-apps/sdk](./telegram-apps-sdk/2-x) package, so
> you don't need to install it separately.

## Usage

Here is a simple usage example of the package:

:::code-group

```ts [index.ts]
import { createApp } from 'vue';
import { init } from '@telegram-apps/sdk-vue';
import App from './App.vue';

// Initialize the package.
init();

const app = createApp(App);

app.mount('#root');
```

```vue [PopupButton.vue]
<script setup lang="ts">
/**
 * Component which opens native Telegram Popup.
 */
import { popup } from '@telegram-apps/sdk-vue'

const props = defineProps<{ title: string, message: string }>()

function open() {
  if (popup.isSupported()) {
    popup.open(props);
    return;
  }

  // Open fallback HTML dialog...
}
</script>

<template>
  <button aria-haspopup="dialog" @click="open">
    Open popup
  </button>
</template>
```

:::

## Hooks

### `useSignal`

A helper that allows you to use our [signals](./telegram-apps-signals.md) in the application. It
returns a Vue ref which updates every time, our signal changes.

```ts [useMainButton.vue]
/**
 * Composable which encapsulates mainButton interaction logic
 */
import { mainButton, useSignal } from '@telegram-apps/sdk-vue';

export function useMainButton() {
  if (!mainButton.isMounted()) {
    mainButton.mount();
  }

  const isVisible = useSignal(mainButton.isVisible);

  return { isVisible };
}
```

### `useLaunchParams`

A function that returns the mini application's launch parameters. For Vue.js it's just `retrieveLaunchParams` function from `@telegram-apps/sdk`.

```ts [useInitApp.ts]
/**
 * Composable which encapsulates start param processing logic
 */
import { useLaunchParams } from '@telegram-apps/sdk-vue';

export function useInitApp() {
  const lp = useLaunchParams();

  if (lp.startParam) {
    switch (lp.startParam) {
      case 'navigate-to-page':
        // evaluate navigation
        return;
    }
  }
}
```

## Vue Router integration

Telegram application uses URL's hash to transmit launch parameters into TMA, see [that article](https://docs.telegram-mini-apps.com/platform/launch-parameters#transmission-method) for more details.

Therefore, [Vue router](https://router.vuejs.org/) should use [HTML5 mode](https://router.vuejs.org/guide/essentials/history-mode.html#HTML5-Mode):

```ts [router.ts]
import { createRouter, createWebHistory } from 'vue-router'

const router = createRouter({
  history: createWebHistory(),
  routes: [
    //...
  ],
})
```

```
---
## File: apps/docs/packages/telegram-apps-signals.md

```markdown
# @telegram-apps/signals

<p style="display: flex; gap: 8px; min-height: 20px">
  <a href="https://npmjs.com/package/@telegram-apps/signals">
    <img src="https://img.shields.io/npm/v/@telegram-apps/signals?logo=npm"/>
  </a>
  <img src="https://img.shields.io/bundlephobia/minzip/@telegram-apps/signals"/>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/packages/signals">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

Our own implementation of signals we are using across the `@telegram-apps` packages.

## Installation

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/signals
```

```bash [npm]
npm i @telegram-apps/signals
```

```bash [yarn]
yarn add @telegram-apps/signals
```

:::

## Signal

The `signal` function is the simplest signal constructor used by other package functions. To
create a new signal, simply pass the initial value:

```ts
import { signal } from '@telegram-apps/signals';

const isVisible = signal(false);
```

The returned value represents a function with useful methods. The function itself returns the
current signal value.

```ts
console.log('The element is', isVisible() ? 'visible' : 'invisible');
```

The function also accepts options as the second argument. A developer can specify the
`equals` function, which accepts the current and incoming values and should return true,
if they are considered equal.

```ts
const s = signal(10, {
  equals(current, next) {
    // Will not update the signal if the next value is
    // higher than the current one.
    return next > current;
  }
});
s.set(20); // will not update the signal
s.set(5); // will update the signal
```

### `set`

To set a new value, use the `set` method:

```ts
isVisible.set(true);
```

### `sub`

To track signal changes, use the `sub` method. It returns a function that removes the bound
listener. The listener accepts two arguments: the current and previous values, respectively.

```ts
const removeListener = isVisible.sub((current, prev) => {
  console.log('Value changed from', prev, 'to', current);
});

// Remove the listener whenever needed.
removeListener();
```

To call the listener only once, use the second:

```ts
function listener(current: boolean, prev: boolean) {
  console.log('Value changed from', prev, 'to', current);
}

isVisible.sub(listener, true);
// or
isVisible.sub(listener, { once: true });
```

### `unsub`

Alternatively, to remove a listener, a developer can use the `unsub` method:

```ts
function listener(current: boolean, prev: boolean) {
  console.log('Value changed from', prev, 'to', current);
}

isVisible.sub(listener);

// Remove the listener whenever needed.
isVisible.unsub(listener);
```

### `unsubAll`

To remove all listeners, use the `unsubAll` method:

```ts
isVisible.unsubAll();
```

::: info

This method does not remove listeners added by computed signals.

:::

### `reset`

To revert to the initially specified value, use the `reset` method:

```ts
import { signal } from '@telegram-apps/signals';

const isVisible = signal(false);
isVisible.set(true); // isVisible becomes true
isVisible.reset(); // isVisible becomes false again
```

### `destroy`

When the signal is no longer needed and is not being listened to by any computed signal, a developer
can use the `destroy` method, which forcibly removes all listeners:

```ts
isVisible.destroy();
```

## Computed

The `computed` function constructs a computed signal, which is automatically recalculated when any
of the called signals change.

Hereâ€™s an example:

```ts
import { signal, computed } from '@telegram-apps/signals';

const a = signal(2);
const b = signal(2);
const sum = computed(() => a() + b()); // 4

a.set(5); // sum becomes 7
b.set(5); // sum becomes 10
```

The returned value represents a signal that lacks the `set` and `reset` methods.

## Batching Changes

The `batch` function creates a scope where signal mutations are batched.

Itâ€™s useful when a developer wants to prevent a computed signal from recomputing every time several
dependent signals change consecutively.

```ts
import { signal, computed, batch } from '@telegram-apps/signals';

const a = signal(1);
const b = signal(2);
const c = signal(3);
const sum = computed(() => a() + b() + c()); // 6

// Without batching, re-computation happens 3 times:
a.set(2); // sum recomputes and becomes 7
b.set(3); // sum recomputes and becomes 8
c.set(4); // sum recomputes and becomes 9

// Reset each signal.
a.reset();
b.reset();
c.reset();
// Note: reset calls the set method, which also causes
// the sum signal to recompute.

// Now, let's optimize using the batch function:
batch(() => {
  a.set(2);
  b.set(3);
  c.set(4);
});
// At this point, sum will recompute only once because
// batch causes the sum signal to wait for the function to complete,
// and then it triggers the recomputation.
console.log(sum()); // 9
```

```
---
## File: apps/docs/packages/telegram-apps-solid-router-integration.md

```markdown
# @telegram-apps/solid-router-integration

<p style="display: inline-flex; gap: 8px">
  <a href="https://npmjs.com/package/@telegram-apps/solid-router-integration">
    <img src="https://img.shields.io/npm/v/@telegram-apps/solid-router-integration?logo=npm"/>
  </a>
  <img src="https://img.shields.io/bundlephobia/minzip/@telegram-apps/solid-router-integration"/>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/packages/solid-router-integration">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

Telegram Mini Apps [Navigator](telegram-apps-sdk/1-x/navigation.md) integration
for [@solidjs/router](https://www.npmjs.com/package/@solidjs/router).

## Installation

::: code-group

```bash [pnpm]
pnpm i @telegram-apps/solid-router-integration
```

```bash [npm]
npm i @telegram-apps/solid-router-integration
```

```bash [yarn]
yarn add @telegram-apps/solid-router-integration
```

:::

## Usage

At the moment, this package provides the only 1 function, which creates the integration for
`@solidjs/router` Router - `createRouter`.

Here is how it could be used:

```jsx
import { Routes, Route, Navigate } from '@solidjs/router';
import { onCleanup } from 'solid-js';
import { initNavigator } from '@telegram-apps/sdk-solid';
import { createRouter } from '@telegram-apps/solid-router-integration';

import { IndexPage } from './IndexPage.js';

function App() {
  // We should create navigator to pass it to integration creation.
  const navigator = initNavigator('app-navigator-state');

  // Then, to allow this navigator update current browser history, 
  // we should attach it. Otherwise, it will work in memory mode.
  void navigator.attach();
  onCleanup(() => {
    navigator.detach();
  });

  const Router = createRouter(navigator);

  return (
    <Router>
      <Routes>
        <Route path={'/'} component={IndexPage}/>
        <Route path={'*'} element={<Navigate href={'/'}/>}/>
      </Routes>
    </Router>
  );
}
```

You can learn more about how to use it real world applications using
our [Solid template](https://github.com/Telegram-Mini-Apps/solidjs-template).


```
---
## File: apps/docs/packages/tma-js-bridge.md

```markdown
# @tma.js/bridge

<p style="display: flex; gap: 8px; min-height: 20px">
  <a href="https://npmjs.com/package/@tma.js/bridge">
    <img src="https://img.shields.io/npm/v/@tma.js/bridge?logo=npm"/>
  </a>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/tma.js/bridge">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

The lowest level communication layer with Telegram Mini Apps.

This package provides fundamental utilities and types for developing applications on the Telegram
Mini Apps platform.

> [!TIP] Higher-level package
> While a developer can use this package alone, it's recommended to use a higher-level package
> like [@tma.js/sdk](./tma-js-sdk.md).

## Installation

::: code-group

```bash [pnpm]
pnpm i @tma.js/bridge
```

```bash [npm]
npm i @tma.js/bridge
```

```bash [yarn]
yarn add @tma.js/bridge
```

:::

## Usage

Hereâ€™s a basic example of how to use this package. For more details, refer to the next articles in
the documentation.

```ts
import { on, postEvent, applyPolyfills } from '@tma.js/bridge';

// Apply polyfills for Object.hasOwn. Bridge validators use it.
applyPolyfills();

// Show the back button, wait for it to be clicked once,
// then hide it.
postEvent('web_app_setup_back_button', { is_visible: true });

const off = on('back_button_pressed', () => {
  postEvent('web_app_setup_back_button', { is_visible: false });
  off();
});
```
```
---
## File: apps/docs/packages/tma-js-create-mini-app.md

```markdown
# @tma.js/create-mini-app

<p style="display: inline-flex; gap: 8px">
  <a href="https://npmjs.com/package/@tma.js/create-mini-app">
    <img src="https://img.shields.io/npm/v/@tma.js/create-mini-app?logo=npm"/>
  </a>
  <a href="https://github.com/Telegram-Mini-Apps/tma.js/tree/master/packages/create-mini-app">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

`@tma.js/create-mini-app` is a CLI tool designed to scaffold your new
mini application on the Telegram Mini Apps platform. It generates a project with pre-configured libraries and template
files,
allowing you to customize the content based on your specific requirements.

## Usage

To run the tool, use one of the following scripts depending on your package manager.

::: code-group

```bash [pnpm]
pnpm dlx @tma.js/create-mini-app@latest
```

```bash [npm]
npx @tma.js/create-mini-app@latest
```

```bash [yarn]
yarn create @tma.js/mini-app
```

:::

## Creating a New Application

The above command executes a script that guides you through the creation of
your application by sequentially prompting for the following information:

### 1. Project Directory Name

- **Prompt**: Enter the name of the folder where the project files will be located. The script will create a subfolder
  with the specified name in the current directory.

- **Default**: `mini-app`

### 2. Preferred Technologies

| Option         | Details                                                                                                                                                                                                                                                                                                                                                  |
|----------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Language**   | Choose between **TypeScript** or **JavaScript**.                                                                                                                                                                                                                                                                                                         |
| **SDK**        | **â€¢ tma.js** [@tma.js/sdk](https://www.npmjs.com/package/@tma.js/sdk) <br/>A TypeScript library for seamless communication with Telegram Mini Apps functionality. <br/> **â€¢ Telegram SDK** [@twa-dev/sdk](https://www.npmjs.com/package/@twa-dev/sdk)<br/>This package allows you to work with the SDK as an npm package.                                |
| **Frameworks** | **â€¢ React.js** [template](https://github.com/Telegram-Mini-Apps/reactjs-template)<br/> **â€¢ Next.js** [template](https://github.com/Telegram-Mini-Apps/nextjs-template)<br/> **â€¢ Solid.js** [template](https://github.com/Telegram-Mini-Apps/solidjs-js-template)<br/> **â€¢ Vue.js** [template](https://github.com/Telegram-Mini-Apps/vuejs-template)<br/> |

### 3. Git Remote Repository URL (Optional)

Enter the Git remote repository URL. This value will be used to connect the created project with your
remote Git repository. It should be either an HTTPS link or an SSH connection string.

## Build Configuration

Projects created with `create-mini-app` are configured to use the [Vite](https://vite.dev/) bundler. The project
includes a `vite.config.js` file, which you can customize to adjust the build settings according to your needs.

```
---
## File: apps/docs/packages/tma-js-init-data-node.md

```markdown
---
outline: [2, 3]
---

# @tma.js/init-data-node

<p style="display: flex; gap: 8px; min-height: 20px">
  <a href="https://npmjs.com/package/@tma.js/init-data-node">
    <img src="https://img.shields.io/npm/v/@tma.js/init-data-node?logo=npm"/>
  </a>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/tma.js/init-data-node">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

The package provides utilities to work with the initialization data of Telegram Mini Apps on the
server side. To learn more about the initialization data and its usage, please refer to
the [documentation](../platform/init-data.md).

## Installation

::: code-group

```bash [pnpm]
pnpm i @tma.js/init-data-node
```

```bash [npm]
npm i @tma.js/init-data-node
```

```bash [yarn]
yarn add @tma.js/init-data-node
```

:::

## Usage

Here is the example of how the library can be used:

```typescript
import { validate, parse, type InitData } from '@tma.js/init-data-node';
import express, {
  type ErrorRequestHandler,
  type RequestHandler,
  type Response,
} from 'express';

/**
 * Sets init data in the specified Response object.
 * @param res - Response object.
 * @param initData - init data.
 */
function setInitData(res: Response, initData: InitData): void {
  res.locals.initData = initData;
}

/**
 * Extracts init data from the Response object.
 * @param res - Response object.
 * @returns Init data stored in the Response object. Can return undefined in case,
 * the client is not authorized.
 */
function getInitData(res: Response): InitData | undefined {
  return res.locals.initData;
}

/**
 * Middleware which authorizes the external client.
 * @param req - Request object.
 * @param res - Response object.
 * @param next - function to call the next middleware.
 */
const authMiddleware: RequestHandler = (req, res, next) => {
  // We expect passing init data in the Authorization header in 
  // the following format:
  // <auth-type> <auth-data>
  // <auth-type> must be "tma", and <auth-data> is Telegram Mini Apps init data.
  const [authType, authData = ''] = (req.header('authorization') || '').split(' ');

  switch (authType) {
    case 'tma':
      try {
        // Validate init data.
        validate(authData, token, {
          // We consider init data sign valid for 1 hour from their 
          // creation moment.
          expiresIn: 3600,
        });

        // Parse init data. We will surely need it in the future.
        setInitData(res, parse(authData));
        return next();
      } catch (e) {
        return next(e);
      }
    // ... other authorization methods.
    default:
      return next(new Error('Unauthorized'));
  }
};

/**
 * Middleware which shows the user init data.
 * @param res - Response object.
 * @param next - function to call the next middleware.
 */
const showInitDataMiddleware: RequestHandler = (req, res, next) => {
  const initData = getInitData(res);
  if (!initData) {
    return next(new Error('Cant display init data as long as it was not found'));
  }
  res.json(initData);
};

/**
 * Middleware which displays the user init data.
 * @param err - handled error.
 * @param res - Response object.
 */
const defaultErrorMiddleware: ErrorRequestHandler = (err, req, res) => {
  res.status(500).json({
    error: err.message,
  });
};

// Your secret bot token.
const token = '1234567890:ABC';

// Create an Express applet and start listening to port 3000.
const app = express();

app.use(authMiddleware);
app.get('/', showInitDataMiddleware);
app.use(defaultErrorMiddleware);

app.listen(3000);

// After the HTTP server was launched, try sending 
// an HTTP GET request to the URL http://localhost:3000/ with 
// an Authorization header containing data in the required format.
```

```
---
## File: apps/docs/packages/tma-js-sdk-react.md

```markdown
---
outline: [ 2, 3 ]
---

# @tma.js/sdk-react

<p style="display: inline-flex; gap: 8px">
  <a href="https://npmjs.com/package/@tma.js/sdk-react">
    <img src="https://img.shields.io/npm/v/@tma.js/sdk-react?logo=npm"/>
  </a>
  <a href="https://github.com/Telegram-Mini-Apps/tma.js/tree/master/packages/sdk-react">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

React.js package providing utilities that developers may find useful when developing a mini application.

> [!TIP]
> Since this package offers utility functions that extend the functionality of [@tma.js/sdk](./tma-js-sdk.md), it is
> recommended to review the SDK package documentation first.

## Installation

Before proceeding, it is assumed that you have already installed the `react` package, as it is a peer dependency of this
package.

::: code-group

```bash [pnpm]
pnpm i @tma.js/sdk-react
```

```bash [npm]
npm i @tma.js/sdk-react
```

```bash [yarn]
yarn add @tma.js/sdk-react
```

:::

> [!INFO]
> This package fully re-exports the [@tma.js/sdk](./tma-js-sdk.md) package, so you don't need to install it separately.

## Usage

Here is a simple usage example of the package:

:::code-group

```tsx [index.tsx]
import ReactDOM from 'react-dom/client';
import { init, backButton } from '@tma.js/sdk-react';

import { BackButton } from './BackButton.js';

// Initialize the package.
init();

// Mount the Back Button, so we will work with 
// the actual component properties.
backButton.mount();

ReactDOM
  .createRoot(document.getElementById('root')!)
  .render(<BackButton />);
```

```ts [BackButton.ts]
import { useEffect } from 'react';
import { backButton, useSignal } from '@tma.js/sdk-react';

/**
 * Component which controls the Back Button visibility.
 */
export function BackButton() {
  const isVisible = useSignal(backButton.isVisible);

  useEffect(() => {
    console.log('The button is', isVisible ? 'visible' : 'invisible');
  }, [isVisible]);

  useEffect(() => {
    backButton.show();
    return () => {
      backButton.hide();
    };
  }, []);

  return null;
}
```

:::

## Hooks

### `useLaunchParams`

A hook that retrieves the application launch parameters. It works exactly as the `retrieveLaunchParams` function
described in the `@tma.js/bridge`
's [documentation](./tma-js-bridge/launch-parameters#retrieving-launch-parameters).

```ts
import { useLaunchParams } from '@tma.js/sdk-react';

function Component() {
  console.log(useLaunchParams());
  // {
  //   tgWebAppBotInline: false,
  //   tgWebAppData: {
  //     user: { ... },
  //     auth_date: Date(...),
  //     query_id: ...,
  //     hash: ...
  //   },
  //   ...
  // };
}

function Component2() {
  console.log(useLaunchParams(true));
  // {
  //   tgWebAppBotInline: false,
  //   tgWebAppData: {
  //     user: { ... },
  //     authDate: Date(...),
  //     queryId: ...
  //     hash: ...
  //   },
  //   ...
  // };
}
```

### `useRawLaunchParams`

Returns launch parameters in a raw format from any known source.

```ts
import { useRawLaunchParams } from '@tma.js/sdk-react';

function Component() {
  console.log(useRawLaunchParams());
  // tgWebAppBotInline=0&tgWebAppData=%7B%22user%22%3A%7B%7D...
}
```

### `useRawInitData`

Uses the [retrieveRawInitData](./tma-js-bridge/launch-parameters#retrieving-raw-init-data)function under the hood and
allows retrieving the init data passed in its initial format.

```ts
import { useRawInitData } from '@tma.js/sdk-react';

function Component() {
  console.log(useRawInitData());
  // '{"user":...,"auth_date":...,"query_id":...,...}'
}
```

### `useSignal`

A helper that allows a developer to use our [signals](./tma-js-signals.md) in the application.

It returns the underlying value and updates it whenever the signal value changes.

```ts
import { useEffect } from 'react';
import { backButton, useSignal } from '@tma.js/sdk-react';

function Component() {
  const isVisible = useSignal(backButton.isVisible);

  useEffect(() => {
    console.log('The button is', isVisible ? 'visible' : 'invisible');
  }, [isVisible]);

  useEffect(() => {
    backButton.show();
    return () => {
      backButton.hide();
    };
  }, []);

  return null;
}
```

### `useAndroidDeviceData`

Retrieves [Android device data](https://core.telegram.org/bots/webapps#additional-data-in-user-agent) from the
`navigator.userAgent`.

The function always returns an object describing the Android device data with all keys marked as optional.

```ts
import { useAndroidDeviceData } from '@tma.js/sdk-react';

function Component() {
  const deviceData = useAndroidDeviceData();
  // Example complete output:
  // {
  //   manufacturer: 'Samsung',
  //   performanceClass: 'AVERAGE',
  //   model: 'SM-A155F',
  //   androidVersion: '14',
  //   sdkVersion: 34,
  // }
}
```

### `useAndroidDeviceDataFrom`

This function works the same as [useAndroidDeviceData](#useandroiddevicedata), but allows passing a custom value to
parse.

```ts
import { useAndroidDeviceDataFrom } from '@tma.js/sdk-react';

function Component() {
  const deviceData = useAndroidDeviceDataFrom(navigator.userAgent);
  // Example complete output:
  // {
  //   manufacturer: 'Samsung',
  //   performanceClass: 'AVERAGE',
  //   model: 'SM-A155F',
  //   androidVersion: '14',
  //   sdkVersion: 34,
  // }
}
```

```
---
## File: apps/docs/packages/tma-js-sdk-solid.md

```markdown
---
outline: [ 2, 3 ]
---

# @tma.js/sdk-solid

<p style="display: inline-flex; gap: 8px">
  <a href="https://npmjs.com/package/@tma.js/sdk-solid">
    <img src="https://img.shields.io/npm/v/@tma.js/sdk-solid?logo=npm"/>
  </a>
  <a href="https://github.com/Telegram-Mini-Apps/tma.js/tree/master/packages/sdk-solid">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

Solid.js package providing utilities that developers may find useful when developing a mini application.

> [!TIP]
> Since this package offers utility functions that extend the functionality
> of [@tma.js/sdk](./tma-js-sdk.md), it is recommended to review the SDK package
> documentation first.

## Installation

Before proceeding, it is assumed that you have already installed the `solid-js` package, as it is a peer dependency of
this package.

::: code-group

```bash [pnpm]
pnpm i @tma.js/sdk-solid
```

```bash [npm]
npm i @tma.js/sdk-solid
```

```bash [yarn]
yarn add @tma.js/sdk-solid
```

:::

> [!INFO]
> This package fully re-exports the [@tma.js/sdk](./tma-js-sdk) package, so you don't need to install it
> separately.

## Usage

Here is a simple usage example of the package:

:::code-group

```tsx [index.tsx]
import { render } from 'solid-js/web';
import { init, backButton } from '@tma.js/sdk-solid';

import { BackButton } from './BackButton.js';

// Initialize the package.
init();

// Mount the Back Button, so we will work with 
// the actual component properties.
backButton.mount();

render(() => <BackButton />, document.getElementById('root')!);
```

```ts [BackButton.ts]
import { createEffect, onCleanup, onMount } from 'solid-js';
import { backButton, useSignal } from '@tma.js/sdk-solid';

/**
 * Component which controls the Back Button visibility.
 */
export function BackButton() {
  const isVisible = useSignal(backButton.isVisible);

  createEffect(() => {
    console.log('The button is', isVisible() ? 'visible' : 'invisible');
  });

  onMount(() => {
    backButton.show();
    onCleanup(() => {
      backButton.hide();
    });
  });

  return null;
}
```

:::

## Hooks

### `useSignal`

A helper that allows you to use our [signals](./tma-js-signals.md) in the application. It
returns a Solid signal which updates every time, our signal changes.

```ts
import { createEffect, onCleanup, onMount } from 'solid-js';
import { backButton, useSignal } from '@tma.js/sdk-solid';

function Component() {
  const isVisible = useSignal(backButton.isVisible);

  createEffect(() => {
    console.log('The button is', isVisible() ? 'visible' : 'invisible');
  });

  onMount(() => {
    backButton.show();
    onCleanup(() => {
      backButton.hide();
    });
  });

  return null;
}
```

```
---
## File: apps/docs/packages/tma-js-sdk-svelte.md

```markdown
---
outline: [ 2, 3 ]
---

# @tma.js/sdk-svelte

<p style="display: inline-flex; gap: 8px">
  <a href="https://npmjs.com/package/@tma.js/sdk-svelte">
    <img src="https://img.shields.io/npm/v/@tma.js/sdk-svelte?logo=npm"/>
  </a>
  <a href="https://github.com/Telegram-Mini-Apps/tma.js/tree/master/packages/sdk-svelte">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

Svelte.js package providing utilities that developers may find useful when developing a mini application.

> [!TIP]
> Since this package offers utility functions that extend the functionality of [@tma.js/sdk](./tma-js-sdk.md), it is
> recommended to review the SDK package documentation first.

## Installation

Before proceeding, it is assumed that you have already installed the `svelte-js` package, as it is a
peer dependency of this package.

::: code-group

```bash [pnpm]
pnpm i @tma.js/sdk-svelte
```

```bash [npm]
npm i @tma.js/sdk-svelte
```

```bash [yarn]
yarn add @tma.js/sdk-svelte
```

:::

> [!INFO]
> This package fully re-exports the [@tma.js/sdk](./tma-js-sdk.md) package, so you don't need to install it separately.

## Usage

Here is a simple usage example of the package:

:::code-group

```svelte [index.svelte]
<script lang="ts">
  import { init, backButton } from '@tma.js/sdk-svelte';

  import { BackButton } from './BackButton.svelte';

  // Initialize the package.
  init();
</script>

<BackButton />
```

```svelte [BackButton.svelte]
/**
 * Component which controls the Back Button visibility.
 */
<script lang="ts">
  import { onMount, onDestroy } from 'svelte';
  import { backButton, useSignal } from '@tma.js/sdk-svelte';

  const isVisible = useSignal(backButton.isVisible);

  $: console.log('The button is', isVisible.value ? 'visible' : 'invisible')

  onMount(() => {
    backButton.show();
  });

  onDestroy(() => {
    backButton.hide();
  });
</script>
```

:::

## Hooks

### `useSignal`

A helper that allows you to use our [signals](./tma-js-signals.md) in the application. It returns a Svelte ref which
updates every time, our signal changes.

```svelte
<script lang="ts">
  import { onMount, onDestroy } from 'svelte';
  import { backButton, useSignal } from '@tma.js/sdk-svelte';

  const isVisible = useSignal(backButton.isVisible);

  $: console.log('The button is', isVisible.value ? 'visible' : 'invisible')

  onMount(() => {
    backButton.show();
  });

  onDestroy(() => {
    backButton.hide();
  });
</script>
```

```
---
## File: apps/docs/packages/tma-js-sdk-vue.md

```markdown
---
outline: [ 2, 3 ]
---

# @tma.js/sdk-vue

<p style="display: inline-flex; gap: 8px">
  <a href="https://npmjs.com/package/@tma.js/sdk-vue">
    <img src="https://img.shields.io/npm/v/@tma.js/sdk-vue?logo=npm"/>
  </a>
  <a href="https://github.com/Telegram-Mini-Apps/tma.js/tree/master/packages/sdk-vue">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

Vue.js package providing utilities that developers may find useful when developing a mini application.

> [!TIP]
> Since this package offers utility functions that extend the functionality of [@tma.js/sdk](./tma-js-sdk.md), it is
> recommended to review the SDK package documentation first.

## Installation

Before proceeding, it is assumed that you have already installed the `vue` package, as it is a peer dependency of this
package.

::: code-group

```bash [pnpm]
pnpm i @tma.js/sdk-vue
```

```bash [npm]
npm i @tma.js/sdk-vue
```

```bash [yarn]
yarn add @tma.js/sdk-vue
```

:::

> [!INFO]
> This package fully re-exports the [@tma.js/sdk](./tma-js-sdk.md) package, so you don't need to install it separately.

## Usage

Here is a simple usage example of the package:

:::code-group

```ts [index.ts]
import { createApp } from 'vue';
import { init } from '@tma.js/sdk-vue';
import App from './App.vue';

// Initialize the package.
init();

const app = createApp(App);

app.mount('#root');
```

```vue [PopupButton.vue]

<script setup lang="ts">
  /**
   * Component which opens native Telegram Popup.
   */
  import { popup } from '@tma.js/sdk-vue'

  const props = defineProps<{ title: string, message: string }>()

  function open() {
    if (popup.isSupported()) {
      popup.open(props);
      return;
    }

    // Open fallback HTML dialog...
  }
</script>

<template>
  <button aria-haspopup="dialog" @click="open">
    Open popup
  </button>
</template>
```

:::

## Hooks

### `useSignal`

A helper that allows you to use our [signals](./tma-js-signals.md) in the application. It
returns a Vue ref which updates every time, our signal changes.

```ts [useMainButton.vue]
/**
 * Composable which encapsulates mainButton interaction logic
 */
import { mainButton, useSignal } from '@tma.js/sdk-vue';

export function useMainButton() {
  if (!mainButton.isMounted()) {
    mainButton.mount();
  }

  const isVisible = useSignal(mainButton.isVisible);

  return { isVisible };
}
```

## Vue Router integration

Telegram application uses URL's hash to transmit launch parameters into TMA,
see [that article](../platform/launch-parameters#transmission-method) for more details.

Therefore, [Vue router](https://router.vuejs.org/) should
use [HTML5 mode](https://router.vuejs.org/guide/essentials/history-mode.html#HTML5-Mode):

```ts [router.ts]
import { createRouter, createWebHistory } from 'vue-router'

const router = createRouter({
  history: createWebHistory(),
  routes: [
    //...
  ],
})
```

```
---
## File: apps/docs/packages/tma-js-sdk.md

```markdown
# @tma.js/sdk

<p style="display: flex; gap: 8px; min-height: 20px">
  <a href="https://npmjs.com/package/@tma.js/sdk">
    <img src="https://img.shields.io/npm/v/@tma.js/sdk?logo=npm"/>
  </a>
  <a href="https://github.com/Telegram-Mini-Apps/tma.js/tree/master/packages/sdk">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

Made-from-scratch TypeScript library for seamless communication with Telegram Mini Apps
functionality.

The code of this library is designed to simplify the process for developers interacting with
Telegram Mini Apps. It consists of several individual components, each responsible for a specific
aspect of the Telegram Mini Apps ecosystem.

Before you begin using the SDK, we highly recommend familiarizing yourself with the Telegram Mini
Apps [documentation](../platform/about.md) to grasp the fundamental concepts of the platform.

As well as the `@tma.js/bridge` package, the SDK provides a lot of utilities free to be used in a functional
way. You can learn more about it this approach [here](./tma-js-bridge/functional-approach.md).

## Installation

::: code-group

```bash [pnpm]
pnpm i @tma.js/sdk
```

```bash [npm]
npm i @tma.js/sdk
```

```bash [yarn]
yarn add @tma.js/sdk
```

:::

## Prerequisites

Before diving deep into the documentation of this package, it is recommended to familiarize
yourself with the following packages:

- [@tma.js/signals](./tma-js-signals.md) - our own JavaScript signals used almost
  everywhere in the package.
- [@tma.js/bridge](./tma-js-bridge.md) - the lowest level communication layer with
  Telegram Mini Apps. The SDK uses it under the hood and re-exports some functionality.

## Usage Example

```ts
import { init, backButton } from '@tma.js/sdk';

// Init the package and actualize all global dependencies.
init();

// Mount the back button component and retrieve its actual
// state.
backButton.mount();

// When a user clicked the back button, go back in the
// navigation history.
const off = backButton.onClick(() => {
  off();
  window.history.back();
});
```
```
---
## File: apps/docs/packages/tma-js-signals.md

```markdown
# @tma.js/signals

<p style="display: flex; gap: 8px; min-height: 20px">
  <a href="https://npmjs.com/package/@tma.js/signals">
    <img src="https://img.shields.io/npm/v/@tma.js/signals?logo=npm"/>
  </a>
  <img src="https://img.shields.io/bundlephobia/minzip/@tma.js/signals"/>
  <a href="https://github.com/Telegram-Mini-Apps/telegram-apps/tree/master/tma.js/signals">
    <img src="https://img.shields.io/badge/source-black?logo=github"/>
  </a>
</p>

Our own implementation of signals we are using across the `@tma.js` packages.

## Installation

::: code-group

```bash [pnpm]
pnpm i @tma.js/signals
```

```bash [npm]
npm i @tma.js/signals
```

```bash [yarn]
yarn add @tma.js/signals
```

:::

## Signal

The `signal` function is the simplest signal constructor used by other package functions. To
create a new signal, simply pass the initial value:

```ts
import { signal } from '@tma.js/signals';

const isVisible = signal(false);
```

The returned value represents a function with useful methods. The function itself returns the
current signal value.

```ts
console.log('The element is', isVisible() ? 'visible' : 'invisible');
```

The function also accepts options as the second argument. A developer can specify the
`equals` function, which accepts the current and incoming values and should return true,
if they are considered equal.

```ts
const s = signal(10, {
  equals(current, next) {
    // Will not update the signal if the next value is
    // higher than the current one.
    return next > current;
  }
});
s.set(20); // will not update the signal
s.set(5); // will update the signal
```

### `set`

To set a new value, use the `set` method:

```ts
isVisible.set(true);
```

### `sub`

To track signal changes, use the `sub` method. It returns a function that removes the bound
listener. The listener accepts two arguments: the current and previous values, respectively.

```ts
const removeListener = isVisible.sub((current, prev) => {
  console.log('Value changed from', prev, 'to', current);
});

// Remove the listener whenever needed.
removeListener();
```

To call the listener only once, use the second:

```ts
function listener(current: boolean, prev: boolean) {
  console.log('Value changed from', prev, 'to', current);
}

isVisible.sub(listener, true);
// or
isVisible.sub(listener, { once: true });
```

### `unsub`

Alternatively, to remove a listener, a developer can use the `unsub` method:

```ts
function listener(current: boolean, prev: boolean) {
  console.log('Value changed from', prev, 'to', current);
}

isVisible.sub(listener);

// Remove the listener whenever needed.
isVisible.unsub(listener);
```

### `unsubAll`

To remove all listeners, use the `unsubAll` method:

```ts
isVisible.unsubAll();
```

::: info

This method does not remove listeners added by computed signals.

:::

### `reset`

To revert to the initially specified value, use the `reset` method:

```ts
import { signal } from '@tma.js/signals';

const isVisible = signal(false);
isVisible.set(true); // isVisible becomes true
isVisible.reset(); // isVisible becomes false again
```

### `destroy`

When the signal is no longer needed and is not being listened to by any computed signal, a developer
can use the `destroy` method, which forcibly removes all listeners:

```ts
isVisible.destroy();
```

## Computed

The `computed` function constructs a computed signal, which is automatically recalculated when any
of the called signals change.

Hereâ€™s an example:

```ts
import { signal, computed } from '@tma.js/signals';

const a = signal(2);
const b = signal(2);
const sum = computed(() => a() + b()); // 4

a.set(5); // sum becomes 7
b.set(5); // sum becomes 10
```

The returned value represents a signal that lacks the `set` and `reset` methods.

## Batching Changes

The `batch` function creates a scope where signal mutations are batched.

Itâ€™s useful when a developer wants to prevent a computed signal from recomputing every time several
dependent signals change consecutively.

```ts
import { signal, computed, batch } from '@tma.js/signals';

const a = signal(1);
const b = signal(2);
const c = signal(3);
const sum = computed(() => a() + b() + c()); // 6

// Without batching, re-computation happens 3 times:
a.set(2); // sum recomputes and becomes 7
b.set(3); // sum recomputes and becomes 8
c.set(4); // sum recomputes and becomes 9

// Reset each signal.
a.reset();
b.reset();
c.reset();
// Note: reset calls the set method, which also causes
// the sum signal to recompute.

// Now, let's optimize using the batch function:
batch(() => {
  a.set(2);
  b.set(3);
  c.set(4);
});
// At this point, sum will recompute only once because
// batch causes the sum signal to wait for the function to complete,
// and then it triggers the recomputation.
console.log(sum()); // 9
```

```
---
## File: apps/docs/platform/about.md

```markdown
# About the Platform

Telegram Mini Apps is a technology created by the developers of the famous messenger Telegram. Its main 
purpose is to provide developers with a more flexible communication channel with Telegram users.

It may seem unclear, but Mini Apps are not self-served services. The first thing to note is,
technically, this technology is just an add-on for such already-known Telegram functionality as
Telegram Bots. So, currently, creating a Mini App without creating a Telegram Bot is not possible.

The platform offers a high variety of available methods to communicate with the Telegram application
to make your web applications look more native, allow them to simulate native application's
behavior, and finally, to **mimic** native applications.

## Required Technologies

Before starting to create an application on the Mini Apps platform, it is important to know what
Mini Apps are from a technical standpoint. This will lead the developer to the selection of language and technology.

Internally, Mini Apps are typical web applications, which are displayed in WebView. In other words,
they are just a set of static files (mostly `.js`, `.css`, and `.html`). So, to create Mini App, it
is enough to learn standard front-end development technologies, such as:

- JavaScript
- CSS
- HTML

Really simple, isn't it? But to make much more serious and bigger applications, we recommend using
more solid technologies, such as `TypeScript`, `React`, `SCSS`, etc.

So, if we want to create a Mini App, we should create a standard web application with any technology 
stack. The only thing Telegram needs from the developer is the application URL. This URL will be used as 
a source for the WebView component of the Telegram client, which will load and display the application 
within Telegram.

## Usage

As we mentioned in the previous section, Mini Apps are add-ons for Telegram Bots. Telegram Bots are
also a well-known technology that provides functionality for a wide range of use cases. You could create a
bot to buy a ticket in the cinema, tell jokes, generate random numbers, etc. In other
words, the bot can do whatever the developer can think of.

The problem is, the visual part of bots is not as good and functional as it could be. Their current
implementation is "console-like" which is more appropriate for developers, not common users. That's
where Mini Apps are useful.

Using Mini Apps, developers can create more user-friendly and complex interfaces, which
are commonly used by typical users. With this technology, the developer is still able to communicate
with the bot behind Mini App, but, additionally, they can provide some more flexible interfaces to
interact with.

Mini Apps are used when a standard bot interface is not enough. Create a Mini App when you
want to make user life easier when displaying several buttons is not even close to the
functionality you want to provide.

## Supported Applications

Currently, Telegram Mini Apps are available on a wide list of Telegram
applications:

- [Telegram for Android](https://github.com/DrKLO/Telegram) `android`;
- [Telegram for iOS](https://github.com/TelegramMessenger/Telegram-iOS) `ios`;
- [Telegram for macOS](https://github.com/overtake/TelegramSwift) `macos`;
- [Telegram Desktop](https://github.com/telegramdesktop/tdesktop) `tdesktop`;
- [Telegram Web A](https://github.com/Ajaxy/telegram-tt) `weba`;
- [Telegram Web K](https://github.com/morethanwords/tweb) `web`;

Other applications either don't have implementation for Telegram Mini Apps or
support it too poorly. This will probably be useful in the next sections of the
documentation.

::: info

As long as all applications are being developed separately, there may be variations in how they
implement the platform. If you encounter unexpected differences, please consider reporting
an [issue](https://github.com/Telegram-Mini-Apps/issues).

:::

```
---
## File: apps/docs/platform/apps-communication.md

```markdown
# Apps Communication

To understand how to use Mini Apps functionality, we should start by learning how Telegram native
application communicates with Mini App.

Depending on the Telegram application, it will create a special environment for the Mini App. For
developers, it is enough to know, that this environment is web-based, but nevertheless, each of them
has its own communication way between the Telegram application and Mini App.

To be more accurate, Telegram Mini Apps is not new technology even in the world of Telegram.
Messenger already has such technology as Telegram Games, which is, internally, almost the same
platform as Mini Apps. At least, it uses the same way of communication with the front-end app.

## Methods and Events

The next thing important to know is there are 2 terms that are usually used in the context of apps
communication:

- `events` are received by Mini App from Telegram app;
- `methods` are called by Mini App and executed by Telegram app.

Internally, each of them is the event, but we will use these terms as a
convention to speak the same language.

```
---
## File: apps/docs/platform/authorizing-user.md

```markdown
# Authorizing User

This article provides code examples in different programming languages on how a developer could authorize a user using
Telegram [init data](init-data.md).

## Client

First of all, it is required to begin with the transmitting init data from the client side to the server. We could do it
using this code:

```typescript
import { retrieveRawInitData } from '@telegram-apps/sdk'

const initDataRaw = retrieveRawInitData()

fetch('https://example.com/api', {
  method: 'POST',
  headers: {
    Authorization: `tma ${initDataRaw}`
  },
});
```

We are sending a request to an imaginary server using the `https://example.com/api` URL. This request uses the HTTP POST
method (you can use whatever you want) and appends the `Authorization` header, which is the most important here. It
represents a string containing 2 parts divided by a space. The first one describes the authorization method (in this
case, our server is going to support several others), and the second one contains authorization data. In the case of
Telegram Mini Apps, the second part is raw init data.

## Server

Now, when init data is transmitted to the server side, we should create a simple HTTP server which uses this data and
authorizes the user.

### Node.js

The Node.js example uses [express](https://www.npmjs.com/package/express) to process HTTP requests.

```typescript
import { validate, parse, type InitData } from '@telegram-apps/init-data-node';
import express, {
  type ErrorRequestHandler,
  type RequestHandler,
  type Response,
} from 'express';

/**
 * Sets init data in the specified Response object.
 * @param res - Response object.
 * @param initData - init data.
 */
function setInitData(res: Response, initData: InitData): void {
  res.locals.initData = initData;
}

/**
 * Extracts init data from the Response object.
 * @param res - Response object.
 * @returns Init data stored in the Response object. Can return undefined in case,
 * the client is not authorized.
 */
function getInitData(res: Response): InitData | undefined {
  return res.locals.initData;
}

/**
 * Middleware which authorizes the external client.
 * @param req - Request object.
 * @param res - Response object.
 * @param next - function to call the next middleware.
 */
const authMiddleware: RequestHandler = (req, res, next) => {
  // We expect passing init data in the Authorization header in the following format:
  // <auth-type> <auth-data>
  // <auth-type> must be "tma", and <auth-data> is Telegram Mini Apps init data.
  const [authType, authData = ''] = (req.header('authorization') || '').split(' ');

  switch (authType) {
    case 'tma':
      try {
        // Validate init data.
        validate(authData, token, {
          // We consider init data sign valid for 1 hour from their creation moment.
          expiresIn: 3600,
        });

        // Parse init data. We will surely need it in the future.
        setInitData(res, parse(authData));
        return next();
      } catch (e) {
        return next(e);
      }
    // ... other authorization methods.
    default:
      return next(new Error('Unauthorized'));
  }
};

/**
 * Middleware which shows the user init data.
 * @param _req
 * @param res - Response object.
 * @param next - function to call the next middleware.
 */
const showInitDataMiddleware: RequestHandler = (_req, res, next) => {
  const initData = getInitData(res);
  if (!initData) {
    return next(new Error('Cant display init data as long as it was not found'));
  }
  res.json(initData);
};

/**
 * Middleware which displays the user init data.
 * @param err - handled error.
 * @param _req
 * @param res - Response object.
 */
const defaultErrorMiddleware: ErrorRequestHandler = (err, _req, res) => {
  res.status(500).json({
    error: err.message,
  });
};

// Your secret bot token.
const token = '1234567890:ABC';

// Create an Express applet and start listening to port 3000.
const app = express();

app.use(authMiddleware);
app.get('/', showInitDataMiddleware);
app.use(defaultErrorMiddleware);

app.listen(3000);

// After the HTTP server was launched, try sending an HTTP GET request to the URL 
// http://localhost:3000/ with an Authorization header containing data in the required format.
```

### GoLang

The GoLang example uses [gin](https://gin-gonic.com/) to process HTTP requests.

```go
package main

import (
	"context"
	"strings"
	"time"

	"github.com/gin-gonic/gin"
	initdata "github.com/telegram-mini-apps/init-data-golang"
)

type contextKey string

const (
	_initDataKey contextKey = "init-data"
)

// Returns new context with specified init data.
func withInitData(ctx context.Context, initData initdata.InitData) context.Context {
	return context.WithValue(ctx, _initDataKey, initData)
}

// Returns the init data from the specified context.
func ctxInitData(ctx context.Context) (initdata.InitData, bool) {
	initData, ok := ctx.Value(_initDataKey).(initdata.InitData)
	return initData, ok
}

// Middleware which authorizes the external client.
func authMiddleware(token string) gin.HandlerFunc {
	return func(context *gin.Context) {
		// We expect passing init data in the Authorization header in the following format:
		// <auth-type> <auth-data>
		// <auth-type> must be "tma", and <auth-data> is Telegram Mini Apps init data.
		authParts := strings.Split(context.GetHeader("authorization"), " ")
		if len(authParts) != 2 {
			context.AbortWithStatusJSON(401, map[string]any{
				"message": "Unauthorized",
			})
			return
		}

		authType := authParts[0]
		authData := authParts[1]

		switch authType {
		case "tma":
			// Validate init data. We consider init data sign valid for 1 hour from their
			// creation moment.
			if err := initdata.Validate(authData, token, time.Hour); err != nil {
				context.AbortWithStatusJSON(401, map[string]any{
					"message": err.Error(),
				})
				return
			}

			// Parse init data. We will surely need it in the future.
			initData, err := initdata.Parse(authData)
			if err != nil {
				context.AbortWithStatusJSON(500, map[string]any{
					"message": err.Error(),
				})
				return
			}

			context.Request = context.Request.WithContext(
				withInitData(context.Request.Context(), initData),
			)
		}
	}
}

// Middleware which shows the user init data.
func showInitDataMiddleware(context *gin.Context) {
	initData, ok := ctxInitData(context.Request.Context())
	if !ok {
		context.AbortWithStatusJSON(401, map[string]any{
			"message": "Init data not found",
		})
		return
	}

	context.JSON(200, initData)
}

func main() {
	// Your secret bot token.
	token := "1234567890:ABC"

	r := gin.New()

	r.Use(authMiddleware(token))
	r.GET("/", showInitDataMiddleware)

	if err := r.Run(":3000"); err != nil {
		panic(err)
	}
}
```

```
---
## File: apps/docs/platform/back-button.md

```markdown
# Back Button

![Back Button](/components/back-button.png)

The main task that the Back Button performs is to provide a seemingly native way to navigate back in
the routing history. However, Telegram does not restrict the developer in the ways of using the Back
Button and allows them to handle the component click event as required in the application.

When working with this component, it is important to understand that, like other Telegram Mini Apps
components, clicking it does not inherently trigger any built-in action. Its handling is the
responsibility of the developer.

To show the Back Button, it is required to
call [web_app_setup_back_button](methods.md#web-app-setup-back-button)
method. When user clicks this component, Telegram application
emits [back_button_pressed](events.md#back-button-pressed) event.


```
---
## File: apps/docs/platform/closing-behavior.md

```markdown
# Closing Behavior

![Closing confirmation](/functionality/closing-confirmation.png)

Mini Apps are intended to handle different, and at times, complex scenarios where the user can
navigate deep into the application architecture. It's a common situation when a user is following a
specific workflow, such as purchasing an airplane ticket, which involves multiple steps.

Accidentally closing a Mini App with data loss can be a significant disappointment for the user. To
prevent this, developers have the option to configure the closing behavior and prompt the user
before closing the application.

To enable closing confirmation, Telegram Mini Apps provides a method
called [web_app_setup_closing_behavior](methods.md#web-app-setup-closing-behavior).

```
---
## File: apps/docs/platform/creating-new-app.md

```markdown
# Creating New App

In this article, we will delve into the process of developing a new application on the Telegram Mini
Apps platform, we will find out exactly what actions need to be performed to create it, as well as
give advice on improving the process of creating an application.

The process of creating an application usually consists of the following basic steps:

1. Creating Telegram bot and registering Mini App.
2. Creating web application.
3. Getting web application URL and setting it via BotFather.

## Before Starting

Before creating a new Mini App, you need to remember an important rule: _do not create
entities related to development in the production environment_. Development within the production
environment is a sign of bad taste, so use it strictly if you can't avoid it.

To create an application we should use test environment. You can learn more about switching to it
in [this](test-environment.md) article.

Speaking of advantages a developer gets from the test environment, it is important to mention an
opportunity of usage of HTTP links instead of HTTPS, as well as IPs directly. Production
environment allows usage only valid HTTPS links.

## Creating Application in BotFather

As long as technically, Mini Apps are connected with Telegram bots, we should firstly create
a Telegram bot. To do this, you need to find the father of all bots, the
bot [BotFather](https://t.me/botfather) and use the command `/newbot`, then go through the proposed
process, specifying all the necessary data.

When the bot is created, it is required then to use the command `/newapp` and again go through the
procedure of creating another entity - the Telegram Mini Apps application, linking it to the
Telegram bot. From now on, the created application will be available via a direct link of the
form `https://t.me/{mybot}/{myapp}`.

::: info

Telegram Mini Apps technology can also be utilized without creating a new application but rather as
a web interface for a bot. To use it as an extension of the bot, use the
BotFather's `/setmenubutton` command.

:::

## Web Application Link

Before reading this section, make sure that you have already created a frontend application
that can be accessed via a direct link.

### Obtaining

To learn more about obtaining a link for your Mini App, refer to [this](getting-app-link.md)
article.

### Applying

When HTTPS link is received, it must be used in a previously created Telegram bot. Telegram
supports several ways to install this link:

- **For the bot menu button**. Then every user who will enter a dialogue with the bot will be able
  to open its "menu" in the form of a developed application.
- **For Telegram Mini Apps application**. Then the application will open only if the user
  follows the link in format `https://t.me/{mybot}/{myapp}`. In this case, user can avoid joining
  a dialogue with the bot.

#### Menu Button

To set the link on the menu button, you need to go to the dialog with BotFather and use
the command (send a message) `/setmenubutton`. Next, BotFather will ask you to select a bot, specify
a link, as well as a title for the menu button.

As a result, when a user enters a chat with a bot, he will be able to open a web application by
clicking on the menu button on the bottom left in the interface.

#### Direct Link

To install a direct link to the application, you must complete the following steps:

1. Send the BotFather command `/myapps`.
2. Select the required application.
3. Click `Edit link` and install a new link.

Now when the user clicks on a link in format `https://t.me/{mybot}/{myapp}`, Telegram
will display the web component with the source address as the URL specified in the settings.

## Debugging Application

Sometimes, it is necessary to debug the developed application. To learn more, refer
to [this](debugging.md) article.

[//]: # (## Additional)

[//]: # ()
[//]: # (### Hot Module Replacement)

[//]: # ()
[//]: # (The application development process is a fairly complex and lengthy process. You always want to see)

[//]: # (the changes you make in the code right away on the screen. In order to see the changes in real time,)

[//]: # (it is necessary to use such a technique as **Hot Module Replacement**. This section will not cover)

[//]: # (the process of setting it up, as it often depends on the project, but well-known frameworks already)

[//]: # (include this functionality by default.)

[//]: # ()
[//]: # (How to configure HMR can be found)

[//]: # (in [this Webpack article]&#40;https://webpack.js.org/guides/hot-module-replacement/&#41;.)

[//]: # (## Ð—Ð°ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ)

[//]: # ()

[//]: # (Ð­Ñ‚Ð¾Ð³Ð¾ Ð²Ð¿Ð¾Ð»Ð½Ðµ Ð´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð´Ð»Ñ Ñ‚Ð¾Ð³Ð¾, Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ ÑÐ²Ð¾Ðµ Ð¿ÐµÑ€Ð²Ð¾Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ TWA.)

[//]: # (Ð¢ÐµÐ¼ Ð½Ðµ Ð¼ÐµÐ½ÐµÐµ, Ð´Ð°Ð½Ð½Ñ‹Ð¹ Ð³Ð°Ð¹Ð´ Ð½Ðµ Ð¿Ð¾ÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ Ð²ÑÐµ Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸ Ð¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼Ñ‹, Ð° Ð»Ð¸ÑˆÑŒ)

[//]: # (Ð¿Ð¾Ð¼Ð¾Ð³Ð°ÐµÑ‚ Ð¸Ð·Ð±ÐµÐ¶Ð°Ñ‚ÑŒ Ð±ÐµÑÐ¿Ð¾Ð»ÐµÐ·Ð½Ð¾Ð¹ Ñ‚Ñ€Ð°Ñ‚Ñ‹ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð½Ð° Ð±Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ð¸ Ð¿Ñ€Ð¾ÑÑ‚Ñ‹Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹.)

[//]: # (## Debugging application)

[//]: # ()

[//]: # (As long as Web Apps are web applications, and they are opened in some native)

[//]: # (components &#40;not in browser&#41;, we are not allowed to debug them in common way as)

[//]: # (we do it in browser applications until some additional actions are done.)

[//]: # ()

[//]: # (To enable debug mode in native application follow)

[//]: # ([official documentation]&#40;https://core.telegram.org/bots/webapps#debug-mode-for-web-apps&#41;)

[//]: # (.)
```
---
## File: apps/docs/platform/debugging.md

```markdown
# Debugging

Application development is rather hard and continous process which requires a lot of time
and patience. To simplify it, the Telegram Mini Apps platform allows debugging developed
application.

## Enabling Debug Mode

### Telegram Desktop

- Download and launch the [Beta Version](https://desktop.telegram.org/changelog#beta-version) of
  Telegram Desktop.
- Open the side menu and navigate to `Settings > Advanced`.
- Scroll down the opened menu and click the `Experimental settings` button.
- Check the `Enable webview inspecting` option.

When the debug mode is enabled, right-clicking in the Mini App will display a context menu with
the `Inspect` option, allowing you to open developer tools.

### Telegram for macOS

- Download and launch the [Beta Version](https://telegram.org/dl/macos/beta) of Telegram macOS.
- Quickly click 5 times on the Settings icon to open the Debug Menu and enable `Debug Mini Apps`
  option.

As well as in Telegram Desktop, `Inspect Element` option will appear in the context menu.

### Telegram for Android

- [Enable USB-Debugging](https://developer.chrome.com/docs/devtools/remote-debugging/) on your
  device.
- In Telegram Settings, scroll all the way down, press and hold on the **version number** two times.
- Choose `Enable WebView Debug` in the Debug Settings.
- Connect your phone to your computer and open `chrome://inspect/#devices` in Chrome â€“ you will see
  your Mini App there when you launch it on your phone.

### Telegram for iOS

iOS webview debugging requires Safari desktop browser and therefore macOS.

To access iOS debugging features without macOS, refer to the [Eruda](#eruda) section.

On iOS device:
- Go to `Settings`.
- Find Safari icon and press on it.
- Scroll down and press `Advanced`.
- Enable `Web Inspector` option.

On macOS:
- Open Safari browser.
- Open `Settings` (`âŒ˜ + ,`).
- Select `Advanced` tab.
- Check `Show features for web developers` option at the bottom.

Next steps:
- Connect iOS device to Mac via cable.
- Open Mini App inside iOS Telegram client.
- Open `Develop` tab in the menu bar in Safari on macOS.
- Select connected iPhone.
- Optional: select `Connect via network` and disconnect the cable.
- Select opened webview URL under `Telegram` block.

## Eruda

[Eruda](https://www.npmjs.com/package/eruda) is a technology that provides a lightweight console in
the web. We typically use such packages in environments that don't offer their own consoles.

First of all, it is necessary to install the package and initialize it.

::: code-group

```html [script tag]

<script src="//cdn.jsdelivr.net/npm/eruda"></script>
<script>eruda.init()</script>
```

```typescript [npm package]
import eruda from 'eruda';

eruda.init();
```

:::

After eruda is initialized, you will see its element in the UI. Clicking on it will display the
console.
```
---
## File: apps/docs/platform/events.md

```markdown
---
outline: [ 2, 3 ]
---

# Events

Events are signals, sent from Telegram native application in case, when some external action was
done. Like methods, each event has its unique name and parameters.

## Web

As mentioned before, the web version uses a standard way of communication between iframes. It means,
the parent iframe is able to send events through `window.postMessage` function. To handle this type
of message, it is enough to add `message` event listener on the global `window` object:

```typescript
window.addEventListener('message', ...);
```

The native application will send an event with `data: string` which represents a JSON object
converted to string. This object has the same interface as we defined in
the [Methods](methods.md#web) section:

```typescript
interface MessageJSON {
  eventType: string;
  eventData: any;
}
```

Then, lets imagine how we could process an event from Telegram application:

```typescript
window.addEventListener('message', ({ data }) => {
  const { eventType, eventData } = JSON.parse(data);
  console.log(eventType, eventData);
});
```

::: warning

In this code, we assumed, that the `message` event is sent only by the native application which is
not always true in real applications. Additionally, we didn't check if `data` is really of
type `string`. Don't forget to check each type and appropriately process incoming events.

:::

## Desktop, Mobile and Windows Phone

Desktop, mobile, and Windows Phone versions of Telegram donâ€™t use the method, described in the
previous section. They do it in a bit unusual way. The first thing developer should know, is in
case, when Telegram needs to emit an event, it will insert JavaScript code, which calls a globally
defined function.

Here is an example:

```typescript
window.Telegram.WebView.receiveEvent('popup_closed', {
  button_id: 'cancel'
});
```

Path to this function depends on platform:

- `window.TelegramGameProxy.receiveEvent` - Telegram Desktop;
- `window.Telegram.WebView.receiveEvent` - Telegram for iOS and Android;
- `window.TelegramGameProxy_receiveEvent` - Windows Phone

All of these functions have the same signature:

```typescript
type ReceiveEvent = (eventType: string, eventData: unknown) => void;
```

So, the solution is rather simple. To handle incoming events we should create a function of this
type and assign it to all 3 paths.

## Listening to Events

Handling all possible environments for a developer's application can be challenging. To simplify
this process, the community developed the [@telegram-apps/sdk](../packages/telegram-apps-sdk/2-x)
package, which greatly eases integration.

Here's how to use it:

```ts
import { on } from '@telegram-apps/sdk';

// Start listening to "viewport_changed" event. Returned value
// is a function, which removes this event listener.
const removeListener = on('viewport_changed', payload => {
  console.log('Viewport changed:', payload);
});

// Remove this event listener.
removeListener();
```

You can learn more about calling methods in the
package's [documentation](../packages/telegram-apps-bridge/events.md#listening-to-events).

## Available Events

This section contains the list of events, sent from Telegram: their names, description, and
parameters. Section title means minimal version, from which events inside the section could be sent.

### `accelerometer_changed`

Available since: **v8.0**

Accelerometer data changed.

| Field | Type     | Description                                               |
|-------|----------|-----------------------------------------------------------|
| x     | `number` | The current acceleration in the X-axis, measured in m/sÂ². |
| y     | `number` | The current acceleration in the Y-axis, measured in m/sÂ². |
| z     | `number` | The current acceleration in the Z-axis, measured in m/sÂ². |

### `accelerometer_failed`

Available since: **v8.0**

Failed to start accelerometer data tracking.

| Field | Type     | Description     |
|-------|----------|-----------------|
| error | `string` | Occurred error. |

### `accelerometer_started`

Available since: **v8.0**

Accelerometer data tracking started.

### `accelerometer_stopped`

Available since: **v8.0**

Accelerometer data tracking stopped.

### `back_button_pressed`

Available since: **v6.1**

User clicked the [Back Button](back-button.md).

### `biometry_auth_requested`

Available since: **v7.2**

Biometry authentication request completed. This event usually occurs in a response to the
[web_app_request_auth](methods.md#web-app-biometry-request-auth) method.

If authentication was successful, the event contains a token from the local secure storage.

| Field  | Type     | Description                                                                                                |
|--------|----------|------------------------------------------------------------------------------------------------------------|
| status | `string` | Authentication status. Possible values: `failed` or `authorized`.                                          |
| token  | `string` | _Optional_. Token from the local secure storage saved previously. Passed only if `status` is `authorized`. |

### `biometry_info_received`

Available since: **v7.2**

Biometry settings were received.

| Field            | Type      | Description                                                                                    |
|------------------|-----------|------------------------------------------------------------------------------------------------|
| available        | `boolean` | Shows whether biometry is available.                                                           |
| access_requested | `boolean` | Shows whether permission to use biometrics has been requested.                                 |
| access_granted   | `boolean` | Shows whether permission to use biometrics has been granted.                                   |
| device_id        | `string`  | A unique device identifier that can be used to match the token to the device.                  |
| token_saved      | `boolean` | Show whether local secure storage contains previously saved token.                             |
| type             | `string`  | The type of biometrics currently available on the device. Possible values: `face` or `finger`. |

### `biometry_token_updated`

Available since: **v7.2**

Biometry token was updated.

| Field  | Type     | Description                                             |
|--------|----------|---------------------------------------------------------|
| status | `string` | Update status. Possible values: `updated` or `removed`. |

### `clipboard_text_received`

Available since: **v6.4**

Telegram application attempted to extract text from clipboard.

| Field  | Type               | Description                                                                                                                                              |
|--------|--------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------|
| req_id | `string`           | Passed during the [web_app_read_text_from_clipboard](methods.md#web-app-read-text-from-clipboard) method invocation `req_id` value.                      |
| data   | `string` or `null` | _Optional_. Data extracted from the clipboard. The returned value will have the type `string` only in the case, application has access to the clipboard. |

### `content_safe_area_changed`

Available since: **v8.0**

This event occurs whenever the content safe area changes in the user's Telegram app. For instance,
when a user switches to landscape mode.

The **safe area** ensures that content does not overlap with Telegram's UI elements.

The **content safe area** is a subset of the device's safe area, specifically covering Telegram's
UI.

| Field  | Type     | Description                                                                                      |
|--------|----------|--------------------------------------------------------------------------------------------------|
| top    | `number` | The top inset in pixels, representing the space to avoid at the top of the content area          |
| bottom | `number` | The bottom inset in pixels, representing the space to avoid at the bottom of the content area    |
| left   | `number` | The left inset in pixels, representing the space to avoid on the left side of the content area   |
| right  | `number` | The right inset in pixels, representing the space to avoid on the right side of the content area |

### `custom_method_invoked`

Available since: **v6.9**

Custom method invocation completed.

| Field  | Type      | Description                               |
|--------|-----------|-------------------------------------------|
| req_id | `string`  | Unique identifier of this invocation.     |
| result | `unknown` | _Optional_. Method invocation result.     |
| error  | `string`  | _Optional_. Method invocation error code. |

### `device_orientation_changed`

Available since: **v8.0**

Device orientation data changed.

| Field    | Type      | Description                                                                                                |
|----------|-----------|------------------------------------------------------------------------------------------------------------|
| absolute | `boolean` | _Optional_.  A boolean that indicates whether the device is providing orientation data in absolute values. |
| alpha    | `number`  | The rotation around the Z-axis, measured in radians.                                                       |
| beta     | `number`  | The rotation around the X-axis, measured in radians.                                                       |                                                    
| gamma    | `number`  | The rotation around the Y-axis, measured in radians.                                                       |

### `device_orientation_failed`

Available since: **v8.0**

Device orientation data tracking failed to start.

| Field | Type     | Description     |
|-------|----------|-----------------|
| error | `string` | Occurred error. |

### `device_orientation_started`

Available since: **v8.0**

Device orientation data tracking started.

### `device_orientation_stopped`

Available since: **v8.0**

Device orientation data tracking stopped.

### `device_storage_cleared`

Available since: **v9.0**

Device's local storage was cleared.

| Field  | Type     | Description                  |
|--------|----------|------------------------------|
| req_id | `string` | A unique request identifier. |

### `device_storage_failed`

Available since: **v9.0**

An error occurred while working with the device's local storage.

| Field  | Type     | Description                  |
|--------|----------|------------------------------|
| req_id | `string` | A unique request identifier. |
| error  | `string` | An occurred error.           |

### `device_storage_key_received`

Available since: **v9.0**

A value from the device's local storage was retrieved.

| Field  | Type             | Description                  |
|--------|------------------|------------------------------|
| req_id | `string`         | A unique request identifier. |
| value  | `string \| null` | A retrieved value.           |

### `device_storage_key_saved`

Available since: **v9.0**

A value in the device's local storage was saved.

| Field  | Type     | Description                  |
|--------|----------|------------------------------|
| req_id | `string` | A unique request identifier. |

### `emoji_status_access_requested`

Available since: **v8.0**

Access to set custom emoji status was requested.

| Field  | Type     | Description                                                |
|--------|----------|------------------------------------------------------------|
| status | `string` | Request status. Possible values: `allowed` or `cancelled`. |

### `emoji_status_failed`

Available since: **v8.0**

Failed to set custom emoji status.

| Field | Type     | Description                                                                             |
|-------|----------|-----------------------------------------------------------------------------------------|
| error | `string` | Emoji set failure reason. Possible values: `SUGGESTED_EMOJI_INVALID` or `USER_DECLINED` |

### `emoji_status_set`

Available since: **v8.0**

Custom emoji status set.

### `file_download_requested`

Available since: **v8.0**

| Field  | Type     | Description                                                     |
|--------|----------|-----------------------------------------------------------------|
| status | `string` | Request status. Set to `downloading` if a file is being loaded. |

### `fullscreen_changed`

Available since: **v8.0**

Occurs whenever the mini app enters or exits the fullscreen mode.

| Field         | Type      | Description                                                   |
|---------------|-----------|---------------------------------------------------------------|
| is_fullscreen | `boolean` | Indicates if the application is currently in fullscreen mode. |

### `fullscreen_failed`

Available since: **v8.0**

Occurs whenever the mini app enters or exits the fullscreen mode.

| Field | Type     | Description                                                                           |
|-------|----------|---------------------------------------------------------------------------------------|
| error | `string` | Fullscreen mode status error. Possible values: `UNSUPPORTED` or `ALREADY_FULLSCREEN`. |

### `gyroscope_changed`

Available since: **v8.0**

Gyroscope data changed.

| Field | Type     | Description                                                     |
|-------|----------|-----------------------------------------------------------------|
| x     | `number` | The current rotation rate around the X-axis, measured in rad/s. |
| y     | `number` | The current rotation rate around the Y-axis, measured in rad/s. |
| z     | `number` | The current rotation rate around the Z-axis, measured in rad/s. |

### `gyroscope_failed`

Available since: **v8.0**

Gyroscope data tracking failed to run.

| Field | Type     | Description     |
|-------|----------|-----------------|
| error | `string` | Occurred error. |

### `gyroscope_started`

Available since: **v8.0**

Gyroscope data tracking started.

### `gyroscope_stopped`

Available since: **v8.0**

Gyroscope data tracking stopped.

### `home_screen_added`

Available since: **v8.0**

The mini application was added to the device's home screen.

### `home_screen_checked`

Available since: **v8.0**

The status of the mini application being added to the home screen has been checked.

| Field  | Type     | Description                                                                                                                        |
|--------|----------|------------------------------------------------------------------------------------------------------------------------------------|
| status | `string` | The status of the mini application being added to the home screen. Possible values: `unsupported`, `unknown`, `added` and `missed` |

- `unsupported` â€“ the feature is not supported, and it is not possible to add the icon to the home
  screen,
- `unknown` â€“ the feature is supported, and the icon can be added, but it is not possible to
  determine if the icon has already been added,
- `added` â€“ the icon has already been added to the home screen,
- `missed` â€“ the icon has not been added to the home screen.

### `home_screen_failed`

Available since: **v8.0**

User declined the request to add the current mini application to the device's home screen.

### `invoice_closed`

An invoice was closed.

| Field  | Type     | Description                                                                                               |
|--------|----------|-----------------------------------------------------------------------------------------------------------|
| slug   | `string` | Passed during the [web_app_open_invoice](methods.md#web-app-open-invoice) method invocation `slug` value. |
| status | `string` | Invoice status. Possible values: `paid`, `failed`, `pending` or `cancelled`.                              |

### `location_checked`

Available since: **v8.0**

Location-related functionality availability status was retrieved.

| Field            | Type      | Description                                                       |
|------------------|-----------|-------------------------------------------------------------------|
| available        | `boolean` | Shows whether location tracking is available.                     |
| access_requested | `boolean` | Shows whether permission to location tracking has been requested. |
| access_granted   | `boolean` | Shows whether permission to location tracking has been granted.   |

### `location_requested`

Available since: **v8.0**

The application received the information about the current user location.

| Field               | Type      | Description                                                                                           |
|---------------------|-----------|-------------------------------------------------------------------------------------------------------|
| available           | `boolean` | Shows whether location tracking is available.                                                         |
| latitude            | `number`  | Latitude in degrees. Set only if `available` is True.                                                 |
| longitude           | `number`  | Longitude in degrees. Set only if `available` is True.                                                |
| altitude            | `number`  | _Optional_. Altitude above sea level in meters. Set only if `available` is True.                      |
| course              | `number`  | _Optional_. The direction the device is moving in degrees. Set only if `available` is True.           |
| speed               | `number`  | _Optional_. The speed of the device in m/s. Set only if `available` is True.                          |
| horizontal_accuracy | `number`  | _Optional_. Accuracy of the latitude and longitude values in meters. Set only if `available` is True. |
| vertical_accuracy   | `number`  | _Optional_. Accuracy of the altitude value in meters. Set only if `available` is True.                |
| course_accuracy     | `number`  | _Optional_. Accuracy of the course value in degrees. Set only if `available` is True.                 |
| speed_accuracy      | `number`  | _Optional_. Accuracy of the speed value in m/s. Set only if `available` is True.                      |

### `main_button_pressed`

User clicked the [Main Button](main-button.md).

### `phone_requested`

Available since: **v6.9**

Application received phone access request status.

| Field  | Type     | Description                                        |
|--------|----------|----------------------------------------------------|
| status | `string` | Request status. Can only be `sent` or `cancelled`. |

### `popup_closed`

[Popup](popup.md) was closed.

| Field     | Type     | Description                                                                                                                             |
|-----------|----------|-----------------------------------------------------------------------------------------------------------------------------------------|
| button_id | `string` | _Optional_. Identifier of the clicked button. In case, the popup was closed without clicking any button, this property will be omitted. |

### `prepared_message_failed`

Available since: **v8.0**

Failed to send a prepared message.

| Field | Type     | Description     |
|-------|----------|-----------------|
| error | `string` | Occurred error. |

### `prepared_message_sent`

Available since: **v8.0**

A prepared message was sent.

### `qr_text_received`

Available since: **v6.4**

The QR scanner scanned some QR and extracted its content.

| Field | Type     | Description                             |
|-------|----------|-----------------------------------------|
| data  | `string` | _Optional_. Data extracted from the QR. |

### `reload_iframe`

Parent iframe requested current iframe reload.

### `safe_area_changed`

Available since: **v8.0**

This event occurs whenever the safe area changes in the user's Telegram app, such as when the user
switches to landscape mode.

The **safe area** prevents content from overlapping with system UI elements like notches or
navigation bars.

| Field  | Type     | Description                                                                                |
|--------|----------|--------------------------------------------------------------------------------------------|
| top    | `number` | The top inset in pixels, representing the space to avoid at the top of the screen          |
| bottom | `number` | The bottom inset in pixels, representing the space to avoid at the bottom of the screen    |
| left   | `number` | The left inset in pixels, representing the space to avoid on the left side of the screen   |
| right  | `number` | The right inset in pixels, representing the space to avoid on the right side of the screen |

### `scan_qr_popup_closed`

Available since: **v6.4**

QR scanner was closed.

### `secondary_button_pressed`

Available since: **v7.10**

A user clicked the Secondary Button.

### `secure_storage_cleared`

Available since: **v9.0**

Device's secure storage was cleared.

| Field  | Type     | Description                  |
|--------|----------|------------------------------|
| req_id | `string` | A unique request identifier. |

### `secure_storage_failed`

Available since: **v9.0**

An error occurred while working with the device's secure storage.

| Field  | Type     | Description                    |
|--------|----------|--------------------------------|
| req_id | `string` | A unique request identifier.   |
| error  | `string` | _Optional_. An occurred error. |

### `secure_storage_key_received`

Available since: **v9.0**

A value from the device's secure storage was retrieved.

| Field       | Type             | Description                                     |
|-------------|------------------|-------------------------------------------------|
| req_id      | `string`         | A unique request identifier.                    |
| value       | `string \| null` | A retrieved value.                              |
| can_restore | `boolean`        | _Optional_. True if this value can be restored. |

### `secure_storage_key_restored`

Available since: **v9.0**

A value from the device's secure storage was restored.

| Field  | Type             | Description                  |
|--------|------------------|------------------------------|
| req_id | `string`         | A unique request identifier. |
| value  | `string \| null` | A restored value.            |

### `secure_storage_key_saved`

Available since: **v9.0**

A value in the device's secure storage was saved.

| Field  | Type             | Description                  |
|--------|------------------|------------------------------|
| req_id | `string`         | A unique request identifier. |

### `set_custom_style`

The event which is usually sent by the Telegram web application. Its payload represents `<style/>`
tag html content, a developer could use. The stylesheet described in the payload will help the
developer to stylize the app scrollbar (but he is still able to do it himself).

### `settings_button_pressed`

Available since: **v6.1**

Occurs whenever the [Settings Button](settings-button.md) was pressed.

### `theme_changed`

Occurs whenever [the theme](theming.md) was changed in the user's Telegram app (including switching
to night mode).

| Field        | Type                     | Description                                                                                            |
|--------------|--------------------------|--------------------------------------------------------------------------------------------------------|
| theme_params | `Record<string, string>` | Map where the key is a theme stylesheet key and value is  the corresponding color in `#RRGGBB` format. |

### `viewport_changed`

Occurs whenever the [viewport](viewport.md) has been changed. For example, when the
user started dragging the application or called the expansion method.

| Field           | Type      | Description                                                                      |
|-----------------|-----------|----------------------------------------------------------------------------------|
| height          | `number`  | The viewport height.                                                             |
| width           | `number`  | _Optional_. The viewport width.                                                  |
| is_expanded     | `boolean` | Is the viewport currently expanded.                                              |
| is_state_stable | `boolean` | Is the viewport current state stable and not going to change in the next moment. |

> [!TIP]
> Pay attention to the fact, that send rate of this method is not enough to smoothly resize the
> application window. You should probably use a stable height instead of the current one, or handle
> this problem in another way.

### `visibility_changed`

Available since: **v8.0**

Active state assumes that the native Telegram client is currently working with the
current mini application. It is important to note that this is not related to the
mini applicationâ€™s visibility, but rather its selection among other currently opened
mini applications.

| Field      | Type      | Description                                       |
|------------|-----------|---------------------------------------------------|
| is_visible | `boolean` | Indicates if the application is currently active. |

### `write_access_requested`

Available since: **v6.9**

Application received write access request status.

| Field  | Type     | Description                                           |
|--------|----------|-------------------------------------------------------|
| status | `string` | Request status. Can only be `allowed` or `cancelled`. |

```
---
## File: apps/docs/platform/getting-app-link.md

```markdown
---
outline: [ 2, 4 ]
---

# Getting App Link

In a nutshell, all Mini Apps are typical web applications, each requiring its own URL, which is used
to retrieve and display the application's content. Telegram does not provide any storage for the
developer's application, so it is the developer's responsibility to create storage for their
application and obtain its URL.

Telegram accepts only links that have a valid SSL certificate and use the HTTPS protocol. Unlike the
production environment, the [test environment](test-environment.md) allows using an IP directly.

::: info

Despite the fact that we can use the test environment to develop our applications, the environment
often doesn't show good performance. If you encounter low performance issues in the test
environment, consider switching to the production environment.

:::

## Introduction

Before you dive into this guide, it is important to understand why you need some links. Most of the
time, we need application links for one of the following purposes:

1. **For development**: These links are temporary and used only to display an application via a
   development server. They can also be used to share with other users to show current progress.
2. **For production**: These links are used in production mode to open a production-ready
   application, typically accessed by common users.

This guide covers both cases. You can find real link generation and usage in
the [template for React.js](https://github.com/telegram-mini-apps/reactjs-template).

The next sections of this documentation will use [Vite](https://vitejs.dev) as the basic bundler for
the applications.

## For Development

The application development process is considered to be never-ending. Long-term applications always
need maintenance, and for this reason, it is appropriate to perfect the process by lowering the
threshold of entry and reducing the resulting cognitive load.

Development links are used to view the application in its current development state. These links can
be categorized into two types: local and remote. Let's take a closer look at them.

::: warning

Development links are not supposed to be used in production. Production links should not be dynamic
and must reference a server providing the Mini App content.

:::

### Local

A local link for development refers to a link that will only be available to the current device.

Popular bundlers such as [Vite](https://vitejs.dev/) provide the ability to run a local server for
development. As a result, you will get an IP that can be used in BotFather or directly opened in
your browser.

Here is the basic Vite config for running a development server and returning a link for development.

```ts
import { defineConfig } from 'vite';

export default defineConfig();
```

And a message in the console you will see:

```bash
VITE ready in 112 ms

âžœ  Local:   http://localhost:5173
âžœ  press h + enter to show help
```

Now, you are free to open the `Local` link (`http://localhost:5173`) in your browser and see the
application.

As you may have noticed, this link is not compatible with BotFather's requirements as it must use
the HTTPS protocol. Now, let's get an HTTPS link.

#### Vite Plugin

Vite's ecosystem provides
the [@vitejs/plugin-basic-ssl](https://www.npmjs.com/package/@vitejs/plugin-basic-ssl) plugin. It
allows launching the application with self-signed SSL certificates on a specified domain.

Here is a basic example:

```ts
import { defineConfig } from 'vite';
import basicSsl from '@vitejs/plugin-basic-ssl';

export default defineConfig({
  plugins: [
    basicSsl(),
  ],
});
```

There are some additional options you may find useful. To learn more about them, follow the
plugin's [docs](https://www.npmjs.com/package/@vitejs/plugin-basic-ssl).

After launching the development server, you will see a similar message:

```bash
VITE ready in 275 ms

âžœ  Local:   https://localhost:5173
âžœ  press h + enter to show help
```

The `Local` link (`https://localhost:5173`) refers to a local development server. Opening this link
in your browser, Telegram for macOS, Telegram Desktop, or Telegram Web A/K will lead to a warning
message related to an untrusted certificate.

<img
   src="/untrusted-cert-warning.png"
   class="guides-image"
   style="border: 1px solid #ebebeb"
/>

Just make an exception for this and proceed to the application.

#### mkcert

[mkcert](https://github.com/FiloSottile/mkcert) is a tool that allows developers to generate SSL
certificates along with the related private key. It also creates a Certificate Authority which makes
the local device trust the generated certificate. Here is
the [installation guide](https://github.com/FiloSottile/mkcert?tab=readme-ov-file#installation).

Let's say you would like to create a custom domain, known only to your device, which will be used
only for development purposes. Let it be something like `tma.internal`. To let your current device
know which IP is associated with this domain, we should modify
the [hosts](https://en.wikipedia.org/wiki/Hosts_(file)) file and map `tma.internal` to `127.0.0.1`.

Then, you should run the mkcert tool specifying this domain and receive two files: an SSL
certificate and a private key. Both of these files should be specified in the Vite config.

Here is an example of Vite development server configuration using entities generated by mkcert:

```typescript
import { defineConfig } from 'vite';
import { resolve } from 'node:path';
import { readFileSync } from 'node:fs';

export default defineConfig({
  server: {
    host: 'tma.internal',
    https: {
      cert: readFileSync(resolve('tma.internal.pem')),
      key: readFileSync(resolve('tma.internal-key.pem')),
    },
  },
});
```

### Network

There could be cases when a developer needs to open the application on different devices. We
implement such a feature using
Vite's [host](https://vitejs.dev/config/server-options.html#server-host) option.

Let's see how the corresponding config looks:

```typescript
import { defineConfig } from 'vite';

export default defineConfig({
  server: {
    host: true,
  },
});
```

Alternatively, we could use the following command: `vite --host`.

After launching the development server, you will see a similar message in your console:

```bash
  VITE v5.2.12  ready in 15 ms

  âžœ  Local:   http://localhost:5173
  âžœ  Network: http://172.20.10.8:5173
  âžœ  press h + enter to show help
```

Now you can access the `Network` link (`http://172.20.10.8:5173`) on devices in the same network.

To get an HTTPS link, refer to the previous sections of this guide.

### Remote

A remote development link refers to a temporary link that can be used to gain access to a
development server, even for devices located in another network.

To create a link of this type, first of all, you need to start the local development server and
obtain an IP that can be used to access the application. For example, such an IP could
be `127.0.0.1:5432`. However, this IP will not allow devices on another network to access the
application.

To solve this problem, you need to create some kind of link that is a tunnel to the local IP. For
this purpose, we use third-party, conditionally free services such as [ngrok](https://ngrok.com/)
and [localtunnel](https://localtunnel.github.io/www/).

#### Ngrok

In order to start using [ngrok](https://ngrok.com/), you need to go through the registration stage
and then proceed to
the [settings page](https://dashboard.ngrok.com/get-started/setup).

Next, you need to create a tunnel to your development server. Each user has at least 1 free static
domain, which could be used in BotFather. To find your own, use
this [link](https://dashboard.ngrok.com/cloud-edge/domains).

When a static domain was retrieved, create a tunnel using the command:

```bash
ngrok http --domain={YOUR_STATIC_DOMAIN} {YOU_DEV_SERVER_PORT}
```

So, if the static domain is `example.free.ngrok.app` and your dev server is launched
at `http://127.0.0.1:5432`, the command will be:

```bash
ngrok http --domain=example.free.ngrok.app 5432
```

After the tunnel is established, users opening the Mini App will be forwarded to your development
server.

#### Localtunnel

[Localtunnel](https://localtunnel.github.io/www/) is a completely free ngrok alternative. To start
using localtunnel, you need to install the according package using npm:

```bash
npm install -g localtunnel
```

Next, use the command to create a tunnel:

```bash
lt -s mysubdomain --port 5432
```

The package will return the following URL which could be used in BotFather:

```
https://mysubdomain.loca.lt
```

## For Production

Getting a production link is also not difficult at all. To do this, you can use the popular free
static services:

- [GitHub Pages](https://pages.github.com/)
- [Heroku](https://www.heroku.com/)
- [Vercel](https://vercel.com/)

However, the developer can also use any other hosting. It is important to remember that the link to
the application must work on the HTTPS protocol and have a valid SSL certificate. To get a free
one, consider using [certbot](https://certbot.eff.org/pages/about).

```
---
## File: apps/docs/platform/haptic-feedback.md

```markdown
# Haptic Feedback

Native mobile applications are always filled with interactive components, which allow user to
communicate with its functionality. Such components are mostly popups, buttons and many others.

Interacting with application (clicking buttons, closing popups etc.), it is allowed to emit haptic
notifications. Commonly, this process is called **_haptic feedback_**. In simple words, these events
are just mobile device vibrations. Usage of haptic feedback can make user's experience much better.

There are currently three types of notifications used in different cases:

- `impact`, when there's a collision involving UI components.
- `selection_change`, when the user changes their selection.
- `notification`, when some action execution has been completed.

Almost each of these types has its own subtypes. To produce haptic feedback, Telegram Mini Apps
provides [web_app_trigger_haptic_feedback](methods.md#web-app-trigger-haptic-feedback)
method.

::: warning

Use this method carefully. Emitting haptic events too often can make an effect on user's mobile
device battery.

:::

```
---
## File: apps/docs/platform/init-data.md

```markdown
---
outline: [ 2, 4 ]
---

# Init Data

In the list of [launch parameters](launch-parameters), initialization data is located in
the `tgWebAppData` parameter. It is a set of data mostly related to a specific user who launched
the Mini App.

A striking feature of init data is the fact that it can be used as an authentication or
authorization factor. For this reason, do not forget about the security of the application
and init data specifically.

## Retrieving

To extract init data, a developer can use the `retrieveLaunchParams` function
from [@telegram-apps/sdk](../packages/telegram-apps-sdk/2-x).

```typescript
import { retrieveLaunchParams } from '@telegram-apps/sdk';

const { initDataRaw, initData } = retrieveLaunchParams();
```

## Authorization and Authentication

A special feature of initialization data is the ability to be used as a factor for authorization or
authentication. The fact is that the data generated by the native Telegram application is signed
with the secret key of the Telegram bot, after which the generated signature is placed next to the
parameters themselves.

Thus, knowing the secret key of the Telegram bot, the developer has the opportunity to verify the
signature of the parameters and make sure that they were indeed issued to the specified user.

Also, the signature verification operation is fast enough and does not require large server
resources.

::: tip

You can find examples using different programming languages in [this](authorizing-user.md) article.

:::

## Sending to Server

In order to authorize the user on the server, the developer needs to transmit the initialization
data that was specified when launching the Mini App. To make life easier for yourself, the
developer can transmit them at each request to the server, after which the signature verification is
carried out on the server side.

Here is how a developer could send init data to server:

```typescript
import { retrieveLaunchParams } from '@telegram-apps/sdk';

const { initDataRaw } = retrieveLaunchParams();

fetch('https://example.com/api', {
  method: 'POST',
  headers: {
    Authorization: `tma ${initDataRaw}`
  },
});
```

In turn, the following actions must be performed on the server side:

1. Get the value of the `Authorization` header;
2. Check that the first part of it is equal to `tma`;
3. Get init data and [validate](#validating) its signature.

If this algorithm is successful, the server part of the application can trust the transmitted
init data.

## Validating

Init data validation is one of the most important parts in communication
between client and server. It's validity guarantees, that init data can be trusted
and used in the future code execution.

> [!TIP]
> To avoid possible problems related to the init data validation process, we recommend utilizing
> well-established and tested packages:
> - For Node: [@telegram-apps/init-data-node](../packages/telegram-apps-init-data-node)
> - For GoLang: [init-data-golang](../packages/init-data-golang.md)

### Using Telegram Bot Token

Init data validation is one of the most important parts in communication
between client and server. It's validity guarantees, that init data can be trusted
and used in the future code execution.

Knowing that init data is presented as query parameters list, to validate
them, developer should follow the steps:

1. Iterate over all key-value pairs and create an array of string values in
   format `{key}={value}`. Key `hash` should be excluded, but memoized. It
   represents the init data sign and will be used in the final step of the validation process.
2. Sort the computed array in the alphabetical order.
3. Create HMAC-SHA256 using key `WebAppData` and apply it to the Telegram Bot
   token, that is bound to your Mini App.
4. Create HMAC-SHA256 using the result of the previous step as a key. Apply
   it to the pairs array joined with linebreak (`\n`) received in the 2-nd step
   and present the result as hex symbols sequence.
5. Compare the `hash` value received in the 1-st step with the result of the 4-th step.
6. If these values are equal, passed init data can be trusted.

#### Example

##### 1. Initial Input

- **Telegram Bot token**: This value is used to sign the init data, and we will need it in the later
  steps of the validation process.

```
5768337691:AAH5YkoiEuPk8-FZa32hStHTqXiLPtAEhx8
```

- **Init data**: This data should be passed directly from the mini application to the server as-is.

```
query_id=AAHdF6IQAAAAAN0XohDhrOrc&user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%7D&auth_date=1662771648&hash=c501b71e775f74ce10e377dea85a7ea24ecd640b223ea86dfe453e0eaed2e2b2
```

##### 2. Create Key-Value Pairs and Extract Signature

As per the validation process, we should parse the init data as query parameters. Then, take all
key-value pairs excluding the `hash` key, join them with the `=` symbol, and sort them in
alphabetical order. The final array must be joined with the linebreak symbol (`\n`).

The result will be:

```
auth_date=1662771648\nquery_id=AAHdF6IQAAAAAN0XohDhrOrc\nuser={"id":279058397,"first_name":"Vladislav","last_name":"Kibenko","username":"vdkfrost","language_code":"ru","is_premium":true}
```

The signature is the value in the `hash` key. In this case, it equals:

```
c501b71e775f74ce10e377dea85a7ea24ecd640b223ea86dfe453e0eaed2e2b2
```

##### 3. Create Telegram Bot Token Signature

To verify if the init data is signed correctly, we need to sign it ourselves. First, we must create
an HMAC-SHA256 signature of the Telegram Bot token, using the `WebAppData` value as the
cryptographic key.

Here is the result:

```
HMAC-SHA256(
  5768337691:AAH5YkoiEuPk8-FZa32hStHTqXiLPtAEhx8,
  WebAppData
) = a5c609aa52f63cb5e6d8ceb6e4138726ea82bbc36bb786d64482d445ea38ee5f
```

> [!WARNING]  
> The received value must not be transformed into a hexadecimal sequence, as shown above. In the
> next step, use it as-is (an array of bytes), but you can use the hexadecimal value to check if
> your
> code generates the hash correctly.

##### 4. Create and Compare Init Data Signature

Finally, we compute the init data signature.

To do this, create another HMAC-SHA256 signature using the transformed init data from Step 2 as the
input, and the hash we received in Step 3 as the cryptographic key.

Here is the result:

```
HMAC-SHA256(
  auth_date=1662771648\nquery_id=AAHdF6IQAAAAAN0XohDhrOrc\nuser={"id":279058397,"first_name":"Vladislav","last_name":"Kibenko","username":"vdkfrost","language_code":"ru","is_premium":true},
  *signature from Step 3*,
) = c501b71e775f74ce10e377dea85a7ea24ecd640b223ea86dfe453e0eaed2e2b2
```

Now, by comparing the result with the `hash` value from Step 2, we can confirm that they are
identical. This means we can trust the passed init data.

### Using Telegram Public Key

Another useful feature Telegram provides is it allows validating init data without knowing
the bot secret token, but its identifier.

At the moment, there are 2 Ed25519 public keys Telegram provides:

- For production environment: `e7bf03a2fa4602af4580703d88dda5bb59f32ed8b02a56c187fe7d34caed242d`
- For test environment: `40055058a4ee38156a06562e52eece92a771bcd8346a8c4615cb7376eddf72ec`

To perform this kind of validation (called third-party validation), follow these steps:

1. Iterate over all key-value pairs and create an array of string values in
   format `{key}={value}`. Key `hash` should be excluded. The `signature` key should also be
   excluded, but memoized. It represents the init data sign and will be used in the final step of
   the validation process.
2. Sort the computed array in the alphabetical order.
3. Concatenate Telegram Bot identifier issued the init data with the `WebAppData` string using the
   semicolon (`:`) and append a linebreak (`\n`).
4. Join the pairs from the 2-nd step with the linebreak (`\n`) and append the final value to the
   value from the 3-rd step.
5. Verify Ed25519 signature using the value from the `signature` init data key.
6. If verification is successful, the init data can be trusted.

#### Example

##### 1. Initial Input

- **Production environment**: We are validating init data in the production environment. So, this
  Ed25519 public key will be used:

```
e7bf03a2fa4602af4580703d88dda5bb59f32ed8b02a56c187fe7d34caed242d
```

- **Init data**: This data should be passed directly from the mini application to the server as-is.

```
user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%20%2B%20-%20%3F%20%5C%2F%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%22%7D&chat_instance=8134722200314281151&chat_type=private&auth_date=1733584787&hash=2174df5b000556d044f3f020384e879c8efcab55ddea2ced4eb752e93e7080d6&signature=zL-ucjNyREiHDE8aihFwpfR9aggP2xiAo3NSpfe-p7IbCisNlDKlo7Kb6G4D0Ao2mBrSgEk4maLSdv6MLIlADQ
```

##### 2. Create Key-Value Pairs and Extract Signature

As per the validation process, we should parse the init data as query parameters. Then, take all
key-value pairs excluding the `hash` and `signature` keys, join them with the `=` symbol, and sort
them in alphabetical order. The final array must be joined with the linebreak symbol (`\n`).

The result will be:

```
auth_date=1733584787\nchat_instance=8134722200314281151\nchat_type=private\nuser={"id":279058397,"first_name":"Vladislav + - ? \/","last_name":"Kibenko","username":"vdkfrost","language_code":"ru","is_premium":true,"allows_write_to_pm":true,"photo_url":"https:\/\/t.me\/i\/userpic\/320\/4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg"}
```

The signature is the value in the `signature` key. In this case, it equals:

```
zL-ucjNyREiHDE8aihFwpfR9aggP2xiAo3NSpfe-p7IbCisNlDKlo7Kb6G4D0Ao2mBrSgEk4maLSdv6MLIlADQ
```

Nevertheless, in the future steps, we should convert it to a bytes array, assuming that this value
is base64-encoded.

> [!DANGER]  
> At the moment, Telegram sends an invalid signature. Some programming languages (e.g., Go) consider
> the signature as an invalid base64 value, as long as it doesn't fully comply with the standard.
> When using the signature, remember to add paddings (`=` signs) at the end of the value in case
> they are needed. In this example, the proper value would be:
> ```  
> zL-ucjNyREiHDE8aihFwpfR9aggP2xiAo3NSpfe-p7IbCisNlDKlo7Kb6G4D0Ao2mBrSgEk4maLSdv6MLIlADQ==
> ```

##### 3. Create Data-Check String

Now, let's create a data-check string. To do so, we should join the Telegram Bot token with
the `WebAppData` string using the semicolon (`:`) and append a linebreak. Then, the sorted init data
from the previous step should be appended.

Here is the result:

```
7342037359:WebAppData\nauth_date=1733584787\nchat_instance=8134722200314281151\nchat_type=private\nuser={"id":279058397,"first_name":"Vladislav + - ? \/","last_name":"Kibenko","username":"vdkfrost","language_code":"ru","is_premium":true,"allows_write_to_pm":true,"photo_url":"https:\/\/t.me\/i\/userpic\/320\/4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg"}
```

##### 4. Verify Ed25519 Signature

Finally, we verify the signature.

As long as we are in the production environment, we will use the corresponding Ed25519 public key:

```
e7bf03a2fa4602af4580703d88dda5bb59f32ed8b02a56c187fe7d34caed242d
```

This value must be converted to a bytes array, assuming that the value is a hexadecimal sequence.

So here is the result of verification:

```
Ed25519-Verify(
  7342037359:WebAppData\nauth_date=1733584787\nchat_instance=8134722200314281151\nchat_type=private\nuser={"id":279058397,"first_name":"Vladislav + - ? \/","last_name":"Kibenko","username":"vdkfrost","language_code":"ru","is_premium":true,"allows_write_to_pm":true,"photo_url":"https:\/\/t.me\/i\/userpic\/320\/4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg"},
  *public key (as a hexadecimal sequence) converted to bytes array*,
  *signature (as a base64-encoded value) converted to bytes array*
) == true
```

If the verification is successful, the init data can be trusted.

### Recommendation

In real-world applications, it is recommended to use additional mechanisms for verifying
initialization data. For example, add their expiration date. This check can be implemented using
the `auth_date` parameter, which is responsible for the date when the parameters were created.
This solution will allow in case of theft of initialization data to prevent their constant use by
an attacker.

## Parameters List

This section provides a complete list of parameters used in initialization data.

<table>
<thead>
  <tr>
    <th>Parameter</th>
    <th>Type</th>
    <th>Description</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td>auth_date</td>
    <td>
      <code>number</code>
    </td>
    <td>
      The date the initialization data was created. Is a number representing a Unix timestamp.
    </td>
  </tr>

  <tr>
    <td>can_send_after</td>
    <td>
      <code>number</code>
    </td>
    <td>
      <i>Optional</i>. The number of seconds after which a message can be sent via the method
      <a href="https://core.telegram.org/bots/api#answerwebappquery">answerWebAppQuery</a>.
    </td>
  </tr>

  <tr>
    <td>chat</td>
    <td>
      <a href="#chat">
        <code>Chat</code>
      </a>
    </td>
    <td>
      <i>Optional</i>. An object containing data about the chat where the bot was launched via the attachment menu. Returned for supergroups, channels and group chats â€“ only for Mini Apps launched via the attachment menu.
    </td>
  </tr>

  <tr>
    <td>chat_type</td>
    <td>
      <code>string</code>
    </td>
    <td>
      <i>Optional</i>. The type of chat from which the Mini Apps was opened. Values:
      <ul>
        <li>
          <code>sender</code>
        </li>
        <li>
          <code>private</code>
        </li>
        <li>
          <code>group</code>
        </li>
        <li>
          <code>supergroup</code>
        </li>
        <li>
          <code>channel</code>
        </li>
      </ul>
      Returned only for applications opened by direct link.
    </td>
  </tr>

  <tr>
    <td>chat_instance</td>
    <td>
      <code>string</code>
    </td>
    <td>
      <i>Optional</i>. A global identifier indicating the chat from which the Mini Apps was opened.
      Returned only for applications opened by direct link.
    </td>
  </tr>

  <tr>
    <td>hash</td>
    <td>
      <code>string</code>
    </td>
    <td>Initialization data signature.</td>
  </tr>

  <tr>
    <td>query_id</td>
    <td>
      <code>string</code>
    </td>
    <td>
      <i>Optional</i>. The unique session ID of the Mini App. Used in the process of
      sending a message via the method
      <a href="https://core.telegram.org/bots/api#answerwebappquery">answerWebAppQuery</a>.
    </td>
  </tr>

  <tr>
    <td>receiver</td>
    <td>
      <a href="#user">
        <code>User</code>
      </a>
    </td>
    <td>
      <i>Optional</i>. An object containing data about the chat partner of the current user in 
      the chat where the bot was launched via the attachment menu. Returned only for private chats 
      and only for Mini Apps launched via the attachment menu.
    </td>
  </tr>

  <tr>
    <td>start_param</td>
    <td>
      <code>string</code>
    </td>
    <td>
      <i>Optional</i>. The value of the <code>startattach</code> or <code>startapp</code> query 
      parameter specified in the link. It is returned only for Mini Apps opened through the 
      attachment menu.
    </td>
  </tr>

  <tr>
    <td>user</td>
    <td>
      <a href="#user">
        <code>User</code>
      </a>
    </td>
    <td>
      <i>Optional</i>. An object containing information about the current user.
    </td>
  </tr>

</tbody>
</table>

## Other Types

### Chat

Describes the chat information.

<table>
<thead>
  <tr>
    <th>Property</th>
    <th>Type</th>
    <th>Description</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td>id</td>
    <td>
      <code>number</code>
    </td>
    <td>Unique chat ID.</td>
  </tr>

  <tr>
    <td>type</td>
    <td>
      <code>string</code>
    </td>
    <td>
      Chat type. Values:
      <ul>
        <li>
          <code>group</code>
        </li>
        <li>
          <code>supergroup</code>
        </li>
        <li>
          <code>channel</code>
        </li>
      </ul>
    </td>
  </tr>

  <tr>
    <td>title</td>
    <td>
      <code>string</code>
    </td>
    <td>Chat title.</td>
  </tr>

  <tr>
    <td>photo_url</td>
    <td>
      <code>string</code>
    </td>
    <td>
      <i>Optional</i>. Chat photo link. The photo can have <code>.jpeg</code> and
      <code>.svg</code> formats. It is returned only for Mini Apps opened through the attachments 
      menu.
    </td>
  </tr>

  <tr>
    <td>username</td>
    <td>
      <code>string</code>
    </td>
    <td>
      <i>Optional</i>. Chat user login.
    </td>
  </tr>
</tbody>
</table>

### User

Describes information about a user or bot.

| Property                 | Type      | Description                                                                                                                                                      |
|--------------------------|-----------|------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| added_to_attachment_menu | `boolean` | _Optional_. True, if this user added the bot to the attachment menu.                                                                                             |
| allows_write_to_pm       | `boolean` | _Optional_. True, if this user allowed the bot to message them.                                                                                                  |
| is_premium               | `boolean` | _Optional_. Has the user purchased Telegram Premium.                                                                                                             |
| first_name               | `string`  | Bot or user name.                                                                                                                                                |
| id                       | `number`  | Bot or user ID.                                                                                                                                                  |
| is_bot                   | `boolean` | _Optional_. Is the user a bot.                                                                                                                                   |
| last_name                | `string`  | _Optional_. User's last name.                                                                                                                                    |
| language_code            | `string`  | _Optional_. [IETF](https://en.wikipedia.org/wiki/IETF_language_tag) user's language.                                                                             |
| photo_url                | `string`  | _Optional_. Link to the user's or bot's photo. Photos can have formats `.jpeg` and `.svg`. It is returned only for Mini Apps opened through the attachment menu. |
| username                 | `string`  | _Optional_. Login of the bot or user.                                                                                                                            |

```
---
## File: apps/docs/platform/launch-parameters.md

```markdown
# Launch Parameters

The launch parameters are the list of parameters that is passed by the native Telegram application
to the Mini App. It helps the developer to find out the characteristics of the Telegram application,
the current device, get basic information about the user and much more.

## Transmission Method

In a web environment, one of the simplest and fastest ways to transfer data between locally running 
applications is by specifying it in the address bar. A server can include data in the URL's hash, 
making it accessible to the client application. Similarly, Telegram Mini Apps use this approach, with 
the Telegram client environment sending data to the Mini App through the URL's hash. This enables 
the Mini App to access essential information upon launch.

The native Telegram application transmits a list of these parameters in the dynamic part of the URL 
(in the hash #). To access these parameters, you need to use the `window.location.hash` property in your JavaScript code.

## Extraction

It is important to remember that `hash` is a string property, while Telegram transmits a whole list
of properties, after which the question arises about formatting and processing this list. In fact,
everything is quite simple.

The native Telegram application passes the list of launch parameters as query-parameters and saves
the resulting string in `window.location.hash`. For this reason, in order to extract the launch
parameters, it is enough to perform the following operation:

```typescript title="Example on how to extract launch parameters"
const hash = window.location.hash.slice(1);
console.log(hash); // tgWebAppData=...&tgWebAppVersion=6.2&...

const params = new URLSearchParams(hash);
console.log(params.get('tgWebAppVersion')); // "6.2"
```

::: tip

However, users have the capability to refresh the current application without exiting it. If the
application uses hash routing, it may lose the initial hash after some time. Therefore, it's
advisable to save this data during the initial launch of the application.

:::

## Parameters List

### `tgWebAppVersion`

The current Telegram Mini Apps version used by the native application. This parameter is important
to use, for example, before calling the Telegram Mini
Apps [methods](methods.md) to make sure, they are supported.

### `tgWebAppData`

Contains data describing the current user, data sign, and also some useful values. To learn more,
visit the [Init Data](init-data.md) page.

### `tgWebAppPlatform`

[Telegram application identifier](about.md#supported-applications). It can be used as a
factor
determining the visual style of the application, for example, when, depending on the device, the
developer needs to display components that are different visually.

### `tgWebAppThemeParams`

Parameters of the native Telegram application [theme](theming.md). This parameter
can be used to style the application even at the moment of rendering the loader.

The value of this parameter is a JSON object converted to the string. To get a more user-friendly
value, it is enough to use the `JSON.parse` method.

```typescript
const theme = {
  bg_color: '#212121',
  text_color: '#ffffff',
  hint_color: '#aaaaaa',
  link_color: '#8774e1',
  button_color: '#8774e1',
  button_text_color: '#ffffff',
  secondary_bg_color: '#0f0f0f',
};
```

### `tgWebAppShowSettings`

Parameter used only by Telegram SDK to show the Settings Button on startup. It has
no other meaning to external developers.

### `tgWebAppBotInline`

This parameter is being added in case the current application is launched in inline mode. This
allows calling such Telegram Mini Apps method
as [web_app_switch_inline_query](methods.md#web-app-switch-inline-query).

### `tgWebAppStartParam`

Parameter that contains a custom string value passed in the bot or application
link. [Learn more](start-parameter.md).

### `tgWebAppFullscreen`

Parameter indicating if the application is currently launched in the fullscreen mode.


```
---
## File: apps/docs/platform/main-button.md

```markdown
# Main Button

![Main Button](/components/main-button.png)

The Main Button is a component that is usually used when it is necessary to perform some final
action.

An example of the use case of this component is sending data. For example, a Mini App may
involve selecting products from a catalog and filling a user's shopping cart. At the moment when
products appear in the cart, the developer can display the Main Button, clicking on which will cause
the creation and processing of the order.

This is a moderately sized yet simple component that offers limited functionality. The developer has
the ability to control the button text, its active state, button and inner loader visibility. It is
also possible to update text and background colors.

To update any of the Main Button properties, Telegram Mini Apps provides the
[web_app_setup_main_button](methods.md#web-app-setup-main-button) method.
When user clicks the Main Button, Telegram application emits
the [main_button_pressed](events.md#main-button-pressed) event.

::: tip

If clicking the button produces an action that takes some time to complete, it is recommended to
display the loader inside the Main Button. This will allow the user to understand that the
application is not frozen and is currently performing an operation.

:::

```
---
## File: apps/docs/platform/methods.md

```markdown
---
outline: [ 2, 3 ]
---

# Methods

Telegram Mini Apps methods are events, which execute some predefined action. They are always called
by a Mini App.

## Web

Since the web version of Telegram displays the front-end application in an `<iframe/>` tag, it
uses the default way of communication between 2 iframes - sending messages
through `window.parent.postMessage` function.

As the first parameter, you should pass a JSON object **converted to a string**. The object should
have this interface:

```typescript
interface MessageJSON {
  eventType: string;
  eventData?: any;
}
```

The second parameter is `targetOrigin` - allowed parent iframe origin. We recommend avoiding the
usage of wildcard `*` as long as it is not secure - your application could be inserted not by
Telegram, but by another iframe that will still be able to communicate with your app and receive
some data.

As a default value, you could use `https://web.telegram.org`.

So, as you see, each method has its own name expressed by `eventType` and parameters stored
in `eventData` property. Here is the usage example:

```typescript
const data = JSON.stringify({
  eventType: 'web_app_setup_back_button',
  eventData: {
    is_visible: true,
  },
});

window.parent.postMessage(data, 'https://web.telegram.org');
```

This code will make the Telegram [BackButton](back-button.md) appear.

## Desktop and Mobile

Unlike the web, desktop and mobile applications use a bit more unusual way of calling methods. Both
of these platforms will create a global function `window.TelegramWebviewProxy.postEvent`.

As the first argument, this function accepts the event name. The second one - the parameters object,
converted to a string. Here is how it works:

```typescript
const data = JSON.stringify({ is_visible: true });

window
  .TelegramWebviewProxy
  .postEvent('web_app_setup_back_button', data);
```

## Windows Phone

Telegram Windows Phone app provides such function as `window.external.notify`. It accepts the same
parameter as the web version does:

```typescript
const data = JSON.stringify({
  eventType: 'web_app_setup_back_button',
  eventData: { is_visible: true },
});

window.external.notify(data);
```

## Calling Methods

Handling all possible environments for a developer's application can be challenging. To simplify
this process, the community developed the [@telegram-apps/sdk](../packages/telegram-apps-sdk/2-x)
package, which greatly eases integration.

Here's how to use it:

```ts
import { postEvent } from '@telegram-apps/sdk';

postEvent('web_app_set_header_color', { color_key: 'bg_color' });
```

You can learn more about calling methods in the
package's [documentation](../packages/telegram-apps-bridge/events.md#calling-methods).

## Available Methods

This section contains a list of available methods to call with their names, description, and
parameters. In case, Mini App does not satisfy the minimal method version requirement, nothing will
happen. The native app just doesn't know which method should be called as long as it is not defined
internally.

### `iframe_ready`

Notifies parent iframe about the current frame is ready. This method is only used in the Web version
of Telegram. As a result, Mini App will receive [set_custom_style](events.md#set-custom-style)
event.

| Field            | Type      | Description                                                      |
|------------------|-----------|------------------------------------------------------------------|
| reload_supported | `boolean` | _Optional_. True, if current Mini App supports native reloading. |

### `iframe_will_reload`

Notifies parent iframe about the current iframe is going to reload.

### `web_app_add_to_home_screen`

Available since: **v8.0**

Prompts the user to add the Mini App to the home screen. Note that if the device cannot
determine the installation status, the event may not be received even if the icon has
been added.

### `web_app_biometry_get_info`

Available since: **v7.2**

Requests the current biometry settings.

### `web_app_biometry_open_settings`

Available since: **v7.2**

Opens the biometric access settings for bots. Useful when you need to request biometrics
access to users who haven't granted it yet.

> [!INFO]
> This method can be called only in response to user interaction with the Mini App interface
> (e.g. a click inside the Mini App or on the main button)

### `web_app_biometry_request_access`

Available since: **v7.2**

Requests permission to use biometrics.

| Field  | Type     | Description                                                                                                                      |
|--------|----------|----------------------------------------------------------------------------------------------------------------------------------|
| reason | `string` | _Optional_. The text to be displayed to a user in the popup describing why the bot needs access to biometrics, 0-128 characters. |

### `web_app_biometry_request_auth`

Available since: **v7.2**

Authenticates the user using biometrics.

| Field  | Type     | Description                                                                                                                                                                                       |
|--------|----------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| reason | `string` | _Optional_. The text to be displayed to a user in the popup describing why you are asking them to authenticate and what action you will be taking based on that authentication, 0-128 characters. |

### `web_app_biometry_update_token`

Available since: **v7.2**

Updates the biometric token in secure storage on the device. To remove the token, pass an empty
string.

| Field | Type     | Description                                     |
|-------|----------|-------------------------------------------------|
| token | `string` | Token to store. Has max length of 1024 symbols. |

### `web_app_check_home_screen`

Available since: **v8.0**

Sends a request to the native Telegram application to check if the current mini
application is added to the device's home screen.

### `web_app_check_location`

Available since: **v8.0**

Requests location-related functionality availability state.

### `web_app_close`

Closes Mini App.

### `web_app_close_scan_qr_popup`

Available since: **v6.4**

Closes a QR scanner. The Telegram application creates
the [scan_qr_popup_closed](events.md#scan-qr-popup-closed) event.

### `web_app_data_send`

Sends data to the bot. When this method is called, a service message is sent to the bot containing
the data of the length up to 4096 bytes. Then, Mini App will be closed.

To get more information, take a look at `web_app_data` field in the
class [Message](https://core.telegram.org/bots/api#message).

| Field | Type     | Description                                                          |
|-------|----------|----------------------------------------------------------------------|
| data  | `string` | Data to send to a bot. Should not have size of more than 4096 bytes. |

> [!WARNING]
> This method only works when the mini app was opened via [KeyboardButton](https://core.telegram.org/bots/webapps#keyboard-button-mini-apps).

### `web_app_device_storage_clear`

Available since: **v9.0**

Clears all keys previously stored by the bot in the device's local storage.

| Field  | Type     | Description                                                                                         |
|--------|----------|-----------------------------------------------------------------------------------------------------|
| req_id | `string` | Unique request identifier. Should be any unique string to handle the generated event appropriately. |

### `web_app_device_storage_get_key`

Available since: **v9.0**

Receives a value from the device's local storage using the specified key.

| Field  | Type     | Description                                                                                         |
|--------|----------|-----------------------------------------------------------------------------------------------------|
| req_id | `string` | Unique request identifier. Should be any unique string to handle the generated event appropriately. |
| key    | `string` | A key name to retrieve.                                                                             |

### `web_app_device_storage_save_key`

Available since: **v9.0**

Stores a value in the device's local storage using the specified key.

| Field  | Type             | Description                                                                                         |
|--------|------------------|-----------------------------------------------------------------------------------------------------|
| req_id | `string`         | Unique request identifier. Should be any unique string to handle the generated event appropriately. |
| key    | `string`         | A key to use to store the value.                                                                    |
| value  | `string \| null` | A value to store for the specified key. Passing `null` will lead to the key removal.                |

### `web_app_exit_fullscreen`

Available since: **v8.0**

Requests exiting the fullscreen mode for mini app.

### `web_app_expand`

[Expands](viewport.md) the Mini App.

### `web_app_hide_keyboard`

Available since: **v9.1**

Hides the on-screen keyboard, if it is currently visible. Does nothing if the keyboard is not active.

### `web_app_invoke_custom_method`

Available since: **v6.9**

| Field  | Type      | Description                           |
|--------|-----------|---------------------------------------|
| req_id | `string`  | Current invocation unique identifier. |
| method | `string`  | Method name.                          |
| params | `unknown` | Parameters according to `method`.     |

### `web_app_open_invoice`

Available since: **v6.1**

Opens an invoice by its specified slug. More information about invoices in
this [documentation](https://core.telegram.org/bots/payments).

| Field | Type     | Description                |
|-------|----------|----------------------------|
| slug  | `string` | Invoice unique identifier. |

### `web_app_open_link`

Opens link in the default browser. Mini App will not be closed.

| Field            | Type      | Description                                                                                            | Available since |
|------------------|-----------|--------------------------------------------------------------------------------------------------------|-----------------|
| url              | `string`  | URL to be opened by Telegram application. Should be a full path with `https` protocol.                 |                 |
| try_instant_view | `boolean` | _Optional_. Link will be opened in [Instant View](https://instantview.telegram.org/) mode if possible. | `v6.4`          |

### `web_app_open_location_settings`

Available since: **v8.0**

Opens the location access settings for bots. Useful when you need to request location access
from users who haven't granted it yet.

> [!WARNING]
> Note that this method can be called only in response to user interaction with the Mini App
> interface (e.g., a click inside the Mini App or on the main button).

### `web_app_open_popup`

Available since: **v6.2**

Opens a new [popup](popup.md). When user closes the popup, Telegram creates
the [popup_closed](events.md#popup-closed) event.

<table>
  <thead>

  <tr>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </tr>

  </thead>
  <tbody>

  <tr>
    <td>title</td>
    <td>
      <code>string</code>
    </td>
    <td>The text to be displayed in the popup title, 0-64 characters</td>
  </tr>

  <tr>
    <td>message</td>
    <td>
      <code>string</code>
    </td>
    <td>
      The message to be displayed in the body of the popup, 1-256 characters
    </td>
  </tr>

  <tr>
    <td>buttons</td>
    <td>
      <a href="#popupbutton">
        <code>PopupButton[]</code>
      </a>
    </td>
    <td>List of buttons to be displayed in the popup, 1-3 buttons</td>
  </tr>

  </tbody>
</table>

#### `PopupButton`

<table>
  <thead>

  <tr>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </tr>

  </thead>
  <tbody>

  <tr>
    <td>id</td>
    <td>
      <code>string</code>
    </td>
    <td>Identifier of the button, 0-64 characters.</td>
  </tr>

  <tr>
    <td>type</td>
    <td>
      <code>string</code>
    </td>
    <td>
      Type of the button. Values:
      <ul>
        <li>
          <code>default</code>, a button with the default style
        </li>
        <li>
          <code>destructive</code>, a button with a style that indicates a destructive action (e.g.
          "Remove", "Delete", etc.)
        </li>
        <li>
          <code>ok</code>, a button with the localized text "OK"
        </li>
        <li>
          <code>close</code>, a button with the localized text "Close"
        </li>
        <li>
          <code>cancel</code>, a button with the localized text "Cancel"
        </li>
      </ul>
    </td>
  </tr>

  <tr>
    <td>text</td>
    <td>
      <code>string</code>
    </td>
    <td>
      The text to be displayed on the button, 0-64
      characters. <i>Ignored</i> when <code>type</code> is <code>ok</code>, <code>close</code> or
      <code>cancel</code>.
    </td>
  </tr>
  </tbody>
</table>

### `web_app_open_scan_qr_popup`

Available since: **v6.4**

Opens a QR scanner. When the scanner was closed, the Telegram application creates
the [scan_qr_popup_closed](events.md#scan-qr-popup-closed) event. When the scanner reads QR,
Telegram creates the [qr_text_received](events.md#qr-text-received) event.

| Field | Type     | Description                                         |
|-------|----------|-----------------------------------------------------|
| text  | `string` | _Optional_. Text to be displayed in the QR scanner. |

### `web_app_open_tg_link`

Available since: **v6.1**

Opens the Telegram link by its pathname and query parameters. The link will be opened in the
Telegram app, Mini App will be closed.

| Field     | Type     | Description                                                                                                                  |
|-----------|----------|------------------------------------------------------------------------------------------------------------------------------|
| path_full | `string` | Should be a value taken from the link of this format: `https://t.me/{path_full}`. Can additionally contain query parameters. |

### `web_app_read_text_from_clipboard`

Available since: **v6.4**

Reads text from the clipboard. The method accepts a request identifier which is used to
appropriately retrieve the method execution result from
the [clipboard_text_received](events.md#clipboard-text-received) event.

| Field  | Type     | Description                                                                                         |
|--------|----------|-----------------------------------------------------------------------------------------------------|
| req_id | `string` | Unique request identifier. Should be any unique string to handle the generated event appropriately. |

### `web_app_ready`

Notifies Telegram about current application is ready to be shown. This method will make Telegram to
remove application loader and display Mini App.

### `web_app_request_content_safe_area`

Available since: **v8.0**

Requests the current content safe area information from Telegram.

As a result, Telegram triggers the
[**`content_safe_area_changed`**](events.md#content-safe-area-changed) event.

### `web_app_request_emoji_status_access`

Available since: **v8.0**

Shows a native popup requesting permission for the bot to manage user's emoji status.

### `web_app_request_file_download`

Available since: **v8.0**

Displays a native popup prompting the user to download a file.

In turn, the Telegram client emits the [file_download_requested](./events.md#file_download_requested) event.

| Field     | Type     | Description                                 |
|-----------|----------|---------------------------------------------|
| url       | `string` | The HTTPS URL of the file to be downloaded. |
| file_name | `string` | The suggested name for the downloaded file. |

### `web_app_request_fullscreen`

Available since: **v8.0**

Requests full screen mode for mini app.

### `web_app_request_location`

Available since: **v8.0**

Requests location data.

### `web_app_request_phone`

Available since: **v6.9**

Requests access to current user's phone.

### `web_app_request_safe_area`

Available since: **v8.0**

Requests the current safe area information from Telegram.

As a result, Telegram triggers the
[**`safe_area_changed`**](events.md#safe-area-changed) event.

### `web_app_request_theme`

Requests the current [theme](theming.md) from Telegram. As a result, Telegram will
create [theme_changed](events.md#theme-changed) event.

### `web_app_request_viewport`

Requests the current [viewport](viewport.md) information from Telegram. As a result,
Telegram will create [viewport_changed](events.md#viewport-changed) event.

### `web_app_request_write_access`

Available since: **v6.9**

Requests write message access to current user.

### `web_app_secure_storage_clear`

Available since: **v9.0**

Clears all keys previously stored by the bot in the device's secure storage.

| Field  | Type     | Description                                                                                         |
|--------|----------|-----------------------------------------------------------------------------------------------------|
| req_id | `string` | Unique request identifier. Should be any unique string to handle the generated event appropriately. |

### `web_app_secure_storage_get_key`

Available since: **v9.0**

Clears all keys previously stored by the bot in the device's secure storage.

| Field  | Type     | Description                                                                                         |
|--------|----------|-----------------------------------------------------------------------------------------------------|
| req_id | `string` | Unique request identifier. Should be any unique string to handle the generated event appropriately. |
| key    | `string` | A key to use to store the value.                                                                    |

### `web_app_secure_storage_restore_key`

Available since: **v9.0**

Attempts to restore a key that previously existed on the current device. When called, the user will be asked for
permission to restore the value.

| Field  | Type     | Description                                                                                         |
|--------|----------|-----------------------------------------------------------------------------------------------------|
| req_id | `string` | Unique request identifier. Should be any unique string to handle the generated event appropriately. |
| key    | `string` | A key to use to restore the value.                                                                  |

### `web_app_secure_storage_save_key`

Available since: **v9.0**

Stores a value in the device's secure storage using the specified key.

| Field  | Type             | Description                                                                                         |
|--------|------------------|-----------------------------------------------------------------------------------------------------|
| req_id | `string`         | Unique request identifier. Should be any unique string to handle the generated event appropriately. |
| key    | `string`         | A key to use to store the value.                                                                    |
| value  | `string \| null` | A value to store for the specified key. Passing `null` will lead to the key removal.                |

### `web_app_send_prepared_message`

Available since: **v8.0**

Opens a dialog allowing the user to share a message provided by the bot.

| Field | Type     | Description                                                                                                                                                                                                                                         |
|-------|----------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| id    | `string` | Identifier of the message ([PreparedInlineMessage](https://core.telegram.org/bots/api#preparedinlinemessage)) previously obtained via the Bot API method [savePreparedInlineMessage](https://core.telegram.org/bots/api#savepreparedinlinemessage). |

### `web_app_set_background_color`

Available since: **v6.1**

Updates the Mini App [background color](theming.md#background-and-header-colors).

| Field | Type     | Description                                                                                                  |
|-------|----------|--------------------------------------------------------------------------------------------------------------|
| color | `string` | The Mini App background color in `#RRGGBB` format,  or one of the values: `bg_color` or `secondary_bg_color` |

### `web_app_set_bottom_bar_color`

Available since: **v7.10**

Updates the Mini App bottom bar background color.

| Field | Type     | Description                                                                                                                                   |
|-------|----------|-----------------------------------------------------------------------------------------------------------------------------------------------|
| color | `string` | The Mini App bottom bar background color in `#RRGGBB` format, or one of the values: `bg_color`, `secondary_bg_color` or `bottom_bar_bg_color` |

### `web_app_set_emoji_status`

Available since: **v8.0**

Opens a dialog allowing the user to set the specified custom emoji as their status.

| Field           | Type     | Description                                        |
|-----------------|----------|----------------------------------------------------|
| custom_emoji_id | `string` | Custom emoji identifier to set.                    |
| duration        | `number` | _Optional_. The status expiration time in seconds. |

### `web_app_set_header_color`

Available since: **v6.1**

Updates the Mini App [header color](theming.md#background-and-header-colors). This
method should accept `color_key` or `color` property.

| Field     | Type     | Description                                                                        | Available since |
|-----------|----------|------------------------------------------------------------------------------------|-----------------|
| color_key | `string` | The Mini App header color key. Could be either `bg_color` or `secondary_bg_color`. |                 |
| color     | `string` | Color in RGB format.                                                               | `v6.9`          |

### `web_app_setup_back_button`

Available since: **v6.1**

Updates the [Back Button](back-button.md) settings.

| Field      | Type      | Description                        |
|------------|-----------|------------------------------------|
| is_visible | `boolean` | Should the Back Button be visible. |

### `web_app_setup_closing_behavior`

Updates current [closing behavior](closing-behavior.md).

| Field             | Type      | Description                                                          |
|-------------------|-----------|----------------------------------------------------------------------|
| need_confirmation | `boolean` | Will user be prompted in case, an application is going to be closed. |

### `web_app_setup_main_button`

Updates the [Main Button](main-button.md) settings.

| Field               | Type      | Description                                                                                                                                                   | Available since |
|---------------------|-----------|---------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------|
| is_visible          | `boolean` | _Optional_. Should the button be displayed.                                                                                                                   |
| is_active           | `boolean` | _Optional_. Should the button be enabled.                                                                                                                     |
| is_progress_visible | `boolean` | _Optional_. Should loader inside the button be displayed. Use this property in case, some operation takes time. This loader will make user notified about it. |
| text                | `string`  | _Optional_. Text inside the button.                                                                                                                           |
| color               | `string`  | _Optional_. The button background color in `#RRGGBB` format.                                                                                                  |
| text_color          | `string`  | _Optional_. The button text color in `#RRGGBB` format.                                                                                                        |
| has_shine_effect    | `boolean` | _Optional_. Should the button have a shining effect.                                                                                                          | `v7.8`          |

### `web_app_setup_settings_button`

Available since: **v6.10**

Updates current state of [Settings Button](settings-button.md).

| Field      | Type      | Description                              |
|------------|-----------|------------------------------------------|
| is_visible | `boolean` | Should the Settings Button be displayed. |

### `web_app_setup_swipe_behavior`

Available since: **v7.7**

Sets new swipe behavior.

| Field                | Type      | Description                                          |
|----------------------|-----------|------------------------------------------------------|
| allow_vertical_swipe | `boolean` | Allows closing the application using vertical swipe. |

### `web_app_share_to_story`

Available since: **v7.8**

A method that opens the native story editor.

| Field            | Type     | Description                                                                                                                                                                                          |
|------------------|----------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| media_url        | `string` | A media URL which will be used as a background for a created story.                                                                                                                                  |
| text             | `string` | _Optional_. The caption to be added to the media. 0-200 characters for regular users and 0-2048 characters for [premium subscribers](https://telegram.org/faq_premium#telegram-premium).             |
| widget_link      | `object` | _Optional_. An object that describes a widget link to be included in the story. Note that only [premium subscribers](https://telegram.org/faq_premium#telegram-premium) can post stories with links. |
| widget_link.url  | `string` | The URL to be included in the story.                                                                                                                                                                 |
| widget_link.name | `string` | _Optional_. The name to be displayed for the widget link, 0-48 characters.                                                                                                                           |

### `web_app_start_accelerometer`

Available since: **v8.0**

Starts tracking accelerometer data.

| Field        | Type     | Description                                                                                                                                                                                                             |
|--------------|----------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| refresh_rate | `number` | The refresh rate in milliseconds, with acceptable values ranging from 20 to 1000. Note that `refresh_rate` may not be supported on all platforms, so the actual tracking frequency may differ from the specified value. |

### `web_app_start_device_orientation`

Available since: **v8.0**

Starts tracking device orientation data.

| Field         | Type      | Description                                                                                                                                                                                                                                                                                                                                                                                                                       |
|---------------|-----------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| refresh_rate  | `number`  | The refresh rate in milliseconds, with acceptable values ranging from 20 to 1000. Note that `refresh_rate` may not be supported on all platforms, so the actual tracking frequency may differ from the specified value.                                                                                                                                                                                                           |
| need_absolute | `boolean` | _Optional_. Pass true to receive absolute orientation data, allowing you to determine the device's attitude relative to magnetic north. Use this option if implementing features like a compass in your app. If relative data is sufficient, pass false. <br/><br/> Keep in mind that some devices may not support absolute orientation data. In such cases, you will receive relative data even if need_absolute=true is passed. |

### `web_app_start_gyroscope`

Available since: **v8.0**

Starts tracking gyroscope data.

| Field        | Type     | Description                                                                                                                                                                                                             |
|--------------|----------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| refresh_rate | `number` | The refresh rate in milliseconds, with acceptable values ranging from 20 to 1000. Note that `refresh_rate` may not be supported on all platforms, so the actual tracking frequency may differ from the specified value. |

### `web_app_stop_accelerometer`

Available since: **v8.0**

Stops tracking accelerometer data.

### `web_app_stop_device_orientation`

Available since: **v8.0**

Stops tracking device orientation data.

### `web_app_stop_gyroscope`

Available since: **v8.0**

Stops tracking gyroscope data.

### `web_app_setup_secondary_button`

Available since: **v7.10**

The method that updates the Secondary Button settings.

<table>
  <thead>

  <tr>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </tr>

  </thead>
  <tbody>

  <tr>
    <td>is_visible</td>
    <td>
      <code>boolean</code>
    </td>
    <td><i>Optional</i>. Should the button be displayed.</td>
  </tr>

  <tr>
    <td>is_active</td>
    <td>
      <code>boolean</code>
    </td>
    <td><i>Optional</i>. Should the button be enabled.</td>
  </tr>

  <tr>
    <td>is_progress_visible</td>
    <td>
      <code>boolean</code>
    </td>
    <td>
      <i>Optional</i>. Should loader inside the button be displayed. Use this property in case, 
      some operation takes time. This loader will make user notified about it.
    </td>
  </tr>

  <tr>
    <td>color</td>
    <td>
      <code>string</code>
    </td>
    <td><i>Optional</i>. The button background color in <code>#RRGGBB</code> format.</td>
  </tr>

  <tr>
    <td>text_color</td>
    <td>
      <code>string</code>
    </td>
    <td><i>Optional</i>. The button text color in <code>#RRGGBB</code> format.</td>
  </tr>

  <tr>
    <td>has_shine_effect</td>
    <td>
      <code>boolean</code>
    </td>
    <td><i>Optional</i>. Should the button have a shining effect.</td>
  </tr>

  <tr>
    <td>position</td>
    <td>
      <code>string</code>
    </td>
    <td>
      <i>Optional</i>. Position of the secondary button. It applies only if both the main and 
      secondary buttons are visible. <br/>Supported values:
      <ul>
        <li>
          <code>left</code>, displayed to the left of the main button, 
        </li>
        <li>
          <code>right</code>, displayed to the right of the main button,
        </li>
        <li>
          <code>top</code>, displayed above the main button,
        </li>
        <li>
          <code>bottom</code>, displayed below the main button.
        </li>
      </ul>
    </td>
  </tr>
  </tbody>
</table>

### `web_app_switch_inline_query`

Available since: **v6.7**

Inserts the bot's username and the specified inline query in the current chat's input field.
Query may be empty, in which case only the bot's username will be inserted. The client prompts
the user to choose a specific chat, then opens that chat and inserts the bot's username and
the specified inline query in the input field.

<table>
  <thead>

  <tr>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </tr>

  </thead>
  <tbody>

  <tr>
    <td>query</td>
    <td>
      <code>string</code>
    </td>
    <td>
      Text which should be inserted in the input after the current bot name. Max length is 
      <b>256</b> symbols.
    </td>
  </tr>

  <tr>
    <td>chat_types</td>
    <td>
      <code>string[]</code>
    </td>
    <td>
      List of chat types which could be chosen to send the message. Could be empty list. Values:
      <ul>
        <li>
          <code>users</code> 
        </li>
        <li>
          <code>bots</code>
        </li>
        <li>
          <code>groups</code>
        </li>
        <li>
          <code>channels</code>
        </li>
      </ul>
    </td>
  </tr>

  </tbody>
</table>

### `web_app_toggle_orientation_lock`

Available since: **v8.0**

Locks the Mini Appâ€™s orientation to its current mode (either portrait or landscape). Once locked,
the orientation remains fixed, regardless of device rotation. This is useful if a stable orientation
is needed during specific interactions.

| Field  | Type      | Description                             |
|--------|-----------|-----------------------------------------|
| locked | `boolean` | True if the orientation must be locked. |

### `web_app_trigger_haptic_feedback`

Available since: **v6.1**

Generates the [haptic feedback](haptic-feedback.md) event.

<table>
  <thead>

  <tr>
    <th>Field</th>
    <th>Type</th>
    <th>Description</th>
  </tr>

  </thead>
  <tbody>

  <tr>
    <td>type</td>
    <td>
      <code>string</code>
    </td>
    <td>
      Type of haptic event. Values:
      <ul>
        <li>
          <code>impact</code>, when there's a collision involving UI components.
        </li>
        <li>
          <code>notification</code>, when some action execution has been completed.
        </li>
        <li>
          <code>selection_change</code>, when the user changes their selection.
        </li>
      </ul>
    </td>
  </tr>

  <tr>
    <td>impact_style</td>
    <td>
      <code>string</code>
    </td>
    <td>
      Required when <code>type</code> is <code>impact</code>. Values:
      <ul>
        <li>
          <code>light</code>, indicates a collision between small or lightweight UI objects
        </li>
        <li>
          <code>medium</code>, indicates a collision between medium-sized or medium-weight UI
          objects
        </li>
        <li>
          <code>heavy</code>, indicates a collision between large or heavyweight UI objects
        </li>
        <li>
          <code>rigid</code>, indicates a collision between hard or inflexible UI objects
        </li>
        <li>
          <code>soft</code>, indicates a collision between soft or flexible UI objects
        </li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>notification_type</td>
    <td>
      <code>string</code>
    </td>
    <td>
      Required when <code>type</code> is <code>notification</code>. Values:
      <ul>
        <li>
          <code>error</code>, indicates that a task or action has failed
        </li>
        <li>
          <code>success</code>, indicates that a task or action has completed successfully
        </li>
        <li>
          <code>warning</code>, indicates that a task or action produced a warning
        </li>
      </ul>
    </td>
  </tr>
  </tbody>
</table>

```
---
## File: apps/docs/platform/migrating-from-vk.md

```markdown
# Migrating MiniApps from VK to Telegram

## 1. Getting Started

### Creating a Bot in Telegram

To start working with MiniApps in Telegram, you need to create a bot. Follow these steps:

1. Open the Telegram app and find BotFather.
2. Start a dialogue with BotFather and use the `/start` command to begin creating a bot.
3. Enter the `/newbot` command and follow the instructions to create a new bot. You will need to choose a name and a unique username for the bot.
4. After successfully creating the bot, BotFather will provide you with an access token, which will be required for interacting with the Telegram API.

### Registering and Setting Up a MiniApp

To register and set up a MiniApp, follow these steps:

1. Go to the [Creating a Telegram Web App](https://core.telegram.org/bots/webapps) section in the official Telegram documentation.
2. Follow the instructions to register your MiniApp, set up the necessary parameters, and integrate it with the bot.

## 2. Interaction with Platform APIs

Specialized libraries are used to interact with platform APIs, providing convenient access to the functions and features of these platforms. VKontakte and Telegram provide such libraries, namely `vk-bridge` and `@tma.js/sdk`, respectively. Both libraries perform similar functions, allowing developers to interact with their platform's APIs to obtain user data and perform other tasks.

### VKontakte: vk-bridge

The `vk-bridge` library is designed to interact with the VKontakte API. The official documentation can be found [here](https://dev.vk.com/ru/bridge/overview).


### Telegram: @tma.js/sdk

The `@tma.js/sdk` library is designed to interact with the Telegram API. The official documentation can be found [here](https://docs.telegram-mini-apps.com/packages/tma-js-sdk).

## 3. App authorization

Main difference between vk and telegram is how you authorize your user.

### VK

#### Backend
Vk does not have any custom library to authorize. You need to manually calculate hash of `signParams` with secret key,
provided in vk miniapp settings.

```ts
const VK_APP_SECRET_KEY = 'VK_APP_SECRET_KEY';

function isSignValid(sign: string, signParams: Record<string, string>): boolean {
  const signUrlParams = new URLSearchParams(signParams);
  signUrlParams.sort();

  const queryString = signUrlParams.toString();

  const paramsHash = crypto
    .createHmac('sha256', VK_APP_SECRET_KEY)
    .update(queryString)
    .digest()
    .toString('base64url');

  return paramsHash === sign;
}
```

After validating sign params you can extract user data from sign params. For example `vkUserId`.

```ts 
const vkUserId = signParams.vk_user_id;
```

After this just place `vkUserId` in database or anywhere.

#### Frontend

Use `vk-bridge` to get sign and sign params data.

```ts
  const { sign, ...signParams } = await bridge.send('VKWebAppGetLaunchParams');
```

### Telegram

#### Backend

Telegram has similar mechanism. But instead of manual validation you can use package `@tma.js/init-data-node` to validate `initData`,
using secret key, provided `@BotFather`.

```ts
import { validate } from '@tma.js/init-data-node';

const TG_BOT_SECRET = 'TG_BOT_SECRET';

function isInitDataValid(initDataRaw: string): boolean {
  try {
    validate(initDataRaw, TG_BOT_SECRET);
    return true;
  } catch (err) {
    return false;
  }
}
```

After validating init data you can extract user information using `@tms.js/init-data-node`.

```ts
import { parse } from '@tma.js/init-data-node';

const initData = parse(initDataRaw);
const tgUserId = initData.user.id.toString();
```

After this just place `tgUserId` in database or anywhere.

#### Frontend

Use `@tma.js/sdk` to get `initDataRaw`.

```ts
  import { retrieveLaunchParams } from '@tma.js/sdk';

  const { initDataRaw } = retrieveLaunchParams();
```

### Auth with Ton wallet (optional)

Also, you can authorize your user using Ton Wallet.
Standard way is using Ton Proof. Below is the example. More information you can find on [official docs](https://docs.ton.org/develop/dapps/ton-connect/sign).

#### Backend

```ts
export async function isProofValid(payload: TonProof): Promise<boolean> {
  try {
    const stateInit = loadStateInit(Cell.fromBase64(payload.proof.stateInit).beginParse());
    const publicKey = tryParsePublicKey(stateInit);
    if (!publicKey) {
      return false;
    }

    const walletPublicKey = Buffer.from(payload.publicKey, 'hex');
    if (!publicKey.equals(walletPublicKey)) {
      return false;
    }

    const address = Address.parse(payload.address);
    const walletAddress = contractAddress(address.workChain, stateInit);
    if (!walletAddress.equals(address)) {
      return false;
    }

    if (!ALLOWED_DOMAINS.includes(payload.proof.domain.value)) {
      return false;
    }

    const now = Math.floor(Date.now() / 1000);
    if (now - VALID_AUTH_TIME > payload.proof.timestamp) {
      return false;
    }

    const message = {
      workchain: walletAddress.workChain,
      address: walletAddress.hash,
      domain: {
        lengthBytes: payload.proof.domain.lengthBytes,
        value: payload.proof.domain.value,
      },
      signature: Buffer.from(payload.proof.signature, 'base64'),
      payload: payload.proof.payload,
      stateInit: payload.proof.stateInit,
      timestamp: payload.proof.timestamp,
    };

    const wc = Buffer.alloc(4);
    wc.writeUInt32BE(message.workchain, 0);

    const ts = Buffer.alloc(8);
    ts.writeBigUInt64LE(BigInt(message.timestamp), 0);

    const dl = Buffer.alloc(4);
    dl.writeUInt32LE(message.domain.lengthBytes, 0);

    const msg = Buffer.concat([
      Buffer.from(TON_PROOF_PREFIX),
      wc,
      message.address,
      dl,
      Buffer.from(message.domain.value),
      ts,
      Buffer.from(message.payload),
    ]);

    const msgHash = Buffer.from(await sha256(msg));

    const fullMsg = Buffer.concat([
      Buffer.from([0xff, 0xff]),
      Buffer.from(TON_CONNECT_PREFIX),
      msgHash,
    ]);

    const result = Buffer.from(await sha256(fullMsg));

    return sign.detached.verify(result, message.signature, publicKey);
  } catch (e) {
    return false;
  }
}
```

#### Frontend

Example of creating a provider for auth:

```tsx
import {
  ReactNode, useCallback, useEffect, useRef, useState,
} from 'react';
import {
  useIsConnectionRestored, useTonAddress, useTonConnectModal, useTonConnectUI, useTonWallet,
} from '@tonconnect/ui-react';
import { retrieveLaunchParams } from '@tma.js/sdk-react';
import {
  apiGetSelf, apiGetTonProof, apiLogout, apiPostTgAuthorize, apiPostTonProofAuth,
} from 'services/auth.api';
import { GetAuthSelfResponse, GetAuthTonProofResponse } from 'dtos/auth.dtos';
import { AuthContext } from '../auth.context';

type TAuthProvider = {
  children: ReactNode
};

const payloadTTLMS = 1000 * 60 * 20;

export const AuthTonProvider = ({ children }: TAuthProvider) => {
  const [user, setUser] = useState<GetAuthSelfResponse | null>();
  const isConnectionRestored = useIsConnectionRestored();
  const wallet = useTonWallet();
  const [tonConnectUI] = useTonConnectUI();
  const address = useTonAddress();

  const { open } = useTonConnectModal();
  const interval = useRef<ReturnType<typeof setInterval> | undefined>();
  const tonProof = useRef<GetAuthTonProofResponse | null>(null);

  const fetchUser = useCallback(async () => {
    const userResponse = await apiGetSelf();
    setUser(userResponse);
    const { initDataRaw } = retrieveLaunchParams();
    if (!userResponse.tgUserId) {
      await apiPostTgAuthorize(initDataRaw || '');
    }
  }, []);

  const completeAuth = useCallback(async () => {
    if (!isConnectionRestored) {
      return;
    }
    clearInterval(interval.current);
    if (!wallet) {
      setUser(null);
      const refreshPayload = async () => {
        tonConnectUI.setConnectRequestParameters({ state: 'loading' });

        const value = await apiGetTonProof();
        tonProof.current = value;
        if (!value) {
          tonConnectUI.setConnectRequestParameters(null);
        } else {
          tonConnectUI.setConnectRequestParameters({ state: 'ready', value: { tonProof: value.payload } });
        }

      };
      refreshPayload().catch(() => {});
      setInterval(refreshPayload, payloadTTLMS);
      return;
    }

    try {
      await fetchUser();
    } catch (e) {
      if (wallet.connectItems?.tonProof && !('error' in wallet.connectItems.tonProof) && tonProof.current) {
        try {
          await apiPostTonProofAuth(
            wallet.connectItems.tonProof.proof, wallet.account, tonProof.current,
          );
          await fetchUser();
        } catch (e) {
          alert('Please try another wallet');
          await tonConnectUI.disconnect();
        }
      } else {
        alert('Please try another wallet');
        await tonConnectUI.disconnect();
      }
    }

  }, [fetchUser, isConnectionRestored, tonConnectUI, wallet]);

  useEffect(() => {
    completeAuth();
  }, [completeAuth]);

  const onLogout = useCallback(async () => {
    await tonConnectUI.disconnect();
    await apiLogout();
    setUser(null);
  }, [tonConnectUI]);

  const authContextValue = {
    user,
    setUser,
    onLogout,
    isWalletConnectionRestored: isConnectionRestored,
    address,
    onOpenTonModal: open,
    tonConnectUI,
    fetchUser,
  };

  return (
    <AuthContext.Provider value={authContextValue}>
      {children}
    </AuthContext.Provider>
  );
};
```

```
---
## File: apps/docs/platform/popup.md

```markdown
# Popup

![Popup](/components/popup.png)

Popup is a component that is located on top of the Mini App. Its classic use case is a request for
user confirmation to perform an action. Telegram Mini Apps allows specifying popup title, message
and the list of up to 3 configurable buttons.

To show the popup, developer can utilize
the [web_app_open_popup](methods.md#web-app-open-popup) Telegram Mini Apps
method. When user presses any popup button, Telegram application emits
the [popup_closed](events.md#popup-closed) event passing the identifier of the
clicked button.

```
---
## File: apps/docs/platform/settings-button.md

```markdown
# Settings Button

![Popup](/components/settings-button.png)

The Settings Button is a component displayed in the top right menu of the Mini App interface. Like
many other Telegram Mini Apps components, this button does not have a built-in action, and it's up
to the developer to decide how to handle a click on this button.

Until Telegram Mini Apps version `6.10`, this button was only displayed for Mini Apps belonging to
Telegram Ads' major advertisers' bots. Starting from version `6.10`, all developers have the option
to display this button using
the [web_app_setup_settings_button](methods.md#web-app-setup-settings-button)
method.

When a user clicks the Settings Button, the Telegram application emits
the [settings_button_pressed](events.md#settings-button-pressed) event.
```
---
## File: apps/docs/platform/start-parameter.md

```markdown
# Start Parameter

The start parameter is a custom string parameter passed to a Mini App from an external environment.
Its value is stored in the [tgWebAppStartParam](launch-parameters#tgwebappstartparam) launch
parameter.

This parameter is included in one of the following cases:

- The bot link contains the `startattach` query parameter.

```
https://t.me/botusername?startattach=ABC
```

- The Direct Link contains the `startapp` query parameter.

```
https://t.me/botusername/appname?startapp=ABC
```

[//]: # (TODO: Direct Link: refer to the direct links page)

In both cases mentioned above, the start parameter will be set to `ABC`.

::: info

This launch parameter is not included in the location hash. Instead, it can be found in the URL
query parameters.

:::

:::tip

The value of this parameter is duplicated in the init
data's [start_param](init-data.md#parameters-list) property.

:::

## Restrictions

- Only the following characters are allowed: `A-Z`, `a-z`, `0-9`, `_` (underscore) and the `-` (minus). We recommend using [base64url](https://base64.guru/standards/base64url) to encode parameters with binary and other types of content. The parameter can be up to `512` characters long.
- You can validate start parameter with the following RegExp: `/^[\w-]{0,512}$/`

```
---
## File: apps/docs/platform/sticky-app.md

```markdown
# Sticky App

::: tip

Starting from the Mini Apps version **7.7**, you are able to prevent the application from
closing due to swipe down by using a special method. 

- [Mini Apps method](methods.md#web-app-setup-swipe-behavior)
- [@telegram-apps/sdk component](../packages/telegram-apps-sdk/2-x/components/swipe-behavior.md)

:::

Developers often seek ways to make their applications "sticky." In this context, "sticky" refers to
preventing the application from being closed accidentally, such as by a swipe-down gesture.

Before implementing measures to prevent accidental closure, it's essential to understand why this
behavior exists in the first place.

Telegram Mini Apps allow developers to manipulate the visibility of the Close button, sometimes
replacing it with a Back button. Because of this, Telegram developers want to ensure users can still
exit an app even if the Close button is not visible. This is why the swipe-down mechanism exists.

Consider a scenario where the application displays the Back button but becomes unresponsive. In such
cases, rather than closing the entire Telegram app, users can simply swipe down to close the mini
application. Therefore, before you disable this mechanism, ensure that your application does not
become unresponsive and trap users.

Finally, check if the [closing confirmation](./closing-behavior.md) suits your needs.

## Making the App Sticky

To make your app sticky, you can use specific CSS styles that prevent the WebView from passing the
swipe event to the Telegram application.

Here is the HTML and CSS you can use:

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
  >
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>My Mini App</title>
  <style>
    .mobile-body {
      overflow: hidden;
      height: 100vh;
    }

    .mobile-wrap {
      position: absolute;
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
      overflow-x: hidden;
      overflow-y: auto;
      background: red;
    }

    .mobile-content {
      height: calc(100% + 1px);
      background: green;
    }
  </style>
</head>
<body>
  <div id="wrap">
    <div id="content">
      My application goes here.
    </div>
  </div>
  <script src="https://unpkg.com/@telegram-apps/sdk@1.0.0/dist/index.iife.js"></script>
  <script>
    (function() {
      var { retrieveLaunchParams, postEvent } = window.telegramApps.sdk;
      var lp = retrieveLaunchParams();

      // Some versions of Telegram don't need the classes above.
      if (['macos', 'tdesktop', 'weba', 'web', 'webk'].includes(lp.platform)) {
        return;
      }

      // Expand the application.
      postEvent('web_app_expand');

      document.body.classList.add('mobile-body');
      document.getElementById('wrap').classList.add('mobile-wrap');
      document.getElementById('content').classList.add('mobile-content');
    })();
  </script>
</body>
</html>
```

Using this HTML and CSS will prevent most accidental swipe-down closures. While this method covers
most scenarios, there are rare cases where it may not be effective, but these are uncommon in
real-world usage.

[Open in Telegram](https://t.me/tmajsbot/sticky_app) ([Source code](https://github.com/Telegram-Mini-Apps/sticky-app/blob/master/dist/index.html))
```
---
## File: apps/docs/platform/swipe-behavior.md

```markdown
# Swipe Behavior

![Swipe behavior](/functionality/swipe-behavior.png)

Mini Apps sometimes use swipe gestures that may conflict with the gestures for minimizing and closing the app.
For users, this could appear as accidentally swiping down to dock a Mini App while interacting with it.

To prevent this, developers have the option to configure the swipe behavior,
so the application won't hide in the dock when swiping the application itself.

In any case, users will still be able to minimize and close the Mini App by swiping the Mini App's header.

To disable vertical page swipes, Telegram Mini Apps provides a method
called [web_app_setup_swipe_behavior](methods.md#web-app-setup-swipe-behavior).
```
---
## File: apps/docs/platform/test-environment.md

```markdown
# Test Environment

Telegram provides the special environment for development with some specific features. For example,
a developer will be allowed to create a new Telegram bot and specify a Mini Apps link with HTTP
protocol or even IP. As opposed to the test environment, in production, a developer is only allowed
to specify links with HTTPS protocol. That's why this step is important during the Mini App
development process.

::: info

You are only allowed to create a new account in the test environment in mobile versions of Telegram.
Nevertheless, in this documentation, you will find out how to link to these accounts in other
versions of Telegram.

:::

### Telegram for iOS

- Fastly tap `Settings` section 10 times.
- Tap `Accounts` button.
- Tap `Login to another account`.
- Tap `Test` button.
- Create a new account.

### Telegram Desktop

- Open side menu.
- Expand the menu item, where current username is specified.
- Hold `Shift` + `Alt` and press **right** mouse button on `Add Account` button.
- Select `Test Server`.
- Link the account created in the test environment.

### Telegram for macOS

- Fastly tap Settings icon 10 times to open the Debug Menu.
- Hold `cmd` and click `Add Account` button.
- Link the account created in the test environment.
```
---
## File: apps/docs/platform/theming.md

```markdown
# Theming

![Theming](/functionality/theming.png)

Mini Apps are web applications designed to have a native appearance. This includes not only the use
of components that mimic native elements but also the adoption of the parent application's color
scheme.

Mini Apps are provided with colors that currently match those used in the Telegram application.
These colors should be utilized by Mini Apps to ensure a consistent and native look.

## Retrieving

### Launch Parameter

Telegram Mini Apps provides theming data through a launch parameter known
as [tgWebAppThemeParams](launch-parameters.md#tgwebappthemeparams). This
parameter represents a serialized JSON object containing a list of optional properties, with each
property describing one of the palette colors.

Here is a complete example of the parameter value:

```json
{
  "accent_text_color": "#6ab2f2",
  "bg_color": "#17212b",
  "button_color": "#5288c1",
  "button_text_color": "#ffffff",
  "bottom_bar_bg_color": "#ffffff",
  "destructive_text_color": "#ec3942",
  "header_bg_color": "#17212b",
  "hint_color": "#708499",
  "link_color": "#6ab3f3",
  "secondary_bg_color": "#232e3c",
  "section_bg_color": "#17212b",
  "section_header_text_color": "#6ab3f3",
  "subtitle_text_color": "#708499",
  "text_color": "#f5f5f5"
}
```

### Telegram Mini Apps Method

Nevertheless, retrieving theming data via launch parameters is not the only way. Telegram Mini Apps
also permits obtaining the theme through a method
called [web_app_request_theme](methods.md#web-app-request-theme).

As a result of calling this method, Telegram will emit an event
named [theme_changed](events.md#theme-changed). The payload of this event
contains a property called `theme_params`, which has the format described in the previous section.

## Background and Header Colors

As long as a Mini App is always displayed within a native component, which consists of parts such
as the _header_ and _body_, Telegram Mini Apps also allows changing their colors.

To change the header color, developers should utilize
the [web_app_set_header_color](methods.md#web-app-set-header-color) method,
which provides a way to set the color either by using a theme key or a custom RGB string.

To update the body color, it is required to use
the [web_app_set_background_color](methods.md#web-app-set-background-color)
method.

```
---
## File: apps/docs/platform/viewport.md

```markdown
# Viewport

The term **Viewport** refers to the **visible portion** of a Mini App. Since Mini Apps can appear
differently across various platforms, viewport information is used to ensure the Mini App is
displayed correctly.

Viewport data is defined by the following properties:

- **`width`** and **`height`**: Specify the dimensions of the visible area of the Mini App.
- **`stability`**: A boolean flag that is `true` when the Mini App's size is not expected to change
  imminently.
- **`expansion`**: A boolean flag that is `true` when the Mini App has reached its maximum height.
- **`fullscreen`**: A boolean flag indicating whether the application is displayed in fullscreen
  mode.
- **`safe area`**: An information describing the viewport content safe area and insets.

## Expanding

When an application is opened in the mobile version of Telegram (on both Android and iOS), it is
displayed within a native component called **`BottomSheet`**. This is a draggable block that appears
at the bottom of the screen and can be expanded to cover the entire screen. Users can expand it by
dragging it to the top edge of the screen, but developers can also trigger this programmatically.

By default, the application opens in a minimized state with the minimum allowed height. To expand
the application via code, developers can call the [**`web_app_expand`**](methods.md#web-app-expand)
method.

<img  
src="/components/viewport/expansion.png"  
srcset="/components/viewport/expansion.png, /components/viewport/expansion@2x.png 2x"  
class="guides-image"  
/>

While the **`BottomSheet`** is being dragged, the viewport is considered unstable. For developers,
this means avoiding any resizing actions or similar operations, as viewport dimensions may change
momentarily.

On other platforms, Mini Apps open maximized by default within a medium-sized window. In these
cases, calling the [web_app_expand](methods.md#web-app-expand) method will have no effect.

## Fullscreen

![Full screen](/functionality/full-screen.png)

Mini apps can be launched in **fullscreen mode**, which expands the application to cover the entire
device screen, removing both the top and bottom bars of Telegram.

This mode is particularly suitable for games and media-focused applications.

To control fullscreen mode, Telegram Mini Apps provides such methods
as [web_app_request_fullscreen](methods.md#web_app_request_fullscreen)
and [web_app_exit_fullscreen](methods.md#web_app_exit_fullscreen).

[//]: # (TODO: Learn more and write this section)
[//]: # (## Safe Area)

[//]: # ()
[//]: # (In mini apps, the **safe area** refers to the portion of the screen that is free from)

[//]: # (obstructions like notches, status bars, navigation bars, or rounded screen edges. It ensures that)

[//]: # (essential content is displayed properly and not hidden or truncated.)

[//]: # ()
[//]: # (Using the safe area is crucial for delivering a seamless user experience, especially on devices with)

[//]: # (modern screen designs &#40;e.g., iPhones with notches or Android devices with rounded corners&#41;.)

[//]: # (Developers typically use CSS properties or platform-specific guidelines)

[//]: # (&#40;e.g., `env&#40;safe-area-inset-*&#41;` in CSS&#41; to adjust the layout within the safe area boundaries, but)

[//]: # (in Telegram Mini Apps, these values are passed manually from the Telegram application.)


```
---
## File: apps/docs/public/analytics.js

```javascript
(function (f, b) { if (!b.__SV) { var e, g, i, h; window.mixpanel = b; b._i = []; b.init = function (e, f, c) { function g(a, d) { var b = d.split("."); 2 == b.length && ((a = a[b[0]]), (d = b[1])); a[d] = function () { a.push([d].concat(Array.prototype.slice.call(arguments, 0))); }; } var a = b; "undefined" !== typeof c ? (a = b[c] = []) : (c = "mixpanel"); a.people = a.people || []; a.toString = function (a) { var d = "mixpanel"; "mixpanel" !== c && (d += "." + c); a || (d += " (stub)"); return d; }; a.people.toString = function () { return a.toString(1) + ".people (stub)"; }; i = "disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking start_batch_senders people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split( " "); for (h = 0; h < i.length; h++) g(a, i[h]); var j = "set set_once union unset remove delete".split(" "); a.get_group = function () { function b(c) { d[c] = function () { call2_args = arguments; call2 = [c].concat(Array.prototype.slice.call(call2_args, 0)); a.push([e, call2]); }; } for ( var d = {}, e = ["get_group"].concat( Array.prototype.slice.call(arguments, 0)), c = 0; c < j.length; c++) b(j[c]); return d; }; b._i.push([e, f, c]); }; b.__SV = 1.2; e = f.createElement("script"); e.type = "text/javascript"; e.async = !0; e.src = "undefined" !== typeof MIXPANEL_CUSTOM_LIB_URL ? MIXPANEL_CUSTOM_LIB_URL : "file:" === f.location.protocol && "//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//) ? "https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js" : "//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js"; g = f.getElementsByTagName("script")[0]; g.parentNode.insertBefore(e, g); } })(document, window.mixpanel || []);

mixpanel.init('c1cc78f9ae899f378fa6802a3b48702a', {
  track_pageview: true,
  persistence: 'localStorage',
});

var orig = window.history.pushState;
window.history.pushState = function() {
  orig.apply(window.history, arguments);
  mixpanel.track_pageview();
}

```
---
## File: apps/docs/public/google9b165606060ff733.html

```html
google-site-verification: google9b165606060ff733.html
```
---
## File: apps/docs/index.md

```markdown
---
# https://vitepress.dev/reference/default-theme-home-page
layout: home

title: Home
description: Documentation home page.

hero:
  name: "Telegram Mini Apps"
  text: "Full fledged web applications inside Telegram"
  tagline: Simple, flexible, native-like web applications to enhance user experience
  actions:
    - theme: brand
      text: Platform
      link: /platform/about
    - theme: alt
      text: Packages
      link: /packages/telegram-apps-create-mini-app

features:
  - icon: ðŸ’»
    title: Multiplatform
    details: Works in all Telegram official applications, including Web and desktop versions
  - icon: ðŸŒ
    title: Web based
    details: Platform requires knowledge of only web-based technologies
  - icon: ðŸ§‘
    title: Better user experience
    details: Simplifies user communication with a project connected with Telegram
---


```
---
## File: apps/docs/package.json

```json
{
  "name": "docs",
  "private": true,
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "dev": "vitepress dev",
    "build": "vitepress build",
    "preview": "vitepress preview"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "vitepress": "1.5.0"
  }
}
```
---
## File: apps/docs/vercel.json

```json
{
  "rewrites": [
    {
      "source": "/:path*",
      "destination": "/:path*.html"
    }
  ]
}
```
---
## File: packages/bridge/src/env/hasWebviewProxy.test.ts

```typescript
import { expect, it } from 'vitest';

import { hasWebviewProxy } from './hasWebviewProxy.js';

it('should return true if passed object contains path property "TelegramWebviewProxy.postEvent" and "postEvent" is a function property.', () => {
  expect(hasWebviewProxy({})).toBe(false);
  expect(hasWebviewProxy({ TelegramWebviewProxy: {} })).toBe(false);
  expect(hasWebviewProxy({ TelegramWebviewProxy: { postEvent: [] } })).toBe(false);
  expect(hasWebviewProxy({
    TelegramWebviewProxy: {
      postEvent: () => {
      },
    },
  })).toBe(true);
});

```
---
## File: packages/bridge/src/env/hasWebviewProxy.ts

```typescript
import { looseObject, function as fn, is } from 'valibot';

/**
 * Returns true in case, passed value contains path `TelegramWebviewProxy.postEvent` property and
 * `postEvent` is a function.
 * @param value - value to check.
 */
export function hasWebviewProxy<T>(value: T): value is T & {
  TelegramWebviewProxy: {
    postEvent: (...args: unknown[]) => unknown;
  };
} {
  return is(
    looseObject({ TelegramWebviewProxy: looseObject({ postEvent: fn() }) }),
    value,
  );
}

```
---
## File: packages/bridge/src/env/isIframe.test.ts

```typescript
import { afterAll, afterEach, expect, it, vi } from 'vitest';

import { isIframe } from './isIframe.js';

const windowSpy = vi.spyOn(window, 'window', 'get');

afterEach(() => {
  windowSpy.mockReset();
});

afterAll(() => {
  windowSpy.mockRestore();
});

it('should return true in case window.self !== window.top. Otherwise, false.', () => {
  windowSpy.mockImplementation(() => ({ self: 900, top: 1000 }) as any);
  expect(isIframe()).toBe(true);

  windowSpy.mockImplementation(() => ({ self: 900, top: 900 }) as any);
  expect(isIframe()).toBe(false);
});

it('should return true in case window.self getter threw an error', () => {
  windowSpy.mockImplementation(() => ({
    get self() {
      throw new Error();
    },
  }) as any);
  expect(isIframe()).toBe(true);
});

```
---
## File: packages/bridge/src/env/isIframe.ts

```typescript
/**
 * @see https://stackoverflow.com/a/326076
 * @returns True, if current environment is iframe.
 */
export function isIframe(): boolean {
  try {
    return window.self !== window.top;
  } catch {
    return true;
  }
}

```
---
## File: packages/bridge/src/env/isTMA.test.ts

```typescript
import { TimeoutError } from 'better-promises';
import { beforeEach, describe, expect, it, vi } from 'vitest';
import {
  createWindow,
  mockSessionStorageGetItem,
  mockSessionStorageSetItem,
  mockWindow,
} from 'test-utils';
import * as TE from 'fp-ts/TaskEither';
import { pipe } from 'fp-ts/function';

import { requestFp as _requestFp } from '@/utils/request.js';

import { isTMA, isTMAFp } from './isTMA.js';
import { UnknownEnvError } from '@/errors.js';

const requestFp = vi.mocked(_requestFp);

vi.mock('@/utils/request.js', () => ({ requestFp: vi.fn() }));

beforeEach(() => {
  vi.restoreAllMocks();

  // Every isTMA call may set a value in the session storage.
  mockSessionStorageSetItem();
  mockSessionStorageGetItem();
});

describe('isTMA', () => {
  describe('complete', () => {
    it('should return true if current window contains TelegramWebviewProxy property', async () => {
      createWindow({ TelegramWebviewProxy: { postEvent: () => undefined } } as any);
      await expect(isTMA('complete')).resolves.toBe(true);
    });

    it(
      'should return promise with true value resolved, if requesting theme parameters was successful',
      async () => {
        createWindow();
        requestFp.mockImplementationOnce(() => TE.right({}));
        await expect(isTMA('complete')).resolves.toBe(true);
      },
    );

    it(
      'should return promise with false value resolved if promise was rejected with timeout error',
      async () => {
        createWindow();
        requestFp.mockImplementationOnce(() => TE.left(new TimeoutError(100)));
        await expect(isTMA('complete')).resolves.toBe(false);

        requestFp.mockImplementationOnce(() => TE.left(new Error('something else')));
        await expect(isTMA('complete')).rejects.toStrictEqual(new Error('something else'));
      },
    );
  });

  describe('sync', () => {
    beforeEach(() => {
      mockWindow({ location: { href: '' } } as any);
    });

    it('should return true if env contains launch params', () => {
      vi
        .spyOn(window.location, 'href', 'get')
        .mockImplementation(() => {
          return '/abc?tgWebAppStartParam=START#tgWebAppPlatform=tdesktop&tgWebAppVersion=7.0&tgWebAppThemeParams=%7B%7D';
        });
      expect(isTMA()).toBe(true);
    });

    it('should return true if env doesnt contain launch params', () => {
      expect(isTMA()).toBe(false);
    });
  });
});

describe('isTMAFp', () => {
  describe('complete', () => {
    it('should return true if current window contains TelegramWebviewProxy property', async () => {
      createWindow({ TelegramWebviewProxy: { postEvent: () => undefined } } as any);
      await pipe(
        isTMAFp('complete'),
        TE.match(
          () => expect.unreachable(),
          result => expect(result).toBe(true),
        ),
      )();
      expect.assertions(1);
    });

    it(
      'should return promise with true value resolved, if requesting theme parameters was successful',
      async () => {
        createWindow();
        requestFp.mockImplementationOnce(() => TE.right({}));
        await pipe(
          isTMAFp('complete'),
          TE.match(
            () => expect.unreachable(),
            result => expect(result).toBe(true),
          ),
        )();
        expect.assertions(1);
      },
    );

    it(
      'should return promise with false value resolved if promise was rejected with timeout error',
      async () => {
        createWindow();
        requestFp.mockImplementationOnce(() => TE.left(new TimeoutError(100)));
        await pipe(
          isTMAFp('complete'),
          TE.match(
            () => expect.unreachable(),
            result => expect(result).toBe(false),
          ),
        )();
        expect.assertions(1);

        requestFp.mockImplementationOnce(() => TE.left(new Error('something else')));
        await pipe(
          isTMAFp('complete'),
          TE.match(
            error => expect(error).toStrictEqual(new Error('something else')),
            () => expect.unreachable(),
          ),
        )();
        expect.assertions(2);
      },
    );

    it('should return false if the env is unknown', async () => {
      mockWindow({} as any);
      requestFp.mockImplementationOnce(() => TE.left(new UnknownEnvError()));
      await pipe(
        isTMAFp('complete'),
        TE.match(
          () => expect.unreachable(),
          result => expect(result).toBe(false),
        ),
      )();
      expect.assertions(1);
    });
  });

  describe('sync', () => {
    beforeEach(() => {
      mockWindow({ location: { href: '' } } as any);
    });

    it('should return true if env contains launch params', () => {
      vi
        .spyOn(window.location, 'href', 'get')
        .mockImplementation(() => {
          return '/abc?tgWebAppStartParam=START#tgWebAppPlatform=tdesktop&tgWebAppVersion=7.0&tgWebAppThemeParams=%7B%7D';
        });
      expect(isTMAFp()).toBe(true);
    });

    it('should return false if env doesnt contain launch params', () => {
      expect(isTMAFp()).toBe(false);
    });
  });
});

```
---
## File: packages/bridge/src/env/isTMA.ts

```typescript
import { throwifyAnyEither } from '@tma.js/toolkit';
import {
  BetterPromise,
  type BetterPromiseOptions,
  TimeoutError,
} from 'better-promises';
import * as E from 'fp-ts/Either';
import * as TE from 'fp-ts/TaskEither';
import { pipe } from 'fp-ts/function';

import { hasWebviewProxy } from '@/env/hasWebviewProxy.js';
import { retrieveRawLaunchParamsFp } from '@/launch-params.js';
import { type RequestError, requestFp } from '@/utils/request.js';
import { UnknownEnvError } from '@/errors.js';

export type isTMAError = Exclude<RequestError, TimeoutError>;

/**
 * @see isTMAFp
 */
export function isTMA(): boolean;
/**
 * @see isTMAFp
 */
export function isTMA(type: 'complete', options?: BetterPromiseOptions): BetterPromise<boolean>;
export function isTMA(
  type?: 'complete',
  options?: BetterPromiseOptions,
): boolean | BetterPromise<boolean> {
  const monad = isTMAFp(
    // @ts-expect-error TS doesn't get what override we are going to use.
    type,
    options,
  ) as boolean | TE.TaskEither<isTMAError, boolean>;
  return typeof monad === 'function'
    ? BetterPromise.fn(() => throwifyAnyEither(monad))
    : monad;
}

/**
 * Returns true if the current environment is Telegram Mini Apps.
 *
 * It uses the `retrieveLaunchParams` function to determine if the environment
 * contains launch parameters. In case it does, true will be returned.
 *
 * In case you need stricter checks, use async override of this function.
 */
export function isTMAFp(): boolean;
/**
 * Returns promise with true if the current environment is Telegram Mini Apps.
 *
 * First of all, it checks if the current environment contains traits specific
 * to the Mini Apps environment. Then, it attempts to call a Mini Apps method
 * and waits for a response to be received.
 *
 * In case you need less strict checks, use sync override of this function.
 */
export function isTMAFp(
  type: 'complete',
  options?: BetterPromiseOptions,
): TE.TaskEither<isTMAError, boolean>;
export function isTMAFp(
  type?: 'complete',
  options?: BetterPromiseOptions,
): boolean | TE.TaskEither<isTMAError, boolean> {
  const hasProxy = hasWebviewProxy(window);
  if (!type) {
    return hasProxy || pipe(retrieveRawLaunchParamsFp(), E.match(() => false, () => true));
  }
  if (hasProxy) {
    return TE.right(true);
  }
  const { timeout = 100 } = options || {};

  return pipe(
    requestFp('web_app_request_theme', 'theme_changed', { ...options, timeout }),
    TE.match(
      error => (
        TimeoutError.is(error) || UnknownEnvError.is(error)
          ? E.right(false)
          : E.left(error)
      ),
      () => E.right(true),
    ),
  );
}

```
---
## File: packages/bridge/src/env/mockTelegramEnv.test.ts

```typescript
import { it, expect, afterEach, vi, describe } from 'vitest';
import { createWindow } from 'test-utils';

import { mockTelegramEnv } from './mockTelegramEnv.js';
import { resetGlobals } from '@/globals.js';
import { retrieveLaunchParams } from '@/launch-params.js';
import { postEvent } from '@/methods/postEvent.js';

afterEach(() => {
  vi.restoreAllMocks();
  resetGlobals();
});

it('should store launch parameters retuning them from retrieveLaunchParams', () => {
  const launchParams = {
    tgWebAppThemeParams: {
      accent_text_color: '#6ab2f2',
      bg_color: '#17212b',
      button_color: '#5288c1',
      button_text_color: '#ffffff',
      destructive_text_color: '#ec3942',
      header_bg_color: '#17212b',
      hint_color: '#708499',
      link_color: '#6ab3f3',
      secondary_bg_color: '#232e3c',
      section_bg_color: '#17212b',
      section_header_text_color: '#6ab3f3',
      subtitle_text_color: '#708499',
      text_color: '#f5f5f5',
    },
    tgWebAppData: 'chat_type=sender&auth_date=1736409902&signature=FNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA&hash=4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d90v',
    tgWebAppVersion: '7.2',
    tgWebAppPlatform: 'tdesktop',
    tgWebAppBotInline: false,
    tgWebAppShowSettings: false,
  } as const;

  createWindow({ location: { href: '' } } as any);

  expect(retrieveLaunchParams).toThrow();
  mockTelegramEnv({ launchParams });
  expect(retrieveLaunchParams()).toStrictEqual({
    tgWebAppThemeParams: {
      accent_text_color: '#6ab2f2',
      bg_color: '#17212b',
      button_color: '#5288c1',
      button_text_color: '#ffffff',
      destructive_text_color: '#ec3942',
      header_bg_color: '#17212b',
      hint_color: '#708499',
      link_color: '#6ab3f3',
      secondary_bg_color: '#232e3c',
      section_bg_color: '#17212b',
      section_header_text_color: '#6ab3f3',
      subtitle_text_color: '#708499',
      text_color: '#f5f5f5',
    },
    tgWebAppData: {
      chat_type: 'sender',
      auth_date: new Date(1736409902000),
      signature: 'FNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA',
      hash: '4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d90v',
    },
    tgWebAppVersion: '7.2',
    tgWebAppPlatform: 'tdesktop',
    tgWebAppBotInline: false,
    tgWebAppShowSettings: false,
  });
});

describe('env is iframe', () => {
  it('should call onEvent when postEvent is called', () => {
    createWindow({ env: 'iframe' });
    const spy = vi.fn();
    mockTelegramEnv({ onEvent: spy });
    postEvent('web_app_data_send', { data: 'Data!' });
    expect(spy).toHaveBeenCalledOnce();
    expect(spy).toHaveBeenCalledWith(
      { name: 'web_app_data_send', params: { data: 'Data!' } },
      expect.anything(),
    );
  });

  it('should call previously defined window.parent.postMessage if next is called', () => {
    createWindow({ env: 'iframe' });
    const spy = vi.spyOn(window.parent, 'postMessage');
    mockTelegramEnv({
      onEvent(_, next) {
        next();
      },
    });
    postEvent('web_app_data_send', { data: 'Data!' });
    expect(spy).toHaveBeenCalledOnce();
    expect(spy).toHaveBeenCalledWith(
      '{"eventType":"web_app_data_send","eventData":{"data":"Data!"}}',
      'https://web.telegram.org',
    );
  });
});

describe('env is not iframe', () => {
  it('should define window.TelegramWebviewProxy.postEvent()', () => {
    createWindow();
    expect(window).not.toHaveProperty('TelegramWebviewProxy');
    mockTelegramEnv();
    const postEvent = (window as any).TelegramWebviewProxy.postEvent;
    expect(typeof postEvent).toBe('function');
  });

  it('should call onEvent when postEvent is called', () => {
    createWindow();
    const spy = vi.fn();
    mockTelegramEnv({ onEvent: spy });
    postEvent('web_app_data_send', { data: 'Data!' });
    expect(spy).toHaveBeenCalledOnce();
    expect(spy).toHaveBeenCalledWith(
      { name: 'web_app_data_send', params: { data: 'Data!' } },
      expect.anything(),
    );
  });

  it(
    'should call previously defined window.TelegramWebviewProxy.postEvent if next is called',
    () => {
      const spy = vi.fn();
      createWindow({ TelegramWebviewProxy: { postEvent: spy } } as any);
      mockTelegramEnv({
        onEvent(_, next) {
          next();
        },
      });
      postEvent('web_app_data_send', { data: 'Data!' });
      expect(spy).toHaveBeenCalledOnce();
      expect(spy).toHaveBeenCalledWith('web_app_data_send', '{"data":"Data!"}');
    },
  );
});

```
---
## File: packages/bridge/src/env/mockTelegramEnv.ts

```typescript
import { setStorageValue } from '@tma.js/toolkit';
import {
  miniAppsMessage,
  parseLaunchParamsQuery,
  pipeJsonToSchema,
  serializeLaunchParamsQuery,
  type LaunchParamsLike,
} from '@tma.js/transformers';
import { parse } from 'valibot';

import { isIframe } from '@/env/isIframe.js';
import { InvalidLaunchParamsError } from '@/errors.js';
import { logger, postMessageImpl } from '@/globals.js';
import type { MethodName, MethodParams } from '@/methods/types/index.js';

/**
 * Mocks the environment and imitates Telegram Mini Apps behavior.
 *
 * We usually use this function in the following cases:
 * 1. We are developing an application outside the Telegram environment and would like to imitate
 * the Telegram client in order to re-create the same communication behavior.
 * 2. We would like to intercept some Telegram Mini Apps methods' calls in order to enhance them
 * or write a custom behavior. It is extremely useful in some Telegram clients improperly handling
 * Mini Apps methods' calls and not even responding.
 *
 * Note that calling this function in Telegram web clients, the `postMessageImplementation` signal
 * value will be updated with a new one, enhancing previously set signal value to allow wrapping
 * the original `window.parent.postMessage` function. In other words, calling `mockTelegramEnv`
 * function N times, you will effectively wrap previously set implementation N times, so be
 * careful calling this function several times during a single lifecycle of the app. In case you
 * would like to avoid such kind of behavior, use the `resetPostMessage` option.
 */
export function mockTelegramEnv({ launchParams, onEvent, resetPostMessage }: {
  /**
   * Launch parameters to mock. They will be saved in the storage, so the SDK functions could
   * retrieve them.
   *
   * Note that this value must have `tgWebAppData` presented in a raw format as long as you will
   * need it when retrieving init data in this format. Otherwise, init data may be broken.
   */
  launchParams?:
    | (Omit<LaunchParamsLike, 'tgWebAppData'> & { tgWebAppData?: string | URLSearchParams })
    | string
    | URLSearchParams;
  /**
   * Function that will be called if a Mini Apps method call was requested by the mini app.
   *
   * It receives a Mini Apps method name along with the passed payload.
   *
   * Note that using the `next` function, in non-web environments it uses the
   * `window.TelegramWebviewProxy.postEvent` method.
   *
   * Talking about the web versions of Telegram, the value of `next` is a bit more complex - it
   * will be equal to the value stored in the `postMessageImpl` signal set previously. By default,
   * this value contains a function utilizing the `window.parent.postMessage` method.
   * @param event - event information.
   * @param next - function to call the original method used to call a Mini Apps method.
   */
  onEvent?: (
    event:
      | { [M in MethodName]: { name: M; params: MethodParams<M> } }[MethodName]
      | { name: string; params: unknown },
    next: () => void,
  ) => void;
  /**
   * Removes all previously set enhancements of the `window.parent.postMessage` function set
   * by other `mockTelegramEnv` calls.
   * @default false
   */
  resetPostMessage?: boolean;
} = {}): void {
  if (launchParams) {
    // If launch parameters were passed, save them in the session storage, so
    // the retrieveLaunchParams function would return them.
    const launchParamsQuery =
      typeof launchParams === 'string' || launchParams instanceof URLSearchParams
        ? launchParams.toString()
        : (
          // Here we have to trick serializeLaunchParamsQuery into thinking, it serializes a valid
          // value. We are doing it because we are working with tgWebAppData presented as a
          // string, not an object as serializeLaunchParamsQuery requires.
          serializeLaunchParamsQuery({ ...launchParams, tgWebAppData: undefined })
          // Then, we just append init data.
          + (launchParams.tgWebAppData ? `&tgWebAppData=${encodeURIComponent(launchParams.tgWebAppData.toString())}` : '')
        );

    // Remember to check if launch params are valid.
    try {
      parseLaunchParamsQuery(launchParamsQuery);
    } catch (e) {
      throw new InvalidLaunchParamsError(launchParamsQuery, e);
    }
    setStorageValue('launchParams', launchParamsQuery);
  }

  // Original postEvent firstly checks if the current environment is iframe.
  // That's why we have a separate branch for this environment here too.
  if (isIframe()) {
    if (!onEvent) {
      return;
    }
    // As long as the postEvent function uses the postMessage method, we should rewire it.
    if (resetPostMessage) {
      postMessageImpl.reset();
    }

    const original = postMessageImpl();
    postMessageImpl.set((...args) => {
      const [message] = args;
      const next = () => {
        (original as any)(...args);
      };

      // Pass only Telegram Mini Apps events to the handler. All other calls should be passed
      // to the original handler (window.parent.postMessage likely).
      try {
        const data = parse(pipeJsonToSchema(miniAppsMessage()), message);
        onEvent({ name: data.eventType, params: data.eventData }, next);
      } catch {
        next();
      }
    });
    return;
  }

  // In all other environments, it is enough to define window.TelegramWebviewProxy.postEvent.
  const proxy = (window as any).TelegramWebviewProxy || {};
  const postEventDefaulted = proxy.postEvent || (() => undefined);
  (window as any).TelegramWebviewProxy = {
    ...proxy,
    postEvent(eventType: string, eventData: string) {
      const next = () => {
        postEventDefaulted(eventType, eventData);
      };
      onEvent
        ? onEvent({
          name: eventType,
          params: eventData ? JSON.parse(eventData) : undefined,
        }, next)
        : next();
    },
  };

  logger().log('Environment was mocked by the mockTelegramEnv function');
}

```
---
## File: packages/bridge/src/events/types/events.ts

```typescript
import type { If, IsNever, Maybe } from '@tma.js/toolkit';
import type { RGB } from '@tma.js/types';

import type {
  BiometryAuthRequestStatus,
  BiometryTokenUpdateStatus,
  BiometryType,
  EmojiStatusAccessRequestedStatus,
  EmojiStatusFailedError,
  FullScreenErrorStatus,
  HomeScreenStatus,
  InvoiceStatus,
  PhoneRequestedStatus,
  SafeAreaInsets,
  WriteAccessRequestedStatus,
} from './misc.js';

type WithReqId<T = {}> = T & {
  /**
   * Unique request identifier.
   */
  req_id: string;
};

/**
 * Map where key is known event name, and value is its listener.
 * @see https://docs.telegram-mini-apps.com/platform/events
 */
export interface Events {
  /**
   * Accelerometer data changed.
   * @since 8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#accelerometer-changed
   */
  accelerometer_changed: {
    /**
     * The current acceleration in the X-axis, measured in m/sÂ².
     */
    x: number;
    /**
     * The current acceleration in the Y-axis, measured in m/sÂ².
     */
    y: number;
    /**
     * The current acceleration in the Z-axis, measured in m/sÂ².
     */
    z: number;
  };
  /**
   * Failed to start accelerometer data tracking.
   * @since 8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#accelerometer-failed
   */
  accelerometer_failed: {
    /**
     * Occurred error.
     */
    error: string;
  };
  /**
   * Accelerometer data tracking started.
   * @since 8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#accelerometer-started
   */
  accelerometer_started: never;
  /**
   * Accelerometer data tracking stopped.
   * @since 8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#accelerometer-stopped
   */
  accelerometer_stopped: never;
  /**
   * User clicked the BackButton.
   * @since v6.1
   * @see https://docs.telegram-mini-apps.com/platform/events#back-button-pressed
   */
  back_button_pressed: never;
  /**
   * Biometry authentication request completed.
   * @since 7.2
   * @see https://docs.telegram-mini-apps.com/platform/events#biometry-auth-requested
   */
  biometry_auth_requested: {
    /**
     * Authentication status.
     */
    status: BiometryAuthRequestStatus;
    /**
     * Token from the local secure storage saved previously.
     */
    token?: string;
  };
  /**
   * Biometry settings were received.
   * @since 7.2
   * @see https://docs.telegram-mini-apps.com/platform/events#biometry-info-received
   */
  biometry_info_received:
    | {
    /**
     * If true, indicates that biometric authentication is available on the
     * current device.
     */
      available: false;
    }
    | {
    /**
     * If true, indicates that biometric authentication is available on the
     * current device.
     */
      available: true;
      /**
     * Indicates whether the app has previously requested permission to use
     * biometrics.
     */
      access_requested: boolean;
      /**
     * Indicates whether the user has granted the app permission to use
     * biometrics.
     *
     * If false and access_requested is true may indicate that:
     *
     * - The user has simply canceled the permission popup, in which case
     * a `web_app_biometry_request_access` event can be emitted to re-open the
     * popup.
     *
     * - The user has denied the app permission to use biometrics, in which
     * case the app should open a prompt notifying the user that the biometric
     * settings must be changed to use biometrics.
     */
      access_granted: boolean;
      /**
     * A unique device identifier that can be used to match the token to the
     * device.
     */
      device_id: string;
      /**
     * Show whether a token was safely stored on-device.
     */
      token_saved: boolean;
      /**
     * The type of biometrics currently available on the device.
     */
      type: BiometryType;
    };
  /**
   * Biometry token was updated.
   * @since 7.2
   * @see https://docs.telegram-mini-apps.com/platform/events#biometry-token-updated
   */
  biometry_token_updated: {
    /**
     * Update status.
     *
     * One of:
     * - `updated` - If the token was successfully updated.
     * - `removed` - If the token was successfully removed.
     * - `failed` - If biometric authentication failed, or the app doesn't have
     * permission to use biometrics.
     */
    status: BiometryTokenUpdateStatus;
  };
  /**
   * Telegram application attempted to extract text from clipboard.
   * @since v6.4
   * @see https://docs.telegram-mini-apps.com/platform/events#clipboard-text-received
   */
  clipboard_text_received: WithReqId<{
    /**
     * Data extracted from the clipboard. The returned value will have the type
     * `string` only in the case, application has access to the clipboard.
     */
    data?: string | null;
  }>;
  /**
   * Occurs when the safe area for content changes
   * (e.g., due to orientation change or screen adjustments).
   * @since Mini Apps v8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#content_safe_area_changed
   * */
  content_safe_area_changed: SafeAreaInsets;
  /**
   * Custom method invocation completed.
   * @since v6.9
   * @see https://docs.telegram-mini-apps.com/platform/events#custom-method-invoked
   */
  custom_method_invoked: WithReqId<{
    /**
     * Method invocation successful result.
     */
    result?: unknown;
    /**
     * Method invocation error code.
     */
    error?: string;
  }>;
  /**
   * Device orientation data changed.
   * @since 8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#device-orientation-changed
   */
  device_orientation_changed: {
    /**
     * A boolean that indicates whether the device is providing orientation data in
     * absolute values.
     */
    absolute?: Maybe<boolean>;
    /**
     * The rotation around the Z-axis, measured in radians.
     */
    alpha: number;
    /**
     * The rotation around the X-axis, measured in radians.
     */
    beta: number;
    /**
     * The rotation around the Y-axis, measured in radians.
     */
    gamma: number;
  };
  /**
   * Device orientation data tracking failed to start.
   * @since 8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#device-orientation-failed
   */
  device_orientation_failed: {
    /**
     * Occurred error.
     */
    error: string;
  };
  /**
   * Device orientation data tracking started.
   * @since 8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#device-orientation-started
   */
  device_orientation_started: never;
  /**
   * Device orientation data tracking stopped.
   * @since 8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#device-orientation-stopped
   */
  device_orientation_stopped: never;
  /**
   * Device's local storage was cleared.
   * @since v9.0
   * @see https://docs.telegram-mini-apps.com/platform/events#device-storage-cleared
   */
  device_storage_cleared: WithReqId;
  /**
   * An error occurred while working with the device's local storage.
   * @since v9.0
   * @see https://docs.telegram-mini-apps.com/platform/events#device-storage-failed
   */
  device_storage_failed: WithReqId<{
    /**
     * An occurred error.
     */
    error?: string;
  }>;
  /**
   * A value from the device's local storage was retrieved.
   * @since v9.0
   * @see https://docs.telegram-mini-apps.com/platform/events#device-storage-key-received
   */
  device_storage_key_received: WithReqId<{
    /**
     * A retrieved value.
     */
    value: string | null;
  }>;
  /**
   * A value in the device's local storage was saved.
   * @since v9.0
   * @see https://docs.telegram-mini-apps.com/platform/events#device-storage-key-saved
   */
  device_storage_key_saved: WithReqId;
  /**
   * Request to set custom emoji status was requested.
   * @see https://docs.telegram-mini-apps.com/platform/events#emoji-status-access-requested
   * @since v8.0
   */
  emoji_status_access_requested: {
    /**
     * Request status.
     */
    status: EmojiStatusAccessRequestedStatus;
  };
  /**
   * Failed to set custom emoji status.
   * @see https://docs.telegram-mini-apps.com/platform/events#emoji-status-failed
   * @since v8.0
   */
  emoji_status_failed: {
    error: EmojiStatusFailedError;
  };
  /**
   * Custom emoji status set.
   * @see https://docs.telegram-mini-apps.com/platform/events#emoji-status-set
   * @since v8.0
   */
  emoji_status_set: never;
  /**
   * Application received file download request status.
   * @since 8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#file-download-requested
   */
  file_download_requested: {
    status?: Maybe<'downloading' | string>;
  };
  /**
   * App entered or exited fullscreen mode.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#fullscreen-changed
   */
  fullscreen_changed: {
    /**
     * Is application currently in the fullscreen mode.
     */
    is_fullscreen: boolean;
  };
  /**
   * App failed to expand to the fullscreen mode.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#fullscreen-changed
   */
  fullscreen_failed: {
    /**
     * Full Screen mode status error.
     */
    error: FullScreenErrorStatus;
  };
  /**
   * Gyroscope data changed.
   * @since 8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#gyroscope-changed
   */
  gyroscope_changed: {
    /**
     * The current rotation rate around the X-axis, measured in rad/s.
     */
    x: number;
    /**
     * The current rotation rate around the Y-axis, measured in rad/s.
     */
    y: number;
    /**
     * The current rotation rate around the Z-axis, measured in rad/s.
     */
    z: number;
  };
  /**
   * Gyroscope data tracking failed to run.
   * @since 8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#gyroscope-failed
   */
  gyroscope_failed: {
    /**
     * Occurred error.
     */
    error: string;
  };
  /**
   * Gyroscope data tracking started.
   * @since 8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#gyroscope-started
   */
  gyroscope_started: never;
  /**
   * Gyroscope data tracking stopped.
   * @since 8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#gyroscope-stopped
   */
  gyroscope_stopped: never;
  /**
   * The mini application was added to the device's home screen.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#home_screen_added
   */
  home_screen_added: never;
  /**
   * The status of the mini application being added to the home screen has been checked.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#home_screen_checked
   */
  home_screen_checked: {
    /**
     * The status of the mini application being added to the home screen.
     *
     * Possible values:
     * - `unsupported` â€“ the feature is not supported, and it is not possible to add the icon to
     * the home screen,
     * - `unknown` â€“ the feature is supported, and the icon can be added, but it is not possible to
     *   determine if the icon has already been added,
     * - `added` â€“ the icon has already been added to the home screen,
     * - `missed` â€“ the icon has not been added to the home screen.
     */
    status?: HomeScreenStatus;
  };
  /**
   * User declined the request to add the current mini application to the device's home screen.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#home_screen_failed
   */
  home_screen_failed: never;
  /**
   * An invoice was closed.
   * @see https://docs.telegram-mini-apps.com/platform/events#invoice-closed
   */
  invoice_closed: {
    /**
     * Passed during the `web_app_open_invoice` method invocation `slug` value.
     */
    slug: string;
    /**
     * Invoice status.
     */
    status: InvoiceStatus;
  };
  /**
   * Checks the location-related functionality availability state.
   * @since 8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#location-checked
   */
  location_checked:
    | { available: false }
    | {
      available: true;
      access_requested?: Maybe<boolean>;
      access_granted?: Maybe<boolean>;
    };
  /**
   * Location-related functionality availability status was retrieved.
   * @since 8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#location-requested
   */
  location_requested:
    | { available: false }
    | {
      available: true;
      /**
     * Latitude in degrees.
     */
      latitude: number;
      /**
     * Longitude in degrees.
     */
      longitude: number;
      /**
     * Altitude above sea level in meters.
     */
      altitude?: Maybe<number>;
      /**
     * The direction the device is moving in degrees.
     */
      course?: Maybe<number>;
      /**
     * The speed of the device in m/s.
     */
      speed?: Maybe<number>;
      /**
     * Accuracy of the latitude and longitude values in meters.
     */
      horizontal_accuracy?: Maybe<number>;
      /**
     * Accuracy of the altitude value in meters.
     */
      vertical_accuracy?: Maybe<number>;
      /**
     * Accuracy of the course value in degrees.
     */
      course_accuracy?: Maybe<number>;
      /**
     * Accuracy of the speed value in m/s.
     */
      speed_accuracy?: Maybe<number>;
    };
  /**
   * A user clicked the Main Button.
   * @see https://docs.telegram-mini-apps.com/platform/events#main-button-pressed
   */
  main_button_pressed: never;
  /**
   * Application received phone access request status.
   * @since v6.9
   * @see https://docs.telegram-mini-apps.com/platform/events#phone-requested
   */
  phone_requested: {
    /**
     * Request status.
     */
    status: PhoneRequestedStatus;
  };
  /**
   * Popup was closed.
   * @see https://docs.telegram-mini-apps.com/platform/events#popup-closed
   */
  popup_closed: {
    /**
     * Identifier of the clicked button. In case, the popup was closed without
     * clicking any button, this property will be omitted.
     */
    button_id?: string;
  };
  /**
   * Failed to send a prepared message.
   * @since 8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#prepare-message-failed
   */
  prepared_message_failed: {
    /**
     * Occurred error.
     */
    error: string;
  };
  /**
   * A prepared message was sent.
   * @since 8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#prepare-message-sent
   */
  prepared_message_sent: never;
  /**
   * The QR scanner scanned some QR and extracted its content.
   * @param payload - event payload.
   * @since v6.4
   * @see https://docs.telegram-mini-apps.com/platform/events#qr-text-received
   */
  qr_text_received: {
    /**
     * Data extracted from the QR.
     */
    data: string;
  };
  /**
   * Parent iframe requested current iframe reload.
   * @see https://docs.telegram-mini-apps.com/platform/events#reload-iframe
   */
  reload_iframe: never;
  /**
   * Occurs whenever the device's safe area insets change
   * (e.g., due to orientation change or screen adjustments).
   * @since Mini Apps v8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#safe_area_changed
   * */
  safe_area_changed: SafeAreaInsets;
  /**
   * QR scanner was closed.
   * @since v6.4
   * @see https://docs.telegram-mini-apps.com/platform/events#scan-qr-popup-closed
   */
  scan_qr_popup_closed: never;
  /**
   * User clicked the secondary button.
   * @since v7.10
   * @see https://docs.telegram-mini-apps.com/platform/events#secondary-button-pressed
   */
  secondary_button_pressed: never;
  /**
   * Device's secure storage was cleared.
   * @since v9.0
   * @see https://docs.telegram-mini-apps.com/platform/events#secure-storage-cleared
   */
  secure_storage_cleared: WithReqId;
  /**
   * An error occurred while working with the device's secure storage.
   * @since v9.0
   * @see https://docs.telegram-mini-apps.com/platform/events#secure-storage-failed
   */
  secure_storage_failed: WithReqId<{
    /**
     * An occurred error.
     */
    error?: string;
  }>;
  /**
   * A value from the device's secure storage was retrieved.
   * @since v9.0
   * @see https://docs.telegram-mini-apps.com/platform/events#secure-storage-key-received
   */
  secure_storage_key_received: WithReqId<{
    /**
     * A retrieved value.
     */
    value: string | null;
    /**
     * True if this value can be restored.
     */
    can_restore?: boolean;
  }>;
  /**
   * A value from the device's secure storage was restored.
   * @since v9.0
   * @see https://docs.telegram-mini-apps.com/platform/events#secure-storage-key-restored
   */
  secure_storage_key_restored: WithReqId<{
    /**
     * A restored value.
     */
    value: string | null;
  }>;
  /**
   * A value in the device's secure storage was saved.
   * @since v9.0
   * @see https://docs.telegram-mini-apps.com/platform/events#secure-storage-key-saved
   */
  secure_storage_key_saved: WithReqId;
  /**
   * The event which is usually sent by the Telegram web application. Its
   * payload represents
   * `<style/>` tag html content, a developer could use. The stylesheet
   * described in the payload will help the developer to stylize the app
   * scrollbar (but he is still able to do it himself).
   * @see https://docs.telegram-mini-apps.com/platform/events#set-custom-style
   */
  set_custom_style: string;
  /**
   * Occurs when the Settings Button was pressed.
   * @since v6.1
   * @see https://docs.telegram-mini-apps.com/platform/events#settings-button-pressed
   */
  settings_button_pressed: never;
  /**
   * Occurs whenever theme settings are changed in the user's Telegram app
   * (including switching to night mode).
   * @see https://docs.telegram-mini-apps.com/platform/events#theme-changed
   */
  theme_changed: {
    /**
     * Map where the key is a theme stylesheet key and value is the
     * corresponding color in
     * `#RRGGBB` format.
     */
    theme_params: {
      /**
       * @since v6.10
       */
      accent_text_color?: RGB;
      /**
       * @since 7.10
       */
      bottom_bar_bg_color?: RGB;
      bg_color?: RGB;
      button_color?: RGB;
      button_text_color?: RGB;
      /**
       * @since v6.10
       */
      destructive_text_color?: RGB;
      /**
       * @since v6.10
       */
      header_bg_color?: RGB;
      hint_color?: RGB;
      link_color?: RGB;
      secondary_bg_color?: RGB;
      /**
       * @since v6.10
       */
      section_bg_color?: RGB;
      /**
       * @since v6.10
       */
      section_header_text_color?: RGB;
      /**
       * @since v6.10
       */
      subtitle_text_color?: RGB;
      text_color?: RGB;
      // Future unknown palette keys.
      [key: string]: RGB | undefined;
    };
  };
  /**
   * Occurs whenever the viewport has been changed. For example, when the user
   * started dragging the application or called the expansion method.
   * @see https://docs.telegram-mini-apps.com/platform/events#viewport-changed
   */
  viewport_changed: {
    /**
     * The viewport height.
     */
    height: number;
    /**
     * The viewport width.
     */
    width: number;
    /**
     * Is the viewport currently expanded.
     */
    is_expanded: boolean;
    /**
     * Is the viewport current state stable and not going to change in the next
     * moment.
     */
    is_state_stable: boolean;
  };
  /**
   * Occurs whenever the mini app becomes active or inactive.
   *
   * Active state assumes that the native Telegram client is currently working with the
   * current mini application. It is important to note that this is not related to the
   * mini applicationâ€™s visibility, but rather its selection among other currently opened
   * mini applications.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/events#visibility_changed
   */
  visibility_changed: {
    /**
     * Indicates if the application is currently active.
     */
    is_visible: boolean;
  };
  /**
   * Application received write access request status.
   * @since v6.9
   * @see https://docs.telegram-mini-apps.com/platform/events#write-access-requested
   */
  write_access_requested: {
    /**
     * Request status.
     */
    status: WriteAccessRequestedStatus;
  };
}

/**
 * Mini Apps event name.
 */
export type EventName = keyof Events;

/**
 * Payload of the specified Mini Apps event.
 */
export type EventPayload<E extends EventName> = Events[E];

export type EventWithoutPayload = {
  [E in EventName]: If<IsNever<EventPayload<E>>, E, never>
}[EventName];

export type EventWithPayload = {
  [E in EventName]: undefined extends EventPayload<E> ? never : E
}[EventName];

```
---
## File: packages/bridge/src/events/types/index.ts

```typescript
export type * from './events.js';
export type * from './listening.js';
export type * from './misc.js';

```
---
## File: packages/bridge/src/events/types/listening.ts

```typescript
import type { Handler } from 'mitt';

import type { WildcardHandler } from '@/events/createEmitter.js';
import type { EventName, EventPayload, Events } from '@/events/types/index.js';

export type EventListener<E extends EventName> = Handler<EventPayload<E>>;

export type SubscribeListener = WildcardHandler<Events>;

```
---
## File: packages/bridge/src/events/types/misc.ts

```typescript
export type InvoiceStatus =
  | 'paid'
  | 'failed'
  | 'pending'
  | 'cancelled'
  | string;

export type PhoneRequestedStatus = 'sent' | 'cancelled' | string;

export type EmojiStatusAccessRequestedStatus = 'allowed' | string;

export type EmojiStatusFailedError = 'SUGGESTED_EMOJI_INVALID' | 'USER_DECLINED' | string;

export type WriteAccessRequestedStatus = 'allowed' | string;

export type BiometryType = 'finger' | 'face' | string;

export type BiometryTokenUpdateStatus =
  | 'updated'
  | 'removed'
  | 'failed'
  | string;

export type BiometryAuthRequestStatus = 'failed' | 'authorized' | string;

export type FullScreenErrorStatus =
  | 'ALREADY_FULLSCREEN'
  | 'UNSUPPORTED'
  | string;

export interface SafeAreaInsets {
  top: number;
  bottom: number;
  left: number;
  right: number;
}

export type HomeScreenStatus = 'unsupported' | 'unknown' | 'added' | 'missed' | string;

```
---
## File: packages/bridge/src/events/createEmitter.ts

```typescript
import type { If, IsNever, IsUndefined, Or } from '@tma.js/toolkit';
import mitt, {
  type Emitter,
  type EventHandlerMap,
  type EventType,
  type Handler,
} from 'mitt';

export type WildcardHandler<E> = Handler<{
  [K in keyof E]: {
    name: K;
    payload: If<Or<IsNever<E[K]>, IsUndefined<E[K]>>, never, E[K]>;
  };
}[keyof E]>;

export interface OnFn<E> {
  /**
   * Adds a new listener for the specified event.
   * @param type - event name.
   * @param handler - event listener.
   * @param once - should this listener be called only once.
   * @returns Function to remove bound event listener.
   */
  <K extends keyof E>(type: K, handler: Handler<E[K]>, once?: boolean): VoidFunction;
  /**
   * Adds a listener to the wildcard event.
   * @param type - event name.
   * @param handler - event listener.
   * @param once - should this listener be called only once.
   * @returns Function to remove bound event listener.
   */
  (type: '*', handler: WildcardHandler<E>, once?: boolean): VoidFunction;
}

export interface OffFn<E> {
  /**
   * Removes a listener from the specified event.
   * @param type - event to listen.
   * @param handler - event listener to remove.
   * @param once - had this listener to be called only once.
   */
  <K extends keyof E>(type: K, handler: Handler<E[K]>, once?: boolean): void;
  /**
   * Removes a listener from the wildcard event.
   * @param type - event to stop listening.
   * @param handler - event listener to remove.
   * @param once - should this listener be called only once.
   */
  (type: '*', handler: WildcardHandler<E>, once?: boolean): void;
}

export interface EmitFn<E> {
  <K extends keyof E>(type: K, event: E[K]): void;
  <K extends keyof E>(type: undefined extends E[K] ? K : never): void;
}

/**
 * Creates a new enhanced event emitter.
 * @param onFirst - a function to call every time when the events map appeared to be empty during
 * the event listener creation.
 * @param onEmpty - a function to call every tume when the events map became empty.
 */
export function createEmitter<E extends object>(
  onFirst: VoidFunction,
  onEmpty: VoidFunction,
): {
  on: OnFn<E>;
  off: OffFn<E>;
  emit: EmitFn<E>;
  clear: VoidFunction;
} {
  // To understand the event handlers concept here, let's tell the underlying idea.
  //
  // We use a Map, where key is an event name, and the value is a Map we call HandlersMap.
  //
  // The HandlersMap is a Map, where the key is an event handler, added by the developer.
  // The corresponding value is a list of tuples, with an internally generated function and a
  // boolean value responsible for determining if the handler must be called only once. So, you
  // can imagine the following map as:
  //
  // HandlersMap {
  //   { developer_handler }: Array<[ internally_created_handler, once ]>;
  // }
  //
  // The value for the key represents an array of tuples, as long as a single handler may be added
  // many times, and for each addition we add a new tuple entry.
  //
  // The handler may also be added to be called only once. Trying to remove such kind of handler
  // using a different value of the "once" argument will lead to nothing. The developer must
  // specify the same argument value to avoid confusions.
  //
  // Here is the final EventToHandlersMap definition:
  //
  // EventToHandlersMap {
  //   { event_name }: HandlersMap {
  //     { developer_handler }: Array<[ internally_created_handler, once ]>;
  //   }
  // }
  type HandlersMap = Map<
    (...args: any) => void,
    [handler: (...args: any) => void, once: boolean][]
  >;

  const eventToHandlersMap = new Map<keyof E | '*', HandlersMap>();

  const emitter = (mitt as any as {
    <E extends Record<EventType, unknown>>(all?: EventHandlerMap<E>): Emitter<E>;
  })<E & Record<string | symbol, unknown>>();

  const off: OffFn<E> = (
    event: keyof E | '*',
    handler: (...args: any) => void,
    once = false,
  ) => {
    const handlersMap: HandlersMap = eventToHandlersMap.get(event) || new Map();
    eventToHandlersMap.set(event, handlersMap);

    const handlers = handlersMap.get(handler) || [];
    handlersMap.set(handler, handlers);

    const index = handlers.findIndex(item => item[1] === once);
    if (index >= 0) {
      // Remove the related handler.
      emitter.off(event, handlers[index][0]);

      // Remove the handler from the cache array.
      handlers.splice(index, 1);

      // If after removal, there are no handlers left, we should remove the entry from the cache.
      if (!handlers.length) {
        handlersMap.delete(handler);
        if (!handlersMap.size) {
          const prevSize = eventToHandlersMap.size;
          eventToHandlersMap.delete(event);
          prevSize && !eventToHandlersMap.size && onEmpty();
        }
      }
    }
  };

  return {
    on(event: keyof E | '*', handler: (...args: any[]) => any, once?: boolean) {
      // The events' map became non-empty. Call the onFirst callback.
      !eventToHandlersMap.size && onFirst();

      const cleanup = () => {
        off(event as any, handler, once);
      };

      const internalHandler = (...args: any[]) => {
        once && cleanup();
        if (event === '*') {
          handler({ name: args[0], payload: args[1] });
        } else {
          handler(...args);
        }
      };

      emitter.on(event, internalHandler);

      // Add this handler to the cache, so we could remove it using the passed listener.
      const handlersMap: HandlersMap = eventToHandlersMap.get(event) || new Map();
      eventToHandlersMap.set(event, handlersMap);

      const handlers = handlersMap.get(handler) || [];
      handlersMap.set(handler, handlers);
      handlers.push([internalHandler, once || false]);

      return cleanup;
    },
    off,
    // eslint-disable-next-line @typescript-eslint/unbound-method
    emit: emitter.emit,
    clear() {
      const prevSize = eventToHandlersMap.size;
      emitter.all.clear();
      eventToHandlersMap.clear();
      prevSize && onEmpty();
    },
  };
}

```
---
## File: packages/bridge/src/events/emitEvent.test.ts

```typescript
import { mockWindow } from 'test-utils';
import { expect, it, vi } from 'vitest';

import { emitEvent } from './emitEvent.js';

it('should call window.dispatchEvent with the Message event containing properties "data" property equal to { eventType, eventData } stringified and "source" property equal to window.parent', () => {
  const dispatchEvent = vi.fn();
  mockWindow({
    dispatchEvent,
    parent: 'PARENT',
  } as any);
  emitEvent('test', 'some-data');
  expect(dispatchEvent).toHaveBeenCalledOnce();
  expect(dispatchEvent.mock.calls[0][0]).toBeInstanceOf(MessageEvent);
  expect(dispatchEvent.mock.calls[0][0]).toMatchObject({
    type: 'message',
    data: '{"eventType":"test","eventData":"some-data"}',
    source: 'PARENT' as any,
  });
});

```
---
## File: packages/bridge/src/events/emitEvent.ts

```typescript
import type { EventPayload, EventWithoutPayload, EventWithPayload } from '@/events/types/index.js';

/**
 * Emits an event without payload sent from the Telegram native application like it was sent in
 * a default web environment between two iframes.
 *
 * It dispatches a new MessageEvent and expects it to be handled via
 * the `window.addEventListener('message', ...)` call, as a developer would do it to handle
 * messages sent from the parent iframe.
 * @param eventType - event name.
 */
export function emitEvent<E extends EventWithoutPayload>(eventType: E): void;

/**
 * Emits an event with payload sent from the Telegram native application like it was sent in
 * a default web environment between two iframes.
 *
 * It dispatches a new MessageEvent and expects it to be handled via
 * the `window.addEventListener('message', ...)` call, as a developer would do it to handle
 * messages sent from the parent iframe.
 * @param eventType - event name.
 * @param eventData - event payload.
 */
export function emitEvent<E extends EventWithPayload>(
  eventType: E,
  eventData: EventPayload<E>,
): void;

/**
 * Emits an unknown event sent from the Telegram native application like it was sent in a default
 * web environment between two iframes.
 *
 * It dispatches a new MessageEvent and expects it to be handled via
 * the `window.addEventListener('message', ...)` call, as a developer would do it to handle
 * messages sent from the parent iframe.
 * @param eventType - event name.
 * @param eventData - event payload.
 */
export function emitEvent<E extends string>(
  eventType: E,
  eventData: E extends EventWithoutPayload
    ? never
    : E extends EventWithPayload
      ? EventPayload<E>
      : unknown,
): void;

/**
 * Emits an event sent from the Telegram native application like it was sent in a default web
 * environment between two iframes.
 *
 * It dispatches a new MessageEvent and expects it to be handled via
 * the `window.addEventListener('message', ...)` call, as a developer would do it to handle
 * messages sent from the parent iframe.
 * @param eventType - event name.
 * @param eventData - event payload.
 */
export function emitEvent(eventType: string, eventData?: unknown): void {
  window.dispatchEvent(new MessageEvent('message', {
    data: JSON.stringify({ eventType, eventData }),
    // We specify this kind of source here in order to allow the package's "on" function to
    // capture it. The reason is this function always checks the event source and relies on
    // it to be the parent window.
    source: window.parent,
  }));
}

```
---
## File: packages/bridge/src/events/emitter.test.ts

```typescript
import { createWindow } from 'test-utils';
import { beforeEach, describe, expect, it, vi } from 'vitest';

import { resetGlobals } from '@/globals.js';

import { off, on } from './emitter.js';

const receiveEventMock = vi.fn(() => null);

function emitMiniAppsEvent(eventType: string, eventData: any) {
  (window as any).Telegram?.WebView?.receiveEvent?.(eventType, eventData);
}

function mockTelegramSDK() {
  const wnd = window as any;

  // This code repeats the same actions as described in the Telegram SDK.
  if (!wnd.Telegram) {
    wnd.Telegram = {};
  }
  wnd.Telegram.WebView = {
    someUtil: 123,
    andSomethingElse: 'wow',
    receiveEvent: receiveEventMock,
  };
  wnd.TelegramGameProxy = { receiveEvent: receiveEventMock };
  wnd.TelegramGameProxy_receiveEvent = receiveEventMock;
}

beforeEach(() => {
  resetGlobals();
  vi.restoreAllMocks();
  createWindow();
});

describe('telegram SDK connected last', () => {
  describe('on', () => {
    it('should call both listeners if the corresponding event was emitted', () => {
      const listener = vi.fn();
      on('viewport_changed', listener);
      mockTelegramSDK();

      const eventData = {
        height: 123,
        width: 321,
        is_expanded: false,
        is_state_stable: false,
      };
      emitMiniAppsEvent('viewport_changed', eventData);
      emitMiniAppsEvent('theme_changed', { theme_params: {} });

      expect(listener).toHaveBeenCalledTimes(1);
      expect(listener).toHaveBeenCalledWith(eventData);
      expect(receiveEventMock).toHaveBeenCalledTimes(2);
      expect(receiveEventMock).toHaveBeenNthCalledWith(1, 'viewport_changed', eventData);
      expect(receiveEventMock).toHaveBeenNthCalledWith(2, 'theme_changed', { theme_params: {} });
    });

    it(
      'should remove listener after being called if "once" option was passed, but leave Telegram SDKs handler working',
      () => {
        const listener = vi.fn();
        on('viewport_changed', listener, true);
        mockTelegramSDK();

        const eventData = {
          height: 123,
          width: 321,
          is_expanded: false,
          is_state_stable: false,
        };
        emitMiniAppsEvent('viewport_changed', eventData);
        emitMiniAppsEvent('viewport_changed', eventData);

        expect(listener).toHaveBeenCalledTimes(1);
        expect(receiveEventMock).toHaveBeenCalledTimes(2);
        expect(receiveEventMock).toHaveBeenNthCalledWith(1, 'viewport_changed', eventData);
        expect(receiveEventMock).toHaveBeenNthCalledWith(2, 'viewport_changed', eventData);
      },
    );

    it(
      'should remove listener if returned callback was called, but leave Telegram SDKs handler working',
      () => {
        const listener = vi.fn();
        const eventData = {
          height: 123,
          width: 321,
          is_expanded: false,
          is_state_stable: false,
        };
        const emit = () => emitMiniAppsEvent('viewport_changed', eventData);

        const off = on('viewport_changed', listener);
        mockTelegramSDK();
        emit();
        expect(listener).toHaveBeenCalledTimes(1);
        expect(receiveEventMock).toHaveBeenCalledTimes(1);
        expect(receiveEventMock).toHaveBeenNthCalledWith(1, 'viewport_changed', eventData);

        off();
        emit();
        expect(listener).toHaveBeenCalledTimes(1);
        expect(receiveEventMock).toHaveBeenCalledTimes(2);
        expect(receiveEventMock).toHaveBeenNthCalledWith(2, 'viewport_changed', eventData);
      },
    );

    it(
      'should subscribe to all events if "*" passed and also pass them to the Telegram SDK\'s handler',
      () => {
        const listener = vi.fn();
        on('*', listener);
        mockTelegramSDK();

        const eventData = {
          height: 123,
          width: 321,
          is_expanded: false,
          is_state_stable: false,
        };
        emitMiniAppsEvent('viewport_changed', eventData);
        emitMiniAppsEvent('theme_changed', { theme_params: {} });

        expect(listener).toHaveBeenCalledTimes(2);
        expect(listener).toHaveBeenNthCalledWith(
          1,
          { name: 'viewport_changed', payload: eventData },
        );
        expect(listener).toHaveBeenNthCalledWith(
          2,
          { name: 'theme_changed', payload: { theme_params: {} } },
        );
        expect(receiveEventMock).toHaveBeenCalledTimes(2);
        expect(receiveEventMock).toHaveBeenNthCalledWith(1, 'viewport_changed', eventData);
        expect(receiveEventMock).toHaveBeenNthCalledWith(2, 'theme_changed', { theme_params: {} });
      },
    );

    it('should define mini apps event listeners', () => {
      on('*', vi.fn());
      mockTelegramSDK();
      expect(window).toMatchObject({
        TelegramGameProxy_receiveEvent: expect.any(Function),
        TelegramGameProxy: { receiveEvent: expect.any(Function) },
        Telegram: { WebView: { receiveEvent: expect.any(Function) } },
      });
    });

    describe('events process', () => {
      describe.each([
        {
          event: 'viewport_changed',
          input: {
            height: 120,
            width: 300,
            is_expanded: true,
            is_state_stable: false,
          },
        },
        {
          event: 'theme_changed',
          input: {
            theme_params: {
              bg_color: '#aabbdd',
              text_color: '#113322',
              hint_color: '#132245',
              link_color: '#133322',
              button_color: '#a23135',
              button_text_color: '#aa213f',
            },
          },
        },
        {
          event: 'popup_closed',
          cases: [
            [{ button_id: 'ok' }, { button_id: 'ok' }],
            [{ button_id: null }, {}],
            [{ button_id: undefined }, {}],
            [null, {}],
            [undefined, {}],
          ],
        },
        { event: 'set_custom_style', input: '.scroll {}' },
        { event: 'qr_text_received', input: { data: 'some QR data' } },
        { event: 'main_button_pressed' },
        { event: 'back_button_pressed' },
        { event: 'settings_button_pressed' },
        { event: 'scan_qr_popup_closed' },
        {
          event: 'clipboard_text_received',
          input: { req_id: 'request id', data: 'clipboard value' },
        },
        { event: 'invoice_closed', input: { slug: '&&*Sh1j213kx', status: 'PAID' } },
        { event: 'phone_requested', input: { status: 'sent' } },
        {
          event: 'custom_method_invoked',
          cases: [
            [{ req_id: '1', result: 'My result' }],
            [{ req_id: '2', error: 'Something is wrong' }],
          ],
        },
        { event: 'write_access_requested', input: { status: 'allowed' } },
        {
          event: 'unknown_event',
          cases: [
            ['hello', 'hello'],
            [{ there: true }, { there: true }],
          ],
        },
      ])('$event', test => {
        const { event } = test;

        if ('cases' in test) {
          test.cases?.forEach(([input, expected = input], idx) => {
            it(`should properly process case ${idx}`, () => {
              const listener = vi.fn();
              on(event as any, listener);
              mockTelegramSDK();
              emitMiniAppsEvent(event, input);
              expect(listener).toHaveBeenCalledTimes(1);
              expect(listener).toHaveBeenCalledWith(expected);
              expect(receiveEventMock).toHaveBeenCalledTimes(1);
              expect(receiveEventMock).toHaveBeenCalledWith(event, input);
            });
          });
          return;
        }

        it('should properly process event', () => {
          const listener = vi.fn();
          on(event as any, listener);
          mockTelegramSDK();
          emitMiniAppsEvent(event, test.input);
          expect(listener).toHaveBeenCalledTimes(1);
          expect(listener).toHaveBeenCalledWith(test.input);
          expect(receiveEventMock).toHaveBeenCalledTimes(1);
          expect(receiveEventMock).toHaveBeenCalledWith(event, test.input);
        });
      });
    });

    it('should format theme_params if it was in int', () => {
      const listener = vi.fn();
      on('theme_changed', listener);
      mockTelegramSDK();

      // We are just testing an invalid Android client behavior here.
      const eventData = {
        theme_params: {
          accent_text_color: -10177041,
          bg_color: -14602949,
          bottom_bar_bg_color: -15393241,
          button_color: -11491093,
          button_text_color: -1,
          destructive_text_color: -1152913,
          header_bg_color: -14406343,
          hint_color: -8549479,
          link_color: -10572831,
          secondary_bg_color: -15393241,
          section_bg_color: -14866637,
          section_header_text_color: -8796932,
          section_separator_color: -15920616,
          subtitle_text_color: -8681584,
          text_color: -1,
        },
        // We are just testing an invalid Android client behavior here.
      } as any;
      emitMiniAppsEvent('theme_changed', eventData);

      expect(listener).toHaveBeenCalledTimes(1);
      expect(listener).toHaveBeenCalledWith({
        theme_params: {
          accent_text_color: '#64b5ef',
          bg_color: '#212d3b',
          bottom_bar_bg_color: '#151e27',
          button_color: '#50a8eb',
          button_text_color: '#ffffff',
          destructive_text_color: '#ee686f',
          header_bg_color: '#242d39',
          hint_color: '#7d8b99',
          link_color: '#5eabe1',
          secondary_bg_color: '#151e27',
          section_bg_color: '#1d2733',
          section_header_text_color: '#79c4fc',
          section_separator_color: '#0d1218',
          subtitle_text_color: '#7b8790',
          text_color: '#ffffff',
        },
      });
      expect(receiveEventMock).toHaveBeenCalledTimes(1);
      expect(receiveEventMock).toHaveBeenCalledWith('theme_changed', eventData);
    });
  });

  describe('off', () => {
    it('should remove listener, but leave Telegram SDK\'s handler', () => {
      const listener = vi.fn();
      const eventData = {
        height: 123,
        width: 321,
        is_expanded: false,
        is_state_stable: false,
      };
      const emit = () => emitMiniAppsEvent('viewport_changed', eventData);

      on('viewport_changed', listener);
      mockTelegramSDK();
      emit();
      expect(listener).toHaveBeenCalledTimes(1);
      expect(receiveEventMock).toHaveBeenCalledTimes(1);
      expect(receiveEventMock).toHaveBeenCalledWith('viewport_changed', eventData);

      off('viewport_changed', listener);
      emit();
      expect(listener).toHaveBeenCalledTimes(1);
      expect(receiveEventMock).toHaveBeenCalledTimes(2);
      expect(receiveEventMock).toHaveBeenNthCalledWith(2, 'viewport_changed', eventData);
    });

    it(
      'should remove mini apps event listeners when no listeners left, but leave Telegram SDK\'s handler',
      () => {
        const listener = vi.fn();
        on('*', listener);
        mockTelegramSDK();
        expect(window).toMatchObject({
          TelegramGameProxy_receiveEvent: expect.any(Function),
          TelegramGameProxy: { receiveEvent: expect.any(Function) },
          Telegram: { WebView: { receiveEvent: expect.any(Function) } },
        });
        off('*', listener);
        expect(window).toMatchObject({
          TelegramGameProxy_receiveEvent: receiveEventMock,
          TelegramGameProxy: { receiveEvent: receiveEventMock },
          Telegram: { WebView: { receiveEvent: receiveEventMock } },
        });
      },
    );
  });
});

describe('telegram SDK not connected', () => {
  describe('on', () => {
    it('should call listener if the corresponding event was emitted', () => {
      const listener = vi.fn();
      on('viewport_changed', listener);

      const eventData = {
        height: 123,
        width: 321,
        is_expanded: false,
        is_state_stable: false,
      };
      emitMiniAppsEvent('viewport_changed', eventData);
      emitMiniAppsEvent('theme_changed', { theme_params: {} });

      expect(listener).toHaveBeenCalledTimes(1);
      expect(listener).toHaveBeenCalledWith(eventData);
    });

    it('should remove listener after being called if "once" option was passed', () => {
      const listener = vi.fn();
      on('viewport_changed', listener, true);

      const eventData = {
        height: 123,
        width: 321,
        is_expanded: false,
        is_state_stable: false,
      };
      emitMiniAppsEvent('viewport_changed', eventData);
      emitMiniAppsEvent('viewport_changed', eventData);

      expect(listener).toHaveBeenCalledTimes(1);
    });

    it('should remove listener if returned callback was called', () => {
      const listener = vi.fn();
      const emit = () => emitMiniAppsEvent('viewport_changed', {
        height: 123,
        width: 321,
        is_expanded: false,
        is_state_stable: false,
      });

      const off = on('viewport_changed', listener);
      emit();
      expect(listener).toHaveBeenCalledTimes(1);

      off();
      emit();
      expect(listener).toHaveBeenCalledTimes(1);
    });

    it('should subscribe to all events if "*" passed', () => {
      const listener = vi.fn();
      on('*', listener);

      emitMiniAppsEvent('viewport_changed', {
        height: 123,
        width: 321,
        is_expanded: false,
        is_state_stable: false,
      });
      emitMiniAppsEvent('theme_changed', { theme_params: {} });

      expect(listener).toHaveBeenCalledTimes(2);
      expect(listener).toHaveBeenNthCalledWith(1, {
        name: 'viewport_changed',
        payload: {
          height: 123,
          width: 321,
          is_expanded: false,
          is_state_stable: false,
        },
      });
      expect(listener).toHaveBeenNthCalledWith(2, {
        name: 'theme_changed',
        payload: { theme_params: {} },
      });
    });

    it('should define mini apps event listeners', () => {
      createWindow();
      on('*', vi.fn());
      expect(window).toMatchObject({
        TelegramGameProxy_receiveEvent: expect.any(Function),
        TelegramGameProxy: { receiveEvent: expect.any(Function) },
        Telegram: { WebView: { receiveEvent: expect.any(Function) } },
      });
    });

    describe('events process', () => {
      describe.each([
        {
          event: 'viewport_changed',
          input: {
            height: 120,
            width: 300,
            is_expanded: true,
            is_state_stable: false,
          },
        },
        {
          event: 'theme_changed',
          input: {
            theme_params: {
              bg_color: '#aabbdd',
              text_color: '#113322',
              hint_color: '#132245',
              link_color: '#133322',
              button_color: '#a23135',
              button_text_color: '#aa213f',
            },
          },
        },
        {
          event: 'popup_closed',
          cases: [
            [{ button_id: 'ok' }, { button_id: 'ok' }],
            [{ button_id: null }, {}],
            [{ button_id: undefined }, {}],
            [null, {}],
            [undefined, {}],
          ],
        },
        { event: 'set_custom_style', input: '.scroll {}' },
        { event: 'qr_text_received', input: { data: 'some QR data' } },
        { event: 'main_button_pressed' },
        { event: 'back_button_pressed' },
        { event: 'settings_button_pressed' },
        { event: 'scan_qr_popup_closed' },
        {
          event: 'clipboard_text_received',
          input: { req_id: 'request id', data: 'clipboard value' },
        },
        { event: 'invoice_closed', input: { slug: '&&*Sh1j213kx', status: 'PAID' } },
        { event: 'phone_requested', input: { status: 'sent' } },
        {
          event: 'custom_method_invoked',
          cases: [
            [{ req_id: '1', result: 'My result' }],
            [{ req_id: '2', error: 'Something is wrong' }],
          ],
        },
        { event: 'write_access_requested', input: { status: 'allowed' } },
        {
          event: 'unknown_event',
          cases: [
            ['hello', 'hello'],
            [{ there: true }, { there: true }],
          ],
        },
      ])('$event', test => {
        const { event } = test;

        if ('cases' in test) {
          test.cases?.forEach(([input, expected = input], idx) => {
            it(`should properly process case ${idx}`, () => {
              const listener = vi.fn();
              on(event as any, listener);
              emitMiniAppsEvent(event, input);
              expect(listener).toHaveBeenCalledTimes(1);
              expect(listener).toHaveBeenCalledWith(expected);
            });
          });
          return;
        }

        it('should properly process event', () => {
          const listener = vi.fn();
          on(event as any, listener);
          emitMiniAppsEvent(event, test.input);
          expect(listener).toHaveBeenCalledTimes(1);
          expect(listener).toHaveBeenCalledWith(test.input);
        });
      });
    });

    it('should format theme_params if it was in int', () => {
      const listener = vi.fn();
      on('theme_changed', listener);

      emitMiniAppsEvent('theme_changed', {
        theme_params: {
          accent_text_color: -10177041,
          bg_color: -14602949,
          bottom_bar_bg_color: -15393241,
          button_color: -11491093,
          button_text_color: -1,
          destructive_text_color: -1152913,
          header_bg_color: -14406343,
          hint_color: -8549479,
          link_color: -10572831,
          secondary_bg_color: -15393241,
          section_bg_color: -14866637,
          section_header_text_color: -8796932,
          section_separator_color: -15920616,
          subtitle_text_color: -8681584,
          text_color: -1,
        },
        // We are just testing an invalid Android client behavior here.
      } as any);

      expect(listener).toHaveBeenCalledTimes(1);
      expect(listener).toHaveBeenCalledWith({
        theme_params: {
          accent_text_color: '#64b5ef',
          bg_color: '#212d3b',
          bottom_bar_bg_color: '#151e27',
          button_color: '#50a8eb',
          button_text_color: '#ffffff',
          destructive_text_color: '#ee686f',
          header_bg_color: '#242d39',
          hint_color: '#7d8b99',
          link_color: '#5eabe1',
          secondary_bg_color: '#151e27',
          section_bg_color: '#1d2733',
          section_header_text_color: '#79c4fc',
          section_separator_color: '#0d1218',
          subtitle_text_color: '#7b8790',
          text_color: '#ffffff',
        },
      });
    });
  });

  describe('off', () => {
    it('should remove listener', () => {
      const listener = vi.fn();
      const emit = () => emitMiniAppsEvent('viewport_changed', {
        height: 123,
        width: 321,
        is_expanded: false,
        is_state_stable: false,
      });

      on('viewport_changed', listener);
      emit();
      expect(listener).toHaveBeenCalledTimes(1);

      off('viewport_changed', listener);
      emit();
      expect(listener).toHaveBeenCalledTimes(1);
    });

    it('should remove mini apps event listeners when no listeners left', () => {
      createWindow();
      const listener = vi.fn();
      on('*', listener);
      expect(window).toMatchObject({
        TelegramGameProxy_receiveEvent: expect.any(Function),
        TelegramGameProxy: { receiveEvent: expect.any(Function) },
        Telegram: { WebView: { receiveEvent: expect.any(Function) } },
      });
      off('*', listener);
      expect(window).not.toHaveProperty('TelegramGameProxy_receiveEvent');
      expect(window).not.toHaveProperty('TelegramGameProxy');
      expect(window).not.toHaveProperty('Telegram');
    });
  });
});

```
---
## File: packages/bridge/src/events/emitter.ts

```typescript
import { miniAppsMessage, pipeJsonToSchema, themeParams } from '@tma.js/transformers';
import {
  boolean,
  looseObject,
  nullish,
  number,
  optional,
  parse,
  string,
  unknown,
  type BaseSchema,
} from 'valibot';

import { createEmitter } from '@/events/createEmitter.js';
import { emitEvent } from '@/events/emitEvent.js';
import type { EventName, EventPayload, Events } from '@/events/types/index.js';
import { logger } from '@/globals.js';
import { defineFnComposer, defineMergeableProperty } from '@/obj-prop-helpers.js';

/**
 * Transformers for problematic Mini Apps events.
 */
const transformers = {
  clipboard_text_received: looseObject({
    req_id: string(),
    data: nullish(string()),
  }),
  custom_method_invoked: looseObject({
    req_id: string(),
    result: optional(unknown()),
    error: optional(string()),
  }),
  popup_closed: nullish(
    looseObject({ button_id: nullish(string(), () => undefined) }),
    {},
  ),
  viewport_changed: nullish(
    looseObject({
      height: number(),
      width: nullish(number(), () => window.innerWidth),
      is_state_stable: boolean(),
      is_expanded: boolean(),
    }),
    // TODO: At the moment, macOS has a bug with the invalid event payload - it is always equal to
    //  null. Leaving this default value until the bug is fixed.
    () => ({
      height: window.innerHeight,
      is_state_stable: true,
      is_expanded: true,
    }),
  ),
  theme_changed: looseObject({
    theme_params: themeParams(),
  }),
} as const satisfies { [E in EventName]?: BaseSchema<unknown, EventPayload<E>, any> };

function windowMessageListener(event: MessageEvent): void {
  // Ignore non-parent window messages.
  if (event.source !== window.parent) {
    return;
  }

  // Parse incoming event data.
  let message: { eventType: string; eventData?: unknown };
  try {
    message = parse(pipeJsonToSchema(miniAppsMessage()), event.data);
  } catch {
    // We ignore incorrect messages as they could be generated by any other code.
    return;
  }

  const { eventType, eventData } = message;
  const schema = transformers[eventType as keyof typeof transformers];

  let data: unknown;
  try {
    data = schema ? parse(schema, eventData) : eventData;
  } catch (cause) {
    return logger().forceError(
      [
        `An error occurred processing the "${eventType}" event from the Telegram application.`,
        'Please, file an issue here:',
        'https://github.com/Telegram-Mini-Apps/tma.js/issues/new/choose',
      ].join('\n'),
      message,
      cause,
    );
  }
  emit(eventType as any, data);
}

export const {
  on,
  off,
  emit,
  clear: offAll,
} = createEmitter<Events>(
  () => {
    const wnd = window as any;

    // Define all functions responsible for receiving an event from the Telegram client.
    // All these "ports" should narrow the communication way to a single specific one - the way
    // accepted by the web version of Telegram between iframes.
    //
    // Here we consider 2 cases:
    // 1. When the Telegram SDK is already connected. In this case the Telegram SDK already
    // installed its own ports, and we should rewire them. The cleanup function should also work
    // properly in this context, removing @tma.js/bridge handler only, not
    // the Telegram SDK one.
    // 2. When the Telegram SDK is not connected, but probably will be. We know, that
    // the Telegram SDK is going to overwrite our own handlers. Due to this reason, we should
    // protect them from being overwritten, but still support handlers defined by the Telegram SDK.

    // TelegramGameProxy.receiveEvent
    !wnd.TelegramGameProxy && (wnd.TelegramGameProxy = {});
    defineFnComposer(wnd.TelegramGameProxy, 'receiveEvent', emitEvent);
    defineMergeableProperty(wnd, 'TelegramGameProxy');

    // Telegram.WebView.receiveEvent
    !wnd.Telegram && (wnd.Telegram = {});
    !wnd.Telegram.WebView && (wnd.Telegram.WebView = {});
    defineFnComposer(wnd.Telegram.WebView, 'receiveEvent', emitEvent);
    defineMergeableProperty(wnd.Telegram, 'WebView');

    // TelegramGameProxy_receiveEvent
    defineFnComposer(wnd, 'TelegramGameProxy_receiveEvent', emitEvent);

    // Add a listener handling events sent from the Telegram web application and also events
    // generated by the local emitEvent function.
    // This handler should emit a new event using the library event emitter.
    window.addEventListener('message', windowMessageListener);
  },
  () => {
    [
      ['TelegramGameProxy_receiveEvent'],
      ['TelegramGameProxy', 'receiveEvent'],
      ['Telegram', 'WebView', 'receiveEvent'],
    ].forEach(path => {
      const wnd = window as any;

      // A tuple, where the first value is the receiveEvent function owner, and the second
      // value is the receiveEvent itself.
      let cursor: [obj: any, receieveEvent: any] = [undefined, wnd];
      for (const item of path) {
        cursor = [cursor[1], cursor[1][item]];
        if (!cursor[1]) {
          return;
        }
      }
      const [receiveEventOwner, receiveEvent] = cursor;
      if ('unwrap' in receiveEvent) {
        receiveEvent.unwrap();
        if (
          receiveEventOwner
          && receiveEventOwner !== wnd
          && !Object.keys(receiveEventOwner).length
        ) {
          delete wnd[path[0]];
        }
      }
    });
    window.removeEventListener('message', windowMessageListener);
  },
);

```
---
## File: packages/bridge/src/methods/types/custom-method.ts

```typescript
interface CreateInvokeCustomMethodParams<M extends string, Params extends object> {
  /**
   * Unique request identifier.
   */
  req_id: string;
  /**
   * Method name.
   */
  method: M;
  /**
   * Method specific parameters.
   */
  params: Params;
}

export interface CustomMethodsParams {
  /**
   * Deletes storage values using their keys.
   */
  deleteStorageValues: { keys: string | string[] };
  /**
   * Returns the current server time.
   */
  getCurrentTime: {};
  /**
   * Gets the current user contact in case, the mini app has access to it.
   */
  getRequestedContact: {};
  /**
   * Gets all registered storage keys.
   */
  getStorageKeys: {};
  /**
   * Gets storage values using their keys.
   */
  getStorageValues: { keys: string | string[] };
  /**
   * Saves a value using specified key in the storage.
   */
  saveStorageValue: { key: string; value: string };
}

/**
 * Known custom method name.
 */
export type CustomMethodName = keyof CustomMethodsParams;

/**
 * Custom method parameters.
 */
export type CustomMethodParams<M extends CustomMethodName> = CustomMethodsParams[M];

export type AnyInvokeCustomMethodParams =
  | CreateInvokeCustomMethodParams<string, any>
  | {
    [M in CustomMethodName]: CreateInvokeCustomMethodParams<M, CustomMethodParams<M>>
  }[CustomMethodName];

```
---
## File: packages/bridge/src/methods/types/haptic-feedback.ts

```typescript
/**
 * Generic type which creates new types of haptic feedback.
 */
type CreateHapticFeedbackParams<T extends string, P> = { type: T } & P;

/**
 * Style of impact occurred haptic event.
 * - `light`, indicates a collision between small or lightweight UI objects,
 * - `medium`, indicates a collision between medium-sized or medium-weight UI objects,
 * - `heavy`, indicates a collision between large or heavyweight UI objects,
 * - `rigid`, indicates a collision between hard or inflexible UI objects,
 * - `soft`, indicates a collision between soft or flexible UI objects.
 */
export type ImpactHapticFeedbackStyle =
  | 'light'
  | 'medium'
  | 'heavy'
  | 'rigid'
  | 'soft';

/**
 * Type of notification occurred type event.
 * - `error`, indicates that a task or action has failed,
 * - `success`, indicates that a task or action has completed successfully,
 * - `warning`, indicates that a task or action produced a warning.
 */
export type NotificationHapticFeedbackType = 'error' | 'success' | 'warning';

/**
 * `impactOccurred` haptic feedback.
 */
export type ImpactHapticFeedbackParams = CreateHapticFeedbackParams<'impact', {
  impact_style: ImpactHapticFeedbackStyle;
}>;

/**
 * `notificationOccurred` haptic feedback.
 */
export type NotificationHapticFeedbackParams = CreateHapticFeedbackParams<'notification', {
  notification_type: NotificationHapticFeedbackType;
}>;

/**
 * `selectionChanged` haptic feedback.
 */
export type SelectionHapticFeedbackParams = CreateHapticFeedbackParams<'selection_change', {}>;

export type AnyHapticFeedbackParams =
  | ImpactHapticFeedbackParams
  | NotificationHapticFeedbackParams
  | SelectionHapticFeedbackParams;

```
---
## File: packages/bridge/src/methods/types/index.ts

```typescript
export type * from './custom-method.js';
export type * from './haptic-feedback.js';
export type * from './methods.js';
export type * from './misc.js';
export type * from './popup.js';
export type { CreateMethodParams } from './utils.js';

```
---
## File: packages/bridge/src/methods/types/methods.ts

```typescript
import type { If, IsNever } from '@tma.js/toolkit';
import type { RGB } from '@tma.js/types';

import type { AnyInvokeCustomMethodParams } from './custom-method.js';
import type { AnyHapticFeedbackParams } from './haptic-feedback.js';
import {
  BackgroundColor,
  BottomBarColor,
  HeaderColorKey,
  OpenLinkBrowser,
  SecondaryButtonPosition,
  SwitchInlineQueryChatType,
} from './misc.js';
import type { PopupParams } from './popup.js';
import type { CreateMethodParams } from './utils.js';

type WithReqId<T = {}> = T & {
  /**
   * Unique request identifier. Should be any unique string to handle the generated event
   * appropriately.
   */
  req_id: string;
};

interface ButtonParams {
  /**
   * Should the button shine.
   * @since 7.10
   */
  has_shine_effect?: boolean;
  /**
   * Should the button be displayed.
   */
  is_visible?: boolean;
  /**
   * Should the button be enabled.
   */
  is_active?: boolean;
  /**
   * Should loader inside the button be displayed. Use this property in case, some
   * operation takes time. This loader will make user notified about it.
   */
  is_progress_visible?: boolean;
  /**
   * Text inside the button.
   */
  text?: string;
  /**
   * The button background color in `#RRGGBB` format.
   */
  color?: RGB;
  /**
   * The Main Button text color in `#RRGGBB` format.
   */
  text_color?: RGB;
}

/**
 * Describes a list of events and their parameters that could be posted.
 * @see https://docs.telegram-mini-apps.com/platform/methods
 */
export interface Methods {
  /**
   * Notifies parent iframe about the current frame is ready. This method is only used in the Web
   * version of Telegram. As a result, Mini App will receive `set_custom_style` event.
   * @see https://docs.telegram-mini-apps.com/platform/methods#iframe-ready
   */
  iframe_ready: CreateMethodParams<{
    /**
     * True, if the current Mini App supports native reloading.
     */
    reload_supported?: boolean;
  } | undefined>;
  /**
   * Notifies parent iframe about the current iframe is going to reload.
   * @see https://docs.telegram-mini-apps.com/platform/methods#iframe-will-reload
   */
  iframe_will_reload: CreateMethodParams;
  /**
   * Prompts the user to add the Mini App to the home screen. Note that if the device cannot
   * determine the installation status, the event may not be received even if the icon has
   * been added.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-add-to-home-screen
   */
  web_app_add_to_home_screen: CreateMethodParams;
  /**
   * Emitted by bot mini apps to ask the client to initialize the biometric authentication manager
   * object for the current bot, emitting a `biometry_info_received` event on completion.
   *
   * This request should just initialize the client-side state, i.e. by checking if biometric
   * authentication is even available or not, it should not ask the user anything.
   * @since v7.2
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-biometry-get-info
   */
  web_app_biometry_get_info: CreateMethodParams;
  /**
   * Opens the biometric access settings for bots. Useful when you need to request biometrics
   * access to users who haven't granted it yet.
   *
   * _Note that this method can be called only in response to user interaction with the Mini
   * App interface (e.g. a click inside the Mini App or on the main button)_.
   * @since v7.2
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-biometry-open-settings
   */
  web_app_biometry_open_settings: CreateMethodParams;
  /**
   * Emitted by bot mini apps to ask the user permission to use biometric authentication,
   * emitting a `biometry_info_received` event on completion.
   *
   * This request should not actually prompt biometric authentication, it should just ask the
   * user permission to use them, and a popup should be shown only if the user hasn't already
   * allowed or denied the usage of biometric authentication for the bot associated with the
   * mini app.
   * @since v7.2
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-biometry-request-access
   */
  web_app_biometry_request_access: CreateMethodParams<{
    /**
     * Reason to request biometry access. Should be at least 1 symbol length, but not
     * more than 128 symbols.
     */
    reason?: string;
  }>;
  /**
   * Attempts to authenticate a user using biometrics and fetch a previously stored
   * secure token, emitting the `biometry_auth_requested` event on completion, containing either
   * an error, or a decrypted biometric token (or an empty string if no token was configured yet).
   *
   * Should only be used if the `token_saved` field of the `biometry_info_received` event object
   * is equal to true.
   *
   * If a user has previously disallowed the bot from using biometric authentication, this
   * request will immediately fail, emitting an appropriate `biometry_auth_requested` event.
   * @since v7.2
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-biometry-request-auth
   */
  web_app_biometry_request_auth: CreateMethodParams<{
    /**
     * Reason to request biometry data. Should be at least 1 symbol length, but not more than
     * 128 symbols.
     */
    reason?: string;
  }>;
  /**
   * Attempts to authenticate using biometrics and store the biometric token
   * securely on a device, emitting a `biometry_token_updated` event on completion.
   *
   * This token will be safely stored by the Telegram client and will be associated with the bot
   * that owns the mini app.
   *
   * If the user has previously disallowed the bot from using biometric authentication, this
   * request will immediately fail, emitting an appropriate biometry_token_updated event.
   * @since v7.2
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-biometry-update-token
   */
  web_app_biometry_update_token: CreateMethodParams<{
    /**
     * Optional string field, containing the reason why the bot is asking to authenticate using
     * biometrics (1-128 chars, used in the prompt).
     */
    reason?: string;
    /**
     * The new token (string, 0-1024 chars), or an empty string to remove it.
     */
    token: string;
  }>;
  /**
   * Sends a request to the native Telegram application to check if the current mini
   * application is added to the device's home screen.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-check-home-screen
   */
  web_app_check_home_screen: CreateMethodParams;
  /**
   * Requests location-related functionality availability state.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-check-location
   */
  web_app_check_location: CreateMethodParams;
  /**
   * Closes Mini App.
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-close
   */
  web_app_close: CreateMethodParams<{
    /**
     * Should the client return to the previous activity.
     * @since v7.6
     */
    return_back?: boolean;
  } | undefined, 'return_back'>;
  /**
   * Closes a QR scanner. The Telegram application creates `scan_qr_popup_closed` event.
   * @since v6.4
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-close-scan-qr-popup
   */
  web_app_close_scan_qr_popup: CreateMethodParams;
  /**
   * Sends data to the bot. When this method is called, a service message is sent to the bot
   * containing the data of the length up to 4096 bytes. Then, Mini App will be closed.
   *
   * To get more information, take a look at `web_app_data` field in the
   * class [Message](https://core.telegram.org/bots/api#message).
   *
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-data-send
   */
  web_app_data_send: CreateMethodParams<{
    /**
     * Data to send to a bot. Should not have size of more than 4096 bytes.
     */
    data: string;
  }>;
  /**
   * Clears all keys previously stored by the bot in the device's local storage.
   * @since 9.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-device-storage-clear
   */
  web_app_device_storage_clear: CreateMethodParams<WithReqId>;
  /**
   * Receives a value from the device's local storage using the specified key.
   * @since 9.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-device-storage-get-key
   */
  web_app_device_storage_get_key: CreateMethodParams<WithReqId<{
    /**
     * A key name to retrieve.
     */
    key: string;
  }>>;
  /**
   * Stores a value in the device's local storage using the specified key.
   * @since 9.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-device-storage-save-key
   */
  web_app_device_storage_save_key: CreateMethodParams<WithReqId<{
    /**
     * A key to use to store the value.
     */
    key: string;
    /**
     * A value to store for the specified key. Passing `null` will lead to the key removal.
     */
    value: string | null;
  }>>;
  /**
   * Exits fullscreen mode for miniapp.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-exit-fullscreen
   */
  web_app_exit_fullscreen: CreateMethodParams;
  /**
   * Expands the Mini App.
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-expand
   */
  web_app_expand: CreateMethodParams;
  /**
   * Hides the on-screen keyboard, if it is currently visible. Does nothing if the keyboard is
   * not active.
   * @since v9.1
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-hide-keyboard
   */
  web_app_hide_keyboard: CreateMethodParams;
  /**
   * Invokes custom method.
   * @since v6.9
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-invoke-custom-method
   */
  web_app_invoke_custom_method: CreateMethodParams<AnyInvokeCustomMethodParams>;
  /**
   * Opens an invoice by its specified slug. More information about invoices in
   * this [documentation](https://core.telegram.org/bots/payments).
   * @since v6.1
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-open-invoice
   */
  web_app_open_invoice: CreateMethodParams<{
    /**
     * Invoice unique identifier.
     */
    slug: string;
  }>;
  /**
   * Opens a link in a default browser. The Mini App will not be closed.
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-open-link
   */
  web_app_open_link: CreateMethodParams<{
    /**
     * URL to be opened by Telegram application. Should be a full path with `https` protocol.
     */
    url: string;
    /**
     * Link will be opened in Instant View mode if possible.
     * @since v6.4
     * @see https://instantview.telegram.org/
     */
    try_instant_view?: boolean;
    /**
     * A preferred browser to open the link in.
     * @since v7.6
     */
    try_browser?: OpenLinkBrowser;
  }, 'try_instant_view' | 'try_browser'>;
  /**
   * Opens the location access settings for bots. Useful when you need to request location access
   * from users who haven't granted it yet.
   *
   * Note that this method can be called only in response to user interaction with the Mini App
   * interface (e.g., a click inside the Mini App or on the main button).
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-open-location-settings
   */
  web_app_open_location_settings: CreateMethodParams;
  /**
   * Opens a new popup. When a user closes the popup, Telegram creates the `popup_closed` event.
   * @since v6.2
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-open-popup
   */
  web_app_open_popup: CreateMethodParams<PopupParams>;
  /**
   * Opens a QR scanner. When the scanner was closed, the Telegram application creates
   * the `scan_qr_popup_closed` event. When the scanner reads QR, Telegram creates the
   * `qr_text_received` event.
   * @since v6.4
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-open-scan-qr-popup
   */
  web_app_open_scan_qr_popup: CreateMethodParams<{
    /**
     * Text to be displayed in the QR scanner.
     */
    text?: string;
  }>;
  /**
   * Opens the Telegram link by its pathname and query parameters. The link will be opened in the
   * Telegram app, Mini App will be closed.
   * @since v6.1
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-open-tg-link
   */
  web_app_open_tg_link: CreateMethodParams<{
    /**
     * Should be a value taken from the link of this format: `https://t.me/{path_full}`. Can
     * additionally contain query parameters.
     */
    path_full: string;
  }>;
  /**
   * Reads text from the clipboard. The method accepts a request identifier which is used to
   * appropriately retrieve the method execution result from the `clipboard_text_received` event.
   * @since v6.4
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-read-text-from-clipboard
   */
  web_app_read_text_from_clipboard: CreateMethodParams<WithReqId>;
  /**
   * Notifies Telegram about current application is ready to be shown. This method will make
   * Telegram to remove application loader and display Mini App.
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-ready
   */
  web_app_ready: CreateMethodParams;
  /**
   * Requests content safe area of the user's phone.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-request-content-safe-area
   */
  web_app_request_content_safe_area: CreateMethodParams;
  /**
   * Shows a native popup requesting permission for the bot to manage user's emoji status.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-request-emoji-status-access
   */
  web_app_request_emoji_status_access: CreateMethodParams;
  /**
   * Displays a native popup prompting the user to download a file.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-request-file-download
   */
  web_app_request_file_download: CreateMethodParams<{
    /**
     * The HTTPS URL of the file to be downloaded.
     */
    url: string;
    /**
     * The suggested name for the downloaded file.
     */
    file_name: string;
  }>;
  /**
   * Requests to open the mini app in fullscreen.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-request-fullscreen
   */
  web_app_request_fullscreen: CreateMethodParams;
  /**
   * Requests location data.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-request-location
   */
  web_app_request_location: CreateMethodParams;
  /**
   * Requests access to current user's phone.
   * @since v6.9
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-request-phone
   */
  web_app_request_phone: CreateMethodParams;
  /**
   * Requests safe area of the user's phone.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-request-safe-area
   */
  web_app_request_safe_area: CreateMethodParams;
  /**
   * Requests current theme from Telegram. As a result, Telegram will create `theme_changed` event.
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-request-theme
   */
  web_app_request_theme: CreateMethodParams;
  /**
   * Requests current viewport information from Telegram. As a result, Telegram will create
   * `viewport_changed` event.
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-request-viewport
   */
  web_app_request_viewport: CreateMethodParams;
  /**
   * Requests write message access to the current user.
   * @since v6.9
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-rqeuest-write-access
   */
  web_app_request_write_access: CreateMethodParams;
  /**
   * Clears all keys previously stored by the bot in the device's secure storage.
   * @since 9.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-secure-storage-clear
   */
  web_app_secure_storage_clear: CreateMethodParams<WithReqId>;
  /**
   * Receives a value from the device's secure storage using the specified key.
   * @since 9.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-secure-storage-get-key
   */
  web_app_secure_storage_get_key: CreateMethodParams<WithReqId<{
    /**
     * A key to use to store the value.
     */
    key: string;
  }>>;
  /**
   * Attempts to restore a key that previously existed on the current device. When called, the user
   * will be asked for permission to restore the value.
   * @since 9.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-secure-storage-restore-key
   */
  web_app_secure_storage_restore_key: CreateMethodParams<WithReqId<{
    /**
     * A key to use to restore the value.
     */
    key: string;
  }>>;
  /**
   * Stores a value in the device's secure storage using the specified key.
   * @since 9.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-secure-storage-save-key
   */
  web_app_secure_storage_save_key: CreateMethodParams<WithReqId<{
    /**
     * A key to use to store the value.
     */
    key: string;
    /**
     * A value to store for the specified key. Passing `null` will lead to the key removal.
     */
    value: string | null;
  }>>;
  /**
   * Opens a dialog allowing the user to share a message provided by the bot.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-send-prepared-message
   */
  web_app_send_prepared_message: CreateMethodParams<{
    /**
     * Identifier of the message
     * ([PreparedInlineMessage](https://core.telegram.org/bots/api#preparedinlinemessage))
     * previously obtained via the Bot API method
     * [savePreparedInlineMessage](https://core.telegram.org/bots/api#savepreparedinlinemessage).
     */
    id: string;
  }>;
  /**
   * Updates the Mini App background color.
   * @since v6.1
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-set-background-color
   */
  web_app_set_background_color: CreateMethodParams<{
    /**
     * Color to set.
     */
    color: BackgroundColor;
  }>;
  /**
   * Updates the mini app bottom bar background color.
   * @since v7.10
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-set-bottom-bar-color
   */
  web_app_set_bottom_bar_color: CreateMethodParams<{
    /**
     * Color to set.
     */
    color: BottomBarColor;
  }>;
  /**
   * Opens a dialog allowing the user to set the specified custom emoji as their status.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-set-emoji-status
   */
  web_app_set_emoji_status: CreateMethodParams<{
    /**
     * Custom emoji identifier to set.
     */
    custom_emoji_id: string;
    /**
     * The status expiration time in seconds.
     */
    duration?: number;
  }>;
  /**
   * Updates the Mini App header color.
   * @since v6.1
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-set-header-color
   */
  web_app_set_header_color: CreateMethodParams<
    | {
    /**
     * The Mini App header color key.
     */
      color_key: HeaderColorKey;
    }
    | {
    /**
     * Color in RGB format.
     * @since v6.9
     */
      color: RGB;
    }, 'color'>;
  /**
   * Updates the Back Button settings.
   * @since v6.1
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-setup-back-button
   */
  web_app_setup_back_button: CreateMethodParams<{
    /**
     * Should the Back Button be visible.
     */
    is_visible: boolean;
  }>;
  /**
   * Updates current closing behavior.
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-setup-closing-behavior
   */
  web_app_setup_closing_behavior: CreateMethodParams<{
    /**
     * Will user be prompted in case, an application is going to be closed.
     */
    need_confirmation: boolean;
  }>;

  /**
   * Updates the Main Button settings.
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-setup-main-button
   */
  web_app_setup_main_button: CreateMethodParams<ButtonParams, 'has_shine_effect'>;

  /**
   * Updates the secondary button settings.
   * @since v7.10
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-setup-secondary-button
   */
  web_app_setup_secondary_button: CreateMethodParams<ButtonParams & {
    /**
     * Position of the secondary button. It applies only if both the main and secondary buttons
     * are visible.
     *
     * Supported values:
     * - `left`, displayed to the left of the main button.
     * - `right`, displayed to the right of the main button.
     * - `top`, displayed above the main button.
     * - `bottom`, displayed below the main button.
     */
    position?: SecondaryButtonPosition;
  }>;

  /**
   * Updates the current state of the Settings Button.
   * @since v6.10
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-setup-settings-button
   */
  web_app_setup_settings_button: CreateMethodParams<{
    /**
     * Should the Settings Button be displayed.
     */
    is_visible: boolean;
  }>;
  /**
   * Changes swipe behavior.
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-setup-swipe-behavior
   * @since v7.7
   */
  web_app_setup_swipe_behavior: CreateMethodParams<{
    allow_vertical_swipe: boolean;
  }>;

  /**
   * A method that opens the native story editor.
   * @since v7.8
   */
  web_app_share_to_story: CreateMethodParams<{
    /**
     * A media URL which will be used as a background for a created story.
     */
    media_url: string;
    /**
     * The caption to be added to the media.
     * 0-200 characters for regular users and 0-2048 characters for premium subscribers.
     * @see https://telegram.org/faq_premium#telegram-premium
     */
    text?: string;
    /**
     * An object that describes a widget link to be included in the story.
     * Note that only premium subscribers can post stories with links.
     * @see https://telegram.org/faq_premium#telegram-premium
     */
    widget_link?: {
      /**
       * The URL to be included in the story.
       */
      url: string;
      /**
       * The name to be displayed for the widget link, 0-48 characters.
       */
      name?: string;
    };
  }>;
  /**
   * Starts tracking accelerometer data.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-start-accelerometer
   */
  web_app_start_accelerometer: CreateMethodParams<{
    /**
     * The refresh rate in milliseconds, with acceptable values ranging from 20 to 1000.
     * Note that refresh_rate may not be supported on all platforms, so the actual tracking
     * frequency may differ from the specified value.
     */
    refresh_rate: number;
  }>;
  /**
   * Starts tracking device orientation data.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-start-device-orientation
   */
  web_app_start_device_orientation: CreateMethodParams<{
    /**
     * The refresh rate in milliseconds, with acceptable values ranging from 20 to 1000.
     * Note that refresh_rate may not be supported on all platforms, so the actual tracking
     * frequency may differ from the specified value.
     */
    refresh_rate: number;
    /**
     * Pass true to receive absolute orientation data, allowing you to determine the device's
     * attitude relative to magnetic north. Use this option if implementing features like a
     * compass in your app. If relative data is sufficient, pass false.
     *
     * Keep in mind that some devices may not support absolute orientation data. In such cases,
     * you will receive relative data even if need_absolute=true is passed.
     */
    need_absolute?: boolean;
  }>;

  /**
   * Starts tracking gyroscope data.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-start-gyroscope
   */
  web_app_start_gyroscope: CreateMethodParams<{
    /**
     * The refresh rate in milliseconds, with acceptable values ranging from 20 to 1000.
     * Note that refresh_rate may not be supported on all platforms, so the actual tracking
     * frequency may differ from the specified value.
     */
    refresh_rate: number;
  }>;
  /**
   * Stops tracking accelerometer data.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-stop-accelerometer
   */
  web_app_stop_accelerometer: CreateMethodParams;
  /**
   * Stops tracking device orientation data.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-stop-device-orientation
   */
  web_app_stop_device_orientation: CreateMethodParams;

  /**
   * Stops tracking gyroscope data.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-stop-gyroscope
   */
  web_app_stop_gyroscope: CreateMethodParams;
  /**
   * Inserts the bot's username and the specified inline query in the current chat's input field.
   * Query may be empty, in which case only the bot's username will be inserted. The client prompts
   * the user to choose a specific chat, then opens that chat and inserts the bot's username and
   * the specified inline query in the input field.
   * @since v6.7
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-switch-inline-query
   */
  web_app_switch_inline_query: CreateMethodParams<{
    /**
     * Text which should be inserted in the input after the current bot name. Max length is
     * 256 symbols.
     */
    query: string;
    /**
     * List of chat types which could be chosen to send the message. Could be empty list.
     */
    chat_types: SwitchInlineQueryChatType[];
  }>;
  /**
   * Locks the Mini Appâ€™s orientation to its current mode (either portrait or landscape). Once
   * locked, the orientation remains fixed, regardless of device rotation. This is useful if a
   * stable orientation is needed during specific interactions.
   * @since v8.0
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-toggle-orientation-lock
   */
  web_app_toggle_orientation_lock: CreateMethodParams<{ locked: boolean }>;
  /**
   * Generates haptic feedback event.
   * @since v6.1
   * @see https://docs.telegram-mini-apps.com/platform/methods#web-app-trigger-haptic-feedback
   */
  web_app_trigger_haptic_feedback: CreateMethodParams<AnyHapticFeedbackParams>;
}

/**
 * Mini Apps method name.
 */
export type MethodName = keyof Methods;

/**
 * Parameters of the specified Mini Apps method.
 */
export type MethodParams<M extends MethodName> = Methods[M]['params'];

/**
 * Methods with optional parameters.
 */
export type MethodNameWithOptionalParams = {
  [M in MethodName]: undefined extends MethodParams<M>
    ? M
    : never;
}[MethodName];

/**
 * Methods without parameters.
 */
export type MethodNameWithoutParams = {
  [M in MethodName]: If<IsNever<MethodParams<M>>, M, never>;
}[MethodName];

/**
 * Methods with parameters.
 */
export type MethodNameWithRequiredParams = Exclude<
  MethodName,
  MethodNameWithoutParams | MethodNameWithOptionalParams
>;

/**
 * Method names which have versioned params.
 */
export type MethodNameWithVersionedParams = {
  [M in MethodName]: If<IsNever<Methods[M]['versionedParams']>, never, M>;
}[MethodName];

/**
 * Method parameters which appear only in the specific Telegram Mini Apps version.
 */
export type MethodVersionedParams<M extends MethodNameWithVersionedParams> =
  Methods[M]['versionedParams'];

```
---
## File: packages/bridge/src/methods/types/misc.ts

```typescript
import type { RGB } from '@tma.js/types';

type KnownColorKey = 'bg_color' | 'secondary_bg_color';

/**
 * Color key which could be used to update header color.
 */
export type HeaderColorKey = KnownColorKey;

/**
 * Color key which could be used to update Mini App background color.
 */
export type BackgroundColor = RGB;

/**
 * Color key which could be used to update bottom bar background color.
 */
export type BottomBarColor = RGB;

/**
 * Position of the secondary button related to the main one.
 */
export type SecondaryButtonPosition = 'left' | 'right' | 'top' | 'bottom';

/**
 * Values expected by the `web_app_open_link.try_browser` option.
 */
export type OpenLinkBrowser =
  | 'google-chrome'
  | 'chrome'
  | 'mozilla-firefox'
  | 'firefox'
  | 'microsoft-edge'
  | 'edge'
  | 'opera'
  | 'opera-mini'
  | 'brave'
  | 'brave-browser'
  | 'duckduckgo'
  | 'duckduckgo-browser'
  | 'samsung'
  | 'samsung-browser'
  | 'vivaldi'
  | 'vivaldi-browser'
  | 'kiwi'
  | 'kiwi-browser'
  | 'uc'
  | 'uc-browser'
  | 'tor'
  | 'tor-browser';

/**
 * Chat type which could be used when calling `web_app_switch_inline_query` method.
 */
export type SwitchInlineQueryChatType = 'users' | 'bots' | 'groups' | 'channels';

```
---
## File: packages/bridge/src/methods/types/popup.ts

```typescript
/**
 * Describes the native popup.
 */
export interface PopupParams {
  /**
   * The text to be displayed in the popup title, 0-64 characters.
   */
  title: string;
  /**
   * The message to be displayed in the body of the popup, 1-256 characters.
   */
  message: string;
  /**
   * List of buttons to be displayed in the popup, 1-3 buttons.
   */
  buttons: PopupButton[];
}

/**
 * Describes the native popup button.
 * @see https://docs.telegram-mini-apps.com/platform/methods#popupbutton
 */
export type PopupButton = {
  /**
   * Identifier of the button, 0-64 characters.
   */
  id: string;
} & ({
  /**
   * Type of the button:
   * - `default`, a button with the default style;
   * - `destructive`, a button with a style that indicates a destructive
   * action (e.g. "Remove", "Delete", etc.).
   *
   * @default "default"
   */
  type?: 'default' | 'destructive';
  /**
   * The text to be displayed on the button, 0-64 characters.
   */
  text: string;
} | {
  /**
   * Type of the button:
   * - `ok`, a button with the localized text "OK";
   * - `close`, a button with the localized text "Close";
   * - `cancel`, a button with the localized text "Cancel".
   */
  type: 'ok' | 'close' | 'cancel';
});

```
---
## File: packages/bridge/src/methods/types/utils.ts

```typescript
type UnionKeys<T> = T extends T ? keyof T : never;

/**
 * Creates Mini Apps method parameters types.
 */
export interface CreateMethodParams<
  Params = never,
  VersionedParam extends UnionKeys<Params> = never,
> {
  params: Params;
  versionedParams: VersionedParam;
}

```
---
## File: packages/bridge/src/methods/captureSameReq.test.ts

```typescript
import { expect, it } from 'vitest';

import { captureSameReq } from '@/methods/captureSameReq.js';

it('should return function which returns true, if initially passed value equals the dynamic one', () => {
  expect(captureSameReq('abc')({ req_id: 'abc' })).toBe(true);
  expect(captureSameReq('abc')({ req_id: '111' })).toBe(false);
});

```
---
## File: packages/bridge/src/methods/captureSameReq.ts

```typescript
type CaptureSameReqFn = (payload: { req_id: string }) => boolean;

/**
 * Returns a function which can be used in `request` function `capture` property to capture
 * the event with the same request identifier.
 * @param reqId - request identifier.
 */
export function captureSameReq(reqId: string): CaptureSameReqFn {
  return ({ req_id }) => req_id === reqId;
}

```
---
## File: packages/bridge/src/methods/createPostEvent.test.ts

```typescript
import { afterEach, expect, it, vi } from 'vitest';

import { createPostEvent } from './createPostEvent.js';
import { postEvent as postEventFn } from './postEvent.js';

const postEvent = vi.mocked(postEventFn);

afterEach(() => {
  vi.restoreAllMocks();
});

vi.mock('./postEvent', () => ({ postEvent: vi.fn() }));

it('should throw if passed method is unsupported in specified version', () => {
  expect(() => createPostEvent('6.0')('web_app_request_write_access')).toThrow(
    'Method "web_app_request_write_access" is unsupported in Mini Apps version 6.0',
  );
});

it('should throw "web_app_set_header_color.color" parameter is unsupported', () => {
  expect(() => createPostEvent('6.3')('web_app_set_header_color', { color: '#aaaaaa' }))
    .toThrow('Parameter "color" of "web_app_set_header_color" method is unsupported in Mini Apps version 6.3');
});

it('should call global postEvent function', () => {
  createPostEvent('6.3')('web_app_request_viewport');
  expect(postEvent).toHaveBeenCalledOnce();
  expect(postEvent).toHaveBeenCalledWith('web_app_request_viewport', undefined);
});

```
---
## File: packages/bridge/src/methods/createPostEvent.ts

```typescript
import type { Version } from '@tma.js/types';
import { any, is, looseObject } from 'valibot';

import { MethodParameterUnsupportedError, MethodUnsupportedError } from '@/errors.js';
import { logger } from '@/globals.js';
import { type PostEventFn, postEvent } from '@/methods/postEvent.js';
import { supports } from '@/methods/supports.js';
import type {
  MethodName,
  MethodNameWithVersionedParams,
  MethodVersionedParams,
} from '@/methods/types/index.js';

export type OnUnsupportedFn = (
  data: { version: Version } & (
    | { method: MethodName }
    | {
      [M in MethodNameWithVersionedParams]: {
        method: M;
        param: MethodVersionedParams<M>;
      };
    }[MethodNameWithVersionedParams]),
) => void;

export type CreatePostEventMode = 'strict' | 'non-strict';

/**
 * Creates a function that checks if the specified method and parameters are supported.
 *
 * If the method or parameters are unsupported, the `onUnsupported` function will be called.
 *
 * If `strict` or `non-strict` value was passed as the second argument, the function
 * will create its own `onUnsupported` function with behavior depending on the value passed.
 *
 * - Passing `strict` will make the function to throw a `MethodParameterUnsupportedError`
 * or a `MethodUnsupportedError` error.
 * - Passing `non-strict` will just warn you about something being unsupported.
 *
 * @param version - Telegram Mini Apps version.
 * @param onUnsupportedOrMode - function or strict mode. Default: `strict`
 */
export function createPostEvent(
  version: Version,
  onUnsupportedOrMode: OnUnsupportedFn | CreatePostEventMode = 'strict',
): PostEventFn {
  const onUnsupported: OnUnsupportedFn = typeof onUnsupportedOrMode === 'function'
    ? onUnsupportedOrMode
    : data => {
      const { method, version } = data;
      const error = 'param' in data
        ? new MethodParameterUnsupportedError(method, data.param, version)
        : new MethodUnsupportedError(method, version);

      if (onUnsupportedOrMode === 'strict') {
        throw error;
      }
      return logger().forceWarn(error.message);
    };

  return ((method: any, params: any) => {
    // Firstly, check if the method is supported.
    if (!supports(method, version)) {
      return onUnsupported({ version, method });
    }

    // Method could use parameters, which are supported only in specific versions of Mini Apps.
    // We are validating only those parameters, which are not backward compatible.
    if (
      method === 'web_app_set_header_color'
      && is(looseObject({ color: any() }), params)
      && !supports(method, 'color', version)
    ) {
      return onUnsupported({ version, method, param: 'color' });
    }

    return postEvent(method, params);
  }) as PostEventFn;
}

```
---
## File: packages/bridge/src/methods/getReleaseVersion.test.ts

```typescript
import type { Version } from '@tma.js/types';
import { describe, expect, it } from 'vitest';

import { getReleaseVersion } from './getReleaseVersion.js';
import type {
  MethodName,
  MethodNameWithVersionedParams,
  MethodVersionedParams,
} from './types/index.js';

type HaveCheckSupportMethodObj = {
  [M in MethodNameWithVersionedParams]: {
    title: string;
    method: M;
    param: MethodVersionedParams<M>;
  }
}[MethodNameWithVersionedParams];

describe.each<[
  version: Version,
  methods: (MethodName | HaveCheckSupportMethodObj)[],
]>([
  ['6.0', [
    'iframe_ready',
    'iframe_will_reload',
    'web_app_close',
    'web_app_data_send',
    'web_app_expand',
    'web_app_open_link',
    'web_app_ready',
    'web_app_request_theme',
    'web_app_request_viewport',
    'web_app_setup_main_button',
    'web_app_setup_closing_behavior',
  ]],
  ['6.1', [
    'web_app_open_tg_link',
    'web_app_open_invoice',
    'web_app_setup_back_button',
    'web_app_set_background_color',
    'web_app_set_header_color',
    'web_app_trigger_haptic_feedback',
  ]],
  ['6.2', ['web_app_open_popup']],
  ['6.4', [
    'web_app_read_text_from_clipboard',
    'web_app_close_scan_qr_popup',
    'web_app_close_scan_qr_popup',
    {
      title: 'web_app_open_link.try_instant_view',
      method: 'web_app_open_link',
      param: 'try_instant_view',
    },
  ]],
  ['6.7', ['web_app_switch_inline_query']],
  ['6.9', [
    'web_app_invoke_custom_method',
    'web_app_request_write_access',
    'web_app_request_phone',
    {
      title: 'web_app_set_header_color.color',
      method: 'web_app_set_header_color',
      param: 'color',
    },
  ]],
  ['6.10', ['web_app_setup_settings_button']],
  ['7.2', [
    'web_app_biometry_get_info',
    'web_app_biometry_open_settings',
    'web_app_biometry_request_access',
    'web_app_biometry_request_auth',
    'web_app_biometry_update_token',
  ]],
  ['7.6', [
    {
      title: 'web_app_open_link.try_browser',
      method: 'web_app_open_link',
      param: 'try_browser',
    },
    {
      title: 'web_app_close.return_back',
      method: 'web_app_close',
      param: 'return_back',
    },
  ]],
  ['7.7', ['web_app_setup_swipe_behavior']],
  ['7.8', ['web_app_share_to_story']],
  ['7.10', [
    'web_app_setup_secondary_button',
    'web_app_set_bottom_bar_color',
    {
      title: 'web_app_setup_main_button.has_shine_effect',
      method: 'web_app_setup_main_button',
      param: 'has_shine_effect',
    },
  ]],
  ['8.0', [
    'web_app_request_fullscreen',
    'web_app_exit_fullscreen',
    'web_app_set_emoji_status',
    'web_app_request_emoji_status_access',
    'web_app_add_to_home_screen',
    'web_app_check_home_screen',
    'web_app_check_location',
    'web_app_open_location_settings',
    'web_app_request_file_download',
    'web_app_request_location',
    'web_app_send_prepared_message',
    'web_app_start_accelerometer',
    'web_app_start_device_orientation',
    'web_app_start_gyroscope',
    'web_app_stop_accelerometer',
    'web_app_stop_device_orientation',
    'web_app_stop_gyroscope',
    'web_app_toggle_orientation_lock',
  ]],
  ['9.0', [
    'web_app_device_storage_clear',
    'web_app_device_storage_get_key',
    'web_app_device_storage_save_key',
    'web_app_secure_storage_clear',
    'web_app_secure_storage_get_key',
    'web_app_secure_storage_restore_key',
    'web_app_secure_storage_save_key',
  ]],
  ['9.1', ['web_app_hide_keyboard']],
])('%s', (version, methods) => {
  const methodsOnly = methods.filter((m): m is MethodName => {
    return typeof m === 'string';
  });

  const paramsOnly = methods.filter((m): m is HaveCheckSupportMethodObj => {
    return typeof m === 'object';
  });

  describe.each(methodsOnly)('%s', method => {
    it(`should return ${version}`, () => {
      expect(getReleaseVersion(method)).toBe(version);
    });
  });

  describe.each(paramsOnly)('$title', ({ method, param }) => {
    it(`should return ${version}`, () => {
      expect(getReleaseVersion(method, param)).toBe(version);
    });
  });
});

```
---
## File: packages/bridge/src/methods/getReleaseVersion.ts

```typescript
import { Version } from '@tma.js/types';

import {
  MethodName,
  MethodNameWithVersionedParams,
  MethodVersionedParams,
} from '@/methods/types/index.js';

const releases = {
  '6.0': [
    'iframe_ready',
    'iframe_will_reload',
    'web_app_close',
    'web_app_data_send',
    'web_app_expand',
    'web_app_open_link',
    'web_app_ready',
    'web_app_request_theme',
    'web_app_request_viewport',
    'web_app_setup_main_button',
    'web_app_setup_closing_behavior',
  ],
  6.1: [
    'web_app_open_tg_link',
    'web_app_open_invoice',
    'web_app_setup_back_button',
    'web_app_set_background_color',
    'web_app_set_header_color',
    'web_app_trigger_haptic_feedback',
  ],
  6.2: ['web_app_open_popup'],
  6.4: [
    'web_app_close_scan_qr_popup',
    'web_app_open_scan_qr_popup',
    'web_app_read_text_from_clipboard',
    { method: 'web_app_open_link', param: 'try_instant_view' },
  ],
  6.7: ['web_app_switch_inline_query'],
  6.9: [
    'web_app_invoke_custom_method',
    'web_app_request_write_access',
    'web_app_request_phone',
    { method: 'web_app_set_header_color', param: 'color' },
  ],
  '6.10': ['web_app_setup_settings_button'],
  7.2: [
    'web_app_biometry_get_info',
    'web_app_biometry_open_settings',
    'web_app_biometry_request_access',
    'web_app_biometry_request_auth',
    'web_app_biometry_update_token',
  ],
  7.6: [
    { method: 'web_app_open_link', param: 'try_browser' },
    { method: 'web_app_close', param: 'return_back' },
  ],
  7.7: ['web_app_setup_swipe_behavior'],
  7.8: ['web_app_share_to_story'],
  '7.10': [
    'web_app_setup_secondary_button',
    'web_app_set_bottom_bar_color',
    { method: 'web_app_setup_main_button', param: 'has_shine_effect' },
  ],
  '8.0': [
    'web_app_request_safe_area',
    'web_app_request_content_safe_area',
    'web_app_request_fullscreen',
    'web_app_exit_fullscreen',
    'web_app_set_emoji_status',
    'web_app_add_to_home_screen',
    'web_app_check_home_screen',
    'web_app_request_emoji_status_access',
    'web_app_check_location',
    'web_app_open_location_settings',
    'web_app_request_file_download',
    'web_app_request_location',
    'web_app_send_prepared_message',
    'web_app_start_accelerometer',
    'web_app_start_device_orientation',
    'web_app_start_gyroscope',
    'web_app_stop_accelerometer',
    'web_app_stop_device_orientation',
    'web_app_stop_gyroscope',
    'web_app_toggle_orientation_lock',
  ],
  '9.0': [
    'web_app_device_storage_clear',
    'web_app_device_storage_get_key',
    'web_app_device_storage_save_key',
    'web_app_secure_storage_clear',
    'web_app_secure_storage_get_key',
    'web_app_secure_storage_restore_key',
    'web_app_secure_storage_save_key',
  ],
  9.1: ['web_app_hide_keyboard'],
};

/**
 * @returns Version of the specified method parameter release. Returns `null`
 * if passed method or parameter are unknown.
 * @param method - method name
 * @param param - method parameter
 */
export function getReleaseVersion<M extends MethodNameWithVersionedParams>(
  method: M,
  param: MethodVersionedParams<M>,
): Version | null;

/**
 * @returns Version of the specified method release. Returns `null`
 * if passed method is unknown.
 * @param method - method name.
 */
export function getReleaseVersion(method: MethodName): Version | null;
export function getReleaseVersion(method: MethodName, param?: string): Version | null {
  const versions = Object.keys(releases) as (`${keyof typeof releases}`)[];
  return versions.find(version => {
    return releases[version].some(item => {
      if (param) {
        return typeof item === 'object'
          && item.method === method
          && item.param === param;
      }
      return item === method;
    });
  }) || null;
}

```
---
## File: packages/bridge/src/methods/postEvent.test.ts

```typescript
import {
  expect,
  describe,
  it,
  vi,
  beforeEach,
} from 'vitest';
import { createWindow } from 'test-utils';
import * as E from 'fp-ts/Either';

import { resetGlobals, setTargetOrigin } from '@/globals.js';
import { UnknownEnvError } from '@/errors.js';

import { postEvent, postEventFp } from './postEvent.js';

beforeEach(() => {
  vi.restoreAllMocks();
  resetGlobals();
});

describe('postEvent', () => {
  describe('env: iframe', () => {
    it(
      'should call "window.parent.postMessage" with object {eventType: string, eventData: any} converted to string',
      () => {
        const postMessage = vi.fn();
        createWindow({
          env: 'iframe',
          parent: { postMessage } as any,
        });

        postEvent('web_app_close');
        expect(postMessage).toHaveBeenCalledOnce();
        expect(postMessage)
          .toHaveBeenCalledWith('{"eventType":"web_app_close"}', 'https://web.telegram.org');

        postMessage.mockClear();

        postEvent('web_app_set_header_color', { color_key: 'bg_color' });
        expect(postMessage).toHaveBeenCalledOnce();
        expect(postMessage).toHaveBeenCalledWith(
          '{"eventType":"web_app_set_header_color","eventData":{"color_key":"bg_color"}}',
          'https://web.telegram.org',
        );

        postMessage.mockClear();

        expect(postMessage).toHaveBeenCalledTimes(0);
        postEvent('web_app_set_header_color', { color_key: 'bg_color' });
        expect(postMessage).toHaveBeenCalledOnce();
        expect(postMessage).toHaveBeenCalledWith(
          '{"eventType":"web_app_set_header_color","eventData":{"color_key":"bg_color"}}',
          'https://web.telegram.org',
        );
      },
    );
  });

  describe('env: common mobile', () => {
    it(
      'should call "window.TelegramWebviewProxy.postEvent" with the event name (string) as the first argument and event data (object converted to string) as the second one',
      () => {
        const spy = vi.fn();
        createWindow({
          TelegramWebviewProxy: {
            postEvent: spy,
          },
        } as any);

        // Without parameters.
        expect(spy).toHaveBeenCalledTimes(0);
        postEvent('web_app_close');
        expect(spy).toHaveBeenCalledOnce();
        expect(spy).toHaveBeenCalledWith('web_app_close', undefined);

        spy.mockClear();

        // With parameters.
        expect(spy).toHaveBeenCalledTimes(0);
        postEvent('web_app_set_header_color', { color_key: 'bg_color' });
        expect(spy).toHaveBeenCalledOnce();
        expect(spy).toHaveBeenCalledWith('web_app_set_header_color', '{"color_key":"bg_color"}');
      },
    );
  });

  describe('env: window mobile', () => {
    it(
      'should call "window.external.notify" with object {eventType: string, eventData: any} converted to string',
      () => {
        const spy = vi.fn();
        createWindow({
          external: {
            notify: spy,
          },
        } as any);

        // Without parameters.
        postEvent('web_app_close');
        expect(spy).toHaveBeenCalledOnce();
        expect(spy).toHaveBeenCalledWith('{"eventType":"web_app_close"}');

        spy.mockClear();

        // With parameters.
        postEvent('web_app_set_header_color', { color_key: 'bg_color' });
        expect(spy).toHaveBeenCalledOnce();
        expect(spy)
          .toHaveBeenCalledWith(
            '{"eventType":"web_app_set_header_color","eventData":{"color_key":"bg_color"}}',
          );
      },
    );
  });

  describe('env: unknown', () => {
    it('should throw', () => {
      createWindow();
      expect(() => postEvent('web_app_close')).toThrow(new UnknownEnvError());
    });
  });

  describe('target origin', () => {
    it('should use globally set target origin', () => {
      const postMessage = vi.fn();
      createWindow({
        env: 'iframe',
        parent: { postMessage } as any,
      });

      setTargetOrigin('here we go!');
      postEvent('web_app_set_header_color', { color_key: 'bg_color' });

      expect(postMessage).toHaveBeenCalledOnce();
      expect(postMessage).toHaveBeenCalledWith(
        '{"eventType":"web_app_set_header_color","eventData":{"color_key":"bg_color"}}',
        'here we go!',
      );
    });
  });
});

describe('postEventFp', () => {
  describe('env: iframe', () => {
    it(
      'should call "window.parent.postMessage" with object {eventType: string, eventData: any} converted to string',
      () => {
        const postMessage = vi.fn();
        createWindow({
          env: 'iframe',
          parent: { postMessage } as any,
        });

        postEventFp('web_app_close');
        expect(postMessage).toHaveBeenCalledOnce();
        expect(postMessage)
          .toHaveBeenCalledWith('{"eventType":"web_app_close"}', 'https://web.telegram.org');

        postMessage.mockClear();

        postEvent('web_app_set_header_color', { color_key: 'bg_color' });
        expect(postMessage).toHaveBeenCalledOnce();
        expect(postMessage).toHaveBeenCalledWith(
          '{"eventType":"web_app_set_header_color","eventData":{"color_key":"bg_color"}}',
          'https://web.telegram.org',
        );

        postMessage.mockClear();

        expect(postMessage).toHaveBeenCalledTimes(0);
        postEvent('web_app_set_header_color', { color_key: 'bg_color' });
        expect(postMessage).toHaveBeenCalledOnce();
        expect(postMessage).toHaveBeenCalledWith(
          '{"eventType":"web_app_set_header_color","eventData":{"color_key":"bg_color"}}',
          'https://web.telegram.org',
        );
      },
    );
  });

  describe('env: common mobile', () => {
    it(
      'should call "window.TelegramWebviewProxy.postEvent" with the event name (string) as the first argument and event data (object converted to string) as the second one',
      () => {
        const spy = vi.fn();
        createWindow({
          TelegramWebviewProxy: {
            postEvent: spy,
          },
        } as any);

        // Without parameters.
        expect(spy).toHaveBeenCalledTimes(0);
        postEventFp('web_app_close');
        expect(spy).toHaveBeenCalledOnce();
        expect(spy).toHaveBeenCalledWith('web_app_close', undefined);

        spy.mockClear();

        // With parameters.
        expect(spy).toHaveBeenCalledTimes(0);
        postEventFp('web_app_set_header_color', { color_key: 'bg_color' });
        expect(spy).toHaveBeenCalledOnce();
        expect(spy).toHaveBeenCalledWith('web_app_set_header_color', '{"color_key":"bg_color"}');
      },
    );
  });

  describe('env: window mobile', () => {
    it(
      'should call "window.external.notify" with object {eventType: string, eventData: any} converted to string',
      () => {
        const spy = vi.fn();
        createWindow({
          external: {
            notify: spy,
          },
        } as any);

        // Without parameters.
        postEventFp('web_app_close');
        expect(spy).toHaveBeenCalledOnce();
        expect(spy).toHaveBeenCalledWith('{"eventType":"web_app_close"}');

        spy.mockClear();

        // With parameters.
        postEventFp('web_app_set_header_color', { color_key: 'bg_color' });
        expect(spy).toHaveBeenCalledOnce();
        expect(spy)
          .toHaveBeenCalledWith(
            '{"eventType":"web_app_set_header_color","eventData":{"color_key":"bg_color"}}',
          );
      },
    );
  });

  describe('env: unknown', () => {
    it('should throw', () => {
      createWindow();
      expect(postEventFp('web_app_close')).toStrictEqual(E.left(new UnknownEnvError()));
    });
  });

  describe('target origin', () => {
    it('should use globally set target origin', () => {
      const postMessage = vi.fn();
      createWindow({
        env: 'iframe',
        parent: { postMessage } as any,
      });

      setTargetOrigin('here we go!');
      postEventFp('web_app_set_header_color', { color_key: 'bg_color' });

      expect(postMessage).toHaveBeenCalledOnce();
      expect(postMessage).toHaveBeenCalledWith(
        '{"eventType":"web_app_set_header_color","eventData":{"color_key":"bg_color"}}',
        'here we go!',
      );
    });
  });
});

```
---
## File: packages/bridge/src/methods/postEvent.ts

```typescript
import { pipe } from 'fp-ts/function';
import * as E from 'fp-ts/Either';
import { function as fn, is, looseObject } from 'valibot';

import { hasWebviewProxy } from '@/env/hasWebviewProxy.js';
import { isIframe } from '@/env/isIframe.js';
import { UnknownEnvError } from '@/errors.js';
import { logger, targetOrigin } from '@/globals.js';
import type {
  MethodName,
  MethodNameWithOptionalParams,
  MethodNameWithoutParams,
  MethodNameWithRequiredParams,
  MethodParams,
} from '@/methods/types/index.js';

import { postMessage } from './postMessage.js';

export type PostEventError = UnknownEnvError;
export type PostEventFn = typeof postEvent;
export type PostEventFpFn = typeof postEventFp;

/**
 * @see postEventFp
 */
export function postEvent<Method extends MethodNameWithRequiredParams>(
  method: Method,
  params: MethodParams<Method>,
): void;
/**
 * @see postEventFp
 */
export function postEvent(method: MethodNameWithoutParams): void;
/**
 * @see postEventFp
 */
export function postEvent<Method extends MethodNameWithOptionalParams>(
  method: Method,
  params?: MethodParams<Method>,
): void;

export function postEvent(
  eventType: MethodName,
  eventData?: MethodParams<MethodName>,
): void {
  pipe(
    postEventFp(
      // @ts-expect-error It's ok, TS can't determine a specific override.
      eventType,
      eventData,
    ),
    E.mapLeft(err => {
      throw err;
    }),
  );
}

/**
 * Calls Mini Apps methods requiring parameters.
 * @param method - method name.
 * @param params - options along with params.
 */
export function postEventFp<Method extends MethodNameWithRequiredParams>(
  method: Method,
  params: MethodParams<Method>,
): E.Either<PostEventError, void>;

/**
 * Calls Mini Apps methods accepting no parameters at all.
 * @param method - method name.
 */
export function postEventFp(method: MethodNameWithoutParams): E.Either<PostEventError, void>;

/**
 * Calls Mini Apps methods accepting optional parameters.
 * @param method - method name.
 * @param params - options along with params.
 */
export function postEventFp<Method extends MethodNameWithOptionalParams>(
  method: Method,
  params?: MethodParams<Method>,
): E.Either<PostEventError, void>;

export function postEventFp(
  eventType: MethodName,
  eventData?: MethodParams<MethodName>,
): E.Either<PostEventError, void> {
  logger().log('Posting event:', eventData ? { eventType, eventData } : { eventType });

  const w = window;
  const message = JSON.stringify({ eventType, eventData });

  // Telegram Web.
  if (isIframe()) {
    postMessage(message, targetOrigin());
    return E.right(undefined);
  }

  // Telegram for iOS, macOS, Android and Telegram Desktop.
  if (hasWebviewProxy(w)) {
    w.TelegramWebviewProxy.postEvent(eventType, JSON.stringify(eventData));
    return E.right(undefined);
  }

  // Telegram for Windows Phone or Android.
  if (is(looseObject({ external: looseObject({ notify: fn() }) }), w)) {
    w.external.notify(message);
    return E.right(undefined);
  }

  // Otherwise, the current environment is unknown, and we are not able to send event.
  return E.left(new UnknownEnvError());
}

```
---
## File: packages/bridge/src/methods/postMessage.ts

```typescript
import { postMessageImpl } from '@/globals.js';

export type PostMessage = typeof window.parent.postMessage;

/**
 * Posts a message to the parent window. We usually use it to send a message in web versions of
 * Telegram.
 * @param args - `window.parent.postMessage` arguments.
 */
export const postMessage: PostMessage = (...args) => {
  return postMessageImpl()(...args as unknown as Parameters<PostMessage>);
};

```
---
## File: packages/bridge/src/methods/supports.test.ts

```typescript
import type { Version } from '@tma.js/types';
import { describe, expect, it } from 'vitest';

import { supports } from './supports.js';
import type {
  MethodName,
  MethodNameWithVersionedParams,
  MethodVersionedParams,
} from './types/index.js';

type HaveCheckSupportMethodObj = {
  [M in MethodNameWithVersionedParams]: {
    title: string;
    method: M;
    parameter: MethodVersionedParams<M>;
  }
}[MethodNameWithVersionedParams];

/**
 * Increases specified version by amount of updates.
 * @param version - initial version.
 * @param amount - count of bumps.
 */
function increaseVersion(version: Version, amount: number): string {
  const [, major, minor] = version.match(/(\d+)\.(\d+)$/)!.map(Number);
  return minor + amount >= 0
    ? `${major}.${minor + amount}`
    : `${major - 1}.99`;
}

describe.each<[
  version: Version,
  methods: (MethodName | HaveCheckSupportMethodObj)[],
]>([
  ['6.0', [
    'iframe_ready',
    'iframe_will_reload',
    'web_app_close',
    'web_app_data_send',
    'web_app_expand',
    'web_app_open_link',
    'web_app_ready',
    'web_app_request_theme',
    'web_app_request_viewport',
    'web_app_setup_main_button',
    'web_app_setup_closing_behavior',
  ]],
  ['6.1', [
    'web_app_open_tg_link',
    'web_app_open_invoice',
    'web_app_setup_back_button',
    'web_app_set_background_color',
    'web_app_set_header_color',
    'web_app_trigger_haptic_feedback',
  ]],
  ['6.2', ['web_app_open_popup']],
  ['6.4', [
    'web_app_read_text_from_clipboard',
    'web_app_close_scan_qr_popup',
    'web_app_close_scan_qr_popup',
    {
      title: 'web_app_open_link.try_instant_view',
      method: 'web_app_open_link',
      parameter: 'try_instant_view',
    },
  ]],
  ['6.7', ['web_app_switch_inline_query']],
  ['6.9', [
    'web_app_invoke_custom_method',
    'web_app_request_write_access',
    'web_app_request_phone',
    {
      title: 'web_app_set_header_color.color',
      method: 'web_app_set_header_color',
      parameter: 'color',
    },
  ]],
  ['6.10', ['web_app_setup_settings_button']],
  ['7.2', [
    'web_app_biometry_get_info',
    'web_app_biometry_open_settings',
    'web_app_biometry_request_access',
    'web_app_biometry_request_auth',
    'web_app_biometry_update_token',
  ]],
  ['7.6', [
    {
      title: 'web_app_open_link.try_browser',
      method: 'web_app_open_link',
      parameter: 'try_browser',
    },
    {
      title: 'web_app_close.return_back',
      method: 'web_app_close',
      parameter: 'return_back',
    },
  ]],
  ['7.7', ['web_app_setup_swipe_behavior']],
  ['7.8', ['web_app_share_to_story']],
  ['7.10', [
    'web_app_setup_secondary_button',
    'web_app_set_bottom_bar_color',
    {
      title: 'web_app_setup_main_button.has_shine_effect',
      method: 'web_app_setup_main_button',
      parameter: 'has_shine_effect',
    },
  ]],
  ['8.0', [
    'web_app_request_fullscreen',
    'web_app_exit_fullscreen',
    'web_app_set_emoji_status',
    'web_app_request_emoji_status_access',
    'web_app_add_to_home_screen',
    'web_app_check_home_screen',
    'web_app_check_location',
    'web_app_open_location_settings',
    'web_app_request_file_download',
    'web_app_request_location',
    'web_app_send_prepared_message',
    'web_app_start_accelerometer',
    'web_app_start_device_orientation',
    'web_app_start_gyroscope',
    'web_app_stop_accelerometer',
    'web_app_stop_device_orientation',
    'web_app_stop_gyroscope',
    'web_app_toggle_orientation_lock',
  ]],
  ['9.0', [
    'web_app_device_storage_clear',
    'web_app_device_storage_get_key',
    'web_app_device_storage_save_key',
    'web_app_secure_storage_clear',
    'web_app_secure_storage_get_key',
    'web_app_secure_storage_restore_key',
    'web_app_secure_storage_save_key',
  ]],
  ['9.1', ['web_app_hide_keyboard']],
])('%s', (version, methods) => {
  const higher = increaseVersion(version, 1);
  const lower = increaseVersion(version, -1);

  const methodsOnly = methods.filter((m): m is MethodName => {
    return typeof m === 'string';
  });

  const paramsOnly = methods.filter((m): m is HaveCheckSupportMethodObj => {
    return typeof m === 'object';
  });

  describe.each(methodsOnly)('%s', method => {
    it(`should return true if version >= ${version} (${higher})`, () => {
      expect(supports(method, version)).toBe(true);
      expect(supports(method, higher)).toBe(true);
    });

    if (version !== '6.0') {
      it(`should return false if version < ${version} (${lower})`, () => {
        expect(supports(method, lower)).toBe(false);
      });
    }
  });

  describe.each(paramsOnly)('$title', ({ method, parameter }) => {
    it(`should return true if version >= ${version} (${higher})`, () => {
      expect(supports(method, parameter, version)).toBe(true);
      expect(supports(method, parameter, higher)).toBe(true);
    });

    it(`should return false if version < ${version} (${lower})`, () => {
      expect(supports(method, parameter, lower)).toBe(false);
    });
  });
});

```
---
## File: packages/bridge/src/methods/supports.ts

```typescript
import type { Version } from '@tma.js/types';

import type {
  MethodName,
  MethodNameWithVersionedParams,
  MethodVersionedParams,
} from '@/methods/types/index.js';
import { compareVersions } from '@/utils/compareVersions.js';
import { getReleaseVersion } from '@/methods/getReleaseVersion.js';

/**
 * Returns true in case, passed parameter in specified method is supported.
 * @param method - method name
 * @param param - method parameter
 * @param inVersion - platform version.
 */
export function supports<M extends MethodNameWithVersionedParams>(
  method: M,
  param: MethodVersionedParams<M>,
  inVersion: Version,
): boolean;

/**
 * Returns true in case, specified method is supported in a passed version.
 * @param method - method name.
 * @param inVersion - platform version.
 */
export function supports(method: MethodName, inVersion: Version): boolean;

export function supports(
  method: MethodName,
  paramOrVersion: Version | string,
  inVersion?: string,
): boolean {
  const version = inVersion
    ? getReleaseVersion(
      method as MethodNameWithVersionedParams,
      paramOrVersion as MethodVersionedParams<MethodNameWithVersionedParams>,
    )
    : getReleaseVersion(method);
  return version
    ? compareVersions(version, inVersion || paramOrVersion) <= 0
    : false;
}

```
---
## File: packages/bridge/src/utils/compareVersions.test.ts

```typescript
import { expect, it } from 'vitest';

import { compareVersions } from '@/utils/compareVersions.js';

it('should return 1 in case "a" is greater than "b"', () => {
  expect(compareVersions('6.1', '6.0')).toBe(1);
  expect(compareVersions('6.1', '6')).toBe(1);
});

it('should return 0 in case "a" is equal to "b"', () => {
  expect(compareVersions('6', '6')).toBe(0);
  expect(compareVersions('6', '6.0')).toBe(0);
  expect(compareVersions('6.0', '6')).toBe(0);
});

it('should return -1 in case "a" is lower than "b"', () => {
  expect(compareVersions('5', '6.0')).toBe(-1);
  expect(compareVersions('6.0', '6.1')).toBe(-1);
});

```
---
## File: packages/bridge/src/utils/compareVersions.ts

```typescript
import type { Version } from '@tma.js/types';

function parts(a: Version): number[] {
  return a.split('.').map(Number);
}

/**
 * @param a - first version.
 * @param b - second version.
 * @returns
 * - `1` if the version "a" is greater than "b".
 * - `0` the version "a" is equal to "b".
 * - `-1` the version "a" is lower than "b".
 */
export function compareVersions(a: Version, b: Version): number {
  const aParts = parts(a);
  const bParts = parts(b);
  const len = Math.max(aParts.length, bParts.length);

  // Iterate over each part of versions and compare them. In case, part is
  // missing, assume its value is equal to 0.
  for (let i = 0; i < len; i += 1) {
    const aVal = aParts[i] || 0;
    const bVal = bParts[i] || 0;

    if (aVal === bVal) {
      continue;
    }
    return aVal > bVal ? 1 : -1;
  }
  return 0;
}

```
---
## File: packages/bridge/src/utils/invokeCustomMethod.test.ts

```typescript
import { afterEach, describe, expect, it, vi } from 'vitest';
import * as TE from 'fp-ts/TaskEither';
import { pipe } from 'fp-ts/function';

import { requestFp as _requestFp } from '@/utils/request.js';
import { InvokeCustomMethodFailedError } from '@/errors.js';

import { invokeCustomMethodFp } from './invokeCustomMethod.js';

const requestFp = vi.mocked(_requestFp);

vi.mock('@/utils/request.js', () => ({
  requestFp: vi.fn(),
}));

afterEach(() => {
  vi.restoreAllMocks();
});

describe('invokeCustomMethodFp', () => {
  it('should return error if requestFp returned it', async () => {
    requestFp.mockImplementationOnce(() => TE.left(new Error('test')));
    await pipe(
      invokeCustomMethodFp('getCurrentTime', {}, ''),
      TE.match(
        error => expect(error).toStrictEqual(new Error('test')),
        () => expect.unreachable(),
      ),
    )();
    expect.assertions(1);
  });

  it('should return error if response contained "error" prop', async () => {
    requestFp.mockImplementationOnce(() => TE.right({ error: 'UNAVAILABLE' }));
    await pipe(
      invokeCustomMethodFp('getCurrentTime', {}, ''),
      TE.match(
        error => expect(error).toStrictEqual(new InvokeCustomMethodFailedError('UNAVAILABLE')),
        () => expect.unreachable(),
      ),
    )();
    expect.assertions(1);
  });

  it('should return result using reponse\'s result property', async () => {
    requestFp.mockImplementationOnce(() => TE.right({ result: 123, req_id: '' }));
    await pipe(
      invokeCustomMethodFp('getCurrentTime', {}, ''),
      TE.match(
        () => expect.unreachable(),
        result => expect(result).toBe(123),
      ),
    )();
    expect.assertions(1);
  });
});

```
---
## File: packages/bridge/src/utils/invokeCustomMethod.ts

```typescript
import { BetterPromise } from 'better-promises';
import * as TE from 'fp-ts/TaskEither';
import { pipe } from 'fp-ts/function';

import { captureSameReq } from '@/methods/captureSameReq.js';
import type { CustomMethodName, CustomMethodParams } from '@/methods/types/index.js';
import { InvokeCustomMethodFailedError } from '@/errors.js';

import {
  requestFp,
  type RequestOptions,
  type RequestFpOptions,
  type RequestError,
} from './request.js';

export type InvokeCustomMethodError = RequestError | InvokeCustomMethodFailedError;

export type InvokeCustomMethodOptions = Omit<RequestOptions<'custom_method_invoked'>, 'capture'>;
export type InvokeCustomMethodFn = typeof invokeCustomMethod;

export type InvokeCustomMethodFpOptions = Omit<RequestFpOptions<'custom_method_invoked'>, 'capture'>;
export type InvokeCustomMethodFpFn = typeof invokeCustomMethodFp;

/**
 * Invokes known custom method. Returns method execution result.
 * @param method - method name.
 * @param params - method parameters.
 * @param requestId - request identifier.
 * @param options - additional options.
 */
export function invokeCustomMethodFp<M extends CustomMethodName>(
  method: M,
  params: CustomMethodParams<M>,
  requestId: string,
  options?: InvokeCustomMethodFpOptions,
): TE.TaskEither<InvokeCustomMethodError, unknown>;

/**
 * Invokes unknown custom method. Returns method execution result.
 * @param method - method name.
 * @param params - method parameters.
 * @param requestId - request identifier.
 * @param options - additional options.
 */
export function invokeCustomMethodFp(
  method: string,
  params: object,
  requestId: string,
  options?: InvokeCustomMethodFpOptions,
): TE.TaskEither<RequestError, unknown>;

export function invokeCustomMethodFp(
  method: string,
  params: object,
  requestId: string,
  options?: InvokeCustomMethodFpOptions,
): TE.TaskEither<InvokeCustomMethodError, unknown> {
  return pipe(
    requestFp('web_app_invoke_custom_method', 'custom_method_invoked', {
      ...options || {},
      params: { method, params, req_id: requestId },
      capture: captureSameReq(requestId),
    }),
    TE.chain(({ result, error }) => {
      return error
        ? TE.left(new InvokeCustomMethodFailedError(error))
        : TE.right(result);
    }),
  );
}

/**
 * @see invokeCustomMethodFp
 */
export function invokeCustomMethod<M extends CustomMethodName>(
  method: M,
  params: CustomMethodParams<M>,
  requestId: string,
  options?: InvokeCustomMethodOptions,
): BetterPromise<unknown>;

/**
 * @see invokeCustomMethodFp
 */
export function invokeCustomMethod(
  method: string,
  params: object,
  requestId: string,
  options?: InvokeCustomMethodOptions,
): BetterPromise<unknown>;

export function invokeCustomMethod(
  method: string,
  params: object,
  requestId: string,
  options?: InvokeCustomMethodOptions,
): BetterPromise<unknown> {
  return BetterPromise.fn(() => {
    return pipe(
      // @ts-expect-error TypeScript is unable to determine required override.
      invokeCustomMethodFp(method, params, requestId, options),
      TE.match(
        error => {
          throw error;
        },
        result => result,
      ),
    )();
  });
}

```
---
## File: packages/bridge/src/utils/request.test.ts

```typescript
import { createWindow } from 'test-utils';
import {
  afterEach,
  beforeEach,
  describe,
  expect,
  it,
  vi,
} from 'vitest';
import { TimeoutError } from 'better-promises';
import { pipe } from 'fp-ts/function';
import * as TE from 'fp-ts/TaskEither';
import * as E from 'fp-ts/Either';

import { resetGlobals } from '@/globals.js';
import { postEventFp as globalPostEventFp } from '@/methods/postEvent.js';
import { emitEvent } from '@/events/emitEvent.js';

import { request, requestFp } from './request.js';

vi.mock('@/methods/postEvent.js', async () => {
  const { postEventFp: _postEventFp } = await vi.importActual('@/methods/postEvent.js');
  return { postEventFp: vi.fn(_postEventFp as any) };
});

beforeEach(() => {
  createWindow({ env: 'iframe' });
});

afterEach(() => {
  vi.restoreAllMocks();
  resetGlobals();
  vi.useRealTimers();
});

function macroTask(fn: () => void) {
  // We need this crutch for tests related to timeouts. The problem is tasks created with fp-ts
  // are asynchronous, chained and use Promises. We also don't know when promises generated by
  // tasks are created and have no stable way of advancing the timer, we don't know when the final
  // promise was created.
  // So, we are creating a *macro* task to make sure it will be launched after the promise was
  // created.
  const isFake = vi.isFakeTimers();
  if (isFake) {
    vi.useRealTimers();
  }
  setImmediate(() => {
    if (isFake) {
      vi.useFakeTimers();
    }
    fn();
  });
}

function advanceTimersByTimeMacro(time: number) {
  macroTask(() => {
    vi.advanceTimersByTime(time);
  });
}

const emitEventMacro = ((event: any, payload: any) => {
  macroTask(() => {
    emitEvent(event, payload);
  });
}) as typeof emitEvent;

describe('request', () => {
  describe('options', () => {
    describe('timeout', () => {
      it('should throw if timeout was reached', async () => {
        vi.useFakeTimers();
        const p = request('web_app_request_phone', 'phone_requested', {
          timeout: 5,
        });
        advanceTimersByTimeMacro(100);
        await expect(p).rejects.toBeInstanceOf(TimeoutError);
      });

      it('should not throw if data was received before timeout', async () => {
        vi.useFakeTimers();
        const promise = request('web_app_request_phone', 'phone_requested', {
          timeout: 1000,
        });
        macroTask(() => {
          vi.advanceTimersByTime(500);
          emitEvent('phone_requested', { status: 'allowed' });
          vi.advanceTimersByTime(1000);
        });
        await expect(promise).resolves.toStrictEqual({ status: 'allowed' });
      });
    });

    describe('postEvent', () => {
      it('should use specified postEvent property', async () => {
        const postEvent = vi.fn();
        const promise = request('web_app_request_phone', 'phone_requested', {
          postEvent,
        });
        emitEventMacro('phone_requested', { status: 'allowed' });
        await promise;

        expect(postEvent).toHaveBeenCalledWith('web_app_request_phone', undefined);
      });

      it(
        'should use global postEvent function if according property was not specified',
        async () => {
          const promise = request('web_app_request_phone', 'phone_requested');
          emitEventMacro('phone_requested', { status: 'allowed' });
          await promise;

          expect(globalPostEventFp).toHaveBeenCalledWith('web_app_request_phone', undefined);
        },
      );

      it('should reject promise if postEvent threw an error', async () => {
        const promise = request('web_app_request_phone', 'phone_requested', {
          postEvent() {
            throw new Error('Nope!');
          },
        });
        await expect(promise).rejects.toStrictEqual(new Error('Nope!'));
      });
    });

    describe('capture', () => {
      it('should capture an event in case, capture method returned true', async () => {
        vi.useFakeTimers();
        const promise = request('web_app_request_phone', 'phone_requested', {
          timeout: 1000,
          capture: ({ status }) => status === 'allowed',
        });

        macroTask(() => {
          vi.advanceTimersByTime(500);
          emitEvent('phone_requested', { status: 'allowed' });
          vi.advanceTimersByTime(1000);
        });

        await expect(promise).resolves.toStrictEqual({ status: 'allowed' });
      });

      it('should not capture an event in case, capture method returned false', async () => {
        vi.useFakeTimers();
        const promise = request('web_app_request_phone', 'phone_requested', {
          timeout: 500,
          capture: ({ status }) => status === 'allowed',
        });

        macroTask(() => {
          emitEvent('phone_requested', { status: 'declined' });
          vi.advanceTimersByTime(1000);
        });

        await expect(promise).rejects.toBeInstanceOf(TimeoutError);
      });
    });

    describe('abortSignal', () => {
      it('should abort operation if abort was called', async () => {
        const controller = new AbortController();
        const p = request('web_app_request_phone', 'phone_requested', {
          abortSignal: controller.signal,
        });
        controller.abort(new Error('ABORTED'));
        await expect(p).rejects.toStrictEqual(new Error('ABORTED'));
      });
    });
  });

  describe('with request id', () => {
    it('should ignore event with different request id', async () => {
      vi.useFakeTimers();
      const promise = request('web_app_read_text_from_clipboard', 'clipboard_text_received', {
        timeout: 1000,
        params: { req_id: 'a' },
        capture: (({ req_id }) => req_id === 'a'),
      });

      macroTask(() => {
        emitEvent('clipboard_text_received', { req_id: 'b' });
        vi.advanceTimersByTime(1500);
      });

      await expect(promise).rejects.toBeInstanceOf(TimeoutError);
    });

    it('should capture event with the same request id', async () => {
      vi.useFakeTimers();
      const promise = request(
        'web_app_read_text_from_clipboard',
        'clipboard_text_received',
        {
          timeout: 1000,
          params: { req_id: 'a' },
          capture: (({ req_id }) => req_id === 'a'),
        },
      );

      macroTask(() => {
        emitEvent('clipboard_text_received', {
          req_id: 'a',
          data: 'from clipboard',
        });
        vi.advanceTimersByTime(1500);
      });

      await expect(promise).resolves.toStrictEqual({
        req_id: 'a',
        data: 'from clipboard',
      });
    });
  });

  describe('multiple events', () => {
    describe('no params', () => {
      it('should handle any of the specified events', async () => {
        vi.useFakeTimers();
        const promise = request(
          'web_app_request_phone',
          ['phone_requested', 'write_access_requested'],
          { timeout: 1000 },
        );

        macroTask(() => {
          emitEvent('phone_requested', { status: 'allowed' });
          vi.advanceTimersByTime(1500);
        });

        await expect(promise).resolves.toStrictEqual({ status: 'allowed' });
      });
    });

    describe('with params', () => {
      it('should handle any of the specified events', async () => {
        vi.useFakeTimers();
        const promise = request(
          'web_app_data_send',
          ['phone_requested', 'write_access_requested'],
          {
            timeout: 1000,
            params: { data: 'abc' },
          },
        );

        macroTask(() => {
          emitEvent('write_access_requested', { status: 'declined' });
          vi.advanceTimersByTime(1500);
        });

        await expect(promise).resolves.toStrictEqual({ status: 'declined' });
      });
    });
  });
});

describe('requestFp', () => {
  describe('options', () => {
    describe('timeout', () => {
      it('should throw if timeout was reached', async () => {
        vi.useFakeTimers();
        const result = requestFp('web_app_request_phone', 'phone_requested', {
          timeout: 5,
        });

        advanceTimersByTimeMacro(100);

        await pipe(
          result,
          TE.match(
            e => expect(e).toBeInstanceOf(TimeoutError),
            () => expect.unreachable(),
          ),
        )();
        expect.assertions(1);
      });

      it('should not throw if data was received before timeout', async () => {
        vi.useFakeTimers();
        const result = requestFp('web_app_request_phone', 'phone_requested', {
          timeout: 1000,
        });

        macroTask(() => {
          vi.advanceTimersByTime(500);
          emitEvent('phone_requested', { status: 'allowed' });
          vi.advanceTimersByTime(1000);
        });

        await pipe(
          result,
          TE.match(
            () => expect.unreachable(),
            payload => expect(payload).toStrictEqual({ status: 'allowed' }),
          ),
        )();
        expect.assertions(1);
      });
    });

    describe('postEvent', () => {
      it('should use specified postEvent property', async () => {
        const postEvent = vi.fn(() => E.right(undefined));
        const result = requestFp('web_app_request_phone', 'phone_requested', { postEvent });
        emitEventMacro('phone_requested', { status: 'allowed' });
        await result();

        expect(postEvent).toHaveBeenCalledWith('web_app_request_phone', undefined);
      });

      it(
        'should use global postEventFp function if according property was not specified',
        async () => {
          const result = requestFp('web_app_request_phone', 'phone_requested');
          emitEventMacro('phone_requested', { status: 'allowed' });
          await result();

          expect(globalPostEventFp).toHaveBeenCalledWith('web_app_request_phone', undefined);
        },
      );

      it('should reject promise if postEvent threw an error', async () => {
        const result = requestFp('web_app_request_phone', 'phone_requested', {
          postEvent: () => E.left(new Error('Nope!')),
        });

        await pipe(
          result,
          TE.match(
            error => expect(error).toStrictEqual(new Error('Nope!')),
            () => expect.unreachable(),
          ),
        )();
        expect.assertions(1);
      });
    });

    describe('capture', () => {
      it('should capture an event in case, capture method returned true', async () => {
        vi.useFakeTimers();
        const result = requestFp('web_app_request_phone', 'phone_requested', {
          timeout: 1000,
          capture: ({ status }) => status === 'allowed',
        });

        macroTask(() => {
          vi.advanceTimersByTime(500);
          emitEvent('phone_requested', { status: 'allowed' });
          vi.advanceTimersByTime(1000);
        });

        await pipe(
          result,
          TE.match(
            () => expect.unreachable(),
            payload => expect(payload).toStrictEqual({ status: 'allowed' }),
          ),
        )();
        expect.assertions(1);
      });

      it('should not capture an event in case, capture method returned false', async () => {
        vi.useFakeTimers();
        const result = requestFp('web_app_request_phone', 'phone_requested', {
          timeout: 500,
          capture: ({ status }) => status === 'allowed',
        });

        macroTask(() => {
          emitEvent('phone_requested', { status: 'declined' });
          vi.advanceTimersByTime(1000);
        });

        await pipe(
          result,
          TE.match(
            error => expect(error).toBeInstanceOf(TimeoutError),
            () => expect.unreachable(),
          ),
        )();
        expect.assertions(1);
      });
    });

    describe('abortSignal', () => {
      it('should abort operation if abort was called', async () => {
        const controller = new AbortController();
        const result = requestFp('web_app_request_phone', 'phone_requested', {
          abortSignal: controller.signal,
        });

        controller.abort(new Error('ABORTED'));

        await pipe(
          result,
          TE.match(
            error => expect(error).toStrictEqual(new Error('ABORTED')),
            () => expect.unreachable(),
          ),
        )();
        expect.assertions(1);
      });
    });
  });

  describe('with request id', () => {
    it('should ignore event with different request id', async () => {
      vi.useFakeTimers();
      const result = requestFp('web_app_read_text_from_clipboard', 'clipboard_text_received', {
        timeout: 1000,
        params: { req_id: 'a' },
        capture: (({ req_id }) => req_id === 'a'),
      });

      macroTask(() => {
        emitEvent('clipboard_text_received', { req_id: 'b' });
        vi.advanceTimersByTime(1500);
      });

      await pipe(
        result,
        TE.match(
          error => expect(error).toBeInstanceOf(TimeoutError),
          () => expect.unreachable(),
        ),
      )();
      expect.assertions(1);
    });

    it('should capture event with the same request id', async () => {
      vi.useFakeTimers();
      const result = requestFp(
        'web_app_read_text_from_clipboard',
        'clipboard_text_received',
        {
          timeout: 1000,
          params: { req_id: 'a' },
          capture: (({ req_id }) => req_id === 'a'),
        },
      );

      macroTask(() => {
        emitEvent('clipboard_text_received', {
          req_id: 'a',
          data: 'from clipboard',
        });
        vi.advanceTimersByTime(1500);
      });

      await pipe(
        result,
        TE.match(
          () => expect.unreachable(),
          payload => expect(payload).toStrictEqual({
            req_id: 'a',
            data: 'from clipboard',
          }),
        ),
      )();
      expect.assertions(1);
    });
  });

  describe('multiple events', () => {
    describe('no params', () => {
      it('should handle any of the specified events', async () => {
        vi.useFakeTimers();
        const result = requestFp(
          'web_app_request_phone',
          ['phone_requested', 'write_access_requested'],
          { timeout: 1000 },
        );

        macroTask(() => {
          emitEvent('phone_requested', { status: 'allowed' });
          vi.advanceTimersByTime(1500);
        });

        await pipe(
          result,
          TE.match(
            () => expect.unreachable(),
            payload => expect(payload).toStrictEqual({ status: 'allowed' }),
          ),
        )();
        expect.assertions(1);
      });
    });

    describe('with params', () => {
      it('should handle any of the specified events', async () => {
        vi.useFakeTimers();
        const result = requestFp(
          'web_app_data_send',
          ['phone_requested', 'write_access_requested'],
          {
            timeout: 1000,
            params: { data: 'abc' },
          },
        );

        macroTask(() => {
          emitEvent('write_access_requested', { status: 'declined' });
          vi.advanceTimersByTime(1500);
        });

        await pipe(
          result,
          TE.match(
            () => expect.unreachable(),
            payload => expect(payload).toStrictEqual({ status: 'declined' }),
          ),
        )();
        expect.assertions(1);
      });
    });
  });
});

```
---
## File: packages/bridge/src/utils/request.ts

```typescript
import {
  BetterPromise,
  type BetterPromiseOptions,
  type TimeoutError,
} from 'better-promises';
import {
  createCbCollector,
  throwifyAnyEither,
  type If,
  type IsNever,
  BetterTaskEither,
} from '@tma.js/toolkit';
import { signal } from '@tma.js/signals';
import * as E from 'fp-ts/Either';
import * as TE from 'fp-ts/TaskEither';
import { pipe } from 'fp-ts/function';

import {
  postEventFp,
  type PostEventError,
  type PostEventFn,
  type PostEventFpFn,
} from '@/methods/postEvent.js';
import type {
  MethodName,
  MethodNameWithOptionalParams,
  MethodNameWithoutParams,
  MethodNameWithRequiredParams,
  MethodParams,
} from '@/methods/types/index.js';
import type { EventName, EventPayload } from '@/events/types/index.js';
import { on } from '@/events/emitter.js';

type AnyEventName = EventName | EventName[];

export type RequestError = PostEventError | TimeoutError;

/**
 * @example
 * { event: 'scan_qr_closed' }
 * @example
 * {
 *   event: 'popup_closed',
 *   payload: { button_id: 'ok' }
 * }
 */
export type RequestCaptureFnEventsPayload<E extends EventName[]> =
  E extends (infer U extends EventName)[]
    ? {
      [K in U]: If<
        IsNever<EventPayload<K>>,
        { event: K },
        { event: K; payload: EventPayload<K> }
      >
    }[U]
    : never;

export type RequestCaptureEventsFn<E extends EventName[]> = (
  payload: RequestCaptureFnEventsPayload<E>,
) => boolean;

export type RequestCaptureEventFn<E extends EventName> = If<
  IsNever<EventPayload<E>>,
  () => boolean,
  (payload: EventPayload<E>) => boolean
>;

export type RequestCaptureFn<E extends AnyEventName> = E extends EventName[]
  ? RequestCaptureEventsFn<E>
  : E extends EventName
    ? RequestCaptureEventFn<E>
    : never;

export interface RequestOptions<E extends AnyEventName> extends Omit<RequestFpOptions<E>, 'postEvent'> {
  /**
   * Custom function to call mini apps methods.
   */
  postEvent?: PostEventFn;
}

export type RequestResult<E extends AnyEventName> =
  E extends (infer U extends EventName)[]
    ? U extends infer K extends EventName
      ? If<IsNever<EventPayload<K>>, undefined, EventPayload<K>>
      : never
    : E extends EventName
      ? If<IsNever<EventPayload<E>>, undefined, EventPayload<E>>
      : never;

export interface RequestFpOptions<E extends AnyEventName> extends Pick<
  BetterPromiseOptions,
  'abortSignal' | 'timeout'
> {
  /**
   * A function that should return true if the event should be captured.
   * The first compatible request will be captured if this property is omitted.
   */
  capture?: RequestCaptureFn<E>;
  /**
   * A custom function to call mini apps methods.
   */
  postEvent?: PostEventFpFn;
}

export type RequestFn = typeof request;
export type RequestFpFn = typeof requestFp;

/**
 * Calls a method waiting for the specified event(-s) to occur.
 * @param method - method name.
 * @param eventOrEvents - tracked event or events.
 * @param options - additional options.
 */
export function requestFp<
  M extends MethodNameWithRequiredParams,
  E extends AnyEventName,
  AbortError = never,
>(
  method: M,
  eventOrEvents: E,
  options: RequestFpOptions<E> & { params: MethodParams<M> },
): TE.TaskEither<RequestError | AbortError, RequestResult<E>>;

/**
 * Calls a method waiting for the specified event(-s) to occur.
 * @param method - method name.
 * @param eventOrEvents - tracked event or events.
 * @param options - additional options.
 */
export function requestFp<
  M extends MethodNameWithOptionalParams,
  E extends AnyEventName,
  AbortError = never,
>(
  method: M,
  eventOrEvents: E,
  options?: RequestFpOptions<E> & { params?: MethodParams<M> },
): TE.TaskEither<RequestError | AbortError, RequestResult<E>>;

/**
 * Calls a method waiting for the specified event(-s) to occur.
 * @param method - method name.
 * @param eventOrEvents - tracked event or events.
 * @param options - additional options.
 */
export function requestFp<
  M extends MethodNameWithoutParams,
  E extends AnyEventName,
  AbortError = never,
>(
  method: M,
  eventOrEvents: E,
  options?: RequestFpOptions<E>,
): TE.TaskEither<RequestError | AbortError, RequestResult<E>>;

export function requestFp<
  M extends MethodName,
  E extends AnyEventName,
  AbortError = never,
>(
  method: M,
  eventOrEvents: E,
  options: RequestFpOptions<E> & { params?: MethodParams<M> } = {},
): TE.TaskEither<RequestError | AbortError, RequestResult<E>> {
  const {
    // If no capture function was passed, we capture the first compatible event.
    capture = () => true,
    postEvent = postEventFp,
  } = options;

  const result = signal<undefined | [RequestResult<E>]>();
  const [addCleanup, cleanup] = createCbCollector();
  // Iterate over all the tracked events and add a listener, checking if the event should be
  // captured.
  (Array.isArray(eventOrEvents) ? eventOrEvents : [eventOrEvents]).forEach(event => {
    // Each event listener waits for the event to occur.
    // Then, if the capture function was passed, we should check if the event should
    // be captured. If the function is omitted, we instantly capture the event.
    addCleanup(
      on(event, payload => {
        if (
          Array.isArray(eventOrEvents)
            ? (capture as RequestCaptureEventsFn<EventName[]>)({ event, payload })
            : (capture as RequestCaptureEventFn<EventName>)(payload)
        ) {
          result.set([payload as RequestResult<E>]);
        }
      }),
    );
  });
  const withCleanup = <T>(value: T): T => {
    cleanup();
    return value;
  };

  return pipe(
    async () => postEvent(method as any, (options as any).params),
    TE.chainW(() => {
      return BetterTaskEither<AbortError, RequestResult<E>>((resolve, _, context) => {
        // When creating this BetterTaskEither, we could already have a value stored in
        // the result signal. For example, when tracked events were generated via emitEvent in
        // mockTelegramEnv.onEvent.
        const data = result();
        if (data) {
          return resolve(data[0]);
        }

        const listener = (data: [RequestResult<E>] | undefined) => {
          if (data) {
            resolve(data[0]);
          }
        };
        const unsub = () => {
          result.unsub(listener);
        };
        result.sub(listener);
        context.on('finalized', unsub);
      }, options);
    }),
    TE.mapBoth(withCleanup, withCleanup),
  );
}

/**
 * @see requestFp
 */
export function request<M extends MethodNameWithRequiredParams, E extends AnyEventName>(
  method: M,
  eventOrEvents: E,
  options: RequestOptions<E> & { params: MethodParams<M> },
): BetterPromise<RequestResult<E>>;

/**
 * @see requestFp
 */
export function request<M extends MethodNameWithOptionalParams, E extends AnyEventName>(
  method: M,
  eventOrEvents: E,
  options?: RequestOptions<E> & { params?: MethodParams<M> },
): BetterPromise<RequestResult<E>>;

/**
 * @see requestFp
 */
export function request<M extends MethodNameWithoutParams, E extends AnyEventName>(
  method: M,
  eventOrEvents: E,
  options?: RequestOptions<E>,
): BetterPromise<RequestResult<E>>;

export function request<M extends MethodName, E extends AnyEventName>(
  method: M,
  eventOrEvents: E,
  options?: RequestOptions<E> & { params?: MethodParams<M> },
): BetterPromise<RequestResult<E>> {
  const { postEvent } = options || {};

  return throwifyAnyEither(
    // @ts-expect-error TypeScript will not be able to handle our overrides here.
    requestFp(method, eventOrEvents, {
      ...options,
      postEvent: postEvent
        ? (...args: any[]) => {
          try {
            // @ts-expect-error TypeScript will not be able to handle our overrides here.
            postEvent(...args);
            return E.right(undefined);
          } catch (e) {
            return E.left(e);
          }
        }
        : postEventFp,
    }),
  );
}

```
---
## File: packages/bridge/src/applyPolyfills.ts

```typescript
/**
 * Applies polyfills required for stable work of the package:
 * - `Object.hasOwn` - used by `valibot`
 */
export function applyPolyfills(): void {
  if (!Object.hasOwn) {
    Object.hasOwn = function(obj, prop) {
      return Object.prototype.hasOwnProperty.call(obj, prop);
    };
  }
}

```
---
## File: packages/bridge/src/base64-url.test.ts

```typescript
import { describe, expect, it } from 'vitest';

import { decodeBase64Url, decodeBase64UrlFp } from '@/base64-url.js';
import { encodeBase64Url } from '@/base64-url.js';

describe('decodeBase64Url', () => {
  it('should properly decode ASCII value', () => {
    expect(decodeBase64Url('QUJDREVG')).toBe('ABCDEF');
  });

  it('should properly decode Unicode value', () => {
    expect(decodeBase64Url('0KLQtdC70LXQs9GA0LDQvA==')).toBe('Ð¢ÐµÐ»ÐµÐ³Ñ€Ð°Ð¼');
  });
});

describe('decodeBase64UrlFp', () => {
  it('should properly decode ASCII value', () => {
    expect(decodeBase64UrlFp('QUJDREVG')).toMatchObject({ right: 'ABCDEF' });
  });

  it('should properly decode Unicode value', () => {
    expect(decodeBase64UrlFp('0KLQtdC70LXQs9GA0LDQvA==')).toMatchObject({ right: 'Ð¢ÐµÐ»ÐµÐ³Ñ€Ð°Ð¼' });
  });
});

describe('encodeBase64Url', () => {
  it('should properly encode ASCII value', () => {
    expect(encodeBase64Url('ABCDEF')).toBe('QUJDREVG');
  });

  it('should properly encode Unicode value', () => {
    expect(encodeBase64Url('Ð¢ÐµÐ»ÐµÐ³Ñ€Ð°Ð¼')).toBe('0KLQtdC70LXQs9GA0LDQvA==');
  });
});

```
---
## File: packages/bridge/src/base64-url.ts

```typescript
import { throwifyFpFn } from '@tma.js/toolkit';
import * as E from 'fp-ts/Either';

export type DecodeBase64UrlError = DOMException;

/**
 * Decodes a base-64-url ASCII string.
 * @param value - the value to decode.
 * @see Learn more about base64url:
 * https://herongyang.com/Encoding/Base64URL-Encoding-Algorithm.html
 * @see Source:
 * https://developer.mozilla.org/ru/docs/Glossary/Base64#solution_1_â€“_escaping_the_string_before_encoding_it
 */
export function decodeBase64UrlFp(value: string): E.Either<DecodeBase64UrlError, string> {
  return E.tryCatch(() => {
    return decodeURIComponent(
      atob(value)
        .replace(/-/g, '+')
        .replace(/_/g, '/')
        .split('')
        .map(c => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2))
        .join(''),
    );
  }, e => e as DOMException);
}

/**
 * @see decodeBase64UrlFp
 */
export const decodeBase64Url = throwifyFpFn(decodeBase64UrlFp);

/**
 * Creates a base-64-url encoded ASCII string from the passed value.
 * @param value - the value to encode.
 * @see Learn more about base64url:
 * https://herongyang.com/Encoding/Base64URL-Encoding-Algorithm.html
 * @see Source:
 * https://developer.mozilla.org/ru/docs/Glossary/Base64#solution_1_â€“_escaping_the_string_before_encoding_it
 */
export function encodeBase64Url(value: string): string {
  // first we use encodeURIComponent to get percent-encoded UTF-8,
  // then we convert the percent encodings into raw bytes which
  // can be fed into btoa.
  return btoa(
    encodeURIComponent(value).replace(/%([0-9A-F]{2})/g, (_, p1) => {
      return String.fromCharCode(parseInt(`0x${p1}`));
    }),
  )
    .replace(/\+/g, '-')
    .replace(/\//g, '_');
}

```
---
## File: packages/bridge/src/errors.ts

```typescript
import type { Version } from '@tma.js/types';
import { errorClass, errorClassWithData } from 'error-kid';

export class MethodUnsupportedError extends errorClass<
  [method: string, version: Version]
>('MethodUnsupportedError', (method, version) => [
  `Method "${method}" is unsupported in Mini Apps version ${version}`,
]) {
}

export class MethodParameterUnsupportedError extends errorClass<
  [method: string, param: string, version: Version]
>('MethodParameterUnsupportedError', (method, param, version) => [
  `Parameter "${param}" of "${method}" method is unsupported in Mini Apps version ${version}`,
]) {
}

export class LaunchParamsRetrieveError extends errorClassWithData<
  { errors: { source: string; error: unknown }[] },
  [{ source: string; error: unknown }[]]
>(
  'LaunchParamsRetrieveError',
  errors => ({ errors }),
  errors => [
    [
      'Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?',
      'ðŸ“– Refer to docs for more information:',
      'https://docs.telegram-mini-apps.com/packages/tma-js-bridge/environment',
      '',
      'Collected errors:',
      ...errors.map(({ source, error }) => {
        return `Source: ${source} / ${error instanceof Error ? error.message : String(error)}`;
      }),
    ].join('\n'),
  ],
) {
}

export class InvalidLaunchParamsError extends errorClass<
  [launchParams: string, cause: unknown]
>('InvalidLaunchParamsError', (launchParams, cause) => [
  `Invalid value for launch params: ${launchParams}`,
  { cause },
]) {
}

export class UnknownEnvError extends errorClass('UnknownEnvError') {
}

export class InvokeCustomMethodFailedError extends errorClass<[error: string]>(
  'InvokeCustomMethodError',
  error => [`Server returned error: ${error}`],
) {
}

```
---
## File: packages/bridge/src/globals.ts

```typescript
import { signal, computed } from '@tma.js/signals';
import { createLogger, type Logger } from '@tma.js/toolkit';

import type { SubscribeListener } from '@/events/types/index.js';
import { off, offAll, on } from '@/events/emitter.js';
import type { PostMessage } from '@/methods/postMessage.js';

/**
 * @internal
 */
const _debug = signal(false);
/**
 * @internal
 */
const _targetOrigin = signal('https://web.telegram.org');

const onEventReceived: SubscribeListener = event => {
  logger().log('Event received:', event);
};

/**
 * The current debug mode state.
 *
 * To update the value, use the `setDebug` function.
 * @see setDebug
 */
export const debug = computed(_debug);

/**
 * Sets the package debug mode.
 *
 * Enabling debug mode leads to printing additional messages in the console related to the
 * processes inside the package.
 * @param value - enable debug mode.
 */
export function setDebug(value: boolean): void {
  if (value !== _debug()) {
    _debug.set(value);
    (value ? on : off)('*', onEventReceived);
  }
}

/**
 * The current target origin used by the `postEvent` method.
 *
 * You don't need to override this value until you know what you are doing.
 * To update the value, use the `setTargetOrigin` function.
 * @default 'https://web.telegram.org'
 * @see setTargetOrigin
 */
export const targetOrigin = computed(_targetOrigin);

/**
 * Sets a new target origin that is being used when calling the `postEvent` function in Telegram
 * web versions.
 *
 * You don't need to override this value until you know what you are doing.
 * @param origin - allowed target origin value.
 * @see _targetOrigin
 */
export function setTargetOrigin(origin: string) {
  _targetOrigin.set(origin);
  logger().log('New target origin set', origin);
}

/**
 * Signal containing a custom implementation of the method to post a message to the parent
 * window. We usually use it to send a message in web versions of Telegram.
 *
 * @default A function behaving like the `window.parent.postMessage` method.
 */
export const postMessageImpl = signal<PostMessage>((...args) => {
  window.parent.postMessage(...args as unknown as Parameters<PostMessage>);
});

/**
 * The package logger. You can override this value in order to use your own implementation.
 */
export const logger = signal<Logger>(createLogger('Bridge', {
  bgColor: '#9147ff',
  textColor: 'white',
  shouldLog: debug,
}));

/**
 * Resets the package global values. Normally, you don't use this function in your application.
 * We are using it only for test purposes.
 */
export function resetGlobals() {
  offAll();
  [postMessageImpl, _targetOrigin, targetOrigin, _debug, debug, logger].forEach(s => {
    s.unsubAll();
    'reset' in s && s.reset();
  });
}

```
---
## File: packages/bridge/src/index.ts

```typescript
//#region env
export { hasWebviewProxy } from '@/env/hasWebviewProxy.js';
export { isIframe } from '@/env/isIframe.js';
export { isTMA, isTMAFp, type isTMAError } from '@/env/isTMA.js';
export { mockTelegramEnv } from '@/env/mockTelegramEnv.js';
//#endregion

//#region events
export { emitEvent } from '@/events/emitEvent.js';
export { off, offAll, on } from '@/events/emitter.js';
export type {
  EventListener,
  SubscribeListener,
  Events,
  WriteAccessRequestedStatus,
  EmojiStatusAccessRequestedStatus,
  BiometryAuthRequestStatus,
  BiometryTokenUpdateStatus,
  BiometryType,
  EmojiStatusFailedError,
  EventName,
  EventPayload,
  EventWithoutPayload,
  EventWithPayload,
  PhoneRequestedStatus,
  FullScreenErrorStatus,
  HomeScreenStatus,
  InvoiceStatus,
  SafeAreaInsets,
} from '@/events/types/index.js';
//#endregion

//#region methods
export { captureSameReq } from '@/methods/captureSameReq.js';
export {
  createPostEvent,
  type CreatePostEventMode,
  type OnUnsupportedFn,
} from '@/methods/createPostEvent.js';
export { getReleaseVersion } from '@/methods/getReleaseVersion.js';
export {
  postEvent,
  postEventFp,
  type PostEventFn,
  type PostEventFpFn,
  type PostEventError,
} from '@/methods/postEvent.js';
export { postMessage, type PostMessage } from '@/methods/postMessage.js';
export { supports } from '@/methods/supports.js';
export type {
  AnyHapticFeedbackParams,
  AnyInvokeCustomMethodParams,
  CreateMethodParams,
  CustomMethodName,
  ImpactHapticFeedbackParams,
  ImpactHapticFeedbackStyle,
  CustomMethodsParams,
  CustomMethodParams,
  MethodName,
  MethodVersionedParams,
  NotificationHapticFeedbackParams,
  NotificationHapticFeedbackType,
  Methods,
  SelectionHapticFeedbackParams,
  MethodNameWithOptionalParams,
  MethodNameWithoutParams,
  MethodNameWithRequiredParams,
  MethodNameWithVersionedParams,
  MethodParams,
  PopupParams,
  BackgroundColor,
  BottomBarColor,
  HeaderColorKey,
  PopupButton,
  OpenLinkBrowser,
  SecondaryButtonPosition,
  SwitchInlineQueryChatType,
} from '@/methods/types/index.js';
//#endregion

//#region utils
export { compareVersions } from '@/utils/compareVersions.js';
export {
  invokeCustomMethod,
  invokeCustomMethodFp,
  type InvokeCustomMethodFn,
  type InvokeCustomMethodOptions,
  type InvokeCustomMethodFpFn,
  type InvokeCustomMethodError,
  type InvokeCustomMethodFpOptions,
} from '@/utils/invokeCustomMethod.js';
export {
  request,
  requestFp,
  type RequestCaptureEventFn,
  type RequestCaptureEventsFn,
  type RequestCaptureFn,
  type RequestCaptureFnEventsPayload,
  type RequestFn,
  type RequestOptions,
  type RequestResult,
  type RequestError,
  type RequestFpOptions,
  type RequestFpFn,
} from '@/utils/request.js';
//#endregion

//#region misc
export { applyPolyfills } from '@/applyPolyfills.js';
export {
  decodeBase64Url,
  encodeBase64Url,
  decodeBase64UrlFp,
  type DecodeBase64UrlError,
} from '@/base64-url.js';
export {
  LaunchParamsRetrieveError,
  InvalidLaunchParamsError,
  InvokeCustomMethodFailedError,
  MethodParameterUnsupportedError,
  MethodUnsupportedError,
  UnknownEnvError,
} from '@/errors.js';
export {
  setDebug,
  debug,
  resetGlobals,
  postMessageImpl,
  logger,
  setTargetOrigin,
  targetOrigin,
} from '@/globals.js';
export {
  retrieveLaunchParams,
  retrieveRawInitData,
  retrieveRawInitDataFp,
  retrieveRawLaunchParams,
  retrieveRawLaunchParamsFp,
  retrieveLaunchParamsFp,
  type RetrieveLaunchParamsError,
  type RetrieveLaunchParamsResult,
  type RetrieveRawInitDataError,
  type RetrieveRawLaunchParamsError,
} from '@/launch-params.js';
export {
  createStartParam,
  createStartParamFp,
  decodeStartParam,
  decodeStartParamFp,
  isSafeToCreateStartParam,
} from '@/start-param.js';
//#endregion

//#region Re-exports
export {
  createLogger,
  deepSnakeToCamelObjKeys,
  type DeepConvertSnakeKeysToCamelCase,
  type Logger,
  type LoggerFn,
  type LoggerForceFn,
  type LoggerOptions,
  type LogLevel,
} from '@tma.js/toolkit';
export {
  CancelledError,
  TimeoutError,
} from 'better-promises';
//#endregion

```
---
## File: packages/bridge/src/launch-params.test.ts

```typescript
import { afterEach, describe, expect, it, vi } from 'vitest';
import * as E from 'fp-ts/Either';
import * as O from 'fp-ts/Option';

import {
  retrieveLaunchParams,
  retrieveLaunchParamsFp,
  retrieveRawInitData,
  retrieveRawInitDataFp,
  retrieveRawLaunchParams,
  retrieveRawLaunchParamsFp,
} from '@/launch-params.js';

afterEach(() => {
  vi.restoreAllMocks();
});

describe('retrieveLaunchParams', () => {
  describe('window.location.href contains launch params', () => {
    it(
      'should retrieve launch params from the window.location.href. Throw an error if data is invalid or missing',
      () => {
        vi
          .spyOn(window.location, 'href', 'get')
          .mockImplementationOnce(() => {
            return '/abc?tgWebAppStartParam=location_hash#tgWebAppPlatform=tdesktop&tgWebAppVersion=7.0&tgWebAppThemeParams=%7B%7D';
          });

        expect(retrieveLaunchParams()).toStrictEqual({
          tgWebAppPlatform: 'tdesktop',
          tgWebAppVersion: '7.0',
          tgWebAppThemeParams: {},
          tgWebAppStartParam: 'location_hash',
        });
      },
    );
  });

  describe('first navigation entry contains launch params', () => {
    it(
      'should retrieve launch params from the window.performance. Throw an error if data is invalid or missing',
      () => {
        vi
          .spyOn(performance, 'getEntriesByType')
          .mockImplementationOnce(() => [{
            name: '/abc?tgWebAppStartParam=performance#tgWebAppPlatform=macos&tgWebAppVersion=7.3&tgWebAppThemeParams=%7B%7D',
          }] as any);

        expect(retrieveLaunchParams()).toStrictEqual({
          tgWebAppPlatform: 'macos',
          tgWebAppVersion: '7.3',
          tgWebAppThemeParams: {},
          tgWebAppStartParam: 'performance',
        });
      },
    );
  });

  describe('session storage contains launch params', () => {
    it(
      'should return launch parameters from the session storage tapps/launchParams key. If data is missing or invalid, throw an error',
      () => {
        const spy = vi
          .spyOn(sessionStorage, 'getItem')
          .mockImplementationOnce(() => '');
        expect(() => retrieveLaunchParams()).toThrow();

        spy.mockClear();
        spy.mockImplementationOnce(() => {
          return '"tgWebAppPlatform=android&tgWebAppThemeParams=%7B%22bg_color%22%3A%22%23ffffff%22%2C%22text_color%22%3A%22%23aabbccdd%22%7D&tgWebAppVersion=7.5"';
        });
        expect(retrieveLaunchParams()).toStrictEqual({
          tgWebAppVersion: '7.5',
          tgWebAppPlatform: 'android',
          tgWebAppThemeParams: {
            bg_color: '#ffffff',
            text_color: '#aabbccdd',
          },
        });
        expect(spy).toHaveBeenCalledOnce();
        expect(spy).toHaveBeenCalledWith('tapps/launchParams');
      },
    );
  });
});

describe('retrieveLaunchParamsFp', () => {
  describe('window.location.href contains launch params', () => {
    it(
      'should retrieve launch params from the window.location.href. Throw an error if data is invalid or missing',
      () => {
        vi
          .spyOn(window.location, 'href', 'get')
          .mockImplementationOnce(() => {
            return '/abc?tgWebAppStartParam=location_hash#tgWebAppPlatform=tdesktop&tgWebAppVersion=7.0&tgWebAppThemeParams=%7B%7D';
          });

        expect(retrieveLaunchParamsFp()).toStrictEqual(E.right({
          tgWebAppPlatform: 'tdesktop',
          tgWebAppVersion: '7.0',
          tgWebAppThemeParams: {},
          tgWebAppStartParam: 'location_hash',
        }));
      },
    );
  });

  describe('first navigation entry contains launch params', () => {
    it(
      'should retrieve launch params from the window.performance. Throw an error if data is invalid or missing',
      () => {
        vi
          .spyOn(performance, 'getEntriesByType')
          .mockImplementationOnce(() => [{
            name: '/abc?tgWebAppStartParam=performance#tgWebAppPlatform=macos&tgWebAppVersion=7.3&tgWebAppThemeParams=%7B%7D',
          }] as any);

        expect(retrieveLaunchParamsFp()).toStrictEqual(E.right({
          tgWebAppPlatform: 'macos',
          tgWebAppVersion: '7.3',
          tgWebAppThemeParams: {},
          tgWebAppStartParam: 'performance',
        }));
      },
    );
  });

  describe('session storage contains launch params', () => {
    it(
      'should return launch parameters from the session storage tapps/launchParams key. If data is missing or invalid, throw an error',
      () => {
        const spy = vi
          .spyOn(sessionStorage, 'getItem')
          .mockImplementationOnce(() => '');
        expect(retrieveLaunchParamsFp()).toMatchObject(E.left(expect.anything()));

        spy.mockClear();
        spy.mockImplementationOnce(() => {
          return '"tgWebAppPlatform=android&tgWebAppThemeParams=%7B%22bg_color%22%3A%22%23ffffff%22%7D&tgWebAppVersion=7.5"';
        });
        expect(retrieveLaunchParamsFp()).toStrictEqual(E.right({
          tgWebAppVersion: '7.5',
          tgWebAppPlatform: 'android',
          tgWebAppThemeParams: { bg_color: '#ffffff' },
        }));
        expect(spy).toHaveBeenCalledOnce();
        expect(spy).toHaveBeenCalledWith('tapps/launchParams');
      },
    );
  });
});

describe('retrieveRawInitData', () => {
  describe('window.location.href contains init data', () => {
    it(
      'should retrieve init data from the window.location.href. Throw an error if data is invalid or missing',
      () => {
        vi
          .spyOn(window.location, 'href', 'get')
          .mockImplementationOnce(() => {
            return '/abc?tgWebAppStartParam=location_hash#tgWebAppPlatform=tdesktop&tgWebAppVersion=7.0&tgWebAppThemeParams=%7B%7D&tgWebAppData=user%3D%257B%2522id%2522%253A279058397%252C%2522first_name%2522%253A%2522Vladislav%2522%252C%2522last_name%2522%253A%2522Kibenko%2522%252C%2522username%2522%253A%2522vdkfrost%2522%252C%2522language_code%2522%253A%2522ru%2522%252C%2522is_premium%2522%253Atrue%252C%2522allows_write_to_pm%2522%253Atrue%252C%2522photo_url%2522%253A%2522https%253A%255C%252F%255C%252Ft.me%255C%252Fi%255C%252Fuserpic%255C%252F320%255C%252F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%2522%257D%26chat_instance%3D-9019086117643313246%26chat_type%3Dsender%26auth_date%3D1736409902%26signature%3DFNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA%26hash%3D4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d90';
          });
        expect(retrieveRawInitData()).toBe(
          'user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%22%7D&chat_instance=-9019086117643313246&chat_type=sender&auth_date=1736409902&signature=FNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA&hash=4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d90',
        );
      },
    );
  });

  describe('first navigation entry contains init data', () => {
    it(
      'should retrieve init data from the window.performance. Throw an error if data is invalid or missing',
      () => {
        vi
          .spyOn(performance, 'getEntriesByType')
          .mockImplementationOnce(() => [{
            name: '/abc?tgWebAppStartParam=performance#tgWebAppPlatform=macos&tgWebAppVersion=7.3&tgWebAppThemeParams=%7B%7D&tgWebAppData=user%3D%257B%2522id%2522%253A279058397%252C%2522first_name%2522%253A%2522Vladislav%2522%252C%2522last_name%2522%253A%2522Kibenko%2522%252C%2522username%2522%253A%2522vdkfrost%2522%252C%2522language_code%2522%253A%2522ru%2522%252C%2522is_premium%2522%253Atrue%252C%2522allows_write_to_pm%2522%253Atrue%252C%2522photo_url%2522%253A%2522https%253A%255C%252F%255C%252Ft.me%255C%252Fi%255C%252Fuserpic%255C%252F320%255C%252F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%2522%257D%26chat_instance%3D-9019086117643313246%26chat_type%3Dsender%26auth_date%3D1736409902%26signature%3DFNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA%26hash%3D4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d33',
          }] as any);

        expect(retrieveRawInitData()).toBe(
          'user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%22%7D&chat_instance=-9019086117643313246&chat_type=sender&auth_date=1736409902&signature=FNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA&hash=4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d33',
        );
      },
    );
  });

  describe('session storage contains init data', () => {
    it(
      'should return launch parameters from the session storage tapps/launchParams key. If data is missing or invalid, throw an error',
      () => {
        const spy = vi
          .spyOn(sessionStorage, 'getItem')
          .mockImplementationOnce(() => '');
        expect(() => retrieveRawInitData()).toThrow();

        spy.mockClear();
        spy.mockImplementationOnce(() => {
          return '"tgWebAppPlatform=android&tgWebAppThemeParams=%7B%22bg_color%22%3A%22%23ffffff%22%7D&tgWebAppVersion=7.5&tgWebAppData=user%3D%257B%2522id%2522%253A279058397%252C%2522first_name%2522%253A%2522Vladislav%2522%252C%2522last_name%2522%253A%2522Kibenko%2522%252C%2522username%2522%253A%2522vdkfrost%2522%252C%2522language_code%2522%253A%2522ru%2522%252C%2522is_premium%2522%253Atrue%252C%2522allows_write_to_pm%2522%253Atrue%252C%2522photo_url%2522%253A%2522https%253A%255C%252F%255C%252Ft.me%255C%252Fi%255C%252Fuserpic%255C%252F320%255C%252F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%2522%257D%26chat_instance%3D-9019086117643313246%26chat_type%3Dsender%26auth_date%3D1736409902%26signature%3DFNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA%26hash%3D4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d90"';
        });
        expect(retrieveRawInitData()).toBe(
          'user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%22%7D&chat_instance=-9019086117643313246&chat_type=sender&auth_date=1736409902&signature=FNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA&hash=4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d90',
        );
      },
    );
  });
});

describe('retrieveRawInitDataFp', () => {
  describe('window.location.href contains init data', () => {
    it(
      'should retrieve init data from the window.location.href. Throw an error if data is invalid or missing',
      () => {
        vi
          .spyOn(window.location, 'href', 'get')
          .mockImplementationOnce(() => {
            return '/abc?tgWebAppStartParam=location_hash#tgWebAppPlatform=tdesktop&tgWebAppVersion=7.0&tgWebAppThemeParams=%7B%7D&tgWebAppData=user%3D%257B%2522id%2522%253A279058397%252C%2522first_name%2522%253A%2522Vladislav%2522%252C%2522last_name%2522%253A%2522Kibenko%2522%252C%2522username%2522%253A%2522vdkfrost%2522%252C%2522language_code%2522%253A%2522ru%2522%252C%2522is_premium%2522%253Atrue%252C%2522allows_write_to_pm%2522%253Atrue%252C%2522photo_url%2522%253A%2522https%253A%255C%252F%255C%252Ft.me%255C%252Fi%255C%252Fuserpic%255C%252F320%255C%252F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%2522%257D%26chat_instance%3D-9019086117643313246%26chat_type%3Dsender%26auth_date%3D1736409902%26signature%3DFNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA%26hash%3D4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d90';
          });
        expect(retrieveRawInitDataFp()).toStrictEqual(E.right(
          O.some(
            'user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%22%7D&chat_instance=-9019086117643313246&chat_type=sender&auth_date=1736409902&signature=FNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA&hash=4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d90',
          ),
        ));
      },
    );
  });

  describe('first navigation entry contains init data', () => {
    it(
      'should retrieve init data from the window.performance. Throw an error if data is invalid or missing',
      () => {
        vi
          .spyOn(performance, 'getEntriesByType')
          .mockImplementationOnce(() => [{
            name: '/abc?tgWebAppStartParam=performance#tgWebAppPlatform=macos&tgWebAppVersion=7.3&tgWebAppThemeParams=%7B%7D&tgWebAppData=user%3D%257B%2522id%2522%253A279058397%252C%2522first_name%2522%253A%2522Vladislav%2522%252C%2522last_name%2522%253A%2522Kibenko%2522%252C%2522username%2522%253A%2522vdkfrost%2522%252C%2522language_code%2522%253A%2522ru%2522%252C%2522is_premium%2522%253Atrue%252C%2522allows_write_to_pm%2522%253Atrue%252C%2522photo_url%2522%253A%2522https%253A%255C%252F%255C%252Ft.me%255C%252Fi%255C%252Fuserpic%255C%252F320%255C%252F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%2522%257D%26chat_instance%3D-9019086117643313246%26chat_type%3Dsender%26auth_date%3D1736409902%26signature%3DFNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA%26hash%3D4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d33',
          }] as any);

        expect(retrieveRawInitDataFp()).toStrictEqual(E.right(
          O.some(
            'user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%22%7D&chat_instance=-9019086117643313246&chat_type=sender&auth_date=1736409902&signature=FNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA&hash=4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d33',
          ),
        ));
      },
    );
  });

  describe('session storage contains init data', () => {
    it(
      'should return launch parameters from the session storage tapps/launchParams key. If data is missing or invalid, throw an error',
      () => {
        const spy = vi
          .spyOn(sessionStorage, 'getItem')
          .mockImplementationOnce(() => '');
        expect(retrieveRawInitDataFp()).toMatchObject(E.left(expect.anything()));

        spy.mockClear();
        spy.mockImplementationOnce(() => {
          return '"tgWebAppPlatform=android&tgWebAppThemeParams=%7B%22bg_color%22%3A%22%23ffffff%22%7D&tgWebAppVersion=7.5&tgWebAppData=user%3D%257B%2522id%2522%253A279058397%252C%2522first_name%2522%253A%2522Vladislav%2522%252C%2522last_name%2522%253A%2522Kibenko%2522%252C%2522username%2522%253A%2522vdkfrost%2522%252C%2522language_code%2522%253A%2522ru%2522%252C%2522is_premium%2522%253Atrue%252C%2522allows_write_to_pm%2522%253Atrue%252C%2522photo_url%2522%253A%2522https%253A%255C%252F%255C%252Ft.me%255C%252Fi%255C%252Fuserpic%255C%252F320%255C%252F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%2522%257D%26chat_instance%3D-9019086117643313246%26chat_type%3Dsender%26auth_date%3D1736409902%26signature%3DFNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA%26hash%3D4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d90"';
        });
        expect(retrieveRawInitDataFp()).toStrictEqual(E.right(
          O.some('user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%22%7D&chat_instance=-9019086117643313246&chat_type=sender&auth_date=1736409902&signature=FNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA&hash=4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d90'),
        ));
      },
    );
  });
});

describe('retrieveRawLaunchParams', () => {
  describe('window.location.href contains launch params', () => {
    it(
      'should retrieve launch params from the window.location.href. Throw an error if data is invalid or missing',
      () => {
        vi
          .spyOn(window.location, 'href', 'get')
          .mockImplementationOnce(() => {
            return '/abc?tgWebAppStartParam=location_hash#tgWebAppPlatform=tdesktop&tgWebAppVersion=7.0&tgWebAppThemeParams=%7B%7D';
          });

        expect(retrieveRawLaunchParams())
          .toBe(
            'tgWebAppStartParam=location_hash&tgWebAppPlatform=tdesktop&tgWebAppVersion=7.0&tgWebAppThemeParams=%7B%7D',
          );
      },
    );
  });

  describe('first navigation entry contains launch params', () => {
    it(
      'should retrieve launch params from the window.performance. Throw an error if data is invalid or missing',
      () => {
        vi
          .spyOn(performance, 'getEntriesByType')
          .mockImplementationOnce(() => [{
            name: '/abc?tgWebAppStartParam=performance#tgWebAppPlatform=macos&tgWebAppVersion=7.3&tgWebAppThemeParams=%7B%7D',
          }] as any);

        expect(retrieveRawLaunchParams())
          .toBe(
            'tgWebAppStartParam=performance&tgWebAppPlatform=macos&tgWebAppVersion=7.3&tgWebAppThemeParams=%7B%7D',
          );
      },
    );
  });

  describe('session storage contains launch params', () => {
    it(
      'should return launch parameters from the session storage tapps/launchParams key. If data is missing or invalid, throw an error',
      () => {
        const spy = vi
          .spyOn(sessionStorage, 'getItem')
          .mockImplementationOnce(() => '');
        expect(() => retrieveRawLaunchParams()).toThrow();

        spy.mockClear();
        spy.mockImplementationOnce(() => {
          return '"tgWebAppPlatform=android&tgWebAppThemeParams=%7B%22bg_color%22%3A%22%23ffffff%22%7D&tgWebAppVersion=7.5"';
        });
        expect(retrieveRawLaunchParams())
          .toBe(
            'tgWebAppPlatform=android&tgWebAppThemeParams=%7B%22bg_color%22%3A%22%23ffffff%22%7D&tgWebAppVersion=7.5',
          );
      },
    );
  });
});

describe('retrieveRawLaunchParamsFp', () => {
  describe('window.location.href contains launch params', () => {
    it(
      'should retrieve launch params from the window.location.href. Throw an error if data is invalid or missing',
      () => {
        vi
          .spyOn(window.location, 'href', 'get')
          .mockImplementationOnce(() => {
            return '/abc?tgWebAppStartParam=location_hash#tgWebAppPlatform=tdesktop&tgWebAppVersion=7.0&tgWebAppThemeParams=%7B%7D';
          });

        expect(retrieveRawLaunchParamsFp()).toStrictEqual(E.right(
          'tgWebAppStartParam=location_hash&tgWebAppPlatform=tdesktop&tgWebAppVersion=7.0&tgWebAppThemeParams=%7B%7D',
        ));
      },
    );
  });

  describe('first navigation entry contains launch params', () => {
    it(
      'should retrieve launch params from the window.performance. Throw an error if data is invalid or missing',
      () => {
        vi
          .spyOn(performance, 'getEntriesByType')
          .mockImplementationOnce(() => [{
            name: '/abc?tgWebAppStartParam=performance#tgWebAppPlatform=macos&tgWebAppVersion=7.3&tgWebAppThemeParams=%7B%7D',
          }] as any);

        expect(retrieveRawLaunchParamsFp()).toStrictEqual(E.right(
          'tgWebAppStartParam=performance&tgWebAppPlatform=macos&tgWebAppVersion=7.3&tgWebAppThemeParams=%7B%7D',
        ));
      },
    );
  });

  describe('session storage contains launch params', () => {
    it(
      'should return launch parameters from the session storage tapps/launchParams key. If data is missing or invalid, throw an error',
      () => {
        const spy = vi
          .spyOn(sessionStorage, 'getItem')
          .mockImplementationOnce(() => '');
        expect(retrieveRawLaunchParamsFp()).toMatchObject(E.left(expect.anything()));

        spy.mockClear();
        spy.mockImplementationOnce(() => {
          return '"tgWebAppPlatform=android&tgWebAppThemeParams=%7B%22bg_color%22%3A%22%23ffffff%22%7D&tgWebAppVersion=7.5"';
        });
        expect(retrieveRawLaunchParamsFp()).toStrictEqual(E.right(
          'tgWebAppPlatform=android&tgWebAppThemeParams=%7B%22bg_color%22%3A%22%23ffffff%22%7D&tgWebAppVersion=7.5',
        ));
      },
    );
  });
});

```
---
## File: packages/bridge/src/launch-params.ts

```typescript
import { throwifyFpFn, getStorageValue, setStorageValue } from '@tma.js/toolkit';
import {
  parseLaunchParamsQueryFp,
  type LaunchParamsGenType,
  type ParseLaunchParamsQueryError,
} from '@tma.js/transformers';
import * as E from 'fp-ts/Either';
import * as O from 'fp-ts/Option';
import { flow, pipe } from 'fp-ts/function';

import { LaunchParamsRetrieveError } from '@/errors.js';

const SESSION_STORAGE_KEY = 'launchParams';

export type RetrieveRawInitDataError = RetrieveRawLaunchParamsError;
export type RetrieveRawLaunchParamsError = LaunchParamsRetrieveError;
export type RetrieveLaunchParamsError = RetrieveRawLaunchParamsError | ParseLaunchParamsQueryError;
export type RetrieveLaunchParamsResult = LaunchParamsGenType;

/**
 * @param urlString - URL to extract launch parameters from.
 * @returns Launch parameters from the specified URL.
 * @throws Error if function was unable to extract launch parameters from the
 *   passed URL.
 */
function retrieveLpFromUrl(urlString: string): string {
  return urlString
    // Replace everything before this first hashtag or question sign.
    .replace(/^[^?#]*[?#]/, '')
    // Replace all hashtags and question signs to make it look like some search
    // params.
    .replace(/[?#]/g, '&');
}

/**
 * @returns Launch parameters from any known source.
 */
export const retrieveLaunchParamsFp: () => E.Either<
  RetrieveLaunchParamsError,
  RetrieveLaunchParamsResult
> = flow(retrieveRawLaunchParamsFp, E.chainW(parseLaunchParamsQueryFp));

/**
 * @see retrieveLaunchParamsFp
 */
export const retrieveLaunchParams: () => RetrieveLaunchParamsResult =
  throwifyFpFn(retrieveLaunchParamsFp);

/**
 * @returns Raw init data from any known source.
 */
export const retrieveRawInitDataFp: () => E.Either<RetrieveRawInitDataError, O.Option<string>> =
  flow(retrieveRawLaunchParamsFp, E.map(raw => {
    const v = new URLSearchParams(raw).get('tgWebAppData');
    return v ? O.some(v) : O.none;
  }));

/**
 * @see retrieveRawInitDataFp
 */
export const retrieveRawInitData: () => string | undefined = flow(
  retrieveRawInitDataFp,
  E.fold(err => {
    throw err;
  }, v => v),
  O.match(() => undefined, v => v),
);

/**
 * @returns Launch parameters in a raw format from any known source.
 */
export function retrieveRawLaunchParamsFp(): E.Either<RetrieveRawLaunchParamsError, string> {
  const errors: { source: string; error: unknown }[] = [];

  for (const [retrieve, source] of [
    // Try to retrieve launch parameters from the current location. This method
    // can return nothing in case, location was changed, and then the page was
    // reloaded.
    [() => retrieveLpFromUrl(window.location.href), 'window.location.href'],
    // Then, try using the lower level API - window.performance.
    [() => {
      const navigationEntry = performance.getEntriesByType('navigation')[0] as PerformanceNavigationTiming | undefined;
      return navigationEntry && retrieveLpFromUrl(navigationEntry.name);
    }, 'performance navigation entries'],
    // Finally, try using the session storage.
    [() => getStorageValue<string>(SESSION_STORAGE_KEY), 'local storage'],
  ] as const) {
    const v = retrieve();
    if (!v) {
      errors.push({ source, error: new Error('Source is empty') });
      continue;
    }
    const maybeError = pipe(
      parseLaunchParamsQueryFp(v),
      E.foldW(err => err, () => true as const),
    );
    if (typeof maybeError !== 'boolean') {
      errors.push({ source, error: maybeError });
      continue;
    }
    setStorageValue(SESSION_STORAGE_KEY, v);
    return E.right(v);
  }
  return E.left(new LaunchParamsRetrieveError(errors));
}

/**
 * @see retrieveRawLaunchParamsFp
 */
export const retrieveRawLaunchParams = throwifyFpFn(retrieveRawLaunchParamsFp);

```
---
## File: packages/bridge/src/obj-prop-helpers.ts

```typescript
/**
 * Defines a property, that is a functions compose. Trying to set a value in this property
 * will lead to adding it to a function's pool. The property value will always be equal to a
 * function, calling all collected functions in the pool.
 *
 * Returned function performs a cleanup. It does one of the following:
 * 1. Removes the property if no functions were to the pool added other than the initial one.
 * 2. Sets the value equal to the first added function to the pool after the initial one if
 * the only one additional function was added at all. In other words, if the pool length is equal
 * to 2, the second item will be selected as the property value.
 * 3. Leaves the value equal to a function calling all pool functions, but removes the initially
 * added one.
 * @param obj - object.
 * @param propertyName - object property.
 * @param initialFn - an initial function to set.
 */
export function defineFnComposer(
  obj: any,
  propertyName: string,
  initialFn: (...args: any) => any,
): void {
  const assignedFunctions: any[] = [initialFn];

  const property = obj[propertyName];
  if (typeof property === 'function') {
    assignedFunctions.push(property);
  }

  const callAssignedFunctions = (...args: any) => {
    assignedFunctions.forEach(fn => fn(...args));
  };

  // Wrap the callPool function and add "unwrap" method to it.
  const unwrappableCallAssignedFunctions = Object.assign((...args: any) => {
    callAssignedFunctions(...args);
  }, {
    // Unwraps the composer.
    unwrap() {
      const { length: poolSize } = assignedFunctions;
      if (poolSize === 1) {
        // Only the initial handler is in the pool. In this case we just remove the property.
        delete obj[propertyName];
        return;
      }
      if (poolSize === 2) {
        // Only one additional handler was added. We set it as a value for the property.
        defineStaticProperty(obj, propertyName, assignedFunctions[1]);
        return;
      }
      // Many additional handlers were added. In this case we remove the initially added function
      // from the pool and leave the property value almost as is - only "unwrap" method will be
      // removed.
      assignedFunctions.unshift(1);
      defineStaticProperty(obj, propertyName, callAssignedFunctions);
    },
  });

  // This property should now always return our special function. Trying to set it to another
  // function should lead to just adding it to the pool of called functions.
  defineProxiedProperty(
    obj,
    propertyName,
    () => unwrappableCallAssignedFunctions,
    value => assignedFunctions.push(value),
  );
}

/**
 * Wires the specified property in the object preventing it from being overwritten. Instead, it
 * enhances the previous value by merging the current one with the passed one.
 * @param obj - object.
 * @param prop - object property to rewire.
 */
export function defineMergeableProperty(obj: any, prop: string): void {
  const value = obj[prop];
  defineProxiedProperty(obj, prop, () => value, v => {
    Object.entries(v).forEach(([objKey, objValue]) => {
      value[objKey] = objValue;
    });
  });
}

/**
 * Defines an enumerable and configurable property with a getter and setter.
 * @param obj - object.
 * @param prop - object property name.
 * @param get - getter to use.
 * @param set - setter to use.
 */
export function defineProxiedProperty(
  obj: any,
  prop: string,
  get: () => unknown,
  set: (v: any) => void,
) {
  Object.defineProperty(obj, prop, {
    enumerable: true,
    configurable: true,
    get,
    set,
  });
}

/**
 * Defines an enumerable, configurable and writable property with the initial value.
 * @param obj - object.
 * @param prop - object property name.
 * @param value - value to set.
 */
export function defineStaticProperty(obj: any, prop: string, value: any): void {
  Object.defineProperty(obj, prop, {
    enumerable: true,
    configurable: true,
    writable: true,
    value,
  });
}

```
---
## File: packages/bridge/src/start-param.test.ts

```typescript
import * as E from 'fp-ts/Either';
import { describe, expect, it } from 'vitest';

import {
  createStartParam,
  createStartParamFp,
  decodeStartParam,
  decodeStartParamFp,
  isSafeToCreateStartParam,
} from './start-param.js';

describe('createStartParam', () => {
  it('should return value\'s base64 representation if its length is less than 513', () => {
    expect(createStartParam('ABCDEF')).toBe('QUJDREVG');
  });

  it(
    'should return a base64 value based on the value\'s JSON.stringify representation if the value is not a string',
    () => {
      expect(createStartParam({ field: 'value' })).toBe('eyJmaWVsZCI6InZhbHVlIn0=');
    },
  );

  it('should throw if value\'s base64 representation length exceeds 512', () => {
    expect(() => createStartParam(
      new Array(385)
        .fill('A')
        .join(''),
    )).toThrow('Value is too long for start parameter');
  });
});

describe('createStartParamFp', () => {
  it('should return value\'s base64 representation if its length is less than 513', () => {
    expect(createStartParamFp('ABCDEF')).toMatchObject({ right: 'QUJDREVG' });
  });

  it(
    'should return a base64 value based on the value\'s JSON.stringify representation if the value is not a string',
    () => {
      expect(createStartParamFp({ field: 'value' })).toMatchObject({ right: 'eyJmaWVsZCI6InZhbHVlIn0=' });
    },
  );

  it('should throw if value\'s base64 representation length exceeds 512', () => {
    expect(createStartParamFp(
      new Array(385)
        .fill('A')
        .join(''),
    )).toMatchObject({ left: new Error('Value is too long for start parameter') });
  });
});

describe('decodeStartParam', () => {
  it('should properly decode ASCII value', () => {
    expect(decodeStartParam('QUJDREVG')).toBe('ABCDEF');
  });

  it('should properly decode Unicode value', () => {
    expect(decodeStartParam('0KLQtdC70LXQs9GA0LDQvA==')).toBe('Ð¢ÐµÐ»ÐµÐ³Ñ€Ð°Ð¼');
  });

  it('should apply specified parser to the decoded value', () => {
    expect(
      decodeStartParam('0KLQtdC70LXQs9GA0LDQvA==', v => {
        return v === 'Ð¢ÐµÐ»ÐµÐ³Ñ€Ð°Ð¼' ? 'Ð¢ÐµÐ»ÐµÐ³Ñ€Ð°Ð¼ ÐšÑ€ÑƒÑ‚Ð°' : 'Ð¢ÐµÐ»ÐµÐ³Ñ€Ð°Ð¼ ÐÐµ ÐšÑ€ÑƒÑ‚Ð°';
      }),
    ).toBe('Ð¢ÐµÐ»ÐµÐ³Ñ€Ð°Ð¼ ÐšÑ€ÑƒÑ‚Ð°');
  });

  it('should apply JSON.parse to the decoded value if the second argument is "json"', () => {
    expect(decodeStartParam('IlRlbGVncmFtIEtydXRhIg==', 'json')).toBe('Telegram Kruta');
  });
});

describe('decodeStartParamFp', () => {
  it('should properly decode ASCII value', () => {
    expect(decodeStartParamFp('QUJDREVG')).toMatchObject({ right: 'ABCDEF' });
  });

  it('should properly decode Unicode value', () => {
    expect(decodeStartParamFp('0KLQtdC70LXQs9GA0LDQvA==')).toMatchObject({ right: 'Ð¢ÐµÐ»ÐµÐ³Ñ€Ð°Ð¼' });
  });

  it('should apply specified parser to the decoded value', () => {
    expect(
      decodeStartParamFp('0KLQtdC70LXQs9GA0LDQvA==', v => {
        return E.right(v === 'Ð¢ÐµÐ»ÐµÐ³Ñ€Ð°Ð¼' ? 'Ð¢ÐµÐ»ÐµÐ³Ñ€Ð°Ð¼ ÐšÑ€ÑƒÑ‚Ð°' : 'Ð¢ÐµÐ»ÐµÐ³Ñ€Ð°Ð¼ ÐÐµ ÐšÑ€ÑƒÑ‚Ð°');
      }),
    ).toMatchObject({ right: 'Ð¢ÐµÐ»ÐµÐ³Ñ€Ð°Ð¼ ÐšÑ€ÑƒÑ‚Ð°' });
  });

  it('should apply JSON.parse to the decoded value if the second argument is "json"', () => {
    expect(decodeStartParamFp('IlRlbGVncmFtIEtydXRhIg==', 'json')).toMatchObject({ right: 'Telegram Kruta' });
  });
});

describe('isSafeToCreateStartParam', () => {
  it('should return true if value\'s base64 representation length is less than 513', () => {
    expect(
      isSafeToCreateStartParam(new Array(384)
        .fill('A')
        .join('')),
    ).toBe(true);
  });

  it('should return false if value\'s base64 representation length exceeds 512', () => {
    expect(
      isSafeToCreateStartParam(new Array(385)
        .fill('A')
        .join('')),
    ).toBe(false);
  });
});

```
---
## File: packages/bridge/src/start-param.ts

```typescript
import { throwifyFpFn, throwifyAnyEither } from '@tma.js/toolkit';
import * as E from 'fp-ts/Either';
import { pipe } from 'fp-ts/function';
import * as J from 'fp-ts/Json';

import { encodeBase64Url, type DecodeBase64UrlError, decodeBase64UrlFp } from '@/base64-url.js';

/**
 * Creates a safe start parameter value. If the value is not a string, the
 * function applies JSON.stringify to it, so make sure you are not passing an
 * object with circular references.
 *
 * @param value - value to create start parameter from.
 * @see Learn more about start parameter:
 * https://docs.telegram-mini-apps.com/platform/start-parameter
 */
export function createStartParamFp(value: unknown): E.Either<Error, string> {
  const b64 = encodeBase64Url(typeof value === 'string' ? value : JSON.stringify(value));
  return b64.length > 512
    ? E.left(new Error('Value is too long for start parameter'))
    : E.right(b64);
}

/**
 * @see createStartParamFp
 */
export const createStartParam = throwifyFpFn(createStartParamFp);

/**
 * @see decodeStartParamFp
 */
export function decodeStartParam<T>(value: string, parse: (value: string) => T): T;
/**
 * @see decodeStartParamFp
 */
export function decodeStartParam(value: string, as: 'json'): J.Json;
/**
 * @see decodeStartParamFp
 */
export function decodeStartParam(value: string): string;
export function decodeStartParam<T>(
  value: string,
  arg2?: 'json' | ((value: string) => T),
): string | unknown | T {
  return throwifyAnyEither(
    decodeStartParamFp(
      value,
      // @ts-expect-error TypeScript is unable to detect a correct override.
      typeof arg2 === 'function'
        ? (value: string) => E.tryCatch(() => arg2(value), e => e)
        : arg2,
    ),
  );
}

/**
 * Decodes a start parameter using a custom parser.
 * @param value - a start parameter value.
 * @param parse - a custom value parser.
 */
export function decodeStartParamFp<L, R>(
  value: string,
  parse: (value: string) => E.Either<L, R>,
): E.Either<L | DecodeBase64UrlError, R>;
/**
 * Decodes a start parameter assuming that the result is a JSON value.
 * @param value - a start parameter value.
 * @param as - result kind.
 */
export function decodeStartParamFp(
  value: string,
  as: 'json',
): E.Either<SyntaxError | DecodeBase64UrlError, J.Json>;
/**
 * Decodes a start parameter and returns its decoded representation.
 * @param value - a value to decode.
 */
export function decodeStartParamFp(value: string): E.Either<DecodeBase64UrlError, string>;
export function decodeStartParamFp<L, R>(
  value: string,
  arg2?: 'json' | ((value: string) => E.Either<L, R>),
): E.Either<DecodeBase64UrlError | SyntaxError | L, R | string | J.Json> {
  return pipe(
    decodeBase64UrlFp(value),
    E.chain<DecodeBase64UrlError | SyntaxError | L, string, R | string | J.Json>(decoded => {
      if (!arg2) {
        return E.right(decoded);
      }
      if (typeof arg2 === 'function') {
        return arg2(decoded);
      }
      return J.parse(decoded) as E.Either<SyntaxError, J.Json>;
    }),
  );
}

/**
 * @returns True if the passed value is safe to be used to create a start parameter value from it.
 * If true is returned, the value can be safely passed to the `createStartParam` function.
 * @param value - value to check.
 * @see createStartParam
 */
export function isSafeToCreateStartParam(value: string): boolean {
  return encodeBase64Url(value).length <= 512;
}

```
---
## File: packages/bridge/tools/getConfig.ts

```typescript
import { dirname, resolve } from 'node:path';
import { fileURLToPath } from 'node:url';
import type { LibraryFormats } from 'vite';
import dts from 'vite-plugin-dts';
import tsconfigPaths from 'vite-tsconfig-paths';
import { defineConfig, type UserConfigFn } from 'vitest/config';

import packageJson from '../package.json' with { type: "json" };

export function getConfig({
  input,
  formats,
  declarations,
  inlineModules,
}: {
  input: string;
  formats: LibraryFormats[];
  declarations?: boolean;
  inlineModules?: boolean;
}): UserConfigFn {
  return defineConfig(({ mode }) => {
    const tsconfigPath = mode === 'test'
      ? './tsconfig.test.json'
      : './tsconfig.build.json';

    return {
      plugins: [
        tsconfigPaths({ projects: [tsconfigPath] }),
        declarations && dts({ outDir: 'dist/dts', tsconfigPath }),
      ],
      resolve: {
        alias: {
          '@': resolve(dirname(fileURLToPath(import.meta.url)), '../src'),
        },
      },
      build: {
        outDir: 'dist',
        emptyOutDir: false,
        sourcemap: true,
        rollupOptions: {
          external: inlineModules ? [] : Object.keys(packageJson.dependencies)
        },
        lib: {
          name: 'tapps.bridge',
          entry: input,
          formats,
          fileName: 'index',
        },
      },
      test: {
        environment: 'happy-dom',
        coverage: {
          enabled: true,
          provider: 'v8',
          include: ['src/**/*.ts'],
          exclude: ['src/**/*.test.ts'],
          branches: 80,
          functions: 80,
          statements: 80,
          lines: 80,
        },
      },
    };
  });
}

```
---
## File: packages/bridge/CHANGELOG.md

```markdown
# @tma.js/bridge

## 2.1.3

### Patch Changes

- 9b46673: Make isTMA return false if the env is unknown.

## 2.1.2

### Patch Changes

- 458cd03: Make listening operation in `request` sync.

## 2.1.1

### Patch Changes

- 4570643: Update package.json actualizing all paths.
- Updated dependencies [4570643]
  - @tma.js/transformers@1.1.1
  - @tma.js/signals@1.0.1
  - @tma.js/toolkit@1.0.2
  - @tma.js/types@1.0.2

## 2.1.0

### Minor Changes

- 473d7fa: - Implement `getReleaseVersion` util.
  - Remove 'unknown' and 'CancelledError' from the `RequestError` type.

## 2.0.3

### Patch Changes

- Updated dependencies [e3a2af6]
- Updated dependencies [dab51c3]
  - @tma.js/transformers@1.1.0
  - @tma.js/types@1.0.1

## 2.0.2

### Patch Changes

- fefa2b4: properly handle error of postEvent in requestFp

## 2.0.1

### Patch Changes

- Updated dependencies [fe883d3]
  - @tma.js/toolkit@1.0.1
  - @tma.js/transformers@1.0.1

```
---
## File: packages/bridge/LICENSE

```text
MIT License

Copyright (c) 2025 Vladislav Kibenko

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

```
---
## File: packages/bridge/package.json

```json
{
  "name": "@tma.js/bridge",
  "version": "2.1.3",
  "description": "TypeScript package to provide communication layer between Mini App and Telegram application.",
  "author": "Vladislav Kibenko <wolfram.deus@gmail.com>",
  "homepage": "https://github.com/Telegram-Mini-Apps/tma.js#readme",
  "repository": {
    "type": "git",
    "url": "git@github.com:Telegram-Mini-Apps/tma.js.git",
    "directory": "packages/bridge"
  },
  "bugs": {
    "url": "https://github.com/Telegram-Mini-Apps/tma.js/issues"
  },
  "keywords": [
    "telegram-mini-apps",
    "typescript",
    "bridge"
  ],
  "license": "MIT",
  "type": "module",
  "sideEffects": false,
  "files": [
    "dist"
  ],
  "main": "./dist/index.cjs",
  "module": "./dist/index.js",
  "types": "./dist/dts/index.d.ts",
  "exports": {
    ".": {
      "types": "./dist/dts/index.d.ts",
      "import": "./dist/index.js",
      "require": "./dist/index.cjs",
      "default": "./dist/index.cjs"
    }
  },
  "scripts": {
    "test": "vitest --run",
    "lint": "eslint src",
    "lint:fix": "pnpm run lint --fix",
    "typecheck": "tsc --noEmit -p tsconfig.build.json",
    "build": "rimraf dist && pnpm run build:default && pnpm run build:iife",
    "build:default": "vite build -c vite.config.ts",
    "build:iife": "vite build -c vite.iife.config.ts"
  },
  "dependencies": {
    "@tma.js/signals": "workspace:^",
    "@tma.js/toolkit": "workspace:^",
    "@tma.js/transformers": "workspace:^",
    "@tma.js/types": "workspace:^",
    "better-promises": "^1.0.0",
    "error-kid": "^1.0.2",
    "fp-ts": "^2.16.11",
    "mitt": "^3.0.1",
    "valibot": "^1.1.0"
  },
  "devDependencies": {
    "test-utils": "workspace:*",
    "tsconfig": "workspace:*"
  },
  "publishConfig": {
    "access": "public"
  }
}

```
---
## File: packages/bridge/README.md

```markdown
# @tma.js/bridge

[code-badge]: https://img.shields.io/badge/source-black?logo=github

[docs-badge]: https://img.shields.io/badge/documentation-blue?logo=gitbook&logoColor=white

[link]: https://github.com/Telegram-Mini-Apps/tma.js/tree/master/tma.js/bridge

[docs-link]: https://docs.telegram-mini-apps.com/packages/tma-js-bridge

[npm-link]: https://npmjs.com/package/@tma.js/bridge

[npm-badge]: https://img.shields.io/npm/v/@tma.js/bridge?logo=npm

[size-badge]: https://img.shields.io/bundlephobia/minzip/@tma.js/bridge

[![NPM][npm-badge]][npm-link]
![Size][size-badge]
[![docs-badge]][docs-link]
[![code-badge]][link]

The lowest level communication layer with Telegram Mini Apps.

This package provides fundamental utilities and types for developing applications on the Telegram
Mini Apps platform.

While a developer can use this package alone, it's recommended to use a higher-level package
like [@tma.js/sdk](https://docs.telegram-mini-apps.com/packages/tma-js-sdk).

## Installation

```bash
pnpm i @tma.js/bridge
# or
npm i @tma.js/bridge
# or
yarn add @tma.js/bridge
```

## Usage

Hereâ€™s a basic example of how to use this package. For more details, refer to the package complete
[documentation](https://docs.telegram-mini-apps.com/packages/tma-js-bridge).

```ts
import { on, postEvent, applyPolyfills } from '@tma.js/bridge';

// The package uses some polyfills, so let's use them.
applyPolyfills();

// Show the back button, wait for it to be clicked once,
// then hide it.
postEvent('web_app_setup_back_button', { is_visible: true });

const off = on('back_button_pressed', () => {
  postEvent('web_app_setup_back_button', { is_visible: false });
  off();
});
```

```
---
## File: packages/bridge/tsconfig.build.json

```json
{
  "extends": "tsconfig/esnext-dom.json",
  "compilerOptions": {
    "paths": {
      "@/*": [
        "./src/*"
      ]
    }
  },
  "include": [
    "src"
  ],
  "exclude": [
    "src/**/*.test.ts"
  ]
}
```
---
## File: packages/bridge/tsconfig.eslint.json

```json
{
  "extends": "./tsconfig.build.json",
  "exclude": []
}
```
---
## File: packages/bridge/tsconfig.json

```json
{
  "extends": "./tsconfig.build.json",
  "references": [
    {
      "path": "./tsconfig.node.json"
    },
    {
      "path": "./tsconfig.test.json"
    }
  ]
}
```
---
## File: packages/bridge/tsconfig.node.json

```json
{
  "extends": "tsconfig/esnext.json",
  "compilerOptions": {
    "composite": true
  },
  "include": [
    "tools",
    "package.json",
    "vite.config.ts",
    "vite.iife.config.ts"
  ]
}

```
---
## File: packages/bridge/tsconfig.test.json

```json
{
  "extends": "tsconfig/esnext-dom.json",
  "compilerOptions": {
    "composite": true,
    "declaration": true,
    "paths": {
      "@/*": [
        "./src/*"
      ]
    }
  },
  "include": [
    "src"
  ],
  "exclude": []
}
```
---
## File: packages/bridge/vite.config.ts

```typescript
import { getConfig } from './tools/getConfig.js';

export default getConfig({
  input: 'src/index.ts',
  formats: ['es', 'cjs'],
  declarations: true,
});
```
---
## File: packages/bridge/vite.iife.config.ts

```typescript
import { getConfig } from './tools/getConfig.js';

export default getConfig({
  input: 'src/index.ts',
  formats: ['iife'],
  inlineModules: true,
});
```
---
## File: packages/create-mini-app/src/prompts/input.ts

```typescript
import {
  createPrompt,
  isEnterKey,
  makeTheme,
  useEffect,
  useKeypress,
  useState,
} from '@inquirer/core';
import figures from 'figures';

import { spaces } from '../utils/spaces.js';
import { lines } from '../utils/lines.js';
import type { CustomTheme } from '../types.js';

export const input = createPrompt<string, {
  /**
   * Input default value.
   */
  default?: string;
  /**
   * Input-related hint.
   */
  hint?: string;
  /**
   * Message to insert between the prefix and input.
   */
  message?: string;
  required?: boolean;
  theme: CustomTheme;
  /**
   * Validation function.
   * @param value
   */
  validate?: (value: string) => string | undefined | null;
}>(({
  theme,
  default: defaultValue,
  message,
  validate,
  hint,
  required,
}, done) => {
  const { style, prefix } = makeTheme(theme);
  const [value, setValue] = useState('');
  const [error, setError] = useState<string>();
  const [completed, setCompleted] = useState(false);

  function confirm(value: string): void {
    setValue(value);
    setError(undefined);
    setCompleted(true);
    done(value);
  }

  useEffect(() => {
    completed && done(value);
  }, [completed, done, value]);

  useKeypress((key, rl) => {
    if (isEnterKey(key)) {
      if (error) {
        return rl.write(value);
      }
      return value
        ? confirm(value)
        : defaultValue
          ? confirm(defaultValue)
          : required
            ? setError('The value must be provided')
            : confirm('');
    }

    if (key.name === 'tab' && !value) {
      // remove tab
      rl.clearLine(0);
      const v = defaultValue || '';
      rl.write(v);
      setValue(v);
      return;
    }

    const input = rl.line;
    setError((input && validate && validate(input)) || undefined);
    setValue(input);
  });

  return [
    spaces(
      prefix[completed ? 'done' : 'idle'],
      message && style.message(message, 'idle'),
      // TODO: We need some specific style for it.
      style.placeholder(completed ? figures.ellipsis : figures.pointerSmall),
      completed
        ? style.answer(value)
        : value || (defaultValue ? style.defaultAnswer(defaultValue) : ''),
    ),
    completed ? undefined : lines(hint && style.help(hint), error && style.error(error)),
  ];
});

```
---
## File: packages/create-mini-app/src/templates/promptTemplate/promptTemplate.ts

```typescript
/* eslint-disable @stylistic/line-comment-position */
import {
  createPrompt,
  isDownKey,
  isEnterKey,
  isSpaceKey,
  isUpKey,
  Separator,
  useKeypress,
  useMemo,
  useState,
} from '@inquirer/core';
import ansiEscapes from 'ansi-escapes';
import chalk from 'chalk';
import figures from 'figures';

import { lines } from '../../utils/lines.js';
import { findTemplate } from '../templates.js';
import { spaces } from '../../utils/spaces.js';
import type { Template } from '../types.js';
import type { CustomTheme } from '../../types.js';

import { findTitleByNameAndValue, sections } from './sections.js';
import type { Cell, SelectedChoices } from './types.js';

//#region Table settings.
const CORNER_TOP_LEFT = figures.lineDownBoldRightBold; // â”Œ
const CORNER_TOP_RIGHT = figures.lineDownBoldLeftBold; // â”
const CORNER_BOTTOM_LEFT = figures.lineUpBoldRightBold; // â””
const CORNER_BOTTOM_RIGHT = figures.lineUpBoldLeftBold; // â”˜
const LINE_HOR_T_DOWN = figures.lineDownBoldLeftBoldRightBold; // â”¬
const LINE_HOR_T_UP = figures.lineUpBoldLeftBoldRightBold; // â”¬
const LINE_HOR = figures.lineBold; // â”ƒ
const LINE_VER = figures.lineVerticalBold; // â”
const PADDING_HOR_LEFT = 1;
const PADDING_HOR_RIGHT = 3;
//#endregion

export const promptTemplate = createPrompt<Template, { theme: CustomTheme }>(
  ({
    theme: { style, prefix },
  }, done) => {
    // Selection coordinates.
    const [x, setX] = useState(0);
    const [y, setY] = useState(0);

    // Map of selected choices.
    const [selected, setSelected] = useState<SelectedChoices>(
      useMemo(() => {
        return sections.reduce<SelectedChoices>((acc, section) => {
          section.choices.forEach(item => {
            if (item.defaultChecked) {
              (acc as any)[section.name] = item.value;
            }
          });

          return acc;
        }, { framework: 'react', sdk: 'tmajs', language: 'ts' });
      }, []),
    );

    // True, if the user confirmed his choice.
    const [completed, setCompleted] = useState(false);

    // Chosen template.
    const template = findTemplate(selected.language, selected.sdk, selected.framework);

    // Maximum Y user can reach.
    const maxY = useMemo(() => sections[x].choices.length - 1, [x]);

    // Each column widths along with generated rows data.
    const [lengths, rows] = useMemo(() => {
      const lengths = new Array<number>(sections.length).fill(0);
      const rows: Cell[][] = [[]];
      let maxChoicesCount = 0;

      sections.forEach((section, sIdx) => {
        // We add these 2 spaces on purpose, to align header with cells, containing additional
        // symbols before their title.
        const sectionTitle = `  ${section.title}`;

        // Re-compute maximums.
        lengths[sIdx] = Math.max(lengths[sIdx], sectionTitle.length);
        maxChoicesCount = Math.max(section.choices.length, maxChoicesCount);

        // Add title.
        rows[0].push({
          title: chalk.bold(sectionTitle),
          length: sectionTitle.length,
        });

        // Render all other rows.
        section.choices.forEach((choice, choiceIdx) => {
          const isActive = sIdx === x && choiceIdx === y;
          const isSelected = selected[section.name] === choice.value;
          const choiceLength = choice.title.length + 4;

          const pointer = isActive ? prefix.pointer : ' ';
          const cursor = isSelected
            ? template
              ? template.deprecationReason
                ? chalk.yellow(figures.radioOn)
                : chalk.green(figures.radioOn)
              : chalk.red(figures.radioOn)
            : style.placeholder(figures.radioOff);

          lengths[sIdx] = Math.max(lengths[sIdx], choiceLength);

          rows[choiceIdx + 1] ||= sections.map(() => ({ title: '', length: 0 }));
          rows[choiceIdx + 1][sIdx] = {
            title: spaces(
              pointer,
              cursor,
              isSelected ? chalk.bold(choice.title) : chalk.dim(choice.title),
            ),
            length: choiceLength,
          };
        });
      });

      return [lengths, rows];
    }, [x, y, selected]);

    // Horizontal lines for each column.
    const horizontalColumnLines = lengths.map(l => {
      return LINE_HOR.repeat(l + PADDING_HOR_LEFT + PADDING_HOR_RIGHT);
    });

    // Left and right cell paddings.
    const paddingLeft = ' '.repeat(PADDING_HOR_LEFT);
    const paddingRight = ' '.repeat(PADDING_HOR_RIGHT);

    const message = spaces(
      prefix[completed ? 'done' : 'idle'],
      style.message('Preferred technologies:', 'idle'),
    );

    if (completed) {
      const lang = findTitleByNameAndValue('language', template!.language);
      const framework = findTitleByNameAndValue('framework', template!.framework);
      const sdk = findTitleByNameAndValue('sdk', template!.sdk);

      return spaces(
        // Message.
        message,

        // Selected technologies.
        `${chalk.bold.blue(framework)}, ${chalk.bold.blue(lang)} and ${chalk.bold.blue(sdk)}`,
      );
    }

    useKeypress(key => {
      if (isSpaceKey(key)) {
        const section = sections[x];
        return setSelected({
          ...selected,
          [section.name]: section.choices[y].value,
        });
      }

      if (isEnterKey(key)) {
        if (template) {
          done(template);
          setCompleted(true);
        }
      }

      if (isUpKey(key)) {
        setY(y === 0 ? maxY : y - 1);
        return;
      }

      if (isDownKey(key)) {
        setY(y === maxY ? 0 : y + 1);
        return;
      }

      if (key.name === 'right') {
        const nextX = x === sections.length - 1 ? 0 : x + 1;
        const section = sections[nextX];
        if (y >= section.choices.length) {
          setY(section.choices.length - 1);
        }
        return setX(nextX);
      }

      if (key.name === 'left') {
        const nextX = x === 0 ? sections.length - 1 : x - 1;
        const section = sections[nextX];
        if (y >= section.choices.length) {
          setY(section.choices.length - 1);
        }
        return setX(nextX);
      }
    });

    return lines(
      // Message.
      message,

      // Upper border.
      [CORNER_TOP_LEFT, horizontalColumnLines.join(LINE_HOR_T_DOWN), CORNER_TOP_RIGHT].join(''),

      // Table body.
      rows.map(row => [
        // Cell left border.
        LINE_VER,
        paddingLeft,
        row
          .map((cell, columnIdx) => cell.title + ' '.repeat(lengths[columnIdx] - cell.length))
          .join(`${paddingRight}${LINE_VER}${paddingLeft}`),
        paddingRight,
        // Cell right border.
        LINE_VER,
      ].join('')),

      // Lower border.
      [CORNER_BOTTOM_LEFT, horizontalColumnLines.join(LINE_HOR_T_UP), CORNER_BOTTOM_RIGHT].join(''),

      // Help tip.
      [
        `${style.key('space')} to select`,
        style.key(figures.arrowUp),
        style.key(figures.arrowDown),
        `${style.key(figures.arrowLeft)} and ${style.key(figures.arrowDown)} to change the cursor`,
      ].join(', '),

      new Separator().separator,

      // Deprecation warning.
      template && template.deprecationReason
        ? style.warning(template.deprecationReason)
        : undefined,

      // Selection status.
      template
        ? style.success(`A template using these technologies was discovered. Press ${style.key(
          'enter',
        )} to proceed.`)
        : style.error('Unable to find a template using these technologies'),

      style.help(
        'According to selected technologies, the CLI tool will pick a corresponding template, which will be used as a base for your application.',
      ),

      ansiEscapes.cursorHide,
    );
  },
);

```
---
## File: packages/create-mini-app/src/templates/promptTemplate/sections.ts

```typescript
import type { Section } from './types.js';
import type { Framework, Language, SDK } from '../types.js';

export const sections: Section[] = [
  {
    title: 'Language',
    name: 'language',
    choices: [
      { title: 'TypeScript', value: 'ts', defaultChecked: true },
      { title: 'JavaScript', value: 'js' },
    ],
  },
  {
    title: 'SDK',
    name: 'sdk',
    choices: [
      { title: '@tma.js', value: 'tmajs', defaultChecked: true },
      { title: 'Telegram SDK', value: 'tsdk' },
    ],
  },
  {
    title: 'Framework',
    name: 'framework',
    choices: [
      { title: 'React.js', value: 'react', defaultChecked: true },
      { title: 'Solid.js', value: 'solid' },
      { title: 'Next.js', value: 'next' },
      { title: 'Vue.js', value: 'vue' },
      { title: 'jQuery', value: 'jquery' },
      { title: 'None', value: 'none' },
    ],
  },
];

export function findTitleByNameAndValue(name: 'language', value: Language): string | undefined;
export function findTitleByNameAndValue(name: 'framework', value: Framework): string | undefined;
export function findTitleByNameAndValue(name: 'sdk', value: SDK): string | undefined;
export function findTitleByNameAndValue(
  name: 'language' | 'framework' | 'sdk',
  value: string,
): string | undefined {
  return sections
    .find(s => s.name === name)
    ?.choices
    .find(c => c.value === value)
    ?.title;
}

```
---
## File: packages/create-mini-app/src/templates/promptTemplate/types.ts

```typescript
import type { Framework, Language, SDK } from '../types.js';

interface CreateSection<N, V> {
  title: string;
  name: N;
  choices: Choice<V>[];
}

export interface Choice<V> {
  title: string;
  value: V;
  defaultChecked?: boolean;
  deprecationReason?: string;
}

export type Section =
  | CreateSection<'framework', Framework>
  | CreateSection<'sdk', SDK>
  | CreateSection<'language', Language>;

export interface Cell {
  title: string;
  length: number;
}

export interface SelectedChoices {
  framework: Framework;
  sdk: SDK;
  language: Language;
}

```
---
## File: packages/create-mini-app/src/templates/templates.ts

```typescript
import type { Template, Framework, Language, SDK } from './types.js';

function jsRepo(name: string) {
  return {
    repository: name,
    deprecationReason: 'JavaScript templates are not supported and most likely to be outdated. To use more actual template, consider using TypeScript alternatives.',
  };
}

function jQueryRepo(name: string) {
  return {
    repository: name,
    deprecationReason: 'jQuery template is not supported and most likely to be outdated. To use more actual template, consider using other technologies.',
  };
}

function pureRepo(name: string) {
  return {
    repository: name,
    deprecationReason: 'Pure JavaScript and TypeScript templates are not supported and most likely to be outdated. To use more actual template, consider using other technologies.',
  };
}

const templates: {
  [lang in Language]?: {
    [sdk in SDK]?: {
      [framework in Framework]?: string | {
        repository: string;
        deprecationReason?: string;
      };
    };
  };
} = {
  js: {
    tmajs: {
      react: jsRepo('reactjs-js-template'),
      solid: jsRepo('solidjs-js-template'),
      next: jsRepo('nextjs-js-template'),
      jquery: jQueryRepo('js-template'),
      none: pureRepo('vanillajs-template'),
    },
    tsdk: {
      react: jsRepo('reactjs-js-tsdk-template'),
      solid: jsRepo('solidjs-js-tsdk-template'),
      next: jsRepo('nextjs-js-tsdk-template'),
      jquery: jQueryRepo('js-tsdk-template'),
      none: pureRepo('vanillajs-tsdk-template'),
    },
  },
  ts: {
    tmajs: {
      react: 'reactjs-template',
      solid: 'solidjs-template',
      next: 'nextjs-template',
      jquery: jQueryRepo('typescript-template'),
      vue: 'vuejs-template',
    },
    tsdk: {
      react: 'reactjs-tsdk-template',
      solid: 'solidjs-tsdk-template',
      next: 'nextjs-tsdk-template',
      jquery: jQueryRepo('typescript-tsdk-template'),
    },
  },
};

/**
 * Leaves only templates with specified technologies.
 * @param language - programming language.
 * @param sdk - SDK to use as the base one.
 * @param framework - target framework.
 */
export function findTemplate(
  language: Language,
  sdk: SDK,
  framework: Framework,
): Template | undefined {
  const repo = templates[language]?.[sdk]?.[framework];
  if (!repo) {
    return;
  }
  const repoName = typeof repo === 'string' ? repo : repo.repository;
  const deprecationReason = typeof repo === 'string' ? undefined : repo.deprecationReason;

  return {
    sdk,
    language,
    framework,
    deprecationReason,
    repository: {
      clone: {
        https: `https://github.com/Telegram-Mini-Apps/${repoName}.git`,
        ssh: `git@github.com:Telegram-Mini-Apps/${repoName}.git`,
      },
      link: `github.com/Telegram-Mini-Apps/${repoName}`,
    },
  };
}

```
---
## File: packages/create-mini-app/src/templates/types.ts

```typescript
export interface TemplateRepository {
  clone: {
    https: string;
    ssh: string;
  };
  link: string;
}

export interface Template {
  sdk: SDK;
  language: Language;
  framework: Framework;
  repository: TemplateRepository;
  deprecationReason?: string;
}

export type Language = 'js' | 'ts';
export type SDK = 'tsdk' | 'tmajs';
export type Framework = 'solid' | 'react' | 'next' | 'jquery' | 'vue' | 'none';

```
---
## File: packages/create-mini-app/src/utils/lines.ts

```typescript
type Item = string | null | boolean | undefined;

export function lines(...arr: (Item | Item[])[]): string {
  return arr.flat(1).filter(v => typeof v === 'string')
    .join('\n');
}

```
---
## File: packages/create-mini-app/src/utils/spaces.ts

```typescript
type Item = string | null | boolean | undefined;

export function spaces(...arr: (Item | Item[])[]): string {
  return arr.flat(1).filter(v => typeof v === 'string')
    .join(' ');
}

```
---
## File: packages/create-mini-app/src/cloneTemplate.ts

```typescript
import chalk from 'chalk';

import { spawnWithSpinner } from './spawnWithSpinner.js';
import type { TemplateRepository } from './templates/types.js';
import type { CustomTheme } from './types.js';

/**
 * Clones the template.
 * @param rootDir - root directory.
 * @param https - repository https link.
 * @param ssh - repository ssh link.
 * @param link - repository GitHub link.
 * @param theme - inquirer theme.
 */
export async function cloneTemplate(
  rootDir: string,
  {
    clone: { https, ssh },
    link,
  }: TemplateRepository,
  theme: CustomTheme,
): Promise<void> {
  const messageSuccess = `Cloned template: ${chalk.blue(link)}`;

  // Clone the template using HTTPS.
  try {
    await spawnWithSpinner({
      command: `git clone "${https}" "${rootDir}"`,
      message: `Cloning the template from GitHub (HTTPS): ${chalk.bold.blue(https)}`,
      messageFail: error => `Failed to load the template using HTTPS. ${error}`,
      messageSuccess,
      theme,
    });
    return;
  } catch {
  }

  // Clone the template using SSH.
  await spawnWithSpinner({
    command: `git clone "${ssh}" "${rootDir}"`,
    message: `Cloning the template from GitHub (SSH): ${chalk.bold.blue(ssh)}`,
    messageFail: error => `Failed to load the template using SSH. ${error}`,
    messageSuccess,
    theme,
  });
}

```
---
## File: packages/create-mini-app/src/createCustomTheme.ts

```typescript
import { makeTheme } from '@inquirer/core';
import chalk from 'chalk';
import figures from 'figures';

import type { CustomTheme } from './types.js';

/**
 * Creates a custom theme.
 */
export function createCustomTheme(): CustomTheme {
  return makeTheme({
    style: {
      error(text: string): string {
        return chalk.red(text);
      },
      success(text: string): string {
        return chalk.green(text);
      },
      placeholder(text: string): string {
        return chalk.dim(text);
      },
      warning(text: string): string {
        return chalk.yellow(`${figures.warning} ${text}`);
      },
    },
    prefix: {
      idle: chalk.blue('?'),
      done: chalk.green(figures.tick),
      pointer: figures.arrowRight,
    },
  });
}

```
---
## File: packages/create-mini-app/src/index.ts

```typescript
#!/usr/bin/env node
import process from 'node:process';
import { rm } from 'node:fs/promises';
import { resolve } from 'node:path';
import { URL } from 'node:url';
import { existsSync } from 'node:fs';

import chalk from 'chalk';
import { program } from 'commander';

import { cloneTemplate } from './cloneTemplate.js';
import { isGitInstalled } from './isGitInstalled.js';
import { promptTemplate } from './templates/promptTemplate/promptTemplate.js';
import { spawnWithSpinner } from './spawnWithSpinner.js';
import { lines } from './utils/lines.js';
import type { TemplateRepository } from './templates/types.js';
import { input } from './prompts/input.js';
import { createCustomTheme } from './createCustomTheme.js';

import packageJson from '../package.json' with { type: 'json' };

program
  .name(packageJson.name)
  .description(packageJson.description)
  .version(packageJson.version)
  .action(async () => {
    const theme = createCustomTheme();

    // Check if git is installed.
    if (!await isGitInstalled()) {
      console.log(
        theme.style.error(
          'To run this CLI tool, you must have git installed. Installation guide: https://git-scm.com/book/en/v2/Getting-Started-Installing-Git',
        ),
      );
      process.exit(1);
    }

    // Step 1: Prompt the project root directory.
    let rootDir: string | null = null;
    try {
      rootDir = await input({
        message: 'Directory name:',
        required: true,
        default: 'mini-app',
        hint: 'This directory will be used as a root directory for the project. It is allowed to use alphanumeric latin letters, dashes and dots.',
        theme,
        validate(value) {
          if (['.', '..'].includes(value)) {
            return 'Value is not a valid directory name';
          }

          if (!value.match(/^[a-zA-Z0-9\-.]+$/)) {
            return 'Value contains invalid symbols';
          }

          if (existsSync(resolve(value))) {
            return `Directory "${value}" already exists`;
          }
        },
      });
    } catch {
      process.exit(0);
    }

    // Step 2: Prompt the target template.
    let repository: TemplateRepository;
    try {
      const { repository: promptRepo } = await promptTemplate({ theme });
      repository = promptRepo;
    } catch {
      process.exit(0);
    }

    // Step 3: Prompt future Git repository information.
    let gitRepo: string | undefined;
    try {
      gitRepo = await input({
        message: 'Git remote repository URL:',
        validate(value) {
          // Check if it is SSH connection string.
          if (value.match(/\w+@[\w\-.]+:[\w-]+\/[\w./]+/)) {
            return;
          }

          // Check if the specified value is URL.
          try {
            new URL(value);
            return '';
          } catch {
            return 'Value is not considered as URL link or SSH connection string.';
          }
        },
        theme,
        hint: lines(
          'This value will be used to connect created project with your remote Git repository. It should either be an HTTPS link or SSH connection string.',
          `Leave value empty and press ${theme.style.key('enter')} to skip this step.`,
          chalk.bold('Examples'),
          'SSH: git@github.com:user/repo.git',
          'URL: https://github.com/user/repo.git',
        ),
      });
    } catch {
      process.exit(0);
    }

    // Step 4: Clone the template.
    try {
      await cloneTemplate(rootDir, repository, theme);
    } catch {
      process.exit(1);
    }

    // Step 5: Remove the .git folder.
    try {
      await spawnWithSpinner({
        message: 'Removing the .git directory.',
        command: () => rm(resolve(rootDir, '.git'), { recursive: true }),
        messageFail: (err: string) => `Failed to remove the .git directory. Error: ${err}`,
        messageSuccess: '.git directory removed.',
        theme,
      });
    } catch {
      process.exit(1);
    }

    // Step 6: Initialize a new .git folder and configure remote.
    if (gitRepo) {
      try {
        await spawnWithSpinner({
          message: `Initializing Git repository: ${gitRepo}`,
          command: [
            `cd "${rootDir}"`,
            'git init',
            `git remote add origin "${gitRepo}"`,
          ].join(' && '),
          messageFail: error => `Failed to initialize Git repository. ${error}`,
          messageSuccess: `Git repository initialized. Remote "origin" was set to "${gitRepo}"`,
          theme,
        });
      } catch {
        // We are not doing anything as long as this step is not really that important.
        // Nevertheless, a developer will be notified about something went wrong.
      }
    }

    console.log(
      lines(
        chalk.green.bold('Your project has been successfully initialized!'),
        `Now, open the "${chalk.bold(rootDir)}" directory and follow the instructions presented in the ${chalk.bold(
          'README.md',
        )} file. ${chalk.bold('Happy coding! ðŸš€')}`,
      ),
    );
  });

program.parse();

```
---
## File: packages/create-mini-app/src/isGitInstalled.ts

```typescript
import { spawn } from 'node:child_process';

/**
 * @returns Promise with true if git is currently installed.
 */
export function isGitInstalled(): Promise<boolean> {
  return new Promise(res => {
    spawn('git --version', { shell: true }).on('exit', code => {
      res(!code);
    });
  });
}

```
---
## File: packages/create-mini-app/src/spawnWithSpinner.ts

```typescript
import { spawn } from 'node:child_process';

import chalk from 'chalk';
import ora from 'ora';

import { CustomTheme } from './types.js';

interface SharedOptions {
  message: string;
  messageSuccess?: string;
  messageFail?: string | ((error: string) => string);
  theme: CustomTheme;
}

interface TerminalOptions extends SharedOptions {
  /**
   * Shell command to run.
   */
  command: string;
}

interface OperationOptions extends SharedOptions {
  /**
   * Action to execute.
   */
  command: () => Promise<any>;
}

function formatError(e: unknown): string {
  return e instanceof Error
    ? e.message
    : typeof e === 'string'
      ? e
      : JSON.stringify(e);
}

/**
 * Spawns new process with spinner.
 * @param options - function options.
 */
export function spawnWithSpinner({
  command,
  message,
  messageFail,
  messageSuccess,
  theme: {
    style,
    spinner: themeSpinner,
  },
}: TerminalOptions | OperationOptions): Promise<void> {
  const spinner = ora({
    text: style.message(message, 'loading'),
    hideCursor: false,
    spinner: themeSpinner,
  }).start();

  const success = messageSuccess && style.message(messageSuccess, 'done');

  if (typeof command === 'function') {
    return command()
      .then(() => {
        spinner.succeed(success);
      })
      .catch(e => {
        const errString = formatError(e);
        spinner.fail(
          style.error(
            messageFail
              ? typeof messageFail === 'string'
                ? messageFail
                : messageFail(errString)
              : errString,
          ),
        );

        throw e;
      });
  }

  return new Promise((res, rej) => {
    const proc = spawn(command, { shell: true });

    // Buffer which contains error data.
    let errBuf = Buffer.from([]);

    // When something was received from the error channel, we append it to the final buffer.
    proc.stderr.on('data', (buf: Buffer) => {
      errBuf = Buffer.concat([errBuf, buf]);

      // Update the spinner text to let user know, process is working.
      spinner.suffixText = chalk.bgGray.italic(buf.toString());
    });

    proc.on('exit', code => {
      // Drop process outputs.
      spinner.suffixText = '';

      // If error code was not returned. It means, process completed successfully.
      if (!code) {
        spinner.succeed(success);
        res();
        return;
      }

      const errString = errBuf.length ? errBuf.toString() : `Error code: ${code}`;
      const errorMessage = style.error(
        messageFail
          ? typeof messageFail === 'string'
            ? messageFail
            : messageFail(errString)
          : errString,
      );

      spinner.fail(errorMessage);
      rej(new Error(errorMessage));
    });
  });
}

```
---
## File: packages/create-mini-app/src/types.ts

```typescript
import type { Status } from '@inquirer/core';

export type CustomTheme = {
  spinner: {
    /**
     * The time interval between frames, in milliseconds.
     *
     * @defaultValue
     * ```ts
     * 80
     * ```
     */
    interval: number;
    /**
     * A list of frames to show for the spinner.
     *
     * @defaultValue
     * ```ts
     * ['â ‹', 'â ™', 'â ¹', 'â ¸', 'â ¼', 'â ´', 'â ¦', 'â §', 'â ‡', 'â ']
     * ```
     */
    frames: string[];
  };
  style: {
    /**
     * Style to apply to the user's answer once it has been submitted.
     *
     * @param text - The user's answer.
     * @returns The styled answer.
     *
     * @defaultValue
     * ```ts
     * // import colors from 'yoctocolors-cjs';
     * (text) => colors.cyan(text)
     * ```
     */
    answer: (text: string) => string;
    /**
     * Style to apply to the message displayed to the user.
     *
     * @param text - The message to style.
     * @param status - The current status of the prompt.
     * @returns The styled message.
     *
     * @defaultValue
     * ```ts
     * // import colors from 'yoctocolors-cjs';
     * (text, status) => colors.bold(text)
     * ```
     */
    message: (text: string, status: Status) => string;
    /**
     * Style to apply to error messages.
     *
     * @param text - The error message.
     * @returns The styled error message.
     *
     * @defaultValue
     * ```ts
     * // import colors from 'yoctocolors-cjs';
     * (text) => colors.red(`> ${text}`)
     * ```
     */
    error: (text: string) => string;
    /**
     * Style to apply to the default answer when one is provided.
     *
     * @param text - The default answer.
     * @returns The styled default answer.
     *
     * @defaultValue
     * ```ts
     * // import colors from 'yoctocolors-cjs';
     * (text) => colors.dim(`(${text})`)
     * ```
     */
    defaultAnswer: (text: string) => string;
    /**
     * Style to apply to help text.
     *
     * @param text - The help text.
     * @returns The styled help text.
     *
     * @defaultValue
     * ```ts
     * // import colors from 'yoctocolors-cjs';
     * (text) => colors.dim(text)
     * ```
     */
    help: (text: string) => string;
    /**
     * Style to apply to highlighted text.
     *
     * @param text - The text to highlight.
     * @returns The highlighted text.
     *
     * @defaultValue
     * ```ts
     * // import colors from 'yoctocolors-cjs';
     * (text) => colors.cyan(text)
     * ```
     */
    highlight: (text: string) => string;
    /**
     * Style to apply to keyboard keys referred to in help texts.
     *
     * @param text - The key to style.
     * @returns The styled key.
     *
     * @defaultValue
     * ```ts
     * // import colors from 'yoctocolors-cjs';
     * (text) => colors.cyan(colors.bold(`<${text}>`))
     * ```
     */
    key: (text: string) => string;
    success(text: string): string;
    placeholder(text: string): string;
    warning(text: string): string;
  };
  prefix: {
    idle: string;
    done: string;
    pointer: string;
  };
};

```
---
## File: packages/create-mini-app/CHANGELOG.md

```markdown
# @tma.js/create-mini-app

## 1.0.1

### Patch Changes

- 4570643: Update package.json actualizing all paths.

```
---
## File: packages/create-mini-app/package.json

```json
{
  "name": "@tma.js/create-mini-app",
  "version": "1.0.1",
  "description": "CLI tool to scaffold your new mini application on the Telegram Mini Apps platform.",
  "author": "Vladislav Kibenko <wolfram.deus@gmail.com>",
  "homepage": "https://github.com/Telegram-Mini-Apps/tma.js#readme",
  "repository": {
    "type": "git",
    "url": "git@github.com:Telegram-Mini-Apps/tma.js.git",
    "directory": "packages/create-mini-app"
  },
  "bugs": {
    "url": "https://github.com/Telegram-Mini-Apps/tma.js/issues"
  },
  "keywords": [
    "telegram-mini-apps",
    "templates",
    "boilerplates"
  ],
  "license": "MIT",
  "type": "module",
  "sideEffects": false,
  "files": [
    "dist"
  ],
  "bin": "dist/index.js",
  "scripts": {
    "lint": "eslint src",
    "lint:fix": "pnpm run lint --fix",
    "typecheck": "tsc --noEmit",
    "build": "vite build",
    "watch": "vite build --watch"
  },
  "devDependencies": {
    "@types/node": "^22.9.0",
    "tsconfig": "workspace:*"
  },
  "publishConfig": {
    "access": "public"
  },
  "dependencies": {
    "@inquirer/core": "^10.3.0",
    "ansi-escapes": "^7.1.1",
    "chalk": "^5.6.2",
    "commander": "^14.0.1",
    "figures": "^6.1.0",
    "ora": "^9.0.0"
  }
}

```
---
## File: packages/create-mini-app/README.md

```markdown
# @tma.js/create-mini-app

[code-badge]: https://img.shields.io/badge/source-black?logo=github

[docs-badge]: https://img.shields.io/badge/documentation-blue?logo=gitbook&logoColor=white

[code-link]: https://github.com/Telegram-Mini-Apps/tma.js/tree/master/packages/create-mini-app

[docs-link]: https://docs.telegram-mini-apps.com/packages/tma-js-create-mini-app

[npm-link]: https://npmjs.com/package/@tma.js/create-mini-app

[npm-badge]: https://img.shields.io/npm/v/@tma.js/create-mini-app?logo=npm

[![NPM][npm-badge]][npm-link]
[![docs-badge]][docs-link]
[![code-badge]][code-link]

CLI tool to scaffold your new mini application on the Telegram Mini Apps platform.

## Usage

To run the tool, use one of the following scripts depending on your package manager.

```bash
# npm
npx @tma.js/create-mini-app

# yarn
yarn create @tma.js/mini-app

# pnpm
pnpm dlx @tma.js/create-mini-app
```

The tool will launch the project initialization process, prompting you with questions related to the
required technologies for your project and ultimately creating your project using some well-known
templates.
```
---
## File: packages/create-mini-app/tsconfig.eslint.json

```json
{
  "extends": "./tsconfig.json"
}
```
---
## File: packages/create-mini-app/tsconfig.json

```json
{
  "extends": "tsconfig/esnext.json",
  "compilerOptions": {
    "module": "NodeNext",
    "types": ["node"]
  },
  "include": [
    "src"
  ]
}
```
---
## File: packages/create-mini-app/vite.config.ts

```typescript
import { defineConfig } from 'vite';
import shebang from 'rollup-plugin-preserve-shebang';

export default defineConfig({
  plugins: [
    shebang({
      shebang: '#!/usr/bin/env node',
    }),
  ],
  build: {
    emptyOutDir: true,
    ssr: true,
    lib: {
      entry: 'src/index.ts',
      formats: ['es'],
      fileName: 'index',
    },
  },
});
```
---
## File: packages/init-data-node/src/entries/node.test.ts

```typescript
import { afterEach, describe, expect, it, vi } from 'vitest';

import { arrayBufferToHex, bufferToArrayBuffer } from '../buf-converters.js';
import {
  AuthDateInvalidError,
  ExpiredError,
  hashToken,
  isValid,
  sign,
  SignatureInvalidError,
  SignatureMissingError,
  signData,
  validate,
} from './node';

const sp = 'user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%20%2B%20-%20%3F%20%5C%2F%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%22%7D&chat_instance=8134722200314281151&chat_type=private&auth_date=1733584787&signature=zL-ucjNyREiHDE8aihFwpfR9aggP2xiAo3NSpfe-p7IbCisNlDKlo7Kb6G4D0Ao2mBrSgEk4maLSdv6MLIlADQ&hash=2174df5b000556d044f3f020384e879c8efcab55ddea2ced4eb752e93e7080d6';
const spObject = new URLSearchParams(sp);

const botId = 7342037359;
const secretToken = `${botId}:AAFZehRPBRs8Seg40oDjTMIW8uTGPuW1zfQ`;
const secretTokenHashed = 'c0881d6d547967540dcb06d7378a2c2b2c79a8f915ae70a4a37a8a04de0da32b';

afterEach(() => {
  vi.restoreAllMocks();
});

describe('hashToken', () => {
  it('should properly hash token', () => {
    expect(arrayBufferToHex(bufferToArrayBuffer(hashToken('my-secret-token'))))
      .toBe('fe37f490481d351837ed49f3b369c886c61013d6d036656fc3c9c92e163e3477');
  });
});

describe('isValid', () => {
  it('should return false if "hash" param is missing', () => {
    expect(isValid('auth_date=1', secretToken)).toBe(false);
  });

  it('should return false if "auth_date" param is missing or does not represent integer', () => {
    expect(isValid('hash=HHH', secretToken)).toBe(false);
    expect(isValid('auth_date=AAA&hash=HHH', secretToken)).toBe(false);
  });

  it('should return false if parameters are expired', () => {
    expect(isValid(sp, secretToken, { expiresIn: 1 })).toBe(false);
  });

  it('should return false if sign is invalid', () => {
    expect(isValid(sp, `${secretToken}A`, { expiresIn: 0 })).toBe(false);
  });

  it('should return true if init data is valid', () => {
    const basicOptions = { expiresIn: 0 };
    const hashedOptions = { ...basicOptions, tokenHashed: true };
    expect(isValid(sp, secretToken, basicOptions)).toBe(true);
    expect(isValid(sp, secretTokenHashed, hashedOptions)).toBe(true);

    expect(isValid(spObject, secretToken, basicOptions)).toBe(true);
    expect(isValid(spObject, secretTokenHashed, hashedOptions)).toBe(true);
  });

  it('should return false if "expiresIn" is not passed and parameters were created more than 1 day ago', () => {
    expect(isValid(sp, secretToken)).toBe(false);
  });
});

describe('validate', () => {
  it('should throw missing hash error if "hash" param is missing', () => {
    expect(() => validate('auth_date=1', secretToken)).toThrowError(
      new SignatureMissingError(false),
    );
  });

  it('should throw if "auth_date" param is missing or does not represent integer', () => {
    expect(() => validate('hash=HHH', secretToken)).toThrowError(
      new AuthDateInvalidError(),
    );
    expect(() => validate('auth_date=AAA&hash=HHH', secretToken)).toThrowError(
      new AuthDateInvalidError('AAA'),
    );
  });

  it('should throw if parameters are expired', () => {
    vi.spyOn(Date, 'now').mockImplementation(() => 1733584787000 + 11000);
    expect(() => validate(sp, secretToken, { expiresIn: 10 })).toThrowError(
      new ExpiredError(
        new Date(1733584787000),
        new Date(1733584787000 + 10000),
        new Date(1733584787000 + 11000),
      ),
    );
  });

  it('should throw if sign is invalid', () => {
    expect(() => validate(sp, `${secretToken}A`, { expiresIn: 0 })).toThrowError(
      new SignatureInvalidError(),
    );
  });

  it('should correctly validate parameters in case, they are valid', () => {
    const basicOptions = { expiresIn: 0 };
    const hashedOptions = { ...basicOptions, tokenHashed: true };
    expect(() => validate(sp, secretToken, basicOptions)).not.toThrow();
    expect(() => validate(sp, secretTokenHashed, hashedOptions)).not.toThrow();

    expect(() => validate(spObject, secretToken, basicOptions)).not.toThrow();
    expect(() => validate(spObject, secretTokenHashed, hashedOptions)).not.toThrow();
  });

  it('should throw if "expiresIn" is not passed and parameters were created more than 1 day ago', () => {
    vi.spyOn(Date, 'now').mockImplementation(() => 1800000000000);
    expect(() => validate(sp, secretToken)).toThrow(
      new ExpiredError(
        new Date(1733584787000),
        new Date(1733584787000 + (24 * 60 * 60 * 1000)),
        new Date(1800000000000),
      ),
    );
  });
});

describe('sign', () => {
  it('should correctly sign data', () => {
    expect(
      sign(
        {
          can_send_after: 10000,
          chat: {
            id: 1,
            type: 'group',
            username: 'my-chat',
            title: 'chat-title',
            photo_url: 'chat-photo',
          },
          chat_instance: '888',
          chat_type: 'sender',
          query_id: 'QUERY',
          receiver: {
            added_to_attachment_menu: false,
            allows_write_to_pm: true,
            first_name: 'receiver-first-name',
            id: 991,
            is_bot: false,
            is_premium: true,
            language_code: 'ru',
            last_name: 'receiver-last-name',
            photo_url: 'receiver-photo',
            username: 'receiver-username',
          },
          start_param: 'debug',
          user: {
            added_to_attachment_menu: false,
            allows_write_to_pm: false,
            first_name: 'user-first-name',
            id: 222,
            is_bot: true,
            is_premium: false,
            language_code: 'en',
            last_name: 'user-last-name',
            photo_url: 'user-photo',
            username: 'user-username',
          },
        },
        '5768337691:AAH5YkoiEuPk8-FZa32hStHTqXiLPtAEhx8',
        new Date(1000),
      ),
    ).toBe('can_send_after=10000&chat=%7B%22id%22%3A1%2C%22type%22%3A%22group%22%2C%22username%22%3A%22my-chat%22%2C%22title%22%3A%22chat-title%22%2C%22photo_url%22%3A%22chat-photo%22%7D&chat_instance=888&chat_type=sender&query_id=QUERY&receiver=%7B%22added_to_attachment_menu%22%3Afalse%2C%22allows_write_to_pm%22%3Atrue%2C%22first_name%22%3A%22receiver-first-name%22%2C%22id%22%3A991%2C%22is_bot%22%3Afalse%2C%22is_premium%22%3Atrue%2C%22language_code%22%3A%22ru%22%2C%22last_name%22%3A%22receiver-last-name%22%2C%22photo_url%22%3A%22receiver-photo%22%2C%22username%22%3A%22receiver-username%22%7D&start_param=debug&user=%7B%22added_to_attachment_menu%22%3Afalse%2C%22allows_write_to_pm%22%3Afalse%2C%22first_name%22%3A%22user-first-name%22%2C%22id%22%3A222%2C%22is_bot%22%3Atrue%2C%22is_premium%22%3Afalse%2C%22language_code%22%3A%22en%22%2C%22last_name%22%3A%22user-last-name%22%2C%22photo_url%22%3A%22user-photo%22%2C%22username%22%3A%22user-username%22%7D&auth_date=1&hash=d7dc6972a8d2e8e3280caf2e69080f632f1ac562f24ab72cb44ec10c8e671771');
  });
});

describe('signData', () => {
  it('should use HMAC-SHA256 algorithm with key, based on HMAC-SHA256 keyed with the "WebAppData" value, applied to the secret token', () => {
    expect(signData('abc', 'my-secret-token')).toBe(
      '6ecc2e9b51f30dde6877ce374ede54eb626c84e78a5d9a9dcac54d2d248f6bde',
    );
    expect(
      signData(
        'abc',
        'fe37f490481d351837ed49f3b369c886c61013d6d036656fc3c9c92e163e3477',
        { tokenHashed: true },
      ),
    )
      .toBe('6ecc2e9b51f30dde6877ce374ede54eb626c84e78a5d9a9dcac54d2d248f6bde');
  });
});

```
---
## File: packages/init-data-node/src/entries/node.ts

```typescript
import * as E from 'fp-ts/Either';
import { pipe } from 'fp-ts/lib/function.js';
import { createHmac as nodeCreateHmac } from 'node:crypto';

import { bufferToArrayBuffer } from '../buf-converters.js';
import { hashToken as _hashToken } from '../hashToken.js';
import { signDataFp as _signDataFp, SignDataError, type SignDataOptions } from '../signDataFp.js';
import {
  signFp as _signFp,
  type SignableData,
  type SignOptions,
} from '../signFp.js';
import type { CreateHmacFn, Text } from '../types.js';
import {
  validateFp as _validateFp,
  type ValidateError,
  type ValidateOptions,
  type ValidateValue,
} from '../validation.js';

/**
 * Converts Text to Node.js Buffer.
 * @param text - text to convert
 */
function textToBuffer(text: Text): Buffer {
  return Buffer.from(typeof text === 'string' ? text : new Uint8Array(text));
}

const createHmac: CreateHmacFn<false> = (data, key) => {
  return bufferToArrayBuffer(
    nodeCreateHmac('sha256', textToBuffer(key))
      .update(textToBuffer(data))
      .digest(),
  );
};

/**
 * Hashes specified token using a string, expected during init data sign.
 * @param token - token to hash.
 */
export function hashToken(token: Text): Buffer {
  return Buffer.from(_hashToken(token, createHmac));
}

/**
 * @param value - value to check.
 * @param token - bot secret token.
 * @param options - additional validation options.
 * @returns True is specified init data is valid.
 */
export function isValid(value: ValidateValue, token: Text, options?: ValidateOptions): boolean {
  return pipe(
    validateFp(value, token, options),
    E.match(() => false, () => true),
  );
}

/**
 * Signs specified init data.
 * @param data - init data to sign.
 * @param authDate - date, when this init data should be signed.
 * @param key - private key.
 * @param options - additional options.
 * @returns Signed init data presented as query parameters.
 */
export function signFp(
  data: SignableData,
  key: Text,
  authDate: Date,
  options?: SignOptions,
): E.Either<SignDataError, string> {
  return _signFp(data, key, authDate, signDataFp, options);
}

/**
 * @see signFp
 */
export function sign(data: SignableData, key: Text, authDate: Date, options?: SignOptions): string {
  return pipe(
    signFp(data, key, authDate, options),
    E.match(e => {
      throw e;
    }, v => v),
  );
}

/**
 * Signs specified data with the passed token.
 * @param data - data to sign.
 * @param key - private key.
 * @param options - additional options.
 * @returns Data sign.
 */
export function signDataFp(
  data: Text,
  key: Text,
  options?: SignDataOptions,
): E.Either<SignDataError, string> {
  return _signDataFp(false, data, key, createHmac, options);
}

/**
 * @see signDataFp
 */
export function signData(data: Text, key: Text, options?: SignDataOptions): string {
  return pipe(
    signDataFp(data, key, options),
    E.match(e => {
      throw e;
    }, v => v),
  );
}

/**
 * Validates passed init data.
 * @param value - value to check.
 * @param token - bot secret token.
 * @param options - additional validation options.
 */
export function validateFp(
  value: ValidateValue,
  token: Text,
  options?: ValidateOptions,
): E.Either<ValidateError, void> {
  return _validateFp(false, value, token, signDataFp, options);
}

/**
 * @see validateFp
 */
export function validate(value: ValidateValue, token: Text, options?: ValidateOptions): void {
  pipe(
    validateFp(value, token, options),
    E.mapLeft(error => {
      throw error;
    }),
  );
}

export * from './shared.js';

```
---
## File: packages/init-data-node/src/entries/shared.test.ts

```typescript
import { describe, expect, it, vi } from 'vitest';

import {
  AuthDateInvalidError,
  ExpiredError,
  isValid3rd,
  SignatureInvalidError,
  SignatureMissingError,
  validate3rd,
} from './shared';

const sp = 'user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%20%2B%20-%20%3F%20%5C%2F%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%22%7D&chat_instance=8134722200314281151&chat_type=private&auth_date=1733584787&signature=zL-ucjNyREiHDE8aihFwpfR9aggP2xiAo3NSpfe-p7IbCisNlDKlo7Kb6G4D0Ao2mBrSgEk4maLSdv6MLIlADQ&hash=2174df5b000556d044f3f020384e879c8efcab55ddea2ced4eb752e93e7080d6';
const spObject = new URLSearchParams(sp);
const botId = 7342037359;

describe('isValid3rd', () => {
  it('should return false if "signature" param is missing', async () => {
    await expect(isValid3rd('auth_date=1', botId)).resolves.toBe(false);
  });

  it(
    'should return false if "auth_date" param is missing or does not represent integer',
    async () => {
      await expect(isValid3rd('hash=HHH', botId)).resolves.toBe(false);
      await expect(isValid3rd('auth_date=AAA&hash=HHH', botId)).resolves.toBe(false);
    },
  );

  it('should return false if parameters are expired', async () => {
    await expect(isValid3rd(sp, botId, { expiresIn: 1 })).resolves.toBe(false);
  });

  it('should return false if sign is invalid', async () => {
    await expect(isValid3rd(sp, botId + 1, { expiresIn: 0 })).resolves.toBe(false);
  });

  it('should return true if init data is valid', async () => {
    const basicOptions = { expiresIn: 0 };
    await expect(isValid3rd(sp, botId, basicOptions)).resolves.toBe(true);
    await expect(isValid3rd(spObject, botId, basicOptions)).resolves.toBe(true);
  });

  it(
    'should return false if "expiresIn" is not passed and parameters were created more than 1 day ago',
    async () => {
      await expect(isValid3rd(sp, botId)).resolves.toBe(false);
    },
  );
});

describe('validate3rd', () => {
  it('should throw missing hash error if "signature" param is missing', async () => {
    await expect(validate3rd('auth_date=1', botId)).rejects.toThrowError(
      new SignatureMissingError(true),
    );
  });

  it('should throw if "auth_date" param is missing or does not represent integer', async () => {
    await expect(validate3rd('signature=HHH', botId)).rejects.toThrowError(
      new AuthDateInvalidError(),
    );
    await expect(validate3rd('auth_date=AAA&signature=HHH', botId)).rejects.toThrowError(
      new AuthDateInvalidError('AAA'),
    );
  });

  it('should throw if parameters are expired', async () => {
    vi.spyOn(Date, 'now').mockImplementation(() => 1733584787000 + 11000);
    await expect(validate3rd(sp, botId, { expiresIn: 10 })).rejects.toThrowError(
      new ExpiredError(
        new Date(1733584787000),
        new Date(1733584787000 + 10000),
        new Date(1733584787000 + 11000),
      ),
    );
  });

  it('should throw if sign is invalid', async () => {
    await expect(validate3rd(sp, botId + 1, { expiresIn: 0 })).rejects.toThrowError(
      new SignatureInvalidError(),
    );
  });

  it('should correctly validate parameters in case, they are valid', async () => {
    const basicOptions = { expiresIn: 0 };
    await expect(validate3rd(sp, botId, basicOptions)).resolves.toBeUndefined();
    await expect(validate3rd(spObject, botId, basicOptions)).resolves.toBeUndefined();
  });

  it(
    'should throw if "expiresIn" is not passed and parameters were created more than 1 day ago',
    async () => {
      vi.spyOn(Date, 'now').mockImplementation(() => 1800000000000);
      await expect(validate3rd(sp, botId)).rejects.toThrow(
        new ExpiredError(
          new Date(1733584787000),
          new Date(1733584787000 + (24 * 60 * 60 * 1000)),
          new Date(1800000000000),
        ),
      );
    },
  );
});

```
---
## File: packages/init-data-node/src/entries/shared.ts

```typescript
export {
  AuthDateInvalidError,
  HexStringLengthInvalidError,
  SignatureInvalidError,
  SignatureMissingError,
  ExpiredError,
} from '../errors.js';
export { parse, parseFp, type ParseError } from '../parsing.js';
export type { Text, CreateHmacFn } from '../types.js';
export {
  isValid3rd,
  isValid3rdFp,
  validate3rd,
  validate3rdFp,
  type Validate3rdError,
  type Validate3rdOptions,
  type Validate3rdValue,
  type ValidateError,
  type ValidateOptions,
  type ValidateValue,
  type ValidateAsyncOptions,
  type ValidateAsyncError,
} from '../validation.js';

export type { Chat, ChatType, InitData, User } from '@tma.js/types';
export { deepSnakeToCamelObjKeys } from '@tma.js/toolkit';

```
---
## File: packages/init-data-node/src/entries/web.test.ts

```typescript
import { afterEach, describe, expect, it, vi } from 'vitest';

import { arrayBufferToHex } from '../buf-converters.js';
import {
  AuthDateInvalidError,
  ExpiredError,
  hashToken,
  isValid,
  sign,
  SignatureInvalidError,
  SignatureMissingError,
  signData,
  validate,
} from './web';

const sp = 'user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%20%2B%20-%20%3F%20%5C%2F%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%22%7D&chat_instance=8134722200314281151&chat_type=private&auth_date=1733584787&signature=zL-ucjNyREiHDE8aihFwpfR9aggP2xiAo3NSpfe-p7IbCisNlDKlo7Kb6G4D0Ao2mBrSgEk4maLSdv6MLIlADQ&hash=2174df5b000556d044f3f020384e879c8efcab55ddea2ced4eb752e93e7080d6';
const spObject = new URLSearchParams(sp);

const secretToken = '7342037359:AAFZehRPBRs8Seg40oDjTMIW8uTGPuW1zfQ';
const secretTokenHashed = 'c0881d6d547967540dcb06d7378a2c2b2c79a8f915ae70a4a37a8a04de0da32b';

afterEach(() => {
  vi.restoreAllMocks();
});

describe('hashToken', () => {
  it('should properly hash token', async () => {
    await expect(hashToken(secretToken).then(arrayBufferToHex)).resolves.toBe(secretTokenHashed);
  });
});

describe('isValid', () => {
  it('should return false if "hash" param is missing', async () => {
    await expect(isValid('auth_date=1', secretToken)).resolves.toBe(false);
  });

  it('should return false if "auth_date" param is missing or does not represent integer', async () => {
    await expect(isValid('hash=HHH', secretToken)).resolves.toBe(false);
    await expect(isValid('auth_date=AAA&hash=HHH', secretToken)).resolves.toBe(false);
  });

  it('should return false if parameters are expired', async () => {
    await expect(isValid(sp, secretToken, { expiresIn: 1 })).resolves.toBe(false);
  });

  it('should return false if sign is invalid', async () => {
    await expect(isValid(sp, `${secretToken}A`, { expiresIn: 0 })).resolves.toBe(false);
  });

  it('should return true if init data is valid', async () => {
    const basicOptions = { expiresIn: 0 };
    const hashedOptions = { ...basicOptions, tokenHashed: true };
    await expect(isValid(sp, secretToken, basicOptions)).resolves.toBe(true);
    await expect(isValid(sp, secretTokenHashed, hashedOptions)).resolves.toBe(true);

    await expect(isValid(spObject, secretToken, basicOptions)).resolves.toBe(true);
    await expect(isValid(spObject, secretTokenHashed, hashedOptions)).resolves.toBe(true);
  });

  it('should return false if "expiresIn" is not passed and parameters were created more than 1 day ago', async () => {
    await expect(isValid(sp, secretToken)).resolves.toBe(false);
  });
});

describe('validate', () => {
  it('should throw missing hash error if "hash" param is missing', async () => {
    await expect(validate('auth_date=1', secretToken)).rejects.toThrowError(
      new SignatureMissingError(false),
    );
  });

  it('should throw if "auth_date" param is missing or does not represent integer', async () => {
    await expect(validate('hash=HHH', secretToken)).rejects.toThrowError(
      new AuthDateInvalidError(),
    );
    await expect(validate('auth_date=AAA&hash=HHH', secretToken)).rejects.toThrowError(
      new AuthDateInvalidError('AAA'),
    );
  });

  it('should throw if parameters are expired', async () => {
    vi.spyOn(Date, 'now').mockImplementation(() => 1733584787000 + 11000);
    await expect(validate(sp, secretToken, { expiresIn: 10 })).rejects.toThrowError(
      new ExpiredError(
        new Date(1733584787000),
        new Date(1733584787000 + 10000),
        new Date(1733584787000 + 11000),
      ),
    );
  });

  it('should throw if sign is invalid', async () => {
    await expect(validate(sp, `${secretToken}A`, { expiresIn: 0 }))
      .rejects
      .toThrowError(new SignatureInvalidError());
  });

  it('should correctly validate parameters in case, they are valid', async () => {
    const basicOptions = { expiresIn: 0 };
    const hashedOptions = { ...basicOptions, tokenHashed: true };
    await expect(validate(sp, secretToken, basicOptions)).resolves.toBeUndefined();
    await expect(validate(sp, secretTokenHashed, hashedOptions)).resolves.toBeUndefined();

    await expect(validate(spObject, secretToken, basicOptions)).resolves.toBeUndefined();
    await expect(validate(spObject, secretTokenHashed, hashedOptions)).resolves.toBeUndefined();
  });

  it('should throw if "expiresIn" is not passed and parameters were created more than 1 day ago', async () => {
    vi.spyOn(Date, 'now').mockImplementation(() => 1800000000000);
    await expect(validate(sp, secretToken)).rejects.toThrow(
      new ExpiredError(
        new Date(1733584787000),
        new Date(1733584787000 + (24 * 60 * 60 * 1000)),
        new Date(1800000000000),
      ),
    );
  });
});

describe('sign', () => {
  it('should correctly sign data', async () => {
    expect(
      await sign(
        {
          can_send_after: 10000,
          chat: {
            id: 1,
            type: 'group',
            username: 'my-chat',
            title: 'chat-title',
            photo_url: 'chat-photo',
          },
          chat_instance: '888',
          chat_type: 'sender',
          query_id: 'QUERY',
          receiver: {
            added_to_attachment_menu: false,
            allows_write_to_pm: true,
            first_name: 'receiver-first-name',
            id: 991,
            is_bot: false,
            is_premium: true,
            language_code: 'ru',
            last_name: 'receiver-last-name',
            photo_url: 'receiver-photo',
            username: 'receiver-username',
          },
          start_param: 'debug',
          user: {
            added_to_attachment_menu: false,
            allows_write_to_pm: false,
            first_name: 'user-first-name',
            id: 222,
            is_bot: true,
            is_premium: false,
            language_code: 'en',
            last_name: 'user-last-name',
            photo_url: 'user-photo',
            username: 'user-username',
          },
        },
        '5768337691:AAH5YkoiEuPk8-FZa32hStHTqXiLPtAEhx8',
        new Date(1000),
      ),
    ).toBe('can_send_after=10000&chat=%7B%22id%22%3A1%2C%22type%22%3A%22group%22%2C%22username%22%3A%22my-chat%22%2C%22title%22%3A%22chat-title%22%2C%22photo_url%22%3A%22chat-photo%22%7D&chat_instance=888&chat_type=sender&query_id=QUERY&receiver=%7B%22added_to_attachment_menu%22%3Afalse%2C%22allows_write_to_pm%22%3Atrue%2C%22first_name%22%3A%22receiver-first-name%22%2C%22id%22%3A991%2C%22is_bot%22%3Afalse%2C%22is_premium%22%3Atrue%2C%22language_code%22%3A%22ru%22%2C%22last_name%22%3A%22receiver-last-name%22%2C%22photo_url%22%3A%22receiver-photo%22%2C%22username%22%3A%22receiver-username%22%7D&start_param=debug&user=%7B%22added_to_attachment_menu%22%3Afalse%2C%22allows_write_to_pm%22%3Afalse%2C%22first_name%22%3A%22user-first-name%22%2C%22id%22%3A222%2C%22is_bot%22%3Atrue%2C%22is_premium%22%3Afalse%2C%22language_code%22%3A%22en%22%2C%22last_name%22%3A%22user-last-name%22%2C%22photo_url%22%3A%22user-photo%22%2C%22username%22%3A%22user-username%22%7D&auth_date=1&hash=d7dc6972a8d2e8e3280caf2e69080f632f1ac562f24ab72cb44ec10c8e671771');
  });
});

describe('signData', () => {
  it('should use HMAC-SHA256 algorithm with key, based on HMAC-SHA256 keyed with the "WebAppData" value, applied to the secret token', async () => {
    await expect(signData('abc', 'my-secret-token')).resolves.toBe(
      '6ecc2e9b51f30dde6877ce374ede54eb626c84e78a5d9a9dcac54d2d248f6bde',
    );
    await expect(signData(
      'abc',
      'fe37f490481d351837ed49f3b369c886c61013d6d036656fc3c9c92e163e3477',
      { tokenHashed: true },
    )).resolves.toBe('6ecc2e9b51f30dde6877ce374ede54eb626c84e78a5d9a9dcac54d2d248f6bde');
  });
});

```
---
## File: packages/init-data-node/src/entries/web.ts

```typescript
import { BetterPromise, type BetterPromiseRejectReason } from 'better-promises';
import * as E from 'fp-ts/Either';
import * as TE from 'fp-ts/TaskEither';
import { pipe } from 'fp-ts/lib/function.js';

import { hashToken as _hashToken } from '../hashToken.js';
import { signDataFp as _signDataFp, SignDataError, type SignDataOptions } from '../signDataFp.js';
import {
  signFp as _signFp,
  type SignableData,
  type SignOptions,
} from '../signFp.js';
import type { CreateHmacFn, Text } from '../types.js';
import {
  validateFp as _validateFp,
  type ValidateValue,
  type ValidateAsyncError,
  type ValidateAsyncOptions,
} from '../validation.js';
import {
  AuthDateInvalidError,
  ExpiredError,
  SignatureInvalidError,
  SignatureMissingError,
  HexStringLengthInvalidError,
} from '../errors.js';

const createHmac: CreateHmacFn<true> = async (data, key) => {
  const encoder = new TextEncoder();

  return crypto.subtle.sign(
    'HMAC',
    await crypto.subtle.importKey(
      'raw',
      typeof key === 'string' ? encoder.encode(key) : key,
      { name: 'HMAC', hash: 'SHA-256' },
      false,
      ['sign', 'verify'],
    ),
    typeof data === 'string' ? encoder.encode(data) : data,
  );
};

/**
 * Hashes specified token using a string, expected during init data sign.
 * @param token - token to hash.
 */
export function hashToken(token: Text): Promise<ArrayBuffer> {
  return _hashToken(token, createHmac);
}

/**
 * @param value - value to check.
 * @param token - bot secret token.
 * @param options - additional validation options.
 * @returns True is specified init data is valid.
 */
export function isValidFp(
  value: ValidateValue,
  token: Text,
  options?: ValidateAsyncOptions,
): TE.TaskEither<BetterPromiseRejectReason, boolean> {
  return pipe(
    validateFp(value, token, options),
    TE.match(
      error => {
        return [
          AuthDateInvalidError,
          ExpiredError,
          SignatureInvalidError,
          SignatureMissingError,
          HexStringLengthInvalidError,
        ].some(errorClass => errorClass.is(error))
          ? E.right(false)
          : E.left(error);
      },
      () => E.right(true),
    ),
  );
}

/**
 * @see isValidFp
 */
export function isValid(
  value: ValidateValue,
  token: Text,
  options?: ValidateAsyncOptions,
): BetterPromise<boolean> {
  return BetterPromise.fn(() => {
    return pipe(
      isValidFp(value, token, options),
      TE.match(error => {
        throw error;
      }, isValid => isValid),
    )();
  });
}

/**
 * Signs specified init data.
 * @param data - init data to sign.
 * @param authDate - date, when this init data should be signed.
 * @param key - private key.
 * @param options - additional options.
 * @returns Signed init data presented as query parameters.
 */
export function signFp(
  data: SignableData,
  key: Text,
  authDate: Date,
  options?: SignOptions,
): TE.TaskEither<SignDataError, string> {
  return _signFp(data, key, authDate, signDataFp, options);
}

/**
 * @see signFp
 */
export function sign(
  data: SignableData,
  key: Text,
  authDate: Date,
  options?: SignOptions,
): BetterPromise<string> {
  return BetterPromise.fn(() => {
    return pipe(
      signFp(data, key, authDate, options),
      TE.match(e => {
        throw e;
      }, v => v),
    )();
  });
}

/**
 * Signs specified data with the passed token.
 * @param data - data to sign.
 * @param key - private key.
 * @param options - additional options.
 * @returns Data sign.
 */
export function signDataFp(
  data: Text,
  key: Text,
  options?: SignDataOptions,
): TE.TaskEither<SignDataError, string> {
  return _signDataFp(true, data, key, createHmac, options);
}

/**
 * @see signDataFp
 */
export function signData(data: Text, key: Text, options?: SignDataOptions): BetterPromise<string> {
  return BetterPromise.fn(() => {
    return pipe(
      signDataFp(data, key, options),
      TE.match(e => {
        throw e;
      }, v => v),
    )();
  });
}

/**
 * Validates passed init data.
 * @param value - value to check.
 * @param token - bot secret token.
 * @param options - additional validation options.
 */
export function validateFp(
  value: ValidateValue,
  token: Text,
  options?: ValidateAsyncOptions,
): TE.TaskEither<ValidateAsyncError, void> {
  return _validateFp(true, value, token, signDataFp, options);
}

/**
 * @see validateFp
 */
export function validate(
  value: ValidateValue,
  token: Text,
  options?: ValidateAsyncOptions,
): BetterPromise<void> {
  return BetterPromise.fn(async () => {
    await pipe(
      validateFp(value, token, options),
      TE.mapLeft(error => {
        throw error;
      }),
    )();
  });
}

export * from './shared.js';

```
---
## File: packages/init-data-node/src/buf-converters.ts

```typescript
import * as E from 'fp-ts/Either';

import { HexStringLengthInvalidError } from './errors.js';

/**
 * Converts a hex string to ArrayBuffer.
 * @param hexString - value to convert.
 */
export function hexToArrayBuffer(hexString: string): E.Either<
  InstanceType<typeof HexStringLengthInvalidError>,
  ArrayBuffer
> {
  if (hexString.length % 2 !== 0) {
    return E.left(new HexStringLengthInvalidError());
  }
  const buffer = new ArrayBuffer(hexString.length / 2);
  const uint8Array = new Uint8Array(buffer);
  for (let i = 0; i < hexString.length; i += 2) {
    uint8Array[i / 2] = parseInt(hexString.substring(i, i + 2), 16);
  }
  return E.right(buffer);
}

/**
 * Converts array buffer to hex.
 * @param arrBuf - buffer to convert
 */
export function arrayBufferToHex(arrBuf: ArrayBuffer): string {
  return new Uint8Array(arrBuf).reduce((acc, byte) => {
    // Convert byte to hex and pad with zero if needed (e.g., "0a" instead of "a")
    return acc + byte.toString(16).padStart(2, '0');
  }, '');
}

export function bufferToArrayBuffer(buf: Buffer) {
  const ab = new ArrayBuffer(buf.length);
  buf.copy(new Uint8Array(ab));
  return ab;
}

```
---
## File: packages/init-data-node/src/errors.ts

```typescript
import { errorClass, errorClassWithData } from 'error-kid';

export class AuthDateInvalidError extends errorClassWithData<
  { value: string | undefined },
  [value?: string]
>(
  'AuthDateInvalidError',
  value => ({ value }),
  value => [`"auth_date" is invalid: ${value || 'value is missing'}`],
) {
}

export class SignatureInvalidError extends errorClass('SignatureInvalidError') {
}

export class HexStringLengthInvalidError extends errorClass(
  'HexStringLengthInvalidError',
) {
}

export class SignatureMissingError extends errorClass<[thirdParty: boolean]>(
  'SignatureMissingError',
  thirdParty => [`"${thirdParty ? 'signature' : 'hash'}" parameter is missing`],
) {
}

export class ExpiredError extends errorClassWithData<
  { issuedAt: Date; expiresAt: Date },
  [issuedAt: Date, expiresAt: Date, now: Date]
>(
  'ExpiredError',
  (issuedAt, expiresAt) => ({ issuedAt, expiresAt }),
  (issuedAt, expiresAt, now) => [
    `Init data expired. Issued at ${issuedAt.toISOString()}, expires at ${expiresAt.toISOString()}, now is ${now.toISOString()}`,
  ],
) {
}

```
---
## File: packages/init-data-node/src/hashToken.test.ts

```typescript
import { expect, it, vi } from 'vitest';
import { hashToken } from './hashToken';

it('should call the second argument with the first argument and string "WebAppData"', () => {
  const spy = vi.fn();
  hashToken('abc', spy);
  expect(spy).toHaveBeenCalledOnce();
  expect(spy).toHaveBeenCalledWith('abc', 'WebAppData');
});

```
---
## File: packages/init-data-node/src/hashToken.ts

```typescript
import type { CreateHmacFn, Text } from './types.js';

export function hashToken<H extends CreateHmacFn<any>>(token: Text, createHmac: H): ReturnType<H> {
  return createHmac(token, 'WebAppData') as ReturnType<H>;
}

```
---
## File: packages/init-data-node/src/parsing.test.ts

```typescript
import { describe, expect, it } from 'vitest';

import { parse, parseFp } from './parsing.js';

describe('parse', () => {
  it('should properly create object from query', () => {
    expect(
      parse('user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%22%7D&chat_instance=-9019086117643313246&chat_type=sender&auth_date=1736362318&signature=JUPYm_qmf8hJYSux535eNDg_a5ZdcOkS6yZMkEUGS09zcXoIopCn3DOuNCa5aWH0PQGaUGGMAaq9MeaMg-6EBg&hash=14cd9c9eeebf82370b20f4df23af9439d00f6da2837dd20e17ed3b03ab99cd9c&additional_prop=1'),
    ).toStrictEqual({
      auth_date: new Date(1736362318000),
      chat_instance: '-9019086117643313246',
      chat_type: 'sender',
      hash: '14cd9c9eeebf82370b20f4df23af9439d00f6da2837dd20e17ed3b03ab99cd9c',
      signature: 'JUPYm_qmf8hJYSux535eNDg_a5ZdcOkS6yZMkEUGS09zcXoIopCn3DOuNCa5aWH0PQGaUGGMAaq9MeaMg-6EBg',
      user: {
        allows_write_to_pm: true,
        first_name: 'Vladislav',
        id: 279058397,
        is_premium: true,
        language_code: 'ru',
        last_name: 'Kibenko',
        photo_url: 'https://t.me/i/userpic/320/4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg',
        username: 'vdkfrost',
      },
      additional_prop: '1',
    });
  });
});

describe('parseFp', () => {
  it('should properly create object from query', () => {
    expect(
      parseFp('user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%22%7D&chat_instance=-9019086117643313246&chat_type=sender&auth_date=1736362318&signature=JUPYm_qmf8hJYSux535eNDg_a5ZdcOkS6yZMkEUGS09zcXoIopCn3DOuNCa5aWH0PQGaUGGMAaq9MeaMg-6EBg&hash=14cd9c9eeebf82370b20f4df23af9439d00f6da2837dd20e17ed3b03ab99cd9c&additional_prop=1'),
    ).toMatchObject({
      right: {
        auth_date: new Date(1736362318000),
        chat_instance: '-9019086117643313246',
        chat_type: 'sender',
        hash: '14cd9c9eeebf82370b20f4df23af9439d00f6da2837dd20e17ed3b03ab99cd9c',
        signature: 'JUPYm_qmf8hJYSux535eNDg_a5ZdcOkS6yZMkEUGS09zcXoIopCn3DOuNCa5aWH0PQGaUGGMAaq9MeaMg-6EBg',
        user: {
          allows_write_to_pm: true,
          first_name: 'Vladislav',
          id: 279058397,
          is_premium: true,
          language_code: 'ru',
          last_name: 'Kibenko',
          photo_url: 'https://t.me/i/userpic/320/4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg',
          username: 'vdkfrost',
        },
        additional_prop: '1',
      },
    });
  });
});

```
---
## File: packages/init-data-node/src/parsing.ts

```typescript
import {
  parseInitDataQuery,
  parseInitDataQueryFp,
  type ParseInitDataQueryError,
} from '@tma.js/transformers';

/**
 * Parses an incoming value as init data.
 */
export const parse = parseInitDataQuery;

/**
 * Parses an incoming value as init data.
 */
export const parseFp = parseInitDataQueryFp;

export { ParseInitDataQueryError as ParseError };

```
---
## File: packages/init-data-node/src/signDataFp.ts

```typescript
import * as E from 'fp-ts/Either';
import * as TE from 'fp-ts/TaskEither';
import { pipe } from 'fp-ts/lib/function.js';

import { arrayBufferToHex, hexToArrayBuffer } from './buf-converters.js';
import { hashToken } from './hashToken.js';
import type { CreateHmacFn, Text } from './types.js';

export interface SignDataOptions {
  /**
   * True, if token is already hashed and doesn't require hashing using HMAC-SHA-256.
   */
  tokenHashed?: boolean;
}

export type SignDataError = ReturnType<typeof hexToArrayBuffer> extends E.Either<infer U, any>
  ? U
  : never;

export function signDataFp(
  async: false,
  data: Text,
  key: Text,
  createHmac: CreateHmacFn<false>,
  options?: SignDataOptions,
): E.Either<SignDataError, string>;

export function signDataFp(
  async: true,
  data: Text,
  key: Text,
  createHmac: CreateHmacFn<true>,
  options?: SignDataOptions,
): TE.TaskEither<SignDataError, string>;

export function signDataFp(
  async: boolean,
  data: Text,
  key: Text,
  createHmac: CreateHmacFn<boolean>,
  options: SignDataOptions = {},
):
  | E.Either<SignDataError, string>
  | TE.TaskEither<SignDataError, string> {
  const keyHmac = options.tokenHashed
    ? typeof key === 'string'
      // If a hashed token was passed, we assume that it is a HEX string. Not to mess with
      // the createHmac function, we should convert this HEX string to ArrayBuffer. Otherwise,
      // incorrect behavior will be met.
      ? hexToArrayBuffer(key)
      : E.right(key)
    // Otherwise we are hashing the token, but we want it to be a monad.
    : pipe(
      E.right(hashToken(key, createHmac)),
      E.match(() => null as never, v => {
        return v instanceof Promise
          ? TE.tryCatch(() => v, err => err as SignDataError)
          : E.right(v);
      }),
    );

  if (async || typeof keyHmac === 'function') {
    return pipe(
      typeof keyHmac === 'function' ? keyHmac : TE.fromEither(keyHmac),
      TE.chain(v => TE.tryCatch(
        () => Promise.resolve(createHmac(data, v)).then(arrayBufferToHex),
        err => err as SignDataError,
      )),
    );
  }
  return pipe(
    keyHmac,
    // In this branch createHmac can't be asynchronous. If it is, keyHmac would be Promise and the
    // result would be returned in the previous "if" statement.
    E.chain(v => E.right(
      arrayBufferToHex((createHmac as CreateHmacFn<false>)(data, v)),
    )),
  );
}

```
---
## File: packages/init-data-node/src/signFp.ts

```typescript
import { type InitDataLike, serializeInitDataQuery } from '@tma.js/transformers';
import * as E from 'fp-ts/Either';
import * as TE from 'fp-ts/TaskEither';
import { pipe } from 'fp-ts/lib/function.js';

import type { Text } from './types.js';

export type SignableData = Omit<InitDataLike, 'auth_date' | 'hash' | 'signature'>;

export interface SignOptions {
  /**
   * True, if token is already hashed and doesn't require hashing using HMAC-SHA-256.
   */
  tokenHashed?: boolean;
}

interface SignDataFpArg<Async extends boolean, Left> {
  (data: Text, key: Text, options?: SignOptions): Async extends true
    ? TE.TaskEither<Left, string>
    : E.Either<Left, string>;
}

/**
 * Signs specified init data.
 * @param data - init data to sign.
 * @param authDate - date, when this init data should be signed.
 * @param key - private key.
 * @param signData - function signing data.
 * @param options - additional options.
 * @returns Signed init data presented as query parameters.
 */
export function signFp<Left>(
  data: SignableData,
  key: Text,
  authDate: Date,
  signData: SignDataFpArg<false, Left>,
  options?: SignOptions,
): E.Either<Left, string>;

/**
 * Signs specified init data.
 * @param data - init data to sign.
 * @param authDate - date, when this init data should be signed.
 * @param key - private key.
 * @param signData - function signing data.
 * @param options - additional options.
 * @returns Signed init data presented as query parameters.
 */
export function signFp<Left>(
  data: SignableData,
  key: Text,
  authDate: Date,
  signData: SignDataFpArg<true, Left>,
  options?: SignOptions,
): TE.TaskEither<Left, string>;

export function signFp<Left>(
  data: SignableData,
  key: Text,
  authDate: Date,
  signData: SignDataFpArg<boolean, Left>,
  options?: SignOptions,
): E.Either<Left, string> | TE.TaskEither<Left, string> {
  const query = new URLSearchParams(serializeInitDataQuery({ ...data, auth_date: authDate }));

  // Convert search params to pairs and sort the final array.
  const pairs = [...query.entries()]
    .map(([name, value]) => `${name}=${value}`)
    .sort();

  // Compute sign, append it to the params and return.
  const queryWithHash = (signature: string): string => {
    query.append('hash', signature);
    return query.toString();
  };

  const eitherHash = signData(pairs.join('\n'), key, options);
  return typeof eitherHash === 'function'
    ? pipe(eitherHash, TE.chain(hash => TE.right(queryWithHash(hash))))
    : pipe(eitherHash, E.chain(hash => E.right(queryWithHash(hash))));
}

```
---
## File: packages/init-data-node/src/types.ts

```typescript
export type Text = string | ArrayBuffer;

/**
 * SHA-256 hashing function.
 */
export interface CreateHmacFn<Async extends boolean> {
  (data: Text, key: Text): Async extends true ? Promise<ArrayBuffer> : ArrayBuffer;
}

```
---
## File: packages/init-data-node/src/validation.ts

```typescript
import * as E from 'fp-ts/Either';
import * as TE from 'fp-ts/TaskEither';
import { pipe } from 'fp-ts/function';
import {
  BetterPromise,
  type BetterPromiseOptions,
  type BetterPromiseRejectReason,
} from 'better-promises';

import {
  AuthDateInvalidError,
  ExpiredError,
  SignatureInvalidError,
  SignatureMissingError,
} from './errors.js';
import { Text } from './types.js';

type OmittedPromiseOptions = Omit<BetterPromiseOptions, 'abortOnResolve' | 'abortOnReject'>;

export type ValidateValue = string | URLSearchParams;
export type Validate3rdValue = string | URLSearchParams;

export type ValidateError =
  | SignatureMissingError
  | SignatureInvalidError
  | AuthDateInvalidError
  | ExpiredError;
export type ValidateAsyncError = ValidateError | BetterPromiseRejectReason;
export type Validate3rdError =
  | SignatureMissingError
  | SignatureInvalidError
  | AuthDateInvalidError
  | ExpiredError
  | BetterPromiseRejectReason;

interface ValidateSignDataFpArg<Async extends boolean, Left> {
  (data: Text, key: Text, options?: ValidateOptions): Async extends true
    ? TE.TaskEither<Left, string>
    : E.Either<Left, string>;
}

interface SharedValidateOptions {
  /**
   * Time in seconds which states, how long from creation time init data is considered valid.
   *
   * In other words, in case when authDate + expiresIn is before current time, init data is
   * recognized as expired.
   *
   * In case this value is equal to 0, the function does not check init data expiration.
   * @default 86400 (1 day)
   */
  expiresIn?: number;
}

export interface ValidateOptions extends SharedValidateOptions {
  /**
   * True, if token is already hashed.
   * @default false
   */
  tokenHashed?: boolean;
}

export interface ValidateAsyncOptions extends ValidateOptions, OmittedPromiseOptions {
}

export interface Validate3rdOptions extends SharedValidateOptions, OmittedPromiseOptions {
  /**
   * When true, uses the test environment public key to validate init data.
   * @default false
   */
  test?: boolean;
}

/**
 * Validates passed init data using a publicly known Ee25519 key.
 * @param value - value to check.
 * @param botId - bot identifier
 * @param options - additional validation options.
 */
export function validate3rdFp(
  value: Validate3rdValue,
  botId: number,
  options: Validate3rdOptions = {},
): TE.TaskEither<Validate3rdError, void> {
  // Init data required params.
  let authDate: Date | undefined;
  let authDateString: string | undefined;
  let signature: string | undefined;

  // All search params pairs presented as `k=v`.
  const pairs: string[] = [];

  // Iterate over all key-value pairs of parsed parameters and find required
  // parameters.
  (typeof value === 'string' ? new URLSearchParams(value) : value).forEach((value, key) => {
    if (key === 'hash') {
      return;
    }
    if (key === 'signature') {
      signature = value;
      return;
    }
    if (key === 'auth_date') {
      authDateString = value;
      const authDateNum = parseInt(value, 10);
      if (!Number.isNaN(authDateNum)) {
        authDate = new Date(authDateNum * 1000);
      }
    }

    pairs.push(`${key}=${value}`);
  });

  // Signature and auth date always required.
  if (!signature) {
    return TE.left(new SignatureMissingError(true));
  }

  if (!authDate) {
    return TE.left(new AuthDateInvalidError(authDateString));
  }

  // In case, expiration time passed, we do additional parameters check.
  const { expiresIn = 86400 } = options;
  if (expiresIn > 0) {
    // Check if init data expired.
    const expiresAtTs = authDate.getTime() + (expiresIn * 1000);
    const nowTs = Date.now();
    if (expiresAtTs < nowTs) {
      return TE.left(new ExpiredError(authDate, new Date(expiresAtTs), new Date(nowTs)));
    }
  }

  return pipe(
    TE.tryCatch(
      () => {
        return BetterPromise.fn(async () => {
          return crypto.subtle.verify(
            'Ed25519',
            await crypto.subtle.importKey(
              'raw',
              Buffer.from(
                options.test
                  ? '40055058a4ee38156a06562e52eece92a771bcd8346a8c4615cb7376eddf72ec'
                  : 'e7bf03a2fa4602af4580703d88dda5bb59f32ed8b02a56c187fe7d34caed242d',
                'hex',
              ),
              'Ed25519',
              false,
              ['verify'],
            ),
            // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion
            Buffer.from(signature as string, 'base64'),
            Buffer.from(`${botId}:WebAppData\n${pairs.sort().join('\n')}`),
          );
        }, options);
      },
      (e: unknown) => e,
    ),
    TE.chainW(isVerified => {
      return isVerified ? TE.right(undefined) : TE.left(new SignatureInvalidError());
    }),
  );
}

/**
 * @see validate3rdFp
 */
export function validate3rd(
  value: Validate3rdValue,
  botId: number,
  options?: Validate3rdOptions,
): BetterPromise<void> {
  return BetterPromise.fn(async () => {
    await pipe(
      validate3rdFp(value, botId, options),
      TE.mapLeft(error => {
        throw error;
      }),
    )();
  });
}

/**
 * @param value - value to check.
 * @param botId - bot identifier
 * @param options - additional validation options.
 * @returns True is specified init data is signed by Telegram.
 */
export function isValid3rdFp(
  value: Validate3rdValue,
  botId: number,
  options?: Validate3rdOptions,
): TE.TaskEither<void, boolean> {
  return pipe(validate3rdFp(value, botId, options), TE.match(
    () => E.right(false),
    () => E.right(true),
  ));
}

/**
 * @see isValid3rdFp
 */
export function isValid3rd(
  value: Validate3rdValue,
  botId: number,
  options?: Validate3rdOptions,
): BetterPromise<boolean> {
  return BetterPromise.fn(() => pipe(
    isValid3rdFp(value, botId, options),
    TE.match(() => false, v => v),
  )());
}

export function validateFp<Left>(
  async: false,
  value: ValidateValue,
  token: Text,
  signData: ValidateSignDataFpArg<false, Left>,
  options?: ValidateOptions,
): E.Either<Left | ValidateError, void>;

export function validateFp<Left>(
  async: true,
  value: ValidateValue,
  token: Text,
  signData: ValidateSignDataFpArg<true, Left>,
  options?: ValidateAsyncOptions,
): TE.TaskEither<Left | ValidateAsyncError, void>;

export function validateFp<Left>(
  async: boolean,
  value: ValidateValue,
  token: Text,
  signData: ValidateSignDataFpArg<boolean, Left>,
  options: ValidateOptions | ValidateAsyncOptions = {},
):
  | E.Either<Left | ValidateError, void>
  | TE.TaskEither<Left | ValidateAsyncError, void> {
  // Init data required params.
  let authDate: Date | undefined;
  let authDateString: string | undefined;
  let hash: string | undefined;

  // All search params pairs presented as `k=v`.
  const pairs: string[] = [];

  // Iterate over all key-value pairs of parsed parameters and find required
  // parameters.
  (typeof value === 'string' ? new URLSearchParams(value) : value).forEach((value, key) => {
    if (key === 'hash') {
      hash = value;
      return;
    }

    if (key === 'auth_date') {
      authDateString = value;
      const authDateNum = parseInt(value, 10);
      if (!Number.isNaN(authDateNum)) {
        authDate = new Date(authDateNum * 1000);
      }
    }

    pairs.push(`${key}=${value}`);
  });

  // Hash and auth date always required.
  if (!hash) {
    return (async ? TE.left : E.left)(new SignatureMissingError(false));
  }

  if (!authDate) {
    return (async ? TE.left : E.left)(new AuthDateInvalidError(authDateString));
  }

  // In case, expiration time passed, we do additional parameters check.
  const { expiresIn = 86400 } = options;
  if (expiresIn > 0) {
    // Check if init data expired.
    const expiresAtTs = authDate.getTime() + (expiresIn * 1000);
    const nowTs = Date.now();
    if (expiresAtTs < nowTs) {
      return (async ? TE.left : E.left)(
        new ExpiredError(authDate, new Date(expiresAtTs), new Date(nowTs)),
      );
    }
  }

  // According to docs, we sort all the pairs in alphabetical order.
  pairs.sort();

  const eitherSignature = signData(pairs.join('\n'), token, options);
  const onLeft = (error: Left) => E.left(error);
  const onRight = (signature: string) => (
    signature === hash ? E.right(undefined) : E.left(new SignatureInvalidError())
  );

  return typeof eitherSignature === 'function'
    ? pipe(eitherSignature, TE.matchW(onLeft, onRight))
    : pipe(eitherSignature, E.matchW(onLeft, onRight));
}

```
---
## File: packages/init-data-node/CHANGELOG.md

```markdown
# @tma.js/init-data-node

## 2.0.3

### Patch Changes

- 4570643: Update package.json actualizing all paths.
- Updated dependencies [4570643]
  - @tma.js/transformers@1.1.1
  - @tma.js/toolkit@1.0.2
  - @tma.js/types@1.0.2

## 2.0.2

### Patch Changes

- Updated dependencies [e3a2af6]
- Updated dependencies [dab51c3]
  - @tma.js/transformers@1.1.0
  - @tma.js/types@1.0.1

## 2.0.1

### Patch Changes

- Updated dependencies [fe883d3]
  - @tma.js/toolkit@1.0.1
  - @tma.js/transformers@1.0.1

```
---
## File: packages/init-data-node/package.json

```json
{
  "name": "@tma.js/init-data-node",
  "version": "2.0.3",
  "description": "TypeScript Node library to operate with Telegram init data.",
  "author": "Vladislav Kibenko <wolfram.deus@gmail.com>",
  "homepage": "https://github.com/Telegram-Mini-Apps/tma.js#readme",
  "repository": {
    "type": "git",
    "url": "git@github.com:Telegram-Mini-Apps/tma.js.git",
    "directory": "packages/init-data-node"
  },
  "bugs": {
    "url": "https://github.com/Telegram-Mini-Apps/tma.js/issues"
  },
  "keywords": [
    "telegram-mini-apps",
    "init-data",
    "node",
    "typescript"
  ],
  "license": "MIT",
  "type": "module",
  "sideEffects": false,
  "files": [
    "dist"
  ],
  "main": "./dist/entries/node.cjs",
  "module": "./dist/entries/node.js",
  "types": "./dist/entries/node.d.ts",
  "exports": {
    ".": {
      "types": "./dist/entries/node.d.ts",
      "import": "./dist/entries/node.js",
      "require": "./dist/entries/node.cjs",
      "default": "./dist/entries/node.cjs"
    },
    "./web": {
      "types": "./dist/entries/web.d.ts",
      "import": "./dist/entries/web.js",
      "require": "./dist/entries/web.cjs",
      "default": "./dist/entries/web.cjs"
    }
  },
  "scripts": {
    "test": "vitest --run",
    "lint": "eslint src",
    "lint:fix": "pnpm run lint --fix",
    "typecheck": "tsc --noEmit",
    "build:node": "vite build --ssr src/entries/node.ts",
    "build:web": "vite build --ssr src/entries/web.ts",
    "build": "rimraf dist && pnpm run build:node && pnpm run build:web"
  },
  "devDependencies": {
    "@types/node": "^22.9.0",
    "test-utils": "workspace:*",
    "tsconfig": "workspace:*"
  },
  "publishConfig": {
    "access": "public"
  },
  "dependencies": {
    "@tma.js/toolkit": "workspace:^",
    "@tma.js/transformers": "workspace:^",
    "@tma.js/types": "workspace:^",
    "better-promises": "^1.0.0",
    "error-kid": "^1.0.2",
    "fp-ts": "^2.16.11"
  }
}

```
---
## File: packages/init-data-node/README.md

```markdown
# @tma.js/init-data-node

[code-badge]: https://img.shields.io/badge/source-black?logo=github

[docs-badge]: https://img.shields.io/badge/documentation-blue?logo=gitbook&logoColor=white

[code-link]: https://github.com/Telegram-Mini-Apps/tma.js/tree/master/tma.js/init-data-node

[docs-link]: https://docs.telegram-mini-apps.com/packages/tma-js-init-data-node

[npm-link]: https://npmjs.com/package/@tma.js/init-data-node

[npm-badge]: https://img.shields.io/npm/v/@tma.js/init-data-node?logo=npm

[size-badge]: https://img.shields.io/bundlephobia/minzip/@tma.js/init-data-node

[![NPM][npm-badge]][npm-link]
![Size][size-badge]
[![docs-badge]][docs-link]
[![code-badge]][code-link]

The package provides utilities to work with the initialization data of Telegram Mini Apps on the
server side. To learn more about the initialization data and its usage, please refer to
the [documentation](https://docs.telegram-mini-apps.com/platform/launch-parameters).

```
---
## File: packages/init-data-node/tsconfig.eslint.json

```json
{
  "include": [
    "src"
  ]
}
```
---
## File: packages/init-data-node/tsconfig.json

```json
{
  "extends": "tsconfig/esnext.json",
  "include": [
    "src"
  ],
  "exclude": [
    "src/**/*.test.ts"
  ],
  "references": [
    {
      "path": "./tsconfig.node.json"
    }
  ]
}
```
---
## File: packages/init-data-node/tsconfig.node.json

```json
{
  "extends": "tsconfig/esnext.json",
  "compilerOptions": {
    "composite": true
  },
  "include": [
    "vite.config.ts",
    "package.json"
  ]
}

```
---
## File: packages/init-data-node/vite.config.ts

```typescript
import dts from 'vite-plugin-dts';
import { defineConfig } from 'vitest/config';

import packageJson from './package.json' with { type: "json" };

export default defineConfig((_) => ({
  test: {
    include: ['src/**/*.test.ts'],
    coverage: {
      enabled: true,
      provider: 'v8',
      include: ['src/**/*.ts'],
      exclude: ['src/**/*.test.ts'],
      branches: 100,
      functions: 100,
      statements: 100,
      lines: 100,
    },
  },
  plugins: [
    dts({ outDir: 'dist' }),
  ],
  build: {
    outDir: 'dist/entries',
    emptyOutDir: false,
    sourcemap: true,
    rollupOptions: {
      external: Object.keys(packageJson.dependencies),
    },
    lib: {
      entry: {
        node: 'src/entries/node.ts',
        web: 'src/entries/web.ts',
      },
      formats: ['es', 'cjs'],
      fileName(format, entry) {
        return `${entry}.${format === 'es' ? 'js' : 'cjs'}`;
      },
    },
  },
}));

```
---
## File: packages/sdk/src/composables/AsyncMountable.ts

```typescript
import { batch, computed, signal } from '@tma.js/signals';
import * as TE from 'fp-ts/TaskEither';
import { pipe } from 'fp-ts/function';

import type { AsyncOptions, MaybeAccessor } from '@/types.js';
import { access } from '@/helpers/access.js';

export interface AsyncMountableOptions<S, E> {
  /**
   * A function to retrieve the initial state.
   * @param options - additional options.
   */
  initialState: (options?: AsyncOptions) => TE.TaskEither<E, S>;
  /**
   * @returns True if the current page was reloaded.
   */
  isPageReload: MaybeAccessor<boolean>;
  /**
   * A function to call whenever the component was mounted.
   * @param state - restored state.
   */
  onMounted?: (state: S) => void;
  /**
   * A function to call whenever the component was unmounted.
   */
  onUnmounted?: VoidFunction;
  /**
   * Attempts to restore previously saved component state. This function
   * will only be called if the current page was reloaded.
   */
  restoreState: () => (S | undefined);
}

export class AsyncMountable<S extends object, E> {
  constructor({
    initialState,
    onMounted,
    restoreState,
    onUnmounted,
    isPageReload,
  }: AsyncMountableOptions<S, E>) {
    this.mount = options => {
      if (this._isMounted()) {
        return TE.right(undefined);
      }
      const restored = access(isPageReload) ? restoreState() : undefined;
      return pipe(
        restored ? TE.right(restored) : initialState(options),
        TE.map(state => {
          // The user could call mount several times in a row while the
          // component was still mounting. We should prevent calling the
          // same hooks several times in this case.
          if (!this._isMounted()) {
            batch(() => {
              this._isMounted.set(true);
              onMounted?.(state);
            });
          }
        }),
      );
    };

    this.unmount = () => {
      if (this._isMounted()) {
        batch(() => {
          this._isMounted.set(false);
          onUnmounted?.();
        });
      }
    };
  }

  private readonly _isMounted = signal(false);

  /**
   * Signal indicating if the component is mounted.
   */
  readonly isMounted = computed(this._isMounted);

  /**
   * Mounts the component restoring its state and calling required side effects.
   * @param options - additional execution options.
   */
  readonly mount: (options?: AsyncOptions) => TE.TaskEither<E, void>;

  /**
   * Unmounts the component.
   */
  readonly unmount: () => void;
}

```
---
## File: packages/sdk/src/composables/Button.ts

```typescript
import * as E from 'fp-ts/Either';
import { pipe } from 'fp-ts/function';
import { computed, type Computed } from '@tma.js/signals';
import type { PostEventError, MethodName, MethodParams } from '@tma.js/bridge';

import { createIsSupportedSignal } from '@/helpers/createIsSupportedSignal.js';
import {
  type WithChecksFp,
  type WithChecks,
  createWithChecksFp,
} from '@/with-checks/withChecksFp.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';
import type { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';
import type { WithStateRestore } from '@/fn-options/withStateRestore.js';
import { Stateful } from '@/composables/Stateful.js';
import { Mountable } from '@/composables/Mountable.js';
import { removeUndefined } from '@/helpers/removeUndefined.js';
import type { WithPostEvent } from '@/fn-options/withPostEvent.js';
import type { WithVersion } from '@/fn-options/withVersion.js';

type ButtonEither = E.Either<PostEventError, void>;

type BoolFields<S> = {
  [K in keyof S]-?: S[K] extends boolean ? K : never;
}[keyof S];

export interface ButtonOptions<S, M extends MethodName>
  extends SharedFeatureOptions,
  WithStateRestore<S>,
  WithPostEvent,
  WithVersion {
  /**
   * The initial button state.
   */
  initialState: S;
  /**
   * Removes a component click listener.
   * @param listener - a listener to remove.
   * @param once - should the listener be called only once.
   */
  offClick: (listener: VoidFunction, once?: boolean) => void;
  /**
   * Adds a component click listener.
   * @returns A function to remove listener.
   * @param listener - a listener to add.
   * @param once - should the listener be called only once.
   */
  onClick: (listener: VoidFunction, once?: boolean) => VoidFunction;
  /**
   * A Mini Apps method to commit changes.
   */
  method: M;
  /**
   * A function to create method payload.
   * @param state
   */
  payload: (state: S) => MethodParams<M>;
}

export class Button<S extends object, M extends MethodName> {
  constructor({
    isTma,
    storage,
    onClick,
    offClick,
    initialState,
    isPageReload,
    postEvent,
    payload,
    method,
    version,
  }: ButtonOptions<S, M>) {
    const stateful = new Stateful({
      initialState,
      onChange(state) {
        storage.set(state);
      },
    });
    const mountable = new Mountable<S>({
      initialState,
      isPageReload,
      onMounted: stateful.setState,
      restoreState: storage.get,
    });

    const wrapOptions = { version, requires: method, isTma };
    const wrapSupportedPlain = createWithChecksFp({
      ...wrapOptions,
      returns: 'plain',
    });
    const wrapMountedEither = createWithChecksFp({
      ...wrapOptions,
      returns: 'either',
      isMounted: mountable.isMounted,
    });

    this.isMounted = mountable.isMounted;
    this.isSupported = createIsSupportedSignal(method, version);
    this.state = stateful.state;

    this.setStateFp = wrapMountedEither(state => {
      const nextState = { ...this.state(), ...removeUndefined(state) };
      if (!stateful.hasDiff(nextState)) {
        return E.right(undefined);
      }
      return pipe(
        postEvent(method as any, payload(nextState)),
        E.map(() => {
          stateful.setState(nextState);
        }),
      );
    });
    this.setState = throwifyWithChecksFp(this.setStateFp);
    this.onClickFp = wrapSupportedPlain(onClick);
    this.onClick = throwifyWithChecksFp(this.onClickFp);
    this.offClickFp = wrapSupportedPlain(offClick);
    this.offClick = throwifyWithChecksFp(this.offClickFp);
    this.mountFp = wrapSupportedPlain(() => {
      const nothing = () => undefined;
      return pipe(mountable.mount(), E.match(nothing, nothing));
    });
    this.mount = throwifyWithChecksFp(this.mountFp);
    this.unmount = mountable.unmount;
    this.stateSetters = key => {
      const wrapped = wrapMountedEither(value => {
        return this.setStateFp({ [key]: value } as unknown as Partial<S>);
      });
      return [throwifyWithChecksFp(wrapped), wrapped];
    };
    this.stateBoolSetters = <K extends keyof S>(key: K) => {
      const [, setFp] = this.stateSetters(key);
      const setFalse = wrapMountedEither(() => setFp(false as S[K]));
      const setTrue = wrapMountedEither(() => setFp(true as S[K]));
      return [
        [throwifyWithChecksFp(setFalse), setFalse],
        [throwifyWithChecksFp(setTrue), setTrue],
      ];
    };
  }

  /**
   * Signal indicating if the component is currently mounted.
   */
  readonly isMounted: Computed<boolean>;

  /**
   * Signal indicating if the component is supported.
   */
  readonly isSupported: Computed<boolean>;

  /**
   * Complete button state.
   */
  readonly state: Computed<S>;

  /**
   * @returns A computed based on the specified state and its related key.
   * @param key - a key to use.
   */
  stateGetter<K extends keyof S>(key: K): Computed<S[K]> {
    return computed(() => this.state()[key]);
  }

  /**
   * @returns A setter with checks for the specified key.
   * @param key
   */
  readonly stateSetters: <K extends keyof S>(key: K) => [
    throwing: WithChecks<(value: S[K]) => void, true>,
    fp: WithChecksFp<(value: S[K]) => ButtonEither, true>,
  ];

  /**
   * @returns Setters with checks to set a specified boolean key.
   * @param key
   */
  readonly stateBoolSetters: <K extends BoolFields<S>>(key: K) => [
    setFalse: [
      throwing: WithChecks<() => void, true>,
      fp: WithChecksFp<() => ButtonEither, true>,
    ],
    setTrue: [
      throwing: WithChecks<() => void, true>,
      fp: WithChecksFp<() => ButtonEither, true>,
    ],
  ];

  /**
   * Updates the button state.
   */
  readonly setStateFp: WithChecksFp<(state: Partial<S>) => ButtonEither, true>;

  /**
   * @see setStateFp
   */
  readonly setState: WithChecks<(state: Partial<S>) => void, true>;

  /**
   * Adds a new button listener.
   * @param listener - event listener.
   * @param once - should the listener be called only once.
   * @returns A function to remove bound listener.
   * @example
   * const off = button.onClick(() => {
   *   console.log('User clicked the button');
   *   off();
   * });
   */
  readonly onClickFp: WithChecksFp<(listener: VoidFunction, once?: boolean) => VoidFunction, true>;

  /**
   * @see onClickFp
   */
  readonly onClick: WithChecks<(listener: VoidFunction, once?: boolean) => VoidFunction, true>;

  /**
   * Removes the button click listener.
   * @param listener - event listener.
   * @param once - should the listener be called only once.
   * @example
   * function listener() {
   *   console.log('User clicked the button');
   *   button.offClick(listener);
   * }
   * button.onClick(listener);
   */
  readonly offClickFp: WithChecksFp<
    (listener: VoidFunction, once?: boolean) => void,
    true
  >;

  /**
   * @see offClickFp
   */
  readonly offClick: WithChecks<(listener: VoidFunction, once?: boolean) => void, true>;

  /**
   * Mounts the component restoring its state.
   * @since Mini Apps v6.1
   */
  readonly mountFp: WithChecksFp<() => void, true>;

  /**
   * @see mountFp
   */
  readonly mount: WithChecks<() => void, true>;

  /**
   * Unmounts the component.
   *
   * Note that this function does not remove listeners added via the `onClick`
   * function, so you have to remove them on your own.
   * @see onClick
   */
  readonly unmount: () => void;
}

```
---
## File: packages/sdk/src/composables/Mountable.ts

```typescript
import { batch, computed, signal } from '@tma.js/signals';
import * as E from 'fp-ts/Either';
import { pipe } from 'fp-ts/function';

import type { MaybeAccessor } from '@/types.js';
import { access } from '@/helpers/access.js';

export interface MountableOptions<S, Err> {
  /**
   * A state to use if the `restoreState` function returned falsy value or
   * `isPageReload` returned false.
   */
  initialState: S | (() => E.Either<Err, S>);
  /**
   * @returns True if the current page was reloaded.
   */
  isPageReload: MaybeAccessor<boolean>;
  /**
   * A function to call whenever the component was mounted.
   * @param state - restored state.
   */
  onMounted?: (state: S) => void;
  /**
   * A function to call whenever the component was unmounted.
   */
  onUnmounted?: VoidFunction;
  /**
   * Attempts to restore previously saved component state. This function
   * will only be called if the current page was reloaded.
   */
  restoreState: () => (S | undefined);
}

export class Mountable<S extends object, Err = never> {
  constructor({
    onMounted,
    restoreState,
    initialState,
    onUnmounted,
    isPageReload,
  }: MountableOptions<S, Err>) {
    this.mount = () => {
      if (this.isMounted()) {
        return E.right(undefined);
      }
      const restored = access(isPageReload) ? restoreState() : undefined;
      const state = restored
        ? E.right(restored)
        : (typeof initialState === 'function' ? initialState() : E.right(initialState));

      return pipe(state, E.map(s => {
        batch(() => {
          this._isMounted.set(true);
          onMounted?.(s);
        });
      }));
    };

    this.unmount = () => {
      if (this._isMounted()) {
        batch(() => {
          this._isMounted.set(false);
          onUnmounted?.();
        });
      }
    };
  }

  private readonly _isMounted = signal(false);

  /**
   * Signal indicating if the component is mounted.
   */
  readonly isMounted = computed(this._isMounted);

  /**
   * Mounts the component restoring its state and calling required side effects.
   */
  readonly mount: () => E.Either<Err, void>;

  /**
   * Unmounts the component.
   */
  readonly unmount: () => void;
}

```
---
## File: packages/sdk/src/composables/Stateful.ts

```typescript
import { type Computed, computed, type Signal, signal } from '@tma.js/signals';

import { removeUndefined } from '@/helpers/removeUndefined.js';
import { shallowEqual } from '@/helpers/shallowEqual.js';

export interface StatefulOptions<S> {
  /**
   * The initial state.
   */
  initialState: S;
  /**
   * A function to call whenever the state changes.
   * @param state - updated state.
   */
  onChange: (state: S) => void;
}

export class Stateful<S extends object> {
  constructor({ initialState, onChange }: StatefulOptions<S>) {
    this._state = signal(initialState, { equals: shallowEqual });
    this.state = computed(this._state);
    this.state.sub(onChange);
  }

  protected readonly _state: Signal<S>;

  /**
   * The current state.
   */
  readonly state: Computed<S>;

  /**
   * Creates a computed signal based on the state.
   * @param key - a state key to use as a source.
   */
  getter<K extends keyof S>(key: K): Computed<S[K]> {
    return computed(() => this._state()[key]);
  }

  /**
   * Updates the state.
   * @param state - updates to apply.
   */
  readonly setState = (state: Partial<S>): void => {
    const nextState = { ...this.state(), ...removeUndefined(state) };
    if (!shallowEqual(nextState, this.state())) {
      this._state.set(nextState);
    }
  };

  /**
   * @returns True if specified payload will update the state.
   * @param state
   */
  hasDiff(state: Partial<S>): boolean {
    return !shallowEqual({ ...this.state(), ...removeUndefined(state) }, this.state());
  }
}

```
---
## File: packages/sdk/src/features/BackButton/BackButton.test.ts

```typescript
import { describe, expect, it, vi } from 'vitest';
import * as E from 'fp-ts/Either';

import { BackButton, type BackButtonOptions } from '@/features/BackButton/BackButton.js';
import { createComponentSessionStorage } from '@/helpers/component-storage.js';
import { createNoopComponentStorage } from '@test-utils/utils.js';
import { testIsSupportedPure } from '@test-utils/predefined/testIsSupportedPure.js';
import { testSafetyPure } from '@test-utils/predefined/testSafetyPure.js';
import type { InstantiateOptions } from '@test-utils/types.js';

const MIN_VERSION = '6.1';

function instantiate({
  storage = false,
  version = MIN_VERSION,
  postEvent = () => E.right(undefined),
  isTma = true,
  onClick = () => () => undefined,
  offClick = () => undefined,
  isPageReload = false,
}: InstantiateOptions<BackButtonOptions> = {}) {
  return new BackButton({
    version,
    storage: typeof storage === 'boolean'
      ? storage
        ? createComponentSessionStorage('backButton')
        : createNoopComponentStorage()
      : storage,
    postEvent,
    isTma,
    onClick,
    offClick,
    isPageReload,
  });
}

describe.each([
  ['hide', (component: BackButton) => component.hide(), true],
  ['show', (component: BackButton) => component.show(), true],
  ['mount', (component: BackButton) => component.mount(), false],
  ['onClick', (component: BackButton) => component.onClick(() => undefined), false],
  ['offClick', (component: BackButton) => component.offClick(() => undefined), false],
] as const)('%s', (method, tryCall, requireMount) => {
  describe('safety', () => {
    testSafetyPure({
      instantiate,
      get: instance => instance[method],
      try: tryCall,
      minVersion: MIN_VERSION,
      mount: requireMount
        ? component => component.mount()
        : undefined,
    });
  });
});

describe.each([
  ['hide', false, 'show'],
  ['show', true, 'hide'],
] as const)('%s', (method, targetIsVisible, oppositeMethod) => {
  it(`should set isVisible = ${targetIsVisible}`, () => {
    const component = instantiate();
    component.mount();
    component[oppositeMethod]();
    expect(component.isVisible()).toBe(!targetIsVisible);
    component[method]();
    expect(component.isVisible()).toBe(targetIsVisible);
  });

  it(
    `should call postEvent with "web_app_setup_back_button" and { is_visible: ${targetIsVisible} }`,
    () => {
      const postEvent = vi.fn(() => E.right(undefined));
      const component = instantiate({ postEvent });
      component.mount();
      component[oppositeMethod]();
      postEvent.mockClear();
      component[method]();
      component[method]();
      component[method]();
      expect(postEvent).toBeCalledTimes(1);
      expect(postEvent)
        .toBeCalledWith('web_app_setup_back_button', { is_visible: targetIsVisible });
    },
  );

  it('should save the state using passed storage', () => {
    const set = vi.fn();
    const component = instantiate({
      storage: { get: () => undefined, set },
    });
    component.mount();
    component[oppositeMethod]();
    set.mockClear();
    component[method]();
    expect(set).toHaveBeenCalledOnce();
    expect(set).toHaveBeenCalledWith({ isVisible: targetIsVisible });
  });
});

describe('onClick', () => {
  it('should return result of passed onClick from options', () => {
    const offClick = () => undefined;
    const onClick = vi.fn(() => offClick);
    const listener = vi.fn();
    expect(instantiate({ onClick }).onClick(listener, true)).toBe(offClick);
    expect(onClick).toHaveBeenCalledOnce();
    expect(onClick).toHaveBeenCalledWith(listener, true);
  });
});

describe('offClick', () => {
  it('should use passed offClick from options', () => {
    const offClick = vi.fn(() => undefined);
    const listener = vi.fn();
    instantiate({ offClick }).offClick(listener, true);
    expect(offClick).toHaveBeenCalledOnce();
    expect(offClick).toHaveBeenCalledWith(listener, true);
  });
});

describe('mount', () => {
  it('should set isMounted = true', () => {
    const component = instantiate();
    expect(component.isMounted()).toBe(false);
    component.mount();
    expect(component.isMounted()).toBe(true);
  });

  describe('no page reload', () => {
    it('should not use value from the storage', () => {
      const get = vi.fn(() => ({ isVisible: true }));
      const component = instantiate({ storage: { get, set: vi.fn() } });
      component.mount();
      expect(get).not.toHaveBeenCalled();
    });
  });

  describe('page reload', () => {
    it('should extract state from storage', () => {
      const get = vi.fn();
      const component = instantiate({
        storage: { get, set: vi.fn() },
        isPageReload: true,
      });
      component.mount();
      expect(get).toHaveBeenCalledOnce();

      const get2 = vi.fn(() => ({ isVisible: true }));
      const component2 = instantiate({
        storage: { get: get2, set: vi.fn() },
        isPageReload: true,
      });
      component2.mount();
      expect(get2).toHaveBeenCalledOnce();
    });
  });
});

describe('unmount', () => {
  it('should set isMounted = false', () => {
    const component = instantiate();
    expect(component.isMounted()).toBe(false);
    component.mount();
    expect(component.isMounted()).toBe(true);
    component.unmount();
    expect(component.isMounted()).toBe(false);
  });
});

describe('isSupported', () => {
  testIsSupportedPure(version => instantiate({ isTma: true, version }), MIN_VERSION);
});

```
---
## File: packages/sdk/src/features/BackButton/BackButton.ts

```typescript
import type { Computed } from '@tma.js/signals';
import * as E from 'fp-ts/Either';
import type { PostEventError } from '@tma.js/bridge';

import { Button, type ButtonOptions } from '@/composables/Button.js';
import type { WithChecksFp, WithChecks } from '@/with-checks/withChecksFp.js';

export interface BackButtonState {
  isVisible: boolean;
}

export type BackButtonOptions = Omit<
  ButtonOptions<BackButtonState, 'web_app_setup_back_button'>,
  'method' | 'payload' | 'initialState'
>;

/**
 * @since Mini Apps v6.1
 */
export class BackButton {
  constructor(options: BackButtonOptions) {
    const button = new Button({
      ...options,
      method: 'web_app_setup_back_button',
      payload: state => ({ is_visible: state.isVisible }),
      initialState: { isVisible: false },
    });

    this.isVisible = button.stateGetter('isVisible');
    this.isMounted = button.isMounted;
    this.isSupported = button.isSupported;
    [[this.hide, this.hideFp], [this.show, this.showFp]] = button.stateBoolSetters('isVisible');
    this.onClick = button.onClick;
    this.onClickFp = button.onClickFp;
    this.offClick = button.offClick;
    this.offClickFp = button.offClickFp;
    this.mount = button.mount;
    this.mountFp = button.mountFp;
    this.unmount = button.unmount;
  }

  /**
   * Signal indicating if the component is currently visible.
   */
  readonly isVisible: Computed<boolean>;

  /**
   * Signal indicating if the component is currently mounted.
   */
  readonly isMounted: Computed<boolean>;

  /**
   * Signal indicating if the component is supported.
   */
  readonly isSupported: Computed<boolean>;

  /**
   * Hides the button.
   * @since Mini Apps v6.1
   */
  readonly hideFp: WithChecksFp<() => E.Either<PostEventError, void>, true>;

  /**
   * @see hideFp
   */
  readonly hide: WithChecks<() => void, true>;

  /**
   * Shows the button.
   * @since Mini Apps v6.1
   */
  readonly showFp: WithChecksFp<() => E.Either<PostEventError, void>, true>;

  /**
   * @see showFp
   */
  readonly show: WithChecks<() => void, true>;

  /**
   * Adds a new button listener.
   * @param listener - event listener.
   * @param once - should the listener be called only once.
   * @returns A function to remove bound listener.
   * @since Mini Apps v6.1
   * @example
   * const off = button.onClick(() => {
   *   console.log('User clicked the button');
   *   off();
   * });
   */
  readonly onClickFp: WithChecksFp<
    (listener: VoidFunction, once?: boolean) => VoidFunction,
    true
  >;

  /**
   * @see onClickFp
   */
  readonly onClick: WithChecks<(listener: VoidFunction, once?: boolean) => VoidFunction, true>;

  /**
   * Removes the button click listener.
   * @param listener - event listener.
   * @param once - should the listener be called only once.
   * @since Mini Apps v6.1
   * @example
   * function listener() {
   *   console.log('User clicked the button');
   *   button.offClick(listener);
   * }
   * button.onClick(listener);
   */
  readonly offClickFp: WithChecksFp<
    (listener: VoidFunction, once?: boolean) => void,
    true
  >;

  /**
   * @see offClickFp
   */
  readonly offClick: WithChecks<(listener: VoidFunction, once?: boolean) => void, true>;

  /**
   * Mounts the component restoring its state.
   * @since Mini Apps v6.1
   */
  readonly mountFp: WithChecksFp<() => void, true>;

  /**
   * @see mountFp
   */
  readonly mount: WithChecks<() => void, true>;

  /**
   * Unmounts the component.
   *
   * Note that this function does not remove listeners added via the `onClick`
   * function, so you have to remove them on your own.
   * @see onClick
   */
  readonly unmount: () => void;
}

```
---
## File: packages/sdk/src/features/BackButton/exports.ts

```typescript
export { BackButton, type BackButtonState, type BackButtonOptions } from './BackButton.js';
export { backButton } from './instance.js';

```
---
## File: packages/sdk/src/features/BackButton/instance.ts

```typescript
import { BackButton } from '@/features/BackButton/BackButton.js';
import { buttonOptions } from '@/fn-options/buttonOptions.js';

export const backButton = new BackButton(buttonOptions('backButton', 'back_button_pressed'));

```
---
## File: packages/sdk/src/features/Biometry/Biometry.test.ts

```typescript
import { describe, expect, it, vi } from 'vitest';
import * as E from 'fp-ts/Either';
import * as TE from 'fp-ts/TaskEither';
import { type RequestFpFn, type EventName, emitEvent } from '@tma.js/bridge';
import { type EventListener, off, on } from '@tma.js/bridge';

import { Biometry } from '@/features/Biometry/Biometry.js';
import { createComponentSessionStorage } from '@/helpers/component-storage.js';
import { createNoopComponentStorage } from '@test-utils/utils.js';
import { testIsSupportedPure } from '@test-utils/predefined/testIsSupportedPure.js';
import { testSafetyPure } from '@test-utils/predefined/testSafetyPure.js';
import { InstantiateOptions } from '@test-utils/types.js';
import { BiometryOptions } from '@/features/Biometry/types.js';

const MIN_VERSION = '7.2';

function instantiate({
  storage = false,
  version = MIN_VERSION,
  postEvent = () => E.right(undefined),
  request = ((_method: any, event: EventName) => {
    switch (event) {
      case 'biometry_auth_requested':
        return TE.right({ status: 'failed' });
      case 'biometry_info_received':
        return TE.right({
          available: true,
          access_requested: true,
          access_granted: true,
          device_id: 'A',
          token_saved: true,
          type: 'face',
        });
      case 'biometry_token_updated':
        return TE.right({ status: 'updated' });
      default:
        return TE.right(undefined);
    }
  }) as RequestFpFn,
  isTma = true,
  onInfoReceived = () => undefined,
  offInfoReceived = () => undefined,
  isPageReload = false,
}: InstantiateOptions<BiometryOptions> = {}) {
  return new Biometry({
    version,
    storage: typeof storage === 'boolean'
      ? storage
        ? createComponentSessionStorage('backButton')
        : createNoopComponentStorage()
      : storage,
    postEvent,
    request,
    isTma,
    onInfoReceived,
    offInfoReceived,
    isPageReload,
  });
}

describe.each([
  ['authenticate', (component: Biometry) => component.authenticate(), true],
  ['openSettings', (component: Biometry) => component.openSettings(), false],
  ['requestAccess', (component: Biometry) => component.requestAccess(), true],
  ['updateToken', (component: Biometry) => component.updateToken(), true],
  ['mount', (component: Biometry) => component.mount(), false],
] as const)('%s', (method, tryCall, requireMount) => {
  describe('safety', () => {
    testSafetyPure({
      instantiate,
      get: instance => instance[method],
      try: tryCall,
      minVersion: MIN_VERSION,
      mount: requireMount
        ? component => component.mount()
        : undefined,
    });
  });
});

describe('mount', () => {
  it('should set isMounted = true', async () => {
    const component = instantiate();
    expect(component.isMounted()).toBe(false);
    await component.mount();
    expect(component.isMounted()).toBe(true);
  });

  describe('no page reload', () => {
    it('should not use value from the storage', async () => {
      const storageState = {
        available: true,
        type: 'face',
        accessGranted: true,
        accessRequested: true,
        deviceId: 'A',
        tokenSaved: true,
      };
      const get = vi.fn(() => storageState);
      const component = instantiate({ storage: { get, set: vi.fn() } });
      await component.mount();
      expect(get).not.toHaveBeenCalled();
    });
  });

  describe('page reload', () => {
    it('should extract state from storage', async () => {
      const get = vi.fn();
      const component = instantiate({
        request: () => TE.right({
          available: true,
          access_requested: true,
          access_granted: true,
          device_id: 'A',
          token_saved: true,
          type: 'face',
        }),
        storage: { get, set: vi.fn() },
        isPageReload: true,
      });
      await component.mount();
      expect(get).toHaveBeenCalledOnce();

      const storageState = {
        available: true,
        type: 'face',
        accessGranted: true,
        accessRequested: true,
        deviceId: 'A',
        tokenSaved: true,
      };
      const get2 = vi.fn(() => storageState);
      const component2 = instantiate({
        storage: { get: get2, set: vi.fn() },
        isPageReload: true,
      });
      await component2.mount();
      expect(get2).toHaveBeenCalledOnce();
    });
  });

  it('should use onBiometryInfoReceived to start tracking state changes', async () => {
    const onInfoReceived = vi.fn(
      (listener: EventListener<'biometry_info_received'>) => {
        on('biometry_info_received', listener);
      },
    );
    const component = instantiate({
      storage: {
        get: () => ({
          available: true,
          type: 'face',
          accessGranted: true,
          accessRequested: true,
          deviceId: 'A',
          tokenSaved: true,
        }),
        set: vi.fn(),
      },
      onInfoReceived,
      offInfoReceived(listener) {
        off('biometry_info_received', listener);
      },
    });
    await component.mount();
    expect(onInfoReceived).toHaveBeenCalledOnce();
    expect(component.state()).toStrictEqual({
      available: true,
      type: 'face',
      accessGranted: true,
      accessRequested: true,
      deviceId: 'A',
      tokenSaved: true,
    });
    emitEvent('biometry_info_received', {
      available: true,
      access_requested: false,
      access_granted: false,
      device_id: 'B',
      token_saved: false,
      type: 'finger',
    });
    expect(component.state()).toStrictEqual({
      available: true,
      type: 'finger',
      accessGranted: false,
      accessRequested: false,
      deviceId: 'B',
      tokenSaved: false,
    });
  });
});

describe('unmount', () => {
  it('should set isMounted = false', async () => {
    const component = instantiate();
    await component.mount();
    expect(component.isMounted()).toBe(true);
    component.unmount();
    expect(component.isMounted()).toBe(false);
  });

  it(
    'should remove biometry state change listener using offBiometryInfoReceived',
    async () => {
      const offBiometryInfoReceived = vi.fn(
        (listener: EventListener<'biometry_info_received'>) => {
          off('biometry_info_received', listener);
        },
      );
      const component = instantiate({
        storage: {
          get: () => ({
            available: true,
            type: 'face',
            accessGranted: true,
            accessRequested: true,
            deviceId: 'A',
            tokenSaved: true,
          }),
          set: vi.fn(),
        },
        onInfoReceived(listener) {
          on('biometry_info_received', listener);
        },
        offInfoReceived: offBiometryInfoReceived,
      });
      await component.mount();
      const mountedState = {
        available: true,
        type: 'face',
        accessGranted: true,
        accessRequested: true,
        deviceId: 'A',
        tokenSaved: true,
      };
      expect(component.state()).toStrictEqual(mountedState);
      expect(offBiometryInfoReceived).not.toHaveBeenCalled();
      component.unmount();
      expect(offBiometryInfoReceived).toHaveBeenCalledOnce();
      emitEvent('biometry_info_received', {
        available: true,
        access_requested: false,
        access_granted: false,
        device_id: 'B',
        token_saved: false,
        type: 'finger',
      });
      expect(component.state()).toStrictEqual(mountedState);
    },
  );
});

describe('isSupported', () => {
  testIsSupportedPure(version => instantiate({ isTma: true, version }), MIN_VERSION);
});

```
---
## File: packages/sdk/src/features/Biometry/Biometry.ts

```typescript
import type { Computed } from '@tma.js/signals';
import type {
  RequestError,
  PostEventError,
  EventPayload,
  BiometryAuthRequestStatus,
  EventListener,
  BiometryTokenUpdateStatus,
} from '@tma.js/bridge';
import { BetterPromise } from 'better-promises';
import * as E from 'fp-ts/Either';
import * as TE from 'fp-ts/TaskEither';
import { pipe } from 'fp-ts/function';

import { createWithChecksFp, WithChecks, WithChecksFp } from '@/with-checks/withChecksFp.js';
import { createIsSupportedSignal } from '@/helpers/createIsSupportedSignal.js';
import { NotAvailableError } from '@/errors.js';
import type {
  BiometryAuthenticateOptions, BiometryOptions,
  BiometryRequestAccessOptions,
  BiometryState,
  BiometryUpdateTokenOptions,
} from '@/features/Biometry/types.js';
import type { AsyncOptions } from '@/types.js';
import { Stateful } from '@/composables/Stateful.js';
import { AsyncMountable } from '@/composables/AsyncMountable.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';

type BiometryTask<T> = TE.TaskEither<RequestError, T>;

interface AuthenticateResult {
  /**
   * Authentication status.
   */
  status: BiometryAuthRequestStatus;
  /**
   * Token from the local secure storage saved previously.
   */
  token?: string;
}

const notAvailableError = new NotAvailableError('Biometry is not available');

function eventToState(event: EventPayload<'biometry_info_received'>): BiometryState {
  let available = false;
  let tokenSaved = false;
  let deviceId = '';
  let accessRequested = false;
  let type = '';
  let accessGranted = false;
  if (event.available) {
    available = true;
    tokenSaved = event.token_saved;
    deviceId = event.device_id;
    accessRequested = event.access_requested;
    type = event.type;
    accessGranted = event.access_granted;
  }
  return { available, tokenSaved, deviceId, type, accessGranted, accessRequested };
}

/**
 * @since Mini Apps v7.2
 */
export class Biometry {
  constructor({
    version,
    request,
    postEvent,
    storage,
    onInfoReceived,
    offInfoReceived,
    isTma,
    isPageReload,
  }: BiometryOptions) {
    const listener: EventListener<'biometry_info_received'> = event => {
      stateful.setState(eventToState(event));
    };

    const stateful = new Stateful<BiometryState>({
      initialState: {
        available: false,
        type: 'unknown',
        accessGranted: false,
        accessRequested: false,
        deviceId: '',
        tokenSaved: false,
      },
      onChange: storage.set,
    });
    const mountable = new AsyncMountable({
      initialState(options) {
        return pipe(
          request('web_app_biometry_get_info', 'biometry_info_received', options),
          TE.map(eventToState),
        );
      },
      isPageReload,
      onMounted(state) {
        stateful.setState(state);
        onInfoReceived(listener);
      },
      onUnmounted() {
        offInfoReceived(listener);
      },
      restoreState: storage.get,
    });

    const wrapOptions = { version, requires: 'web_app_biometry_request_auth', isTma } as const;
    const wrapSupportedEither = createWithChecksFp({
      ...wrapOptions,
      returns: 'either',
    });
    const wrapSupportedTask = createWithChecksFp({
      ...wrapOptions,
      returns: 'task',
    });
    const wrapMountedTask = createWithChecksFp({
      ...wrapOptions,
      isMounted: mountable.isMounted,
      returns: 'task',
    });

    this.isAvailable = stateful.getter('available');
    this.isMounted = mountable.isMounted;
    this.isSupported = createIsSupportedSignal('web_app_biometry_request_auth', version);
    this.state = stateful.state;
    this.unmount = mountable.unmount;
    this.mountFp = wrapSupportedTask(mountable.mount);

    this.authenticateFp = wrapMountedTask(options => {
      return !this.isAvailable()
        ? TE.left(notAvailableError)
        : pipe(
          request('web_app_biometry_request_auth', 'biometry_auth_requested', {
            ...options,
            params: { reason: ((options || {}).reason || '').trim() },
          }),
          TE.map(response => {
            stateful.setState({ token: response.token });
            return response;
          }),
        );
    });

    this.openSettingsFp = wrapSupportedEither(() => postEvent('web_app_biometry_open_settings'));

    this.requestAccessFp = wrapMountedTask(options => {
      return pipe(
        request('web_app_biometry_request_access', 'biometry_info_received', {
          ...options,
          params: { reason: ((options || {}).reason || '').trim() },
        }),
        TE.chain(response => {
          const state = eventToState(response);
          if (!state.available) {
            return TE.left(notAvailableError);
          }
          stateful.setState(state);
          return TE.right(state.accessRequested);
        }),
      );
    });

    this.updateTokenFp = wrapMountedTask((options = {}) => {
      return pipe(
        request('web_app_biometry_update_token', 'biometry_token_updated', {
          ...options,
          params: { token: options.token || '', reason: options.reason?.trim() },
        }),
        TE.map(response => response.status),
      );
    });

    this.authenticate = throwifyWithChecksFp(this.authenticateFp);
    this.openSettings = throwifyWithChecksFp(this.openSettingsFp);
    this.requestAccess = throwifyWithChecksFp(this.requestAccessFp);
    this.updateToken = throwifyWithChecksFp(this.updateTokenFp);
    this.mount = throwifyWithChecksFp(this.mountFp);
  }

  /**
   * Signal indicating if biometry is available.
   */
  readonly isAvailable: Computed<boolean>;

  /**
   * Signal indicating if the component is supported.
   */
  readonly isSupported: Computed<boolean>;

  /**
   * Signal indicating if the component is mounted.
   */
  readonly isMounted: Computed<boolean>;

  /**
   * Complete component state.
   */
  readonly state: Computed<BiometryState>;

  /**
   * Attempts to authenticate a user using biometrics and fetch a previously stored secure token.
   * @param options - method options.
   * @since Mini Apps v7.2
   * @returns Token from the local secure storage saved previously or undefined.
   * @example
   * const { status, token } = await biometry.authenticate({
   *   reason: 'Authenticate to open wallet',
   * });
   */
  readonly authenticateFp: WithChecksFp<(options?: BiometryAuthenticateOptions) => BiometryTask<{
    /**
     * Authentication status.
     */
    status: BiometryAuthRequestStatus;
    /**
     * Token from the local secure storage saved previously.
     */
    token?: string;
  }>, true>;

  /**
   * @see authenticateFp
   */
  readonly authenticate: WithChecks<
    (options?: BiometryAuthenticateOptions) => BetterPromise<AuthenticateResult>,
    true
  >;

  /**
   * Opens the biometric access settings for bots. Useful when you need to request biometrics
   * access to users who haven't granted it yet.
   *
   * _Note that this method can be called only in response to user interaction with the Mini App
   * interface (e.g. a click inside the Mini App or on the main button)_.
   * @since Mini Apps v7.2
   */
  readonly openSettingsFp: WithChecksFp<() => E.Either<PostEventError, void>, true>;

  /**
   * @see openSettingsFp
   */
  readonly openSettings: WithChecks<() => void, true>;

  /**
   * Requests permission to use biometrics.
   * @since Mini Apps v7.2
   * @returns Promise with true, if access was granted.
   * @example
   * const accessGranted = await biometry.requestAccess({
   *   reason: 'Authenticate to open wallet',
   * });
   */
  readonly requestAccessFp: WithChecksFp<
    (options?: BiometryRequestAccessOptions) => BiometryTask<boolean>,
    true
  >;

  /**
   * @see requestAccessFp
   */
  readonly requestAccess: WithChecks<
    (options?: BiometryRequestAccessOptions) => BetterPromise<boolean>,
    true
  >;

  /**
   * Updates the biometric token in a secure storage on the device.
   * @since Mini Apps v7.2
   * @returns Promise with `true`, if token was updated.
   * @example Setting a new token
   * biometry.updateToken({
   *   token: 'abcdef',
   * })
   * @example Deleting the token
   * biometry.updateToken();
   */
  readonly updateTokenFp: WithChecksFp<
    (options?: BiometryUpdateTokenOptions) => BiometryTask<BiometryTokenUpdateStatus>,
    true
  >;

  /**
   * @see updateTokenFp
   */
  readonly updateToken: WithChecks<
    (options?: BiometryUpdateTokenOptions) => BetterPromise<BiometryTokenUpdateStatus>,
    true
  >;

  /**
   * Mounts the component restoring its state.
   * @since Mini Apps v7.2
   */
  readonly mountFp: WithChecksFp<(options?: AsyncOptions) => BiometryTask<void>, true>;

  /**
   * @see mountFp
   */
  readonly mount: WithChecks<(options?: AsyncOptions) => BetterPromise<void>, true>;

  /**
   * Unmounts the component.
   */
  readonly unmount: () => void;
}

```
---
## File: packages/sdk/src/features/Biometry/exports.ts

```typescript
export { Biometry } from './Biometry.js';
export { biometry } from './instance.js';
export type {
  BiometryState,
  BiometryUpdateTokenOptions,
  BiometryAuthenticateOptions,
  BiometryRequestAccessOptions,
} from './types.js';

```
---
## File: packages/sdk/src/features/Biometry/instance.ts

```typescript
import { on, off } from '@tma.js/bridge';
import { pipe } from 'fp-ts/function';

import { Biometry } from '@/features/Biometry/Biometry.js';
import type { BiometryState } from '@/features/Biometry/types.js';
import { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';
import { withRequest } from '@/fn-options/withRequest.js';
import { withStateRestore } from '@/fn-options/withStateRestore.js';
import { withPostEvent } from '@/fn-options/withPostEvent.js';
import { withVersion } from '@/fn-options/withVersion.js';

export const biometry = new Biometry({
  ...pipe(
    sharedFeatureOptions(),
    withPostEvent,
    withVersion,
    withRequest,
    withStateRestore<BiometryState>('biometry'),
  ),
  offInfoReceived(listener) {
    off('biometry_info_received', listener);
  },
  onInfoReceived(listener) {
    return on('biometry_info_received', listener);
  },
});

```
---
## File: packages/sdk/src/features/Biometry/types.ts

```typescript
import type { BiometryType, EventListener } from '@tma.js/bridge';
import type { Maybe } from '@tma.js/toolkit';

import type { AsyncOptions } from '@/types.js';
import type { WithVersion } from '@/fn-options/withVersion.js';
import type { WithStateRestore } from '@/fn-options/withStateRestore.js';
import type { WithRequest } from '@/fn-options/withRequest.js';
import type { WithPostEvent } from '@/fn-options/withPostEvent.js';
import type { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';

export interface BiometryState {
  /**
   * If true, indicates that biometric authentication is available on the current device.
   */
  available: boolean;
  /**
   * Indicates whether the app has previously requested permission to use biometrics.
   */
  accessRequested: boolean;
  /**
   * Indicates whether the user has granted the app permission to use biometrics.
   *
   * If false and access_requested is true may indicate that:
   *
   * - The user has simply canceled the permission popup, in which case
   * a `web_app_biometry_request_access` event can be emitted to re-open the popup.
   *
   * - The user has denied the app permission to use biometrics, in which case the app should
   * open a prompt notifying the user that the biometric settings must be changed to use
   * biometrics.
   */
  accessGranted: boolean;
  /**
   * A unique device identifier that can be used to match the token to the device.
   */
  deviceId: string;
  /**
   * Show whether a token was safely stored on-device.
   */
  tokenSaved: boolean;
  /**
   * The type of biometrics currently available on the device.
   */
  type: BiometryType;
  /**
   * Last retrieved token.
   */
  token?: string;
}

export interface BiometryAuthenticateOptions extends AsyncOptions {
  /**
   * Reason to request biometry data. Should be at least 1 symbol length, but not more than
   * 128 symbols.
   */
  reason?: Maybe<string>;
}

export interface BiometryUpdateTokenOptions extends AsyncOptions {
  /**
   * Optional string field, containing the reason why the bot is asking to authenticate using biometrics (1-128 chars, used in the prompt).
   */
  reason?: string;
  /**
   * Token to save in the local device secure storage. Passing `null`, `undefined` or empty string
   * removes it from the storage.
   */
  token?: Maybe<string>;
}

export interface BiometryRequestAccessOptions extends AsyncOptions {
  /**
   * The text to be displayed to a user in the popup describing why the bot needs access to
   * biometrics, 0-128 characters.
   */
  reason?: Maybe<string>;
}

export interface BiometryOptions extends WithVersion,
  WithStateRestore<BiometryState>,
  WithRequest,
  WithPostEvent,
  SharedFeatureOptions {
  /**
   * Adds a biometry info received event listener.
   * @param listener - a listener to add.
   */
  onInfoReceived: (listener: EventListener<'biometry_info_received'>) => void;
  /**
   * Removes a biometry info received event listener.
   * @param listener - a listener to add.
   */
  offInfoReceived: (listener: EventListener<'biometry_info_received'>) => void;
}

```
---
## File: packages/sdk/src/features/ClosingBehavior/ClosingBehavior.test.ts

```typescript
import { describe, expect, it, vi } from 'vitest';
import * as E from 'fp-ts/Either';
import type { PostEventFpFn } from '@tma.js/bridge';

import { ClosingBehavior } from '@/features/ClosingBehavior/ClosingBehavior.js';
import { type ComponentStorage, createComponentSessionStorage } from '@/helpers/component-storage.js';
import { createNoopComponentStorage } from '@test-utils/utils.js';
import { testSafetyPure } from '@test-utils/predefined/testSafetyPure.js';

function instantiate({
  storage = false,
  postEvent = () => E.right(undefined),
  isTma = true,
  isPageReload = false,
}: {
  storage?: boolean | ComponentStorage<{ isConfirmationEnabled: boolean }>;
  postEvent?: PostEventFpFn;
  isTma?: boolean;
  isPageReload?: boolean;
} = {}) {
  return new ClosingBehavior({
    storage: typeof storage === 'boolean'
      ? storage
        ? createComponentSessionStorage('closingBehavior')
        : createNoopComponentStorage()
      : storage,
    postEvent,
    isTma,
    isPageReload,
  });
}

describe.each([
  ['disableConfirmation', (component: ClosingBehavior) => component.disableConfirmation(), true],
  ['enableConfirmation', (component: ClosingBehavior) => component.enableConfirmation(), true],
  ['mount', (component: ClosingBehavior) => component.mount(), false],
] as const)('%s', (method, tryCall, requireMount) => {
  describe('safety', () => {
    testSafetyPure({
      instantiate,
      get: instance => instance[method],
      try: tryCall,
      mount: requireMount
        ? component => component.mount()
        : undefined,
    });
  });
});

describe.each([
  ['disableConfirmation', false, 'enableConfirmation'],
  ['enableConfirmation', true, 'disableConfirmation'],
] as const)('%s', (method, targetValue, oppositeMethod) => {
  it(`should set isConfirmationEnabled = ${targetValue}`, () => {
    const component = instantiate();
    component.mount();
    component[oppositeMethod]();
    expect(component.isConfirmationEnabled()).toBe(!targetValue);
    component[method]();
    expect(component.isConfirmationEnabled()).toBe(targetValue);
  });

  it(
    `should call postEvent with "web_app_setup_closing_behavior" and { need_confirmation: ${targetValue} }`,
    () => {
      const postEvent = vi.fn(() => E.right(undefined));
      const component = instantiate({ postEvent });
      component.mount();
      component[oppositeMethod]();
      postEvent.mockClear();
      component[method]();
      component[method]();
      component[method]();
      expect(postEvent).toBeCalledTimes(1);
      expect(postEvent).toBeCalledWith(
        'web_app_setup_closing_behavior', { need_confirmation: targetValue },
      );
    },
  );

  it('should save the state using passed storage', () => {
    const set = vi.fn();
    const component = instantiate({
      storage: { get: () => undefined, set },
    });
    component.mount();
    component[oppositeMethod]();
    set.mockClear();
    component[method]();
    expect(set).toHaveBeenCalledOnce();
    expect(set).toHaveBeenCalledWith({ isConfirmationEnabled: targetValue });
  });
});

describe('mount', () => {
  it('should set isMounted = true', () => {
    const component = instantiate();
    expect(component.isMounted()).toBe(false);
    component.mount();
    expect(component.isMounted()).toBe(true);
  });

  describe('no page reload', () => {
    it('should not use value from the storage', () => {
      const get = vi.fn(() => ({ isConfirmationEnabled: true }));
      const component = instantiate({ storage: { get, set: vi.fn() } });
      component.mount();
      expect(get).not.toHaveBeenCalled();
    });
  });

  describe('page reload', () => {
    it('should extract state from storage', () => {
      const get = vi.fn();
      const component = instantiate({
        storage: { get, set: vi.fn() },
        isPageReload: true,
      });
      component.mount();
      expect(get).toHaveBeenCalledOnce();

      const get2 = vi.fn(() => ({ isConfirmationEnabled: true }));
      const component2 = instantiate({
        storage: { get: get2, set: vi.fn() },
        isPageReload: true,
      });
      component2.mount();
      expect(get2).toHaveBeenCalledOnce();
    });
  });
});

describe('unmount', () => {
  it('should set isMounted = false', () => {
    const component = instantiate();
    expect(component.isMounted()).toBe(false);
    component.mount();
    expect(component.isMounted()).toBe(true);
    component.unmount();
    expect(component.isMounted()).toBe(false);
  });
});

```
---
## File: packages/sdk/src/features/ClosingBehavior/ClosingBehavior.ts

```typescript
import type { Computed } from '@tma.js/signals';
import * as E from 'fp-ts/Either';
import type { PostEventError } from '@tma.js/bridge';
import { pipe } from 'fp-ts/function';

import {
  createWithChecksFp,
  type WithChecks,
  type WithChecksFp,
} from '@/with-checks/withChecksFp.js';
import { Stateful } from '@/composables/Stateful.js';
import { Mountable } from '@/composables/Mountable.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';
import type { WithStateRestore } from '@/fn-options/withStateRestore.js';
import type { WithPostEvent } from '@/fn-options/withPostEvent.js';
import type { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';

export interface ClosingBehaviorState {
  isConfirmationEnabled: boolean;
}

export interface ClosingBehaviorOptions
  extends WithStateRestore<ClosingBehaviorState>,
  WithPostEvent,
  SharedFeatureOptions {
}

export class ClosingBehavior {
  constructor({ postEvent, storage, isTma, isPageReload }: ClosingBehaviorOptions) {
    const stateful = new Stateful({
      initialState: { isConfirmationEnabled: false },
      onChange(state) {
        storage.set(state);
      },
    });
    const mountable = new Mountable({
      onMounted: stateful.setState,
      restoreState: storage.get,
      initialState: { isConfirmationEnabled: false },
      isPageReload,
    });

    const wrapOptions = { requires: 'web_app_setup_closing_behavior', isTma } as const;
    const wrapSupportedPlain = createWithChecksFp({
      ...wrapOptions,
      returns: 'plain',
    });
    const wrapMountedEither = createWithChecksFp({
      ...wrapOptions,
      returns: 'either',
      isMounted: mountable.isMounted,
    });

    const setClosingConfirmation = (isConfirmationEnabled: boolean) => {
      if (isConfirmationEnabled === this.isConfirmationEnabled()) {
        return E.right(undefined);
      }
      stateful.setState({ isConfirmationEnabled });
      return postEvent('web_app_setup_closing_behavior', {
        need_confirmation: isConfirmationEnabled,
      });
    };

    this.isConfirmationEnabled = stateful.getter('isConfirmationEnabled');
    this.isMounted = mountable.isMounted;

    this.disableConfirmationFp = wrapMountedEither(() => {
      return setClosingConfirmation(false);
    });
    this.enableConfirmationFp = wrapMountedEither(() => {
      return setClosingConfirmation(true);
    });
    this.mountFp = wrapSupportedPlain(() => {
      const nothing = () => undefined;
      return pipe(mountable.mount(), E.match(nothing, nothing));
    });
    this.unmount = mountable.unmount;

    this.disableConfirmation = throwifyWithChecksFp(this.disableConfirmationFp);
    this.enableConfirmation = throwifyWithChecksFp(this.enableConfirmationFp);
    this.mount = throwifyWithChecksFp(this.mountFp);
  }

  /**
   * Signal indicating if closing confirmation dialog is currently enabled.
   */
  readonly isConfirmationEnabled: Computed<boolean>;

  /**
   * Signal indicating if the component is currently mounted.
   */
  readonly isMounted: Computed<boolean>;

  /**
   * Mounts the component restoring its state.
   */
  readonly mountFp: WithChecksFp<() => void, false>;

  /**
   * @see mountFp
   */
  readonly mount: WithChecks<() => void, false>;

  /**
   * Unmounts the component.
   */
  readonly unmount: () => void;

  /**
   * Disables the closing confirmation dialog.
   */
  readonly disableConfirmationFp: WithChecksFp<() => E.Either<PostEventError, void>, false>;

  /**
   * @see disableConfirmationFp
   */
  readonly disableConfirmation: WithChecks<() => void, false>;

  /**
   * Enables the closing confirmation dialog.
   */
  readonly enableConfirmationFp: WithChecksFp<() => E.Either<PostEventError, void>, false>;

  /**
   * @see enableConfirmationFp
   */
  readonly enableConfirmation: WithChecks<() => void, false>;
}

```
---
## File: packages/sdk/src/features/ClosingBehavior/exports.ts

```typescript
export {
  ClosingBehavior,
  type ClosingBehaviorOptions,
  type ClosingBehaviorState,
} from './ClosingBehavior.js';
export { closingBehavior } from './instance.js';

```
---
## File: packages/sdk/src/features/ClosingBehavior/instance.ts

```typescript
import { pipe } from 'fp-ts/function';

import {
  ClosingBehavior,
  type ClosingBehaviorState,
} from '@/features/ClosingBehavior/ClosingBehavior.js';
import { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';
import { withStateRestore } from '@/fn-options/withStateRestore.js';
import { withPostEvent } from '@/fn-options/withPostEvent.js';

export const closingBehavior = new ClosingBehavior(pipe(
  sharedFeatureOptions(),
  withStateRestore<ClosingBehaviorState>('closingBehavior'),
  withPostEvent,
));

```
---
## File: packages/sdk/src/features/CloudStorage/CloudStorage.test.ts

```typescript
import { describe, expect, it, vi } from 'vitest';
import * as TE from 'fp-ts/TaskEither';

import { CloudStorage } from '@/features/CloudStorage/CloudStorage.js';
import { testIsSupportedPure } from '@test-utils/predefined/testIsSupportedPure.js';
import { testSafetyPure } from '@test-utils/predefined/testSafetyPure.js';
import type { InvokeCustomMethodNoRequestIdFn } from '@/fn-options/withInvokeCustomMethod.js';

const MIN_VERSION = '6.9';

function instantiate({
  version = MIN_VERSION,
  invokeCustomMethod = () => TE.right(undefined),
  isTma = true,
}: {
  version?: string;
  invokeCustomMethod?: InvokeCustomMethodNoRequestIdFn;
  isTma?: boolean;
} = {}) {
  return new CloudStorage({ version, invokeCustomMethod, isTma });
}

describe.each([
  ['deleteItem', (component: CloudStorage) => component.deleteItem('abc')],
  ['getItem', (component: CloudStorage) => component.getItem('abc')],
  ['getKeys', (component: CloudStorage) => component.getKeys()],
  ['setItem', (component: CloudStorage) => component.setItem('a', 'b')],
  ['clear', (component: CloudStorage) => component.clear()],
] as const)('%s', (method, tryCall) => {
  describe('safety', () => {
    testSafetyPure({
      instantiate,
      get: instance => instance[method],
      try: tryCall,
      minVersion: MIN_VERSION,
    });
  });
});

describe('deleteItem', () => {
  it('should call invokeCustomMethod with "deleteStorageValues" and { keys }', async () => {
    const invokeCustomMethod = vi.fn(() => TE.right(undefined));
    await instantiate({ invokeCustomMethod }).deleteItem(['a', 'b']);
    expect(invokeCustomMethod).toHaveBeenCalledOnce();
    expect(invokeCustomMethod)
      .toHaveBeenCalledWith('deleteStorageValues', { keys: ['a', 'b'] }, undefined);
  });
});

describe('getItem', () => {
  it('should call invokeCustomMethod with "getStorageValues" and { keys }', async () => {
    const invokeCustomMethod = vi.fn(() => TE.right({ a: 'A', b: '' }));
    const component = instantiate({ invokeCustomMethod });
    await component.getItem('a');
    expect(invokeCustomMethod).toHaveBeenCalledOnce();
    expect(invokeCustomMethod).toHaveBeenCalledWith(
      'getStorageValues', { keys: ['a'] }, undefined,
    );

    await expect(component.getItem('a')).resolves.toBe('A');
    await expect(component.getItem('b')).resolves.toBe('');
  });
});

describe('getItems', () => {
  it('should call invokeCustomMethod with "getStorageValues" and { keys }', async () => {
    const invokeCustomMethod = vi.fn(() => TE.right({ a: 'A', b: '' }));
    const component = instantiate({ invokeCustomMethod });
    await expect(component.getItems(['a', 'b'])).resolves.toStrictEqual({ a: 'A', b: '' });
    expect(invokeCustomMethod).toHaveBeenCalledOnce();
    expect(invokeCustomMethod).toHaveBeenCalledWith(
      'getStorageValues', { keys: ['a', 'b'] }, undefined,
    );
  });
});

describe('getKeys', () => {
  it('should call invokeCustomMethod with "getStorageKeys" and {}', async () => {
    const invokeCustomMethod = vi.fn(() => TE.right(['a']));
    await expect(instantiate({ invokeCustomMethod }).getKeys()).resolves.toStrictEqual(['a']);
    expect(invokeCustomMethod).toHaveBeenCalledOnce();
    expect(invokeCustomMethod).toHaveBeenCalledWith('getStorageKeys', {}, undefined);
  });
});

describe('setItem', () => {
  it('should call invokeCustomMethod with "saveStorageValue" and { key, value }', async () => {
    const invokeCustomMethod = vi.fn(() => TE.right(undefined));
    await instantiate({ invokeCustomMethod }).setItem('a', 'b');
    expect(invokeCustomMethod).toHaveBeenCalledOnce();
    expect(invokeCustomMethod).toHaveBeenCalledWith(
      'saveStorageValue', { key: 'a', value: 'b' }, undefined,
    );
  });
});

describe('clear', () => {
  it('should call deleteItem to all keys returned by getKeys', async () => {
    const component = instantiate();

    const deleteItemSpy = vi
      .spyOn(component, 'deleteItemFp')
      .mockImplementation(() => TE.right(undefined));
    vi
      .spyOn(component, 'getKeysFp')
      .mockImplementation(() => TE.right(['a', 'b', 'c']));

    await component.clear();
    expect(deleteItemSpy).toHaveBeenCalledOnce();
    expect(deleteItemSpy).toHaveBeenCalledWith(['a', 'b', 'c']);
  });
});

describe('isSupported', () => {
  testIsSupportedPure(version => instantiate({ isTma: true, version }), MIN_VERSION);
});

```
---
## File: packages/sdk/src/features/CloudStorage/CloudStorage.ts

```typescript
import type { Computed } from '@tma.js/signals';
import type { InvokeCustomMethodFpOptions, RequestError } from '@tma.js/bridge';
import { BetterPromise } from 'better-promises';
import { array, parse, record, string } from 'valibot';
import * as TE from 'fp-ts/TaskEither';
import { pipe } from 'fp-ts/function';

import { createWithChecksFp, type WithChecks, type WithChecksFp } from '@/with-checks/withChecksFp.js';
import { createIsSupportedSignal } from '@/helpers/createIsSupportedSignal.js';
import type { WithVersion } from '@/fn-options/withVersion.js';
import type { WithInvokeCustomMethod } from '@/fn-options/withInvokeCustomMethod.js';
import type { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';

type CloudStorageTask<T> = TE.TaskEither<RequestError, T>;

export interface CloudStorageOptions extends WithVersion,
  WithInvokeCustomMethod,
  SharedFeatureOptions {
}

/**
 * @since Mini Apps v6.9
 */
export class CloudStorage {
  constructor({ version, isTma, invokeCustomMethod }: CloudStorageOptions) {
    const wrapSupportedTask = createWithChecksFp({
      version,
      requires: 'web_app_invoke_custom_method',
      isTma,
      returns: 'task',
    });

    this.isSupported = createIsSupportedSignal('web_app_invoke_custom_method', version);
    this.deleteItemFp = wrapSupportedTask((keyOrKeys, options) => {
      const keys = Array.isArray(keyOrKeys) ? keyOrKeys : [keyOrKeys];
      return pipe(
        keys.length
          ? invokeCustomMethod('deleteStorageValues', { keys }, options)
          : TE.right(undefined),
        TE.map(() => undefined),
      );
    });
    this.getItemFp = wrapSupportedTask((key, options) => {
      return pipe(
        this.getItemsFp([key], options),
        TE.map(values => values[key] || ''),
      );
    });
    this.getItemsFp = wrapSupportedTask((keys, options) => {
      return pipe(
        keys.length ? invokeCustomMethod('getStorageValues', { keys }, options) : TE.right({}),
        TE.map(data => {
          return {
            // Fulfill the response with probably missing keys.
            ...keys.reduce<Record<string, string>>((acc, key) => {
              acc[key] = '';
              return acc;
            }, {}),
            ...parse(record(string(), string()), data),
          };
        }),
      );
    });
    this.getKeysFp = wrapSupportedTask(options => {
      return pipe(
        invokeCustomMethod('getStorageKeys', {}, options),
        TE.map(data => parse(array(string()), data)),
      );
    });
    this.setItemFp = wrapSupportedTask((key, value, options) => {
      return pipe(
        invokeCustomMethod('saveStorageValue', { key, value }, options),
        TE.map(() => undefined),
      );
    });
    this.clearFp = wrapSupportedTask(options => {
      return pipe(this.getKeysFp(options), TE.chain(this.deleteItemFp));
    });

    this.deleteItem = throwifyWithChecksFp(this.deleteItemFp);
    this.getItem = throwifyWithChecksFp(this.getItemFp);
    this.getItems = throwifyWithChecksFp(this.getItemsFp);
    this.getKeys = throwifyWithChecksFp(this.getKeysFp);
    this.setItem = throwifyWithChecksFp(this.setItemFp);
    this.clear = throwifyWithChecksFp(this.clearFp);
  }

  /**
   * Signal indicating if the component is supported.
   */
  readonly isSupported: Computed<boolean>;

  /**
   * Deletes specified key or keys from the cloud storage.
   * @param keyOrKeys - key or keys to delete.
   * @param options - request execution options.
   * @since Mini Apps v6.9
   */
  readonly deleteItemFp: WithChecksFp<
    (keyOrKeys: string | string[], options?: InvokeCustomMethodFpOptions) => CloudStorageTask<void>,
    true
  >;

  readonly deleteItem: WithChecks<
    (keyOrKeys: string | string[], options?: InvokeCustomMethodFpOptions) => BetterPromise<void>,
    true
  >;

  /**
   * Gets a single key value from the cloud storage.
   * @param key - a key to get.
   * @param options - request execution options.
   * @returns A key value as a string.
   * @since Mini Apps v6.9
   */
  readonly getItemFp: WithChecksFp<
    (key: string, options?: InvokeCustomMethodFpOptions) => CloudStorageTask<string>,
    true
  >;

  /**
   * @see getItemFp
   */
  readonly getItem: WithChecks<{
    <K extends string>(
      keys: K[],
      options?: InvokeCustomMethodFpOptions,
    ): BetterPromise<Record<K, string>>;
    (key: string, options?: InvokeCustomMethodFpOptions): BetterPromise<string>;
  }, true>;

  /**
   * Gets multiple keys' values from the cloud storage.
   * @param keys - keys list.
   * @param options - request execution options.
   * @returns A map, where a key is one of the specified in the `keys` argument,
   * and a value is a corresponding storage value if an array of keys was passed.
   * @since Mini Apps v6.9
   */
  readonly getItemsFp: WithChecksFp<
    <K extends string>(
      keys: K[],
      options?: InvokeCustomMethodFpOptions,
    ) => CloudStorageTask<Record<K, string>>,
    true
  >;

  /**
   * @see getItemsFp
   */
  readonly getItems: WithChecks<
    <K extends string>(
      keys: K[],
      options?: InvokeCustomMethodFpOptions,
    ) => BetterPromise<Record<K, string>>,
    true
  >;

  /**
   * Returns a list of all keys presented in the cloud storage.
   * @param options - request execution options.
   * @since Mini Apps v6.9
   */
  readonly getKeysFp: WithChecksFp<
    (options?: InvokeCustomMethodFpOptions) => CloudStorageTask<string[]>,
    true
  >;

  /**
   * @see getKeysFp
   */
  readonly getKeys: WithChecks<
    (options?: InvokeCustomMethodFpOptions) => BetterPromise<string[]>,
    true
  >;

  /**
   * Saves the specified value by a key.
   * @param key - storage key.
   * @param value - storage value.
   * @param options - request execution options.
   * @since Mini Apps v6.9
   */
  readonly setItemFp: WithChecksFp<
    (key: string, value: string, options?: InvokeCustomMethodFpOptions) => CloudStorageTask<void>,
    true
  >;

  /**
   * @see setItemFp
   */
  readonly setItem: WithChecks<
    (key: string, value: string, options?: InvokeCustomMethodFpOptions) => BetterPromise<void>,
    true
  >;

  /**
   * Clears the cloud storage.
   * @param options - additional options.
   * @since Mini Apps v6.9
   */
  readonly clearFp: WithChecksFp<
    (options?: InvokeCustomMethodFpOptions) => CloudStorageTask<void>,
    true
  >;

  /**
   * @see clearFp
   */
  readonly clear: WithChecks<(options?: InvokeCustomMethodFpOptions) => BetterPromise<void>, true>;
}

```
---
## File: packages/sdk/src/features/CloudStorage/exports.ts

```typescript
export { CloudStorage, type CloudStorageOptions } from './CloudStorage.js';
export { cloudStorage } from './instance.js';

```
---
## File: packages/sdk/src/features/CloudStorage/instance.ts

```typescript
import { pipe } from 'fp-ts/function';

import { CloudStorage } from '@/features/CloudStorage/CloudStorage.js';
import { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';
import { withVersion } from '@/fn-options/withVersion.js';
import { withInvokeCustomMethod } from '@/fn-options/withInvokeCustomMethod.js';

export const cloudStorage = new CloudStorage(pipe(
  sharedFeatureOptions(),
  withVersion,
  withInvokeCustomMethod,
));

```
---
## File: packages/sdk/src/features/emoji-status/exports.ts

```typescript
export {
  requestEmojiStatusAccess,
  requestEmojiStatusAccessFp,
} from './requestEmojiStatusAccess.js';
export {
  setEmojiStatus,
  setEmojiStatusFp,
  type SetEmojiStatusOptions,
} from './setEmojiStatus.js';

```
---
## File: packages/sdk/src/features/emoji-status/requestEmojiStatusAccess.ts

```typescript
import { pipe } from 'fp-ts/function';
import * as TE from 'fp-ts/TaskEither';
import type { EmojiStatusAccessRequestedStatus, RequestError } from '@tma.js/bridge';

import type { AsyncOptions } from '@/types.js';
import { withVersion, type WithVersion } from '@/fn-options/withVersion.js';
import { withRequest, type WithRequest } from '@/fn-options/withRequest.js';
import { withChecksFp } from '@/with-checks/withChecksFp.js';
import {
  sharedFeatureOptions,
  type SharedFeatureOptions,
} from '@/fn-options/sharedFeatureOptions.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';

interface CreateOptions extends SharedFeatureOptions, WithVersion, WithRequest {
}

function create({ request, ...rest }: CreateOptions) {
  return withChecksFp((
    options: AsyncOptions,
  ): TE.TaskEither<RequestError, EmojiStatusAccessRequestedStatus> => {
    return pipe(
      request('web_app_request_emoji_status_access', 'emoji_status_access_requested', options),
      TE.map(response => response.status),
    );
  }, { ...rest, requires: 'web_app_request_emoji_status_access', returns: 'task' });
}

/**
 * Shows a native popup requesting permission for the bot to manage user's emoji status.
 * @param options - additional options.
 * @returns Emoji status access status.
 * @since Mini Apps v8.0
 * @example
 * const status = await requestEmojiStatusAccess();
 */
export const requestEmojiStatusAccessFp = create(pipe(
  sharedFeatureOptions(),
  withVersion,
  withRequest,
));

/**
 * @see requestEmojiStatusAccessFp
 */
export const requestEmojiStatusAccess = throwifyWithChecksFp(requestEmojiStatusAccessFp);

```
---
## File: packages/sdk/src/features/emoji-status/setEmojiStatus.ts

```typescript
import * as TE from 'fp-ts/TaskEither';
import { pipe } from 'fp-ts/function';
import { RequestError } from '@tma.js/bridge';

import type { AsyncOptions } from '@/types.js';
import { SetEmojiStatusError } from '@/errors.js';
import { withChecksFp } from '@/with-checks/withChecksFp.js';
import {
  type SharedFeatureOptions,
  sharedFeatureOptions,
} from '@/fn-options/sharedFeatureOptions.js';
import { withRequest, type WithRequest } from '@/fn-options/withRequest.js';
import { withVersion, type WithVersion } from '@/fn-options/withVersion.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';

export interface SetEmojiStatusOptions extends AsyncOptions {
  duration?: number;
}

interface CreateOptions extends SharedFeatureOptions, WithRequest, WithVersion {
}

function create({ request, ...rest }: CreateOptions) {
  return withChecksFp((
    customEmojiId: string,
    options?: SetEmojiStatusOptions,
  ): TE.TaskEither<RequestError | SetEmojiStatusError, void> => {
    return pipe(
      request('web_app_set_emoji_status', ['emoji_status_set', 'emoji_status_failed'], {
        params: {
          custom_emoji_id: customEmojiId,
          duration: (options || {}).duration,
        },
        ...options,
      }),
      TE.chainW(response => {
        return response && 'error' in response
          ? TE.left(new SetEmojiStatusError(response.error))
          : TE.right(undefined);
      }),
    );
  }, {
    ...rest,
    requires: 'web_app_set_emoji_status',
    returns: 'task',
  });
}

/**
 * Opens a dialog allowing the user to set the specified custom emoji as their status.
 * @returns Nothing if status set was successful.
 * @param options - additional options.
 * @since Mini Apps v8.0
 * @example
 * pipe(
 *   setEmojiStatusFp('5361800828313167608'),
 *   TE.match(error => {
 *     console.error('Error occurred', error);
 *   }, () => {
 *     console.log('Status set');
 *   }),
 * );
 * const statusSet = await setEmojiStatus('5361800828313167608');
 */
export const setEmojiStatusFp = create(pipe(
  sharedFeatureOptions(),
  withRequest,
  withVersion,
));

/**
 * @see setEmojiStatusFp
 */
export const setEmojiStatus = throwifyWithChecksFp(setEmojiStatusFp);

```
---
## File: packages/sdk/src/features/HapticFeedback/exports.ts

```typescript
export { HapticFeedback, type HapticFeedbackOptions } from './HapticFeedback.js';
export { hapticFeedback } from './instance.js';

```
---
## File: packages/sdk/src/features/HapticFeedback/HapticFeedback.test.ts

```typescript
import { describe, expect, it, vi } from 'vitest';
import * as E from 'fp-ts/Either';
import { type PostEventFpFn } from '@tma.js/bridge';

import { HapticFeedback } from '@/features/HapticFeedback/HapticFeedback.js';
import { testIsSupportedPure } from '@test-utils/predefined/testIsSupportedPure.js';
import { testSafetyPure } from '@test-utils/predefined/testSafetyPure.js';

const MIN_VERSION = '6.1';

function instantiate({
  version = MIN_VERSION,
  postEvent = () => E.right(undefined),
  isTma = true,
}: {
  version?: string;
  postEvent?: PostEventFpFn;
  isTma?: boolean;
} = {}) {
  return new HapticFeedback({ version, postEvent, isTma });
}

describe.each([
  ['impactOccurred', (component: HapticFeedback) => component.impactOccurred('heavy')],
  ['notificationOccurred', (component: HapticFeedback) => component.notificationOccurred('error')],
  ['selectionChanged', (component: HapticFeedback) => component.selectionChanged()],
] as const)('%s', (method, tryCall) => {
  describe('safety', () => {
    testSafetyPure({
      instantiate,
      get: instance => instance[method],
      try: tryCall,
      minVersion: MIN_VERSION,
    });
  });
});

describe('impactOccurred', () => {
  it(
    'should call "web_app_trigger_haptic_feedback" with { type: "impact", impact_style: {{arg}} }',
    () => {
      const postEvent = vi.fn(() => E.right(undefined));
      instantiate({ postEvent }).impactOccurred('heavy');
      expect(postEvent).toHaveBeenCalledOnce();
      expect(postEvent).toHaveBeenCalledWith(
        'web_app_trigger_haptic_feedback',
        { type: 'impact', impact_style: 'heavy' },
      );
    },
  );
});

describe('notificationOccurred', () => {
  it(
    'should call "web_app_trigger_haptic_feedback" with { type: "notification", notification_type: {{arg}} }',
    () => {
      const postEvent = vi.fn(() => E.right(undefined));
      instantiate({ postEvent }).notificationOccurred('success');
      expect(postEvent).toHaveBeenCalledOnce();
      expect(postEvent).toHaveBeenCalledWith(
        'web_app_trigger_haptic_feedback',
        { type: 'notification', notification_type: 'success' },
      );
    },
  );
});

describe('selectionChanged', () => {
  it(
    'should call "web_app_trigger_haptic_feedback" with { type: "selection_change" }',
    () => {
      const postEvent = vi.fn(() => E.right(undefined));
      instantiate({ postEvent }).selectionChanged();
      expect(postEvent).toHaveBeenCalledOnce();
      expect(postEvent).toHaveBeenCalledWith(
        'web_app_trigger_haptic_feedback',
        { type: 'selection_change' },
      );
    },
  );
});

describe('isSupported', () => {
  testIsSupportedPure(version => instantiate({ isTma: true, version }), MIN_VERSION);
});

```
---
## File: packages/sdk/src/features/HapticFeedback/HapticFeedback.ts

```typescript
import type { Computed } from '@tma.js/signals';
import type {
  ImpactHapticFeedbackStyle,
  NotificationHapticFeedbackType,
} from '@tma.js/bridge';
import * as E from 'fp-ts/Either';
import type { PostEventError } from '@tma.js/bridge';

import { createIsSupportedSignal } from '@/helpers/createIsSupportedSignal.js';
import type { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';
import { createWithChecksFp, type WithChecksFp, type WithChecks } from '@/with-checks/withChecksFp.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';
import type { WithVersion } from '@/fn-options/withVersion.js';
import type { WithPostEvent } from '@/fn-options/withPostEvent.js';

type HapticFeedbackEither = E.Either<PostEventError, void>;

export interface HapticFeedbackOptions extends WithVersion, WithPostEvent, SharedFeatureOptions {
}

/**
 * @since Mini Apps v6.1
 */
export class HapticFeedback {
  constructor({ postEvent, isTma, version }: HapticFeedbackOptions) {
    const HAPTIC_METHOD_NAME = 'web_app_trigger_haptic_feedback';
    const wrapSupported = createWithChecksFp({
      requires: HAPTIC_METHOD_NAME,
      isTma,
      version,
      returns: 'plain',
    });

    this.isSupported = createIsSupportedSignal(HAPTIC_METHOD_NAME, version);
    this.impactOccurredFp = wrapSupported(style => {
      return postEvent(HAPTIC_METHOD_NAME, { type: 'impact', impact_style: style });
    });
    this.notificationOccurredFp = wrapSupported(type => {
      return postEvent(HAPTIC_METHOD_NAME, { type: 'notification', notification_type: type });
    });
    this.selectionChangedFp = wrapSupported(() => {
      return postEvent(HAPTIC_METHOD_NAME, { type: 'selection_change' });
    });

    this.impactOccurred = throwifyWithChecksFp(this.impactOccurredFp);
    this.notificationOccurred = throwifyWithChecksFp(this.notificationOccurredFp);
    this.selectionChanged = throwifyWithChecksFp(this.selectionChangedFp);
  }

  /**
   * Signal indicating if the component is supported.
   */
  readonly isSupported: Computed<boolean>;

  /**
   * A method that tells if an impact occurred. The Telegram app may play the
   * appropriate haptics based on style value passed.
   * @param style - impact style.
   * @since Mini Apps v6.1
   */
  impactOccurredFp: WithChecksFp<(style: ImpactHapticFeedbackStyle) => HapticFeedbackEither, true>;

  /**
   * @see impactOccurredFp
   */
  impactOccurred: WithChecks<(style: ImpactHapticFeedbackStyle) => void, true>;

  /**
   * A method tells that a task or action has succeeded, failed, or produced
   * a warning. The Telegram app may play the appropriate haptics based on type
   * value passed.
   * @param type - notification type.
   * @since Mini Apps v6.1
   */
  notificationOccurredFp: WithChecksFp<
    (type: NotificationHapticFeedbackType) => HapticFeedbackEither,
    true
  >;

  /**
   * @see notificationOccurredFp
   */
  notificationOccurred: WithChecks<(type: NotificationHapticFeedbackType) => void, true>;

  /**
   * A method tells that the user has changed a selection. The Telegram app may
   * play the appropriate haptics.
   *
   * Do not use this feedback when the user makes or confirms a selection; use
   * it only when the selection changes.
   * @since Mini Apps v6.1
   */
  selectionChangedFp: WithChecksFp<() => HapticFeedbackEither, true>;

  /**
   * @see selectionChangedFp
   */
  selectionChanged: WithChecks<() => void, true>;
}

```
---
## File: packages/sdk/src/features/HapticFeedback/instance.ts

```typescript
import { pipe } from 'fp-ts/function';

import { HapticFeedback } from '@/features/HapticFeedback/HapticFeedback.js';
import { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';
import { withPostEvent } from '@/fn-options/withPostEvent.js';
import { withVersion } from '@/fn-options/withVersion.js';

export const hapticFeedback = new HapticFeedback(pipe(
  sharedFeatureOptions(),
  withPostEvent,
  withVersion,
));

```
---
## File: packages/sdk/src/features/home-screen/addToHomeScreen.ts

```typescript
import { pipe } from 'fp-ts/function';
import type * as E from 'fp-ts/Either';
import type { PostEventError } from '@tma.js/bridge';

import {
  sharedFeatureOptions,
  type SharedFeatureOptions,
} from '@/fn-options/sharedFeatureOptions.js';
import { withPostEvent, type WithPostEvent } from '@/fn-options/withPostEvent.js';
import { withVersion, type WithVersion } from '@/fn-options/withVersion.js';
import { withChecksFp } from '@/with-checks/withChecksFp.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';

interface CreateOptions extends SharedFeatureOptions, WithPostEvent, WithVersion {
}

function create({ postEvent, ...rest }: CreateOptions) {
  return withChecksFp((): E.Either<PostEventError, void> => {
    return postEvent('web_app_add_to_home_screen');
  }, { ...rest, requires: 'web_app_add_to_home_screen', returns: 'either' });
}

/**
 * Prompts the user to add the Mini App to the home screen.
 * @since Mini Apps v8.0
 */
export const addToHomeScreenFp = create(pipe(
  sharedFeatureOptions(),
  withVersion,
  withPostEvent,
));

/**
 * @see addToHomeScreenFp
 */
export const addToHomeScreen = throwifyWithChecksFp(addToHomeScreenFp);

```
---
## File: packages/sdk/src/features/home-screen/checkHomeScreenStatus.ts

```typescript
import { pipe } from 'fp-ts/function';
import * as TE from 'fp-ts/TaskEither';
import type { HomeScreenStatus, RequestError } from '@tma.js/bridge';

import {
  sharedFeatureOptions,
  type SharedFeatureOptions,
} from '@/fn-options/sharedFeatureOptions.js';
import { withVersion, type WithVersion } from '@/fn-options/withVersion.js';
import { withChecksFp } from '@/with-checks/withChecksFp.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';
import { withRequest, type WithRequest } from '@/fn-options/withRequest.js';
import type { AsyncOptions } from '@/types.js';

interface CreateOptions extends SharedFeatureOptions, WithRequest, WithVersion {
}

function create({ request, ...rest }: CreateOptions) {
  return withChecksFp((options?: AsyncOptions): TE.TaskEither<RequestError, HomeScreenStatus> => {
    return pipe(
      request('web_app_check_home_screen', 'home_screen_checked', options),
      TE.map(response => response.status || 'unknown'),
    );
  }, { ...rest, requires: 'web_app_check_home_screen', returns: 'task' });
}

/**
 * Sends a request to the native Telegram application to check if the current mini
 * application is added to the device's home screen.
 * @param options - additional options.
 * @since Mini Apps v8.0
 */
export const checkHomeScreenStatusFp = create(pipe(
  sharedFeatureOptions(),
  withVersion,
  withRequest,
));

/**
 * @see checkHomeScreenStatusFp
 */
export const checkHomeScreenStatus = throwifyWithChecksFp(checkHomeScreenStatusFp);

```
---
## File: packages/sdk/src/features/home-screen/exports.ts

```typescript
export { addToHomeScreenFp, addToHomeScreen } from './addToHomeScreen.js';
export { checkHomeScreenStatus, checkHomeScreenStatusFp } from './checkHomeScreenStatus.js';

```
---
## File: packages/sdk/src/features/InitData/exports.ts

```typescript
export { InitData, type InitDataOptions } from './InitData.js';
export { initData } from './instance.js';

```
---
## File: packages/sdk/src/features/InitData/InitData.test.ts

```typescript
import { describe, expect, it } from 'vitest';
import * as E from 'fp-ts/Either';
import * as O from 'fp-ts/Option';

import { InitData, InitDataOptions } from '@/features/InitData/InitData.js';

function instantiate({
  retrieveInitData = () => E.left(O.none),
}: Partial<InitDataOptions<any>> = {}) {
  return new InitData({ retrieveInitData });
}

describe('restore', () => {
  it('should set state based on init data from launch params', () => {
    const initData = {
      auth_date: new Date(1736409902000),
      chat_instance: '-9019086117643313246',
      chat_type: 'sender',
      hash: '4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d90',
      signature: 'FNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA',
      user: {
        allows_write_to_pm: true,
        first_name: 'Vladislav',
        id: 279058397,
        is_premium: true,
        language_code: 'ru',
        last_name: 'Kibenko',
        photo_url: 'https://t.me/i/userpic/320/4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg',
        username: 'vdkfrost',
      },
    };
    const rawInitData = 'user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%22%7D&chat_instance=-9019086117643313246&chat_type=sender&auth_date=1736409902&signature=FNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA&hash=4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d90';
    const component = instantiate({
      retrieveInitData: () => E.right(O.some({
        raw: rawInitData,
        obj: initData,
      })),
    });
    component.restore();

    expect(component.authDate()).toStrictEqual(new Date(1736409902000));
    expect(component.chatInstance()).toBe('-9019086117643313246');
    expect(component.chatType()).toBe('sender');
    expect(component.hash())
      .toBe('4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d90');
    expect(component.signature())
      .toBe('FNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA');
    expect(component.user()).toStrictEqual({
      allows_write_to_pm: true,
      first_name: 'Vladislav',
      id: 279058397,
      is_premium: true,
      language_code: 'ru',
      last_name: 'Kibenko',
      photo_url: 'https://t.me/i/userpic/320/4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg',
      username: 'vdkfrost',
    });
    expect(component.raw()).toBe(rawInitData);
    expect(component.state()).toStrictEqual(initData);
  });
});

```
---
## File: packages/sdk/src/features/InitData/InitData.ts

```typescript
import { computed, type Computed, signal } from '@tma.js/signals';
import type { InitData as InitDataType } from '@tma.js/types';
import * as E from 'fp-ts/Either';
import * as O from 'fp-ts/Option';
import { pipe } from 'fp-ts/function';
import { throwifyFpFn } from '@tma.js/toolkit';

export interface InitDataOptions<Err> {
  /**
   * Retrieves init data from the current environment.
   */
  retrieveInitData: () => E.Either<Err, O.Option<{
    raw: string;
    obj: InitDataType;
  }>>;
}

export class InitData<Err extends Error> {
  constructor({ retrieveInitData }: InitDataOptions<Err>) {
    this.restoreFp = () => {
      return pipe(
        retrieveInitData(),
        E.map(O.match(() => undefined, ({ raw, obj }) => {
          this._state.set(obj);
          this._raw.set(raw);
        })),
      );
    };
    this.restore = throwifyFpFn(this.restoreFp);
  }

  private fromState<K extends keyof InitDataType>(key: K): Computed<InitDataType[K] | undefined> {
    return computed(() => {
      const s = this._state();
      return s ? s[key] : undefined;
    });
  }

  private readonly _state = signal<InitDataType>();

  private readonly _raw = signal<string>();

  /**
   * Complete component state.
   */
  readonly state = computed(this._state);

  /**
   * @see InitDataType.auth_date
   */
  readonly authDate = this.fromState('auth_date');

  /**
   * @see InitDataType.can_send_after
   */
  readonly canSendAfter = this.fromState('can_send_after');

  /**
   * Date after which it is allowed to call
   * the [answerWebAppQuery](https://core.telegram.org/bots/api#answerwebappquery) method.
   */
  readonly canSendAfterDate = computed(() => {
    const authDateValue = this.authDate();
    const canSendAfterValue = this.canSendAfter();

    return canSendAfterValue && authDateValue
      ? new Date(authDateValue.getTime() + (canSendAfterValue * 1000))
      : undefined;
  });

  /**
   * @see InitDataType.chat
   */
  readonly chat = this.fromState('chat');

  /**
   * @see InitDataType.chat_type
   */
  readonly chatType = this.fromState('chat_type');

  /**
   * @see InitDataType.chat_instance
   */
  readonly chatInstance = this.fromState('chat_instance');

  /**
   * @see InitDataType.hash
   */
  readonly hash = this.fromState('hash');

  /**
   * @see InitDataType.query_id
   */
  readonly queryId = this.fromState('query_id');

  /**
   * Raw representation of init data.
   */
  readonly raw = computed(this._raw);

  /**
   * @see InitDataType.receiver
   */
  readonly receiver = this.fromState('receiver');

  /**
   * @see InitDataType.signature
   */
  readonly signature = this.fromState('signature');

  /**
   * @see InitDataType.start_param
   */
  readonly startParam = this.fromState('start_param');

  /**
   * @see InitDataType.user
   */
  readonly user = this.fromState('user');

  /**
   * Restores the component state.
   */
  readonly restoreFp: () => E.Either<Err, void>;

  /**
   * @see restoreFp
   */
  readonly restore: () => void;
}

```
---
## File: packages/sdk/src/features/InitData/instance.ts

```typescript
import { retrieveRawInitDataFp, retrieveLaunchParamsFp } from '@tma.js/bridge';
import { pipe } from 'fp-ts/function';
import * as E from 'fp-ts/Either';
import * as O from 'fp-ts/Option';

import { InitData } from '@/features/InitData/InitData.js';

export const initData = new InitData({
  retrieveInitData() {
    return pipe(
      E.Do,
      E.bindW('obj', () => pipe(
        retrieveLaunchParamsFp(),
        E.map(({ tgWebAppData }) => {
          return tgWebAppData ? O.some(tgWebAppData) : O.none;
        }),
      )),
      E.bindW('raw', retrieveRawInitDataFp),
      E.map(({ obj, raw }) => {
        return pipe(
          O.Do,
          O.bind('obj', () => obj),
          O.bind('raw', () => raw),
        );
      }),
    );
  },
});

```
---
## File: packages/sdk/src/features/Invoice/exports.ts

```typescript
export { Invoice, type InvoiceOptions } from './Invoice.js';
export { invoice } from './instance.js';

```
---
## File: packages/sdk/src/features/Invoice/instance.ts

```typescript
import { pipe } from 'fp-ts/function';

import { Invoice } from '@/features/Invoice/Invoice.js';
import { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';
import { withRequest } from '@/fn-options/withRequest.js';
import { withVersion } from '@/fn-options/withVersion.js';

export const invoice = new Invoice(pipe(sharedFeatureOptions(), withRequest, withVersion));

```
---
## File: packages/sdk/src/features/Invoice/Invoice.test.ts

```typescript
import { describe, expect, it, vi } from 'vitest';
import * as TE from 'fp-ts/TaskEither';

import { Invoice, type InvoiceOptions } from '@/features/Invoice/Invoice.js';
import { testIsSupportedPure } from '@test-utils/predefined/testIsSupportedPure.js';
import { testSafetyPure } from '@test-utils/predefined/testSafetyPure.js';
import type { InstantiateOptions } from '@test-utils/types.js';

const MIN_VERSION = '6.1';

function instantiate({
  version = MIN_VERSION,
  request = () => TE.right(undefined),
  isTma = true,
}: InstantiateOptions<InvoiceOptions> = {}) {
  return new Invoice({ version, request, isTma });
}

describe.each([
  ['openSlug', (component: Invoice) => component.openSlug('$a')],
  ['openUrl', (component: Invoice) => component.openUrl('https://t.me/invoice/a')],
] as const)('%s', (method, tryCall) => {
  describe('safety', () => {
    testSafetyPure({
      instantiate,
      get: instance => instance[method],
      try: tryCall,
      minVersion: MIN_VERSION,
    });
  });
});

describe('openSlug', () => {
  it(
    'should call request with "web_app_open_invoice", "invoice_closed" and params = { slug }',
    async () => {
      const request = vi.fn(() => TE.right({ status: 'paid' }));
      const component = instantiate({ request });
      await component.openSlug('$a');
      expect(request).toHaveBeenCalledOnce();
      expect(request).toHaveBeenCalledWith(
        'web_app_open_invoice', 'invoice_closed', expect.objectContaining({
          params: { slug: '$a' },
        }),
      );
    },
  );
});

describe('openUrl', () => {
  it(
    'should call request with "web_app_open_invoice", "invoice_closed" and params = { slug } where slug is computed based on the URL',
    async () => {
      const request = vi.fn(() => TE.right({ status: 'paid' }));
      const component = instantiate({ request });
      await component.openUrl('https://t.me/invoice/abc');
      expect(request).toHaveBeenCalledOnce();
      expect(request).toHaveBeenCalledWith(
        'web_app_open_invoice', 'invoice_closed', expect.objectContaining({
          params: { slug: 'abc' },
        }),
      );
    },
  );
});

describe('isSupported', () => {
  testIsSupportedPure(version => instantiate({ isTma: true, version }), MIN_VERSION);
});

```
---
## File: packages/sdk/src/features/Invoice/Invoice.ts

```typescript
import { computed, type Computed, signal } from '@tma.js/signals';
import type { InvoiceStatus, RequestError } from '@tma.js/bridge';
import { BetterPromise } from 'better-promises';
import * as TE from 'fp-ts/TaskEither';
import { pipe } from 'fp-ts/function';

import { createWithChecksFp, type WithChecks, type WithChecksFp } from '@/with-checks/withChecksFp.js';
import { createIsSupportedSignal } from '@/helpers/createIsSupportedSignal.js';
import type { AsyncOptions } from '@/types.js';
import { ConcurrentCallError, InvalidArgumentsError } from '@/errors.js';
import type { WithVersion } from '@/fn-options/withVersion.js';
import type { WithRequest } from '@/fn-options/withRequest.js';
import type { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';

type InvoiceTask<E, T> = TE.TaskEither<RequestError | ConcurrentCallError | E, T>;

export interface InvoiceOptions extends WithVersion, WithRequest, SharedFeatureOptions {
}

/**
 * @since Mini Apps v6.1
 */
export class Invoice {
  constructor({ version, request, isTma }: InvoiceOptions) {
    const wrapSupportedTask = createWithChecksFp({
      version,
      isTma,
      requires: 'web_app_open_invoice',
      returns: 'task',
    });

    const isOpened = signal(false);
    const toggleClosed = () => {
      isOpened.set(false);
    };

    this.isSupported = createIsSupportedSignal('web_app_open_invoice', version);
    this.isOpened = computed(isOpened);
    this.openSlugFp = wrapSupportedTask((slug, options) => {
      return pipe(
        this.isOpened()
          ? TE.left(new ConcurrentCallError('Invoice is already opened'))
          : TE.right(undefined as never),
        TE.chain(() => {
          isOpened.set(true);
          return request('web_app_open_invoice', 'invoice_closed', {
            ...options,
            params: { slug },
            capture: data => slug === data.slug,
          });
        }),
        TE.mapBoth(err => {
          toggleClosed();
          return err;
        }, data => {
          toggleClosed();
          return data.status;
        }),
      );
    });
    this.openUrlFp = wrapSupportedTask((url, options) => {
      const { hostname, pathname } = new URL(url, window.location.href);
      if (hostname !== 't.me') {
        return TE.left(new InvalidArgumentsError(`Link has unexpected hostname: ${hostname}`));
      }

      // Valid examples:
      // "/invoice/my-slug"
      // "/$my-slug"
      const match = pathname.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/);
      if (!match) {
        return TE.left(new InvalidArgumentsError(
          'Expected to receive a link with a pathname in format "/invoice/{slug}" or "/${slug}"',
        ));
      }
      return this.openSlugFp(match[2], options);
    });

    this.openUrl = throwifyWithChecksFp(this.openUrlFp);
    this.openSlug = throwifyWithChecksFp(this.openSlugFp);
  }

  /**
   * Signal indicating if any invoice is currently opened.
   */
  readonly isOpened: Computed<boolean>;

  /**
   * Signal indicating if the component is supported.
   */
  readonly isSupported: Computed<boolean>;

  /**
   * Opens an invoice using its slug or URL.
   * @param slug - invoice slug.
   * @param options - additional options.
   * @since Mini Apps v6.1
   * @example
   * const status = await invoice.openSlug('kJNFS331');
   */
  readonly openSlugFp: WithChecksFp<
    (slug: string, options?: AsyncOptions) => InvoiceTask<never, InvoiceStatus>,
    true
  >;

  /**
   * @see openSlugFp
   */
  readonly openSlug: WithChecks<
    (slug: string, options?: AsyncOptions) => BetterPromise<InvoiceStatus>,
    true
  >;

  /**
   * Opens an invoice using its URL.
   * @param url - invoice URL.
   * @param options - additional options.
   * @since Mini Apps v6.1
   * @example
   * const status = await invoice.openUrl('https://t.me/$kJNFS331');
   */
  readonly openUrlFp: WithChecksFp<
    (url: string, options?: AsyncOptions) => (
      InvoiceTask<InvalidArgumentsError, InvoiceStatus>
    ),
    true
  >;

  /**
   * @see openUrlFp
   */
  readonly openUrl: WithChecks<
    (url: string, options?: AsyncOptions) => BetterPromise<InvoiceStatus>,
    true
  >;
}

```
---
## File: packages/sdk/src/features/links/exports.ts

```typescript
export { type OpenLinkError, openLinkFp, openLink, type OpenLinkOptions } from './openLink.js';
export {
  type OpenTelegramLinkError,
  openTelegramLinkFp,
  openTelegramLink,
} from './openTelegramLink.js';
export { shareURLFp, shareURL, type ShareURLError } from './shareURL.js';

```
---
## File: packages/sdk/src/features/links/openLink.ts

```typescript
import { pipe } from 'fp-ts/function';
import * as E from 'fp-ts/Either';
import type { OpenLinkBrowser, PostEventError } from '@tma.js/bridge';

import {
  type SharedFeatureOptions,
  sharedFeatureOptions,
} from '@/fn-options/sharedFeatureOptions.js';
import { type WithPostEvent, withPostEvent } from '@/fn-options/withPostEvent.js';
import { withChecksFp } from '@/with-checks/withChecksFp.js';
import { InvalidArgumentsError } from '@/errors.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';

interface CreateOptions extends SharedFeatureOptions, WithPostEvent {
}

export interface OpenLinkOptions {
  /**
   * Attempts to use the instant view mode.
   */
  tryInstantView?: boolean;
  /**
   * A preferred browser to open the link in.
   */
  tryBrowser?: OpenLinkBrowser;
}

export type OpenLinkError = PostEventError | InvalidArgumentsError;

function create({ postEvent, ...rest }: CreateOptions) {
  return withChecksFp((
    url: string | URL,
    options: OpenLinkOptions = {},
  ): E.Either<OpenLinkError, void> => {
    if (typeof url === 'string') {
      try {
        url = new URL(url);
      } catch (e) {
        return E.left(new InvalidArgumentsError(`"${url.toString()}" is invalid URL`, e));
      }
    }
    return postEvent('web_app_open_link', {
      url: url.toString(),
      try_browser: options.tryBrowser,
      try_instant_view: options.tryInstantView,
    });
  }, { ...rest, returns: 'either' });
}

/**
 * Opens a link.
 *
 * The Mini App will not be closed.
 *
 * Note that this method can be called only in response to the user
 * interaction with the Mini App interface (e.g. click inside the Mini App or on the main button).
 * @param url - URL to be opened.
 * @param options - additional options.
 * @example
 * openLink('https://google.com', {
 *   tryInstantView: true,
 *   tryBrowser: 'chrome',
 * });
 */
export const openLinkFp = create(pipe(
  sharedFeatureOptions(),
  withPostEvent,
));

export const openLink = throwifyWithChecksFp(openLinkFp);

```
---
## File: packages/sdk/src/features/links/openTelegramLink.ts

```typescript
import { pipe } from 'fp-ts/function';
import * as E from 'fp-ts/Either';
import { supports, type PostEventError } from '@tma.js/bridge';

import {
  type SharedFeatureOptions,
  sharedFeatureOptions,
} from '@/fn-options/sharedFeatureOptions.js';
import { withPostEvent, type WithPostEvent } from '@/fn-options/withPostEvent.js';
import { withChecksFp } from '@/with-checks/withChecksFp.js';
import { InvalidArgumentsError } from '@/errors.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';
import { withVersion, type WithVersion } from '@/fn-options/withVersion.js';
import { access } from '@/helpers/access.js';

interface CreateOptions extends SharedFeatureOptions, WithPostEvent, WithVersion {
}

export type OpenTelegramLinkError = PostEventError | InvalidArgumentsError;

function create({ postEvent, version, ...rest }: CreateOptions) {
  return withChecksFp((
    url: string | URL,
  ): E.Either<OpenTelegramLinkError, void> => {
    const urlString = url.toString();
    if (!urlString.match(/^https:\/\/t.me\/.+/)) {
      return E.left(new InvalidArgumentsError(`"${urlString}" is invalid URL`));
    }

    if (supports('web_app_open_tg_link', access(version))) {
      url = new URL(url);
      return postEvent('web_app_open_tg_link', { path_full: url.pathname + url.search });
    }

    window.location.href = urlString;
    return E.right(undefined);
  }, { ...rest, returns: 'either' });
}

/**
 * Opens a Telegram link inside the Telegram app. The function expects passing a link in a full
 * format using the hostname "t.me".
 *
 * The Mini App will be closed.
 * @param url - URL to be opened.
 * @example
 * openTelegramLink('https://t.me/heyqbnk');
 */
export const openTelegramLinkFp = create(pipe(
  sharedFeatureOptions(),
  withPostEvent,
  withVersion,
));

/**
 * @see openTelegramLinkFp
 */
export const openTelegramLink = throwifyWithChecksFp(openTelegramLinkFp);

```
---
## File: packages/sdk/src/features/links/shareURL.ts

```typescript
import type * as E from 'fp-ts/Either';
import type { PostEventError } from '@tma.js/bridge';

import { withChecksFp } from '@/with-checks/withChecksFp.js';
import {
  sharedFeatureOptions,
  type SharedFeatureOptions,
} from '@/fn-options/sharedFeatureOptions.js';
import { openTelegramLinkFp } from '@/features/links/openTelegramLink.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';

interface CreateOptions extends SharedFeatureOptions {
  openTelegramLink: (url: string) => E.Either<PostEventError, void>;
}

export type ShareURLError = PostEventError;

function create({ openTelegramLink, ...rest }: CreateOptions) {
  return withChecksFp((url: string, text?: string): E.Either<ShareURLError, void> => {
    return openTelegramLink(
      'https://t.me/share/url?' + new URLSearchParams({ url, text: text || '' })
        .toString()
        // By default, URL search params encode spaces with "+".
        // We are replacing them with "%20", because plus symbols are working incorrectly
        // in Telegram.
        .replace(/\+/g, '%20'),
    );
  }, { ...rest, returns: 'either' });
}

/**
 * Shares the specified URL with the passed to the chats, selected by user.
 * After being called, it closes the mini application.
 *
 * This method uses Telegram's Share Links.
 * @param url - URL to share.
 * @param text - text to append after the URL.
 * @see https://core.telegram.org/api/links#share-links
 * @see https://core.telegram.org/widgets/share#custom-buttons
 */
export const shareURLFp = create({
  ...sharedFeatureOptions(),
  openTelegramLink: openTelegramLinkFp,
});

/**
 * @see shareURLFp
 */
export const shareURL = throwifyWithChecksFp(shareURLFp);

```
---
## File: packages/sdk/src/features/LocationManager/exports.ts

```typescript
export { LocationManager } from './LocationManager.js';
export { locationManager } from './instance.js';
export type {
  LocationManagerOptions,
  LocationManagerRequestLocationResponse,
  LocationManagerState,
} from './types.js';

```
---
## File: packages/sdk/src/features/LocationManager/instance.ts

```typescript
import { pipe } from 'fp-ts/function';

import { LocationManager } from '@/features/LocationManager/LocationManager.js';
import { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';
import { withRequest } from '@/fn-options/withRequest.js';
import { withStateRestore } from '@/fn-options/withStateRestore.js';
import type { LocationManagerState } from '@/features/LocationManager/types.js';
import { withPostEvent } from '@/fn-options/withPostEvent.js';
import { withVersion } from '@/fn-options/withVersion.js';

export const locationManager = new LocationManager(pipe(
  sharedFeatureOptions(),
  withPostEvent,
  withVersion,
  withRequest,
  withStateRestore<LocationManagerState>('locationManager'),
));

```
---
## File: packages/sdk/src/features/LocationManager/LocationManager.ts

```typescript
import type { Computed } from '@tma.js/signals';
import type { EventPayload, RequestError, PostEventError } from '@tma.js/bridge';
import type { Maybe } from '@tma.js/toolkit';
import { BetterPromise } from 'better-promises';
import * as E from 'fp-ts/Either';
import * as TE from 'fp-ts/TaskEither';
import { pipe } from 'fp-ts/function';

import { createWithChecksFp, type WithChecks, type WithChecksFp } from '@/with-checks/withChecksFp.js';
import { createIsSupportedSignal } from '@/helpers/createIsSupportedSignal.js';
import type { AsyncOptions } from '@/types.js';
import type {
  LocationManagerOptions,
  LocationManagerRequestLocationResponse,
  LocationManagerState,
} from '@/features/LocationManager/types.js';
import { Stateful } from '@/composables/Stateful.js';
import { AsyncMountable } from '@/composables/AsyncMountable.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';

function eventToState(event: EventPayload<'location_checked'>): LocationManagerState {
  let available = false;
  let accessRequested: Maybe<boolean>;
  let accessGranted: Maybe<boolean>;
  if (event.available) {
    available = true;
    accessRequested = event.access_requested;
    accessGranted = event.access_granted;
  }
  return {
    available,
    accessGranted: accessGranted || false,
    accessRequested: accessRequested || false,
  };
}

/**
 * @since Mini Apps v8.0
 */
export class LocationManager {
  constructor({
    version,
    request,
    postEvent,
    storage,
    isTma,
    isPageReload,
  }: LocationManagerOptions) {
    const stateful = new Stateful({
      initialState: {
        available: false,
        accessGranted: false,
        accessRequested: false,
      },
      onChange: storage.set,
    });
    const mountable = new AsyncMountable<LocationManagerState, RequestError>({
      isPageReload,
      restoreState: storage.get,
      onMounted: stateful.setState,
      initialState(options) {
        return pipe(
          request('web_app_check_location', 'location_checked', options),
          TE.map(eventToState),
        );
      },
    });

    const wrapOptions = { version, requires: 'web_app_check_location', isTma } as const;
    const wrapSupportedEither = createWithChecksFp({
      ...wrapOptions,
      returns: 'either',
    });
    const wrapSupportedTask = createWithChecksFp({
      ...wrapOptions,
      returns: 'task',
    });
    const wrapMountedTask = createWithChecksFp({
      ...wrapOptions,
      returns: 'task',
      isMounted: mountable.isMounted,
    });

    this.isAvailable = stateful.getter('available');
    this.isAccessRequested = stateful.getter('accessRequested');
    this.isAccessGranted = stateful.getter('accessGranted');
    this.isSupported = createIsSupportedSignal('web_app_check_location', version);
    this.isMounted = mountable.isMounted;
    this.state = stateful.state;

    this.unmount = mountable.unmount;
    this.mountFp = wrapSupportedTask(mountable.mount);
    this.openSettingsFp = wrapSupportedEither(() => {
      return postEvent('web_app_open_location_settings');
    });
    this.requestLocationFp = wrapMountedTask(options => {
      return pipe(
        request('web_app_request_location', 'location_requested', options),
        TE.map(response => {
          if (!response.available) {
            stateful.setState({ available: false });
            return null;
          }
          // eslint-disable-next-line @typescript-eslint/no-unused-vars
          const { available, ...rest } = response;
          return rest;
        }),
      );
    });

    this.mount = throwifyWithChecksFp(this.mountFp);
    this.openSettings = throwifyWithChecksFp(this.openSettingsFp);
    this.requestLocation = throwifyWithChecksFp(this.requestLocationFp);
  }

  /**
   * Complete location manager state.
   */
  readonly state: Computed<LocationManagerState>;

  /**
   * Signal indicating whether the location data tracking is currently available.
   */
  readonly isAvailable: Computed<boolean>;

  /**
   * Signal indicating whether the user has granted the app permission to track location data.
   */
  readonly isAccessGranted: Computed<boolean>;

  /**
   * Signal indicating whether the app has previously requested permission to track location data.
   */
  readonly isAccessRequested: Computed<boolean>;

  /**
   * Signal indicating if the component is currently mounted.
   */
  readonly isMounted: Computed<boolean>;

  /**
   * Signal indicating if the component is supported.
   */
  readonly isSupported: Computed<boolean>;

  /**
   * Opens the location access settings for bots. Useful when you need to request location access
   * from users who haven't granted it yet.
   *
   * Note that this method can be called only in response to user interaction with the Mini App
   * interface (e.g., a click inside the Mini App or on the main button).
   * @since Mini Apps v8.0
   */
  readonly openSettingsFp: WithChecksFp<() => E.Either<PostEventError, void>, true>;

  /**
   * @see openSettingsFp
   */
  readonly openSettings: WithChecks<() => void, true>;

  /**
   * Requests location data.
   * @since Mini Apps v8.0
   * @returns Promise with location data or null it access was not granted.
   */
  readonly requestLocationFp: WithChecksFp<
    (options?: AsyncOptions) => (
      TE.TaskEither<RequestError, LocationManagerRequestLocationResponse | null>
    ),
    true
  >;

  /**
   * @see requestLocationFp
   */
  readonly requestLocation: WithChecks<
    (options?: AsyncOptions) => BetterPromise<LocationManagerRequestLocationResponse | null>,
    true
  >;

  /**
   * Mounts the component restoring its state.
   * @since Mini Apps v8.0
   */
  readonly mountFp: WithChecksFp<
    (options?: AsyncOptions) => TE.TaskEither<RequestError, void>,
    true
  >;

  /**
   * @see mountFp
   */
  readonly mount: WithChecks<(options?: AsyncOptions) => BetterPromise<void>, true>;

  /**
   * Unmounts the component.
   */
  readonly unmount: () => void;
}

```
---
## File: packages/sdk/src/features/LocationManager/types.ts

```typescript
import type { Maybe } from '@tma.js/toolkit';

import type { WithStateRestore } from '@/fn-options/withStateRestore.js';
import type { WithRequest } from '@/fn-options/withRequest.js';
import type { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';
import type { WithVersion } from '@/fn-options/withVersion.js';
import type { WithPostEvent } from '@/fn-options/withPostEvent.js';

export interface LocationManagerRequestLocationResponse {
  /**
   * Latitude in degrees.
   */
  latitude: number;
  /**
   * Longitude in degrees.
   */
  longitude: number;
  /**
   * Altitude above sea level in meters.
   */
  altitude?: Maybe<number>;
  /**
   * The direction the device is moving in degrees.
   */
  course?: Maybe<number>;
  /**
   * The speed of the device in m/s.
   */
  speed?: Maybe<number>;
  /**
   * Accuracy of the latitude and longitude values in meters.
   */
  horizontal_accuracy?: Maybe<number>;
  /**
   * Accuracy of the altitude value in meters.
   */
  vertical_accuracy?: Maybe<number>;
  /**
   * Accuracy of the course value in degrees.
   */
  course_accuracy?: Maybe<number>;
  /**
   * Accuracy of the speed value in m/s.
   */
  speed_accuracy?: Maybe<number>;
}

export interface LocationManagerState {
  /**
   * If true, indicates that location data tracking is available on the current device.
   */
  available: boolean;
  /**
   * Indicates whether the app has previously requested permission to track location data.
   */
  accessRequested: boolean;
  /**
   * Indicates whether the user has granted the app permission to track location data.
   *
   * If false and `accessRequested` is true may indicate that:
   *
   * - The user has simply canceled the permission popup.
   * - The user has denied the app permission to track location data.
   */
  accessGranted: boolean;
}

export interface LocationManagerOptions extends WithStateRestore<LocationManagerState>,
  WithRequest,
  WithVersion,
  WithPostEvent,
  SharedFeatureOptions {
}

```
---
## File: packages/sdk/src/features/MainButton/exports.ts

```typescript
export { mainButton } from './instance.js';
export { type MainButtonOptions, MainButton, type MainButtonState } from './MainButton.js';

```
---
## File: packages/sdk/src/features/MainButton/instance.ts

```typescript
import { computed } from '@tma.js/signals';

import { MainButton } from '@/features/MainButton/MainButton.js';
import { bottomButtonOptions } from '@/fn-options/bottomButtonOptions.js';
import { themeParams } from '@/features/ThemeParams/instance.js';

export const mainButton = new MainButton(
  bottomButtonOptions('mainButton', 'main_button_pressed', {
    bgColor: computed(() => themeParams.buttonColor() || '#2481cc'),
    textColor: computed(() => themeParams.buttonTextColor() || '#ffffff'),
  }),
);

```
---
## File: packages/sdk/src/features/MainButton/MainButton.test.ts

```typescript
import { describe, expect, it, vi } from 'vitest';
import * as E from 'fp-ts/Either';

import {
  MainButton,
  type MainButtonOptions,
} from '@/features/MainButton/MainButton.js';
import { createComponentSessionStorage } from '@/helpers/component-storage.js';
import { createNoopComponentStorage } from '@test-utils/utils.js';
import { testSafetyPure } from '@test-utils/predefined/testSafetyPure.js';
import { InstantiateOptions } from '@test-utils/types.js';

function instantiate({
  storage = false,
  postEvent = () => E.right(undefined),
  isTma = true,
  onClick = () => () => undefined,
  offClick = () => undefined,
  isPageReload = false,
  defaults = {
    bgColor: '#000',
    textColor: '#fff',
  },
}: InstantiateOptions<MainButtonOptions> = {}) {
  return new MainButton({
    storage: typeof storage === 'boolean'
      ? storage
        ? createComponentSessionStorage('mainButton')
        : createNoopComponentStorage()
      : storage,
    postEvent,
    isTma,
    onClick,
    offClick,
    isPageReload,
    defaults,
  });
}

describe.each([
  ['show', (component: MainButton) => component.show(), true],
  ['hide', (component: MainButton) => component.hide(), true],
  ['setParams', (component: MainButton) => component.setParams({}), true],
  ['mount', (component: MainButton) => component.mount(), false],
  ['onClick', (component: MainButton) => component.onClick(() => undefined), false],
  ['offClick', (component: MainButton) => component.offClick(() => undefined), false],
  ['enable', (component: MainButton) => component.enable(), true],
  ['disable', (component: MainButton) => component.disable(), true],
  ['enableShineEffect', (component: MainButton) => component.enableShineEffect(), true],
  ['disableShineEffect', (component: MainButton) => component.disableShineEffect(), true],
  ['showLoader', (component: MainButton) => component.showLoader(), true],
  ['hideLoader', (component: MainButton) => component.hideLoader(), true],
  ['setText', (component: MainButton) => component.setText('a'), true],
  ['setTextColor', (component: MainButton) => component.setTextColor('#aaa'), true],
  ['setBgColor', (component: MainButton) => component.setBgColor('#ddd'), true],
] as const)('%s', (method, tryCall, requireMount) => {
  describe('safety', () => {
    testSafetyPure({
      instantiate,
      get: instance => instance[method],
      try: tryCall,
      mount: requireMount
        ? component => component.mount()
        : undefined,
    });
  });
});

describe.each([
  {
    method: 'hide',
    oppositeMethod: 'show',
    targetValue: false,
    property: 'isVisible',
    payloadProperty: 'is_visible',
  },
  {
    method: 'show',
    oppositeMethod: 'hide',
    targetValue: true,
    property: 'isVisible',
    payloadProperty: 'is_visible',
  },
  {
    method: 'enable',
    oppositeMethod: 'disable',
    targetValue: true,
    property: 'isEnabled',
    payloadProperty: 'is_active',
  },
  {
    method: 'disable',
    oppositeMethod: 'enable',
    targetValue: false,
    property: 'isEnabled',
    payloadProperty: 'is_active',
  },
  {
    method: 'enableShineEffect',
    oppositeMethod: 'disableShineEffect',
    targetValue: true,
    property: 'hasShineEffect',
    payloadProperty: 'has_shine_effect',
  },
  {
    method: 'disableShineEffect',
    oppositeMethod: 'enableShineEffect',
    targetValue: false,
    property: 'hasShineEffect',
    payloadProperty: 'has_shine_effect',
  },
  {
    method: 'showLoader',
    oppositeMethod: 'hideLoader',
    targetValue: true,
    property: 'isLoaderVisible',
    payloadProperty: 'is_progress_visible',
  },
  {
    method: 'hideLoader',
    oppositeMethod: 'showLoader',
    targetValue: false,
    property: 'isLoaderVisible',
    payloadProperty: 'is_progress_visible',
  },
] as const)('$method', ({ oppositeMethod, method, targetValue, property, payloadProperty }) => {
  it(`should set ${property} = ${targetValue}`, () => {
    const component = instantiate();
    component.mount();
    component[oppositeMethod]();
    expect(component[property]()).toBe(!targetValue);
    component[method]();
    expect(component[property]()).toBe(targetValue);
  });

  it(
    `should call postEvent with "web_app_setup_main_button" and { ${payloadProperty}: ${targetValue} }`,
    () => {
      const postEvent = vi.fn(() => E.right(undefined));
      const component = instantiate({ postEvent });
      component.mount();
      component[oppositeMethod]();
      postEvent.mockClear();
      component[method]();
      component[method]();
      component[method]();
      expect(postEvent).toBeCalledTimes(1);
      expect(postEvent).toBeCalledWith(
        'web_app_setup_main_button',
        expect.objectContaining({ [payloadProperty]: targetValue }),
      );
    },
  );

  it('should save the state using passed storage', () => {
    const set = vi.fn();
    const component = instantiate({
      storage: { get: () => undefined, set },
    });
    component.mount();
    component[oppositeMethod]();
    set.mockClear();
    component[method]();
    expect(set).toHaveBeenCalledOnce();
    expect(set).toHaveBeenCalledWith(expect.objectContaining({ [property]: targetValue }));
  });
});

describe.each([
  // {
  //   method: 'setBgColor',
  //   property: 'bgColor',
  //   payloadProperty: 'color',
  //   usedValue: '#abc',
  //   use: (component: MainButton) => component.setBgColor('#abc'),
  // },
  {
    method: 'setTextColor',
    property: 'textColor',
    payloadProperty: 'text_color',
    usedValue: '#cba',
    use: (component: MainButton) => component.setTextColor('#cba'),
  },
  // {
  //   method: 'setText',
  //   property: 'text',
  //   payloadProperty: 'text',
  //   usedValue: 'Some text',
  //   use: (component: MainButton) => component.setText('Some text'),
  // },
] as const)('$method', ({ property, payloadProperty, usedValue, use }) => {
  it(`should set ${property}`, () => {
    const component = instantiate();
    component.mount();
    use(component);
    expect(component[property]()).toBe(usedValue);
  });

  it(
    `should call postEvent with "web_app_setup_main_button" and { ${payloadProperty}: {{value}} }`,
    () => {
      const postEvent = vi.fn(() => E.right(undefined));
      const component = instantiate({ postEvent });
      component.mount();
      use(component);
      use(component);
      use(component);
      expect(postEvent).toBeCalledTimes(1);
      expect(postEvent).toBeCalledWith(
        'web_app_setup_main_button', expect.objectContaining({ [payloadProperty]: usedValue }),
      );
    },
  );

  it('should save the state using passed storage', () => {
    const set = vi.fn();
    const component = instantiate({
      storage: { get: () => undefined, set },
    });
    component.mount();
    use(component);
    expect(set).toHaveBeenCalledOnce();
    expect(set).toHaveBeenCalledWith(expect.objectContaining({ [property]: usedValue }));
  });
});

describe('onClick', () => {
  it('should return result of passed onClick from options', () => {
    const offClick = () => undefined;
    const onClick = vi.fn(() => offClick);
    const listener = vi.fn();
    expect(instantiate({ onClick }).onClick(listener, true)).toBe(offClick);
    expect(onClick).toHaveBeenCalledOnce();
    expect(onClick).toHaveBeenCalledWith(listener, true);
  });
});

describe('offClick', () => {
  it('should use passed offClick from options', () => {
    const offClick = vi.fn(() => undefined);
    const listener = vi.fn();
    instantiate({ offClick }).offClick(listener, true);
    expect(offClick).toHaveBeenCalledOnce();
    expect(offClick).toHaveBeenCalledWith(listener, true);
  });
});

describe('mount', () => {
  it('should set isMounted = true', () => {
    const component = instantiate();
    expect(component.isMounted()).toBe(false);
    component.mount();
    expect(component.isMounted()).toBe(true);
  });

  describe('no page reload', () => {
    it('should not use value from the storage', () => {
      const get = vi.fn(() => ({
        isVisible: true,
        position: 'left',
        bgColor: '#123',
        hasShineEffect: false,
        isEnabled: true,
        isLoaderVisible: false,
        text: 'Text',
        textColor: '#112',
      } as const));
      const component = instantiate({ storage: { get, set: vi.fn() } });
      component.mount();
      expect(get).not.toHaveBeenCalled();
    });
  });

  describe('page reload', () => {
    it('should extract state from storage', () => {
      const get = vi.fn();
      const component = instantiate({
        storage: { get, set: vi.fn() },
        isPageReload: true,
      });
      component.mount();
      expect(get).toHaveBeenCalledOnce();

      const get2 = vi.fn(() => ({
        isVisible: true,
        position: 'left',
        bgColor: '#123',
        hasShineEffect: false,
        isEnabled: true,
        isLoaderVisible: false,
        text: 'Text',
        textColor: '#112',
      } as const));
      const component2 = instantiate({
        storage: { get: get2, set: vi.fn() },
        isPageReload: true,
      });
      component2.mount();
      expect(get2).toHaveBeenCalledOnce();
    });
  });
});

describe('unmount', () => {
  it('should set isMounted = false', () => {
    const component = instantiate();
    expect(component.isMounted()).toBe(false);
    component.mount();
    expect(component.isMounted()).toBe(true);
    component.unmount();
    expect(component.isMounted()).toBe(false);
  });
});

```
---
## File: packages/sdk/src/features/MainButton/MainButton.ts

```typescript
import { computed, type Computed } from '@tma.js/signals';
import type { RGB } from '@tma.js/types';
import type { PostEventError } from '@tma.js/bridge';
import * as E from 'fp-ts/Either';

import type { WithChecks, WithChecksFp } from '@/with-checks/withChecksFp.js';
import { Button, type ButtonOptions } from '@/composables/Button.js';
import type { MaybeAccessor } from '@/types.js';
import { access } from '@/helpers/access.js';

type MainButtonEither = E.Either<PostEventError, void>;

export interface MainButtonState {
  isVisible: boolean;
  bgColor?: RGB;
  hasShineEffect: boolean;
  isEnabled: boolean;
  isLoaderVisible: boolean;
  text: string;
  textColor?: RGB;
}

export interface MainButtonOptions extends Omit<
  ButtonOptions<MainButtonState, 'web_app_setup_main_button'>,
  'initialState' | 'method' | 'payload' | 'version'
> {
  /**
   * Default values for different kinds of the button properties.
   */
  defaults: {
    bgColor: MaybeAccessor<RGB>;
    textColor: MaybeAccessor<RGB>;
  };
}

export class MainButton {
  constructor({ defaults, ...options }: MainButtonOptions) {
    const button = new Button({
      ...options,
      version: '100',
      initialState: {
        hasShineEffect: false,
        isEnabled: true,
        isLoaderVisible: false,
        isVisible: false,
        text: 'Continue',
      },
      method: 'web_app_setup_main_button',
      payload: state => ({
        has_shine_effect: state.hasShineEffect,
        is_visible: state.isVisible,
        is_active: state.isEnabled,
        is_progress_visible: state.isLoaderVisible,
        text: state.text,
        color: state.bgColor,
        text_color: state.textColor,
      }),
    });

    const withDefault = (
      field: 'bgColor' | 'textColor',
      getDefault: MaybeAccessor<RGB>,
    ) => {
      const fromState = button.stateGetter(field);
      return computed(() => fromState() || access(getDefault));
    };

    this.bgColor = withDefault('bgColor', defaults.bgColor);
    this.textColor = withDefault('textColor', defaults.textColor);
    this.hasShineEffect = button.stateGetter('hasShineEffect');
    this.isEnabled = button.stateGetter('isEnabled');
    this.isLoaderVisible = button.stateGetter('isLoaderVisible');
    this.text = button.stateGetter('text');
    this.isVisible = button.stateGetter('isVisible');
    this.isMounted = button.isMounted;
    this.state = button.state;

    [this.setBgColor, this.setBgColorFp] = button.stateSetters('bgColor');
    [this.setTextColor, this.setTextColorFp] = button.stateSetters('textColor');
    [
      [this.disableShineEffect, this.disableShineEffectFp],
      [this.enableShineEffect, this.enableShineEffectFp],
    ] = button.stateBoolSetters('hasShineEffect');
    [
      [this.disable, this.disableFp],
      [this.enable, this.enableFp],
    ] = button.stateBoolSetters('isEnabled');
    [
      [this.hideLoader, this.hideLoaderFp],
      [this.showLoader, this.showLoaderFp],
    ] = button.stateBoolSetters('isLoaderVisible');

    [this.setText, this.setTextFp] = button.stateSetters('text');
    [[this.hide, this.hideFp], [this.show, this.showFp]] = button.stateBoolSetters('isVisible');
    this.setParams = button.setState;
    this.setParamsFp = button.setStateFp;
    this.onClick = button.onClick;
    this.onClickFp = button.onClickFp;
    this.offClick = button.offClick;
    this.offClickFp = button.offClickFp;
    this.mount = button.mount;
    this.mountFp = button.mountFp;
    this.unmount = button.unmount;
  }

  //#region Properties.
  /**
   * The button background color.
   */
  readonly bgColor: Computed<RGB>;

  /**
   * True if the button has a shining effect.
   */
  readonly hasShineEffect: Computed<boolean>;

  /**
   * True if the button is clickable.
   */
  readonly isEnabled: Computed<boolean>;

  /**
   * True if the button loader is visible.
   */
  readonly isLoaderVisible: Computed<boolean>;

  /**
   * True if the button is visible.
   */
  readonly isVisible: Computed<boolean>;

  /**
   * Signal indicating if the component is currently mounted.
   */
  readonly isMounted: Computed<boolean>;

  /**
   * The complete button state.
   */
  readonly state: Computed<MainButtonState>;

  /**
   * The button displayed text.
   */
  readonly text: Computed<string>;

  /**
   * The button text color.
   *
   * Note that this value is computed based on the external defaults. For
   * example, if not explicitly set, this value may be equal to one of theme
   * params colors.
   */
  readonly textColor: Computed<RGB>;
  //#endregion

  //#region Methods.
  /**
   * Shows the button.
   */
  readonly showFp: WithChecksFp<() => MainButtonEither, false>;

  /**
   * @see showFp
   */
  readonly show: WithChecks<() => void, false>;

  /**
   * Hides the button.
   */
  readonly hideFp: WithChecksFp<() => MainButtonEither, false>;

  /**
   * @see hideFp
   */
  readonly hide: WithChecks<() => void, false>;

  /**
   * Enables the button.
   */
  readonly enableFp: WithChecksFp<() => MainButtonEither, false>;

  /**
   * @see enableFp
   */
  readonly enable: WithChecks<() => void, false>;

  /**
   * Enables the button.
   */
  readonly enableShineEffectFp: WithChecksFp<() => MainButtonEither, false>;

  /**
   * @see enableShineEffectFp
   */
  readonly enableShineEffect: WithChecks<() => void, false>;

  /**
   * Disables the button.
   */
  readonly disableFp: WithChecksFp<() => MainButtonEither, false>;

  /**
   * @see disableFp
   */
  readonly disable: WithChecks<() => void, false>;

  /**
   * Enables the button.
   */
  readonly disableShineEffectFp: WithChecksFp<() => MainButtonEither, false>;

  /**
   * @see disableShineEffectFp
   */
  readonly disableShineEffect: WithChecks<() => void, false>;

  /**
   * Updates the button background color.
   */
  readonly setBgColorFp: WithChecksFp<(value: RGB) => MainButtonEither, false>;

  /**
   * @see setBgColorFp
   */
  readonly setBgColor: WithChecks<(value: RGB) => void, false>;

  /**
   * Updates the button text color.
   */
  readonly setTextColorFp: WithChecksFp<(value: RGB) => MainButtonEither, false>;

  /**
   * @see setTextColorFp
   */
  readonly setTextColor: WithChecks<(value: RGB) => void, false>;

  /**
   * Updates the button text.
   */
  readonly setTextFp: WithChecksFp<(value: string) => MainButtonEither, false>;

  /**
   * @see setTextFp
   */
  readonly setText: WithChecks<(value: string) => void, false>;

  /**
   * Shows the button loader.
   */
  readonly showLoaderFp: WithChecksFp<() => MainButtonEither, false>;

  /**
   * @see showLoaderFp
   */
  readonly showLoader: WithChecks<() => void, false>;

  /**
   * Hides the button loader.
   */
  readonly hideLoaderFp: WithChecksFp<() => MainButtonEither, false>;

  /**
   * @see hideLoaderFp
   */
  readonly hideLoader: WithChecks<() => void, false>;

  /**
   * Updates the button state.
   * @param state - updates to apply.
   * @example
   * button.setParams({
   *   text: 'Submit',
   *   isEnabled: true,
   *   hasShineEffect: true,
   * });
   */
  readonly setParamsFp: WithChecksFp<(state: Partial<MainButtonState>) => MainButtonEither, false>;

  readonly setParams: WithChecks<(state: Partial<MainButtonState>) => void, false>;

  /**
   * Mounts the component restoring its state.
   */
  readonly mountFp: WithChecksFp<() => void, false>;

  /**
   * @see mountFp
   */
  readonly mount: WithChecks<() => void, false>;

  /**
   * Unmounts the component.
   */
  readonly unmount: () => void;

  /**
   * Adds a new button listener.
   * @param listener - event listener.
   * @param once - should the listener be called only once.
   * @returns A function to remove bound listener.
   * @example
   * const off = button.onClick(() => {
   *   console.log('User clicked the button');
   *   off();
   * });
   */
  readonly onClickFp: WithChecksFp<(listener: VoidFunction, once?: boolean) => VoidFunction, false>;

  /**
   * @see onClickFp
   */
  readonly onClick: WithChecks<(listener: VoidFunction, once?: boolean) => VoidFunction, false>;

  /**
   * Removes the button click listener.
   * @param listener - event listener.
   * @param once - should the listener be called only once.
   * @example
   * function listener() {
   *   console.log('User clicked the button');
   *   button.offClick(listener);
   * }
   * button.onClick(listener);
   */
  readonly offClickFp: WithChecksFp<(listener: VoidFunction, once?: boolean) => void, false>;

  /**
   * @see offClickFp
   */
  readonly offClick: WithChecks<(listener: VoidFunction, once?: boolean) => void, false>;
  //#endregion
}

```
---
## File: packages/sdk/src/features/MiniApp/exports.ts

```typescript
export {
  type MiniAppState,
  MiniApp,
  type MiniAppOptions,
  type MiniAppGetCssVarNameFn,
} from './MiniApp.js';
export { miniApp } from './instance.js';

```
---
## File: packages/sdk/src/features/MiniApp/instance.ts

```typescript
import { pipe } from 'fp-ts/function';
import { on, off } from '@tma.js/bridge';

import { MiniApp, type MiniAppState } from '@/features/MiniApp/MiniApp.js';
import { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';
import { withPostEvent } from '@/fn-options/withPostEvent.js';
import { withVersion } from '@/fn-options/withVersion.js';
import { withStateRestore } from '@/fn-options/withStateRestore.js';
import { themeParams } from '@/features/ThemeParams/instance.js';

export const miniApp = new MiniApp({
  ...pipe(
    sharedFeatureOptions(),
    withPostEvent,
    withVersion,
    withStateRestore<MiniAppState>('miniApp'),
  ),
  offVisibilityChanged(listener) {
    off('visibility_changed', listener);
  },
  onVisibilityChanged(listener) {
    on('visibility_changed', listener);
  },
  theme: themeParams.state,
});

```
---
## File: packages/sdk/src/features/MiniApp/MiniApp.ts

```typescript
import type { KnownThemeParamsKey, RGB, ThemeParams } from '@tma.js/types';
import { type Computed, computed } from '@tma.js/signals';
import {
  supports,
  type PostEventError,
  type EventPayload,
  type EventListener,
} from '@tma.js/bridge';
import { createCbCollector, camelToKebab } from '@tma.js/toolkit';
import { isRGB } from '@tma.js/transformers';
import { pipe } from 'fp-ts/function';
import { signal } from '@tma.js/signals';
import * as E from 'fp-ts/Either';

import { isColorDark } from '@/helpers/isColorDark.js';
import {
  createWithChecksFp,
  type WithChecks,
  withChecksFp,
  type WithChecksFp,
} from '@/with-checks/withChecksFp.js';
import { CSSVarsBoundError, UnknownThemeParamsKeyError } from '@/errors.js';
import type { WithPostEvent } from '@/fn-options/withPostEvent.js';
import type { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';
import type { WithVersion } from '@/fn-options/withVersion.js';
import { Stateful } from '@/composables/Stateful.js';
import type { WithStateRestore } from '@/fn-options/withStateRestore.js';
import { Mountable } from '@/composables/Mountable.js';
import { access } from '@/helpers/access.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';
import { deleteCssVar, setCssVar } from '@/helpers/css-vars.js';

type AnyColor = RGB | KnownThemeParamsKey | string;

export interface MiniAppState {
  bgColor: AnyColor;
  bottomBarColor: AnyColor;
  headerColor: AnyColor;
  isActive: boolean;
}

export interface MiniAppGetCssVarNameFn {
  /**
   * @param property - mini app property.
   * @returns Computed complete CSS variable name.
   */
  (property: 'bgColor' | 'bottomBarColor' | 'headerColor'): string;
}

type WithListeners<Handlers extends string, Payload> = {
  [K in Handlers]: (listener: (payload: Payload) => void) => void;
};

export interface MiniAppOptions extends WithPostEvent,
  WithVersion,
  WithStateRestore<MiniAppState>,
  WithListeners<'onVisibilityChanged' | 'offVisibilityChanged', EventPayload<'visibility_changed'>>,
  SharedFeatureOptions {
  /**
   * The current theme parameters.
   */
  theme: Computed<ThemeParams>;
}

/**
 * @since Mini Apps v6.1
 */
export class MiniApp {
  constructor({
    storage,
    isPageReload,
    version,
    postEvent,
    isTma,
    theme,
    onVisibilityChanged,
    offVisibilityChanged,
  }: MiniAppOptions) {
    //#region Mounting.
    const visibilityChangedListener: EventListener<'visibility_changed'> = event => {
      stateful.setState({ isActive: event.is_visible });
    };
    const themeChangedListener = (theme: ThemeParams) => {
      // Sometimes we may have the following colors to be specified as some theme params keys.
      // Due to the Mini Apps nature, we are not really allowed to do that, but we want to provide
      // such an opportunity to developers.
      //
      // So if the developer specified some field as a reference to some theme params key, we
      // should find an according RGB color for it and send it to the Telegram client. We have one
      // exclusion here - the method 'web_app_set_header_color' may accept values 'bg_color'
      // and 'secondary_bg_color'. Other methods accept only RGB values.
      ([
        [this.headerColor, 'web_app_set_header_color'],
        [this.bgColor, 'web_app_set_background_color'],
        [this.bottomBarColor, 'web_app_set_bottom_bar_color'],
      ] as const).forEach(([signal, method]) => {
        const color = signal();
        // The value is already in RGB format, we have nothing to update here.
        if (isRGB(color)) {
          return;
        }
        // The real RGB value should only be extracted for the following methods:
        // - 'web_app_set_background_color'
        // - 'web_app_set_bottom_bar_color'
        // We should also do it in case of the 'web_app_set_header_color' method, if the value
        // specified is not 'bg_color' and 'secondary_bg_color' (unknown key to
        // the Telegram client).
        if (
          method !== 'web_app_set_header_color'
          || !['bg_color', 'secondary_bg_color'].includes(color)
        ) {
          const rgb = theme[color];
          if (rgb) {
            postEvent(method, { color: rgb });
          }
        }
      });
    };
    const mountable = new Mountable({
      initialState() {
        return E.right({
          bgColor: 'bg_color',
          headerColor: 'header_bg_color',
          bottomBarColor: 'bottom_bar_bg_color',
          isActive: true,
        });
      },
      isPageReload,
      onMounted: state => {
        onVisibilityChanged(visibilityChangedListener);
        theme.sub(themeChangedListener);
        stateful.setState(state);
      },
      onUnmounted() {
        offVisibilityChanged(visibilityChangedListener);
        theme.unsub(themeChangedListener);
      },
      restoreState: storage.get,
    });
    this.isMounted = mountable.isMounted;
    this.mountFp = withChecksFp(() => {
      const nothing = () => undefined;
      return pipe(mountable.mount(), E.match(nothing, nothing));
    }, { isTma, returns: 'plain' });
    this.mount = throwifyWithChecksFp(this.mountFp);
    this.unmount = mountable.unmount;
    //#endregion

    //#region State.
    const stateful = new Stateful({
      initialState: {
        bgColor: 'bg_color',
        bottomBarColor: 'bottom_bar_bg_color',
        headerColor: 'bg_color',
        isActive: false,
      },
      onChange: storage.set,
    });
    this.state = stateful.state;

    const rgbBasedOn = (color: AnyColor): RGB | undefined => {
      return isRGB(color) ? color : access(theme)[color];
    };
    const computedRgbBasedOn = (signal: Computed<AnyColor>): Computed<RGB | undefined> => {
      return computed(() => rgbBasedOn(signal()));
    };
    //#endregion

    //#region Other properties.
    this.isActive = stateful.getter('isActive');
    this.isSupported = computed(() => {
      return ([
        'web_app_set_header_color',
        'web_app_set_background_color',
        'web_app_set_bottom_bar_color',
      ] as const).some(method => supports(method, access(version)));
    });
    //#endregion

    //#region Css vars.
    const isCssVarsBound = signal(false);
    this.isCssVarsBound = computed(isCssVarsBound);
    this.bindCssVarsFp = withChecksFp(getCSSVarName => {
      if (isCssVarsBound()) {
        return E.left(new CSSVarsBoundError());
      }
      const [addCleanup, cleanup] = createCbCollector(() => {
        isCssVarsBound.set(false);
      });

      const bind = (cssVar: string, signal: Computed<RGB | undefined>) => {
        const update = () => {
          setCssVar(cssVar, signal() || null);
        };
        update();
        addCleanup(signal.sub(update), deleteCssVar.bind(null, cssVar));
      };

      getCSSVarName ||= prop => `--tg-${camelToKebab(prop)}`;
      bind(getCSSVarName('bgColor'), this.bgColorRgb);
      bind(getCSSVarName('bottomBarColor'), this.bottomBarColorRgb);
      bind(getCSSVarName('headerColor'), this.headerColorRgb);

      isCssVarsBound.set(true);

      return E.right(cleanup);
    }, { isTma, returns: 'either', isMounted: this.isMounted });
    this.bindCssVars = throwifyWithChecksFp(this.bindCssVarsFp);
    //#endregion

    //#region Colors.
    type GenColorToolsetResult<K extends Exclude<keyof MiniAppState, 'isActive'>> = [
      rawColor: Computed<AnyColor>,
      rgbColor: Computed<RGB | undefined>,
      throwing: WithChecks<
        (color: AnyColor) => void,
        true,
        K extends 'headerColor' ? 'rgb' : never
      >,
      fp: WithChecksFp<
        (color: AnyColor) => E.Either<UnknownThemeParamsKeyError | PostEventError, void>,
        true,
        K extends 'headerColor' ? 'rgb' : never
      >,
    ];
    const genColorToolset = <K extends Exclude<keyof MiniAppState, 'isActive'>>(
      stateKey: K,
    ): GenColorToolsetResult<K> => {
      const rawColor = stateful.getter(stateKey);
      const rgbColor = computedRgbBasedOn(rawColor);
      const method = ({
        headerColor: 'web_app_set_header_color',
        bgColor: 'web_app_set_background_color',
        bottomBarColor: 'web_app_set_bottom_bar_color',
      } as const)[stateKey];

      const fp = withChecksFp(
        (color: AnyColor): E.Either<UnknownThemeParamsKeyError | PostEventError, void> => {
          if (color === rawColor()) {
            return E.right(undefined);
          }
          if (
            method === 'web_app_set_header_color'
            && (color === 'bg_color' || color === 'secondary_bg_color')
          ) {
            return pipe(
              postEvent('web_app_set_header_color', { color_key: color }),
              E.map(() => {
                stateful.setState({ [stateKey]: color });
              }),
            );
          }
          const rgb = rgbBasedOn(color);
          return pipe(
            rgb
              ? postEvent(method, { color: rgb })
              : E.left(new UnknownThemeParamsKeyError(color)),
            E.map(() => {
              stateful.setState({ [stateKey]: rgb });
            }),
          );
        },
        {
          isTma,
          version,
          requires: method,
          isMounted: this.isMounted,
          returns: 'either',
          supports: stateKey === 'headerColor'
            ? {
              rgb: {
                method: 'web_app_set_header_color',
                param: 'color',
                shouldCheck: isRGB,
              },
            }
            : undefined,
        },
      );

      return [rawColor, rgbColor, throwifyWithChecksFp(fp), fp] as GenColorToolsetResult<K>;
    };
    [
      this.bgColor,
      this.bgColorRgb,
      this.setBgColor,
      this.setBgColorFp,
    ] = genColorToolset('bgColor');
    [
      this.headerColor,
      this.headerColorRgb,
      this.setHeaderColor,
      this.setHeaderColorFp,
    ] = genColorToolset('headerColor');
    [
      this.bottomBarColor,
      this.bottomBarColorRgb,
      this.setBottomBarColor,
      this.setBottomBarColorFp,
    ] = genColorToolset('bottomBarColor');
    //#endregion

    //#region Other methods.
    const withBasicEither = createWithChecksFp({ isTma, returns: 'either' });
    this.closeFp = withBasicEither(returnBack => {
      return postEvent('web_app_close', { return_back: returnBack });
    });
    this.close = throwifyWithChecksFp(this.closeFp);

    this.readyFp = withBasicEither(() => postEvent('web_app_ready'));
    this.ready = throwifyWithChecksFp(this.readyFp);
    //#endregion
  }

  //#region Other properties.
  /**
   * Signal indicating if the component is supported.
   */
  readonly isSupported: Computed<boolean>;

  /**
   * True if the current Mini App background color is recognized as dark.
   */
  readonly isDark = computed(() => {
    const color = this.bgColorRgb();
    return color ? isColorDark(color) : false;
  });

  /**
   * Signal indicating if the mini app is currently active.
   */
  readonly isActive: Computed<boolean>;

  /**
   * Complete component state.
   */
  readonly state: Computed<MiniAppState>;
  //#endregion

  //#region CSS variables.
  /**
   * True if the CSS variables are currently bound.
   */
  readonly isCssVarsBound: Computed<boolean>;

  /**
   * Creates CSS variables connected with the mini app.
   *
   * Default variables:
   * - `--tg-bg-color`
   * - `--tg-header-color`
   * - `--tg-bottom-bar-color`
   *
   * Variables are being automatically updated if theme parameters were changed.
   *
   * @param getCSSVarName - function, returning complete CSS variable name for the specified
   * mini app key.
   * @returns Function to stop updating variables.
   * @example Using no arguments
   * miniApp.bindCssVars();
   * @example Using custom CSS vars generator
   * miniApp.bindCssVars(key => `--my-prefix-${key}`);
   */
  readonly bindCssVarsFp: WithChecksFp<
    (getCssVarName?: MiniAppGetCssVarNameFn) => E.Either<CSSVarsBoundError, VoidFunction>,
    false
  >;

  readonly bindCssVars: WithChecks<(getCssVarName?: MiniAppGetCssVarNameFn) => VoidFunction, false>;
  //#endregion

  //#region Mounting.
  /**
   * Signal indicating if the component is mounted.
   */
  readonly isMounted: Computed<boolean>;

  /**
   * Mounts the component.
   *
   * This function restores the component state and is automatically saving it in the local storage
   * if it changed.
   * @since Mini Apps v6.1
   */
  readonly mountFp: WithChecksFp<() => void, false>;

  /**
   * @see mount
   */
  readonly mount: WithChecks<() => void, false>;

  /**
   * Unmounts the component.
   */
  readonly unmount: () => void;
  //#endregion

  //#region Background color.
  /**
   * The Mini App background color.
   *
   * Represents an RGB color, or theme parameters key, like "bg_color", "secondary_bg_color", etc.
   *
   * Note that using a theme parameters key, background color becomes bound to the current
   * theme parameters, making it automatically being updated whenever theme parameters change.
   * In order to remove this bind, use an explicit RGB color.
   */
  readonly bgColor: Computed<AnyColor>;

  /**
   * RGB representation of the background color.
   *
   * This value requires the Theme Params component to be mounted to extract a valid RGB value
   * of the color key.
   */
  readonly bgColorRgb: Computed<RGB | undefined>;

  /**
   * Updates the mini app background color.
   * @since Mini Apps v6.1
   */
  readonly setBgColorFp: WithChecksFp<
    (color: AnyColor) => E.Either<PostEventError | UnknownThemeParamsKeyError, void>,
    true
  >;

  /**
   * @see setBgColorFp
   */
  readonly setBgColor: WithChecks<(color: AnyColor) => void, true>;
  //#endregion

  //#region Header color.
  /**
   * The Mini App header color.
   */
  readonly headerColor: Computed<AnyColor>;

  /**
   * RGB representation of the header color.
   *
   * This value requires the Theme Params component to be mounted to extract a valid RGB value
   * of the color key.
   */
  readonly headerColorRgb: Computed<RGB | undefined>;

  /**
   * Updates the mini app header color.
   * @since Mini Apps v6.1
   */
  readonly setHeaderColorFp: WithChecksFp<
    (color: AnyColor) => E.Either<PostEventError | UnknownThemeParamsKeyError, void>,
    true,
    'rgb'
  >;

  /**
   * @see setHeaderColorFp
   */
  readonly setHeaderColor: WithChecks<(color: AnyColor) => void, true, 'rgb'>;
  //#endregion

  //#region Bottom bar background color.
  /**
   * The Mini App bottom bar background color.
   */
  readonly bottomBarColor: Computed<AnyColor>;

  /**
   * RGB representation of the bottom bar background color.
   *
   * This value requires the Theme Params component to be mounted to extract a valid RGB value
   * of the color key.
   */
  readonly bottomBarColorRgb: Computed<RGB | undefined>;

  /**
   * Updates the mini app bottom bar bg color.
   * @since Mini Apps v7.10
   */
  readonly setBottomBarColorFp: WithChecksFp<
    (color: AnyColor) => E.Either<PostEventError | UnknownThemeParamsKeyError, void>,
    true
  >;

  /**
   * @see setBottomBarColorFp
   */
  readonly setBottomBarColor: WithChecks<(color: AnyColor) => void, true>;
  //#endregion

  //#region Other methods.
  /**
   * Closes the Mini App.
   * @param returnBack - should the client return to the previous activity.
   */
  readonly closeFp: WithChecksFp<(returnBack?: boolean) => E.Either<PostEventError, void>, false>;

  /**
   * @see closeFp
   */
  readonly close: WithChecks<(returnBack?: boolean) => void, false>;

  /**
   * Informs the Telegram app that the Mini App is ready to be displayed.
   *
   * It is recommended to call this method as early as possible, as soon as all
   * essential interface elements loaded.
   *
   * Once this method is called, the loading placeholder is hidden and the Mini
   * App shown.
   *
   * If the method is not called, the placeholder will be hidden only when the
   * page was fully loaded.
   */
  readonly readyFp: WithChecksFp<() => E.Either<PostEventError, void>, false>;

  /**
   * @see readyFp
   */
  readonly ready: WithChecks<() => void, false>;
  //#endregion
}

```
---
## File: packages/sdk/src/features/Popup/exports.ts

```typescript
export { popup } from './instance.js';
export { Popup, type PopupOptions } from './Popup.js';
export type { ShowOptions, ShowOptionsButton } from './types.js';

```
---
## File: packages/sdk/src/features/Popup/instance.ts

```typescript
import { pipe } from 'fp-ts/function';

import { Popup } from '@/features/Popup/Popup.js';
import { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';
import { withVersion } from '@/fn-options/withVersion.js';
import { withRequest } from '@/fn-options/withRequest.js';

export const popup = new Popup(pipe(sharedFeatureOptions(), withRequest, withVersion));

```
---
## File: packages/sdk/src/features/Popup/Popup.test.ts

```typescript
import { describe, expect, it, vi } from 'vitest';
import * as TE from 'fp-ts/TaskEither';

import { Popup, type PopupOptions } from '@/features/Popup/Popup.js';
import { testIsSupportedPure } from '@test-utils/predefined/testIsSupportedPure.js';
import { testSafetyPure } from '@test-utils/predefined/testSafetyPure.js';
import type { InstantiateOptions } from '@test-utils/types.js';

const MIN_VERSION = '6.2';

function instantiate({
  version = MIN_VERSION,
  request = () => TE.right(undefined),
  isTma = true,
}: InstantiateOptions<PopupOptions> = {}) {
  return new Popup({ version, request, isTma });
}

describe.each([
  ['show', (component: Popup) => component.show({ message: '' })],
] as const)('%s', (method, tryCall) => {
  describe('safety', () => {
    testSafetyPure({
      instantiate,
      get: instance => instance[method],
      try: tryCall,
      minVersion: MIN_VERSION,
    });
  });
});

describe('show', () => {
  it(
    'should call request with "web_app_open_popup" and catch "popup_closed"',
    async () => {
      const request = vi.fn(() => TE.right({ button_id: '1' }));
      const component = instantiate({ request });
      await component.show({
        title: 'Title',
        message: 'Some message',
        buttons: [{ type: 'ok' }, { type: 'cancel' }],
      });
      expect(request).toHaveBeenCalledOnce();
      expect(request).toHaveBeenCalledWith(
        'web_app_open_popup', 'popup_closed', expect.objectContaining({
          params: {
            title: 'Title',
            message: 'Some message',
            buttons: [{ id: '', type: 'ok' }, { id: '', type: 'cancel' }],
          },
        }),
      );
    },
  );
});

describe('isSupported', () => {
  testIsSupportedPure(version => instantiate({ isTma: true, version }), MIN_VERSION);
});

```
---
## File: packages/sdk/src/features/Popup/Popup.ts

```typescript
import * as TE from 'fp-ts/TaskEither';
import type { RequestError } from '@tma.js/bridge';
import { type Computed, signal, computed } from '@tma.js/signals';
import type { BetterPromise } from 'better-promises';
import { pipe } from 'fp-ts/function';

import type { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';
import { createWithChecksFp, type WithChecksFp, type WithChecks } from '@/with-checks/withChecksFp.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';
import type { ShowOptions } from '@/features/Popup/types.js';
import { ConcurrentCallError, type InvalidArgumentsError } from '@/errors.js';
import { createIsSupportedSignal } from '@/helpers/createIsSupportedSignal.js';
import type { WithVersion } from '@/fn-options/withVersion.js';
import type { WithRequest } from '@/fn-options/withRequest.js';
import { prepareParams } from '@/features/Popup/prepareParams.js';

export interface PopupOptions extends SharedFeatureOptions, WithVersion, WithRequest {
}

/**
 * @since Mini Apps v6.2
 */
export class Popup {
  constructor({ version, isTma, request }: PopupOptions) {
    const isOpened = signal(false);
    const toggleClosed = () => {
      isOpened.set(false);
    };

    const wrapSupportedTask = createWithChecksFp({
      version,
      isTma,
      requires: 'web_app_open_popup',
      returns: 'task',
    });

    this.isSupported = createIsSupportedSignal('web_app_open_popup', version);
    this.isOpened = computed(isOpened);
    this.showFp = wrapSupportedTask(options => {
      return pipe(
        this.isOpened()
          ? TE.left(new ConcurrentCallError('A popup is already opened'))
          : TE.right(undefined as never),
        TE.chainW(() => TE.fromEither(prepareParams(options))),
        TE.chain(preparedOptions => {
          isOpened.set(true);
          return request('web_app_open_popup', 'popup_closed', {
            ...options,
            params: preparedOptions,
          });
        }),
        TE.mapBoth(
          err => {
            toggleClosed();
            return err;
          },
          response => {
            toggleClosed();
            return response.button_id;
          },
        ),
      );
    });
    this.show = throwifyWithChecksFp(this.showFp);
  }

  /**
   * Signal indicating if any popup is currently opened.
   */
  readonly isOpened: Computed<boolean>;

  /**
   * Signal indicating if the component is supported.
   */
  readonly isSupported: Computed<boolean>;

  /**
   * A method that shows a native popup described by the `params` argument.
   * The promise will be resolved when the popup is closed. Resolved value will have
   * an identifier of the pressed button.
   *
   * If a user clicked outside the popup or clicked the top right popup close
   * button, null will be resolved.
   *
   * @param options - popup parameters.
   * @since Mini Apps v6.2
   * @example
   * pipe(
   *   popup.showFp({
   *     title: 'Confirm action',
   *     message: 'Do you really want to buy this burger?',
   *     buttons: [
   *       { id: 'yes', text: 'Yes' },
   *       { id: 'no', type: 'destructive', text: 'No' },
   *     ],
   *   }),
   *   TE.map(buttonId => {
   *     console.log('User clicked a button with ID', buttonId);
   *   }),
   * );
   */
  readonly showFp: WithChecksFp<
    (options: ShowOptions) => TE.TaskEither<
      RequestError | InvalidArgumentsError | ConcurrentCallError,
      string | undefined
    >,
    true
  >;

  /**
   * @see showFp
   */
  readonly show: WithChecks<(options: ShowOptions) => BetterPromise<string | undefined>, true>;
}

```
---
## File: packages/sdk/src/features/Popup/prepareParams.test.ts

```typescript
import { expect, it, describe } from 'vitest';
import * as E from 'fp-ts/Either';

import { prepareParams } from './prepareParams.js';
import { InvalidArgumentsError } from '@/errors.js';

/**
 * Creates test text.
 * @param length - text length.
 */
function text(length: number): string {
  return new Array(length)
    .fill('a')
    .join('');
}

function createError(message: string) {
  return E.left(new InvalidArgumentsError(message));
}

const anyRight = E.right(expect.anything());

describe('title', () => {
  it('should return error if title length > 64', () => {
    const title = text(65);
    expect(prepareParams({ title, message: 'Hey!' })).toStrictEqual(
      createError(`Invalid title: ${title}`),
    );
    expect(prepareParams({ title: text(64), message: 'Hey!' })).toStrictEqual(anyRight);
  });
});

describe('message', () => {
  it('should return error if message length is out of [1, 256]', () => {
    expect(prepareParams({ message: '' })).toStrictEqual(createError('Invalid message: '));

    const message = text(257);
    expect(prepareParams({ message })).toStrictEqual(
      createError(`Invalid message: ${message}`),
    );
    expect(prepareParams({ message: text(256) })).toStrictEqual(anyRight);
  });
});

describe('buttons', () => {
  it('should return error if buttons count > 3', () => {
    expect(prepareParams({
      message: 'a',
      buttons: new Array(4),
    })).toStrictEqual(createError('Invalid buttons count: 4'));

    expect(prepareParams({
      message: 'a',
      buttons: new Array(3).fill({ type: 'close' }),
    })).toStrictEqual(anyRight);
  });

  it('should append button type "close" if buttons array is empty', () => {
    expect(prepareParams({ message: 'a' })).toStrictEqual(E.right(expect.objectContaining({
      buttons: [{ type: 'close', id: '' }],
    })));
  });

  describe('button', () => {
    it('should return error if id length > 64', () => {
      const id = text(65);
      expect(prepareParams({
        message: 'A',
        buttons: [
          { type: 'ok', id: text(1) },
          { type: 'ok', id },
        ],
      })).toStrictEqual(createError(`Button with index 1 has invalid id: ${id}`));

      expect(prepareParams({
        message: 'A',
        buttons: [
          { type: 'ok', id: text(1) },
          { type: 'ok', id: text(64) },
        ],
      })).toStrictEqual(anyRight);
    });

    it.each([
      undefined,
      'default',
      'destructive',
    ] as const)(
      'should return error if text length is out of [0, 64] and button type is %s',
      type => {
        const invalidText = text(65);
        expect(prepareParams({
          message: 'A',
          buttons: [{ type, text: invalidText }],
        })).toStrictEqual(createError(`Button with index 0 has invalid text: ${invalidText}`));

        expect(prepareParams({
          message: 'A',
          buttons: [{ type, text: text(64) }],
        })).toStrictEqual(anyRight);
      },
    );
  });
});

it('should fulfill all optional popup parameters', () => {
  expect(prepareParams({
    message: 'Message',
    buttons: [{ type: 'default', text: 'Wow!' }, { type: 'close' }],
  })).toStrictEqual(E.right({
    title: '',
    message: 'Message',
    buttons: [{ id: '', type: 'default', text: 'Wow!' }, { type: 'close', id: '' }],
  }));
});

```
---
## File: packages/sdk/src/features/Popup/prepareParams.ts

```typescript
import type { PopupParams, PopupButton } from '@tma.js/bridge';
import * as E from 'fp-ts/Either';

import { InvalidArgumentsError } from '@/errors.js';
import type { ShowOptions } from '@/features/Popup/types.js';

/**
 * Prepares popup parameters before sending them to native app.
 * @param params - popup parameters.
 */
export function prepareParams(params: ShowOptions): E.Either<InvalidArgumentsError, PopupParams> {
  const message = params.message.trim();
  const title = (params.title || '').trim();
  const paramsButtons = params.buttons || [];

  if (title.length > 64) {
    return E.left(new InvalidArgumentsError(`Invalid title: ${title}`));
  }
  if (!message || message.length > 256) {
    return E.left(new InvalidArgumentsError(`Invalid message: ${message}`));
  }
  if (paramsButtons.length > 3) {
    return E.left(new InvalidArgumentsError(`Invalid buttons count: ${paramsButtons.length}`));
  }

  const buttons: PopupButton[] = [];
  if (!paramsButtons.length) {
    buttons.push({ type: 'close', id: '' });
  } else {
    for (let i = 0; i < paramsButtons.length; i++) {
      const button = paramsButtons[i];
      const id = button.id || '';
      if (id.length > 64) {
        return E.left(new InvalidArgumentsError(`Button with index ${i} has invalid id: ${id}`));
      }

      if (!button.type || button.type === 'default' || button.type === 'destructive') {
        const text = button.text.trim();
        if (!text || text.length > 64) {
          return E.left(new InvalidArgumentsError(`Button with index ${i} has invalid text: ${text}`));
        }
        buttons.push({ type: button.type, text, id });
      } else {
        buttons.push({ type: button.type, id });
      }
    }
  }

  return E.right({ title, message, buttons });
}

```
---
## File: packages/sdk/src/features/Popup/types.ts

```typescript
import type { AsyncOptions } from '@/types.js';

/**
 * This object describes the native popup.
 * @see https://core.telegram.org/bots/webapps#popupparams
 */
export interface ShowOptions extends AsyncOptions {
  /**
   * The text to be displayed in the popup title, 0-64 characters.
   * @default ""
   */
  title?: string;
  /**
   * The message to be displayed in the body of the popup, 1-256 characters.
   */
  message: string;
  /**
   * List of buttons to be displayed in the popup, 1-3 buttons.
   * @default [{ type: 'close' }]
   */
  buttons?: ShowOptionsButton[];
}

/**
 * This object describes the native popup button.
 * @see https://core.telegram.org/bots/webapps#popupbutton
 */
export type ShowOptionsButton = {
  /**
   * Identifier of the button, 0-64 characters.
   * @default ""
   */
  id?: string;
} & (
  {
    /**
     * Type of the button:
     * - `default`, a button with the default style;
     * - `destructive`, a button with a style that indicates a destructive
     * action (e.g. "Remove", "Delete", etc.).
     *
     * @default "default"
     */
    type?: 'default' | 'destructive';
    /**
     * The text to be displayed on the button, 0-64 characters.
     */
    text: string;
  } | {
  /**
   * Type of the button:
   * - `ok`, a button with the localized text "OK";
   * - `close`, a button with the localized text "Close";
   * - `cancel`, a button with the localized text "Cancel".
   */
    type: 'ok' | 'close' | 'cancel';
  });

```
---
## File: packages/sdk/src/features/privacy/exports.ts

```typescript
export {
  type RequestContactError,
  type RequestedContactCompleteData,
  type RequestedContact,
  requestContact,
  requestContactComplete,
  requestContactCompleteFp,
  requestContactFp,
} from './requestContact.js';
export {
  type RequestPhoneAccessError,
  requestPhoneAccess,
  requestPhoneAccessFp,
} from './requestPhoneAccess.js';
export {
  requestWriteAccess,
  requestWriteAccessFp,
  type RequestWriteAccessError,
} from './requestWriteAccess.js';

```
---
## File: packages/sdk/src/features/privacy/requestContact.ts

```typescript
import * as TE from 'fp-ts/TaskEither';
import * as E from 'fp-ts/Either';
import { pipe } from 'fp-ts/function';
import {
  safeParse,
  pipe as valiPipe,
  date,
  looseObject,
  number,
  optional,
  string,
  transform,
} from 'valibot';
import { pipeJsonToSchema, pipeQueryToSchema } from '@tma.js/transformers';
import { PhoneRequestedStatus } from '@tma.js/bridge';
import { BetterTaskEither, type BetterTaskEitherError } from '@tma.js/toolkit';

import { type RequestPhoneAccessError, requestPhoneAccessFp } from './requestPhoneAccess.js';
import {
  sharedFeatureOptions,
  type SharedFeatureOptions,
} from '@/fn-options/sharedFeatureOptions.js';
import {
  withInvokeCustomMethod,
  type WithInvokeCustomMethod,
  InvokeCustomMethodError,
} from '@/fn-options/withInvokeCustomMethod.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';
import { withChecksFp } from '@/with-checks/withChecksFp.js';
import { AccessDeniedError, ValidationError } from '@/errors.js';
import type { AsyncOptions } from '@/types.js';
import { withVersion, type WithVersion } from '@/fn-options/withVersion.js';

/**
 * Requested contact information.
 */
export interface RequestedContact {
  contact: {
    user_id: number;
    phone_number: string;
    first_name: string;
    last_name?: string;
    [key: string]: unknown;
  };
  auth_date: Date;
  hash: string;
  [key: string]: unknown;
}

/**
 * Requested contact complete data.
 */
export interface RequestedContactCompleteData {
  /**
   * Raw original representation of the contact data returned from the Telegram server.
   */
  raw: string;
  /**
   * Parsed representation of the contact data.
   */
  parsed: RequestedContact;
}

interface CreateCompleteOptions extends SharedFeatureOptions, WithInvokeCustomMethod, WithVersion {
  requestPhoneAccess: (options?: AsyncOptions) => (
    TE.TaskEither<RequestPhoneAccessError, PhoneRequestedStatus>
  );
}

interface CreateParsedOptions extends SharedFeatureOptions, WithVersion {
  requestContact: (options?: AsyncOptions) => TE.TaskEither<RequestContactError, RequestedContact>;
}

export type RequestContactError =
  | InvokeCustomMethodError
  | AccessDeniedError
  | ValidationError
  | BetterTaskEitherError;

function createComplete({
  invokeCustomMethod,
  requestPhoneAccess,
  ...rest
}: CreateCompleteOptions) {
  type GetRequestedContactError = InvokeCustomMethodError | ValidationError;

  // Attempts to get previously requested contact.
  const getContact = (
    options?: AsyncOptions,
  ): TE.TaskEither<GetRequestedContactError, RequestedContactCompleteData | undefined> => {
    return pipe(
      invokeCustomMethod('getRequestedContact', {}, {
        ...options,
        timeout: (options || {}).timeout || 5000,
      }),
      TE.chainW(response => {
        const toStringResult = safeParse(string(), response);
        if (!toStringResult.success) {
          return TE.left(new ValidationError(response, toStringResult.issues));
        }

        if (!toStringResult.output) {
          return TE.right(undefined);
        }

        const toParsedResult = safeParse(
          pipeQueryToSchema(
            looseObject({
              contact: pipeJsonToSchema(looseObject({
                user_id: number(),
                phone_number: string(),
                first_name: string(),
                last_name: optional(string()),
              })),
              auth_date: valiPipe(
                string(),
                transform(input => new Date(Number(input) * 1000)),
                date(),
              ),
              hash: string(),
            }),
          ),
          toStringResult.output,
        );
        return toParsedResult.success
          ? TE.right({ raw: toStringResult.output, parsed: toParsedResult.output })
          : TE.left(new ValidationError(toStringResult.output, toParsedResult.issues));
      }),
    );
  };

  // Attempts to get previously requested contact, but ignores all errors except validation error.
  const getContactWithErrorsIgnore = (
    options?: AsyncOptions,
  ): TE.TaskEither<ValidationError, RequestedContactCompleteData | undefined> => {
    return pipe(
      getContact(options),
      TE.match(
        // All other errors except validation ones should be ignored. Receiving validation error
        // means that we have some data, but we are unable to parse it properly. So, there is no
        // need to make some more requests further, the problem is local.
        error => (ValidationError.is(error) ? E.left(error) : E.right(undefined)),
        contact => E.right(contact),
      ),
    );
  };

  // Polls previously requested contact with increasing timeout between requests.
  const pollContact = (ctx: {
    isRejected: boolean;
    rejectReason: unknown;
    abortSignal: AbortSignal;
  }): TE.TaskEither<BetterTaskEitherError | ValidationError, RequestedContactCompleteData> => {
    return BetterTaskEither<ValidationError, RequestedContactCompleteData>(
      async (res, rej, context) => {
        // Time to wait before executing the next request.
        let sleepTime = 50;

        // We are trying to retrieve the requested contact until the deadline was reached.
        while (!context.isRejected) {
          const result = await getContactWithErrorsIgnore(context)();
          if (result._tag === 'Left') {
            return rej(result.left);
          }
          if (result.right) {
            return res(result.right);
          }
          await new Promise(resolve => setTimeout(resolve, sleepTime));
          sleepTime += 50;
        }
      },
      ctx,
    );
  };

  return withChecksFp((
    options?: AsyncOptions,
  ): TE.TaskEither<RequestContactError, RequestedContactCompleteData> => {
    return BetterTaskEither.fn(context => {
      return pipe(
        // Try to get the requested contact. Probably, we already requested it before.
        getContactWithErrorsIgnore(context),
        TE.chain(contact => {
          if (contact) {
            return TE.right(contact);
          }
          return pipe(
            requestPhoneAccess(context),
            TE.chainW(status => {
              return status === 'sent'
                ? pollContact(context)
                : TE.left(new AccessDeniedError('User denied access'));
            }),
          );
        }),
      );
    }, options);
  }, { ...rest, returns: 'task', requires: 'web_app_request_phone' });
}

function createParsed({ requestContact, ...rest }: CreateParsedOptions) {
  return withChecksFp(
    requestContact,
    { ...rest, returns: 'task', requires: 'web_app_request_phone' },
  );
}

/**
 * Requests current user contact information.
 *
 * This function returns an object, containing both raw and parsed representations of a response,
 * received from the Telegram client.
 * @param options - additional options.
 * @since Mini Apps v6.9
 */
export const requestContactCompleteFp = createComplete({
  ...pipe(sharedFeatureOptions(), withInvokeCustomMethod, withVersion),
  requestPhoneAccess: requestPhoneAccessFp,
});

/**
 * @see requestContactCompleteFp
 */
export const requestContactComplete = throwifyWithChecksFp(requestContactCompleteFp);

/**
 * Works the same way as the `requestContactCompleteFp` function, but returns only parsed
 * representation of the contact data.
 * @see requestContactCompleteFp
 * @param options - additional options.
 * @since Mini Apps v6.9
 */
export const requestContactFp = createParsed({
  ...pipe(sharedFeatureOptions(), withVersion),
  requestContact(options) {
    return pipe(
      requestContactCompleteFp(options),
      TE.map(contact => contact.parsed),
    );
  },
});

/**
 * @see requestContactFp
 */
export const requestContact = throwifyWithChecksFp(requestContactFp);

```
---
## File: packages/sdk/src/features/privacy/requestPhoneAccess.ts

```typescript
import { pipe } from 'fp-ts/function';
import * as TE from 'fp-ts/TaskEither';
import type { PhoneRequestedStatus, RequestError } from '@tma.js/bridge';

import {
  sharedFeatureOptions,
  type SharedFeatureOptions,
} from '@/fn-options/sharedFeatureOptions.js';
import { withVersion, type WithVersion } from '@/fn-options/withVersion.js';
import { withChecksFp } from '@/with-checks/withChecksFp.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';
import { withRequest, type WithRequest } from '@/fn-options/withRequest.js';
import type { AsyncOptions } from '@/types.js';

interface CreateOptions extends SharedFeatureOptions, WithRequest, WithVersion {
}

export type RequestPhoneAccessError = RequestError;

function create({ request, ...rest }: CreateOptions) {
  return withChecksFp((
    options?: AsyncOptions,
  ): TE.TaskEither<RequestPhoneAccessError, PhoneRequestedStatus> => {
    return pipe(
      request('web_app_request_phone', 'phone_requested', options),
      TE.map(response => response.status),
    );
  }, { ...rest, requires: 'web_app_request_phone', returns: 'task' });
}

/**
 * Requests current user phone access. Method returns promise, which resolves
 * status of the request. In case, user accepted the request, Mini App bot will receive
 * the according notification.
 *
 * To obtain the retrieved information instead, utilize the `requestContact` method.
 * @param options - additional options.
 * @since Mini Apps v6.9
 * @see requestContact
 */
export const requestPhoneAccessFp = create(pipe(
  sharedFeatureOptions(),
  withVersion,
  withRequest,
));

/**
 * @see requestPhoneAccessFp
 */
export const requestPhoneAccess = throwifyWithChecksFp(requestPhoneAccessFp);

```
---
## File: packages/sdk/src/features/privacy/requestWriteAccess.ts

```typescript
import { pipe } from 'fp-ts/function';
import * as TE from 'fp-ts/TaskEither';
import type { WriteAccessRequestedStatus, RequestError } from '@tma.js/bridge';

import {
  sharedFeatureOptions,
  type SharedFeatureOptions,
} from '@/fn-options/sharedFeatureOptions.js';
import { withVersion, type WithVersion } from '@/fn-options/withVersion.js';
import { withChecksFp } from '@/with-checks/withChecksFp.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';
import { withRequest, type WithRequest } from '@/fn-options/withRequest.js';
import type { AsyncOptions } from '@/types.js';

interface CreateOptions extends SharedFeatureOptions, WithRequest, WithVersion {
}

export type RequestWriteAccessError = RequestError;

function create({ request, ...rest }: CreateOptions) {
  return withChecksFp((
    options?: AsyncOptions,
  ): TE.TaskEither<RequestWriteAccessError, WriteAccessRequestedStatus> => {
    return pipe(
      request('web_app_request_write_access', 'write_access_requested', options),
      TE.map(response => response.status),
    );
  }, { ...rest, requires: 'web_app_request_write_access', returns: 'task' });
}

/**
 * Requests write message access to the current user.
 * @param options - additional options.
 * @since Mini Apps v6.9
 */
export const requestWriteAccessFp = create(pipe(
  sharedFeatureOptions(),
  withVersion,
  withRequest,
));

/**
 * @see requestWriteAccessFp
 */
export const requestWriteAccess = throwifyWithChecksFp(requestWriteAccessFp);

```
---
## File: packages/sdk/src/features/QrScanner/exports.ts

```typescript
export { QrScanner, type QrScannerOptions } from './QrScanner.js';
export { qrScanner } from './instance.js';

```
---
## File: packages/sdk/src/features/QrScanner/instance.ts

```typescript
import { on } from '@tma.js/bridge';

import { QrScanner } from '@/features/QrScanner/QrScanner.js';
import { pipe } from 'fp-ts/function';
import { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';
import { withVersion } from '@/fn-options/withVersion.js';
import { withPostEvent } from '@/fn-options/withPostEvent.js';

export const qrScanner = new QrScanner({
  ...pipe(sharedFeatureOptions(), withPostEvent, withVersion),
  onClosed(listener) {
    return on('scan_qr_popup_closed', listener);
  },
  onTextReceived(listener) {
    return on('qr_text_received', event => {
      listener(event.data);
    });
  },
});

```
---
## File: packages/sdk/src/features/QrScanner/QrScanner.ts

```typescript
import { computed, type Computed, signal } from '@tma.js/signals';
import { createCbCollector, BetterTaskEither, type BetterTaskEitherError } from '@tma.js/toolkit';
import { BetterPromise } from 'better-promises';
import type { PostEventError } from '@tma.js/bridge';
import { pipe } from 'fp-ts/function';
import * as E from 'fp-ts/Either';
import * as TE from 'fp-ts/TaskEither';

import {
  createWithChecksFp,
  type WithChecks,
  type WithChecksFp,
} from '@/with-checks/withChecksFp.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';
import { createIsSupportedSignal } from '@/helpers/createIsSupportedSignal.js';
import type { AsyncOptions } from '@/types.js';
import type { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';
import { ConcurrentCallError } from '@/errors.js';
import type { WithVersion } from '@/fn-options/withVersion.js';
import type { WithPostEvent } from '@/fn-options/withPostEvent.js';

export interface QrScannerOptions extends WithVersion, WithPostEvent, SharedFeatureOptions {
  /**
   * A function to add a listener to the event determining if the QR scanner
   * was closed.
   * @param listener - a listener to add.
   * @returns A function to remove the listener.
   */
  onClosed: (listener: VoidFunction) => VoidFunction;
  /**
   * A function to add a listener to the event containing a scanned QR content.
   * @param listener - a listener to add.
   * @returns A function to remove the listener.
   */
  onTextReceived: (listener: (data: string) => void) => VoidFunction;
}

interface SharedOptions extends AsyncOptions {
  /**
   * Title to be displayed in the scanner.
   */
  text?: string;
}

interface CaptureOptions extends SharedOptions {
  /**
   * @returns True if the passed QR code should be captured.
   * @param qr - scanned QR content.
   */
  capture: (qr: string) => boolean;
}

interface OpenOptions extends SharedOptions {
  /**
   * Function which will be called if a QR code was scanned.
   * @param qr - scanned QR content.
   */
  onCaptured: (qr: string) => void;
}

/**
 * @since Mini Apps v6.4
 */
export class QrScanner {
  constructor({
    version,
    onClosed,
    onTextReceived,
    isTma,
    postEvent,
  }: QrScannerOptions) {
    const wrapOptions = { version, requires: 'web_app_open_scan_qr_popup', isTma } as const;
    const wrapSupportedEither = createWithChecksFp({ ...wrapOptions, returns: 'either' });
    const wrapSupportedTask = createWithChecksFp({ ...wrapOptions, returns: 'task' });

    const isOpened = signal(false);
    const toggleClosed = () => {
      isOpened.set(false);
    };

    this.isSupported = createIsSupportedSignal('web_app_open_scan_qr_popup', version);
    this.isOpened = computed(isOpened);

    this.captureFp = wrapSupportedTask(options => {
      let captured: string | undefined;
      return pipe(
        this.openFp({
          ...options,
          onCaptured: qr => {
            if (options.capture(qr)) {
              captured = qr;
              this.close();
            }
          },
        }),
        TE.map(() => captured),
      );
    });
    this.closeFp = wrapSupportedEither(() => {
      return pipe(postEvent('web_app_close_scan_qr_popup'), E.map(toggleClosed));
    });
    this.openFp = wrapSupportedTask(options => {
      return pipe(
        this.isOpened()
          ? TE.left(new ConcurrentCallError('The QR Scanner is already opened'))
          : async () => postEvent('web_app_open_scan_qr_popup', { text: options.text }),
        TE.chainW(() => {
          const [addToCleanup, cleanup] = createCbCollector();
          const withCleanup = <T>(value: T): T => {
            cleanup();
            return value;
          };

          return pipe(
            BetterTaskEither<never, void>(resolve => {
              addToCleanup(onClosed(resolve), onTextReceived(options.onCaptured));
            }, options),
            TE.mapBoth(withCleanup, withCleanup),
          );
        }),
      );
    });

    this.open = throwifyWithChecksFp(this.openFp);
    this.capture = throwifyWithChecksFp(this.captureFp);
    this.close = throwifyWithChecksFp(this.closeFp);
  }

  /**
   * Signal indicating if the scanner is currently opened.
   */
  readonly isOpened: Computed<boolean>;

  /**
   * Signal indicating if the component is supported.
   */
  readonly isSupported: Computed<boolean>;

  /**
   * Opens the scanner and returns a task which will be completed with the QR content if the
   * passed `capture` function returned true.
   *
   * Task may also be completed with undefined if the scanner was closed.
   * @param options - method options.
   * @returns A promise with QR content presented as string or undefined if the scanner was closed.
   * @since Mini Apps v6.4
   * @example
   * pipe(
   *   qrScanner.captureFp({
   *     capture(scannedQr) {
   *       return scannedQr === 'any expected by me qr';
   *     }
   *   }),
   *   TE.match(
   *     error => {
   *       console.error(error);
   *     },
   *     qr => {
   *       console.log('My QR:'), qr;
   *     }
   *   ),
   * );
   */
  readonly captureFp: WithChecksFp<
    (options: CaptureOptions) => (
      TE.TaskEither<PostEventError | BetterTaskEitherError, string | undefined>
    ),
    true
  >;

  /**
   * @see captureFp
   */
  readonly capture: WithChecks<
    (options: CaptureOptions) => BetterPromise<string | undefined>,
    true
  >;

  /**
   * Closes the scanner.
   * @since Mini Apps v6.4
   */
  readonly closeFp: WithChecksFp<() => E.Either<PostEventError, void>, true>;

  /**
   * @see close
   */
  readonly close: WithChecks<() => void, true>;

  /**
   * Opens the scanner and returns a task which will be completed when the scanner was closed.
   * @param options - method options.
   * @since Mini Apps v6.4
   * @example Without `capture` option
   * if (qrScanner.open.isAvailable()) {
   *   const qr = await qrScanner.open({ text: 'Scan any QR' });
   * }
   * @example
   * pipe(
   *   qrScanner.openFp({
   *     onCaptured(scannedQr) {
   *       if (scannedQr === 'any expected by me qr') {
   *         qrScanner.close();
   *       }
   *     }
   *   }),
   *   TE.match(
   *     error => {
   *       console.error(error);
   *     },
   *     () => {
   *       console.log('The scanner was closed');
   *     }
   *   ),
   * );
   */
  readonly openFp: WithChecksFp<
    (options: OpenOptions) => TE.TaskEither<PostEventError, void>,
    true
  >;

  /**
   * @see openFp
   */
  readonly open: WithChecks<(options: OpenOptions) => BetterPromise<void>, true>;
}

```
---
## File: packages/sdk/src/features/SecondaryButton/exports.ts

```typescript
export { secondaryButton } from './instance.js';
export {
  type SecondaryButtonOptions,
  SecondaryButton,
  type SecondaryButtonState,
} from './SecondaryButton.js';

```
---
## File: packages/sdk/src/features/SecondaryButton/instance.ts

```typescript
import { computed } from '@tma.js/signals';

import { SecondaryButton } from '@/features/SecondaryButton/SecondaryButton.js';
import { bottomButtonOptions } from '@/fn-options/bottomButtonOptions.js';
import { themeParams } from '@/features/ThemeParams/instance.js';
import { miniApp } from '@/features/MiniApp/instance.js';

export const secondaryButton = new SecondaryButton(
  bottomButtonOptions('secondaryButton', 'secondary_button_pressed', {
    bgColor: computed(() => miniApp.bottomBarColorRgb() || '#000000'),
    textColor: computed(() => themeParams.buttonColor() || '#2481cc'),
  }),
);

```
---
## File: packages/sdk/src/features/SecondaryButton/SecondaryButton.test.ts

```typescript
import { describe, expect, it, vi } from 'vitest';
import * as E from 'fp-ts/Either';

import {
  SecondaryButton,
  type SecondaryButtonOptions,
} from '@/features/SecondaryButton/SecondaryButton.js';
import { createComponentSessionStorage } from '@/helpers/component-storage.js';
import { createNoopComponentStorage } from '@test-utils/utils.js';
import { testIsSupportedPure } from '@test-utils/predefined/testIsSupportedPure.js';
import { testSafetyPure } from '@test-utils/predefined/testSafetyPure.js';
import { InstantiateOptions } from '@test-utils/types.js';

const MIN_VERSION = '7.10';

function instantiate({
  storage = false,
  version = MIN_VERSION,
  postEvent = () => E.right(undefined),
  isTma = true,
  onClick = () => () => undefined,
  offClick = () => undefined,
  isPageReload = false,
  defaults = {
    bgColor: '#000',
    textColor: '#fff',
  },
}: InstantiateOptions<SecondaryButtonOptions> = {}) {
  return new SecondaryButton({
    version,
    storage: typeof storage === 'boolean'
      ? storage
        ? createComponentSessionStorage('secondaryButton')
        : createNoopComponentStorage()
      : storage,
    postEvent,
    isTma,
    onClick,
    offClick,
    isPageReload,
    defaults,
  });
}

describe.each([
  ['show', (component: SecondaryButton) => component.show(), true],
  ['hide', (component: SecondaryButton) => component.hide(), true],
  ['setParams', (component: SecondaryButton) => component.setParams({}), true],
  ['mount', (component: SecondaryButton) => component.mount(), false],
  ['onClick', (component: SecondaryButton) => component.onClick(() => undefined), false],
  ['offClick', (component: SecondaryButton) => component.offClick(() => undefined), false],
  ['enable', (component: SecondaryButton) => component.enable(), true],
  ['disable', (component: SecondaryButton) => component.disable(), true],
  ['enableShineEffect', (component: SecondaryButton) => component.enableShineEffect(), true],
  ['disableShineEffect', (component: SecondaryButton) => component.disableShineEffect(), true],
  ['showLoader', (component: SecondaryButton) => component.showLoader(), true],
  ['hideLoader', (component: SecondaryButton) => component.hideLoader(), true],
  ['setText', (component: SecondaryButton) => component.setText('a'), true],
  ['setTextColor', (component: SecondaryButton) => component.setTextColor('#aaa'), true],
  ['setBgColor', (component: SecondaryButton) => component.setBgColor('#ddd'), true],
  ['setPosition', (component: SecondaryButton) => component.setPosition('right'), true],
] as const)('%s', (method, tryCall, requireMount) => {
  describe('safety', () => {
    testSafetyPure({
      instantiate,
      get: instance => instance[method],
      try: tryCall,
      minVersion: MIN_VERSION,
      mount: requireMount
        ? component => component.mount()
        : undefined,
    });
  });
});

describe.each([
  {
    method: 'hide',
    oppositeMethod: 'show',
    targetValue: false,
    property: 'isVisible',
    payloadProperty: 'is_visible',
  },
  {
    method: 'show',
    oppositeMethod: 'hide',
    targetValue: true,
    property: 'isVisible',
    payloadProperty: 'is_visible',
  },
  {
    method: 'enable',
    oppositeMethod: 'disable',
    targetValue: true,
    property: 'isEnabled',
    payloadProperty: 'is_active',
  },
  {
    method: 'disable',
    oppositeMethod: 'enable',
    targetValue: false,
    property: 'isEnabled',
    payloadProperty: 'is_active',
  },
  {
    method: 'enableShineEffect',
    oppositeMethod: 'disableShineEffect',
    targetValue: true,
    property: 'hasShineEffect',
    payloadProperty: 'has_shine_effect',
  },
  {
    method: 'disableShineEffect',
    oppositeMethod: 'enableShineEffect',
    targetValue: false,
    property: 'hasShineEffect',
    payloadProperty: 'has_shine_effect',
  },
  {
    method: 'showLoader',
    oppositeMethod: 'hideLoader',
    targetValue: true,
    property: 'isLoaderVisible',
    payloadProperty: 'is_progress_visible',
  },
  {
    method: 'hideLoader',
    oppositeMethod: 'showLoader',
    targetValue: false,
    property: 'isLoaderVisible',
    payloadProperty: 'is_progress_visible',
  },
] as const)('$method', ({ oppositeMethod, method, targetValue, property, payloadProperty }) => {
  it(`should set ${property} = ${targetValue}`, () => {
    const component = instantiate();
    component.mount();
    component[oppositeMethod]();
    expect(component[property]()).toBe(!targetValue);
    component[method]();
    expect(component[property]()).toBe(targetValue);
  });

  it(
    `should call postEvent with "web_app_setup_secondary_button" and { ${payloadProperty}: ${targetValue} }`,
    () => {
      const postEvent = vi.fn(() => E.right(undefined));
      const component = instantiate({ postEvent });
      component.mount();
      component[oppositeMethod]();
      postEvent.mockClear();
      component[method]();
      component[method]();
      component[method]();
      expect(postEvent).toBeCalledTimes(1);
      expect(postEvent).toBeCalledWith(
        'web_app_setup_secondary_button',
        expect.objectContaining({ [payloadProperty]: targetValue }),
      );
    },
  );

  it('should save the state using passed storage', () => {
    const set = vi.fn();
    const component = instantiate({
      storage: { get: () => undefined, set },
    });
    component.mount();
    component[oppositeMethod]();
    set.mockClear();
    component[method]();
    expect(set).toHaveBeenCalledOnce();
    expect(set).toHaveBeenCalledWith(expect.objectContaining({ [property]: targetValue }));
  });
});

describe.each([
  {
    method: 'setBgColor',
    property: 'bgColor',
    payloadProperty: 'color',
    usedValue: '#abc',
    use: (component: SecondaryButton) => component.setBgColor('#abc'),
  },
  {
    method: 'setTextColor',
    property: 'textColor',
    payloadProperty: 'text_color',
    usedValue: '#cba',
    use: (component: SecondaryButton) => component.setTextColor('#cba'),
  },
  {
    method: 'setText',
    property: 'text',
    payloadProperty: 'text',
    usedValue: 'Some text',
    use: (component: SecondaryButton) => component.setText('Some text'),
  },
  {
    method: 'setPosition',
    property: 'position',
    payloadProperty: 'position',
    usedValue: 'right',
    use: (component: SecondaryButton) => component.setPosition('right'),
  },
] as const)('$method', ({ property, payloadProperty, usedValue, use }) => {
  it(`should set ${property}`, () => {
    const component = instantiate();
    component.mount();
    use(component);
    expect(component[property]()).toBe(usedValue);
  });

  it(
    `should call postEvent with "web_app_setup_secondary_button" and { ${payloadProperty}: {{value}} }`,
    () => {
      const postEvent = vi.fn(() => E.right(undefined));
      const component = instantiate({ postEvent });
      component.mount();
      use(component);
      use(component);
      use(component);
      expect(postEvent).toBeCalledTimes(1);
      expect(postEvent).toBeCalledWith(
        'web_app_setup_secondary_button', expect.objectContaining({ [payloadProperty]: usedValue }),
      );
    },
  );

  it('should save the state using passed storage', () => {
    const set = vi.fn();
    const component = instantiate({
      storage: { get: () => undefined, set },
    });
    component.mount();
    use(component);
    expect(set).toHaveBeenCalledOnce();
    expect(set).toHaveBeenCalledWith(expect.objectContaining({ [property]: usedValue }));
  });
});

describe('onClick', () => {
  it('should return result of passed onClick from options', () => {
    const offClick = () => undefined;
    const onClick = vi.fn(() => offClick);
    const listener = vi.fn();
    expect(instantiate({ onClick }).onClick(listener, true)).toBe(offClick);
    expect(onClick).toHaveBeenCalledOnce();
    expect(onClick).toHaveBeenCalledWith(listener, true);
  });
});

describe('offClick', () => {
  it('should use passed offClick from options', () => {
    const offClick = vi.fn(() => undefined);
    const listener = vi.fn();
    instantiate({ offClick }).offClick(listener, true);
    expect(offClick).toHaveBeenCalledOnce();
    expect(offClick).toHaveBeenCalledWith(listener, true);
  });
});

describe('mount', () => {
  it('should set isMounted = true', () => {
    const component = instantiate();
    expect(component.isMounted()).toBe(false);
    component.mount();
    expect(component.isMounted()).toBe(true);
  });

  describe('no page reload', () => {
    it('should not use value from the storage', () => {
      const get = vi.fn(() => ({
        isVisible: true,
        position: 'left',
        bgColor: '#123',
        hasShineEffect: false,
        isEnabled: true,
        isLoaderVisible: false,
        text: 'Text',
        textColor: '#112',
      } as const));
      const component = instantiate({ storage: { get, set: vi.fn() } });
      component.mount();
      expect(get).not.toHaveBeenCalled();
    });
  });

  describe('page reload', () => {
    it('should extract state from storage', () => {
      const get = vi.fn();
      const component = instantiate({
        storage: { get, set: vi.fn() },
        isPageReload: true,
      });
      component.mount();
      expect(get).toHaveBeenCalledOnce();

      const get2 = vi.fn(() => ({
        isVisible: true,
        position: 'left',
        bgColor: '#123',
        hasShineEffect: false,
        isEnabled: true,
        isLoaderVisible: false,
        text: 'Text',
        textColor: '#112',
      } as const));
      const component2 = instantiate({
        storage: { get: get2, set: vi.fn() },
        isPageReload: true,
      });
      component2.mount();
      expect(get2).toHaveBeenCalledOnce();
    });
  });
});

describe('unmount', () => {
  it('should set isMounted = false', () => {
    const component = instantiate();
    expect(component.isMounted()).toBe(false);
    component.mount();
    expect(component.isMounted()).toBe(true);
    component.unmount();
    expect(component.isMounted()).toBe(false);
  });
});

describe('isSupported', () => {
  testIsSupportedPure(version => instantiate({ isTma: true, version }), MIN_VERSION);
});

```
---
## File: packages/sdk/src/features/SecondaryButton/SecondaryButton.ts

```typescript
import { computed, type Computed } from '@tma.js/signals';
import type { RGB } from '@tma.js/types';
import type { PostEventError, SecondaryButtonPosition } from '@tma.js/bridge';
import * as E from 'fp-ts/Either';

import type { WithChecks, WithChecksFp } from '@/with-checks/withChecksFp.js';
import { Button, type ButtonOptions } from '@/composables/Button.js';
import type { MaybeAccessor } from '@/types.js';
import { access } from '@/helpers/access.js';
import { createIsSupportedSignal } from '@/helpers/createIsSupportedSignal.js';

type SecondaryButtonEither = E.Either<PostEventError, void>;

export interface SecondaryButtonState {
  isVisible: boolean;
  bgColor?: RGB;
  hasShineEffect: boolean;
  isEnabled: boolean;
  isLoaderVisible: boolean;
  text: string;
  textColor?: RGB;
  position: SecondaryButtonPosition;
}

export interface SecondaryButtonOptions extends Omit<
  ButtonOptions<SecondaryButtonState, 'web_app_setup_secondary_button'>,
  'initialState' | 'method' | 'payload'
> {
  /**
   * Default values for different kinds of the button properties.
   */
  defaults: {
    bgColor: MaybeAccessor<RGB>;
    textColor: MaybeAccessor<RGB>;
  };
}

/**
 * @since Mini Apps v7.10
 */
export class SecondaryButton {
  constructor({ defaults, ...options }: SecondaryButtonOptions) {
    const button = new Button({
      ...options,
      initialState: {
        hasShineEffect: false,
        isEnabled: true,
        isLoaderVisible: false,
        isVisible: false,
        text: 'Cancel',
        position: 'left',
      },
      method: 'web_app_setup_secondary_button',
      payload: state => ({
        has_shine_effect: state.hasShineEffect,
        is_visible: state.isVisible,
        is_active: state.isEnabled,
        is_progress_visible: state.isLoaderVisible,
        text: state.text,
        color: state.bgColor,
        text_color: state.textColor,
        position: state.position,
      }),
    });

    const withDefault = (
      field: 'bgColor' | 'textColor',
      getDefault: MaybeAccessor<RGB>,
    ) => {
      const fromState = button.stateGetter(field);
      return computed(() => fromState() || access(getDefault));
    };

    this.isSupported = createIsSupportedSignal('web_app_setup_secondary_button', options.version);
    this.bgColor = withDefault('bgColor', defaults.bgColor);
    this.textColor = withDefault('textColor', defaults.textColor);
    this.position = button.stateGetter('position');
    this.hasShineEffect = button.stateGetter('hasShineEffect');
    this.isEnabled = button.stateGetter('isEnabled');
    this.isLoaderVisible = button.stateGetter('isLoaderVisible');
    this.text = button.stateGetter('text');
    this.isVisible = button.stateGetter('isVisible');
    this.isMounted = button.isMounted;
    this.state = button.state;

    [this.setPosition, this.setPositionFp] = button.stateSetters('position');
    [this.setBgColor, this.setBgColorFp] = button.stateSetters('bgColor');
    [this.setTextColor, this.setTextColorFp] = button.stateSetters('textColor');
    [
      [this.disableShineEffect, this.disableShineEffectFp],
      [this.enableShineEffect, this.enableShineEffectFp],
    ] = button.stateBoolSetters('hasShineEffect');
    [
      [this.disable, this.disableFp],
      [this.enable, this.enableFp],
    ] = button.stateBoolSetters('isEnabled');
    [
      [this.hideLoader, this.hideLoaderFp],
      [this.showLoader, this.showLoaderFp],
    ] = button.stateBoolSetters('isLoaderVisible');

    [this.setText, this.setTextFp] = button.stateSetters('text');
    [[this.hide, this.hideFp], [this.show, this.showFp]] = button.stateBoolSetters('isVisible');
    this.setParams = button.setState;
    this.setParamsFp = button.setStateFp;
    this.onClick = button.onClick;
    this.onClickFp = button.onClickFp;
    this.offClick = button.offClick;
    this.offClickFp = button.offClickFp;
    this.mount = button.mount;
    this.mountFp = button.mountFp;
    this.unmount = button.unmount;
  }

  //#region Properties.
  /**
   * Signal indicating if the component is supported.
   */
  readonly isSupported: Computed<boolean>;

  /**
   * The button position relative to the main one.
   */
  readonly position: Computed<SecondaryButtonPosition>;

  /**
   * The button background color.
   */
  readonly bgColor: Computed<RGB>;

  /**
   * True if the button has a shining effect.
   */
  readonly hasShineEffect: Computed<boolean>;

  /**
   * True if the button is clickable.
   */
  readonly isEnabled: Computed<boolean>;

  /**
   * True if the button loader is visible.
   */
  readonly isLoaderVisible: Computed<boolean>;

  /**
   * True if the button is visible.
   */
  readonly isVisible: Computed<boolean>;

  /**
   * Signal indicating if the component is currently mounted.
   */
  readonly isMounted: Computed<boolean>;

  /**
   * The complete button state.
   */
  readonly state: Computed<SecondaryButtonState>;

  /**
   * The button displayed text.
   */
  readonly text: Computed<string>;

  /**
   * The button text color.
   *
   * Note that this value is computed based on the external defaults. For
   * example, if not explicitly set, this value may be equal to one of theme
   * params colors.
   */
  readonly textColor: Computed<RGB>;
  //#endregion

  //#region Methods.
  /**
   * Shows the button.
   * @since Mini Apps v7.10
   */
  readonly showFp: WithChecksFp<() => SecondaryButtonEither, true>;

  /**
   * @see showFp
   */
  readonly show: WithChecks<() => void, true>;

  /**
   * Hides the button.
   * @since Mini Apps v7.10
   */
  readonly hideFp: WithChecksFp<() => SecondaryButtonEither, true>;

  /**
   * @see hideFp
   */
  readonly hide: WithChecks<() => void, true>;

  /**
   * Enables the button.
   * @since Mini Apps v7.10
   */
  readonly enableFp: WithChecksFp<() => SecondaryButtonEither, true>;

  /**
   * @see enableFp
   */
  readonly enable: WithChecks<() => void, true>;

  /**
   * Enables the button.
   * @since Mini Apps v7.10
   */
  readonly enableShineEffectFp: WithChecksFp<() => SecondaryButtonEither, true>;

  /**
   * @see enableShineEffectFp
   */
  readonly enableShineEffect: WithChecks<() => void, true>;

  /**
   * Disables the button.
   * @since Mini Apps v7.10
   */
  readonly disableFp: WithChecksFp<() => SecondaryButtonEither, true>;

  /**
   * @see disableFp
   */
  readonly disable: WithChecks<() => void, true>;

  /**
   * Enables the button.
   * @since Mini Apps v7.10
   */
  readonly disableShineEffectFp: WithChecksFp<() => SecondaryButtonEither, true>;

  /**
   * @see disableShineEffectFp
   */
  readonly disableShineEffect: WithChecks<() => void, true>;

  /**
   * Updates the button background color.
   * @since Mini Apps v7.10
   */
  readonly setBgColorFp: WithChecksFp<(value: RGB) => SecondaryButtonEither, true>;

  /**
   * @see setBgColorFp
   */
  readonly setBgColor: WithChecks<(value: RGB) => void, true>;

  /**
   * Updates the button text color.
   * @since Mini Apps v7.10
   */
  readonly setTextColorFp: WithChecksFp<(value: RGB) => SecondaryButtonEither, true>;

  /**
   * @see setTextColorFp
   */
  readonly setTextColor: WithChecks<(value: RGB) => void, true>;

  /**
   * Updates the button text.
   * @since Mini Apps v7.10
   */
  readonly setTextFp: WithChecksFp<(value: string) => SecondaryButtonEither, true>;

  /**
   * @see setTextFp
   */
  readonly setText: WithChecks<(value: string) => void, true>;

  /**
   * Updates the button position.
   * @since Mini Apps v7.10
   */
  readonly setPositionFp: WithChecksFp<
    (position: SecondaryButtonPosition) => SecondaryButtonEither,
    true
  >;

  /**
   * @see setPositionFp
   */
  readonly setPosition: WithChecks<(position: SecondaryButtonPosition) => void, true>;

  /**
   * Shows the button loader.
   * @since Mini Apps v7.10
   */
  readonly showLoaderFp: WithChecksFp<() => SecondaryButtonEither, true>;

  /**
   * @see showLoaderFp
   */
  readonly showLoader: WithChecks<() => void, true>;

  /**
   * Hides the button loader.
   * @since Mini Apps v7.10
   */
  readonly hideLoaderFp: WithChecksFp<() => SecondaryButtonEither, true>;

  /**
   * @see hideLoaderFp
   */
  readonly hideLoader: WithChecks<() => void, true>;

  /**
   * Updates the button state.
   * @param state - updates to apply.
   * @since Mini Apps v7.10
   * @example
   * button.setParams({
   *   text: 'Submit',
   *   isEnabled: true,
   *   hasShineEffect: true,
   * });
   */
  readonly setParamsFp: WithChecksFp<
    (state: Partial<SecondaryButtonState>) => SecondaryButtonEither,
    true
  >;

  /**
   * @see setParamsFp
   */
  readonly setParams: WithChecks<(state: Partial<SecondaryButtonState>) => void, true>;

  /**
   * Mounts the component restoring its state.
   * @since Mini Apps v7.10
   */
  readonly mountFp: WithChecksFp<() => void, true>;

  /**
   * @see mountFp
   */
  readonly mount: WithChecks<() => void, true>;

  /**
   * Unmounts the component.
   */
  readonly unmount: () => void;

  /**
   * Adds a new button listener.
   * @param listener - event listener.
   * @param once - should the listener be called only once.
   * @returns A function to remove bound listener.
   * @since Mini Apps v7.10
   * @example
   * const off = button.onClick(() => {
   *   console.log('User clicked the button');
   *   off();
   * });
   */
  readonly onClickFp: WithChecksFp<(listener: VoidFunction, once?: boolean) => VoidFunction, true>;

  /**
   * @see onClick
   */
  readonly onClick: WithChecks<(listener: VoidFunction, once?: boolean) => VoidFunction, true>;

  /**
   * Removes the button click listener.
   * @param listener - event listener.
   * @param once - should the listener be called only once.
   * @since Mini Apps v7.10
   * @example
   * function listener() {
   *   console.log('User clicked the button');
   *   button.offClick(listener);
   * }
   * button.onClick(listener);
   */
  readonly offClickFp: WithChecksFp<(listener: VoidFunction, once?: boolean) => void, true>;

  /**
   * @see offClick
   */
  readonly offClick: WithChecks<(listener: VoidFunction, once?: boolean) => void, true>;
  //#endregion
}

```
---
## File: packages/sdk/src/features/SettingsButton/exports.ts

```typescript
export { settingsButton } from './instance.js';
export {
  type SettingsButtonOptions,
  SettingsButton,
  type SettingsButtonState,
} from './SettingsButton.js';

```
---
## File: packages/sdk/src/features/SettingsButton/instance.ts

```typescript
import { SettingsButton } from '@/features/SettingsButton/SettingsButton.js';
import { buttonOptions } from '@/fn-options/buttonOptions.js';

export const settingsButton = new SettingsButton(
  buttonOptions('settingsButton', 'settings_button_pressed'),
);

```
---
## File: packages/sdk/src/features/SettingsButton/SettingsButton.test.ts

```typescript
import { describe, expect, it, vi } from 'vitest';
import * as E from 'fp-ts/Either';

import {
  SettingsButton,
  type SettingsButtonOptions,
} from '@/features/SettingsButton/SettingsButton.js';
import { createComponentSessionStorage } from '@/helpers/component-storage.js';
import { createNoopComponentStorage } from '@test-utils/utils.js';
import { testIsSupportedPure } from '@test-utils/predefined/testIsSupportedPure.js';
import { testSafetyPure } from '@test-utils/predefined/testSafetyPure.js';
import { InstantiateOptions } from '@test-utils/types.js';

const MIN_VERSION = '6.10';

function instantiate({
  storage = false,
  version = MIN_VERSION,
  postEvent = () => E.right(undefined),
  isTma = true,
  onClick = () => () => undefined,
  offClick = () => undefined,
  isPageReload = false,
}: InstantiateOptions<SettingsButtonOptions> = {}) {
  return new SettingsButton({
    version,
    storage: typeof storage === 'boolean'
      ? storage
        ? createComponentSessionStorage('settingsButton')
        : createNoopComponentStorage()
      : storage,
    postEvent,
    isTma,
    onClick,
    offClick,
    isPageReload,
  });
}

describe.each([
  ['hide', (component: SettingsButton) => component.hide(), true],
  ['show', (component: SettingsButton) => component.show(), true],
  ['mount', (component: SettingsButton) => component.mount(), false],
  ['onClick', (component: SettingsButton) => component.onClick(() => undefined), false],
  ['offClick', (component: SettingsButton) => component.offClick(() => undefined), false],
] as const)('%s', (method, tryCall, requireMount) => {
  describe('safety', () => {
    testSafetyPure({
      instantiate,
      get: instance => instance[method],
      try: tryCall,
      minVersion: MIN_VERSION,
      mount: requireMount
        ? component => component.mount()
        : undefined,
    });
  });
});

describe.each([
  ['hide', false, 'show'],
  ['show', true, 'hide'],
] as const)('%s', (method, targetIsVisible, oppositeMethod) => {
  it(`should set isVisible = ${targetIsVisible}`, () => {
    const component = instantiate();
    component.mount();
    component[oppositeMethod]();
    expect(component.isVisible()).toBe(!targetIsVisible);
    component[method]();
    expect(component.isVisible()).toBe(targetIsVisible);
  });

  it(
    `should call postEvent with "web_app_setup_settings_button" and { is_visible: ${targetIsVisible} }`,
    () => {
      const postEvent = vi.fn(() => E.right(undefined));
      const component = instantiate({ postEvent });
      component.mount();
      component[oppositeMethod]();
      postEvent.mockClear();
      component[method]();
      component[method]();
      component[method]();
      expect(postEvent).toBeCalledTimes(1);
      expect(postEvent)
        .toBeCalledWith('web_app_setup_settings_button', { is_visible: targetIsVisible });
    },
  );

  it('should save the state using passed storage', () => {
    const set = vi.fn();
    const component = instantiate({
      storage: { get: () => undefined, set },
    });
    component.mount();
    component[oppositeMethod]();
    set.mockClear();
    component[method]();
    expect(set).toHaveBeenCalledOnce();
    expect(set).toHaveBeenCalledWith({ isVisible: targetIsVisible });
  });
});

describe('onClick', () => {
  it('should return result of passed onClick from options', () => {
    const offClick = () => undefined;
    const onClick = vi.fn(() => offClick);
    const listener = vi.fn();
    expect(instantiate({ onClick }).onClick(listener, true)).toBe(offClick);
    expect(onClick).toHaveBeenCalledOnce();
    expect(onClick).toHaveBeenCalledWith(listener, true);
  });
});

describe('offClick', () => {
  it('should use passed offClick from options', () => {
    const offClick = vi.fn(() => undefined);
    const listener = vi.fn();
    instantiate({ offClick }).offClick(listener, true);
    expect(offClick).toHaveBeenCalledOnce();
    expect(offClick).toHaveBeenCalledWith(listener, true);
  });
});

describe('mount', () => {
  it('should set isMounted = true', () => {
    const component = instantiate();
    expect(component.isMounted()).toBe(false);
    component.mount();
    expect(component.isMounted()).toBe(true);
  });

  describe('no page reload', () => {
    it('should not use value from the storage', () => {
      const get = vi.fn(() => ({ isVisible: true }));
      const component = instantiate({ storage: { get, set: vi.fn() } });
      component.mount();
      expect(get).not.toHaveBeenCalled();
    });
  });

  describe('page reload', () => {
    it('should extract state from storage', () => {
      const get = vi.fn();
      const component = instantiate({
        storage: { get, set: vi.fn() },
        isPageReload: true,
      });
      component.mount();
      expect(get).toHaveBeenCalledOnce();

      const get2 = vi.fn(() => ({ isVisible: true }));
      const component2 = instantiate({
        storage: { get: get2, set: vi.fn() },
        isPageReload: true,
      });
      component2.mount();
      expect(get2).toHaveBeenCalledOnce();
    });
  });
});

describe('unmount', () => {
  it('should set isMunted = false', () => {
    const component = instantiate();
    expect(component.isMounted()).toBe(false);
    component.mount();
    expect(component.isMounted()).toBe(true);
    component.unmount();
    expect(component.isMounted()).toBe(false);
  });
});

describe('isSupported', () => {
  testIsSupportedPure(version => instantiate({ isTma: true, version }), MIN_VERSION);
});

```
---
## File: packages/sdk/src/features/SettingsButton/SettingsButton.ts

```typescript
import type { Computed } from '@tma.js/signals';
import * as E from 'fp-ts/Either';
import type { PostEventError } from '@tma.js/bridge';

import { Button, type ButtonOptions } from '@/composables/Button.js';
import type { WithChecksFp, WithChecks } from '@/with-checks/withChecksFp.js';

export interface SettingsButtonState {
  isVisible: boolean;
}

export type SettingsButtonOptions = Omit<
  ButtonOptions<SettingsButtonState, 'web_app_setup_settings_button'>,
  'method' | 'payload' | 'initialState'
>;

/**
 * @since Mini Apps v6.10
 */
export class SettingsButton {
  constructor(options: SettingsButtonOptions) {
    const button = new Button({
      ...options,
      method: 'web_app_setup_settings_button',
      payload: state => ({ is_visible: state.isVisible }),
      initialState: { isVisible: false },
    });

    this.isVisible = button.stateGetter('isVisible');
    this.isMounted = button.isMounted;
    this.isSupported = button.isSupported;
    [[this.hide, this.hideFp], [this.show, this.showFp]] = button.stateBoolSetters('isVisible');
    this.onClick = button.onClick;
    this.onClickFp = button.onClickFp;
    this.offClick = button.offClick;
    this.offClickFp = button.offClickFp;
    this.mount = button.mount;
    this.mountFp = button.mountFp;
    this.unmount = button.unmount;
  }

  /**
   * Signal indicating if the component is currently visible.
   */
  readonly isVisible: Computed<boolean>;

  /**
   * Signal indicating if the component is currently mounted.
   */
  readonly isMounted: Computed<boolean>;

  /**
   * Signal indicating if the component is supported.
   */
  readonly isSupported: Computed<boolean>;

  /**
   * Hides the button.
   * @since Mini Apps v6.10
   */
  readonly hideFp: WithChecksFp<() => E.Either<PostEventError, void>, true>;

  /**
   * @see hideFp
   */
  readonly hide: WithChecks<() => void, true>;

  /**
   * Shows the button.
   * @since Mini Apps v6.10
   */
  readonly showFp: WithChecksFp<() => E.Either<PostEventError, void>, true>;

  /**
   * @see showFp
   */
  readonly show: WithChecks<() => void, true>;

  /**
   * Adds a new button listener.
   * @param listener - event listener.
   * @param once - should the listener be called only once.
   * @returns A function to remove bound listener.
   * @since Mini Apps v6.10
   * @example
   * const off = button.onClick(() => {
   *   console.log('User clicked the button');
   *   off();
   * });
   */
  readonly onClickFp: WithChecksFp<
    (listener: VoidFunction, once?: boolean) => VoidFunction,
    true
  >;

  /**
   * @see onClickFp
   */
  readonly onClick: WithChecks<(listener: VoidFunction, once?: boolean) => VoidFunction, true>;

  /**
   * Removes the button click listener.
   * @param listener - event listener.
   * @param once - should the listener be called only once.
   * @since Mini Apps v6.10
   * @example
   * function listener() {
   *   console.log('User clicked the button');
   *   button.offClick(listener);
   * }
   * button.onClick(listener);
   */
  readonly offClickFp: WithChecksFp<
    (listener: VoidFunction, once?: boolean) => void,
    true
  >;

  /**
   * @see offClickFp
   */
  readonly offClick: WithChecks<(listener: VoidFunction, once?: boolean) => void, true>;

  /**
   * Mounts the component restoring its state.
   * @since Mini Apps v6.10
   */
  readonly mountFp: WithChecksFp<() => void, true>;

  /**
   * @see mountFp
   */
  readonly mount: WithChecks<() => void, true>;

  /**
   * Unmounts the component.
   *
   * Note that this function does not remove listeners added via the `onClick`
   * function, so you have to remove them on your own.
   * @see onClick
   */
  readonly unmount: () => void;
}

```
---
## File: packages/sdk/src/features/SwipeBehavior/exports.ts

```typescript
export { swipeBehavior } from './instance.js';
export {
  type SwipeBehaviorOptions,
  SwipeBehavior,
  type SwipeBehaviorState,
} from './SwipeBehavior.js';

```
---
## File: packages/sdk/src/features/SwipeBehavior/instance.ts

```typescript
import { pipe } from 'fp-ts/function';

import { SwipeBehavior, type SwipeBehaviorState } from '@/features/SwipeBehavior/SwipeBehavior.js';
import { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';
import { withStateRestore } from '@/fn-options/withStateRestore.js';
import { withVersion } from '@/fn-options/withVersion.js';
import { withPostEvent } from '@/fn-options/withPostEvent.js';

export const swipeBehavior = new SwipeBehavior(pipe(
  sharedFeatureOptions(),
  withPostEvent,
  withVersion,
  withStateRestore<SwipeBehaviorState>('swipeBehavior'),
));

```
---
## File: packages/sdk/src/features/SwipeBehavior/SwipeBehavior.test.ts

```typescript
import { describe, expect, it, vi } from 'vitest';
import * as E from 'fp-ts/Either';
import type { PostEventFpFn } from '@tma.js/bridge';
import type { Version } from '@tma.js/types';

import { SwipeBehavior } from '@/features/SwipeBehavior/SwipeBehavior.js';
import { type ComponentStorage, createComponentSessionStorage } from '@/helpers/component-storage.js';
import { createNoopComponentStorage } from '@test-utils/utils.js';
import { testSafetyPure } from '@test-utils/predefined/testSafetyPure.js';

function instantiate({
  version = '100',
  isPageReload = false,
  storage = false,
  postEvent = () => E.right(undefined),
  isTma = true,
}: {
  isPageReload?: boolean;
  version?: Version;
  storage?: boolean | ComponentStorage<{ isVerticalEnabled: boolean }>;
  postEvent?: PostEventFpFn;
  isTma?: boolean;
} = {}) {
  return new SwipeBehavior({
    storage: typeof storage === 'boolean'
      ? storage
        ? createComponentSessionStorage('swipeBehavior')
        : createNoopComponentStorage()
      : storage,
    version,
    isPageReload,
    postEvent,
    isTma,
  });
}

describe.each([
  ['disableVertical', (component: SwipeBehavior) => component.disableVertical(), true],
  ['enableVertical', (component: SwipeBehavior) => component.enableVertical(), true],
  ['mount', (component: SwipeBehavior) => component.mount(), false],
] as const)('%s', (method, tryCall, requireMount) => {
  describe('safety', () => {
    testSafetyPure({
      instantiate,
      get: instance => instance[method],
      minVersion: '7.7',
      try: tryCall,
      mount: requireMount
        ? component => component.mount()
        : undefined,
    });
  });
});

describe.each([
  ['disableVertical', false, 'enableVertical'],
  ['enableVertical', true, 'disableVertical'],
] as const)('%s', (method, targetValue, oppositeMethod) => {
  it(`should set isVerticalEnabled = ${targetValue}`, () => {
    const component = instantiate();
    component.mount();
    component[oppositeMethod]();
    expect(component.isVerticalEnabled()).toBe(!targetValue);
    component[method]();
    expect(component.isVerticalEnabled()).toBe(targetValue);
  });

  it(
    `should call postEvent with "web_app_setup_swipe_behavior" and { allow_vertical_swipe: ${targetValue} }`,
    () => {
      const postEvent = vi.fn(() => E.right(undefined));
      const component = instantiate({ postEvent });
      component.mount();
      component[oppositeMethod]();
      postEvent.mockClear();
      component[method]();
      component[method]();
      component[method]();
      expect(postEvent).toBeCalledTimes(1);
      expect(postEvent)
        .toBeCalledWith('web_app_setup_swipe_behavior', { allow_vertical_swipe: targetValue });
    },
  );

  it('should save the state using passed storage', () => {
    const set = vi.fn();
    const component = instantiate({
      storage: { get: () => undefined, set },
    });
    component.mount();
    component[oppositeMethod]();
    set.mockClear();
    component[method]();
    expect(set).toHaveBeenCalledOnce();
    expect(set).toHaveBeenCalledWith({ isVerticalEnabled: targetValue });
  });
});

describe('mount', () => {
  it('should set isMounted = true', () => {
    const component = instantiate();
    expect(component.isMounted()).toBe(false);
    component.mount();
    expect(component.isMounted()).toBe(true);
  });

  describe('no page reload', () => {
    it('should not use value from the storage', () => {
      const get = vi.fn(() => ({ isVerticalEnabled: true }));
      const component = instantiate({ storage: { get, set: vi.fn() } });
      component.mount();
      expect(get).not.toHaveBeenCalled();
    });
  });

  describe('page reload', () => {
    it('should extract state from storage', () => {
      const get = vi.fn();
      const component = instantiate({
        storage: { get, set: vi.fn() },
        isPageReload: true,
      });
      component.mount();
      expect(get).toHaveBeenCalledOnce();

      const get2 = vi.fn(() => ({ isVerticalEnabled: true }));
      const component2 = instantiate({
        storage: { get: get2, set: vi.fn() },
        isPageReload: true,
      });
      component2.mount();
      expect(get2).toHaveBeenCalledOnce();
    });
  });
});

describe('unmount', () => {
  it('should set isMounted = false', () => {
    const component = instantiate();
    expect(component.isMounted()).toBe(false);
    component.mount();
    expect(component.isMounted()).toBe(true);
    component.unmount();
    expect(component.isMounted()).toBe(false);
  });
});

```
---
## File: packages/sdk/src/features/SwipeBehavior/SwipeBehavior.ts

```typescript
import type { PostEventError } from '@tma.js/bridge';
import type { Computed } from '@tma.js/signals';
import * as E from 'fp-ts/Either';
import { pipe } from 'fp-ts/function';

import { Mountable } from '@/composables/Mountable.js';
import { Stateful } from '@/composables/Stateful.js';
import type { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';
import type { WithPostEvent } from '@/fn-options/withPostEvent.js';
import type { WithStateRestore } from '@/fn-options/withStateRestore.js';
import type { WithVersion } from '@/fn-options/withVersion.js';
import { createIsSupportedSignal } from '@/helpers/createIsSupportedSignal.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';
import { createWithChecksFp, type WithChecks, type WithChecksFp } from '@/with-checks/withChecksFp.js';

export interface SwipeBehaviorState {
  isVerticalEnabled: boolean;
}

export interface SwipeBehaviorOptions
  extends WithStateRestore<SwipeBehaviorState>,
  WithVersion,
  WithPostEvent,
  SharedFeatureOptions {
}

/**
 * @since Mini Apps v7.7
 */
export class SwipeBehavior {
  constructor({ postEvent, storage, isTma, isPageReload, version }: SwipeBehaviorOptions) {
    const initialState = { isVerticalEnabled: true };
    const stateful = new Stateful({
      initialState,
      onChange(state) {
        storage.set(state);
      },
    });
    const mountable = new Mountable({
      initialState,
      isPageReload,
      onMounted: stateful.setState,
      restoreState: storage.get,
    });

    const wrapOptions = { requires: 'web_app_setup_swipe_behavior', isTma, version } as const;
    const wrapSupportedPlain = createWithChecksFp({
      ...wrapOptions,
      returns: 'plain',
    });
    const wrapMountedEither = createWithChecksFp({
      ...wrapOptions,
      isMounted: mountable.isMounted,
      returns: 'either',
    });

    const setVerticalEnabled = (isVerticalEnabled: boolean) => {
      const update = { isVerticalEnabled };
      if (!stateful.hasDiff(update)) {
        return E.right(undefined);
      }
      return pipe(
        postEvent('web_app_setup_swipe_behavior', { allow_vertical_swipe: isVerticalEnabled }),
        E.map(() => {
          stateful.setState(update);
        }),
      );
    };

    this.isSupported = createIsSupportedSignal('web_app_setup_swipe_behavior', version);
    this.isVerticalEnabled = stateful.getter('isVerticalEnabled');
    this.isMounted = mountable.isMounted;
    this.disableVerticalFp = wrapMountedEither(() => {
      return setVerticalEnabled(false);
    });
    this.enableVerticalFp = wrapMountedEither(() => {
      return setVerticalEnabled(true);
    });
    this.mountFp = wrapSupportedPlain(() => {
      const nothing = () => undefined;
      return pipe(mountable.mount(), E.match(nothing, nothing));
    });
    this.unmount = mountable.unmount;

    this.disableVertical = throwifyWithChecksFp(this.disableVerticalFp);
    this.enableVertical = throwifyWithChecksFp(this.enableVerticalFp);
    this.mount = throwifyWithChecksFp(this.mountFp);
  }

  /**
   * Signal indicating if the component is supported.
   */
  readonly isSupported: Computed<boolean>;

  /**
   * Signal indicating if vertical swipes are enabled.
   */
  readonly isVerticalEnabled: Computed<boolean>;

  /**
   * Signal indicating if the component is currently mounted.
   */
  readonly isMounted: Computed<boolean>;

  /**
   * Mounts the component restoring its state.
   * @since Mini Apps v7.7
   */
  readonly mountFp: WithChecksFp<() => void, true>;

  /**
   * @see mountFp
   */
  readonly mount: WithChecks<() => void, true>;

  /**
   * Unmounts the component.
   */
  readonly unmount: () => void;

  /**
   * Disables the closing confirmation dialog.
   * @since Mini Apps v7.7
   */
  readonly disableVerticalFp: WithChecksFp<() => E.Either<PostEventError, void>, true>;

  /**
   * @see disableVerticalFp
   */
  readonly disableVertical: WithChecks<() => void, true>;

  /**
   * Enables the closing confirmation dialog.
   * @since Mini Apps v7.7
   */
  readonly enableVerticalFp: WithChecksFp<() => E.Either<PostEventError, void>, true>;

  /**
   * @see enableVerticalFp
   */
  readonly enableVertical: WithChecks<() => void, true>;
}

```
---
## File: packages/sdk/src/features/ThemeParams/exports.ts

```typescript
export { themeParams } from './instance.js';
export {
  type ThemeParamsOptions,
  ThemeParams,
  type ThemeParamsState,
  type ThemeParamsGetCssVarNameFn,
} from './ThemeParams.js';

```
---
## File: packages/sdk/src/features/ThemeParams/instance.ts

```typescript
import { on, off } from '@tma.js/bridge';
import { pipe } from 'fp-ts/function';
import { themeParams as globalThemeParams } from '@/globals/themeParams.js';

import { ThemeParams, type ThemeParamsState } from '@/features/ThemeParams/ThemeParams.js';
import { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';
import { withStateRestore } from '@/fn-options/withStateRestore.js';

export const themeParams = new ThemeParams({
  ...pipe(
    sharedFeatureOptions(),
    withStateRestore<ThemeParamsState>('themeParams'),
  ),
  offChange(listener) {
    off('theme_changed', listener);
  },
  onChange(listener) {
    on('theme_changed', listener);
  },
  initialState: globalThemeParams,
});

```
---
## File: packages/sdk/src/features/ThemeParams/ThemeParams.ts

```typescript
import { computed, type Computed, signal } from '@tma.js/signals';
import type { ThemeParams as ThemeParamsType, RGB } from '@tma.js/types';
import { snakeToKebab } from '@tma.js/toolkit';
import type { EventListener } from '@tma.js/bridge';
import * as E from 'fp-ts/Either';

import {
  createWithChecksFp,
  type WithChecks,
  type WithChecksFp,
} from '@/with-checks/withChecksFp.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';
import { Stateful } from '@/composables/Stateful.js';
import { Mountable } from '@/composables/Mountable.js';
import { CSSVarsBoundError } from '@/errors.js';
import { deleteCssVar, setCssVar } from '@/helpers/css-vars.js';
import { isColorDark } from '@/helpers/isColorDark.js';
import type { WithStateRestore } from '@/fn-options/withStateRestore.js';
import type { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';
import type { MaybeAccessor } from '@/types.js';
import { access } from '@/helpers/access.js';

export type ThemeParamsState = ThemeParamsType;

export interface ThemeParamsOptions extends WithStateRestore<ThemeParamsState>,
  SharedFeatureOptions {
  /**
   * Removes a theme change listener.
   * @param listener - a listener to remove.
   */
  offChange: (listener: EventListener<'theme_changed'>) => void;
  /**
   * Adds a theme change listener.
   * @returns A function to remove listener.
   * @param listener - a listener to add.
   */
  onChange: (listener: EventListener<'theme_changed'>) => void;
  /**
   * Theme parameters initial state.
   */
  initialState: MaybeAccessor<ThemeParamsType>;
}

export interface ThemeParamsGetCssVarNameFn {
  /**
   * @param property - palette key.
   * @returns Computed complete CSS variable name.
   */
  (property: Extract<keyof ThemeParamsType, string>): string;
}

export class ThemeParams {
  constructor({
    initialState,
    onChange,
    offChange,
    isTma,
    storage,
    isPageReload,
  }: ThemeParamsOptions) {
    const stateful = new Stateful<ThemeParamsState>({
      initialState: {},
      onChange: storage.set,
    });
    const listener: EventListener<'theme_changed'> = event => {
      stateful.setState(event.theme_params);
    };
    const mountable = new Mountable<ThemeParamsType>({
      initialState: () => E.right(access(initialState)),
      isPageReload,
      onMounted(state) {
        stateful.setState(state);
        onChange(listener);
      },
      onUnmounted() {
        offChange(listener);
      },
      restoreState: storage.get,
    });

    const wrapOptions = { isTma, returns: 'either' } as const;
    const wrapSupportedEither = createWithChecksFp(wrapOptions);
    const wrapMountedEither = createWithChecksFp({
      ...wrapOptions,
      isMounted: mountable.isMounted,
    });

    // Colors.
    this.accentTextColor = stateful.getter('accent_text_color');
    this.bgColor = stateful.getter('bg_color');
    this.buttonColor = stateful.getter('button_color');
    this.buttonTextColor = stateful.getter('button_text_color');
    this.bottomBarBgColor = stateful.getter('bottom_bar_bg_color');
    this.destructiveTextColor = stateful.getter('destructive_text_color');
    this.headerBgColor = stateful.getter('header_bg_color');
    this.hintColor = stateful.getter('hint_color');
    this.linkColor = stateful.getter('link_color');
    this.secondaryBgColor = stateful.getter('secondary_bg_color');
    this.sectionBgColor = stateful.getter('section_bg_color');
    this.sectionHeaderTextColor = stateful.getter('section_header_text_color');
    this.sectionSeparatorColor = stateful.getter('section_separator_color');
    this.subtitleTextColor = stateful.getter('subtitle_text_color');
    this.textColor = stateful.getter('text_color');

    // Other public signals.
    this.state = stateful.state;
    this.isMounted = mountable.isMounted;
    this.bindCssVarsFp = wrapMountedEither(getCSSVarName => {
      if (this._isCssVarsBound()) {
        return E.left(new CSSVarsBoundError());
      }
      getCSSVarName ||= prop => `--tg-theme-${snakeToKebab(prop)}`;

      const forEachEntry = (fn: (key: string, value: RGB) => void): void => {
        Object.entries(stateful.state()).forEach(([k, v]) => {
          v && fn(k, v);
        });
      };

      const actualize = (): void => {
        forEachEntry((k, v) => {
          setCssVar(getCSSVarName(k), v);
        });
      };

      actualize();
      stateful.state.sub(actualize);
      this._isCssVarsBound.set(true);

      return E.right(() => {
        forEachEntry(deleteCssVar);
        stateful.state.unsub(actualize);
        this._isCssVarsBound.set(false);
      });
    });
    this.mountFp = wrapSupportedEither(mountable.mount);
    this.unmount = mountable.unmount;

    this.bindCssVars = throwifyWithChecksFp(this.bindCssVarsFp);
    this.mount = throwifyWithChecksFp(this.mountFp);
  }

  //#region Colors.
  /**
   * @since v6.10
   */
  readonly accentTextColor: Computed<RGB | undefined>;

  readonly bgColor: Computed<RGB | undefined>;

  readonly buttonColor: Computed<RGB | undefined>;

  readonly buttonTextColor: Computed<RGB | undefined>;

  /**
   * @since v7.10
   */
  readonly bottomBarBgColor: Computed<RGB | undefined>;

  readonly destructiveTextColor: Computed<RGB | undefined>;

  /**
   * @since v6.10
   */
  readonly headerBgColor: Computed<RGB | undefined>;

  readonly hintColor: Computed<RGB | undefined>;

  readonly linkColor: Computed<RGB | undefined>;

  readonly secondaryBgColor: Computed<RGB | undefined>;

  /**
   * @since v6.10
   */
  readonly sectionBgColor: Computed<RGB | undefined>;

  /**
   * @since v6.10
   */
  readonly sectionHeaderTextColor: Computed<RGB | undefined>;

  /**
   * @since v7.6
   */
  readonly sectionSeparatorColor: Computed<RGB | undefined>;

  /**
   * @since v6.10
   */
  readonly subtitleTextColor: Computed<RGB | undefined>;

  readonly textColor: Computed<RGB | undefined>;
  //#endregion

  //#region CSS variables.
  private readonly _isCssVarsBound = signal(false);

  /**
   * True if CSS variables are currently bound.
   */
  readonly isCssVarsBound = computed(this._isCssVarsBound);

  /**
   * Creates CSS variables connected with the current theme parameters.
   *
   * By default, created CSS variables names are following the pattern "--tg-theme-{name}", where
   * {name} is a theme parameters key name converted from snake case to kebab case.
   *
   * Default variables:
   * - `--tg-theme-bg-color`
   * - `--tg-theme-secondary-text-color`
   *
   * Variables are being automatically updated if theme parameters were changed.
   *
   * @param getCSSVarName - function, returning complete CSS variable name for the specified
   * theme parameters key.
   * @returns Function to stop updating variables.
   * @throws {CSSVarsBoundError} CSS variables are already bound
   * @example Using custom CSS vars generator
   * themeParams.bindCssVars(key => `--my-prefix-${key}`);
   */
  readonly bindCssVarsFp: WithChecksFp<
    (getCSSVarName?: ThemeParamsGetCssVarNameFn) => E.Either<CSSVarsBoundError, VoidFunction>,
    false
  >;

  /**
   * @see bindCssVarsFp
   */
  readonly bindCssVars: WithChecks<
    (getCSSVarName?: ThemeParamsGetCssVarNameFn) => VoidFunction,
    false
  >;
  //#endregion

  //#region Other public signals.
  /**
   * Complete component state.
   */
  readonly state: Computed<ThemeParamsType>;

  /**
   * @returns True if the current color scheme is recognized as dark.
   * This value is calculated based on the current theme's background color.
   */
  readonly isDark = computed(() => {
    const color = this.bgColor();
    return !color || isColorDark(color);
  });
  //#endregion

  //#region Mounting.
  /**
   * Signal indicating if the component is currently mounted.
   */
  readonly isMounted: Computed<boolean>;

  /**
   * Mounts the component restoring its state.
   */
  readonly mountFp: WithChecksFp<() => E.Either<never, void>, false>;

  /**
   * @see mountFp
   */
  readonly mount: WithChecks<() => void, false>;

  /**
   * Unmounts the component.
   */
  readonly unmount: () => void;
  //#endregion
}

```
---
## File: packages/sdk/src/features/uncategorized/copyTextToClipboard.ts

```typescript
/**
 * Copies specified text to the clipboard.
 * @param text - text to copy.
 */
export async function copyTextToClipboard(text: string): Promise<void> {
  try {
    const { clipboard } = navigator;
    if (clipboard) {
      return await clipboard.writeText(text);
    }
  } catch {
  }
  const textArea = document.createElement('textarea');
  textArea.value = text;

  // Avoid scrolling to bottom
  textArea.style.top = '0';
  textArea.style.left = '0';
  textArea.style.position = 'fixed';

  document.body.appendChild(textArea);
  textArea.focus();
  textArea.select();

  try {
    document.execCommand('copy');
  } finally {
    document.body.removeChild(textArea);
  }
}

```
---
## File: packages/sdk/src/features/uncategorized/downloadFile.ts

```typescript
import * as TE from 'fp-ts/TaskEither';
import { pipe } from 'fp-ts/function';
import { RequestError } from '@tma.js/bridge';

import { AccessDeniedError } from '@/errors.js';
import type { AsyncOptions } from '@/types.js';
import {
  sharedFeatureOptions,
  type SharedFeatureOptions,
} from '@/fn-options/sharedFeatureOptions.js';
import { withChecksFp } from '@/with-checks/withChecksFp.js';
import { withRequest, type WithRequest } from '@/fn-options/withRequest.js';
import { withVersion, type WithVersion } from '@/fn-options/withVersion.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';

interface CreateOptions extends SharedFeatureOptions, WithRequest, WithVersion {
}

export type DownloadFileError = RequestError | AccessDeniedError;

function create({ request, ...rest }: CreateOptions) {
  return withChecksFp((
    url: string,
    fileName: string,
    options?: AsyncOptions,
  ): TE.TaskEither<DownloadFileError, void> => {
    return pipe(
      request(
        'web_app_request_file_download',
        'file_download_requested',
        { ...options, params: { url, file_name: fileName } },
      ),
      TE.chain(response => {
        return response.status === 'downloading'
          ? TE.right(undefined)
          : TE.left(new AccessDeniedError('User denied the action'));
      }),
    );
  }, { ...rest, requires: 'web_app_request_file_download', returns: 'task' });
}

/**
 * Displays a native popup prompting the user to download a file.
 * @param url - the HTTPS URL of the file to be downloaded.
 * @param file - the suggested name for the downloaded file.
 * @param options - additional request execution options.
 * @since Mini Apps v8.0
 * @example
 * pipe(
 *   downloadFileFp('https://telegram.org/js/telegram-web-app.js', 'telegram-sdk.js'),
 *   TE.map(() => {
 *     console.log('Downloading');
 *   })
 * )
 */
export const downloadFileFp = create(pipe(
  sharedFeatureOptions(),
  withRequest,
  withVersion,
));

export const downloadFile = throwifyWithChecksFp(downloadFileFp);

```
---
## File: packages/sdk/src/features/uncategorized/exports.ts

```typescript
export { copyTextToClipboard } from './copyTextToClipboard.js';
export { downloadFile, type DownloadFileError, downloadFileFp } from './downloadFile.js';
export { getCurrentTime, type GetCurrentTimeError, getCurrentTimeFp } from './getCurrentTime.js';
export { hideKeyboard, hideKeyboardFp, type HideKeyboardError } from './hideKeyboard.js';
export {
  readTextFromClipboard,
  readTextFromClipboardFp,
  type ReadTextFromClipboardError,
} from './readTextFromClipboard.js';
export { retrieveAndroidDeviceData } from './retrieveAndroidDeviceData.js';
export {
  retrieveAndroidDeviceDataFrom,
  type AndroidDeviceData,
} from './retrieveAndroidDeviceDataFrom.js';
export { sendData, sendDataFp, type SendDataError } from './sendData.js';
export { shareMessage, shareMessageFp, type ShareMessageFnError } from './shareMessage.js';
export {
  shareStory,
  shareStoryFp,
  type ShareStoryOptions,
  type ShareStoryError,
} from './shareStory.js';
export {
  switchInlineQuery,
  switchInlineQueryFp,
  type SwitchInlineQueryError,
} from './switchInlineQuery.js';

```
---
## File: packages/sdk/src/features/uncategorized/getCurrentTime.ts

```typescript
import { date, integer, number, transform, pipe as valiPipe, safeParse } from 'valibot';
import { pipe } from 'fp-ts/function';
import * as TE from 'fp-ts/TaskEither';

import { withChecksFp } from '@/with-checks/withChecksFp.js';
import {
  type SharedFeatureOptions,
  sharedFeatureOptions,
} from '@/fn-options/sharedFeatureOptions.js';
import {
  type WithInvokeCustomMethod,
  withInvokeCustomMethod,
  type InvokeCustomMethodError,
} from '@/fn-options/withInvokeCustomMethod.js';
import { type WithVersion, withVersion } from '@/fn-options/withVersion.js';
import type { AsyncOptions } from '@/types.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';
import { ValidationError } from '@/errors.js';

interface CreateOptions extends SharedFeatureOptions, WithInvokeCustomMethod, WithVersion {
}

export type GetCurrentTimeError = InvokeCustomMethodError | ValidationError;

function create({ invokeCustomMethod, ...rest }: CreateOptions) {
  return withChecksFp((options?: AsyncOptions): TE.TaskEither<GetCurrentTimeError, Date> => {
    return pipe(
      invokeCustomMethod('getCurrentTime', {}, options),
      TE.chain(response => {
        const parsed = safeParse(
          valiPipe(number(), integer(), transform(v => new Date(v * 1000)), date()),
          response,
        );
        return parsed.success
          ? TE.right(parsed.output)
          : TE.left(new ValidationError(response, parsed.issues));
      }),
    );
  }, { ...rest, requires: 'web_app_invoke_custom_method', returns: 'task' });
}

/**
 * @returns The current time according to the Telegram server time.
 * @param options - additional options.
 * @since Mini Apps v6.9
 */
export const getCurrentTimeFp = create(pipe(
  sharedFeatureOptions(),
  withInvokeCustomMethod,
  withVersion,
));

/**
 * @see getCurrentTimeFp
 */
export const getCurrentTime = throwifyWithChecksFp(getCurrentTimeFp);

```
---
## File: packages/sdk/src/features/uncategorized/hideKeyboard.ts

```typescript
import type { PostEventError } from '@tma.js/bridge';
import { pipe } from 'fp-ts/function';
import * as E from 'fp-ts/Either';

import {
  sharedFeatureOptions,
  type SharedFeatureOptions,
} from '@/fn-options/sharedFeatureOptions.js';
import { withPostEvent, type WithPostEvent } from '@/fn-options/withPostEvent.js';
import { withVersion, type WithVersion } from '@/fn-options/withVersion.js';
import { withChecksFp } from '@/with-checks/withChecksFp.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';

interface CreateOptions extends SharedFeatureOptions, WithPostEvent, WithVersion {
}

export type HideKeyboardError = PostEventError;

function create({ postEvent, ...rest }: CreateOptions) {
  return withChecksFp((): E.Either<HideKeyboardError, void> => {
    return postEvent('web_app_hide_keyboard');
  }, { ...rest, returns: 'either', requires: 'web_app_hide_keyboard' });
}

/**
 * Hides the on-screen keyboard, if it is currently visible. Does nothing if the keyboard is
 * not active.
 * @since Mini Apps v9.1
 */
export const hideKeyboardFp = create(pipe(
  sharedFeatureOptions(),
  withPostEvent,
  withVersion,
));

/**
 * @see hideKeyboardFp
 */
export const hideKeyboard = throwifyWithChecksFp(hideKeyboardFp);

```
---
## File: packages/sdk/src/features/uncategorized/readTextFromClipboard.ts

```typescript
import { pipe } from 'fp-ts/function';
import * as TE from 'fp-ts/TaskEither';
import { captureSameReq, type RequestError } from '@tma.js/bridge';

import {
  sharedFeatureOptions,
  type SharedFeatureOptions,
} from '@/fn-options/sharedFeatureOptions.js';
import { withVersion, type WithVersion } from '@/fn-options/withVersion.js';
import { withRequest, type WithRequest } from '@/fn-options/withRequest.js';
import { withChecksFp } from '@/with-checks/withChecksFp.js';
import type { AsyncOptions } from '@/types.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';
import { createRequestId } from '@/globals/createRequestId.js';

interface CreateOptions extends SharedFeatureOptions, WithVersion, WithRequest {
  createRequestId: () => string;
}

export type ReadTextFromClipboardError = RequestError;

function create({ request, createRequestId, ...rest }: CreateOptions) {
  return withChecksFp((
    options?: AsyncOptions,
  ): TE.TaskEither<ReadTextFromClipboardError, string | null> => {
    const reqId = createRequestId();
    return pipe(
      request('web_app_read_text_from_clipboard', 'clipboard_text_received', {
        ...options,
        params: { req_id: reqId },
        capture: captureSameReq(reqId),
      }),
      TE.map(({ data = null }) => data),
    );
  }, { ...rest, requires: 'web_app_read_text_from_clipboard', returns: 'task' });
}

/**
 * Reads a text from the clipboard and returns a `string` or `null`. `null` is returned
 * in one of the following cases:
 * - A value in the clipboard is not a text.
 * - Access to the clipboard is not granted.
 * @since Mini Apps v6.4
 */
export const readTextFromClipboardFp = create({
  ...pipe(
    sharedFeatureOptions(),
    withVersion,
    withRequest,
  ),
  createRequestId,
});

export const readTextFromClipboard = throwifyWithChecksFp(readTextFromClipboardFp);

```
---
## File: packages/sdk/src/features/uncategorized/retrieveAndroidDeviceData.test.ts

```typescript
import { it, expect, afterEach, vi } from 'vitest';

import { retrieveAndroidDeviceData } from './retrieveAndroidDeviceData.js';

afterEach(() => {
  vi.restoreAllMocks();
});

it.each([
  { userAgent: '', expected: {} },
  { userAgent: 'Telegram-Android', expected: {} },
  {
    userAgent: 'Telegram-Android (Samsung SM-A155F; Android 14; SDK 34; AVERAGE)',
    expected: {
      manufacturer: 'Samsung',
      performanceClass: 'AVERAGE',
      model: 'SM-A155F',
      androidVersion: '14',
      sdkVersion: 34,
    },
  },
  {
    userAgent: 'Telegram-Android/11.11.0 (Samsung SM-A155F; AVERAGE)',
    expected: {
      appVersion: '11.11.0',
      manufacturer: 'Samsung',
      performanceClass: 'AVERAGE',
      model: 'SM-A155F',
    },
  },
  {
    userAgent: 'Telegram-Android/11.11.0 (Samsung SM-A155F; Android 14; SDK 34; AVERAGE)',
    expected: {
      appVersion: '11.11.0',
      manufacturer: 'Samsung',
      performanceClass: 'AVERAGE',
      model: 'SM-A155F',
      androidVersion: '14',
      sdkVersion: 34,
    },
  },
])('should properly parse user agent sample', ({ userAgent, expected }) => {
  vi.spyOn(navigator, 'userAgent', 'get').mockImplementation(() => userAgent);
  expect(retrieveAndroidDeviceData()).toStrictEqual(expected);
});

```
---
## File: packages/sdk/src/features/uncategorized/retrieveAndroidDeviceData.ts

```typescript
import {
  type AndroidDeviceData,
  retrieveAndroidDeviceDataFrom,
} from './retrieveAndroidDeviceDataFrom.js';

/**
 * Retrieves Android device data from the navigator.userAgent.
 * @see https://core.telegram.org/bots/webapps#additional-data-in-user-agent
 */
export function retrieveAndroidDeviceData(): AndroidDeviceData {
  return retrieveAndroidDeviceDataFrom(navigator.userAgent);
}

```
---
## File: packages/sdk/src/features/uncategorized/retrieveAndroidDeviceDataFrom.test.ts

```typescript
import { it, expect } from 'vitest';

import { retrieveAndroidDeviceDataFrom } from './retrieveAndroidDeviceDataFrom.js';

it.each([
  { userAgent: '', expected: {} },
  { userAgent: 'Telegram-Android', expected: {} },
  {
    userAgent: 'Telegram-Android (Samsung SM-A155F; Android 14; SDK 34; AVERAGE)',
    expected: {
      manufacturer: 'Samsung',
      performanceClass: 'AVERAGE',
      model: 'SM-A155F',
      androidVersion: '14',
      sdkVersion: 34,
    },
  },
  {
    userAgent: 'Telegram-Android/11.11.0 (Samsung SM-A155F; AVERAGE)',
    expected: {
      appVersion: '11.11.0',
      manufacturer: 'Samsung',
      performanceClass: 'AVERAGE',
      model: 'SM-A155F',
    },
  },
  {
    userAgent: 'Telegram-Android/11.11.0 (Samsung SM-A155F; Android 14; SDK 34; AVERAGE)',
    expected: {
      appVersion: '11.11.0',
      manufacturer: 'Samsung',
      performanceClass: 'AVERAGE',
      model: 'SM-A155F',
      androidVersion: '14',
      sdkVersion: 34,
    },
  },
])('should properly parse user agent sample', ({ userAgent, expected }) => {
  expect(retrieveAndroidDeviceDataFrom(userAgent)).toStrictEqual(expected);
});

```
---
## File: packages/sdk/src/features/uncategorized/retrieveAndroidDeviceDataFrom.ts

```typescript
export interface AndroidDeviceData {
  appVersion?: string;
  manufacturer?: string;
  model?: string;
  androidVersion?: string;
  sdkVersion?: number;
  performanceClass?: 'LOW' | 'AVERAGE' | 'HIGH' | string;
}

/**
 * Retrieves Android device data from the specified User Agent.
 * @see https://core.telegram.org/bots/webapps#additional-data-in-user-agent
 * @param userAgent - user agent.
 */
export function retrieveAndroidDeviceDataFrom(userAgent: string): AndroidDeviceData {
  const result: AndroidDeviceData = {};
  const match = userAgent.match(/Telegram-Android(?:\/([^ ]+))?(?: (\([^)]+\))?|$)/);
  if (match) {
    const [, appVersion, systemInfo] = match;
    appVersion && (result.appVersion = appVersion);
    systemInfo && systemInfo
      .slice(1, systemInfo.length - 1)
      .split(';')
      .forEach(item => {
        const [key, value] = item.trim().split(' ');
        if (key === 'Android') {
          result.androidVersion = value;
        } else if (key === 'SDK') {
          const parsed = parseInt(value, 10);
          parsed && (result.sdkVersion = parsed);
        } else if (value) {
          result.manufacturer = key;
          result.model = value;
        } else {
          result.performanceClass = key;
        }
      });
  }
  return result;
}

```
---
## File: packages/sdk/src/features/uncategorized/sendData.ts

```typescript
import type { PostEventError } from '@tma.js/bridge';
import { pipe } from 'fp-ts/function';
import * as E from 'fp-ts/Either';

import {
  sharedFeatureOptions,
  type SharedFeatureOptions,
} from '@/fn-options/sharedFeatureOptions.js';
import { withPostEvent, type WithPostEvent } from '@/fn-options/withPostEvent.js';
import { withChecksFp } from '@/with-checks/withChecksFp.js';
import { InvalidArgumentsError } from '@/errors.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';

interface CreateOptions extends SharedFeatureOptions, WithPostEvent {
}

export type SendDataError = PostEventError | InvalidArgumentsError;

function create({ postEvent, ...rest }: CreateOptions) {
  return withChecksFp((data: string): E.Either<SendDataError, void> => {
    const { size } = new Blob([data]);
    if (!size || size > 4096) {
      return E.left(
        new InvalidArgumentsError(size
          ? 'Maximum size of data to send is 4096 bytes'
          : 'Attempted to send empty data'),
      );
    }
    return postEvent('web_app_data_send', { data });
  }, { ...rest, returns: 'either' });
}

/**
 * Sends data to the bot.
 *
 * When this method called, a service message sent to the bot containing the data of the length
 * up to 4096 bytes, and the Mini App closed.
 *
 * See the field `web_app_data` in the class [Message](https://core.telegram.org/bots/api#message).
 *
 * This method is only available for Mini Apps launched via a Keyboard button.
 * @param data - data to send to bot.
 */
export const sendDataFp = create(pipe(sharedFeatureOptions(), withPostEvent));

/**
 * @see sendDataFp
 */
export const sendData = throwifyWithChecksFp(sendDataFp);

```
---
## File: packages/sdk/src/features/uncategorized/shareMessage.ts

```typescript
import { RequestError } from '@tma.js/bridge';
import { pipe } from 'fp-ts/function';
import * as TE from 'fp-ts/TaskEither';

import {
  sharedFeatureOptions,
  type SharedFeatureOptions,
} from '@/fn-options/sharedFeatureOptions.js';
import { withRequest, type WithRequest } from '@/fn-options/withRequest.js';
import { withVersion, type WithVersion } from '@/fn-options/withVersion.js';
import { withChecksFp } from '@/with-checks/withChecksFp.js';
import { ShareMessageError } from '@/errors.js';
import type { AsyncOptions } from '@/types.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';

interface CreateOptions extends SharedFeatureOptions, WithRequest, WithVersion {
}

export type ShareMessageFnError = RequestError | ShareMessageError;

function create({ request, ...rest }: CreateOptions) {
  return withChecksFp((
    messageId: string,
    options?: AsyncOptions,
  ): TE.TaskEither<ShareMessageFnError, void> => {
    return pipe(
      request(
        'web_app_send_prepared_message',
        ['prepared_message_failed', 'prepared_message_sent'],
        {
          ...options,
          params: { id: messageId },
        },
      ),
      TE.chain(response => {
        if (response && 'error' in response) {
          return TE.left(new ShareMessageError(response.error));
        }
        return TE.right(undefined);
      }),
    );
  }, { ...rest, requires: 'web_app_send_prepared_message', returns: 'task' });
}

/**
 * Opens a dialog allowing the user to share a message provided by the bot.
 * @since Mini Apps v8.0
 */
export const shareMessageFp = create(pipe(
  sharedFeatureOptions(),
  withRequest,
  withVersion,
));

/**
 * @see shareMessageFp
 */
export const shareMessage = throwifyWithChecksFp(shareMessageFp);

```
---
## File: packages/sdk/src/features/uncategorized/shareStory.ts

```typescript
import { pipe } from 'fp-ts/function';
import type { PostEventError } from '@tma.js/bridge';
import * as E from 'fp-ts/Either';

import {
  sharedFeatureOptions,
  type SharedFeatureOptions,
} from '@/fn-options/sharedFeatureOptions.js';
import { withPostEvent, type WithPostEvent } from '@/fn-options/withPostEvent.js';
import { withVersion, type WithVersion } from '@/fn-options/withVersion.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';
import { withChecksFp } from '@/with-checks/withChecksFp.js';

interface CreateOptions extends SharedFeatureOptions, WithPostEvent, WithVersion {
}

export interface ShareStoryOptions {
  /**
   * The caption to be added to the media.
   * 0-200 characters for regular users and 0-2048 characters for premium subscribers.
   * @see https://telegram.org/faq_premium#telegram-premium
   */
  text?: string;
  /**
   * An object that describes a widget link to be included in the story.
   * Note that only premium subscribers can post stories with links.
   * @see https://telegram.org/faq_premium#telegram-premium
   */
  widgetLink?: {
    /**
     * The URL to be included in the story.
     */
    url: string;
    /**
     * The name to be displayed for the widget link, 0-48 characters.
     */
    name?: string;
  };
}

export type ShareStoryError = PostEventError;

function create({ postEvent, ...rest }: CreateOptions) {
  return withChecksFp((
    mediaUrl: string,
    options: ShareStoryOptions = {},
  ): E.Either<ShareStoryError, void> => {
    return postEvent('web_app_share_to_story', {
      text: options.text,
      media_url: mediaUrl,
      widget_link: options.widgetLink,
    });
  }, { ...rest, requires: 'web_app_share_to_story', returns: 'either' });
}

/**
 * Opens the native story editor.
 * @since Mini Apps v7.8
 * @example
 * pipe(
 *   shareStory('https://example.com/background.png', {
 *     text: 'Look at this cool group!',
 *     widgetLink: {
 *       url: 'https://t.me/heyqbnk',
 *       name: 'Vlad\'s community',
 *     },
 *   }),
 *   TE.match(error => {
 *     console.error('Something went wrong', error);
 *   }, () => {
 *     console.log('Call was successful');
 *   }),
 * );
 */
export const shareStoryFp = create(pipe(
  sharedFeatureOptions(),
  withPostEvent,
  withVersion,
));

/**
 * @see shareStoryFp
 */
export const shareStory = throwifyWithChecksFp(shareStoryFp);

```
---
## File: packages/sdk/src/features/uncategorized/switchInlineQuery.ts

```typescript
import type { PostEventError, SwitchInlineQueryChatType } from '@tma.js/bridge';
import { pipe } from 'fp-ts/function';
import * as E from 'fp-ts/Either';

import {
  sharedFeatureOptions,
  type SharedFeatureOptions,
} from '@/fn-options/sharedFeatureOptions.js';
import { withPostEvent, type WithPostEvent } from '@/fn-options/withPostEvent.js';
import { withVersion, type WithVersion } from '@/fn-options/withVersion.js';
import type { MaybeAccessor } from '@/types.js';
import { withChecksFp } from '@/with-checks/withChecksFp.js';
import { access } from '@/helpers/access.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';
import { isInlineMode } from '@/globals/inline-mode.js';

interface CreateOptions extends SharedFeatureOptions, WithPostEvent, WithVersion {
  isInlineMode: MaybeAccessor<boolean>;
}

export type SwitchInlineQueryError = PostEventError;

function create({ isInlineMode, postEvent, ...rest }: CreateOptions) {
  return withChecksFp((
    query: string,
    chatTypes?: SwitchInlineQueryChatType[],
  ): E.Either<SwitchInlineQueryError, void> => {
    return postEvent('web_app_switch_inline_query', {
      query: query,
      chat_types: chatTypes || [],
    });
  }, {
    ...rest,
    requires: {
      every: ['web_app_switch_inline_query', () => {
        return access(isInlineMode)
          ? undefined
          : 'The application must be launched in the inline mode';
      }],
    },
    returns: 'either',
  });
}

/**
 * Inserts the bot's username and the specified inline query in the current chat's input field.
 * Query may be empty, in which case only the bot's username will be inserted. The client prompts
 * the user to choose a specific chat, then opens that chat and inserts the bot's username and
 * the specified inline query in the input field.
 * @param query - text which should be inserted in the input after the current bot name. Max
 * length is 256 symbols.
 * @param chatTypes - List of chat types which could be chosen to send the message. Could be an
 * empty list.
 * @since Mini Apps v6.7
 * @example
 * pipe(
 *   switchInlineQuery('my query goes here', ['users']),
 *   E.match(error => {
 *     console.error('Something went wrong', error);
 *   }, () => {
 *     console.log('Call was successful');
 *   }),
 * );
 */
export const switchInlineQueryFp = create({
  ...pipe(
    sharedFeatureOptions(),
    withPostEvent,
    withVersion,
  ),
  isInlineMode,
});

/**
 * @see switchInlineQueryFp
 */
export const switchInlineQuery = throwifyWithChecksFp(switchInlineQueryFp);

```
---
## File: packages/sdk/src/features/Viewport/exports.ts

```typescript
export { viewport } from './instance.js';
export { Viewport, type ViewportState, type ViewportOptions } from './Viewport.js';

```
---
## File: packages/sdk/src/features/Viewport/instance.ts

```typescript
import { pipe } from 'fp-ts/function';
import * as E from 'fp-ts/Either';
import { retrieveLaunchParamsFp, on, off, type EventName, EventListener } from '@tma.js/bridge';

import { Viewport, type ViewportState } from '@/features/Viewport/Viewport.js';
import { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';
import { withStateRestore } from '@/fn-options/withStateRestore.js';
import { withVersion } from '@/fn-options/withVersion.js';
import { withRequest } from '@/fn-options/withRequest.js';
import { withPostEvent } from '@/fn-options/withPostEvent.js';

function create() {
  const createListeners = <E extends EventName>(event: E) => {
    return {
      on: (listener: EventListener<E>) => {
        on(event, listener);
      },
      off: (listener: EventListener<E>) => {
        off(event, listener);
      },
    };
  };
  const viewportListeners = createListeners('viewport_changed');
  const fullscreenListeners = createListeners('fullscreen_changed');
  const safeAreaListeners = createListeners('safe_area_changed');
  const contentSafeAreaListeners = createListeners('content_safe_area_changed');

  return new Viewport({
    ...pipe(
      sharedFeatureOptions(),
      withStateRestore<ViewportState>('viewport'),
      withVersion,
      withPostEvent,
      withRequest,
    ),
    isFullscreen() {
      return pipe(retrieveLaunchParamsFp(), E.map(lp => !!lp.tgWebAppFullscreen));
    },
    isViewportStable() {
      return pipe(retrieveLaunchParamsFp(), E.map(lp => {
        return ['macos', 'tdesktop', 'unigram', 'webk', 'weba', 'web'].includes(lp.tgWebAppPlatform);
      }));
    },
    offContentSafeAreaInsetsChanged: contentSafeAreaListeners.off,
    offFullscreenChanged: fullscreenListeners.off,
    offSafeAreaInsetsChanged: safeAreaListeners.off,
    offViewportChanged: viewportListeners.off,
    onContentSafeAreaInsetsChanged: contentSafeAreaListeners.on,
    onFullscreenChanged: fullscreenListeners.on,
    onSafeAreaInsetsChanged: safeAreaListeners.on,
    onViewportChanged: viewportListeners.on,
  });
}

export const viewport = create();

```
---
## File: packages/sdk/src/features/Viewport/Viewport.ts

```typescript
import { BetterPromise } from 'better-promises';
import {
  type SafeAreaInsets,
  type EventListener,
  supports,
  type RequestError,
  type PostEventError,
} from '@tma.js/bridge';
import { Computed, computed, signal } from '@tma.js/signals';
import * as E from 'fp-ts/Either';
import * as TE from 'fp-ts/TaskEither';
import { pipe } from 'fp-ts/function';
import { camelToKebab } from '@tma.js/toolkit';

import { Stateful } from '@/composables/Stateful.js';
import { WithStateRestore } from '@/fn-options/withStateRestore.js';
import { AsyncMountable } from '@/composables/AsyncMountable.js';
import { AsyncOptions } from '@/types.js';
import { createWithChecksFp, WithChecks, WithChecksFp } from '@/with-checks/withChecksFp.js';
import { throwifyWithChecksFp } from '@/with-checks/throwifyWithChecksFp.js';
import { SharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';
import { WithVersion } from '@/fn-options/withVersion.js';
import { WithRequest } from '@/fn-options/withRequest.js';
import { access } from '@/helpers/access.js';
import { CSSVarsBoundError, FullscreenFailedError } from '@/errors.js';
import { WithPostEvent } from '@/fn-options/withPostEvent.js';
import { deleteCssVar, setCssVar } from '@/helpers/css-vars.js';

type FullscreenError = FullscreenFailedError | RequestError;
type ViewportChangedEventListener = EventListener<'viewport_changed'>;
type FullscreenChangedEventListener = EventListener<'fullscreen_changed'>;
type SafeAreaInsetsChangedEventListener = EventListener<'safe_area_changed'>;
type SafeAreaInsetCSSVarKey = `safeAreaInset${Capitalize<keyof SafeAreaInsets>}`;

export type GetCSSVarNameKey =
  | 'width'
  | 'height'
  | 'stableHeight'
  | SafeAreaInsetCSSVarKey
  | `content${Capitalize<SafeAreaInsetCSSVarKey>}`;

export type GetCSSVarNameFn = (key: GetCSSVarNameKey) => string | null | undefined | false;

export interface ViewportState {
  contentSafeAreaInsets: SafeAreaInsets;
  height: number;
  isExpanded: boolean;
  isFullscreen: boolean;
  safeAreaInsets: SafeAreaInsets;
  stableHeight: number;
  width: number;
}

type WithListeners<On extends string, Off extends string, L> = {
  [K in On | Off]: (listener: L) => void;
};

export interface ViewportOptions<EViewportStable, EFullscreen>
  extends WithStateRestore<ViewportState>,
  WithVersion,
  WithRequest,
  WithPostEvent,
  WithListeners<'onViewportChanged', 'offViewportChanged', ViewportChangedEventListener>,
  WithListeners<'onFullscreenChanged', 'offFullscreenChanged', FullscreenChangedEventListener>,
  WithListeners<'onSafeAreaInsetsChanged', 'offSafeAreaInsetsChanged', SafeAreaInsetsChangedEventListener>,
  WithListeners<'onContentSafeAreaInsetsChanged', 'offContentSafeAreaInsetsChanged', SafeAreaInsetsChangedEventListener>,
  SharedFeatureOptions {
  /**
   * True if the viewport is stable.
   */
  isViewportStable: boolean | (() => E.Either<EViewportStable, boolean>);
  /**
   * True if the application was opened in fullscreen initially.
   */
  isFullscreen: boolean | (() => E.Either<EFullscreen, boolean>);
}

export class Viewport<EViewportStable, EFullscreen> {
  constructor({
    storage,
    isPageReload,
    onContentSafeAreaInsetsChanged,
    onSafeAreaInsetsChanged,
    onViewportChanged,
    onFullscreenChanged,
    offContentSafeAreaInsetsChanged,
    offFullscreenChanged,
    offSafeAreaInsetsChanged,
    offViewportChanged,
    request,
    isViewportStable,
    isFullscreen,
    isTma,
    version,
    postEvent,
  }: ViewportOptions<EViewportStable, EFullscreen>) {
    const initialInsets: SafeAreaInsets = { top: 0, right: 0, left: 0, bottom: 0 };
    const stateful = new Stateful<ViewportState>({
      initialState: {
        contentSafeAreaInsets: initialInsets,
        height: 0,
        isExpanded: false,
        isFullscreen: false,
        safeAreaInsets: initialInsets,
        stableHeight: 0,
        width: 0,
      },
      onChange: storage.set,
    });

    const viewportChangedListener: ViewportChangedEventListener = event => {
      stateful.setState({
        isExpanded: event.is_expanded,
        height: event.height,
        width: event.width,
        stableHeight: event.is_state_stable ? event.height : undefined,
      });
    };
    const fullscreenChangedListener: FullscreenChangedEventListener = event => {
      stateful.setState({ isFullscreen: event.is_fullscreen });
    };
    const safeAreaInsetsChangedListener: SafeAreaInsetsChangedEventListener = event => {
      stateful.setState({ safeAreaInsets: event });
    };
    const contentSafeAreaInsetsChangedListener: SafeAreaInsetsChangedEventListener = event => {
      stateful.setState({ contentSafeAreaInsets: event });
    };

    const mountable = new AsyncMountable({
      initialState(options) {
        const genRequestInsets = (kind: 'safe-area' | 'content-safe-area') => {
          return () => {
            const [method, event] = kind === 'safe-area'
              ? ['web_app_request_safe_area', 'safe_area_changed'] as const
              : ['web_app_request_content_safe_area', 'content_safe_area_changed'] as const;

            if (!supports(method, access(version))) {
              return TE.right({ top: 0, left: 0, right: 0, bottom: 0 });
            }
            return request(method, event, options);
          };
        };
        const genFlag = <E>(flag: boolean | (() => E.Either<E, boolean>)) => {
          return () => (
            typeof flag === 'boolean'
              ? TE.right(flag)
              : TE.fromEither(flag())
          );
        };

        return pipe(
          TE.Do,
          TE.bindW('safeAreaInsets', genRequestInsets('safe-area')),
          TE.bindW('contentSafeAreaInsets', genRequestInsets('content-safe-area')),
          TE.bindW('isFullscreen', genFlag(isFullscreen)),
          TE.bindW('isViewportStable', genFlag(isViewportStable)),
          TE.chainW(({ isViewportStable, ...shared }) => {
            if (isViewportStable) {
              return TE.right({
                ...shared,
                height: window.innerHeight,
                isExpanded: true,
                stableHeight: window.innerHeight,
                width: window.innerWidth,
              });
            }
            return pipe(
              request('web_app_request_viewport', 'viewport_changed', options),
              TE.map(viewport => ({
                ...shared,
                height: viewport.height,
                isExpanded: viewport.is_expanded,
                stableHeight: viewport.is_state_stable ? viewport.height : 0,
                width: viewport.width,
              })),
            );
          }),
        );
      },
      isPageReload,
      onMounted(state) {
        onViewportChanged(viewportChangedListener);
        onFullscreenChanged(fullscreenChangedListener);
        onSafeAreaInsetsChanged(safeAreaInsetsChangedListener);
        onContentSafeAreaInsetsChanged(contentSafeAreaInsetsChangedListener);
        stateful.setState(state);
      },
      onUnmounted() {
        offViewportChanged(viewportChangedListener);
        offFullscreenChanged(fullscreenChangedListener);
        offSafeAreaInsetsChanged(safeAreaInsetsChangedListener);
        offContentSafeAreaInsetsChanged(contentSafeAreaInsetsChangedListener);
      },
      restoreState: storage.get,
    });

    const saBased = <K extends keyof SafeAreaInsets>(key: K) => {
      return computed(() => this.safeAreaInsets()[key]);
    };
    const csaBased = <K extends keyof SafeAreaInsets>(key: K) => {
      return computed(() => this.contentSafeAreaInsets()[key]);
    };

    this.state = stateful.state;
    this.height = stateful.getter('height');
    this.stableHeight = stateful.getter('stableHeight');
    this.width = stateful.getter('width');
    this.isExpanded = stateful.getter('isExpanded');
    this.safeAreaInsets = stateful.getter('safeAreaInsets');
    this.safeAreaInsetTop = saBased('top');
    this.safeAreaInsetBottom = saBased('bottom');
    this.safeAreaInsetLeft = saBased('left');
    this.safeAreaInsetRight = saBased('right');
    this.contentSafeAreaInsets = stateful.getter('contentSafeAreaInsets');
    this.contentSafeAreaInsetTop = csaBased('top');
    this.contentSafeAreaInsetBottom = csaBased('bottom');
    this.contentSafeAreaInsetLeft = csaBased('left');
    this.contentSafeAreaInsetRight = csaBased('right');

    const wrapTask = createWithChecksFp({ isTma, returns: 'task' });
    const wrapMountedEither = createWithChecksFp({
      isTma,
      returns: 'either',
    });
    const wrapFullscreenTask = createWithChecksFp({
      isTma,
      requires: 'web_app_request_fullscreen',
      version,
      returns: 'task',
    });
    const genFullscreenFn = (enable: boolean) => {
      return wrapFullscreenTask((options?: AsyncOptions) => {
        return pipe(
          request(
            enable ? 'web_app_request_fullscreen' : 'web_app_exit_fullscreen',
            ['fullscreen_changed', 'fullscreen_failed'],
            options,
          ),
          TE.chain(data => {
            if ('error' in data && data.error !== 'ALREADY_FULLSCREEN') {
              return TE.left(new FullscreenFailedError(data.error));
            }
            stateful.setState({ isFullscreen: 'is_fullscreen' in data ? data.is_fullscreen : true });
            return TE.right(undefined);
          }),
        );
      });
    };

    // Mount.
    this.isMounted = mountable.isMounted;
    this.mountFp = wrapTask(mountable.mount);
    this.mount = throwifyWithChecksFp(this.mountFp);

    // Fullscreen.
    this.isFullscreen = stateful.getter('isFullscreen');
    this.requestFullscreenFp = genFullscreenFn(true);
    this.requestFullscreen = throwifyWithChecksFp(this.requestFullscreenFp);
    this.exitFullscreenFp = genFullscreenFn(false);
    this.exitFullscreen = throwifyWithChecksFp(this.exitFullscreenFp);

    // CSS vars.
    const isCssVarsBound = signal(false);
    this.isCssVarsBound = computed(isCssVarsBound);
    this.bindCssVarsFp = wrapMountedEither(
      (getCSSVarName?: GetCSSVarNameFn) => {
        if (isCssVarsBound()) {
          return E.left(new CSSVarsBoundError());
        }
        getCSSVarName ||= prop => `--tg-viewport-${camelToKebab(prop)}`;

        const settings = ([
          ['height', this.height],
          ['stableHeight', this.stableHeight],
          ['width', this.width],
          ['safeAreaInsetTop', this.safeAreaInsetTop],
          ['safeAreaInsetBottom', this.safeAreaInsetBottom],
          ['safeAreaInsetLeft', this.safeAreaInsetLeft],
          ['safeAreaInsetRight', this.safeAreaInsetRight],
          ['contentSafeAreaInsetTop', this.contentSafeAreaInsetTop],
          ['contentSafeAreaInsetBottom', this.contentSafeAreaInsetBottom],
          ['contentSafeAreaInsetLeft', this.contentSafeAreaInsetLeft],
          ['contentSafeAreaInsetRight', this.contentSafeAreaInsetRight],
        ] as const).reduce<{
          update: VoidFunction;
          removeListener: VoidFunction;
          cssVar: string;
        }[]>((acc, [key, signal]) => {
          const cssVar = getCSSVarName(key);
          if (cssVar) {
            const update = () => {
              setCssVar(cssVar, `${signal()}px`);
            };
            acc.push({ update, removeListener: signal.sub(update), cssVar });
          }
          return acc;
        }, []);

        settings.forEach(setting => {
          setting.update();
        });
        isCssVarsBound.set(true);

        return E.right(() => {
          settings.forEach(s => {
            s.removeListener();
            deleteCssVar(s.cssVar);
          });
          isCssVarsBound.set(false);
        });
      },
    );
    this.bindCssVars = throwifyWithChecksFp(this.bindCssVarsFp);

    // Other methods.
    this.expandFp = wrapMountedEither(() => postEvent('web_app_expand'));
    this.expand = throwifyWithChecksFp(this.expandFp);
  }

  //#region Other properties.
  /**
   * Complete component state.
   */
  readonly state: Computed<ViewportState>;

  /**
   * Signal containing the current height of the **visible area** of the Mini App.
   *
   * The application can display just the top part of the Mini App, with its
   * lower part remaining outside the screen area. From this position, the user
   * can "pull" the Mini App to its maximum height, while the bot can do the same
   * by calling `expand` method. As the position of the Mini App changes, the
   * current height value of the visible area will be updated  in real time.
   *
   * Please note that the refresh rate of this value is not sufficient to
   * smoothly follow the lower border of the window. It should not be used to pin
   * interface elements to the bottom of the visible area. It's more appropriate
   * to use the value of the `stableHeight` field for this purpose.
   *
   * @see stableHeight
   */
  readonly height: Computed<number>;

  /**
   * Signal containing the height of the visible area of the Mini App in its last stable state.
   *
   * The application can display just the top part of the Mini App, with its
   * lower part remaining outside the screen area. From this position, the user
   * can "pull" the Mini App to its maximum height, while the application can do
   * the same by calling `expand` method.
   *
   * Unlike the value of `height`, the value of `stableHeight` does not change as
   * the position of the Mini App changes with user gestures or during
   * animations. The value of `stableHeight` will be updated after all gestures
   * and animations are completed and the Mini App reaches its final size.
   *
   * @see height
   */
  readonly stableHeight: Computed<number>;

  /**
   * Signal containing the currently visible area width.
   */
  readonly width: Computed<number>;

  /**
   * Signal indicating if the Mini App is expanded to the maximum available height. Otherwise,
   * if the Mini App occupies part of the screen and can be expanded to the full
   * height using the `expand` method.
   */
  readonly isExpanded: Computed<boolean>;

  /**
   * Signal indicating if the current viewport height is stable and is not going to change in
   * the next moment.
   */
  readonly isStable = computed(() => this.height() === this.stableHeight());
  //#endregion

  //#region Content safe area insets.
  /**
   * Signal containing content safe area insets.
   */
  readonly contentSafeAreaInsets: Computed<SafeAreaInsets>;

  /**
   * Signal containing top content safe area inset.
   */
  readonly contentSafeAreaInsetTop: Computed<number>;

  /**
   * Signal containing left content safe area inset.
   */
  readonly contentSafeAreaInsetLeft: Computed<number>;

  /**
   * Signal containing right content safe area inset.
   */
  readonly contentSafeAreaInsetRight: Computed<number>;

  /**
   * Signal containing bottom content safe area inset.
   */
  readonly contentSafeAreaInsetBottom: Computed<number>;
  //#endregion

  //#region Safe area insets.
  /**
   * Signal containing safe area insets.
   */
  readonly safeAreaInsets: Computed<SafeAreaInsets>;

  /**
   * Signal containing top safe area inset.
   */
  readonly safeAreaInsetTop: Computed<number>;

  /**
   * Signal containing left safe area inset.
   */
  readonly safeAreaInsetLeft: Computed<number>;

  /**
   * Signal containing right safe area inset.
   */
  readonly safeAreaInsetRight: Computed<number>;

  /**
   * Signal containing bottom safe area inset.
   */
  readonly safeAreaInsetBottom: Computed<number>;
  //#endregion

  //#region Fullscreen.
  /**
   * Signal indicating if the viewport is currently in fullscreen mode.
   */
  readonly isFullscreen: Computed<boolean>;

  /**
   * Requests fullscreen mode for the mini application.
   * @since Mini Apps v8.0
   */
  readonly requestFullscreenFp: WithChecksFp<
    (options?: AsyncOptions) => TE.TaskEither<FullscreenError, void>,
    true
  >;

  /**
   * @see requestFullscreenFp
   */
  readonly requestFullscreen: WithChecks<(options?: AsyncOptions) => BetterPromise<void>, true>;

  /**
   * Exits mini application from the fullscreen mode.
   * @since Mini Apps v8.0
   */
  readonly exitFullscreenFp: WithChecksFp<
    (options?: AsyncOptions) => TE.TaskEither<FullscreenError, void>,
    true
  >;

  /**
   * @see exitFullscreenFp
   */
  readonly exitFullscreen: WithChecks<(options?: AsyncOptions) => BetterPromise<void>, true>;
  //#endregion

  //#region CSS Vars.
  /**
   * Signal indicating if CSS variables are bound.
   */
  readonly isCssVarsBound: Computed<boolean>;

  /**
   * Creates CSS variables connected with the current viewport.
   *
   * By default, created CSS variables names are following the pattern "--tg-theme-{name}", where
   * {name} is a viewport property name converted from camel case to kebab case.
   *
   * Default variables:
   * - `--tg-viewport-height`
   * - `--tg-viewport-width`
   * - `--tg-viewport-stable-height`
   * - `--tg-viewport-content-safe-area-inset-top`
   * - `--tg-viewport-content-safe-area-inset-bottom`
   * - `--tg-viewport-content-safe-area-inset-left`
   * - `--tg-viewport-content-safe-area-inset-right`
   * - `--tg-viewport-safe-area-inset-top`
   * - `--tg-viewport-safe-area-inset-bottom`
   * - `--tg-viewport-safe-area-inset-left`
   * - `--tg-viewport-safe-area-inset-right`
   *
   * Variables are being automatically updated if the viewport was changed.
   *
   * @param getCSSVarName - function, returning computed complete CSS variable name. The CSS
   * variable will only be defined if the function returned non-empty string value.
   * @returns Function to stop updating variables.
   * @example Using no arguments
   * bindCssVarsFp();
   * @example Using custom CSS vars generator
   * bindCssVarsFp(key => `--my-prefix-${key}`);
   */
  readonly bindCssVarsFp: WithChecksFp<(getCSSVarName?: GetCSSVarNameFn) => (
    E.Either<CSSVarsBoundError, VoidFunction>
  ), false>;

  /**
   * @see bindCssVarsFp
   */
  readonly bindCssVars: WithChecks<(getCSSVarName?: GetCSSVarNameFn) => VoidFunction, false>;
  //#endregion

  //#region Mount.
  /**
   * Signal indicating if the component is currently mounted.
   */
  readonly isMounted: Computed<boolean>;

  /**
   * Mounts the component.
   */
  readonly mountFp: WithChecksFp<(options?: AsyncOptions) => (
    TE.TaskEither<EFullscreen | EViewportStable | RequestError, void>
  ), false>;

  /**
   * @see mountFp
   */
  readonly mount: WithChecks<(options?: AsyncOptions) => BetterPromise<void>, false>;
  //#endregion

  //#region Other methods.
  /**
   * A method that expands the Mini App to the maximum available height. To find
   * out if the Mini App is expanded to the maximum height, refer to the value of
   * the `isExpanded`.
   */
  readonly expandFp: WithChecksFp<() => E.Either<PostEventError, void>, false>;

  /**
   * @see expandFp
   */
  readonly expand: WithChecks<() => void, false>;
  //#endregion
}

```
---
## File: packages/sdk/src/fn-options/bottomButtonOptions.ts

```typescript
import type { EventName } from '@tma.js/bridge';
import { pipe } from 'fp-ts/function';

import { buttonOptions } from '@/fn-options/buttonOptions.js';

export function bottomButtonOptions<S, D>(
  storageName: string,
  trackedClickEvent: EventName,
  defaults: D,
) {
  return pipe(
    buttonOptions<S>(storageName, trackedClickEvent),
    obj => ({ ...obj, defaults }),
  );
}

```
---
## File: packages/sdk/src/fn-options/buttonOptions.ts

```typescript
import { on, off, type EventName } from '@tma.js/bridge';
import { pipe } from 'fp-ts/function';

import { sharedFeatureOptions } from '@/fn-options/sharedFeatureOptions.js';
import { withStateRestore } from '@/fn-options/withStateRestore.js';
import { withPostEvent } from '@/fn-options/withPostEvent.js';
import { withVersion } from '@/fn-options/withVersion.js';

export function buttonOptions<S>(storageName: string, trackedClickEvent: EventName) {
  return {
    ...pipe(
      sharedFeatureOptions(),
      withPostEvent,
      withVersion,
      withStateRestore<S>(storageName),
    ),
    onClick(listener: VoidFunction, once?: boolean): VoidFunction {
      return on(trackedClickEvent, listener, once);
    },
    offClick(listener: VoidFunction, once?: boolean): void {
      off(trackedClickEvent, listener, once);
    },
  };
}

```
---
## File: packages/sdk/src/fn-options/createFnOption.ts

```typescript
import type { MaybeAccessor } from '@/types.js';
import { access } from '@/helpers/access.js';

export function createFnOption<T>(mix: MaybeAccessor<T>) {
  return <O extends object>(obj: O) => {
    return { ...obj, ...access(mix) };
  };
}

```
---
## File: packages/sdk/src/fn-options/sharedFeatureOptions.ts

```typescript
import { computed } from '@tma.js/signals';
import { isTMAFp } from '@tma.js/bridge';

import type { MaybeAccessor } from '@/types.js';

export interface SharedFeatureOptions {
  /**
   * True if the current environment is Telegram Mini Apps.
   */
  isTma: MaybeAccessor<boolean>;
}

export function sharedFeatureOptions(): SharedFeatureOptions {
  return { isTma: computed(() => isTMAFp()) };
}

```
---
## File: packages/sdk/src/fn-options/withInvokeCustomMethod.ts

```typescript
import type * as TE from 'fp-ts/TaskEither';
import type {
  CustomMethodParams,
  CustomMethodName,
  InvokeCustomMethodError,
  InvokeCustomMethodFpOptions,
  RequestError,
} from '@tma.js/bridge';

import { invokeCustomMethod } from '@/globals/invokeCustomMethod.js';
import { createFnOption } from '@/fn-options/createFnOption.js';

export type { InvokeCustomMethodError };

export interface InvokeCustomMethodNoRequestIdFn {
  <M extends CustomMethodName>(
    this: void,
    method: M,
    params: CustomMethodParams<M>,
    options?: InvokeCustomMethodFpOptions,
  ): TE.TaskEither<InvokeCustomMethodError, unknown>;

  (
    this: void,
    method: string,
    params: object,
    options?: InvokeCustomMethodFpOptions,
  ): TE.TaskEither<RequestError, unknown>;
}

export interface WithInvokeCustomMethod {
  invokeCustomMethod: InvokeCustomMethodNoRequestIdFn;
}

export const withInvokeCustomMethod = createFnOption<WithInvokeCustomMethod>({
  invokeCustomMethod,
});

```
---
## File: packages/sdk/src/fn-options/withPostEvent.ts

```typescript
import { type PostEventFpFn } from '@tma.js/bridge';

import { createFnOption } from '@/fn-options/createFnOption.js';
import { postEventFp } from '@/globals/post-event.js';

export interface WithPostEvent {
  /**
   * A postEvent function to use to call Mini Apps methods.
   */
  postEvent: PostEventFpFn;
}

export const withPostEvent = createFnOption<WithPostEvent>({
  postEvent: postEventFp,
});

```
---
## File: packages/sdk/src/fn-options/withRequest.ts

```typescript
import type { RequestFpFn } from '@tma.js/bridge';

import { createFnOption } from '@/fn-options/createFnOption.js';
import { requestFp } from '@/globals/request.js';

export interface WithRequest {
  /**
   * A request function to use to call Mini Apps methods.
   */
  request: RequestFpFn;
}

export const withRequest = createFnOption<WithRequest>({
  request: requestFp,
});

```
---
## File: packages/sdk/src/fn-options/withStateRestore.ts

```typescript
import { type ComponentStorage, createComponentSessionStorage } from '@/helpers/component-storage.js';
import { isPageReload } from '@/helpers/navigation.js';
import { createFnOption } from '@/fn-options/createFnOption.js';
import type { MaybeAccessor } from '@/types.js';

export interface WithStateRestore<T> {
  /**
   * A storage the component could use to store its data.
   */
  storage: ComponentStorage<T>;
  /**
   * True if the current page is reloaded.
   */
  isPageReload: MaybeAccessor<boolean>;
}

export function withStateRestore<S>(storageName: string) {
  return createFnOption<WithStateRestore<S>>({
    storage: createComponentSessionStorage<S>(storageName),
    isPageReload,
  });
}

```
---
## File: packages/sdk/src/fn-options/withVersion.ts

```typescript
import type { Version } from '@tma.js/types';

import type { MaybeAccessor } from '@/types.js';
import { version } from '@/globals/version.js';
import { createFnOption } from '@/fn-options/createFnOption.js';

export interface WithVersion {
  /**
   * The currently supported Telegram Mini Apps version by the Telegram client.
   */
  version: MaybeAccessor<Version>;
}

export const withVersion = createFnOption<WithVersion>({ version });

```
---
## File: packages/sdk/src/globals/createRequestId.ts

```typescript
import { createSignal } from '@/globals/signals-registry.js';

const lastRequestId = createSignal(0);

/**
 * @returns A new request identifier.
 */
export function createRequestId(): string {
  lastRequestId.set(lastRequestId() + 1);
  return lastRequestId().toString();
}

```
---
## File: packages/sdk/src/globals/inline-mode.ts

```typescript
import { createSignal } from '@/globals/signals-registry.js';

/**
 * True if the application is launched in inline mode.
 */
export const isInlineMode = createSignal(false);

```
---
## File: packages/sdk/src/globals/invokeCustomMethod.ts

```typescript
import {
  type RequestError,
  type CustomMethodName,
  type CustomMethodParams,
  type InvokeCustomMethodOptions,
  invokeCustomMethodFp,
} from '@tma.js/bridge';
import * as TE from 'fp-ts/TaskEither';

import { createRequestId } from '@/globals/createRequestId.js';
import { postEventFp } from '@/globals/post-event.js';

/**
 * Invokes known custom method. Returns method execution result.
 * @param method - method name.
 * @param params - method parameters.
 * @param options - additional options.
 */
export function invokeCustomMethod<M extends CustomMethodName>(
  method: M,
  params: CustomMethodParams<M>,
  options?: InvokeCustomMethodOptions,
): TE.TaskEither<RequestError, unknown>;

/**
 * Invokes unknown custom method. Returns method execution result.
 * @param method - method name.
 * @param params - method parameters.
 * @param options - additional options.
 */
export function invokeCustomMethod(
  method: string,
  params: object,
  options?: InvokeCustomMethodOptions,
): TE.TaskEither<RequestError, unknown>;

export function invokeCustomMethod(
  method: string,
  params: object,
  options?: InvokeCustomMethodOptions,
): TE.TaskEither<RequestError, unknown> {
  return invokeCustomMethodFp(method, params, createRequestId(), {
    ...options || {},
    postEvent: postEventFp,
  });
}

```
---
## File: packages/sdk/src/globals/post-event.ts

```typescript
import { postEventFp as _postEventFp, type PostEventFpFn, type PostEventFn } from '@tma.js/bridge';
import { throwifyAnyEither } from '@tma.js/toolkit';

import { createSignal } from '@/globals/signals-registry.js';

export const postEventFpSignal = createSignal(_postEventFp);

export const postEventFp: PostEventFpFn = (...args: any[]) => {
  return (postEventFpSignal as any)()(...args);
};

export const postEvent: PostEventFn = (...args: any[]) => {
  return throwifyAnyEither((postEventFp as any)(...args));
};

```
---
## File: packages/sdk/src/globals/request.ts

```typescript
import { requestFp as _requestFp, type RequestFpFn, type RequestFn } from '@tma.js/bridge';
import { BetterPromise } from 'better-promises';

import { postEventFp } from '@/globals/post-event.js';

export const requestFp: RequestFpFn = (method: any, events: any, options: any) => {
  return _requestFp(method, events, {
    postEvent: postEventFp,
    ...options,
  });
};

export const request: RequestFn = (...args: any[]) => {
  return BetterPromise.fn(() => (requestFp as any)(...args)());
};

```
---
## File: packages/sdk/src/globals/resetGlobals.ts

```typescript
import { resetGlobals as resetBridgeGlobals } from '@tma.js/bridge';

import { resetSignals } from '@/globals/signals-registry.js';

/**
 * Resets all bridge globals and locally created signals.
 */
export function resetGlobals() {
  resetBridgeGlobals();
  resetSignals();
}

```
---
## File: packages/sdk/src/globals/signals-registry.ts

```typescript
import {
  computed,
  type Computed,
  type Signal,
  signal,
  type SignalOptions,
} from '@tma.js/signals';

export type SignalsTuple<T> = [Signal<T>, Computed<T>];

const signals: (Signal<any> | Computed<any>)[] = [];

/**
 * Creates a new signal with the initial value.
 * @param initialValue - the initial value.
 * @param options - additional options.
 */
export function createSignal<T>(
  initialValue: T,
  options?: SignalOptions<T>,
): Signal<T>;

/**
 * Creates a new signal without the initial value.
 * @param initialValue - the initial value.
 * @param options - additional options.
 */
export function createSignal<T>(
  initialValue?: T,
  options?: SignalOptions<T | undefined>,
): Signal<T | undefined>;

// #__NO_SIDE_EFFECTS__
export function createSignal<T>(
  initialValue?: T,
  options?: SignalOptions<T | undefined>,
): Signal<T | undefined> {
  const s = signal(initialValue, options);
  signals.push(s);
  return s;
}

/**
 * Creates a signal, which wil be automatically updated if some of its dependant signals were
 * modified.
 * @param fn - computation function.
 * @param options - additional functions.
 */
// #__NO_SIDE_EFFECTS__
export function createComputed<T>(fn: (prev?: T) => T, options?: SignalOptions<T>): Computed<T> {
  const s = computed(fn, options);
  signals.push(s);
  return s;
}

/**
 * Resets all signals states.
 */
export function resetSignals() {
  signals.forEach(s => {
    s.unsubAll();
    'reset' in s && s.reset();
  });
}

/**
 * @returns A tuple, containing a manual and computed signals. The computed signal is based on
 * the manual one.
 * @param initialValue - the initial value.
 * @param options - additional options.
 */
export function createSignalsTuple<T>(
  initialValue: T,
  options?: SignalOptions<T>,
): SignalsTuple<T>;

/**
 * @returns A tuple, containing a manual and computed signals. The computed signal is based on
 * the manual one.
 * @param initialValue - an initial value.
 * @param options - additional options.
 */
export function createSignalsTuple<T>(
  initialValue?: T,
  options?: SignalOptions<T | undefined>,
): SignalsTuple<T | undefined>;

// #__NO_SIDE_EFFECTS__
export function createSignalsTuple<T>(
  initialValue?: T,
  options?: SignalOptions<T | undefined>,
): SignalsTuple<T | undefined> {
  const s = createSignal(initialValue, options);
  return [s, createComputed(s)];
}

```
---
## File: packages/sdk/src/globals/themeParams.ts

```typescript
import type { ThemeParams } from '@tma.js/types';

import { createSignal } from '@/globals/signals-registry.js';

/**
 * Mini application's theme parameters.
 */
export const themeParams = createSignal<ThemeParams>({});

```
---
## File: packages/sdk/src/globals/version.ts

```typescript
import type { Version } from '@tma.js/types';

import { createSignal } from '@/globals/signals-registry.js';

/**
 * The current Mini Apps version.
 */
export const version = createSignal<Version>('0.0');

```
---
## File: packages/sdk/src/helpers/access.ts

```typescript
import type { MaybeAccessor } from '@/types.js';

export function access<T>(value: MaybeAccessor<T>): T {
  return typeof value === 'function' ? (value as any)() as T : value;
}

```
---
## File: packages/sdk/src/helpers/component-storage.ts

```typescript
import { getStorageValue, setStorageValue } from '@tma.js/toolkit';

export interface ComponentStorage<T> {
  get: () => T | undefined;
  set: (value: T) => void;
}

/**
 * Creates a new sessionStorage-based component storage.
 * @param key - session storage key to use.
 */
export function createComponentSessionStorage<T>(key: string): ComponentStorage<T> {
  return {
    get: () => getStorageValue<T>(key),
    set(value) {
      setStorageValue<T>(key, value);
    },
  };
}

```
---
## File: packages/sdk/src/helpers/createIsSupportedSignal.ts

```typescript
import { type MethodName, supports } from '@tma.js/bridge';
import { type Computed, computed } from '@tma.js/signals';
import type { Version } from '@tma.js/types';

import type { MaybeAccessor } from '@/types.js';
import { access } from '@/helpers/access.js';

export function createIsSupportedSignal(
  method: MethodName,
  version: MaybeAccessor<Version>,
): Computed<boolean> {
  return computed(() => supports(method, access(version)));
}

```
---
## File: packages/sdk/src/helpers/css-vars.test.ts

```typescript
import { afterEach, describe, expect, it, vi } from 'vitest';

import { setCssVar, deleteCssVar } from './css-vars.js';

afterEach(() => {
  vi.restoreAllMocks();
});

describe('setCssVar', () => {
  it('should call document.documentElement.style.setProperty with passed "name" and "value" arguments', () => {
    const spy = vi.spyOn(document.documentElement.style, 'setProperty').mockImplementation(() => {
    });

    setCssVar('tma', 'is cool');
    expect(spy).toHaveBeenCalledOnce();
    expect(spy).toHaveBeenCalledWith('tma', 'is cool');
  });
});

describe('deleteCssVar', () => {
  it('should call document.documentElement.style.removeProperty with passed "name" argument', () => {
    const spy = vi
      .spyOn(document.documentElement.style, 'removeProperty')
      .mockImplementation(() => '');

    deleteCssVar('tma');
    expect(spy).toHaveBeenCalledOnce();
    expect(spy).toHaveBeenCalledWith('tma');
  });
});

```
---
## File: packages/sdk/src/helpers/css-vars.ts

```typescript
/**
 * Sets CSS variable globally.
 * @param name - variable name.
 * @param value - variable value.
 */
export function setCssVar(name: string, value: string | null): void {
  document.documentElement.style.setProperty(name, value);
}

/**
 * Deletes specified CSS variable.
 * @param name - variable name.
 */
export function deleteCssVar(name: string): void {
  document.documentElement.style.removeProperty(name);
}

```
---
## File: packages/sdk/src/helpers/isColorDark.test.ts

```typescript
import { expect, it } from 'vitest';

import { isColorDark } from './isColorDark.js';

it('should return true in case, the value which is equal to Math.sqrt(0.299 * R * R + 0.587 * G * G + 0.114 * B * B) is less than 120 and false otherwise', () => {
  expect(isColorDark('#17212b')).toBe(true);
  expect(isColorDark('#f5f5f5')).toBe(false);
});

it('should throw an error in case, passed value has not convertable to RGB format', () => {
  expect(() => isColorDark('abc')).toThrow();
});

```
---
## File: packages/sdk/src/helpers/isColorDark.ts

```typescript
import { throwifyFpFn } from '@tma.js/toolkit';
import { toRGBFullFp } from '@tma.js/transformers';
import * as E from 'fp-ts/Either';
import { pipe } from 'fp-ts/function';

/**
 * @param color - color in any format acceptable by the `toRGB` function.
 * @returns True if the color is recognized as dark.
 * @see toRGB
 */
export function isColorDarkFp(color: string): E.Either<Error, boolean> {
  return pipe(
    toRGBFullFp(color),
    E.map(rgb => {
      // Actual formula: hsp = Math.sqrt(0.299 * r * r + 0.587 * g * g + 0.114 * b * b)
      // See: https://stackoverflow.com/a/596243
      return Math.sqrt(
        [0.299, 0.587, 0.114].reduce<number>((acc, modifier, idx) => {
          // Extract part of #RRGGBB pattern and convert it to DEC.
          const dec = parseInt(rgb.slice(1 + (idx * 2), 1 + ((idx + 1) * 2)), 16);
          return acc + (dec * dec * modifier);
        }, 0),
      ) < 120;
    }),
  );
}

/**
 * @see isColorDarkFp
 */
export const isColorDark = throwifyFpFn(isColorDarkFp);

```
---
## File: packages/sdk/src/helpers/navigation.test.ts

```typescript
import { afterEach, expect, it, vi } from 'vitest';

import { isPageReload } from './navigation.js';

afterEach(() => {
  vi.restoreAllMocks();
});

it('should return true if the first navigation entry type is "reload"', () => {
  const expected = { type: 'reload' };
  const spy = vi
    .spyOn(performance, 'getEntriesByType')
    .mockImplementationOnce(() => [expected] as any);

  expect(isPageReload()).toBe(true);
  spy.mockClear().mockImplementation(() => [{ type: 'navigation' }] as any);

  expect(isPageReload()).toBe(false);
});

it('should return false if the first navigation entry is missing', () => {
  vi
    .spyOn(performance, 'getEntriesByType')
    .mockImplementationOnce(() => []);

  expect(isPageReload()).toBe(false);
});

```
---
## File: packages/sdk/src/helpers/navigation.ts

```typescript
/**
 * Returns the first navigation entry from window.performance.
 * @returns First navigation entry or null, in case performance functionality is not supported
 * or navigation entry was not found.
 */
function getFirstNavigationEntry(): PerformanceNavigationTiming | undefined {
  return performance.getEntriesByType('navigation')[0] as PerformanceNavigationTiming | undefined;
}

/**
 * @returns True, if the current page was reloaded.
 * @see https://stackoverflow.com/a/36444134/11894710
 */
export function isPageReload(): boolean {
  const entry = getFirstNavigationEntry();
  return !!entry && entry.type === 'reload';
}

```
---
## File: packages/sdk/src/helpers/removeUndefined.ts

```typescript
import type { UnionRequiredKeys } from '@tma.js/toolkit';

type RemoveUndefined<T> = {
  [K in UnionRequiredKeys<T>]-?: T[K]
};

/**
 * @returns Object with keys having undefined values.
 * @param value - an object to remove undefined values from.
 */
export function removeUndefined<T extends {}>(value: T): RemoveUndefined<T> {
  const result = {} as RemoveUndefined<T>;
  for (const k in value) {
    const v = value[k];
    v !== undefined && ((result as any)[k] = v);
  }
  return result;
}

```
---
## File: packages/sdk/src/helpers/shallowEqual.ts

```typescript
export function shallowEqual<T extends object>(a: T, b: T): boolean {
  const aKeys = Object.keys(a);
  const bKeys = Object.keys(b);
  return aKeys.length !== bKeys.length
    ? false
    : aKeys.every(aKey => {
      return Object.prototype.hasOwnProperty.call(b, aKey)
        && (a as any)[aKey] === (b as any)[aKey];
    });
}

```
---
## File: packages/sdk/src/with-checks/throwifyWithChecksFp.ts

```typescript
import { pipe } from 'fp-ts/function';
import * as O from 'fp-ts/Option';
import { throwifyFpFn, throwifyAnyEither, type AnyFn } from '@tma.js/toolkit';

import type { WithChecksFp, WithChecks } from '@/with-checks/withChecksFp.js';

export function throwifyWithChecksFp<
  Fn extends AnyFn,
  HasSupportCheck extends boolean,
  SupportsMapKeySchema extends string,
>(
  fn: WithChecksFp<Fn, HasSupportCheck, SupportsMapKeySchema>,
): WithChecks<Fn, HasSupportCheck, SupportsMapKeySchema> {
  return Object.assign(throwifyFpFn(fn), {
    ifAvailable(...args: Parameters<Fn>) {
      return pipe(
        fn.ifAvailable(...args),
        O.match(
          () => ({ ok: false }),
          data => ({
            ok: true,
            data: throwifyAnyEither(data),
          }),
        ),
      );
    },
  }) as unknown as WithChecks<Fn, HasSupportCheck, SupportsMapKeySchema>;
}

```
---
## File: packages/sdk/src/with-checks/withChecksFp.ts

```typescript
import {
  type MethodName,
  supports,
  type MethodNameWithVersionedParams,
  type MethodVersionedParams,
} from '@tma.js/bridge';
import { type Computed, computed } from '@tma.js/signals';
import type {
  If,
  IsNever,
  AnyFnAnyEither,
  RightOfReturn,
  LeftOfReturn,
  MaybeMonadReturnTypeToCommon,
  MaybeCommonReturnTypeToMonad,
  AnyFn,
} from '@tma.js/toolkit';
import type { Version } from '@tma.js/types';
import * as O from 'fp-ts/Option';
import * as E from 'fp-ts/Either';
import * as TE from 'fp-ts/TaskEither';

import { FunctionUnavailableError } from '@/errors.js';
import type { MaybeAccessor } from '@/types.js';
import { access } from '@/helpers/access.js';

type IfReturnsTask<Fn extends AnyFnAnyEither, A, B> =
  ReturnType<Fn> extends TE.TaskEither<any, any> ? A : B;

type OptionsBasedRequires<O extends WithChecksOptions<any>> = O extends { requires: any }
  ? true : false;

type OptionsBasedSupports<O extends WithChecksOptions<any>> = O extends { supports: any }
  ? Extract<keyof O['supports'], string> : never;

type OptionsBasedFn<Opts extends WithChecksOptions<any>> = (...args: any[]) => (
  Opts['returns'] extends 'plain'
    ? any
    : Opts['returns'] extends 'promise'
      ? PromiseLike<any>
      : Opts['returns'] extends 'task'
        ? TE.TaskEither<any, any>
        : E.Either<any, any>
);

/**
 * @returns Error text if something is wrong.
 */
export type CustomSupportFn = () => string | undefined;

export type Require =
  | MethodName
  | CustomSupportFn
  | { every: (MethodName | CustomSupportFn)[] }
  | { some: (MethodName | CustomSupportFn)[] };

/**
 * A map where the key is a method name with versioned parameters, and the value is a tuple
 * containing the method and parameter names. The third tuple value is a function accepting
 * the wrapped function arguments and returning true if support check must be applied.
 */
export type SupportsMap<Args extends any[]> = {
  [OptionName: string]: {
    [M in MethodNameWithVersionedParams]: {
      /**
       * Method name.
       * @example 'web_app_set_header_color'
       */
      method: M;
      /**
       * Method version-dependent parameter.
       * @example `color`
       */
      param: MethodVersionedParams<M>;
      /**
       * @returns True if the support function should be called.
       * @param args - function arguments.
       */
      shouldCheck: (...args: Args) => boolean;
    };
  }[MethodNameWithVersionedParams];
};

type WrappedFnReturnType<Fn extends AnyFn> = ReturnType<Fn> extends E.Either<any, any>
  ? E.Either<FunctionUnavailableError | LeftOfReturn<Fn>, RightOfReturn<Fn>>
  : ReturnType<Fn> extends TE.TaskEither<any, any>
    ? TE.TaskEither<FunctionUnavailableError | LeftOfReturn<Fn>, RightOfReturn<Fn>>
    : ReturnType<Fn> extends PromiseLike<infer U>
      ? TE.TaskEither<FunctionUnavailableError, U>
      : E.Either<FunctionUnavailableError, ReturnType<Fn>>;

export type WrappedFn<Fn extends AnyFn> = (...args: Parameters<Fn>) => WrappedFnReturnType<Fn>;

export type WithChecksFp<
  Fn extends AnyFn,
  HasSupportCheck extends boolean,
  SupportsMapKeySchema extends string = never,
> =
  & WrappedFn<Fn>
  & {
  /**
   * A signal returning `true` if the function is available in the current environment and
   * conditions.
   *
   * To be more accurate, the method checks the following:
   * 1. The current environment is Telegram Mini Apps.
   * 2. The SDK package is initialized (if this requirement is specified).
   * 3. If passed, the `isSupported` signal returned true.
   * 4. If passed, the `isMounted` signal returned true.
   *
   * *You should use this function when possible because it provides must-have code security
   * mechanisms and makes a developer sure that he is using the package properly.*
   *
   * @returns True if the function is available in the current environment.
   * @example
   * if (backButton.show.isAvailable()) {
   *   backButton.show();
   * }
   */
    isAvailable: Computed<boolean>;
    /**
   * Calls the function only in case it is available.
   *
   * It uses the `isAvailable` internally to check if the function is available for call.
   * @example
   * backButton.show.ifAvailable();
   */
    ifAvailable(...args: Parameters<Fn>): O.Option<MaybeCommonReturnTypeToMonad<Fn>>;
  }
  & If<HasSupportCheck, {
  /**
   * The signal returning `true` if the function is supported by the Telegram client,
   * including some possible additional conditions.
   *
   * It is highly recommended to use this signal only in certain narrow cases when only the
   * function support check is required, but not its availability.
   *
   * This signal is not applying additional operations like checking if the current environment
   * is Mini Apps and the SDK is initialized.
   *
   * To check if the function is available for use, use the `isAvailable` signal.
   *
   * @returns True if this function is supported.
   * @see isAvailable
   * @example
   * if (backButton.show.isSupported()) {
   *   console.log('The method is supported');
   * }
   */
    isSupported: Computed<boolean>;
  }, {}>
  & If<IsNever<SupportsMapKeySchema>, {}, {
  /**
   * A map where the key is the function-specific option name and value is a signal indicating
   * if it is supported by the current environment.
   * @example
   * if (miniApp.setHeaderColor.isAvailable()) {
   *   if (miniApp.setHeaderColor.supports('rgb')) {
   *     miniApp.setHeaderColor('#ffaabb');
   *   } else {
   *     miniApp.setHeaderColor('bg_color');
   *   }
   * }
   */
    supports: (key: SupportsMapKeySchema) => boolean;
  }>;

export type WithChecks<
  Fn extends AnyFn,
  HasSupportCheck extends boolean,
  SupportsMapKeySchema extends string = never,
> =
  & ((...args: Parameters<Fn>) => MaybeMonadReturnTypeToCommon<Fn>)
  & Omit<WithChecksFp<Fn, HasSupportCheck, SupportsMapKeySchema>, 'ifAvailable'>
  & {
  /**
   * Calls the function only in case it is available.
   *
   * It uses the `isAvailable` internally to check if the function is available for call.
   * @example
   * backButton.show.ifAvailable();
   */
    ifAvailable(...args: Parameters<Fn>):
      | { ok: true; data: MaybeMonadReturnTypeToCommon<Fn> }
      | { ok: false };
  };

export interface WithChecksOptions<Fn extends AnyFn> {
  /**
   * Signal returning true if the owning component is mounted.
   */
  isMounted?: () => boolean;
  /**
   * Signal returning true if the owning component is mounting.
   */
  isMounting?: () => boolean;
  /**
   * A value determining the function requirements. This will enable additional checks for
   * the function before being called.
   */
  requires?: Require;
  /**
   * A signal to retrieve the current Telegram Mini Apps version or the value itself.
   */
  isTma: MaybeAccessor<boolean>;
  /**
   * A map where the key is a method name with versioned parameters, and the value is a tuple
   * containing the method and parameter names. The third tuple value is a function accepting
   * the wrapped function arguments and returning true if support check must be applied.
   */
  supports?: SupportsMap<Parameters<Fn>>;
  /**
   * A signal to retrieve the current Telegram Mini Apps version or the value itself.
   */
  version?: MaybeAccessor<Version>;
  /**
   * Allows to determine what exactly should be returned from the function - TaskEither or Either.
   * There is no other way to know it until the function itself is called, but we need to perform
   * some checks before calling it and return a valid value based on the function return type.
   */
  returns: Fn extends AnyFnAnyEither
    ? IfReturnsTask<Fn, 'task', 'either'>
    : ReturnType<Fn> extends PromiseLike<any> ? 'promise' : 'plain';
}

export function withChecksFp<Fn extends AnyFn, O extends WithChecksOptions<Fn>>(
  fn: Fn,
  options: O,
): WithChecksFp<Fn, OptionsBasedRequires<O>, OptionsBasedSupports<O>> {
  const version = computed(() => access(options.version) || '100');
  const isTma = computed(() => access(options.isTma));

  // Simplify the isSupported value to work with an array of validators or a single object.
  const { requires: optionsIsSupported, returns } = options;
  const isSupportedSimplified = optionsIsSupported
    ? typeof optionsIsSupported === 'object'
      ? optionsIsSupported
      : { every: [optionsIsSupported] }
    : undefined;

  /**
   * @param optionName - target option.
   * @returns True if specified option is supported.
   */
  const isOptionSupported = (optionName: string): boolean => {
    if (!options.supports) {
      return true;
    }
    const optionSettings = options.supports[optionName];
    return supports(optionSettings.method, optionSettings.param, version());
  };

  /**
   * @returns All found errors according to the isSupported variable value.
   */
  const calculateSupportError = (): string | undefined => {
    // isSupported was not specified. In this case, we assume that the function has no
    // dependencies and is always supported.
    if (!isSupportedSimplified) {
      return;
    }
    const [mode, requirements] = 'every' in isSupportedSimplified
      ? ['every', isSupportedSimplified.every] as const
      : ['some', isSupportedSimplified.some] as const;

    for (let i = 0; i < requirements.length; i++) {
      const requirement = requirements[i];
      const error = typeof requirement === 'function'
        ? requirement()
        : supports(requirement, version())
          ? undefined
          : `it is unsupported in Mini Apps version ${version()}`;
      // Return only if there was an error and all requirements must be satisfied, or
      // this was the last one requirement (when some of the requirements must be met).
      if (error && (mode === 'every' || i === requirements.length - 1)) {
        return error;
      }
    }
  };

  /**
   * @returns An error related to supports.<name> check.
   */
  const calculateOptionSupportError = (
    ...args: Parameters<Fn>
  ): string | undefined => {
    for (const k in options.supports) {
      if (options.supports[k].shouldCheck(...args) && !isOptionSupported(k)) {
        return `option ${k} is not supported in Mini Apps version ${version()}`;
      }
    }
  };

  const isSupported = computed(() => !calculateSupportError());
  const isInitialized = computed(() => version() !== '0.0');
  const isMounted = computed(() => (options.isMounted ? options.isMounted() : true));
  const isAvailable = computed(
    () => isTma()
      && isInitialized()
      && isSupported()
      && isMounted(),
  );

  const wrapError = (message: string): WrappedFnReturnType<Fn> => {
    const err = new FunctionUnavailableError(message);
    return (['task', 'promise'].includes(options.returns)
      ? TE.left(err)
      : E.left(err)) as WrappedFnReturnType<Fn>;
  };

  const call = (...args: Parameters<Fn>): MaybeCommonReturnTypeToMonad<Fn> => {
    if (returns === 'plain') {
      return E.tryCatch(() => fn(...args), e => e) as MaybeCommonReturnTypeToMonad<Fn>;
    }
    if (returns === 'promise') {
      return TE.tryCatch(() => fn(...args), e => e) as MaybeCommonReturnTypeToMonad<Fn>;
    }
    return fn(...args);
  };

  return Object.assign(
    (...args: Parameters<Fn>): WrappedFnReturnType<Fn> => {
      const errMessagePrefix = 'Unable to call function:';
      if (!isTma()) {
        return wrapError(`${errMessagePrefix} it can't be called outside Mini Apps`);
      }
      if (!isInitialized()) {
        return wrapError(`${errMessagePrefix} the SDK was not initialized. Use the SDK init() function`);
      }
      const supportErr = calculateSupportError();
      if (supportErr) {
        return wrapError(`${errMessagePrefix} ${supportErr}`);
      }
      const supportsOptionErr = calculateOptionSupportError(...args);
      if (supportsOptionErr) {
        return wrapError(`${errMessagePrefix} ${supportsOptionErr}`);
      }
      if (!isMounted()) {
        const message = options.isMounting?.()
          ? 'mounting. Wait for the mount completion'
          : 'unmounted. Use the mount() method';
        return wrapError(`${errMessagePrefix} the component is ${message}`);
      }
      return call(...args) as WrappedFnReturnType<Fn>;
    },
    fn,
    {
      isAvailable,
      ifAvailable(...args: Parameters<Fn>): O.Option<MaybeCommonReturnTypeToMonad<Fn>> {
        return isAvailable() ? O.some(call(...args)) : O.none;
      },
    },
    isSupportedSimplified ? { isSupported } : {},
    options.supports ? { supports: isOptionSupported } : {},
  );
}

export function createWithChecksFp<O extends WithChecksOptions<any>>(options: O) {
  return <Fn extends OptionsBasedFn<O>>(fn: Fn): WithChecksFp<
    Fn,
    OptionsBasedRequires<O>,
    OptionsBasedSupports<O>
  > => withChecksFp(fn, options);
}

```
---
## File: packages/sdk/src/errors.ts

```typescript
import { errorClass, errorClassWithData } from 'error-kid';
import type { BaseIssue } from 'valibot';

function msgToTuple(message?: string): [string?] {
  return [message];
}

export class ValidationError extends errorClassWithData<
  { input: unknown; issues: BaseIssue<any>[] },
  [input: unknown, issues: BaseIssue<any>[]]
>(
  'ValidationError',
  (input, issues) => ({ input, issues }),
  'Validation error',
) {
}

export class CSSVarsBoundError extends errorClass(
  'CSSVarsBoundError',
  'CSS variables are already bound',
) {
}

export class NotAvailableError extends errorClass<[message: string]>(
  'NotAvailableError',
  msgToTuple,
) {
}

export class InvalidEnvError extends errorClass<[message?: string]>(
  'InvalidEnvError',
  msgToTuple,
) {
}

export class FunctionUnavailableError extends errorClass<[message?: string]>(
  'FunctionNotAvailableError',
  msgToTuple,
) {
}

export class InvalidArgumentsError extends errorClass<[message: string, cause?: unknown]>(
  'InvalidArgumentsError',
  (message, cause) => [message, { cause }],
) {
}

export class ConcurrentCallError extends errorClass<[message: string]>(
  'ConcurrentCallError',
  msgToTuple,
) {
}

export class SetEmojiStatusError extends errorClass<[error: string]>(
  'SetEmojiStatusError',
  error => [`Failed to set emoji status: ${error}`],
) {
}

export class AccessDeniedError extends errorClass<[message: string]>(
  'AccessDeniedError',
  msgToTuple,
) {
}

export class FullscreenFailedError extends errorClass<[message: string]>(
  'FullscreenFailedError',
  msgToTuple,
) {
}

export class ShareMessageError extends errorClass<[error: string]>(
  'ShareMessageError',
  msgToTuple,
) {
}

export class UnknownThemeParamsKeyError extends errorClass<[key: string]>(
  'UnknownThemeParamsKeyError',
  key => [`Unknown theme params key passed: ${key}`],
) {
}

```
---
## File: packages/sdk/src/index.ts

```typescript
export * from './features/BackButton/exports.js';
export * from './features/Biometry/exports.js';
export * from './features/ClosingBehavior/exports.js';
export * from './features/CloudStorage/exports.js';
export * from './features/emoji-status/exports.js';
export * from './features/HapticFeedback/exports.js';
export * from './features/home-screen/exports.js';
export * from './features/InitData/exports.js';
export * from './features/Invoice/exports.js';
export * from './features/links/exports.js';
export * from './features/LocationManager/exports.js';
export * from './features/MainButton/exports.js';
export * from './features/MiniApp/exports.js';
export * from './features/Popup/exports.js';
export * from './features/privacy/exports.js';
export * from './features/QrScanner/exports.js';
export * from './features/SecondaryButton/exports.js';
export * from './features/SettingsButton/exports.js';
export * from './features/SwipeBehavior/exports.js';
export * from './features/ThemeParams/exports.js';
export * from './features/uncategorized/exports.js';
export * from './features/Viewport/exports.js';

export { createRequestId } from './globals/createRequestId.js';
export { invokeCustomMethod } from './globals/invokeCustomMethod.js';
export { postEvent, postEventFp } from './globals/post-event.js';
export { request, requestFp } from './globals/request.js';

export { isColorDark, isColorDarkFp } from './helpers/isColorDark.js';
export * from './errors.js';
export { init, initFp, type InitOptions } from './init.js';
export type { AsyncOptions } from './types.js';

export {
  //#region env
  isTMA,
  isTMAFp,
  type isTMAError,
  mockTelegramEnv,
  //#endregion
  //#region events
  emitEvent,
  off,
  offAll,
  on,
  type EventListener,
  type SubscribeListener,
  type Events,
  type WriteAccessRequestedStatus,
  type EmojiStatusAccessRequestedStatus,
  type BiometryAuthRequestStatus,
  type BiometryTokenUpdateStatus,
  type BiometryType,
  type EmojiStatusFailedError,
  type EventName,
  type EventPayload,
  type EventWithoutPayload,
  type EventWithPayload,
  type PhoneRequestedStatus,
  type FullScreenErrorStatus,
  type HomeScreenStatus,
  type InvoiceStatus,
  type SafeAreaInsets,
  //#endregion
  //#region methods
  createPostEvent,
  type CreatePostEventMode,
  type OnUnsupportedFn,
  getReleaseVersion,
  type PostEventFn,
  type PostEventFpFn,
  type PostEventError,
  supports,
  type AnyHapticFeedbackParams,
  type AnyInvokeCustomMethodParams,
  type CreateMethodParams,
  type CustomMethodName,
  type ImpactHapticFeedbackParams,
  type ImpactHapticFeedbackStyle,
  type CustomMethodsParams,
  type CustomMethodParams,
  type MethodName,
  type MethodVersionedParams,
  type NotificationHapticFeedbackParams,
  type NotificationHapticFeedbackType,
  type Methods,
  type SelectionHapticFeedbackParams,
  type MethodNameWithOptionalParams,
  type MethodNameWithoutParams,
  type MethodNameWithRequiredParams,
  type MethodNameWithVersionedParams,
  type MethodParams,
  type PopupParams,
  type BackgroundColor,
  type BottomBarColor,
  type HeaderColorKey,
  type PopupButton,
  type OpenLinkBrowser,
  type SecondaryButtonPosition,
  type SwitchInlineQueryChatType,
  //#endregion
  //#region utils
  type InvokeCustomMethodFn,
  type InvokeCustomMethodOptions,
  type InvokeCustomMethodFpFn,
  type InvokeCustomMethodError,
  type InvokeCustomMethodFpOptions,
  type RequestCaptureEventFn,
  type RequestCaptureEventsFn,
  type RequestCaptureFn,
  type RequestCaptureFnEventsPayload,
  type RequestFn,
  type RequestOptions,
  type RequestResult,
  type RequestError,
  type RequestFpOptions,
  type RequestFpFn,
  //#endregion
  //#region misc
  applyPolyfills,
  decodeBase64Url,
  encodeBase64Url,
  decodeBase64UrlFp,
  type DecodeBase64UrlError,
  LaunchParamsRetrieveError,
  InvalidLaunchParamsError,
  InvokeCustomMethodFailedError,
  MethodParameterUnsupportedError,
  MethodUnsupportedError,
  UnknownEnvError,
  setDebug,
  debug,
  logger,
  setTargetOrigin,
  targetOrigin,
  retrieveLaunchParams,
  retrieveRawInitData,
  retrieveRawInitDataFp,
  retrieveRawLaunchParams,
  retrieveRawLaunchParamsFp,
  retrieveLaunchParamsFp,
  type RetrieveLaunchParamsError,
  type RetrieveLaunchParamsResult,
  type RetrieveRawInitDataError,
  type RetrieveRawLaunchParamsError,
  createStartParam,
  createStartParamFp,
  decodeStartParam,
  decodeStartParamFp,
  isSafeToCreateStartParam,
  //#endregion
  //#region Re-exports
  createLogger,
  deepSnakeToCamelObjKeys,
  type DeepConvertSnakeKeysToCamelCase,
  type Logger,
  type LoggerFn,
  type LoggerForceFn,
  type LoggerOptions,
  type LogLevel,
  CancelledError,
  TimeoutError,
  //#endregion
} from '@tma.js/bridge';
export {
  parseInitDataQuery,
  parseInitDataQueryFp,
  type ParseInitDataQueryError,
  parseLaunchParamsQuery,
  parseLaunchParamsQueryFp,
  type ParseLaunchParamsQueryError,
  isRGBShort,
  isRGBAShort,
  isRGB,
  isRGBA,
  isAnyRGB,
  toRGBFullFp,
  toRGBFp,
  toRGB,
  toRGBFull,
  serializeInitDataQuery,
  type InitDataLike,
  serializeLaunchParamsQuery,
  type LaunchParamsLike,
} from '@tma.js/transformers';
export type {
  RGB,
  User,
  Chat,
  InitData,
  ChatType,
  Platform,
  ThemeParams,
  LaunchParams,
  KnownThemeParamsKey,
  Version,
} from '@tma.js/types';

```
---
## File: packages/sdk/src/init.test.ts

```typescript
import { vi, it, expect, beforeEach, describe } from 'vitest';
import { createWindow } from 'test-utils';
import { emitEvent } from '@tma.js/bridge';
import * as E from 'fp-ts/Either';

import { mockMiniAppsEnv, restoreState } from '@test-utils/utils.js';
import { version } from '@/globals/version.js';

import { init } from './init.js';

beforeEach(restoreState);

describe('global signals', () => {
  describe('version', () => {
    it('should use passed', () => {
      mockMiniAppsEnv();
      init({ version: '1.1' });
      expect(version()).toBe('1.1');
    });

    it('should retrieve from env if not passed', () => {
      mockMiniAppsEnv({
        tgWebAppPlatform: 'macos',
        tgWebAppThemeParams: {},
        tgWebAppVersion: '1.2',
      });
      init();
      expect(version()).toBe('1.2');
    });
  });
});

it(
  'should listen to "reload_iframe" event, call "iframe_will_reload" method and window.location.reload on receive',
  () => {
    const reloadSpy = vi.fn();
    createWindow({ location: { reload: reloadSpy } as any });

    const postEvent = vi.fn(() => E.right(undefined));
    init({ postEvent, version: '999', themeParams: {}, isInlineMode: false });

    expect(postEvent).toHaveBeenCalledOnce();
    expect(postEvent).toHaveBeenCalledWith('iframe_ready', { reload_supported: true });
    postEvent.mockClear();

    emitEvent('reload_iframe');
    expect(postEvent).toHaveBeenCalledOnce();
    expect(postEvent).toHaveBeenCalledWith('iframe_will_reload');
    expect(reloadSpy).toHaveBeenCalledOnce();
  },
);

it(
  'should append to document.head <style/> element with id "telegram-custom-styles", containing styles from received "set_custom_style" event',
  () => {
    let style: any;
    const createElement = vi.fn(() => ({}));
    const appendChild = vi.fn(c => style = c);

    vi.spyOn(global, 'document', 'get').mockImplementation(() => ({
      createElement,
      head: { appendChild },
    }) as any);

    init({
      postEvent: vi.fn(() => E.right(undefined)),
      version: '999',
      themeParams: {},
      isInlineMode: false,
    });
    expect(createElement).toHaveBeenCalledOnce();
    expect(createElement).toHaveBeenCalledWith('style');
    expect(appendChild).toHaveBeenCalledOnce();
    expect(appendChild).toHaveBeenCalledWith({ id: 'telegram-custom-styles' });

    emitEvent('set_custom_style', '.root{}');
    expect(style.innerHTML).toBe('.root{}');
  },
);

it(
  'should remove "reload_iframe" and "set_custom_style" event listeners, remove appended <style/> element if returned function was called',
  () => {
    let style: any;
    const reloadSpy = vi.fn();
    const createElement = vi.fn(() => ({}));
    const appendChild = vi.fn(c => style = c);
    const removeChild = vi.fn();

    createWindow({ location: { reload: reloadSpy } as any });
    vi.spyOn(global, 'document', 'get').mockImplementation(() => ({
      createElement,
      head: { appendChild, removeChild },
    }) as any);

    const postEvent = vi.fn(() => E.right(undefined));
    const cleanup = init({
      postEvent,
      version: '999',
      themeParams: {},
      isInlineMode: false,
    });

    // Check if style element was created and appended.
    expect(createElement).toHaveBeenCalledOnce();
    expect(createElement).toHaveBeenCalledWith('style');
    expect(appendChild).toHaveBeenCalledOnce();
    expect(appendChild).toHaveBeenCalledWith({ id: 'telegram-custom-styles' });

    // Check if postEvent function was called only with "iframe_ready".
    expect(postEvent).toHaveBeenCalledOnce();
    expect(postEvent).toHaveBeenCalledWith('iframe_ready', { reload_supported: true });

    // Perform cleanup and check if event listeners were removed, as well as create style tag.
    cleanup();

    expect(removeChild).toHaveBeenCalledOnce();
    expect(removeChild).toHaveBeenCalledWith(style);

    emitEvent('reload_iframe');
    emitEvent('set_custom_style', '.root{}');

    expect(postEvent).toHaveBeenCalledOnce();
    expect(reloadSpy).not.toHaveBeenCalled();
    expect(style).toStrictEqual({ id: 'telegram-custom-styles' });
  },
);

```
---
## File: packages/sdk/src/init.ts

```typescript
import {
  on,
  logger,
  retrieveLaunchParamsFp,
  type RetrieveLaunchParamsError,
  type PostEventError,
} from '@tma.js/bridge';
import { createCbCollector, throwifyFpFn } from '@tma.js/toolkit';
import type { Version, ThemeParams } from '@tma.js/types';
import type { PostEventFpFn } from '@tma.js/bridge';
import * as E from 'fp-ts/Either';
import { pipe } from 'fp-ts/function';

import { version } from '@/globals/version.js';
import { postEventFpSignal, postEventFp, postEvent } from '@/globals/post-event.js';
import { isInlineMode } from '@/globals/inline-mode.js';
import { themeParams } from '@/globals/themeParams.js';

export interface InitOptions {
  /**
   * True if SDK should accept styles sent from the Telegram application.
   * @default true
   */
  acceptCustomStyles?: boolean;
  /**
   * True if the application is launched in inline mode.
   * @default Will be calculated based on the launch parameters' tgWebAppBotInline field.
   */
  isInlineMode?: boolean;
  /**
   * A custom `postEvent` function to use across the package.
   * @default tma.js/bridge's postEventFp function will be used.
   */
  postEvent?: PostEventFpFn;
  /**
   * Mini application theme parameters.
   * @default Will be calculated based on the launch parameters' tgWebAppThemeParams field.
   */
  themeParams?: ThemeParams;
  /**
   * Telegram Mini Apps version supported by the Telegram client.
   * @default Will be calculated based on the launch parameters' tgWebAppVersion field.
   */
  version?: Version;
}

/**
 * Initializes the SDK allowing it to properly handle events, sent from the native Telegram
 * application. This function also configure the package's global dependencies (functions,
 * variables used across the package).
 * @param options - function options.
 * @returns A function, to perform a cleanup.
 */
export function initFp(
  options: InitOptions = {},
): E.Either<RetrieveLaunchParamsError | PostEventError, VoidFunction> {
  const {
    version: optionsVersion,
    isInlineMode: optionsInlineMode,
    themeParams: optionsThemeParams,
  } = options;

  if (optionsVersion && typeof optionsInlineMode === 'boolean' && optionsThemeParams) {
    version.set(optionsVersion);
    isInlineMode.set(optionsInlineMode);
    themeParams.set(optionsThemeParams);
  } else {
    const error = pipe(retrieveLaunchParamsFp(), E.matchW(
      err => err,
      lp => {
        version.set(optionsVersion || lp.tgWebAppVersion);
        isInlineMode.set(typeof optionsInlineMode === 'boolean'
          ? optionsInlineMode
          : !!lp.tgWebAppBotInline);
        themeParams.set(optionsThemeParams || lp.tgWebAppThemeParams);
      },
    ));
    if (error) {
      return E.left(error);
    }
  }
  if (options.postEvent) {
    postEventFpSignal.set(options.postEvent);
  }

  const [addCleanup, cleanup] = createCbCollector(
    on('reload_iframe', () => {
      logger().log('Received a request to reload the page');
      postEvent('iframe_will_reload');
      window.location.reload();
    }),
  );

  const { acceptCustomStyles = true } = options;
  if (acceptCustomStyles) {
    const style = document.createElement('style');
    style.id = 'telegram-custom-styles';
    document.head.appendChild(style);

    addCleanup(
      on('set_custom_style', html => {
        // It is safe to use innerHTML here as long as style tag has a special behavior related
        // to the specified content.
        // In case any script will be passed here, it will not be executed, so XSS is not possible.
        style.innerHTML = html;
      }),
      () => {
        document.head.removeChild(style);
      },
    );
  }

  // Notify Telegram that the application is ready.
  //
  // This will result in sending style tag html content from the Telegram web application.
  // We should call this method also to start receiving "reload_iframe" events from the Telegram
  // application.
  //
  // It really has no effect outside non-Telegram web environment.
  return pipe(
    postEventFp('iframe_ready', { reload_supported: true }),
    E.map(() => {
      logger().log('The package was initialized');
      return cleanup;
    }),
  );
}

/**
 * @see initFp
 */
export const init = throwifyFpFn(initFp);

```
---
## File: packages/sdk/src/types.ts

```typescript
import type { BetterPromiseOptions } from 'better-promises';

/**
 * Async options allowed to be used in package's public functions.
 */
export type AsyncOptions = Pick<BetterPromiseOptions, 'abortSignal' | 'timeout'>;

export type MaybeAccessor<T> = T | (() => T);

```
---
## File: packages/sdk/test-utils/predefined/testIsSupportedGlobal.ts

```typescript
import { beforeEach } from 'vitest';
import { testIsSupportedPure } from '@test-utils/predefined/testIsSupportedPure.js';
import { setVersion } from '@test-utils/utils.js';

import { resetGlobals } from '@/globals/resetGlobals.js';

/**
 * Tests if the isSupported property works correctly.
 */
export function testIsSupportedGlobal(
  obj: { isSupported(): boolean },
  minVersion: string,
) {
  beforeEach(resetGlobals);

  testIsSupportedPure(
    version => {
      setVersion(version);
      return obj;
    },
    minVersion,
  );
}
```
---
## File: packages/sdk/test-utils/predefined/testIsSupportedPure.ts

```typescript
import { it, expect } from 'vitest';
import { getPrevVersion } from '@test-utils/utils.js';

/**
 * Tests if the isSupported property works correctly.
 */
export function testIsSupportedPure(
  instantiate: (version: string) => {
    isSupported: () => boolean;
  },
  minVersion: string,
) {
  it(`should return false if version is < ${minVersion}`, () => {
    expect(instantiate(getPrevVersion(minVersion)).isSupported()).toBe(false);
  });

  it(`should return true if version is >= ${minVersion}`, () => {
    expect(instantiate(minVersion).isSupported()).toBe(true);
  });
}

```
---
## File: packages/sdk/test-utils/predefined/testSafetyGlobal.ts

```typescript
import { beforeEach, describe, expect, it } from 'vitest';
import { Version } from '@tma.js/types';

import { FunctionUnavailableError } from '@/errors.js';

import { getPrevVersion, mockMiniAppsEnv, setVersion } from '../utils.js';

import { testIsSupportedGlobal } from '@test-utils/predefined/testIsSupportedGlobal.js';
import { resetGlobals } from '@/globals/resetGlobals.js';

interface BaseOptions<C> {
  /**
   * Creates a new component instance.
   * @param opts
   */
  instantiate: () => C;
  /**
   * Mounts the component.
   */
  mount?: (component: C) => void | Promise<void>;
  /**
   * Attempts to call the component method.
   * @param component
   */
  try: (component: C) => any;
}

interface VersionedOptions<C> extends BaseOptions<C> {
  /**
   * Retrieves component method.
   * @param component
   */
  get: (component: C) => {
    isSupported(): boolean;
    isAvailable(): boolean;
  };
  /**
   * Minimal version for the method to be supported.
   */
  minVersion: Version;
}

interface VersionlessOptions<C> extends BaseOptions<C> {
  /**
   * Retrieves component method.
   * @param component
   */
  get: (component: C) => {
    isAvailable: () => boolean;
  };
}

export function testSafetyGlobal<C>(options: VersionedOptions<C>): void;
export function testSafetyGlobal<C>(options: VersionlessOptions<C>): void;
export function testSafetyGlobal<C>({
  instantiate,
  try: tryCall,
  get,
  mount,
  ...options
}: VersionedOptions<C> | VersionlessOptions<C>) {
  const hasMinVersion = 'minVersion' in options;
  const versions = hasMinVersion
    ? { prev: getPrevVersion(options.minVersion), min: options.minVersion }
    : { prev: '99.9', min: '100' };

  describe.runIf(hasMinVersion)('isSupported', () => {
    testIsSupportedGlobal(
      get(instantiate()) as {
        isAvailable(): boolean;
        isSupported(): boolean;
      },
      versions.min,
    );
  });

  describe('isAvailable', () => {
    beforeEach(resetGlobals);

    it('should return false if not mini apps env', () => {
      setVersion(versions.min);
      expect(get(instantiate()).isAvailable()).toBe(false);
    });

    describe('mini apps env', () => {
      beforeEach(() => {
        mockMiniAppsEnv();
      });

      describe.runIf(hasMinVersion)(() => {
        it('should return false if version is "0.0" (SDK not initialized)', () => {
          expect(get(instantiate()).isAvailable()).toBe(false);
        });

        it(`should return false if version is less than ${versions.min}`, () => {
          setVersion(versions.prev);
          expect(get(instantiate()).isAvailable()).toBe(false);
        });

        it.runIf(!mount)(`should return true if version is ${versions.min}`, () => {
          setVersion(versions.min);
          expect(get(instantiate()).isAvailable()).toBe(true);
        });
      });

      describe.runIf(mount)(() => {
        it('should return false if component is not mounted', () => {
          setVersion(versions.min);
          expect(get(instantiate()).isAvailable()).toBe(false);
        });

        describe('component is mounted', () => {
          it.runIf(hasMinVersion)(`should return true if version is ${versions.min}`, async () => {
            setVersion(versions.min);
            const component = instantiate();
            await mount!(component);
            expect(get(component).isAvailable()).toBe(true);
          });

          it.runIf(!hasMinVersion)(
            'should return true if mini apps env and component is mounted',
            async () => {
              const component = instantiate();
              await mount!(component);
              expect(get(component).isAvailable()).toBe(true);
            },
          );
        });
      });
    });
  });

  describe('()', () => {
    describe('not mini apps env', () => {
      it('should throw FunctionUnavailableError', () => {
        setVersion(versions.min);
        expect(() => tryCall(instantiate())).toThrow(
          new FunctionUnavailableError(
            'Unable to call function: it can\'t be called outside Mini Apps',
          ),
        );
      });
    });

    describe('mini apps env', () => {
      beforeEach(() => {
        mockMiniAppsEnv();
      });

      describe('package uninitialized (version is "0.0")', () => {
        it.runIf(hasMinVersion)('should throw FunctionUnavailableError', () => {
          expect(() => tryCall(instantiate())).toThrow(new FunctionUnavailableError(
            'Unable to call function: the SDK was not initialized. Use the SDK init() function',
          ));
        });
      });

      describe('package initialized', () => {
        describe.runIf(hasMinVersion)(() => {
          describe(`minimal version not satisfied (${versions.min})`, () => {
            it('should throw FunctionUnavailableError', () => {
              setVersion(versions.prev);
              expect(() => tryCall(instantiate())).toThrow(
                new FunctionUnavailableError(
                  `Unable to call function: it is unsupported in Mini Apps version ${versions.prev}`,
                ),
              );
            });
          });

          describe.runIf(mount)(`minimal version satisfied (${versions.min})`, () => {
            describe('component is not mounted', () => {
              it('should throw FunctionUnavailableError', () => {
                setVersion(versions.min);
                expect(() => tryCall(instantiate())).toThrow(
                  new FunctionUnavailableError(
                    'Unable to call function: the component is unmounted. Use the mount() method',
                  ),
                );
              });
            });

            describe('component is mounted', () => {
              it('should not throw', async () => {
                setVersion(versions.min);
                const component = instantiate();
                await mount!(component);
                expect(() => tryCall(component)).not.toThrow();
              });
            });
          });
        });

        describe.runIf(!hasMinVersion && mount)(() => {
          describe('component is not mounted', () => {
            it('should throw FunctionUnavailableError', () => {
              setVersion(versions.min);
              expect(() => tryCall(instantiate())).toThrow(
                new FunctionUnavailableError(
                  'Unable to call function: the component is unmounted. Use the mount() method',
                ),
              );
            });
          });

          describe('component is mounted', () => {
            it('should not throw', async () => {
              setVersion(versions.min);
              const component = instantiate();
              await mount!(component);
              expect(() => tryCall(component)).not.toThrow();
            });
          });
        });
      });
    });
  });
}

```
---
## File: packages/sdk/test-utils/predefined/testSafetyPure.ts

```typescript
import { describe, expect, it } from 'vitest';
import { Version } from '@tma.js/types';

import { FunctionUnavailableError } from '@/errors.js';

import { getPrevVersion } from '../utils.js';

import { testIsSupportedPure } from './testIsSupportedPure.js';

interface BaseOptions<C> {
  /**
   * Mounts the component.
   */
  mount?: (component: C) => void | Promise<void>;
  /**
   * Attempts to call the component method.
   * @param component
   */
  try: (component: C) => any;
}

interface VersionedOptions<C> extends BaseOptions<C> {
  /**
   * Retrieves component method.
   * @param component
   */
  get: (component: C) => {
    isSupported(): boolean;
    isAvailable(): boolean;
  };
  /**
   * Creates a new component instance.
   * @param opts
   */
  instantiate: (opts: { isTma: boolean; version: string }) => C;
  /**
   * Minimal version for the method to be supported.
   */
  minVersion: Version;
}

interface VersionlessOptions<C> extends BaseOptions<C> {
  /**
   * Retrieves component method.
   * @param component
   */
  get: (component: C) => {
    isAvailable: () => boolean;
  };
  /**
   * Creates a new component instance.
   * @param opts
   */
  instantiate: (opts: { isTma: boolean }) => C;
}

export function testSafetyPure<C>(options: VersionedOptions<C>): void;
export function testSafetyPure<C>(options: VersionlessOptions<C>): void;
export function testSafetyPure<C>({
  instantiate,
  try: tryCall,
  get,
  mount,
  ...options
}: VersionedOptions<C> | VersionlessOptions<C>) {
  const hasMinVersion = 'minVersion' in options;
  const versions = hasMinVersion
    ? { prev: getPrevVersion(options.minVersion), min: options.minVersion }
    : { prev: '99.9', min: '100' };

  if (hasMinVersion) {
    describe('isSupported', () => {
      testIsSupportedPure(
        version => get(instantiate({ isTma: true, version })) as {
          isAvailable(): boolean;
          isSupported(): boolean;
        },
        versions.min,
      );
    });
  }

  describe('isAvailable', () => {
    it('should return false if not mini apps env', () => {
      expect(get(instantiate({ isTma: false, version: versions.min })).isAvailable()).toBe(false);
    });

    if (hasMinVersion || mount) {
      describe('mini apps env', () => {
        if (hasMinVersion) {
          it('should return false if version is "0.0" (SDK not initialized)', () => {
            expect(get(instantiate({ isTma: true, version: '0.0' })).isAvailable()).toBe(false);
          });

          it(`should return false if version is less than ${versions.min}`, () => {
            expect(get(instantiate({
              isTma: true,
              version: versions.prev,
            })).isAvailable()).toBe(false);
          });

          if (!mount) {
            it(`should return true if version is ${versions.min}`, () => {
              expect(get(instantiate({ isTma: true, version: versions.min })).isAvailable())
                .toBe(true);
            });
          }
        }

        if (mount) {
          it('should return false if component is not mounted', () => {
            expect(
              get(instantiate({ isTma: true, version: versions.min })).isAvailable(),
            ).toBe(false);
          });

          describe('component is mounted', () => {
            if (hasMinVersion) {
              it(
                `should return true if version is ${versions.min}`,
                async () => {
                  const component = instantiate({ isTma: true, version: versions.min });
                  await mount!(component);
                  expect(get(component).isAvailable()).toBe(true);
                },
              );
            } else {
              it(
                'should return true if mini apps env and component is mounted',
                async () => {
                  const component = instantiate({ isTma: true, version: '0.0' });
                  await mount!(component);
                  expect(get(component).isAvailable()).toBe(true);
                },
              );
            }
          });
        }
      });
    }
  });

  describe('()', () => {
    describe('not mini apps env', () => {
      it('should throw FunctionUnavailableError', async () => {
        await expect(
          (async () => tryCall(instantiate({ isTma: false, version: versions.min })))(),
        )
          .rejects
          .toStrictEqual(
            new FunctionUnavailableError(
              'Unable to call function: it can\'t be called outside Mini Apps',
            ),
          );
      });
    });

    if (hasMinVersion || mount) {
      describe('mini apps env', () => {
        if (hasMinVersion) {
          describe('package uninitialized (version is "0.0")', () => {
            it('should throw FunctionUnavailableError', async () => {
              await expect(
                (async () => tryCall(instantiate({ isTma: true, version: '0.0' })))(),
              )
                .rejects
                .toStrictEqual(new FunctionUnavailableError(
                  'Unable to call function: the SDK was not initialized. Use the SDK init() function',
                ));
            });
          });
        }

        if (hasMinVersion || mount) {
          describe('package initialized', () => {
            if (hasMinVersion) {
              describe(`minimal version not satisfied (${versions.min})`, () => {
                it('should throw FunctionUnavailableError', async () => {
                  await expect(
                    (async () => tryCall(instantiate({ isTma: true, version: versions.prev })))(),
                  )
                    .rejects
                    .toStrictEqual(
                      new FunctionUnavailableError(
                        `Unable to call function: it is unsupported in Mini Apps version ${versions.prev}`,
                      ),
                    );
                });
              });

              if (mount) {
                describe(`minimal version satisfied (${versions.min})`, () => {
                  describe('component is not mounted', () => {
                    it('should throw FunctionUnavailableError', async () => {
                      await expect(
                        (async () => tryCall(instantiate({
                          isTma: true,
                          version: versions.min
                        })))(),
                      )
                        .rejects
                        .toStrictEqual(
                          new FunctionUnavailableError(
                            'Unable to call function: the component is unmounted. Use the mount() method',
                          ),
                        );
                    });
                  });

                  describe('component is mounted', () => {
                    it('should not throw', async () => {
                      const component = instantiate({ isTma: true, version: versions.min });
                      await mount!(component);
                      await expect(
                        (async () => tryCall(component))(),
                      ).resolves.toBeOneOf([undefined, expect.anything()]);
                    });
                  });
                });
              }
            } else if (mount) {
              describe('component is not mounted', () => {
                it('should throw FunctionUnavailableError', async () => {
                  await expect(
                    (async () => tryCall(instantiate({ isTma: true, version: versions.min })))(),
                  )
                    .rejects
                    .toStrictEqual(
                      new FunctionUnavailableError(
                        'Unable to call function: the component is unmounted. Use the mount() method',
                      ),
                    );
                });
              });

              describe('component is mounted', () => {
                it('should not throw', async () => {
                  const component = instantiate({ isTma: true, version: versions.min });
                  await mount!(component);
                  await expect(
                    (async () => tryCall(component))(),
                  ).resolves.toBeOneOf([undefined, expect.anything()]);
                });
              });
            }
          });
        }
      });
    }
  });
}

```
---
## File: packages/sdk/test-utils/types.ts

```typescript
export type InstantiateOptions<T> = Partial<
  & Omit<T, 'storage'>
  & (T extends { storage?: any } ? { storage?: T['storage'] | boolean } : {})
>;
```
---
## File: packages/sdk/test-utils/utils.ts

```typescript
import {
  serializeLaunchParamsQuery,
  type LaunchParamsLike,
} from '@tma.js/transformers';
import type { Version } from '@tma.js/types';
import { createWindow } from 'test-utils';
import type { PostEventFpFn } from '@tma.js/bridge';
import * as E from 'fp-ts/Either';
import { vi } from 'vitest';

import type { ComponentStorage } from '@/helpers/component-storage.js';
import { version } from '@/globals/version.js';
import { resetGlobals } from '@/globals/resetGlobals.js';
import { postEventFpSignal } from '@/globals/post-event.js';

export function createNoopComponentStorage<T>(): ComponentStorage<T> {
  const noop = () => undefined;
  return { get: noop, set: noop };
}

export function setVersion(v: Version) {
  version.set(v);
}

export function setMaxVersion() {
  setVersion('100');
}

export function mockPostEvent(
  postEvent: PostEventFpFn = () => E.right(undefined),
) {
  const fn = vi.fn(postEvent);
  postEventFpSignal.set(fn as any);
  return fn;
}

export function mockMiniAppsEnv(lp: LaunchParamsLike = {
  tgWebAppPlatform: 'tdesktop',
  tgWebAppVersion: '10',
  tgWebAppThemeParams: {},
}) {
  createWindow({
    env: 'iframe',
    location: {
      ...window.location,
      href: `/?${serializeLaunchParamsQuery(lp)}`,
    },
  });
}

export function configureEnv({
  version = '100',
  lp = {
    tgWebAppPlatform: 'tdesktop',
    tgWebAppVersion: version,
    tgWebAppThemeParams: {},
  },
}: {
  version?: Version,
  lp?: LaunchParamsLike | 'skip'
} = {}) {
  setVersion(version);

  if (lp !== 'skip') {
    mockMiniAppsEnv(lp);
  }
}

/**
 * Resets globals and restores all mocks.
 */
export function restoreState() {
  resetGlobals();
  vi.restoreAllMocks();
}

/**
 * Returns a previous version related to the specified one.
 * @param version
 */
export function getPrevVersion(version: Version): Version {
  const [a, b = 0] = version.split('.').map(Number);
  return `${b === 0 ? a - 1 : a}.${b === 0 ? 99 : b - 1}`;
}
```
---
## File: packages/sdk/tools/getConfig.ts

```typescript
import { defineConfig, type UserConfigFn } from 'vitest/config';
import dts from 'vite-plugin-dts';
import { resolve, dirname } from 'node:path';
import { fileURLToPath } from 'node:url';
import type { LibraryFormats } from 'vite';

import packageJson from '../package.json' with { type: 'json' };

export function getConfig({
  filename = 'index',
  input,
  formats,
  declarations,
  inlineModules,
}: {
  input: string;
  filename?: string;
  formats: LibraryFormats[];
  declarations?: boolean;
  inlineModules?: boolean
}): UserConfigFn {
  return defineConfig(({ mode }) => {
    const tsconfigPath = mode === 'test'
      ? './tsconfig.test.json'
      : './tsconfig.build.json';

    return {
      plugins: [
        declarations && dts({ outDir: 'dist/dts', tsconfigPath }),
      ],
      resolve: {
        alias: {
          '@test-utils': resolve(dirname(fileURLToPath(import.meta.url)), '../test-utils'),
          '@': resolve(dirname(fileURLToPath(import.meta.url)), '../src'),
        },
      },
      build: {
        outDir: 'dist',
        emptyOutDir: false,
        sourcemap: true,
        rollupOptions: {
          external: inlineModules ? [] : Object.keys(packageJson.dependencies),
        },
        lib: {
          name: 'tmajs.sdk',
          entry: input,
          formats,
          fileName: filename,
        },
      },
      test: {
        environment: 'happy-dom',
        coverage: {
          enabled: true,
          provider: 'v8',
          include: ['src/**/*.ts'],
          exclude: ['src/**/*.test.ts'],
          branches: 80,
          functions: 80,
          statements: 80,
          lines: 80,
        },
      },
    };
  });
}
```
---
## File: packages/sdk/CHANGELOG.md

```markdown
# @tma.js/sdk

## 3.0.8

### Patch Changes

- 7ab459c: Set `SwipeBehavior.isVerticalEnabled` initial value as true.

## 3.0.7

### Patch Changes

- Updated dependencies [9b46673]
  - @tma.js/bridge@2.1.3

## 3.0.6

### Patch Changes

- bd78481: - fix(MiniApp): apply state changes when calling `setHeaderColor` method
  - fix(MiniApp): fix improper logic updating colors when theme changes

## 3.0.5

### Patch Changes

- 95ae14e: Don't use values from theme params when mounting MiniApp. Also, don't call setters when the component mounted

## 3.0.4

### Patch Changes

- c6d9303: Make `ifAvailable` always return `O.Option<AnyEither>` instead of `O.Option<Plain>`

## 3.0.3

### Patch Changes

- Updated dependencies [458cd03]
  - @tma.js/bridge@2.1.2

## 3.0.2

### Patch Changes

- 58793e3: Re-export `emitEvent` from `@tma.js/bridge`.

## 3.0.1

### Patch Changes

- 4570643: Update package.json actualizing all paths.
- Updated dependencies [4570643]
  - @tma.js/transformers@1.1.1
  - @tma.js/signals@1.0.1
  - @tma.js/toolkit@1.0.2
  - @tma.js/bridge@2.1.1
  - @tma.js/types@1.0.2

```
---
## File: packages/sdk/LICENSE

```text
MIT License

Copyright (c) 2025 Vladislav Kibenko

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

```
---
## File: packages/sdk/package.json

```json
{
  "name": "@tma.js/sdk",
  "version": "3.0.8",
  "description": "TypeScript Source Development Kit for Telegram Mini Apps client application.",
  "author": "Vladislav Kibenko <wolfram.deus@gmail.com>",
  "homepage": "https://github.com/Telegram-Mini-Apps/tma.js#readme",
  "repository": {
    "type": "git",
    "url": "git@github.com:Telegram-Mini-Apps/tma.js.git",
    "directory": "packages/sdk"
  },
  "bugs": {
    "url": "https://github.com/Telegram-Mini-Apps/tma.js/issues"
  },
  "keywords": [
    "telegram-mini-apps",
    "typescript",
    "sdk"
  ],
  "license": "MIT",
  "type": "module",
  "sideEffects": false,
  "files": [
    "dist"
  ],
  "main": "./dist/index.cjs",
  "module": "./dist/index.js",
  "types": "./dist/dts/index.d.ts",
  "exports": {
    ".": {
      "types": "./dist/dts/index.d.ts",
      "import": "./dist/index.js",
      "require": "./dist/index.cjs",
      "default": "./dist/index.cjs"
    }
  },
  "scripts": {
    "test": "vitest --run",
    "lint": "eslint src",
    "lint:fix": "pnpm run lint --fix",
    "typecheck": "tsc --noEmit -p tsconfig.build.json",
    "build": "rimraf dist && pnpm run build:default && pnpm run build:iife",
    "build:default": "vite build -c vite.config.ts",
    "build:iife": "vite build -c vite.iife.config.ts"
  },
  "dependencies": {
    "@tma.js/bridge": "workspace:^",
    "@tma.js/signals": "workspace:^",
    "@tma.js/toolkit": "workspace:^",
    "@tma.js/transformers": "workspace:^",
    "@tma.js/types": "workspace:^",
    "better-promises": "^1.0.0",
    "error-kid": "^1.0.2",
    "fp-ts": "^2.16.11",
    "valibot": "^1.1.0"
  },
  "devDependencies": {
    "test-utils": "workspace:*",
    "tsconfig": "workspace:*"
  },
  "publishConfig": {
    "access": "public"
  }
}

```
---
## File: packages/sdk/README.md

```markdown
# @tma.js/sdk

[code-badge]: https://img.shields.io/badge/source-black?logo=github

[docs-badge]: https://img.shields.io/badge/documentation-blue?logo=gitbook&logoColor=white

[link]: https://github.com/Telegram-Mini-Apps/tma.js/tree/master/tma.js/sdk

[docs-link]: https://docs.telegram-mini-apps.com/packages/tma-js-sdk

[npm-link]: https://npmjs.com/package/@tma.js/sdk

[npm-badge]: https://img.shields.io/npm/v/@tma.js/sdk?logo=npm

[size-badge]: https://img.shields.io/bundlephobia/minzip/@tma.js/sdk

[![NPM][npm-badge]][npm-link]
![Size][size-badge]
[![docs-badge]][docs-link]
[![code-badge]][link]

Made from scratch TypeScript library for seamless communication with Telegram Mini Apps
functionality.

The code of this library is designed to simplify the process of developers interacting with Telegram
Mini Apps. It consists of several individual components, each responsible for a specific aspect of
the Telegram Mini Apps ecosystem.

Before you begin using the SDK, we highly recommend familiarizing yourself with the Telegram Mini
Apps [documentation](https://docs.telegram-mini-apps.com/platform/about)
to grasp the fundamental concepts of the platform.
```
---
## File: packages/sdk/tsconfig.build.json

```json
{
  "extends": "tsconfig/esnext-dom.json",
  "compilerOptions": {
    "paths": {
      "@/*": [
        "./src/*"
      ]
    }
  },
  "include": [
    "src"
  ],
  "exclude": [
    "src/**/*.test.ts"
  ]
}
```
---
## File: packages/sdk/tsconfig.eslint.json

```json
{
  "extends": "./tsconfig.build.json",
  "include": [
    "src",
    "test-utils"
  ],
  "exclude": []
}
```
---
## File: packages/sdk/tsconfig.json

```json
{
  "extends": "./tsconfig.build.json",
  "references": [
    {
      "path": "./tsconfig.node.json"
    },
    {
      "path": "./tsconfig.test.json"
    }
  ]
}
```
---
## File: packages/sdk/tsconfig.node.json

```json
{
  "extends": "tsconfig/esnext.json",
  "compilerOptions": {
    "composite": true
  },
  "include": [
    "tools",
    "vite.config.ts",
    "vite.iife.config.ts",
    "package.json"
  ]
}
```
---
## File: packages/sdk/tsconfig.test.json

```json
{
  "extends": "tsconfig/esnext-dom.json",
  "compilerOptions": {
    "composite": true,
    "declaration": true,
    "paths": {
      "@/*": [
        "./src/*"
      ],
      "@test-utils/*": [
        "./test-utils/*"
      ]
    }
  },
  "include": [
    "src",
    "test-utils"
  ],
  "exclude": []
}
```
---
## File: packages/sdk/vite.config.ts

```typescript
import { getConfig } from './tools/getConfig.js';

export default getConfig({
  input: 'src/index.ts',
  formats: ['es', 'cjs'],
  declarations: true,
});
```
---
## File: packages/sdk/vite.iife.config.ts

```typescript
import { getConfig } from './tools/getConfig.js';

export default getConfig({
  input: 'src/index.ts',
  formats: ['iife'],
  inlineModules: true,
});
```
---
## File: packages/sdk-react/src/hooks.ts

```typescript
import { useMemo, useSyncExternalStore } from 'react';
import {
  retrieveLaunchParams,
  retrieveRawLaunchParams,
  retrieveRawInitData,
  retrieveAndroidDeviceData,
  retrieveAndroidDeviceDataFrom,
  type AndroidDeviceData,
  type RetrieveLaunchParamsResult,
  deepSnakeToCamelObjKeys,
  type DeepConvertSnakeKeysToCamelCase,
} from '@tma.js/sdk';

/**
 * Returns the underlying signal value updating it each time the signal value changes.
 * @param signal - a signal.
 * @param getServerSnapshot - an optional function returning the signal value snapshot. It is used
 *   only during SSR to provide an initial value of the signal. When not set, defaults to the
 *   signal itself.
 */
export function useSignal<T>(
  signal: {
    (): T;
    sub(fn: VoidFunction): VoidFunction;
  },
  getServerSnapshot?: () => T,
): T {
  return useSyncExternalStore(
    onStoreChange => signal.sub(onStoreChange),
    signal,
    getServerSnapshot || signal,
  );
}

/**
 * @returns Launch parameters from any known source.
 * @param camelCase - should the output be camel-cased.
 */
export function useLaunchParams(camelCase?: false): RetrieveLaunchParamsResult;
/**
 * @returns Launch parameters from any known source.
 * @param camelCase - should the output be camel-cased.
 */
export function useLaunchParams(
  camelCase: true,
): DeepConvertSnakeKeysToCamelCase<RetrieveLaunchParamsResult>;
export function useLaunchParams(
  camelCase?: boolean,
): RetrieveLaunchParamsResult | DeepConvertSnakeKeysToCamelCase<RetrieveLaunchParamsResult> {
  return useMemo(() => {
    const lp = retrieveLaunchParams();
    return camelCase ? deepSnakeToCamelObjKeys(lp) : lp;
  }, [camelCase]);
}

/**
 * @returns Launch parameters in a raw format from any known source.
 * @see retrieveRawLaunchParams
 */
export function useRawLaunchParams(): string {
  return useMemo(retrieveRawLaunchParams, []);
}

/**
 * @returns Raw init data from any known source.
 */
export function useRawInitData(): string | undefined {
  return useMemo(retrieveRawInitData, []);
}

/**
 * Retrieves Android device data from the navigator.userAgent.
 * @see https://core.telegram.org/bots/webapps#additional-data-in-user-agent
 */
export function useAndroidDeviceData(): AndroidDeviceData {
  return useMemo(retrieveAndroidDeviceData, []);
}

/**
 * Retrieves Android device data from the specified User Agent.
 * @see https://core.telegram.org/bots/webapps#additional-data-in-user-agent
 * @param userAgent - user agent.
 */
export function useAndroidDeviceDataFrom(userAgent: string): AndroidDeviceData {
  return useMemo(() => retrieveAndroidDeviceDataFrom(userAgent), [userAgent]);
}

```
---
## File: packages/sdk-react/src/index.ts

```typescript
export * from './hooks.js';
export * from '@tma.js/sdk';
```
---
## File: packages/sdk-react/CHANGELOG.md

```markdown
# @tma.js/sdk-react

## 3.0.8

### Patch Changes

- Updated dependencies [7ab459c]
  - @tma.js/sdk@3.0.8

## 3.0.7

### Patch Changes

- @tma.js/sdk@3.0.7

## 3.0.6

### Patch Changes

- Updated dependencies [bd78481]
  - @tma.js/sdk@3.0.6

## 3.0.5

### Patch Changes

- Updated dependencies [95ae14e]
  - @tma.js/sdk@3.0.5

## 3.0.4

### Patch Changes

- Updated dependencies [c6d9303]
  - @tma.js/sdk@3.0.4

## 3.0.3

### Patch Changes

- @tma.js/sdk@3.0.3

## 3.0.2

### Patch Changes

- Updated dependencies [58793e3]
  - @tma.js/sdk@3.0.2

## 3.0.1

### Patch Changes

- 4570643: Update package.json actualizing all paths.
- Updated dependencies [4570643]
  - @tma.js/sdk@3.0.1

```
---
## File: packages/sdk-react/LICENSE

```text
MIT License

Copyright (c) 2025 Vladislav Kibenko

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

```
---
## File: packages/sdk-react/package.json

```json
{
  "name": "@tma.js/sdk-react",
  "version": "3.0.8",
  "description": "React bindings for Mini Apps client SDK. Contains hooks, components and other useful tools which allow usage of React along with Mini Apps client SDK.",
  "author": "Vladislav Kibenko <wolfram.deus@gmail.com>",
  "homepage": "https://github.com/Telegram-Mini-Apps/tma.js#readme",
  "repository": {
    "type": "git",
    "url": "git@github.com:Telegram-Mini-Apps/tma.js.git",
    "directory": "packages/sdk-react"
  },
  "bugs": {
    "url": "https://github.com/Telegram-Mini-Apps/tma.js/issues"
  },
  "keywords": [
    "telegram-mini-apps",
    "typescript",
    "sdk",
    "react"
  ],
  "license": "MIT",
  "type": "module",
  "sideEffects": false,
  "files": [
    "dist"
  ],
  "main": "./dist/index.cjs",
  "module": "./dist/index.js",
  "types": "./dist/dts/index.d.ts",
  "exports": {
    ".": {
      "types": "./dist/dts/index.d.ts",
      "import": "./dist/index.js",
      "require": "./dist/index.cjs",
      "default": "./dist/index.cjs"
    }
  },
  "scripts": {
    "typecheck": "tsc --noEmit",
    "build": "vite build"
  },
  "dependencies": {
    "@tma.js/sdk": "workspace:^"
  },
  "peerDependencies": {
    "@types/react": "^17.0.0 || ^18.0.0 || ^19.0.0",
    "react": "^17.0.0 || ^18.0.0 || ^19.0.0"
  },
  "peerDependenciesMeta": {
    "@types/react": {
      "optional": true
    }
  },
  "devDependencies": {
    "@types/react": "^19.0.0",
    "react": "^19.0.0",
    "tsconfig": "workspace:*"
  },
  "publishConfig": {
    "access": "public"
  }
}

```
---
## File: packages/sdk-react/README.md

```markdown
# @tma.js/sdk-react

[code-badge]: https://img.shields.io/badge/source-black?logo=github

[docs-badge]: https://img.shields.io/badge/documentation-blue?logo=gitbook&logoColor=white

[code-link]: https://github.com/Telegram-Mini-Apps/tma.js/tree/master/tma.js/sdk-react

[docs-link]: https://docs.telegram-mini-apps.com/packages/tma-js-sdk-react

[npm-link]: https://npmjs.com/package/@tma.js/sdk-react

[npm-badge]: https://img.shields.io/npm/v/@tma.js/sdk-react?logo=npm

[size-badge]: https://img.shields.io/bundlephobia/minzip/@tma.js/sdk-react

[![NPM][npm-badge]][npm-link]
![Size][size-badge]
[![docs-badge]][docs-link]
[![code-badge]][code-link]

React JS bindings
for [client SDK](https://docs.telegram-mini-apps.com/packages/tma-js-sdk). Includes
hooks, components and utilities for comfortable usage of React JS on the Telegram Mini Apps
platform.

```
---
## File: packages/sdk-react/tsconfig.eslint.json

```json
{
  "extends": "./tsconfig.json"
}
```
---
## File: packages/sdk-react/tsconfig.json

```json
{
  "extends": "tsconfig/esnext-dom.json",
  "compilerOptions": {
    "jsx": "react-jsx"
  },
  "include": [
    "src"
  ],
  "references": [
    {
      "path": "./tsconfig.node.json"
    }
  ]
}

```
---
## File: packages/sdk-react/tsconfig.node.json

```json
{
  "extends": "tsconfig/esnext.json",
  "compilerOptions": {
    "composite": true
  },
  "include": [
    "vite.config.ts",
    "package.json"
  ]
}
```
---
## File: packages/sdk-react/vite.config.ts

```typescript
import dts from 'vite-plugin-dts';
import { defineConfig } from 'vite';

export default defineConfig({
  plugins: [
    dts({ outDir: 'dist/dts' }),
  ],
  build: {
    outDir: 'dist',
    emptyOutDir: true,
    sourcemap: true,
    rollupOptions: {
      external: ['react', 'react/jsx-runtime', '@tma.js/sdk'],
    },
    lib: {
      entry: 'src/index.ts',
      formats: ['es', 'cjs'],
      fileName: 'index',
    },
  },
});

```
---
## File: packages/sdk-solid/src/index.ts

```typescript
export { useSignal } from './useSignal.js';
export * from '@tma.js/sdk';

```
---
## File: packages/sdk-solid/src/useSignal.ts

```typescript
import { type Accessor, createSignal, onCleanup } from 'solid-js';

/**
 * Returns the underlying signal value updating it each time the signal value changes.
 * @param signal - a signal.
 */
export function useSignal<T>(signal: {
  (): T;
  sub(fn: (v: T) => void): VoidFunction;
}): Accessor<T> {
  const [get, set] = createSignal<T>(signal());
  onCleanup(signal.sub(set));
  return get;
}

```
---
## File: packages/sdk-solid/CHANGELOG.md

```markdown
# @tma.js/sdk-solid

## 3.0.8

### Patch Changes

- Updated dependencies [7ab459c]
  - @tma.js/sdk@3.0.8

## 3.0.7

### Patch Changes

- @tma.js/sdk@3.0.7

## 3.0.6

### Patch Changes

- Updated dependencies [bd78481]
  - @tma.js/sdk@3.0.6

## 3.0.5

### Patch Changes

- Updated dependencies [95ae14e]
  - @tma.js/sdk@3.0.5

## 3.0.4

### Patch Changes

- Updated dependencies [c6d9303]
  - @tma.js/sdk@3.0.4

## 3.0.3

### Patch Changes

- @tma.js/sdk@3.0.3

## 3.0.2

### Patch Changes

- Updated dependencies [58793e3]
  - @tma.js/sdk@3.0.2

## 3.0.1

### Patch Changes

- 4570643: Update package.json actualizing all paths.
- Updated dependencies [4570643]
  - @tma.js/sdk@3.0.1

```
---
## File: packages/sdk-solid/LICENSE

```text
MIT License

Copyright (c) 2025 Vladislav Kibenko

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

```
---
## File: packages/sdk-solid/package.json

```json
{
  "name": "@tma.js/sdk-solid",
  "version": "3.0.8",
  "description": "Solid JS bindings for Mini Apps client SDK.",
  "author": "Vladislav Kibenko <wolfram.deus@gmail.com>",
  "homepage": "https://github.com/Telegram-Mini-Apps/tma.js#readme",
  "repository": {
    "type": "git",
    "url": "git@github.com:Telegram-Mini-Apps/tma.js.git",
    "directory": "packages/sdk-solid"
  },
  "bugs": {
    "url": "https://github.com/Telegram-Mini-Apps/tma.js/issues"
  },
  "keywords": [
    "telegram-mini-apps",
    "typescript",
    "sdk",
    "solidjs"
  ],
  "license": "MIT",
  "type": "module",
  "sideEffects": false,
  "files": [
    "dist"
  ],
  "main": "./dist/index.cjs",
  "module": "./dist/index.js",
  "types": "./dist/dts/index.d.ts",
  "exports": {
    ".": {
      "types": "./dist/dts/index.d.ts",
      "import": "./dist/index.js",
      "require": "./dist/index.cjs",
      "default": "./dist/index.cjs"
    }
  },
  "scripts": {
    "typecheck": "tsc --noEmit",
    "build": "vite build"
  },
  "dependencies": {
    "@tma.js/sdk": "workspace:^"
  },
  "peerDependencies": {
    "solid-js": "^1.0.0"
  },
  "devDependencies": {
    "tsconfig": "workspace:*"
  },
  "publishConfig": {
    "access": "public"
  }
}

```
---
## File: packages/sdk-solid/README.md

```markdown
# @tma.js/sdk-solid

[code-badge]: https://img.shields.io/badge/source-black?logo=github

[docs-badge]: https://img.shields.io/badge/documentation-blue?logo=gitbook&logoColor=white

[code-link]: https://github.com/Telegram-Mini-Apps/tma.js/tree/master/tma.js/sdk-solid

[docs-link]: https://docs.telegram-mini-apps.com/packages/tma-js-sdk-solid

[npm-link]: https://npmjs.com/package/@tma.js/sdk-solid

[npm-badge]: https://img.shields.io/npm/v/@tma.js/sdk-solid?logo=npm

[size-badge]: https://img.shields.io/bundlephobia/minzip/@tma.js/sdk-solid

[![NPM][npm-badge]][npm-link]
![Size][size-badge]
[![docs-badge]][docs-link]
[![code-badge]][code-link]

Solid JS bindings
for [client SDK](https://docs.telegram-mini-apps.com/packages/tma-js-sdk). Includes
hooks, components and utilities
for comfortable usage of Solid JS on the Telegram Mini Apps platform.

```
---
## File: packages/sdk-solid/tsconfig.eslint.json

```json
{
  "extends": "./tsconfig.json"
}
```
---
## File: packages/sdk-solid/tsconfig.json

```json
{
  "$schema": "https://json.schemastore.org/tsconfig",
  "extends": "tsconfig/esnext-dom.json",
  "compilerOptions": {
    "allowSyntheticDefaultImports": true,
    "jsx": "preserve",
    "jsxImportSource": "solid-js"
  },
  "include": [
    "src"
  ],
  "references": [
    {
      "path": "./tsconfig.node.json"
    }
  ]
}

```
---
## File: packages/sdk-solid/tsconfig.node.json

```json
{
  "extends": "./tsconfig.json",
  "compilerOptions": {
    "composite": true
  },
  "include": [
    "vite.config.ts",
    "package.json"
  ]
}
```
---
## File: packages/sdk-solid/vite.config.ts

```typescript
import solidPlugin from 'vite-plugin-solid';
import dts from 'vite-plugin-dts';
import { defineConfig } from 'vite';

export default defineConfig({
  plugins: [
    dts({ outDir: 'dist/dts' }),
    solidPlugin(),
  ],
  build: {
    outDir: 'dist',
    emptyOutDir: true,
    sourcemap: true,
    rollupOptions: {
      external: ['solid-js', '@tma.js/sdk'],
    },
    lib: {
      entry: 'src/index.ts',
      formats: ['es', 'cjs'],
      fileName: 'index',
    },
  },
});

```
---
## File: packages/sdk-svelte/src/index.ts

```typescript
export { useSignal } from './useSignal.js';
export * from '@tma.js/sdk';

```
---
## File: packages/sdk-svelte/src/useSignal.ts

```typescript
import { onDestroy } from 'svelte';
import { writable, type Writable } from 'svelte/store';

/**
 * Returns the underlying signal value updating it each time the signal value changes.
 * @param signal - a signal.
 */
export function useSignal<T>(signal: {
  (): T;
  sub(fn: (v: T) => void): VoidFunction;
}): Writable<T> {
  const _value = writable<T>(signal());
  const unsub = signal.sub(value => {
    _value.update(() => (value));
  });
  onDestroy(unsub);

  return _value;
}

```
---
## File: packages/sdk-svelte/CHANGELOG.md

```markdown
# @tma.js/sdk-svelte

## 1.0.8

### Patch Changes

- Updated dependencies [7ab459c]
  - @tma.js/sdk@3.0.8

## 1.0.7

### Patch Changes

- @tma.js/sdk@3.0.7

## 1.0.6

### Patch Changes

- Updated dependencies [bd78481]
  - @tma.js/sdk@3.0.6

## 1.0.5

### Patch Changes

- Updated dependencies [95ae14e]
  - @tma.js/sdk@3.0.5

## 1.0.4

### Patch Changes

- Updated dependencies [c6d9303]
  - @tma.js/sdk@3.0.4

## 1.0.3

### Patch Changes

- @tma.js/sdk@3.0.3

## 1.0.2

### Patch Changes

- Updated dependencies [58793e3]
  - @tma.js/sdk@3.0.2

## 1.0.1

### Patch Changes

- 4570643: Update package.json actualizing all paths.
- Updated dependencies [4570643]
  - @tma.js/sdk@3.0.1

```
---
## File: packages/sdk-svelte/LICENSE

```text
MIT License

Copyright (c) 2025 Vladislav Kibenko

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

```
---
## File: packages/sdk-svelte/package.json

```json
{
  "name": "@tma.js/sdk-svelte",
  "version": "1.0.8",
  "description": "Svelte.js bindings for Mini Apps client SDK.",
  "author": "Nazar Ugrinovsky <nazar9505@gmail.com>",
  "homepage": "https://github.com/Telegram-Mini-Apps/tma.js#readme",
  "repository": {
    "type": "git",
    "url": "git@github.com:Telegram-Mini-Apps/tma.js.git",
    "directory": "packages/sdk-svelte"
  },
  "bugs": {
    "url": "https://github.com/Telegram-Mini-Apps/tma.js/issues"
  },
  "keywords": [
    "telegram-mini-apps",
    "typescript",
    "sdk",
    "svelte",
    "svelte.js"
  ],
  "license": "MIT",
  "type": "module",
  "sideEffects": false,
  "files": [
    "dist"
  ],
  "main": "./dist/index.cjs",
  "module": "./dist/index.js",
  "types": "./dist/dts/index.d.ts",
  "exports": {
    ".": {
      "types": "./dist/dts/index.d.ts",
      "import": "./dist/index.js",
      "require": "./dist/index.cjs",
      "default": "./dist/index.cjs"
    }
  },
  "scripts": {
    "typecheck": "tsc --noEmit",
    "build": "vite build"
  },
  "dependencies": {
    "@tma.js/sdk": "workspace:^"
  },
  "peerDependencies": {
    "svelte": "^5.2.3"
  },
  "devDependencies": {
    "tsconfig": "workspace:*"
  },
  "publishConfig": {
    "access": "public"
  }
}

```
---
## File: packages/sdk-svelte/README.md

```markdown
# @tma.js/sdk-svelte

[code-badge]: https://img.shields.io/badge/source-black?logo=github

[docs-badge]: https://img.shields.io/badge/documentation-blue?logo=gitbook&logoColor=white

[code-link]: https://github.com/Telegram-Mini-Apps/tma.js/tree/master/tma.js/sdk-svelte

[docs-link]: https://docs.telegram-mini-apps.com/packages/tma-js-sdk-svelte/

[npm-link]: https://npmjs.com/package/@tma.js/sdk-svelte

[npm-badge]: https://img.shields.io/npm/v/@tma.js/sdk-svelte?logo=npm

[size-badge]: https://img.shields.io/bundlephobia/minzip/@tma.js/sdk-svelte

[![NPM][npm-badge]][npm-link]
![Size][size-badge]
[![docs-badge]][docs-link]
[![code-badge]][code-link]

Svelte.js bindings
for [client SDK](https://docs.telegram-mini-apps.com/packages/tma-js-sdk). Includes
composables, components and utilities
for comfortable usage of Svelte.js on the Telegram Mini Apps platform.

```
---
## File: packages/sdk-svelte/tsconfig.eslint.json

```json
{
  "extends": "./tsconfig.json"
}
```
---
## File: packages/sdk-svelte/tsconfig.json

```json
{
  "$schema": "https://json.schemastore.org/tsconfig",
  "extends": "tsconfig/esnext-dom.json",
  "compilerOptions": {
    "allowSyntheticDefaultImports": true,
  },
  "include": [
    "src"
  ],
  "references": [
    {
      "path": "./tsconfig.node.json"
    }
  ]
}

```
---
## File: packages/sdk-svelte/tsconfig.node.json

```json
{
  "extends": "./tsconfig.json",
  "compilerOptions": {
    "composite": true
  },
  "include": [
    "vite.config.ts",
    "package.json"
  ]
}
```
---
## File: packages/sdk-svelte/vite.config.ts

```typescript
import dts from 'vite-plugin-dts';
import { defineConfig } from 'vite';

export default defineConfig({
  plugins: [
    dts({ outDir: 'dist/dts' }),
  ],
  build: {
    outDir: 'dist',
    emptyOutDir: true,
    sourcemap: true,
    rollupOptions: {
      external: ['svelte', '@tma.js/sdk'],
    },
    lib: {
      entry: 'src/index.ts',
      formats: ['es', 'cjs'],
      fileName: 'index',
    },
  },
});

```
---
## File: packages/sdk-vue/src/index.ts

```typescript
export { useSignal } from './useSignal.js';
export * from '@tma.js/sdk';

```
---
## File: packages/sdk-vue/src/useSignal.ts

```typescript
import { type Ref, ref, shallowReadonly, onBeforeUnmount } from 'vue';

/**
 * Returns the underlying signal value updating it each time the signal value changes.
 * @param signal - a signal.
 */
export function useSignal<T>(signal: {
  (): T;
  sub(fn: (v: T) => void): VoidFunction;
}): Readonly<Ref<T>> {
  /**
   * We do type cast, otherwise inferred type is Ref<UnwrappedRef<T> | T>.
   * Another approach is to narrow down: <T extends (string | number | boolean | object | null)>
   * Like it's done in vueuse:
   * https://github.com/vueuse/vueuse/blob/main/packages/core/useStorage/index.ts#L135
   */
  const _value: Ref<T> = ref(signal()) as Ref<T>;
  const unsub = signal.sub(value => {
    _value.value = value;
  });
  onBeforeUnmount(unsub);

  return shallowReadonly(_value);
}

```
---
## File: packages/sdk-vue/CHANGELOG.md

```markdown
# @tma.js/sdk-vue

## 1.0.8

### Patch Changes

- Updated dependencies [7ab459c]
  - @tma.js/sdk@3.0.8

## 1.0.7

### Patch Changes

- @tma.js/sdk@3.0.7

## 1.0.6

### Patch Changes

- Updated dependencies [bd78481]
  - @tma.js/sdk@3.0.6

## 1.0.5

### Patch Changes

- Updated dependencies [95ae14e]
  - @tma.js/sdk@3.0.5

## 1.0.4

### Patch Changes

- Updated dependencies [c6d9303]
  - @tma.js/sdk@3.0.4

## 1.0.3

### Patch Changes

- @tma.js/sdk@3.0.3

## 1.0.2

### Patch Changes

- Updated dependencies [58793e3]
  - @tma.js/sdk@3.0.2

## 1.0.1

### Patch Changes

- 4570643: Update package.json actualizing all paths.
- Updated dependencies [4570643]
  - @tma.js/sdk@3.0.1

```
---
## File: packages/sdk-vue/LICENSE

```text
MIT License

Copyright (c) 2025 Vladislav Kibenko

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

```
---
## File: packages/sdk-vue/package.json

```json
{
  "name": "@tma.js/sdk-vue",
  "version": "1.0.8",
  "description": "Vue.js bindings for Mini Apps client SDK.",
  "author": "Dmitry Nischeta <nish.dima@gmail.com>",
  "homepage": "https://github.com/Telegram-Mini-Apps/tma.js#readme",
  "repository": {
    "type": "git",
    "url": "git@github.com:Telegram-Mini-Apps/tma.js.git",
    "directory": "packages/sdk-vue"
  },
  "bugs": {
    "url": "https://github.com/Telegram-Mini-Apps/tma.js/issues"
  },
  "keywords": [
    "telegram-mini-apps",
    "typescript",
    "sdk",
    "vue",
    "vue.js"
  ],
  "license": "MIT",
  "type": "module",
  "sideEffects": false,
  "files": [
    "dist"
  ],
  "main": "./dist/index.cjs",
  "module": "./dist/index.js",
  "types": "./dist/dts/index.d.ts",
  "exports": {
    ".": {
      "types": "./dist/dts/index.d.ts",
      "import": "./dist/index.js",
      "require": "./dist/index.cjs",
      "default": "./dist/index.cjs"
    }
  },
  "scripts": {
    "typecheck": "tsc --noEmit",
    "build": "vite build"
  },
  "dependencies": {
    "@tma.js/sdk": "workspace:^"
  },
  "peerDependencies": {
    "vue": "^3.0.0"
  },
  "devDependencies": {
    "tsconfig": "workspace:*"
  },
  "publishConfig": {
    "access": "public"
  }
}

```
---
## File: packages/sdk-vue/README.md

```markdown
# @tma.js/sdk-vue

[code-badge]: https://img.shields.io/badge/source-black?logo=github

[docs-badge]: https://img.shields.io/badge/documentation-blue?logo=gitbook&logoColor=white

[code-link]: https://github.com/Telegram-Mini-Apps/tma.js/tree/master/tma.js/sdk-vue

[docs-link]: https://docs.telegram-mini-apps.com/packages/tma-js-sdk-vue

[npm-link]: https://npmjs.com/package/@tma.js/sdk-vue

[npm-badge]: https://img.shields.io/npm/v/@tma.js/sdk-vue?logo=npm

[size-badge]: https://img.shields.io/bundlephobia/minzip/@tma.js/sdk-vue

[![NPM][npm-badge]][npm-link]
![Size][size-badge]
[![docs-badge]][docs-link]
[![code-badge]][code-link]

Vue.js bindings
for [client SDK](https://docs.telegram-mini-apps.com/packages/tma-js-sdk). Includes
composables, components and utilities
for comfortable usage of Vue.js on the Telegram Mini Apps platform.

```
---
## File: packages/sdk-vue/tsconfig.eslint.json

```json
{
  "extends": "./tsconfig.json"
}
```
---
## File: packages/sdk-vue/tsconfig.json

```json
{
  "$schema": "https://json.schemastore.org/tsconfig",
  "extends": "tsconfig/esnext-dom.json",
  "compilerOptions": {
    "allowSyntheticDefaultImports": true,
  },
  "include": [
    "src"
  ],
  "references": [
    {
      "path": "./tsconfig.node.json"
    }
  ]
}

```
---
## File: packages/sdk-vue/tsconfig.node.json

```json
{
  "extends": "./tsconfig.json",
  "compilerOptions": {
    "composite": true
  },
  "include": [
    "vite.config.ts",
    "package.json"
  ]
}
```
---
## File: packages/sdk-vue/vite.config.ts

```typescript
import dts from 'vite-plugin-dts';
import { defineConfig } from 'vite';

export default defineConfig({
  plugins: [
    dts({ outDir: 'dist/dts' }),
  ],
  build: {
    outDir: 'dist',
    emptyOutDir: true,
    sourcemap: true,
    rollupOptions: {
      external: ['vue', '@tma.js/sdk'],
    },
    lib: {
      entry: 'src/index.ts',
      formats: ['es', 'cjs'],
      fileName: 'index',
    },
  },
});

```
---
## File: packages/signals/src/batch.test.ts

```typescript
import { expect, it, vi } from 'vitest';

import { signal } from './signal.js';
import { computed } from './computed.js';
import { batch } from './batch.js';

it('should call subscriber only once if several signals were changed', () => {
  const a = signal(1);
  const b = signal(2);
  const c = computed(() => a() + b());

  const spy = vi.fn();
  c.sub(spy);

  batch(() => {
    a.set(10);
    a.set(11);
    b.set(30);
    b.set(88);
  });
  expect(spy).toHaveBeenCalledTimes(1);
  expect(spy).toHaveBeenCalledWith(99, 3);

  spy.mockClear();
  a.set(1);
  a.set(2);
  b.set(3);
  b.set(4);
  expect(spy).toHaveBeenCalledTimes(4);
});

it('should work as expected if batch was called inside other batch', () => {
  const a = signal(1);
  const b = signal(2);
  const c = computed(() => a() + b());

  const spy = vi.fn();
  c.sub(spy);

  batch(() => {
    batch(() => {
      a.set(10);
      a.set(11);
    });
    batch(() => {
      b.set(30);
      b.set(88);
    });
  });
  expect(spy).toHaveBeenCalledTimes(1);
  expect(spy).toHaveBeenCalledWith(99, 3);
});

```
---
## File: packages/signals/src/batch.ts

```typescript
import { Signal } from './signal.js';

let callbacks: Map<Signal<any>, () => void> | undefined;

export function runInBatchMode(signal: Signal<any>, fn: () => void): void {
  if (callbacks) {
    callbacks.set(signal, fn);
  } else {
    fn();
  }
}

/**
 * Runs the specified function in the batch mode.
 *
 * It makes all signals' subscribers to be called only after signals changes inside the specified
 * function were applied.
 * @param fn - function to run in the batch mode.
 * @example
 * const a = signal(1);
 * const b = signal(1);
 * const c = computed(() => a() + b());
 *
 * function subscriber(value) {
 *   console.log(value);
 * }
 *
 * c.sub(subscriber);
 *
 * batch(() => {
 *   a.set(2);
 *   a.set(3);
 *   b.set(2);
 *   b.set(3);
 * });
 *
 * // Despite the fact that we called signals setters four times, the `subscriber` function will
 * // be called only once. Removing the `batch` function usage will lead to calling the `subscriber`
 * // function four times.
 */
export function batch(fn: () => void): void {
  // There could be a case when a batch is called inside other batches.
  // In this case, we should just ignore the current call.
  if (callbacks) {
    return fn();
  }
  callbacks = new Map();

  try {
    fn();
  } finally {
    callbacks.forEach(cb => cb());
    callbacks = undefined;
    // TODO: What if something went wrong in fn or its callbacks?
  }
}

```
---
## File: packages/signals/src/computed.test.ts

```typescript
import { describe, vi, it, expect, afterEach } from 'vitest';

import { computed } from './computed.js';
import { signal } from './signal.js';

afterEach(() => {
  vi.clearAllMocks();
});

describe('sub', () => {
  it('should call passed function if signal deps changed', () => {
    const s = signal(100);
    const c = computed(() => {
      return s();
    });
    expect(c()).toBe(100);
    const fn = vi.fn();
    c.sub(fn);
    s.set(200);
    expect(c()).toBe(200);
    expect(fn).toBeCalledTimes(1);
    expect(fn).toBeCalledWith(200, 100);
  });
});

it('should properly proceed nested computed calls', () => {
  const a = signal(2);
  const b = signal(2);
  const c = computed(() => a() + b());
  const d = computed(() => c() * 2);
  expect(d()).toBe(8);
});

```
---
## File: packages/signals/src/computed.ts

```typescript
import { signal, type Signal, type SignalOptions } from './signal.js';

export interface Computed<T> extends Omit<Signal<T>, 'set' | 'reset'> {
  /**
   * @returns An underlying signal value.
   */
  (): T;
}

const collectContexts: Set<Signal<unknown>>[] = [];

export function collectSignal(signal: Signal<any>): void {
  collectContexts.length && collectContexts[collectContexts.length - 1].add(signal);
}

/**
 * Creates a signal, which wil be automatically updated if some of its dependant signals were
 * modified.
 * @param fn - computation function.
 * @param options - additional functions.
 */
// #__NO_SIDE_EFFECTS__
export function computed<T>(
  fn: (prev?: T) => T,
  options?: SignalOptions<T>,
): Computed<T> {
  let deps = new Set<Signal<unknown>>();

  // An underlying signal.
  let $signal: Signal<T> | undefined;

  function s(): Signal<T> {
    return $signal || ($signal = signal<T>(compute(), options));
  }

  function update() {
    s().set(compute());
  }

  function compute(): T {
    // As long as in this iteration, we may receive new signals as dependencies, we stop
    // listening to the previous signals.
    deps.forEach(s => {
      s.unsub(update, { signal: true });
    });

    // Signals we collected during current computation.
    const collectedSignals = new Set<Signal<unknown>>();
    let result: T;

    // Add this set to the global variable, so dependant signals will be catched.
    collectContexts.push(collectedSignals);

    try {
      // Run the function and collect all called signals.
      result = fn();
    } finally {
      // Remember to untrack the reactive context.
      collectContexts.pop();
    }

    // Start tracking for all dependencies' changes and re-compute the computed value.
    collectedSignals.forEach(s => {
      s.sub(update, { signal: true });
    });
    deps = collectedSignals;

    return result;
  }

  return Object.assign(function computed(): T {
    return s()();
  }, {
    destroy() {
      s().destroy();
    },
    sub(...args) {
      return s().sub(...args);
    },
    unsub(...args) {
      s().unsub(...args);
    },
    unsubAll(...args) {
      s().unsubAll(...args);
    },
  } satisfies Pick<Computed<T>, 'destroy' | 'sub' | 'unsub' | 'unsubAll'>);
}

```
---
## File: packages/signals/src/index.ts

```typescript
export { batch } from './batch.js';
export { computed, type Computed } from './computed.js';
export {
  signal,
  type Signal,
  type SignalOptions,
  type SubscribeListenerFn,
  type RemoveListenerFn,
} from './signal.js';

```
---
## File: packages/signals/src/signal.test.ts

```typescript
import { afterEach, describe, expect, it, vi } from 'vitest';

import { signal } from './signal.js';

afterEach(() => {
  vi.clearAllMocks();
});

describe('get', () => {
  it('should return signal value', () => {
    const s = signal(123321);
    expect(s()).toBe(123321);
  });
});

describe('set', () => {
  it('should update signal value', () => {
    const s = signal(1);
    expect(s()).toBe(1);
    s.set(2);
    expect(s()).toBe(2);
  });
});

describe('sub', () => {
  it('should call passed function if signal was changed', () => {
    const s = signal(100);
    const fn = vi.fn();
    s.sub(fn);
    s.set(200);
    expect(fn).toBeCalledTimes(1);
    expect(fn).toBeCalledWith(200, 100);
  });

  it('should not call function if set value is the same', () => {
    const s = signal(1);
    const fn = vi.fn();
    s.sub(fn);
    s.set(1);
    expect(fn).toBeCalledTimes(0);
  });

  it('should call listener only once if option is passed', () => {
    const s = signal(1);
    const fn = vi.fn();
    s.sub(fn, { once: true });
    s.set(2);
    s.set(3);
    expect(fn).toBeCalledTimes(1);
  });
});

describe('reset', () => {
  it('should set signal value to initially passed', () => {
    const obj = {};
    const s = signal(obj);
    s.set({ a: 1 });
    expect(s()).not.toBe(obj);
    s.reset();
    expect(s()).toBe(obj);
  });
});

describe('unsub', () => {
  it('should not call passed function if signal was changed', () => {
    const s = signal(100);
    const fn = vi.fn();
    s.sub(fn);
    s.set(200);
    expect(fn).toBeCalledTimes(1);
    expect(fn).toBeCalledWith(200, 100);
    fn.mockClear();

    s.unsub(fn);
    s.set(300);
    expect(fn).toBeCalledTimes(0);
  });

  it('should remove listener only if its "once" is the same', () => {
    const s = signal(1);
    const fn = vi.fn();
    const fn2 = vi.fn();
    s.sub(fn);
    s.sub(fn2, { once: true });

    s.unsub(fn, true);
    s.unsub(fn2);

    expect(fn).toHaveBeenCalledTimes(0);
    expect(fn2).toHaveBeenCalledTimes(0);
    s.set(2);
    expect(fn).toHaveBeenCalledTimes(1);
    expect(fn2).toHaveBeenCalledTimes(1);
    fn.mockClear();
    fn2.mockClear();

    s.unsub(fn);
    s.unsub(fn2, true);
    s.set(3);
    expect(fn).toHaveBeenCalledTimes(0);
    expect(fn2).toHaveBeenCalledTimes(0);
  });
});

describe('destroy', () => {
  it('should remove only all listeners', () => {
    const s = signal(1);
    const fn = vi.fn();
    const fn2 = vi.fn();
    s.sub(fn);
    s.sub(fn2);
    s.set(2);
    expect(fn).toBeCalledTimes(1);
    expect(fn2).toBeCalledTimes(1);
    fn.mockClear();
    fn2.mockClear();

    s.destroy();
    s.set(3);
    expect(fn).toBeCalledTimes(0);
    expect(fn2).toBeCalledTimes(0);
  });
});

```
---
## File: packages/signals/src/signal.ts

```typescript
import { collectSignal } from './computed.js';
import { runInBatchMode } from './batch.js';

export type SubscribeListenerFn<T> = (current: T, previous: T) => void;
export type RemoveListenerFn = () => void;

export interface SignalOptions<T> {
  /**
   * Previous and next values comparator.
   *
   * This function is used during the actual and incoming values comparison in the `set` method.
   * If values are considered the same, no subscribers will be called.
   *
   * @default Object.is
   * @param current - the actual value.
   * @param next - an incoming value.
   * @returns True if values are considered the same.
   */
  equals?: (current: T, next: T) => boolean;
}

export interface SubOptions {
  /**
   * Should the listener be called only once.
   */
  once?: boolean;
  /**
   * True if the subscriber was added by another signal.
   */
  signal?: boolean;
}

export interface Signal<T> {
  /**
   * @returns An underlying signal value.
   */
  (): T;
  /**
   * Destroys the signal removing all bound listeners.
   *
   * We usually use this method when the signal is not needed anymore.
   *
   * Take note that as long as call of this method removes all bound listeners, computed signals
   * based on the current one will stop listening to its changes, possibly making it work
   * improperly.
   */
  destroy: () => void;
  /**
   * Resets the signal to its initial value.
   */
  reset: () => void;
  /**
   * Updates the signal notifying all subscribers about changes.
   * @param value - value to set.
   */
  set: (value: T) => void;
  /**
   * Adds a new listener, tracking the signal changes.
   * @param fn - event listener.
   * @param onceOrOptions - was this listener added for a single call, or additional
   * options.
   * @returns A function to remove the bound listener.
   */
  sub: (fn: SubscribeListenerFn<T>, onceOrOptions?: boolean | SubOptions) => RemoveListenerFn;
  /**
   * Removes a listener, tracking the signal changes.
   * @param fn - event listener.
   * @param onceOrOptions - was this listener added for a single call, or additional
   * options. Default: false
   */
  unsub: (fn: SubscribeListenerFn<T>, onceOrOptions?: boolean | SubOptions) => void;
  /**
   * Remove all non-signal listeners.
   */
  unsubAll: () => void;
}

/**
 * Creates a new signal with initial value.
 * @param initialValue - initial value.
 * @param options - additional options.
 */
export function signal<T>(
  initialValue: T,
  options?: SignalOptions<T>,
): Signal<T>;

/**
 * Creates a new signal without initial value.
 * @param initialValue
 * @param options - additional options.
 */
export function signal<T>(
  initialValue?: T,
  options?: SignalOptions<T | undefined>,
): Signal<T | undefined>;

// #__NO_SIDE_EFFECTS__
export function signal<T>(
  initialValue?: T,
  options?: SignalOptions<T | undefined>,
): Signal<T | undefined> {
  type CurrentSignal = Signal<T | undefined>;

  options ||= {};
  const equals = options.equals || Object.is;

  let listeners: [
    listener: SubscribeListenerFn<T | undefined>,
    options: Required<SubOptions>,
  ][] = [];
  let value: ReturnType<CurrentSignal> = initialValue;

  const set: CurrentSignal['set'] = v => {
    if (!equals(value, v)) {
      const prev = value;
      value = v;

      // We are making a copy of listeners as long as they may mutate the listeners' array,
      // leading to an unexpected behavior.
      //
      // We want the setter to make sure that all listeners will be called in predefined
      // order within a single update frame.
      runInBatchMode(s, () => {
        [...listeners].forEach(([fn, once]) => {
          fn(v, prev);

          // Remove "once" listeners.
          if (once) {
            unsub(fn, true);
          }
        });
      });
    }
  };

  function formatSubOptions(onceOrOptions: boolean | SubOptions | undefined): Required<SubOptions> {
    const options = typeof onceOrOptions !== 'object'
      ? { once: onceOrOptions }
      : onceOrOptions;
    return {
      once: options.once || false,
      signal: options.signal || false,
    };
  }

  const unsub: CurrentSignal['unsub'] = (fn, onceOrOptions) => {
    const options = formatSubOptions(onceOrOptions);
    const idx = listeners.findIndex(([listener, lOptions]) => {
      return listener === fn
        && lOptions.once === options.once
        && lOptions.signal === options.signal;
    });
    if (idx >= 0) {
      listeners.splice(idx, 1);
    }
  };

  const s = Object.assign(
    function get() {
      collectSignal(s);
      return value;
    },
    {
      destroy() {
        listeners = [];
      },
      set,
      reset() {
        set(initialValue);
      },
      sub(fn, onceOrOptions) {
        listeners.push([fn, formatSubOptions(onceOrOptions)]);
        return () => unsub(fn, onceOrOptions);
      },
      unsub,
      unsubAll() {
        listeners = listeners.filter(l => l[1].signal);
      },
    } satisfies Pick<CurrentSignal, 'destroy' | 'set' | 'reset' | 'sub' | 'unsub' | 'unsubAll'>,
  );

  return s;
}

```
---
## File: packages/signals/CHANGELOG.md

```markdown
# @tma.js/signals

## 1.0.1

### Patch Changes

- 4570643: Update package.json actualizing all paths.

```
---
## File: packages/signals/LICENSE

```text
MIT License

Copyright (c) 2025 Vladislav Kibenko

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

```
---
## File: packages/signals/package.json

```json
{
  "name": "@tma.js/signals",
  "version": "1.0.1",
  "description": "TypeScript package implementing simple JavaScript signals.",
  "author": "Vladislav Kibenko <wolfram.deus@gmail.com>",
  "homepage": "https://github.com/Telegram-Mini-Apps/tma.js#readme",
  "repository": {
    "type": "git",
    "url": "git@github.com:Telegram-Mini-Apps/tma.js.git",
    "directory": "packages/signals"
  },
  "bugs": {
    "url": "https://github.com/Telegram-Mini-Apps/tma.js/issues"
  },
  "keywords": [
    "telegram-mini-apps",
    "typescript",
    "signals"
  ],
  "license": "MIT",
  "type": "module",
  "sideEffects": false,
  "files": [
    "dist"
  ],
  "main": "./dist/index.cjs",
  "module": "./dist/index.js",
  "types": "./dist/dts/index.d.ts",
  "exports": {
    ".": {
      "types": "./dist/dts/index.d.ts",
      "import": "./dist/index.js",
      "require": "./dist/index.cjs",
      "default": "./dist/index.cjs"
    }
  },
  "scripts": {
    "test": "vitest --run",
    "lint": "eslint src",
    "lint:fix": "pnpm run lint --fix",
    "typecheck": "tsc --noEmit -p tsconfig.build.json",
    "build": "vite build -c vite.config.ts"
  },
  "devDependencies": {
    "test-utils": "workspace:*",
    "tsconfig": "workspace:*"
  },
  "publishConfig": {
    "access": "public"
  }
}

```
---
## File: packages/signals/tsconfig.build.json

```json
{
  "extends": "tsconfig/esnext-dom.json",
  "include": [
    "src"
  ],
  "exclude": [
    "src/**/*.test.ts"
  ]
}
```
---
## File: packages/signals/tsconfig.eslint.json

```json
{
  "extends": "./tsconfig.build.json",
  "include": [
    "src"
  ],
  "exclude": []
}
```
---
## File: packages/signals/tsconfig.json

```json
{
  "extends": "./tsconfig.build.json",
  "references": [
    {
      "path": "./tsconfig.node.json"
    },
    {
      "path": "./tsconfig.test.json"
    }
  ]
}
```
---
## File: packages/signals/tsconfig.node.json

```json
{
  "extends": "tsconfig/esnext.json",
  "compilerOptions": {
    "composite": true
  },
  "include": [
    "build"
  ]
}
```
---
## File: packages/signals/tsconfig.test.json

```json
{
  "extends": "tsconfig/esnext-dom.json",
  "compilerOptions": {
    "composite": true,
    "declaration": true
  },
  "include": [
    "src"
  ]
}
```
---
## File: packages/signals/vite.config.ts

```typescript
import { defineConfig } from 'vitest/config';
import dts from 'vite-plugin-dts';

export default defineConfig(({ mode }) => {
  const tsconfigPath = mode === 'test'
    ? './tsconfig.test.json'
    : './tsconfig.build.json';

  return {
    plugins: [
      dts({ outDir: 'dist/dts', tsconfigPath }),
    ],
    build: {
      outDir: 'dist',
      emptyOutDir: true,
      sourcemap: true,
      lib: {
        entry: 'src/index.ts',
        formats: ['es', 'cjs'],
        fileName: 'index',
      },
    },
    test: {
      environment: 'happy-dom',
      coverage: {
        enabled: true,
        provider: 'v8',
        include: ['src/**/*.ts'],
        exclude: ['src/**/*.test.ts', 'src/index.ts'],
        branches: 80,
        functions: 80,
        statements: 80,
        lines: 80,
      },
    },
  };
});
```
---
## File: packages/test-utils/src/createDomEmitter.ts

```typescript
export interface DomEmitter {
  addEventListener(event: string, cb: (event: Event) => void): void;
  removeEventListener(event: string, cb: (event: Event) => void): void;
  dispatchEvent(event: Event): void;
}

/**
 * Removes simple emitter, which could be used in tests.
 */
export function createDomEmitter(): DomEmitter {
  const listeners: Record<string, ((...args: any) => any)[]> = {};

  return {
    addEventListener(event, cb) {
      if (listeners[event] === undefined) {
        listeners[event] = [];
      }
      listeners[event].push(cb);
    },
    removeEventListener(event, cb) {
      const eventListeners = listeners[event] || [];
      if (eventListeners.includes(cb)) {
        eventListeners.splice(eventListeners.indexOf(cb), 1);
      }
    },
    dispatchEvent(event): void {
      const cbs = listeners[event.type] || [];
      cbs.forEach(cb => cb(event));
    },
  };
}

```
---
## File: packages/test-utils/src/createWindow.ts

```typescript
import { vi, type MockInstance } from 'vitest';

import { mockWindow, type Wnd } from './mockWindow';
import { createDomEmitter } from './createDomEmitter';

export type WindowSpy = MockInstance<() => Wnd>;

/**
 * Mocks window and returns created spy.
 * @param options - additional options.
 */
export function createWindow({ env, ...rest }: Partial<Wnd & { env: 'iframe' }> = {}): WindowSpy {
  return mockWindow({
    // We need this property to correctly re-emit received event from Telegram.
    parent: { postMessage: vi.fn() },
    ...createDomEmitter(),
    ...(env === 'iframe' ? { top: 1, self: 2 } : {}),
    ...rest,
  } as Wnd);
}

```
---
## File: packages/test-utils/src/formatImplementation.ts

```typescript
export type MockImplementation<T, Args extends any[] = []> = T | ((...args: Args) => T);

/**
 * Formats mock implementation.
 * @param impl - mock implementation.
 */
export function formatImplementation<T, Args extends any[] = []>(
  impl: MockImplementation<T, Args>,
): (...args: Args) => T {
  return typeof impl === 'function'
    ? impl as any
    : () => impl;
}

```
---
## File: packages/test-utils/src/index.ts

```typescript
export * from './createDomEmitter';
export * from './createWindow';
export * from './mockPageReload';
export * from './mockPerformanceGetEntriesByType';
export * from './session-storage';
export * from './mockWindow';

```
---
## File: packages/test-utils/src/mockPageReload.ts

```typescript
import { mockPerformanceGetEntriesByType } from './mockPerformanceGetEntriesByType';

export function mockPageReload() {
  return mockPerformanceGetEntriesByType([{ type: 'reload' }] as any);
}
```
---
## File: packages/test-utils/src/mockPerformanceGetEntriesByType.ts

```typescript
import { vi } from 'vitest';

import { formatImplementation, type MockImplementation } from './formatImplementation';

/**
 * Mocks performance.getEntriesByType.
 * @param impl - method implementation.
 */
export function mockPerformanceGetEntriesByType(
  impl: MockImplementation<PerformanceEntry[]> = [],
) {
  return vi
    .spyOn(performance, 'getEntriesByType')
    .mockImplementation(formatImplementation(impl));
}

```
---
## File: packages/test-utils/src/mockWindow.ts

```typescript
import { vi } from 'vitest';

import { formatImplementation, type MockImplementation } from './formatImplementation';

export type Wnd = Window & typeof globalThis;

/**
 * Mocks window getter.
 * @param impl - window getter implementation.
 */
export function mockWindow(impl: MockImplementation<Wnd>) {
  return vi
    .spyOn(global, 'window', 'get')
    .mockImplementation(formatImplementation(impl));
}

```
---
## File: packages/test-utils/src/session-storage.ts

```typescript
import { vi } from 'vitest';

import { formatImplementation, type MockImplementation } from './formatImplementation';

/**
 * Mocks sessionStorage.getItem.
 * @param impl - method implementation.
 */
export function mockSessionStorageGetItem(
  impl: MockImplementation<string | null, [string]> = null,
) {
  return vi
    .spyOn(globalThis.sessionStorage, 'getItem')
    .mockImplementation(formatImplementation(impl));
}

/**
 * Mocks sessionStorage.setItem.
 * @param impl - method implementation.
 */
export function mockSessionStorageSetItem(
  impl?: MockImplementation<void, [k: string, v: string]>,
) {
  return vi
    .spyOn(globalThis.sessionStorage, 'setItem')
    .mockImplementation(formatImplementation(impl));
}

```
---
## File: packages/test-utils/package.json

```json
{
  "name": "test-utils",
  "private": true,
  "version": "0.0.1",
  "description": "",
  "main": "src/index.ts",
  "keywords": [],
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "tsconfig": "workspace:*"
  }
}

```
---
## File: packages/test-utils/tsconfig.eslint.json

```json
{
  "extends": "./tsconfig.json"
}
```
---
## File: packages/test-utils/tsconfig.json

```json
{
  "extends": "tsconfig/esnext-dom.json",
  "include": [
    "src"
  ]
}
```
---
## File: packages/toolkit/src/casing/camelToKebab.ts

```typescript
/**
 * Converts string value from camel case to kebab case.
 * @param value - value to convert.
 */
export function camelToKebab(value: string): string {
  return value.replace(/[A-Z]/g, match => `-${match.toLowerCase()}`);
}

```
---
## File: packages/toolkit/src/casing/camelToSnake.ts

```typescript
export type CamelToSnakeCase<T extends string> = T extends `${infer First}${infer Rest}`
  ? `${First extends Capitalize<First> ? '_' : ''}${Lowercase<First>}${CamelToSnakeCase<Rest>}`
  : T;

/**
 * Converts string value from camel case to snake case.
 * @param value - value to convert.
 */
export function camelToSnake<T extends string>(value: T): CamelToSnakeCase<T> {
  return value.replace(/[A-Z]/g, match => `_${match.toLowerCase()}`) as CamelToSnakeCase<T>;
}

```
---
## File: packages/toolkit/src/casing/camelToSnakeObjKeys.ts

```typescript
import { camelToSnake, type CamelToSnakeCase } from '@/casing/camelToSnake.js';

export type ConvertCamelKeysToSnakeCase<T> = {
  [K in keyof T as CamelToSnakeCase<string & K>]: T[K];
};

/**
 * Converts object keys from snake to camel case.
 * @param value - value to convert.
 */
export function camelToSnakeObjKeys<T extends object>(value: T): ConvertCamelKeysToSnakeCase<T> {
  return Object.entries(value).reduce<ConvertCamelKeysToSnakeCase<T>>((acc, [k, v]) => {
    acc[camelToSnake(k) as keyof ConvertCamelKeysToSnakeCase<T>] = v;
    return acc;
  }, {} as ConvertCamelKeysToSnakeCase<T>);
}

```
---
## File: packages/toolkit/src/casing/deepSnakeToCamelObjKeys.ts

```typescript
import { snakeToCamelObjKeys } from '@/casing/snakeToCamelObjKeys.js';
import type { SnakeToCamelCase } from '@/casing/snakeToCamel.js';

export type DeepConvertSnakeKeysToCamelCase<T> = T extends infer U
  ? U extends object
    ? U extends Date
      ? U
      : U extends (infer Item)[]
        ? DeepConvertSnakeKeysToCamelCase<Item>[]
        : {
          [K in keyof U as SnakeToCamelCase<string & K>]: DeepConvertSnakeKeysToCamelCase<U[K]>
        } & {}
    : U
  : T;

/**
 * Deeply converts object keys from snake to camel case.
 * @param value - value to convert.
 */
export function deepSnakeToCamelObjKeys<T extends object>(
  value: T,
): DeepConvertSnakeKeysToCamelCase<T> {
  const camelCased = snakeToCamelObjKeys(value);
  for (const key in camelCased) {
    const value = camelCased[key];
    if (value && typeof value === 'object' && !(value instanceof Date)) {
      (camelCased as any)[key] = Array.isArray(value)
        ? value.map(deepSnakeToCamelObjKeys)
        : deepSnakeToCamelObjKeys(value);
    }
  }
  return camelCased as DeepConvertSnakeKeysToCamelCase<T>;
}

```
---
## File: packages/toolkit/src/casing/snakeToCamel.ts

```typescript
export type SnakeToCamelCase<S extends string> =
  S extends `${infer Head}_${infer Tail}`
    ? `${Head}${Capitalize<SnakeToCamelCase<Tail>>}`
    : S;

/**
 * Converts string value from snake case to camel case.
 * @param value - value to convert.
 */
export function snakeToCamel<T extends string>(value: T): SnakeToCamelCase<T> {
  return value.replace(/_[a-z]/g, m => m[1].toUpperCase()) as SnakeToCamelCase<T>;
}

```
---
## File: packages/toolkit/src/casing/snakeToCamelObjKeys.ts

```typescript
import { snakeToCamel, type SnakeToCamelCase } from '@/casing/snakeToCamel.js';

export type ConvertSnakeKeysToCamelCase<T> = {
  [K in keyof T as SnakeToCamelCase<string & K>]: T[K];
};

/**
 * Converts object keys from snake to camel case.
 * @param value - value to convert.
 */
export function snakeToCamelObjKeys<T extends object>(value: T): ConvertSnakeKeysToCamelCase<T> {
  return Object.entries(value).reduce<ConvertSnakeKeysToCamelCase<T>>((acc, [k, v]) => {
    acc[snakeToCamel(k) as keyof ConvertSnakeKeysToCamelCase<T>] = v;
    return acc;
  }, {} as ConvertSnakeKeysToCamelCase<T>);
}

```
---
## File: packages/toolkit/src/casing/snakeToKebab.ts

```typescript
/**
 * Converts string value from snake case to kebab case.
 * @param value - value to convert.
 */
export function snakeToKebab(value: string): string {
  return value.replace(/_([a-z])/g, (_, letter) => `-${letter.toLowerCase()}`);
}

```
---
## File: packages/toolkit/src/storage/storage.test.ts

```typescript
import { beforeEach, describe, expect, it, vi } from 'vitest';

import { getStorageValue, setStorageValue } from '@/storage/storage.js';

beforeEach(() => {
  vi.restoreAllMocks();
});

describe('setStorageValue', () => {
  it(
    'should call sessionStorage.setItem with formatted key and JSON.stringify applied to value',
    () => {
      const setItem = vi
        .spyOn(Storage.prototype, 'setItem')
        .mockImplementation(() => null);
      setStorageValue('backButton', false);
      expect(setItem).toHaveBeenCalledOnce();
      expect(setItem).toHaveBeenCalledWith('tapps/backButton', 'false');
    },
  );
});

describe('getStorageValue', () => {
  it(
    'should call sessionStorage.getItem with formatted key and apply JSON.parse to the extracted value in case, it is not empty. If parsing failed, return undefined',
    () => {
      const getItem = vi
        .spyOn(Storage.prototype, 'getItem')
        .mockImplementation(() => '{"isVisible":false}');
      let value = getStorageValue('backButton');
      expect(getItem).toHaveBeenCalledOnce();
      expect(getItem).toHaveBeenCalledWith('tapps/backButton');
      expect(value).toStrictEqual({ isVisible: false });

      getItem.mockImplementation(() => null);
      value = getStorageValue('backButton');
      expect(value).toBeUndefined();

      getItem.mockImplementation(() => '{"isVisible":}');
      value = getStorageValue('backButton');
      expect(value).toBeUndefined();
    },
  );
});

```
---
## File: packages/toolkit/src/storage/storage.ts

```typescript
/**
 * Converts a passed storage key to the formatted state.
 * @param key - storage key.
 */
function formatKey(key: string): string {
  return `tapps/${key}`;
}

/**
 * Saves value in the storage.
 * @param key - storage key.
 * @param value - storage value.
 */
export function setStorageValue<T>(key: string, value: T): void {
  sessionStorage.setItem(formatKey(key), JSON.stringify(value));
}

/**
 * Extracts value from the storage.
 * @param key - storage key.
 */
export function getStorageValue<R>(key: string): R | undefined {
  const value = sessionStorage.getItem(formatKey(key));
  try {
    return value ? JSON.parse(value) as R : undefined;
  } catch {
  }
}

```
---
## File: packages/toolkit/src/types/logical.ts

```typescript
export type If<Cond extends boolean, True, False> = Cond extends true ? True : False;

export type Or<A extends boolean, B extends boolean> = A extends true
  ? true
  : (B extends true ? true : false);

```
---
## File: packages/toolkit/src/types/misc.ts

```typescript
export type Maybe<T> = T | undefined | null;
export type AnyFn = (...args: any[]) => any;

```
---
## File: packages/toolkit/src/types/predicates.ts

```typescript
export type IsNever<T> = [T] extends [never] ? true : false;

export type IsUndefined<T> = [T] extends [undefined] ? true : false;

```
---
## File: packages/toolkit/src/types/unions.ts

```typescript
export type UnionStringKeys<U> = U extends U ? {
  [K in keyof U]-?: U[K] extends string | undefined ? K : never;
}[keyof U] : never;

export type UnionRequiredKeys<U> = U extends U ? {
  [K in UnionStringKeys<U>]: ({} extends Pick<U, K> ? never : K);
}[UnionStringKeys<U>] : never;

export type UnionOptionalKeys<U> = Exclude<UnionStringKeys<U>, UnionRequiredKeys<U>>;

```
---
## File: packages/toolkit/src/createCbCollector.ts

```typescript
export type CallbackFn = () => void;

/**
 * Returns a tuple, containing function to add cleanup, call cleanup, and flag showing whether
 * cleanup was called. Cleanup will not be performed in case, it was done before.
 */
export function createCbCollector(...cbs: (CallbackFn | CallbackFn[])[]): [
  add: (...fns: CallbackFn[]) => void,
  call: () => void,
] {
  const callbacks = cbs.flat(1);

  return [
    callbacks.push.bind(callbacks),
    () => {
      callbacks.forEach(cb => {
        cb();
      });
    },
  ];
}

```
---
## File: packages/toolkit/src/createLogger.test.ts

```typescript
import {
  afterEach,
  beforeAll,
  describe,
  expect,
  it,
  vi,
} from 'vitest';

import { createLogger } from './createLogger.js';

const now = new Date('2022-11-04T09:09:43.007Z');

beforeAll(() => {
  vi.setSystemTime(now);
});

afterEach(() => {
  vi.resetAllMocks();
});

describe('log', () => {
  it('should call console.log()', () => {
    const { log } = createLogger('SDK');
    const spy = vi.fn();
    vi.spyOn(console, 'log').mockImplementation(spy);

    log('Test');
    expect(spy).toHaveBeenCalledOnce();
    expect(spy).toHaveBeenCalledWith(
      '%cINFO 09:09:43.007%c %cSDK',
      expect.anything(),
      expect.anything(),
      expect.anything(),
      'Test',
    );
  });

  it('should not log if shouldLog is false', () => {
    const { log } = createLogger('SDK', { shouldLog: false });
    const spy = vi.fn();
    vi.spyOn(console, 'log').mockImplementation(spy);

    log('Test');
    expect(spy).not.toHaveBeenCalled();
  });
});

describe('error', () => {
  it('should call console.error()', () => {
    const { error } = createLogger('SDK');
    const spy = vi.fn();
    vi.spyOn(console, 'error').mockImplementation(spy);

    error('Test');
    expect(spy).toHaveBeenCalledOnce();
    expect(spy).toHaveBeenCalledWith(
      '%cERR 09:09:43.007%c %cSDK',
      expect.anything(),
      expect.anything(),
      expect.anything(),
      'Test',
    );
  });

  it('should not log if shouldLog is false', () => {
    const { error } = createLogger('SDK', { shouldLog: false });
    const spy = vi.fn();
    vi.spyOn(console, 'error').mockImplementation(spy);

    error('Test');
    expect(spy).not.toHaveBeenCalled();
  });
});

describe('warn', () => {
  it('should call console.warn()', () => {
    const { warn } = createLogger('SDK');
    const spy = vi.fn();
    vi.spyOn(console, 'warn').mockImplementation(spy);

    warn('Test');
    expect(spy).toHaveBeenCalledOnce();
    expect(spy).toHaveBeenCalledWith(
      '%cWARN 09:09:43.007%c %cSDK',
      expect.anything(),
      expect.anything(),
      expect.anything(),
      'Test',
    );
  });

  it('should not log if shouldLog is false', () => {
    const { warn } = createLogger('SDK', { shouldLog: false });
    const spy = vi.fn();
    vi.spyOn(console, 'warn').mockImplementation(spy);

    warn('Test');
    expect(spy).not.toHaveBeenCalled();
  });
});

```
---
## File: packages/toolkit/src/createLogger.ts

```typescript
/**
 * Message log level.
 */
export type LogLevel = 'log' | 'error' | 'warn';

export interface LoggerOptions {
  bgColor?: string;
  textColor?: string;
  /**
   * True if logs are enabled.
   * @default true
   */
  shouldLog?: boolean | (() => boolean);
}

export type LoggerFn = (...args: any[]) => void;
export type LoggerForceFn = (...args: any[]) => void;

export interface Logger {
  /**
   * Prints an error message into the console.
   * @param args - items to log.
   */
  error: LoggerFn;
  /**
   * Prints an error message into the console ignoring the `shouldLog`
   * constructor option.
   * @param args - items to log.
   */
  forceError: LoggerForceFn;
  /**
   * Prints a log message into the console ignoring the `shouldLog` constructor
   * option.
   * @param args - items to log.
   */
  forceLog: LoggerForceFn;
  /**
   * Prints a warning message into the console ignoring the `shouldLog`
   * constructor option.
   * @param args - items to log.
   */
  forceWarn: LoggerForceFn;
  /**
   * Prints a log message into the console.
   * @param args - items to log.
   */
  log: LoggerFn;
  /**
   * Prints a warning message into the console.
   * @param args - items to log.
   */
  warn: LoggerFn;
}

/* @__NO_SIDE_EFFECTS__*/
export function createLogger(scope: string, options?: LoggerOptions): Logger {
  options ||= {};
  const {
    textColor,
    bgColor,
    shouldLog: optionsShouldLog,
  } = options;
  const shouldLogValue = optionsShouldLog === undefined ? true : optionsShouldLog;
  const shouldLog = typeof shouldLogValue === 'boolean'
    ? () => shouldLogValue
    : shouldLogValue;

  /**
   * Prints a message into the console.
   * @param level - log level.
   * @param force - should `shouldLog` value be ignored.
   * @param args - arguments.
   */
  const print = (level: LogLevel, force: boolean, ...args: any[]): void => {
    if (force || shouldLog()) {
      const commonCss = 'font-weight:bold;padding:0 5px;border-radius:100px';
      const [timeBgColor, timeTextColor, prefix] = {
        log: ['#0089c3', 'white', 'INFO'],
        error: ['#ff0000F0', 'white', 'ERR'],
        warn: ['#D38E15', 'white', 'WARN'],
      }[level];
      console[level](
        `%c${prefix} ${
          Intl
            .DateTimeFormat('en-GB', {
              hour: '2-digit',
              minute: '2-digit',
              second: '2-digit',
              fractionalSecondDigits: 3,
              timeZone: 'UTC',
            })
            .format(new Date())
        }%c %c${scope}`,
        `${commonCss};background-color:${timeBgColor};color:${timeTextColor}`,
        '',
        `${commonCss};${textColor ? `color:${textColor};` : ''}${bgColor ? `background-color:${bgColor}` : ''}`,
        ...args,
      );
    }
  };

  return ([
    ['log', 'forceLog'],
    ['warn', 'forceWarn'],
    ['error', 'forceError'],
  ] as const).reduce<Logger>((acc, [level, forceMethod]) => {
    acc[level] = print.bind(undefined, level, false);
    acc[forceMethod] = print.bind(undefined, level, true);
    return acc;
  }, {} as Logger);
}

```
---
## File: packages/toolkit/src/index.ts

```typescript
export * from './casing/camelToKebab.js';
export * from './casing/camelToSnake.js';
export * from './casing/camelToSnakeObjKeys.js';
export * from './casing/deepSnakeToCamelObjKeys.js';
export * from './casing/snakeToCamel.js';
export * from './casing/snakeToCamelObjKeys.js';
export * from './casing/snakeToKebab.js';

export * from './storage/storage.js';

export type * from './types/logical.js';
export type * from './types/misc.js';
export type * from './types/predicates.js';
export type * from './types/unions.js';

export * from './createCbCollector.js';
export * from './createLogger.js';
export * from './monads.js';

```
---
## File: packages/toolkit/src/monads.ts

```typescript
import * as E from 'fp-ts/Either';
import * as TE from 'fp-ts/TaskEither';
import { pipe } from 'fp-ts/function';
import {
  BetterPromise,
  type BetterPromiseExecutorContext,
  type BetterPromiseOptions,
  type TimeoutError,
} from 'better-promises';

import type { AnyFn } from '@/types/misc.js';

export type AnyEither<L = any, R = any> = E.Either<L, R> | TE.TaskEither<L, R>;
export type AnyFnAnyEither<L = any, R = any> = (...args: any) => AnyEither<L, R>;

export type RightOfEither<T extends AnyEither> = [T] extends [E.Either<any, infer U>]
  ? U
  : T extends TE.TaskEither<any, infer U>
    ? U
    : never;
export type LeftOfEither<T extends AnyEither> = [T] extends [E.Either<infer U, any>]
  ? U
  : T extends TE.TaskEither<infer U, any>
    ? U
    : never;
export type RightOfReturn<F extends AnyFnAnyEither> = RightOfEither<ReturnType<F>>;
export type LeftOfReturn<F extends AnyFnAnyEither> = LeftOfEither<ReturnType<F>>;

export type MaybeMonadToCommon<T> = [T] extends [E.Either<any, infer U>]
  ? U
  : T extends TE.TaskEither<any, infer U>
    ? BetterPromise<U>
    : T;

export type MaybeCommonToMonad<T> = T extends AnyEither
  ? T
  : T extends PromiseLike<infer U>
    ? TE.TaskEither<unknown, U>
    : E.Either<unknown, T>;

export type MaybeMonadReturnTypeToCommon<Fn extends AnyFn> = MaybeMonadToCommon<ReturnType<Fn>>;

export type MaybeCommonReturnTypeToMonad<Fn extends AnyFn> = MaybeCommonToMonad<ReturnType<Fn>>;

export function throwifyAnyEither<E extends AnyEither>(either: E): MaybeMonadToCommon<E> {
  const onError = (e: unknown) => {
    throw e;
  };
  return (
    typeof either === 'function'
      ? BetterPromise.resolve(pipe(either, TE.match(onError, data => data))())
      : pipe(either, E.match(onError, data => data))
  ) as MaybeMonadToCommon<E>;
}

export function throwifyFpFn<Fn extends AnyFnAnyEither>(
  fn: Fn,
): (
  & ((...args: Parameters<Fn>) => MaybeMonadReturnTypeToCommon<Fn>)
  & { [K in keyof Fn]: Fn[K] }
) {
  return Object.assign(
    (...args: Parameters<Fn>) => {
      return throwifyAnyEither(fn(...args)) as MaybeMonadReturnTypeToCommon<Fn>;
    },
    fn,
  );
}

export type BetterTaskEitherError = TimeoutError;

export const BetterTaskEither = Object.assign(
  <E, T>(
    executor: (
      resolve: (data: T) => void,
      reject: (reason: E) => void,
      context: BetterPromiseExecutorContext<E.Either<E | BetterTaskEitherError, T>>,
    ) => (void | Promise<void>),
    options?: BetterPromiseOptions,
  ): TE.TaskEither<E | BetterTaskEitherError, T> => {
    return pipe(
      TE.tryCatch(
        () => {
          return new BetterPromise<E.Either<E, T>>((res, _rej, context) => {
            return executor(
              result => res(E.right(result)),
              error => res(E.left(error)),
              context,
            );
          }, options);
        },
        e => e as E,
      ),
      TE.chainW(E.match(TE.left, TE.right<E, T>)),
    );
  },
  {
    fn: <E, T>(
      fn: (context: BetterPromiseExecutorContext<E.Either<E | BetterTaskEitherError, T>>) => (
        E.Either<E, T> | TE.TaskEither<E, T>
      ),
      options?: BetterPromiseOptions,
    ): TE.TaskEither<E | BetterTaskEitherError, T> => {
      return BetterTaskEither<E, T>((resolve, reject, context) => {
        const result = fn(context);
        void pipe(
          typeof result === 'function' ? result : TE.fromEither(result),
          TE.matchW(reject, resolve),
        )();
      }, options);
    },
  },
);

```
---
## File: packages/toolkit/CHANGELOG.md

```markdown
# @tma.js/toolkit

## 1.0.2

### Patch Changes

- 4570643: Update package.json actualizing all paths.

## 1.0.1

### Patch Changes

- fe883d3: Set a proper return type for eitherFnToSimple.

```
---
## File: packages/toolkit/LICENSE

```text
MIT License

Copyright (c) 2025 Vladislav Kibenko

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

```
---
## File: packages/toolkit/package.json

```json
{
  "name": "@tma.js/toolkit",
  "version": "1.0.2",
  "description": "Internal toolkit used in the @tma.js packages.",
  "author": "Vladislav Kibenko <wolfram.deus@gmail.com>",
  "homepage": "https://github.com/Telegram-Mini-Apps/tma.js#readme",
  "repository": {
    "type": "git",
    "url": "git@github.com:Telegram-Mini-Apps/tma.js.git",
    "directory": "packages/toolkit"
  },
  "bugs": {
    "url": "https://github.com/Telegram-Mini-Apps/tma.js/issues"
  },
  "keywords": [
    "telegram-mini-apps",
    "typescript"
  ],
  "license": "MIT",
  "type": "module",
  "sideEffects": false,
  "files": [
    "dist"
  ],
  "main": "./dist/index.cjs",
  "module": "./dist/index.js",
  "types": "./dist/dts/index.d.ts",
  "exports": {
    ".": {
      "types": "./dist/dts/index.d.ts",
      "import": "./dist/index.js",
      "require": "./dist/index.cjs",
      "default": "./dist/index.cjs"
    }
  },
  "scripts": {
    "test": "vitest --run",
    "lint": "eslint src",
    "lint:fix": "pnpm run lint --fix",
    "typecheck": "tsc --noEmit -p tsconfig.build.json",
    "build": "vite build -c vite.config.ts"
  },
  "devDependencies": {
    "test-utils": "workspace:*",
    "tsconfig": "workspace:*"
  },
  "publishConfig": {
    "access": "public"
  },
  "dependencies": {
    "better-promises": "^1.0.0",
    "fp-ts": "^2.16.11"
  }
}

```
---
## File: packages/toolkit/tsconfig.build.json

```json
{
  "extends": "tsconfig/esnext-dom.json",
  "compilerOptions": {
    "paths": {
      "@/*": [
        "./src/*"
      ]
    }
  },
  "include": [
    "src"
  ],
  "exclude": [
    "src/**/*.test.ts"
  ]
}
```
---
## File: packages/toolkit/tsconfig.eslint.json

```json
{
  "extends": "./tsconfig.build.json",
  "include": [
    "src"
  ],
  "exclude": []
}
```
---
## File: packages/toolkit/tsconfig.json

```json
{
  "extends": "./tsconfig.build.json",
  "references": [
    {
      "path": "./tsconfig.node.json"
    },
    {
      "path": "./tsconfig.test.json"
    }
  ]
}
```
---
## File: packages/toolkit/tsconfig.node.json

```json
{
  "extends": "tsconfig/esnext-dom.json",
  "compilerOptions": {
    "composite": true
  },
  "include": [
    "vite.config.ts",
    "package.json"
  ]
}

```
---
## File: packages/toolkit/tsconfig.test.json

```json
{
  "extends": "tsconfig/esnext-dom.json",
  "compilerOptions": {
    "composite": true,
    "declaration": true,
    "paths": {
      "@/*": [
        "./src/*"
      ]
    }
  },
  "include": [
    "src"
  ],
  "exclude": []
}
```
---
## File: packages/toolkit/vite.config.ts

```typescript
import { dirname, resolve } from 'node:path';
import { fileURLToPath } from 'node:url';
import dts from 'vite-plugin-dts';
import tsconfigPaths from 'vite-tsconfig-paths';
import { defineConfig } from 'vitest/config';

import packageJson from './package.json' with { type: "json" };

export default defineConfig(({ mode }) => {
  const tsconfigPath = mode === 'test'
    ? './tsconfig.test.json'
    : './tsconfig.build.json';

  return {
    plugins: [
      tsconfigPaths({ projects: [tsconfigPath] }),
      dts({ outDir: 'dist/dts', tsconfigPath }),
    ],
    resolve: {
      alias: {
        '@': resolve(dirname(fileURLToPath(import.meta.url)), 'src'),
      },
    },
    build: {
      outDir: 'dist',
      emptyOutDir: true,
      sourcemap: true,
      lib: {
        entry: 'src/index.ts',
        formats: ['es', 'cjs'],
        fileName: 'index',
      },
      rollupOptions: {
        external: Object.keys(packageJson.dependencies),
      }
    },
    test: {
      environment: 'happy-dom',
      coverage: {
        enabled: true,
        provider: 'v8',
        include: ['src/**/*.ts'],
        exclude: ['src/**/*.test.ts', 'src/index.ts'],
        branches: 80,
        functions: 80,
        statements: 80,
        lines: 80,
      },
    },
  };
});

```
---
## File: packages/transformers/src/index.ts

```typescript
export * from './parsers.js';
export * from './pipes.js';
export * from './rgb.js';
export * from './serializers.js';
export * from './structures.js';

```
---
## File: packages/transformers/src/parsers.test.ts

```typescript
import { describe, expect, it } from 'vitest';

import { parseInitDataQuery, parseInitDataQueryFp, parseLaunchParamsQuery, parseLaunchParamsQueryFp } from './parsers.js';

describe('parseInitDataQuery', () => {
  it('should properly create object from query', () => {
    expect(
      parseInitDataQuery('user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%22%7D&chat_instance=-9019086117643313246&chat_type=sender&auth_date=1736362318&signature=JUPYm_qmf8hJYSux535eNDg_a5ZdcOkS6yZMkEUGS09zcXoIopCn3DOuNCa5aWH0PQGaUGGMAaq9MeaMg-6EBg&hash=14cd9c9eeebf82370b20f4df23af9439d00f6da2837dd20e17ed3b03ab99cd9c&additional_prop=1'),
    ).toStrictEqual({
      auth_date: new Date(1736362318000),
      chat_instance: '-9019086117643313246',
      chat_type: 'sender',
      hash: '14cd9c9eeebf82370b20f4df23af9439d00f6da2837dd20e17ed3b03ab99cd9c',
      signature: 'JUPYm_qmf8hJYSux535eNDg_a5ZdcOkS6yZMkEUGS09zcXoIopCn3DOuNCa5aWH0PQGaUGGMAaq9MeaMg-6EBg',
      user: {
        allows_write_to_pm: true,
        first_name: 'Vladislav',
        id: 279058397,
        is_premium: true,
        language_code: 'ru',
        last_name: 'Kibenko',
        photo_url: 'https://t.me/i/userpic/320/4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg',
        username: 'vdkfrost',
      },
      additional_prop: '1',
    });
  });
});

describe('parseInitDataQueryFp', () => {
  it('should properly create object from query', () => {
    expect(
      parseInitDataQueryFp('user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%22%7D&chat_instance=-9019086117643313246&chat_type=sender&auth_date=1736362318&signature=JUPYm_qmf8hJYSux535eNDg_a5ZdcOkS6yZMkEUGS09zcXoIopCn3DOuNCa5aWH0PQGaUGGMAaq9MeaMg-6EBg&hash=14cd9c9eeebf82370b20f4df23af9439d00f6da2837dd20e17ed3b03ab99cd9c&additional_prop=1'),
    ).toMatchObject({
      right: {
        auth_date: new Date(1736362318000),
        chat_instance: '-9019086117643313246',
        chat_type: 'sender',
        hash: '14cd9c9eeebf82370b20f4df23af9439d00f6da2837dd20e17ed3b03ab99cd9c',
        signature: 'JUPYm_qmf8hJYSux535eNDg_a5ZdcOkS6yZMkEUGS09zcXoIopCn3DOuNCa5aWH0PQGaUGGMAaq9MeaMg-6EBg',
        user: {
          allows_write_to_pm: true,
          first_name: 'Vladislav',
          id: 279058397,
          is_premium: true,
          language_code: 'ru',
          last_name: 'Kibenko',
          photo_url: 'https://t.me/i/userpic/320/4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg',
          username: 'vdkfrost',
        },
        additional_prop: '1',
      },
    });
  });
});

describe('parseLaunchParamsQuery', () => {
  it('should properly parse the value', () => {
    expect(
      parseLaunchParamsQuery('tgWebAppData=user%3D%257B%2522id%2522%253A279058397%252C%2522first_name%2522%253A%2522Vladislav%2522%252C%2522last_name%2522%253A%2522Kibenko%2522%252C%2522username%2522%253A%2522vdkfrost%2522%252C%2522language_code%2522%253A%2522ru%2522%252C%2522is_premium%2522%253Atrue%252C%2522allows_write_to_pm%2522%253Atrue%252C%2522photo_url%2522%253A%2522https%253A%255C%252F%255C%252Ft.me%255C%252Fi%255C%252Fuserpic%255C%252F320%255C%252F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%2522%257D%26chat_instance%3D-9019086117643313246%26chat_type%3Dsender%26auth_date%3D1736409902%26signature%3DFNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA%26hash%3D4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d90&tgWebAppVersion=8.0&tgWebAppPlatform=tdesktop&tgWebAppThemeParams=%7B%22accent_text_color%22%3A%22%236ab3f2%22%2C%22bg_color%22%3A%22%2317212b%22%2C%22bottom_bar_bg_color%22%3A%22%2317212b%22%2C%22button_color%22%3A%22%235289c1%22%2C%22button_text_color%22%3A%22%23ffffff%22%2C%22destructive_text_color%22%3A%22%23ec3942%22%2C%22header_bg_color%22%3A%22%2317212b%22%2C%22hint_color%22%3A%22%23708599%22%2C%22link_color%22%3A%22%236ab3f3%22%2C%22secondary_bg_color%22%3A%22%23232e3c%22%2C%22section_bg_color%22%3A%22%2317212b%22%2C%22section_header_text_color%22%3A%22%236ab3f3%22%2C%22section_separator_color%22%3A%22%23111921%22%2C%22subtitle_text_color%22%3A%22%23708599%22%2C%22text_color%22%3A%22%23f5f5f5%22%7D'),
    ).toMatchObject({
      tgWebAppData: {
        auth_date: new Date(1736409902000),
        chat_instance: '-9019086117643313246',
        chat_type: 'sender',
        hash: '4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d90',
        signature: 'FNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA',
        user: {
          allows_write_to_pm: true,
          first_name: 'Vladislav',
          id: 279058397,
          is_premium: true,
          language_code: 'ru',
          last_name: 'Kibenko',
          photo_url: 'https://t.me/i/userpic/320/4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg',
          username: 'vdkfrost',
        },
      },
      tgWebAppPlatform: 'tdesktop',
      tgWebAppThemeParams: {
        accent_text_color: '#6ab3f2',
        bg_color: '#17212b',
        bottom_bar_bg_color: '#17212b',
        button_color: '#5289c1',
        button_text_color: '#ffffff',
        destructive_text_color: '#ec3942',
        header_bg_color: '#17212b',
        hint_color: '#708599',
        link_color: '#6ab3f3',
        secondary_bg_color: '#232e3c',
        section_bg_color: '#17212b',
        section_header_text_color: '#6ab3f3',
        section_separator_color: '#111921',
        subtitle_text_color: '#708599',
        text_color: '#f5f5f5',
      },
      tgWebAppVersion: '8.0',
    });
  });
});

describe('parseLaunchParamsQueryFp', () => {
  it('should properly parse the value', () => {
    expect(
      parseLaunchParamsQueryFp('tgWebAppData=user%3D%257B%2522id%2522%253A279058397%252C%2522first_name%2522%253A%2522Vladislav%2522%252C%2522last_name%2522%253A%2522Kibenko%2522%252C%2522username%2522%253A%2522vdkfrost%2522%252C%2522language_code%2522%253A%2522ru%2522%252C%2522is_premium%2522%253Atrue%252C%2522allows_write_to_pm%2522%253Atrue%252C%2522photo_url%2522%253A%2522https%253A%255C%252F%255C%252Ft.me%255C%252Fi%255C%252Fuserpic%255C%252F320%255C%252F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%2522%257D%26chat_instance%3D-9019086117643313246%26chat_type%3Dsender%26auth_date%3D1736409902%26signature%3DFNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA%26hash%3D4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d90&tgWebAppVersion=8.0&tgWebAppPlatform=tdesktop&tgWebAppThemeParams=%7B%22accent_text_color%22%3A%22%236ab3f2%22%2C%22bg_color%22%3A%22%2317212b%22%2C%22bottom_bar_bg_color%22%3A%22%2317212b%22%2C%22button_color%22%3A%22%235289c1%22%2C%22button_text_color%22%3A%22%23ffffff%22%2C%22destructive_text_color%22%3A%22%23ec3942%22%2C%22header_bg_color%22%3A%22%2317212b%22%2C%22hint_color%22%3A%22%23708599%22%2C%22link_color%22%3A%22%236ab3f3%22%2C%22secondary_bg_color%22%3A%22%23232e3c%22%2C%22section_bg_color%22%3A%22%2317212b%22%2C%22section_header_text_color%22%3A%22%236ab3f3%22%2C%22section_separator_color%22%3A%22%23111921%22%2C%22subtitle_text_color%22%3A%22%23708599%22%2C%22text_color%22%3A%22%23f5f5f5%22%7D'),
    ).toMatchObject({
      right: {
        tgWebAppData: {
          auth_date: new Date(1736409902000),
          chat_instance: '-9019086117643313246',
          chat_type: 'sender',
          hash: '4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d90',
          signature: 'FNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA',
          user: {
            allows_write_to_pm: true,
            first_name: 'Vladislav',
            id: 279058397,
            is_premium: true,
            language_code: 'ru',
            last_name: 'Kibenko',
            photo_url: 'https://t.me/i/userpic/320/4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg',
            username: 'vdkfrost',
          },
        },
        tgWebAppPlatform: 'tdesktop',
        tgWebAppThemeParams: {
          accent_text_color: '#6ab3f2',
          bg_color: '#17212b',
          bottom_bar_bg_color: '#17212b',
          button_color: '#5289c1',
          button_text_color: '#ffffff',
          destructive_text_color: '#ec3942',
          header_bg_color: '#17212b',
          hint_color: '#708599',
          link_color: '#6ab3f3',
          secondary_bg_color: '#232e3c',
          section_bg_color: '#17212b',
          section_header_text_color: '#6ab3f3',
          section_separator_color: '#111921',
          subtitle_text_color: '#708599',
          text_color: '#f5f5f5',
        },
        tgWebAppVersion: '8.0',
      },
    });
  });
});

```
---
## File: packages/transformers/src/parsers.ts

```typescript
import { throwifyFpFn } from '@tma.js/toolkit';
import * as E from 'fp-ts/Either';
import { parse, type ValiError } from 'valibot';

import {
  type InitDataGenSchema,
  type InitDataGenType,
  initDataQuery,
  type LaunchParamsGenSchema,
  type LaunchParamsGenType,
  launchParamsQuery,
} from './structures.js';

export type ParseInitDataQueryError = ValiError<InitDataGenSchema>;
export type ParseLaunchParamsQueryError = ValiError<LaunchParamsGenSchema>;

export function parseInitDataQueryFp(value: string | URLSearchParams): E.Either<
  ParseInitDataQueryError,
  InitDataGenType
> {
  return E.tryCatch(
    () => parse(initDataQuery(), value),
    e => e as ValiError<InitDataGenSchema>,
  );
}

export function parseLaunchParamsQueryFp(value: string | URLSearchParams): E.Either<
  ParseLaunchParamsQueryError,
  LaunchParamsGenType
> {
  return E.tryCatch(
    () => parse(launchParamsQuery(), value),
    e => e as ValiError<LaunchParamsGenSchema>,
  );
}

export const parseInitDataQuery = throwifyFpFn(parseInitDataQueryFp);
export const parseLaunchParamsQuery = throwifyFpFn(parseLaunchParamsQueryFp);

```
---
## File: packages/transformers/src/pipes.ts

```typescript
import {
  type BaseIssue,
  type BaseSchema,
  instance,
  type InstanceSchema,
  pipe,
  type SchemaWithPipe,
  string,
  type StringSchema,
  union,
  type UnionSchema,
} from 'valibot';

import {
  transformJsonToSchema,
  type TransformJsonToSchemaAction,
  transformQueryToSchema,
  type TransformQueryToSchemaAction,
} from './transformers.js';

type RequiredSchema = BaseSchema<any, any, BaseIssue<any>>;

export type JsonToSchemaPipe<Schema extends RequiredSchema> = SchemaWithPipe<readonly [
  StringSchema<undefined>,
  TransformJsonToSchemaAction<Schema>,
]>;

export type QueryToSchemaPipe<Schema extends RequiredSchema> = SchemaWithPipe<readonly [
  UnionSchema<[
    StringSchema<undefined>,
    InstanceSchema<typeof URLSearchParams, undefined>,
  ], undefined>,
  TransformQueryToSchemaAction<Schema>,
]>;

export function pipeJsonToSchema<Schema extends RequiredSchema>(
  schema: Schema,
): JsonToSchemaPipe<Schema> {
  return pipe(string(), transformJsonToSchema(schema));
}

export function pipeQueryToSchema<Schema extends RequiredSchema>(
  schema: Schema,
): QueryToSchemaPipe<Schema> {
  return pipe(
    union([string(), instance(URLSearchParams)]),
    transformQueryToSchema(schema),
  );
}

```
---
## File: packages/transformers/src/rgb.test.ts

```typescript
import { describe, expect, it } from 'vitest';

import {
  isAnyRGB,
  isRGB, isRGBA,
  isRGBAShort,
  isRGBShort,
  toRGB,
  toRGBFp,
  toRGBFull,
  toRGBFullFp,
} from './rgb.js';

describe('isRGB', () => {
  it('should return true for a value in the #RRGGBB format', () => {
    expect(isRGB('#ffffff')).toBe(true);
  });

  it('should return false for any other value', () => {
    ['abc', '#ffff', '#fff', '#fffffg'].forEach(v => {
      expect(isRGB(v)).toBe(false);
    });
  });
});

describe('isRGBA', () => {
  it('should return true for a value in the #RRGGBBAA format', () => {
    expect(isRGBA('#ffffffaa')).toBe(true);
  });

  it('should return false for any other value', () => {
    ['abc', '#ffff', '#fff', '#fffffg', '#ffffff'].forEach(v => {
      expect(isRGBA(v)).toBe(false);
    });
  });
});

describe('isRGBShort', () => {
  it('should return true for a value in the #RGB format', () => {
    expect(isRGBShort('#fff')).toBe(true);
  });

  it('should return false for any other value', () => {
    ['abc', '#ffff', '#ffffff', '#ggg'].forEach(v => {
      expect(isRGBShort(v)).toBe(false);
    });
  });
});

describe('isRGBAShort', () => {
  it('should return true for a value in the #RGBA format', () => {
    expect(isRGBAShort('#fffa')).toBe(true);
  });

  it('should return false for any other value', () => {
    ['abc', '#ffffffaa', '#ffffff', '#ggg'].forEach(v => {
      expect(isRGBAShort(v)).toBe(false);
    });
  });
});

describe('isAnyRGB', () => {
  it.each([
    ['#RGB', '#abc'],
    ['#RGBA', '#abcd'],
    ['#RRGGBB', '#aabbcc'],
    ['#RRGGBBAA', '#aabbccdd'],
  ] as const)('should return true for a value in the %s format', (_, value) => {
    expect(isAnyRGB(value)).toBe(true);
  });
});

describe('toRGBFp', () => {
  it('should return same value in case, full version of RGB is passed', () => {
    expect(toRGBFp('#ffffff')).toMatchObject({ right: '#ffffff' });
  });

  it('should return full RGB value in case, its short presentation is passed', () => {
    expect(toRGBFp('#abc')).toMatchObject({ right: '#aabbcc' });
  });

  it('should return RGB representation of rgb(*,*,*) pattern', () => {
    expect(toRGBFp('rgb(6,56,11)')).toMatchObject({ right: '#06380b' });
  });

  it('should return RGB representation of rgba(*,*,*) pattern', () => {
    expect(toRGBFp('rgba(6,56,11,22)')).toMatchObject({ right: '#06380b' });
  });

  it('should throw an error in other cases', () => {
    expect(toRGBFp('abc')).toMatchObject({ left: expect.anything() });
  });
});

describe('toRGB', () => {
  it('should return same value in case, full version of RGB is passed', () => {
    expect(toRGB('#ffffff')).toBe('#ffffff');
  });

  it('should return full RGB value in case, its short presentation is passed', () => {
    expect(toRGB('#abc')).toBe('#aabbcc');
  });

  it('should return RGB representation of rgb(*,*,*) pattern', () => {
    expect(toRGB('rgb(6,56,11)')).toBe('#06380b');
  });

  it('should return RGB representation of rgba(*,*,*) pattern', () => {
    expect(toRGB('rgba(6,56,11,22)')).toBe('#06380b');
  });

  it('should throw an error in other cases', () => {
    expect(() => toRGB('abc')).toThrow();
  });
});

describe('toRGBFullFp', () => {
  it('should expand the value if it has #RGB or #RGBA formats', () => {
    expect(toRGBFullFp('#abc')).toMatchObject({ right: '#aabbccff' });
    expect(toRGBFullFp('#abcd')).toMatchObject({ right: '#aabbccdd' });
  });

  it('should fulfill alpha channel part with "ff" of the value has #RRGGBB format', () => {
    expect(toRGBFullFp('#aabbcc')).toMatchObject({ right: '#aabbccff' });
  });

  it('should return value as-is if it has #RRGGBBAA format', () => {
    expect(toRGBFullFp('#aabbccdd')).toMatchObject({ right: '#aabbccdd' });
  });

  it('should properly handle rgb(*,*,*) format', () => {
    expect(toRGBFullFp('rgb(6,56,11)')).toMatchObject({ right: '#06380bff' });
  });

  it('should properly handle rgba(*,*,*,*) format', () => {
    expect(toRGBFullFp('rgba(6,56,11,3)')).toMatchObject({ right: '#06380b03' });
  });

  it('should return an error in other cases', () => {
    expect(toRGBFullFp('abc')).toMatchObject({ left: expect.anything() });
  });
});

describe('toRGBFull', () => {
  it('should expand the value if it has #RGB or #RGBA formats', () => {
    expect(toRGBFull('#abc')).toBe('#aabbccff');
    expect(toRGBFull('#abcd')).toBe('#aabbccdd');
  });

  it('should fulfill alpha channel part with "ff" of the value has #RRGGBB format', () => {
    expect(toRGBFull('#aabbcc')).toBe('#aabbccff');
  });

  it('should return value as-is if it has #RRGGBBAA format', () => {
    expect(toRGBFull('#aabbccdd')).toBe('#aabbccdd');
  });

  it('should properly handle rgb(*,*,*) format', () => {
    expect(toRGBFull('rgb(6,56,11)')).toBe('#06380bff');
  });

  it('should properly handle rgba(*,*,*,*) format', () => {
    expect(toRGBFull('rgba(6,56,11,3)')).toBe('#06380b03');
  });

  it('should throw an error in other cases', () => {
    expect(() => toRGBFull('abc')).toThrow();
  });
});

```
---
## File: packages/transformers/src/rgb.ts

```typescript
import { throwifyFpFn } from '@tma.js/toolkit';
import type { RGB } from '@tma.js/types';
import * as E from 'fp-ts/Either';
import { pipe } from 'fp-ts/function';

function guardBasedOn(re: RegExp) {
  return (value: string): value is RGB => re.test(value);
}

/**
 * @returns True if the value has the #RGB format.
 */
export const isRGBShort = guardBasedOn(/^#[\da-f]{3}$/i);

/**
 * @returns True if the value has the #RGBA format.
 */
export const isRGBAShort = guardBasedOn(/^#[\da-f]{4}$/i);

/**
 * @returns True if the value has the #RRGGBB format.
 */
export const isRGB = guardBasedOn(/^#[\da-f]{6}$/i);

/**
 * @returns True if the value has the #RRGGBBAA format.
 */
export const isRGBA = guardBasedOn(/^#[\da-f]{8}$/i);

/**
 * @returns True if the value has any known RGB format.
 * @param value - value to check.
 */
export function isAnyRGB(value: string): value is RGB {
  return [isRGB, isRGBA, isRGBShort, isRGBAShort].some(fn => fn(value));
}

/**
 * Converts a short version of RGB (#RGB) to a complete one (#RRGGBB).
 * @param value
 */
function expandRgb(value: RGB): RGB {
  let color: RGB = '#';
  for (let i = 0; i < value.length - 1; i += 1) {
    color += value[1 + i].repeat(2);
  }
  return color;
}

/**
 * Converts passed value to #RRGGBBAA format. Accepts the following color formats:
 * - `#RGB`
 * - `#RGBA`
 * - `#RRGGBB`
 * - `#RRGGBBAA`
 * - `rgb(1,2,3)`
 * - `rgba(1,2,3,4)`
 * @param value - a value to convert.
 * @returns A value in the #RRGGBBAA format.
 */
export function toRGBFullFp(value: string): E.Either<Error, RGB> {
  const clean = value.replace(/\s/g, '').toLowerCase();
  if (/^#[\da-f]{3}$/i.test(clean)) {
    return E.right(expandRgb(clean.toLowerCase() + 'f' as RGB));
  }

  if (/^#[\da-f]{4}$/i.test(clean)) {
    return E.right(expandRgb(clean.toLowerCase() as RGB));
  }

  if (/^#[\da-f]{6}$/i.test(clean)) {
    return E.right(clean.toLowerCase() + 'ff' as RGB);
  }

  if (/^#[\da-f]{8}$/i.test(clean)) {
    return E.right(clean.toLowerCase() as RGB);
  }

  // Example valid values: rgb(0,3,10) rgba(32,114,8,0)
  const match = clean.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)
    || clean.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(\d{1,3})\)$/);

  // If this didn't work as well, we can't extract RGB color from passed text.
  if (!match) {
    return E.left(new Error(`Value "${value}" does not satisfy any of known RGB formats.`));
  }

  // Otherwise, take R, G and B components, convert to hex and create #RRGGBB string.
  return E.right(
    match
      .slice(1)
      .reduce(
        (acc, component) => {
          return acc + parseInt(component, 10)
            .toString(16)
            .padStart(2, '0');
        }, '#',
      )
      // We are adding f-s here to match the pattern: #RRGGBBAA
      .padEnd(9, 'f') as RGB,
  );
}

/**
 * Converts passed value to #RRGGBB format. Accepts the following color formats:
 * - `#RGB`
 * - `#RGBA`
 * - `#RRGGBB`
 * - `#RRGGBBAA`
 * - `rgb(1,2,3)`
 * - `rgba(1,2,3,4)`
 * @param value - a value to convert.
 * @returns A value in the #RRGGBB format.
 * @deprecated This function cuts the RGB's alpha channel. Use the `toRGBFullFp` function instead.
 */
export function toRGBFp(value: string): E.Either<Error, RGB> {
  return pipe(
    toRGBFullFp(value),
    E.map(rgb => rgb.slice(0, 7) as RGB),
  );
}

/**
 * @see toRGBFp
 * @deprecated This function cuts the RGB's alpha channel. Use the `toRGBFull` function instead.
 */
export const toRGB = throwifyFpFn(toRGBFp);

/**
 * @see toRGBFullFp
 */
export const toRGBFull = throwifyFpFn(toRGBFullFp);

```
---
## File: packages/transformers/src/serializers.test.ts

```typescript
import { describe, expect, it } from 'vitest';

import { serializeInitDataQuery, serializeLaunchParamsQuery } from './serializers.js';

describe('serializeInitDataQuery', () => {
  it('should properly serialize the value', () => {
    expect(
      serializeInitDataQuery({
        auth_date: new Date(1000),
        hash: 'Hash',
        signature: 'Signature',
        user: {
          id: 1,
          first_name: 'Pavel',
        },
        chat_instance: '-293',
        chat_type: 'group',
        chat: {
          id: 3,
          username: 'pavel',
          title: 'Some title',
          photo_url: '',
          type: 'self',
        },
        can_send_after: 911,
        query_id: 'QueryID',
        receiver: {
          id: 2,
          first_name: 'Pavel Buddy',
        },
        start_param: 'StartParam',
        additional_prop: 'PROP',
        prop1: ['a', 'b'],
      }),
    ).toBe('auth_date=1&hash=Hash&signature=Signature&user=%7B%22id%22%3A1%2C%22first_name%22%3A%22Pavel%22%7D&chat_instance=-293&chat_type=group&chat=%7B%22id%22%3A3%2C%22username%22%3A%22pavel%22%2C%22title%22%3A%22Some+title%22%2C%22photo_url%22%3A%22%22%2C%22type%22%3A%22self%22%7D&can_send_after=911&query_id=QueryID&receiver=%7B%22id%22%3A2%2C%22first_name%22%3A%22Pavel+Buddy%22%7D&start_param=StartParam&additional_prop=PROP&prop1=a&prop1=b');
  });
});

describe('serializeLaunchParamsQuery', () => {
  it('should properly serialize the value', () => {
    expect(serializeLaunchParamsQuery({
      tgWebAppData: {
        auth_date: new Date(1736409902000),
        chat_instance: '-9019086117643313246',
        chat_type: 'sender',
        hash: '4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d90',
        signature: 'FNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA',
        user: {
          allows_write_to_pm: true,
          first_name: 'Vladislav',
          id: 279058397,
          is_premium: true,
          language_code: 'ru',
          last_name: 'Kibenko',
          photo_url: 'https://t.me/i/userpic/320/4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg',
          username: 'vdkfrost',
        },
      },
      tgWebAppVersion: '8.0',
      tgWebAppPlatform: 'tdesktop',
      tgWebAppThemeParams: {
        accent_text_color: '#6ab3f2',
        bg_color: '#17212b',
        bottom_bar_bg_color: '#17212b',
        button_color: '#5289c1',
        button_text_color: '#ffffff',
        destructive_text_color: '#ec3942',
        header_bg_color: '#17212b',
        hint_color: '#708599',
        link_color: '#6ab3f3',
        secondary_bg_color: '#232e3c',
        section_bg_color: '#17212b',
        section_header_text_color: '#6ab3f3',
        section_separator_color: '#111921',
        subtitle_text_color: '#708599',
        text_color: '#f5f5f5',
      },
      tgWebAppBotInline: false,
      tgWebAppDefaultColors: {},
      tgWebAppFullscreen: false,
      tgWebAppShowSettings: false,
    }))
      .toBe('tgWebAppData=auth_date%3D1736409902%26chat_instance%3D-9019086117643313246%26chat_type%3Dsender%26hash%3D4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d90%26signature%3DFNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA%26user%3D%257B%2522allows_write_to_pm%2522%253Atrue%252C%2522first_name%2522%253A%2522Vladislav%2522%252C%2522id%2522%253A279058397%252C%2522is_premium%2522%253Atrue%252C%2522language_code%2522%253A%2522ru%2522%252C%2522last_name%2522%253A%2522Kibenko%2522%252C%2522photo_url%2522%253A%2522https%253A%252F%252Ft.me%252Fi%252Fuserpic%252F320%252F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%2522%252C%2522username%2522%253A%2522vdkfrost%2522%257D&tgWebAppVersion=8.0&tgWebAppPlatform=tdesktop&tgWebAppThemeParams=%7B%22accent_text_color%22%3A%22%236ab3f2%22%2C%22bg_color%22%3A%22%2317212b%22%2C%22bottom_bar_bg_color%22%3A%22%2317212b%22%2C%22button_color%22%3A%22%235289c1%22%2C%22button_text_color%22%3A%22%23ffffff%22%2C%22destructive_text_color%22%3A%22%23ec3942%22%2C%22header_bg_color%22%3A%22%2317212b%22%2C%22hint_color%22%3A%22%23708599%22%2C%22link_color%22%3A%22%236ab3f3%22%2C%22secondary_bg_color%22%3A%22%23232e3c%22%2C%22section_bg_color%22%3A%22%2317212b%22%2C%22section_header_text_color%22%3A%22%236ab3f3%22%2C%22section_separator_color%22%3A%22%23111921%22%2C%22subtitle_text_color%22%3A%22%23708599%22%2C%22text_color%22%3A%22%23f5f5f5%22%7D&tgWebAppBotInline=0&tgWebAppDefaultColors=%7B%7D&tgWebAppFullscreen=0&tgWebAppShowSettings=0');
  });
});

```
---
## File: packages/transformers/src/serializers.ts

```typescript
import type { InitData, LaunchParams } from '@tma.js/types';
import type { InferOutput } from 'valibot';

import type { initData, launchParams } from './structures.js';

export type InitDataLike = Partial<InferOutput<ReturnType<typeof initData>> | InitData>;
export type LaunchParamsLike = Partial<InferOutput<ReturnType<typeof launchParams>> | LaunchParams>;

/**
 * Converts the passed object to query parameters.
 * @param value - value to serialize.
 * @param onObject - function returning serialized object value.
 */
function serializeToQuery(
  value: object,
  onObject?: (key: string, value: object) => string,
): string {
  onObject ||= (_, value) => JSON.stringify(value);

  return new URLSearchParams(
    Object
      .entries(value)
      .reduce<[string, string][]>((acc, [key, value]) => {
        if (Array.isArray(value)) {
          acc.push(...value.map(v => [key, String(v)] as [string, string]));
        } else {
          if (value !== null && value !== undefined) {
            acc.push([
              key,
              value instanceof Date
                ? (value.getTime() / 1000 | 0).toString()
                : typeof value === 'string' || typeof value === 'number'
                  ? String(value)
                  : typeof value === 'boolean'
                    ? value ? '1' : '0'
                    : onObject(key, value),
            ]);
          }
        }
        return acc;
      }, []),
  ).toString();
}

/**
 * Serializes the InitDataQuery shape.
 * @param value - value to serialize.
 */
export function serializeInitDataQuery(value: InitDataLike): string {
  return serializeToQuery(value);
}

/**
 * Serializes the LaunchParamsQuery shape.
 * @param value - value to serialize.
 */
export function serializeLaunchParamsQuery(value: LaunchParamsLike): string {
  return serializeToQuery(value, (k, v) => {
    return k === 'tgWebAppData' ? serializeInitDataQuery(v as any) : JSON.stringify(v);
  });
}

```
---
## File: packages/transformers/src/structures.test.ts

```typescript
import { is, parse } from 'valibot';
import { describe, expect, it } from 'vitest';

import {
  initDataQuery,
  isLaunchParamsQuery,
  launchParamsQuery,
  themeParams,
} from './structures.js';

describe('isLaunchParamsQuery', () => {
  it('should return true if valid value passed', () => {
    // Complete set of params.
    expect(isLaunchParamsQuery('tgWebAppData=user%3D%257B%2522id%2522%253A279058397%252C%2522first_name%2522%253A%2522Vladislav%2522%252C%2522last_name%2522%253A%2522Kibenko%2522%252C%2522username%2522%253A%2522vdkfrost%2522%252C%2522language_code%2522%253A%2522ru%2522%252C%2522is_premium%2522%253Atrue%252C%2522allows_write_to_pm%2522%253Atrue%252C%2522photo_url%2522%253A%2522https%253A%255C%252F%255C%252Ft.me%255C%252Fi%255C%252Fuserpic%255C%252F320%255C%252F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%2522%257D%26chat_instance%3D-9019086117643313246%26chat_type%3Dsender%26auth_date%3D1736409902%26signature%3DFNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA%26hash%3D4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d90&tgWebAppVersion=8.0&tgWebAppPlatform=tdesktop&tgWebAppThemeParams=%7B%22accent_text_color%22%3A%22%236ab3f2%22%2C%22bg_color%22%3A%22%2317212b%22%2C%22bottom_bar_bg_color%22%3A%22%2317212b%22%2C%22button_color%22%3A%22%235289c1%22%2C%22button_text_color%22%3A%22%23ffffff%22%2C%22destructive_text_color%22%3A%22%23ec3942%22%2C%22header_bg_color%22%3A%22%2317212b%22%2C%22hint_color%22%3A%22%23708599%22%2C%22link_color%22%3A%22%236ab3f3%22%2C%22secondary_bg_color%22%3A%22%23232e3c%22%2C%22section_bg_color%22%3A%22%2317212b%22%2C%22section_header_text_color%22%3A%22%236ab3f3%22%2C%22section_separator_color%22%3A%22%23111921%22%2C%22subtitle_text_color%22%3A%22%23708599%22%2C%22text_color%22%3A%22%23f5f5f5%22%7D')).toBe(true);

    // Minimal set of params.
    expect(isLaunchParamsQuery('tgWebAppVersion=8.0&tgWebAppPlatform=tdesktop&tgWebAppThemeParams=%7B%22accent_text_color%22%3A%22%236ab3f2%22%2C%22bg_color%22%3A%22%2317212b%22%2C%22bottom_bar_bg_color%22%3A%22%2317212b%22%2C%22button_color%22%3A%22%235289c1%22%2C%22button_text_color%22%3A%22%23ffffff%22%2C%22destructive_text_color%22%3A%22%23ec3942%22%2C%22header_bg_color%22%3A%22%2317212b%22%2C%22hint_color%22%3A%22%23708599%22%2C%22link_color%22%3A%22%236ab3f3%22%2C%22secondary_bg_color%22%3A%22%23232e3c%22%2C%22section_bg_color%22%3A%22%2317212b%22%2C%22section_header_text_color%22%3A%22%236ab3f3%22%2C%22section_separator_color%22%3A%22%23111921%22%2C%22subtitle_text_color%22%3A%22%23708599%22%2C%22text_color%22%3A%22%23f5f5f5%22%7D')).toBe(true);

    // Insufficient set of params (missing version).
    expect(isLaunchParamsQuery('tgWebAppPlatform=tdesktop&tgWebAppThemeParams=%7B%22accent_text_color%22%3A%22%236ab3f2%22%2C%22bg_color%22%3A%22%2317212b%22%2C%22bottom_bar_bg_color%22%3A%22%2317212b%22%2C%22button_color%22%3A%22%235289c1%22%2C%22button_text_color%22%3A%22%23ffffff%22%2C%22destructive_text_color%22%3A%22%23ec3942%22%2C%22header_bg_color%22%3A%22%2317212b%22%2C%22hint_color%22%3A%22%23708599%22%2C%22link_color%22%3A%22%236ab3f3%22%2C%22secondary_bg_color%22%3A%22%23232e3c%22%2C%22section_bg_color%22%3A%22%2317212b%22%2C%22section_header_text_color%22%3A%22%236ab3f3%22%2C%22section_separator_color%22%3A%22%23111921%22%2C%22subtitle_text_color%22%3A%22%23708599%22%2C%22text_color%22%3A%22%23f5f5f5%22%7D')).toBe(false);

    // Minimal set of params + unknown parameters.
    expect(isLaunchParamsQuery('tgWebAppVersion=8.0&tgWebAppPlatform=tdesktop&tgWebAppThemeParams=%7B%22accent_text_color%22%3A%22%236ab3f2%22%2C%22bg_color%22%3A%22%2317212b%22%2C%22bottom_bar_bg_color%22%3A%22%2317212b%22%2C%22button_color%22%3A%22%235289c1%22%2C%22button_text_color%22%3A%22%23ffffff%22%2C%22destructive_text_color%22%3A%22%23ec3942%22%2C%22header_bg_color%22%3A%22%2317212b%22%2C%22hint_color%22%3A%22%23708599%22%2C%22link_color%22%3A%22%236ab3f3%22%2C%22secondary_bg_color%22%3A%22%23232e3c%22%2C%22section_bg_color%22%3A%22%2317212b%22%2C%22section_header_text_color%22%3A%22%236ab3f3%22%2C%22section_separator_color%22%3A%22%23111921%22%2C%22subtitle_text_color%22%3A%22%23708599%22%2C%22text_color%22%3A%22%23f5f5f5%22%7D&hey=Pavel&say=hi')).toBe(true);

    // Minimal set of params as URLSearchParams + unknown parameters.
    expect(isLaunchParamsQuery(new URLSearchParams([
      ['tgWebAppVersion', '8'],
      ['tgWebAppPlatform', 'tdesktop'],
      ['tgWebAppThemeParams',
        '{"accent_text_color":"#6ab3f2","bg_color":"#17212b","bottom_bar_bg_color":"#17212b","button_color":"#5289c1","button_text_color":"#ffffff","destructive_text_color":"#ec3942","header_bg_color":"#17212b","hint_color":"#708599","link_color":"#6ab3f3","secondary_bg_color":"#232e3c","section_bg_color":"#17212b","section_header_text_color":"#6ab3f3","section_separator_color":"#111921","subtitle_text_color":"#708599","text_color":"#f5f5f5"}'],
      ['hey', 'Pavel'],
      ['say', 'hi'],
    ]))).toBe(true);
  });
});

describe('initDataQuery', () => {
  it('should properly create object from query', () => {
    expect(
      parse(
        initDataQuery(),
        'user=%7B%22id%22%3A279058397%2C%22first_name%22%3A%22Vladislav%22%2C%22last_name%22%3A%22Kibenko%22%2C%22username%22%3A%22vdkfrost%22%2C%22language_code%22%3A%22ru%22%2C%22is_premium%22%3Atrue%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%22%7D&chat_instance=-9019086117643313246&chat_type=sender&auth_date=1736362318&signature=JUPYm_qmf8hJYSux535eNDg_a5ZdcOkS6yZMkEUGS09zcXoIopCn3DOuNCa5aWH0PQGaUGGMAaq9MeaMg-6EBg&hash=14cd9c9eeebf82370b20f4df23af9439d00f6da2837dd20e17ed3b03ab99cd9c&additional_prop=1',
      ),
    ).toStrictEqual({
      auth_date: new Date(1736362318000),
      chat_instance: '-9019086117643313246',
      chat_type: 'sender',
      hash: '14cd9c9eeebf82370b20f4df23af9439d00f6da2837dd20e17ed3b03ab99cd9c',
      signature: 'JUPYm_qmf8hJYSux535eNDg_a5ZdcOkS6yZMkEUGS09zcXoIopCn3DOuNCa5aWH0PQGaUGGMAaq9MeaMg-6EBg',
      user: {
        allows_write_to_pm: true,
        first_name: 'Vladislav',
        id: 279058397,
        is_premium: true,
        language_code: 'ru',
        last_name: 'Kibenko',
        photo_url: 'https://t.me/i/userpic/320/4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg',
        username: 'vdkfrost',
      },
      additional_prop: '1',
    });
  });
});

describe('launchParamsQuery', () => {
  it('should properly handle query params', () => {
    expect(
      parse(
        launchParamsQuery(),
        'tgWebAppData=user%3D%257B%2522id%2522%253A279058397%252C%2522first_name%2522%253A%2522Vladislav%2522%252C%2522last_name%2522%253A%2522Kibenko%2522%252C%2522username%2522%253A%2522vdkfrost%2522%252C%2522language_code%2522%253A%2522ru%2522%252C%2522is_premium%2522%253Atrue%252C%2522allows_write_to_pm%2522%253Atrue%252C%2522photo_url%2522%253A%2522https%253A%255C%252F%255C%252Ft.me%255C%252Fi%255C%252Fuserpic%255C%252F320%255C%252F4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg%2522%257D%26chat_instance%3D-9019086117643313246%26chat_type%3Dsender%26auth_date%3D1736409902%26signature%3DFNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA%26hash%3D4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d90&tgWebAppVersion=8.0&tgWebAppPlatform=tdesktop&tgWebAppThemeParams=%7B%22accent_text_color%22%3A%22%236ab3f2%22%2C%22bg_color%22%3A%22%2317212b%22%2C%22bottom_bar_bg_color%22%3A%22%2317212b%22%2C%22button_color%22%3A%22%235289c1%22%2C%22button_text_color%22%3A%22%23ffffff%22%2C%22destructive_text_color%22%3A%22%23ec3942%22%2C%22header_bg_color%22%3A%22%2317212b%22%2C%22hint_color%22%3A%22%23708599%22%2C%22link_color%22%3A%22%236ab3f3%22%2C%22secondary_bg_color%22%3A%22%23232e3c%22%2C%22section_bg_color%22%3A%22%2317212b%22%2C%22section_header_text_color%22%3A%22%236ab3f3%22%2C%22section_separator_color%22%3A%22%23111921%22%2C%22subtitle_text_color%22%3A%22%23708599%22%2C%22text_color%22%3A%22%23f5f5f5dd%22%7D',
      ),
    ).toStrictEqual({
      tgWebAppData: {
        auth_date: new Date(1736409902000),
        chat_instance: '-9019086117643313246',
        chat_type: 'sender',
        hash: '4c710b1d446dd4fd301c0efbf7c31627eca193a2e657754c9e0612cb1eb71d90',
        signature: 'FNWSy6kv5n4kkmYYmfTbrgRtswTvwXgHTRWBVjp-YOv2srtMFSYCWZ9nGr_PohWZeWcooFo_oQgsnTJge3JdBA',
        user: {
          allows_write_to_pm: true,
          first_name: 'Vladislav',
          id: 279058397,
          is_premium: true,
          language_code: 'ru',
          last_name: 'Kibenko',
          photo_url: 'https://t.me/i/userpic/320/4FPEE4tmP3ATHa57u6MqTDih13LTOiMoKoLDRG4PnSA.svg',
          username: 'vdkfrost',
        },
      },
      tgWebAppPlatform: 'tdesktop',
      tgWebAppThemeParams: {
        accent_text_color: '#6ab3f2',
        bg_color: '#17212b',
        bottom_bar_bg_color: '#17212b',
        button_color: '#5289c1',
        button_text_color: '#ffffff',
        destructive_text_color: '#ec3942',
        header_bg_color: '#17212b',
        hint_color: '#708599',
        link_color: '#6ab3f3',
        secondary_bg_color: '#232e3c',
        section_bg_color: '#17212b',
        section_header_text_color: '#6ab3f3',
        section_separator_color: '#111921',
        subtitle_text_color: '#708599',
        text_color: '#f5f5f5dd',
      },
      tgWebAppVersion: '8.0',
    });
  });
});

describe('themeParams', () => {
  it('should properly validate the value', () => {
    expect(is(themeParams(), {})).toBe(true);
    expect(is(themeParams(), {
      accent_text_color: '#6ab3f2aa',
      bg_color: '#17212b',
      bottom_bar_bg_color: '#17212b',
      button_color: '#5289c1',
      button_text_color: '#ffffff',
      destructive_text_color: '#ec3942ff',
      header_bg_color: '#17212b',
      hint_color: '#708599',
      link_color: '#6ab3f3',
      secondary_bg_color: '#232e3c',
      section_bg_color: '#17212b',
      section_header_text_color: '#6ab3f3',
      section_separator_color: '#111921',
      subtitle_text_color: '#708599dd',
      text_color: '#f5f5f5',
    })).toBe(true);
    expect(is(themeParams(), { accent_text_color: '#aabbc' })).toBe(false);
    expect(is(themeParams(), 'aaa')).toBe(false);
    expect(is(themeParams(), {
      accent_text_color: -10177041,
      bg_color: -14602949,
      bottom_bar_bg_color: -15393241,
      button_color: -11491093,
      button_text_color: -1,
      destructive_text_color: -1152913,
      header_bg_color: -14406343,
      hint_color: -8549479,
      link_color: -10572831,
      secondary_bg_color: -15393241,
      section_bg_color: -14866637,
      section_header_text_color: -8796932,
      section_separator_color: -15920616,
      subtitle_text_color: -8681584,
      text_color: -1,
    })).toBe(true);
  });

  it('should properly handle numeric values', () => {
    expect(parse(themeParams(), {
      accent_text_color: -10177041,
      bg_color: -14602949,
      bottom_bar_bg_color: -15393241,
      button_color: -11491093,
      button_text_color: -1,
      destructive_text_color: -1152913,
      header_bg_color: -14406343,
      hint_color: -8549479,
      link_color: -10572831,
      secondary_bg_color: -15393241,
      section_bg_color: -14866637,
      section_header_text_color: -8796932,
      section_separator_color: -15920616,
      subtitle_text_color: -8681584,
      text_color: -1,
    })).toStrictEqual({
      accent_text_color: '#64b5ef',
      bg_color: '#212d3b',
      bottom_bar_bg_color: '#151e27',
      button_color: '#50a8eb',
      button_text_color: '#ffffff',
      destructive_text_color: '#ee686f',
      header_bg_color: '#242d39',
      hint_color: '#7d8b99',
      link_color: '#5eabe1',
      secondary_bg_color: '#151e27',
      section_bg_color: '#1d2733',
      section_header_text_color: '#79c4fc',
      section_separator_color: '#0d1218',
      subtitle_text_color: '#7b8790',
      text_color: '#ffffff',
    });
  });
});

```
---
## File: packages/transformers/src/structures.ts

```typescript
import type {
  Chat,
  InitData,
  KnownThemeParamsKey,
  LaunchParams,
  RGB,
  User,
} from '@tma.js/types';
import {
  type BaseSchema,
  boolean,
  check,
  type CheckAction,
  date,
  type InferOutput,
  integer,
  is,
  looseObject,
  number,
  type NumberSchema,
  optional,
  pipe,
  record,
  type RecordSchema,
  type SchemaWithPipe,
  string,
  type StringSchema,
  transform,
  type TransformAction,
  union,
  type UnionSchema,
  unknown,
} from 'valibot';

import { pipeJsonToSchema, pipeQueryToSchema } from './pipes.js';
import { isAnyRGB } from './rgb.js';

export type InitDataGenSchema = ReturnType<typeof initData>;
export type InitDataGenType = InferOutput<InitDataGenSchema>;

export type LaunchParamsGenSchema = ReturnType<typeof launchParams>;
export type LaunchParamsGenType = InferOutput<LaunchParamsGenSchema>;

export type MiniAppsMessageGenSchema = ReturnType<typeof miniAppsMessage>;
export type MiniAppsMessageGenType = InferOutput<MiniAppsMessageGenSchema>;

export function initDataChat() {
  return looseObject({
    id: number(),
    photo_url: optional(string()),
    type: string(),
    title: string(),
    username: optional(string()),
  } satisfies { [K in keyof Chat]-?: BaseSchema<unknown, Chat[K], any> });
}

export function initDataUser() {
  return looseObject({
    added_to_attachment_menu: optional(boolean()),
    allows_write_to_pm: optional(boolean()),
    first_name: string(),
    id: number(),
    is_bot: optional(boolean()),
    is_premium: optional(boolean()),
    last_name: optional(string()),
    language_code: optional(string()),
    photo_url: optional(string()),
    username: optional(string()),
  } satisfies { [K in keyof User]-?: BaseSchema<unknown, User[K], any> });
}

export function initData() {
  return looseObject({
    auth_date: pipe(
      string(),
      transform(input => new Date(Number(input) * 1000)),
      date(),
    ),
    can_send_after: optional(pipe(string(), transform(Number), integer())),
    chat: optional(pipeJsonToSchema(initDataChat())),
    chat_type: optional(string()),
    chat_instance: optional(string()),
    hash: string(),
    query_id: optional(string()),
    receiver: optional(pipeJsonToSchema(initDataUser())),
    start_param: optional(string()),
    signature: string(),
    user: optional(pipeJsonToSchema(initDataUser())),
  } satisfies { [K in keyof InitData]-?: unknown });
}

export function initDataQuery() {
  return pipeQueryToSchema(initData());
}

export function themeParams() {
  return record(
    string(),
    pipe(
      union([string(), number()]),
      transform(value => {
        return typeof value === 'number'
          ? `#${(value & 0x00FFFFFF).toString(16).padStart(6, '0')}`
          : value;
      }),
      check(isAnyRGB),
    ),
  ) as RecordSchema<
    SchemaWithPipe<[
      StringSchema<undefined>,
      TransformAction<string, KnownThemeParamsKey>,
    ]>,
    SchemaWithPipe<[
      UnionSchema<[StringSchema<undefined>, NumberSchema<undefined>], any>,
      TransformAction<string | number, string>,
      CheckAction<RGB, undefined>,
    ]>,
    undefined
  >;
}

export function launchParams() {
  const optBool = optional(pipe(string(), transform(v => v === '1')));

  return looseObject({
    tgWebAppBotInline: optBool,
    tgWebAppData: optional(initDataQuery()),
    tgWebAppDefaultColors: optional(pipeJsonToSchema(themeParams())),
    tgWebAppFullscreen: optBool,
    tgWebAppPlatform: string(),
    tgWebAppShowSettings: optBool,
    tgWebAppStartParam: optional(string()),
    tgWebAppThemeParams: pipeJsonToSchema(themeParams()),
    tgWebAppVersion: string(),
  } satisfies { [K in keyof LaunchParams]-?: BaseSchema<any, LaunchParams[K], any> });
}

export function launchParamsQuery() {
  return pipeQueryToSchema(launchParams());
}

/**
 * @returns True if the passed value contains valid launch parameters query.
 */
export function isLaunchParamsQuery(value: string | URLSearchParams): boolean {
  try {
    return is(launchParamsQuery(), value);
  } catch {
    return false;
  }
}

export function miniAppsMessage() {
  return looseObject({
    eventType: string(),
    eventData: optional(unknown()),
  });
}

```
---
## File: packages/transformers/src/transformers.ts

```typescript
import {
  type BaseIssue,
  type BaseSchema,
  check,
  type CheckAction,
  type InferOutput,
  instance,
  type InstanceSchema,
  parse, pipe,
  type SchemaWithPipe,
  string,
  type StringSchema,
  transform,
  type TransformAction,
  union,
  type UnionSchema,
} from 'valibot';

type RequiredSchema = BaseSchema<any, any, BaseIssue<any>>;

export type TransformJsonToSchemaAction<Schema extends RequiredSchema> = SchemaWithPipe<readonly [
  StringSchema<any>,
  CheckAction<string, string>,
  TransformAction<string, unknown>,
  Schema,
]>;

export type TransformQueryToSchemaAction<Schema extends RequiredSchema> = SchemaWithPipe<readonly [
  UnionSchema<[
    StringSchema<undefined>,
    InstanceSchema<typeof URLSearchParams, undefined>,
  ], undefined>,
  CheckAction<string | URLSearchParams, string>,
  TransformAction<string | URLSearchParams, InferOutput<Schema>>,
]>;

export function transformQueryToSchema<Schema extends RequiredSchema>(
  schema: Schema,
): TransformQueryToSchemaAction<Schema> {
  const transformer = (input: string | URLSearchParams) => {
    const result: Record<string, string | string[]> = {};

    new URLSearchParams(input).forEach((value, key) => {
      const accValue = result[key];
      if (Array.isArray(accValue)) {
        accValue.push(value);
      } else if (accValue === undefined) {
        result[key] = value;
      } else {
        result[key] = [accValue, value];
      }
    });

    return parse(schema, result);
  };

  return pipe(
    union([string(), instance(URLSearchParams)]),
    check(input => {
      try {
        transformer(input);
        return true;
      } catch {
        return false;
      }
    }, 'The value doesn\'t match required schema'),
    transform(transformer),
  );
}

/**
 * @returns A transformer applying `JSON.parse` to the input.
 */
export function transformJsonToSchema<Schema extends RequiredSchema>(
  schema: Schema,
): TransformJsonToSchemaAction<Schema> {
  return pipe(
    string(),
    check(input => {
      try {
        JSON.parse(input);
        return true;
      } catch {
        return false;
      }
    }, 'Input is not a valid JSON value'),
    transform(JSON.parse),
    schema,
  );
}

```
---
## File: packages/transformers/CHANGELOG.md

```markdown
# @tma.js/transformers

## 1.1.1

### Patch Changes

- 4570643: Update package.json actualizing all paths.
- Updated dependencies [4570643]
  - @tma.js/toolkit@1.0.2
  - @tma.js/types@1.0.2

## 1.1.0

### Minor Changes

- e3a2af6: Add more utilities for RGB colors. Deprecate toRGB, use toRGBFull instead. Allow #RRGGBBAA and #RGBA colors in theme params.

### Patch Changes

- Updated dependencies [dab51c3]
  - @tma.js/types@1.0.1

## 1.0.1

### Patch Changes

- Updated dependencies [fe883d3]
  - @tma.js/toolkit@1.0.1

```
---
## File: packages/transformers/LICENSE

```text
MIT License

Copyright (c) 2025 Vladislav Kibenko

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

```
---
## File: packages/transformers/package.json

```json
{
  "name": "@tma.js/transformers",
  "version": "1.1.1",
  "description": "Transformation utilities we use in the @tma.js packages.",
  "author": "Vladislav Kibenko <wolfram.deus@gmail.com>",
  "homepage": "https://github.com/Telegram-Mini-Apps/tma.js#readme",
  "repository": {
    "type": "git",
    "url": "git@github.com:Telegram-Mini-Apps/tma.js.git",
    "directory": "packages/transformers"
  },
  "bugs": {
    "url": "https://github.com/Telegram-Mini-Apps/tma.js/issues"
  },
  "keywords": [
    "telegram-mini-apps",
    "typescript"
  ],
  "license": "MIT",
  "type": "module",
  "sideEffects": false,
  "files": [
    "dist"
  ],
  "main": "./dist/index.cjs",
  "module": "./dist/index.js",
  "types": "./dist/dts/index.d.ts",
  "exports": {
    ".": {
      "types": "./dist/dts/index.d.ts",
      "import": "./dist/index.js",
      "require": "./dist/index.cjs",
      "default": "./dist/index.cjs"
    }
  },
  "scripts": {
    "test": "vitest --run",
    "lint": "eslint src",
    "lint:fix": "pnpm run lint --fix",
    "typecheck": "tsc --noEmit -p tsconfig.build.json",
    "build": "vite build -c vite.config.ts"
  },
  "dependencies": {
    "@tma.js/toolkit": "workspace:^",
    "@tma.js/types": "workspace:^",
    "fp-ts": "^2.16.11",
    "valibot": "^1.1.0"
  },
  "devDependencies": {
    "test-utils": "workspace:*",
    "tsconfig": "workspace:*"
  },
  "publishConfig": {
    "access": "public"
  }
}

```
---
## File: packages/transformers/tsconfig.build.json

```json
{
  "extends": "tsconfig/esnext-dom.json",
  "compilerOptions": {
    "paths": {
      "@/*": [
        "./src/*"
      ]
    }
  },
  "include": [
    "src"
  ],
  "exclude": [
    "src/**/*.test.ts"
  ]
}
```
---
## File: packages/transformers/tsconfig.eslint.json

```json
{
  "extends": "./tsconfig.build.json",
  "include": [
    "src"
  ],
  "exclude": []
}
```
---
## File: packages/transformers/tsconfig.json

```json
{
  "extends": "./tsconfig.build.json",
  "references": [
    {
      "path": "./tsconfig.node.json"
    },
    {
      "path": "./tsconfig.test.json"
    }
  ]
}
```
---
## File: packages/transformers/tsconfig.node.json

```json
{
  "extends": "tsconfig/esnext-dom.json",
  "compilerOptions": {
    "composite": true
  },
  "include": [
    "vite.config.ts",
    "package.json"
  ]
}

```
---
## File: packages/transformers/tsconfig.test.json

```json
{
  "extends": "tsconfig/esnext-dom.json",
  "compilerOptions": {
    "composite": true,
    "declaration": true,
    "paths": {
      "@/*": [
        "./src/*"
      ]
    }
  },
  "include": [
    "src"
  ],
  "exclude": []
}
```
---
## File: packages/transformers/vite.config.ts

```typescript
import { dirname, resolve } from 'node:path';
import { fileURLToPath } from 'node:url';
import dts from 'vite-plugin-dts';
import tsconfigPaths from 'vite-tsconfig-paths';
import { defineConfig } from 'vitest/config';

import packageJson from './package.json' with { type: "json" };

export default defineConfig(({ mode }) => {
  const tsconfigPath = mode === 'test'
    ? './tsconfig.test.json'
    : './tsconfig.build.json';

  return {
    plugins: [
      tsconfigPaths({ projects: [tsconfigPath] }),
      dts({ outDir: 'dist/dts', tsconfigPath }),
    ],
    resolve: {
      alias: {
        '@': resolve(dirname(fileURLToPath(import.meta.url)), 'src'),
      },
    },
    build: {
      rollupOptions: {
        external: Object.keys(packageJson.dependencies),
      },
      outDir: 'dist',
      emptyOutDir: true,
      sourcemap: true,
      lib: {
        entry: 'src/index.ts',
        formats: ['es', 'cjs'],
        fileName: 'index',
      },
    },
    test: {
      environment: 'happy-dom',
      coverage: {
        enabled: true,
        provider: 'v8',
        include: ['src/**/*.ts'],
        exclude: ['src/**/*.test.ts', 'src/index.ts'],
        branches: 80,
        functions: 80,
        statements: 80,
        lines: 80,
      },
    },
  };
});

```
---
## File: packages/tsconfig/esnext-dom.json

```json
{
  "$schema": "https://json.schemastore.org/tsconfig",
  "display": "ESNext DOM",
  "extends": "./esnext.json",
  "compilerOptions": {
    "lib": [
      "esnext",
      "dom"
    ]
  }
}
```
---
## File: packages/tsconfig/esnext.json

```json
{
  "$schema": "https://json.schemastore.org/tsconfig",
  "display": "ESNext",
  "compilerOptions": {
    "composite": false,
    "declaration": false,
    "esModuleInterop": true,
    "forceConsistentCasingInFileNames": true,
    "inlineSources": true,
    "isolatedModules": true,
    "lib": [
      "esnext"
    ],
    "module": "NodeNext",
    "moduleResolution": "NodeNext",
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "outDir": "dist",
    "preserveWatchOutput": true,
    "resolveJsonModule": true,
    "skipLibCheck": true,
    "sourceMap": true,
    "strict": true,
    "target": "ESNext",
    "useDefineForClassFields": true
  },
  "exclude": ["node_modules"]
}
```
---
## File: packages/tsconfig/package.json

```json
{
  "name": "tsconfig",
  "version": "0.0.2",
  "private": true,
  "license": "MIT"
}

```
---
## File: packages/types/src/colors.ts

```typescript
/**
 * Color in format #RGB, #RGBA, #RRGGBB or #RRGGBBAA.
 */
export type RGB = `#${string}`;

```
---
## File: packages/types/src/common.ts

```typescript
/**
 * Telegram application platform name.
 */
export type Platform =
  | 'android'
  | 'android_x'
  | 'ios'
  | 'macos'
  | 'tdesktop'
  | 'unigram'
  | 'unknown'
  | 'web'
  | 'weba'
  | string;

/**
 * Telegram Mini Apps version in format like "\d+.\d+".
 * @example "7.0"
 */
export type Version = string;

```
---
## File: packages/types/src/index.ts

```typescript
export type * from './colors.js';
export type * from './common.js';
export type * from './init-data.js';
export type * from './launch-params.js';
export type * from './theme-params.js';

```
---
## File: packages/types/src/init-data.ts

```typescript
/**
 * Known type of chat.
 */
export type ChatType =
  | 'sender'
  | 'private'
  | 'group'
  | 'supergroup'
  | 'channel'
  | string;

export interface User {
  /**
   * True, if this user added the bot to the attachment menu.
   */
  added_to_attachment_menu?: boolean;
  /**
   * True, if this user allowed the bot to message them.
   */
  allows_write_to_pm?: boolean;
  /**
   * First name of the user or bot.
   */
  first_name: string;
  /**
   * A unique identifier for the user or bot.
   */
  id: number;
  /**
   * True, if this user is a bot. Returned in the `receiver` field only.
   * @see receiver
   */
  is_bot?: boolean;
  /**
   * True, if this user is a Telegram Premium user.
   */
  is_premium?: boolean;
  /**
   * Last name of the user or bot.
   */
  last_name?: string;
  /**
   * [IETF language tag](https://en.wikipedia.org/wiki/IETF_language_tag) of the user's language.
   * Returns in user field only.
   */
  language_code?: string;
  /**
   * URL of the userâ€™s profile photo. The photo can be in .jpeg or .svg
   * formats. Only returned for Mini Apps launched from the attachment menu.
   */
  photo_url?: string;
  /**
   * Username of the user or bot.
   */
  username?: string;
}

/**
 * Describes Telegram Mini Apps [Chat](https://docs.telegram-mini-apps.com/platform/init-data#chat) type.
 */
export interface Chat {
  /**
   * Unique identifier for this chat.
   */
  id: number;
  /**
   * URL of the chatâ€™s photo. The photo can be in .jpeg or .svg formats.
   * Only returned for Mini Apps launched from the attachment menu.
   */
  photo_url?: string;
  /**
   * Type of the chat.
   */
  type: 'group' | 'supergroup' | 'channel' | string;
  /**
   * Title of the chat.
   */
  title: string;
  /**
   * Username of the chat.
   */
  username?: string;
}

/**
 * Describes Telegram Mini Apps [InitData](https://docs.telegram-mini-apps.com/platform/init-data#parameters-list)
 * type.
 */
export interface InitData {
  /**
   * Init data generation date.
   */
  auth_date: Date;
  /**
   * The number of seconds after which a message can be sent via the method [answerWebAppQuery](https://core.telegram.org/bots/api#answerwebappquery).
   */
  can_send_after?: number;
  /**
   * An object containing data about the chat where the bot was launched via
   * the attachment menu. Returned for supergroups, channels and group
   * chats â€“ only for Mini Apps launched via the attachment menu.
   */
  chat?: Chat;
  /**
   * The type of chat from which Mini App was opened.
   */
  chat_type?: ChatType;
  /**
   * A global identifier indicating the chat from which Mini App was opened. Returned only for
   * applications opened by direct link.
   */
  chat_instance?: string;
  /**
   * A hash of all passed parameters, which the bot server can use to
   * check their [validity](https://core.telegram.org/bots/webapps#validating-data-received-via-the-web-app).
   */
  hash: string;
  /**
   * A unique identifier for the Mini App session, required for sending
   * messages via the [answerWebAppQuery](https://core.telegram.org/bots/api#answerwebappquery) method.
   */
  query_id?: string;
  /**
   * An object containing data about the chat partner of the current user in
   * the chat where the bot was launched via the attachment menu.
   * Returned only for private chats and only for Mini Apps launched
   * via the attachment menu.
   */
  receiver?: User;
  /**
   * The value of the `startattach` or `startapp` parameter, passed via link.
   */
  start_param?: string;
  /**
   * Init data signature used during 3-rd party validation.
   */
  signature: string;
  /**
   * An object containing data about the current user.
   */
  user?: User;
}

```
---
## File: packages/types/src/launch-params.ts

```typescript
import type { InitData } from './init-data.js';
import type { Platform, Version } from './common.js';
import type { ThemeParams } from './theme-params.js';

/**
 * Telegram Mini Apps launch parameters.
 * @see https://docs.telegram-mini-apps.com/platform/launch-parameters
 */
export interface LaunchParams {
  /**
   * True if Mini App is currently launched in the inline mode.
   */
  tgWebAppBotInline?: boolean;
  /**
   * Current launch init data.
   */
  tgWebAppData?: InitData;
  /**
   * TODO: This property is not documented by the Telegram team.
   */
  tgWebAppDefaultColors?: ThemeParams;
  /**
   * True if the fullscreen mode is enabled.
   */
  tgWebAppFullscreen?: boolean;
  /**
   * Unique Telegram client platform identifier.
   */
  tgWebAppPlatform: Platform;
  /**
   * True if the application is required to show the Settings Button.
   */
  tgWebAppShowSettings?: boolean;
  /**
   * Start parameter passed in the application direct link.
   */
  tgWebAppStartParam?: string;
  /**
   * Mini App palette settings.
   */
  tgWebAppThemeParams: ThemeParams;
  /**
   * Currently supported Mini Apps' version.
   */
  tgWebAppVersion: Version;
}

```
---
## File: packages/types/src/theme-params.ts

```typescript
import type { RGB } from './colors.js';

export type KnownThemeParamsKey =
  | 'accent_text_color'
  | 'bg_color'
  | 'button_color'
  | 'button_text_color'
  | 'bottom_bar_bg_color'
  | 'destructive_text_color'
  | 'header_bg_color'
  | 'hint_color'
  | 'link_color'
  | 'secondary_bg_color'
  | 'section_bg_color'
  | 'section_header_text_color'
  | 'section_separator_color'
  | 'subtitle_text_color'
  | 'text_color';

/**
 * Application [theme parameters](https://docs.telegram-mini-apps.com/platform/theming).
 * Defines palette used by the Telegram application.
 */
export type ThemeParams = Partial<Record<KnownThemeParamsKey | string, RGB>>;

```
---
## File: packages/types/CHANGELOG.md

```markdown
# @tma.js/types

## 1.0.2

### Patch Changes

- 4570643: Update package.json actualizing all paths.

## 1.0.1

### Patch Changes

- dab51c3: Remove RBGShort type.

```
---
## File: packages/types/LICENSE

```text
MIT License

Copyright (c) 2025 Vladislav Kibenko

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

```
---
## File: packages/types/package.json

```json
{
  "name": "@tma.js/types",
  "version": "1.0.2",
  "description": "Telegram Mini Apps related TypeScript types.",
  "author": "Vladislav Kibenko <wolfram.deus@gmail.com>",
  "homepage": "https://github.com/Telegram-Mini-Apps/tma.js#readme",
  "repository": {
    "type": "git",
    "url": "git@github.com:Telegram-Mini-Apps/tma.js.git",
    "directory": "packages/types"
  },
  "bugs": {
    "url": "https://github.com/Telegram-Mini-Apps/tma.js/issues"
  },
  "keywords": [
    "telegram-mini-apps",
    "typescript",
    "types"
  ],
  "license": "MIT",
  "type": "module",
  "sideEffects": false,
  "files": [
    "dist"
  ],
  "types": "./dist/dts/index.d.ts",
  "exports": {
    ".": {
      "types": "./dist/dts/index.d.ts"
    }
  },
  "scripts": {
    "typecheck": "tsc --noEmit -p tsconfig.build.json",
    "build": "vite build -c vite.config.ts"
  },
  "devDependencies": {
    "tsconfig": "workspace:*"
  },
  "publishConfig": {
    "access": "public"
  }
}

```
---
## File: packages/types/tsconfig.build.json

```json
{
  "extends": "tsconfig/esnext.json",
  "include": [
    "src"
  ]
}
```
---
## File: packages/types/tsconfig.eslint.json

```json
{
  "extends": "./tsconfig.build.json",
  "include": [
    "src"
  ]
}
```
---
## File: packages/types/tsconfig.json

```json
{
  "extends": "./tsconfig.build.json",
  "references": [
    {
      "path": "./tsconfig.node.json"
    },
    {
      "path": "./tsconfig.test.json"
    }
  ]
}
```
---
## File: packages/types/tsconfig.node.json

```json
{
  "extends": "tsconfig/esnext.json",
  "compilerOptions": {
    "composite": true
  },
  "include": [
    "vite.config.ts"
  ]
}
```
---
## File: packages/types/tsconfig.test.json

```json
{
  "extends": "tsconfig/esnext-dom.json",
  "compilerOptions": {
    "composite": true,
    "declaration": true
  },
  "include": [
    "src"
  ],
  "exclude": []
}
```
---
## File: packages/types/vite.config.ts

```typescript
import { defineConfig } from 'vitest/config';
import dts from 'vite-plugin-dts';

export default defineConfig({
  plugins: [
    dts({
      outDir: 'dist/dts',
      tsconfigPath: './tsconfig.build.json'
    }),
  ],
  build: {
    outDir: 'dist',
    emptyOutDir: true,
    lib: {
      entry: 'src/index.ts',
      formats: ['es'],
      fileName: 'index'
    },
  },
});
```
---
## File: playgrounds/custom/src/index.ts

```typescript
/**
 * You can import any code from other packages here. There are currently 2 shortcuts:
 *
 * 1. "@packages/*". Provides access to "packages" directory:
 * import { postEvent } from '@packages/sdk/src/index.js';
 *
 * 2. "@/*". Provides easy access to packages' index files:
 * import { postEvent } from '@/sdk';
 */

import { postEvent } from '@/sdk';

postEvent('web_app_expand');

```
---
## File: playgrounds/custom/index.html

```html
<html>
<head>
  <meta charset="UTF-8">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
  >
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  <script type="module" src="src/index.ts"></script>
  <script src="https://unpkg.com/eruda@3.0.1/eruda.js"></script>
  <script>
    window.eruda.init();
  </script>
</body>
</html>
```
---
## File: playgrounds/custom/package.json

```json
{
  "name": "custom-playground",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "dev:https": "cross-env HTTPS=true vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "fp-ts": "^2.16.11",
    "tsconfig": "workspace:*",
    "@tma.js/sdk": "workspace:*"
  },
  "devDependencies": {
    "cross-env": "^7.0.3"
  }
}

```
---
## File: playgrounds/custom/README.md

```markdown
# Local Playground

This application can be used by developers to test the code, written in the current monorepo.
We created this playground to avoid writing the same code from one package to another, adding
`index.html` and `vite.config.ts` files.

## Usage

1. First of all just import any code from the other packages.
2. Run `pnpm run dev`.
3. Open URL from the console.
```
---
## File: playgrounds/custom/tsconfig.json

```json
{
  "extends": "tsconfig/esnext-dom.json",
  "compilerOptions": {
    "paths": {
      "@/*": [
        "../../packages/*/src/index.ts"
      ]
    }
  },
  "exclude": [
    "node_modules"
  ],
  "include": [
    "src"
  ],
  "references": [
    {
      "path": "./tsconfig.node.json"
    }
  ]
}

```
---
## File: playgrounds/custom/tsconfig.node.json

```json
{
  "extends": "tsconfig/esnext.json",
  "compilerOptions": {
    "composite": true,
    "module": "NodeNext"
  },
  "include": [
    "vite.config.ts"
  ]
}
```
---
## File: playgrounds/custom/vite.config.ts

```typescript
import { defineConfig } from 'vite';
import tsconfigPaths from 'vite-tsconfig-paths';
import mkcert from 'vite-plugin-mkcert';

export default defineConfig({
  plugins: [
    // Allows using the compilerOptions.paths property in tsconfig.json.
    // https://www.npmjs.com/package/vite-tsconfig-paths
    tsconfigPaths(),
    // Allows using self-signed certificates to run the dev server using HTTPS.
    // https://www.npmjs.com/package/vite-plugin-mkcert
    process.env.HTTPS && mkcert(),
  ],
  server: {
    host: true,
  },
  build: {
    outDir: 'dist',
    emptyOutDir: true,
  },
});




```
---
## File: .gitattributes

```text
* text=auto eol=lf

```
---
## File: .gitignore

```text
# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
node_modules
.pnp
.pnp.js

# testing
coverage

# next.js
.next/
out/
dist

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# local env files
.env
.env.local
.env.development.local
.env.test.local
.env.production.local

# turbo
.turbo

# vercel
.vercel

.idea
.docusaurus

# Apps for local development.
apps-local

apps/docs/.vitepress/cache
apps/docs/.vitepress/dist

jsr.json
```
---
## File: CODE_OF_CONDUCT.md

```markdown
# Contributor Covenant Code of Conduct

## Our Pledge

We as members, contributors, and leaders pledge to make participation in our
community a harassment-free experience for everyone, regardless of age, body
size, visible or invisible disability, ethnicity, sex characteristics, gender
identity and expression, level of experience, education, socio-economic status,
nationality, personal appearance, race, religion, or sexual identity
and orientation.

We pledge to act and interact in ways that contribute to an open, welcoming,
diverse, inclusive, and healthy community.

## Our Standards

Examples of behavior that contributes to a positive environment for our
community include:

* Demonstrating empathy and kindness toward other people
* Being respectful of differing opinions, viewpoints, and experiences
* Giving and gracefully accepting constructive feedback
* Accepting responsibility and apologizing to those affected by our mistakes,
  and learning from the experience
* Focusing on what is best not just for us as individuals, but for the
  overall community

Examples of unacceptable behavior include:

* The use of sexualized language or imagery, and sexual attention or
  advances of any kind
* Trolling, insulting or derogatory comments, and personal or political attacks
* Public or private harassment
* Publishing others' private information, such as a physical or email
  address, without their explicit permission
* Other conduct which could reasonably be considered inappropriate in a
  professional setting

## Enforcement Responsibilities

Community leaders are responsible for clarifying and enforcing our standards of
acceptable behavior and will take appropriate and fair corrective action in
response to any behavior that they deem inappropriate, threatening, offensive,
or harmful.

Community leaders have the right and responsibility to remove, edit, or reject
comments, commits, code, wiki edits, issues, and other contributions that are
not aligned to this Code of Conduct, and will communicate reasons for moderation
decisions when appropriate.

## Scope

This Code of Conduct applies within all community spaces, and also applies when
an individual is officially representing the community in public spaces.
Examples of representing our community include using an official e-mail address,
posting via an official social media account, or acting as an appointed
representative at an online or offline event.

## Enforcement

Instances of abusive, harassing, or otherwise unacceptable behavior may be
reported to the community leaders responsible for enforcement at
https://t.me/vdkfrost.
All complaints will be reviewed and investigated promptly and fairly.

All community leaders are obligated to respect the privacy and security of the
reporter of any incident.

## Enforcement Guidelines

Community leaders will follow these Community Impact Guidelines in determining
the consequences for any action they deem in violation of this Code of Conduct:

### 1. Correction

**Community Impact**: Use of inappropriate language or other behavior deemed
unprofessional or unwelcome in the community.

**Consequence**: A private, written warning from community leaders, providing
clarity around the nature of the violation and an explanation of why the
behavior was inappropriate. A public apology may be requested.

### 2. Warning

**Community Impact**: A violation through a single incident or series
of actions.

**Consequence**: A warning with consequences for continued behavior. No
interaction with the people involved, including unsolicited interaction with
those enforcing the Code of Conduct, for a specified period of time. This
includes avoiding interactions in community spaces as well as external channels
like social media. Violating these terms may lead to a temporary or
permanent ban.

### 3. Temporary Ban

**Community Impact**: A serious violation of community standards, including
sustained inappropriate behavior.

**Consequence**: A temporary ban from any sort of interaction or public
communication with the community for a specified period of time. No public or
private interaction with the people involved, including unsolicited interaction
with those enforcing the Code of Conduct, is allowed during this period.
Violating these terms may lead to a permanent ban.

### 4. Permanent Ban

**Community Impact**: Demonstrating a pattern of violation of community
standards, including sustained inappropriate behavior,  harassment of an
individual, or aggression toward or disparagement of classes of individuals.

**Consequence**: A permanent ban from any sort of public interaction within
the community.

## Attribution

This Code of Conduct is adapted from the [Contributor Covenant][homepage],
version 2.0, available at
https://www.contributor-covenant.org/version/2/0/code_of_conduct.html.

Community Impact Guidelines were inspired by [Mozilla's code of conduct
enforcement ladder](https://github.com/mozilla/diversity).

[homepage]: https://www.contributor-covenant.org

For answers to common questions about this code of conduct, see the FAQ at
https://www.contributor-covenant.org/faq. Translations are available at
https://www.contributor-covenant.org/translations.

```
---
## File: CONTRIBUTING.md

```markdown
# Contribution Guidelines

Contributing to the development of libraries related to the Telegram Mini Apps platform is not
difficult. We have a limited set of TypeScript packages and a bunch of scripts that will be useful
during development. Before starting to contribute, it is better to discuss any proposed changes with
the project owners via repository issues to avoid duplication of effort.

## Cloning Repository

First of all, it is required to fetch the repository code (or its forked version). To do this, you
can clone the repository using the Git command:

```bash
# Via SSH.
git clone git@github.com:Telegram-Mini-Apps/tma.js.git
```

or

```bash
# Via HTTPS.
git clone https://github.com/Telegram-Mini-Apps/tma.js.git
```

Once the repository is fetched, install project dependencies via [pnpm](https://pnpm.io/) (pnpm
only, as long as the current repository is a pnpm monorepo):

```bash
pnpm i
```

## Philosophy

Before diving deep into the code, it's important to understand the philosophy behind our repositories' development.

The first thing to know here is we don't really like handling errors using `try-catch` construction.
This approach often requires you to read the source code of a function to know what specific errors it might throw.
Instead, we use the `Either` abstraction from [fp-ts](https://www.npmjs.com/package/fp-ts). This provides a clear and
explicit way to see whether a function executed successfully or failed.

However, we recognize that many developers may be more comfortable with a traditional `try-catch` approach. To
accommodate this, all functions that can fail must return an `Either`. Additionally, you must provide a "throwing"
alternative that wraps the `Either` and throws the error for those who prefer that style.

When writing your code, ensure that if a function can throw an error, it always returns an `Either` and has a throwing
counterpart.

Here is an example:

```typescript
import * as E from 'fp-ts/Either';
import { pipe } from 'fp-ts/function';

class MyError extends Error {
}

function nonThrowing(): E.Either<MyError, string> {
  return Math.random() < 0.5
    ? E.left(new MyError())
    : E.right('just some string');
}

function throwing(): string {
  return pipe(nonThrowing(), E.match(
    e => {
      throw e;
    },
    result => result
  ))
}
```

The second and final principle is **the simpler, the better**. We strive to write code that is as understandable and
intuitive as possible. Please think twice before implementing a complex solution.

## Trying Your Code

This project contains an already configured application that can use any `@tma.js` package located
in the [packages](packages) folder. The application uses local versions of packages, not remote ones
presented in some registry. The local playground represents almost the default Vite TypeScript
application template with some additional tsconfig configuration, allowing the resolution of
packages from the corresponding folder.

To run the local playground, use the following commands:

```bash
# Build packages as long as the playground may 
# the built versions.
pnpm run packages:build

# Go to the application folder.
cd apps/local-playground

# Run Vite dev server.
pnpm run dev
```

This will make Vite start the development server using the `index.html` file placed in the
application directory. In turn, this HTML file refers to the `index.ts` file that will be
automatically transpiled by Vite and executed by the browser.

As the local playground refers to the actual code, you can make any changes in the packages
directory to see the changes instantly. This will help you understand how the code you are going to
change in `@tma.js` packages will work after your proposed changes.

## After Changes Done

When you are done with making changes, it is required to write tests related to the changes. For
this purpose, we use [Vitest](https://vitest.dev/). Then, we should check if the repository status
is correct.

Here is the list of commands you have to run:

```bash
# Run tests.
pnpm run packages:test

# Run eslint.
pnpm run packages:lint
# Or if you want to automatically fix problems:
pnpm run packages:lint:fix

# Check if packages are building successfully.
pnpm run packages:build
```

If all steps above were completed successfully and proposed changes require bumping some packages'
versions, you have to describe changes using the `changeset` command:

```bash
changeset
```

You can learn more about Changeset [here](.changeset/README.md).

When changes are described (if required), don't forget to create a Pull Request and wait for the
project owners to review it.
```
---
## File: eslint.config.js

```javascript
// @ts-check

import eslint from '@eslint/js';
import stylistic from '@stylistic/eslint-plugin';
import pluginVitest from '@vitest/eslint-plugin';
import tseslint from 'typescript-eslint';

export default tseslint.config(
  {
    ...pluginVitest.configs.recommended,
    files: ['**/*.test.ts'],
  },
  {
    name: 'app/files-to-lint',
    files: ['{packages,playgrounds}/**/*.{js,ts,mts,tsx,vue}'],
    languageOptions: {
      parserOptions: {
        project: [
          './playgrounds/*/tsconfig.json',
          './packages/*/tsconfig.eslint.json',
        ],
        tsconfigRootDir: import.meta.dirname,
        ecmaVersion: 'latest',
        sourceType: 'module',
      },
    },
    ignores: ['eslint.config.js'],
    extends: [
      eslint.configs.recommended,
      ...tseslint.configs.recommendedTypeChecked,
    ],
    plugins: { '@stylistic': stylistic },
    rules: {
      '@typescript-eslint/no-empty-object-type': 0,
      '@typescript-eslint/no-explicit-any': 0,
      '@typescript-eslint/no-unsafe-argument': 0,
      '@typescript-eslint/no-unsafe-member-access': 0,
      '@typescript-eslint/no-unsafe-assignment': 0,
      '@typescript-eslint/no-unsafe-return': 0,
      '@typescript-eslint/no-redundant-type-constituents': 0,
      '@typescript-eslint/no-duplicate-type-constituents': 0,
      '@typescript-eslint/no-unused-expressions': 0,
      '@typescript-eslint/no-unsafe-call': 0,
      '@typescript-eslint/no-namespace': 0,
      '@typescript-eslint/require-await': 0,
      'no-empty': 0,
      '@stylistic/array-bracket-newline': ['error', 'consistent'],
      '@stylistic/array-bracket-spacing': ['error', 'never'],
      '@stylistic/array-element-newline': ['error', 'consistent'],
      '@stylistic/arrow-parens': ['error', 'as-needed'],
      '@stylistic/arrow-spacing': ['error', { before: true, after: true }],
      '@stylistic/block-spacing': ['error', 'always'],
      '@stylistic/brace-style': ['error', '1tbs', { allowSingleLine: false }],
      '@stylistic/comma-dangle': ['error', 'always-multiline'],
      '@stylistic/comma-spacing': ['error', { before: false, after: true }],
      '@stylistic/comma-style': ['error', 'last'],
      '@stylistic/computed-property-spacing': ['error', 'never'],
      '@stylistic/curly-newline': ['error', 'always'],
      '@stylistic/dot-location': ['error', 'property'],
      '@stylistic/eol-last': ['error', 'always'],
      '@stylistic/function-call-argument-newline': ['error', 'consistent'],
      '@stylistic/function-call-spacing': ['error', 'never'],
      '@stylistic/function-paren-newline': ['error', 'consistent'],
      '@stylistic/generator-star-spacing': ['error', { before: false, after: true }],
      '@stylistic/implicit-arrow-linebreak': ['error', 'beside'],
      '@stylistic/indent': ['error', 2],
      '@stylistic/indent-binary-ops': ['error', 2],
      '@stylistic/key-spacing': ['error', { beforeColon: false, afterColon: true, mode: 'strict' }],
      '@stylistic/keyword-spacing': ['error', { before: true, after: true }],
      '@stylistic/line-comment-position': ['error', { position: 'above' }],
      '@stylistic/linebreak-style': ['error', 'unix'],
      // '@stylistic/lines-around-comment': ['error', {}],
      '@stylistic/lines-between-class-members': ['error', {
        enforce: [
          { blankLine: 'always', prev: '*', next: 'field' },
          { blankLine: 'always', prev: 'field', next: 'field' },
          { blankLine: 'always', prev: 'field', next: 'method' },
          { blankLine: 'always', prev: 'method', next: 'method' },
        ],
      }],
      '@stylistic/max-len': ['warn', {
        code: 100,
        tabWidth: 2,
        ignoreComments: true,
        ignoreTrailingComments: true,
        ignoreUrls: true,
        ignoreStrings: true,
        ignoreTemplateLiterals: true,
        ignoreRegExpLiterals: true,
      }],
      '@stylistic/max-statements-per-line': ['error', { max: 1 }],
      '@stylistic/member-delimiter-style': ['error', {
        multiline: {
          delimiter: 'semi',
          requireLast: true,
        },
        singleline: {
          delimiter: 'semi',
          requireLast: false,
        },
        multilineDetection: 'brackets',
      }],
      '@stylistic/multiline-ternary': ['error', 'always-multiline'],
      '@stylistic/new-parens': ['error', 'always'],
      '@stylistic/newline-per-chained-call': ['error', { ignoreChainWithDepth: 2 }],
      '@stylistic/no-confusing-arrow': 'error',
      '@stylistic/no-extra-parens': 0,
      '@stylistic/no-extra-semi': 'error',
      '@stylistic/no-floating-decimal': 'error',
      '@stylistic/no-mixed-operators': 'error',
      '@stylistic/no-mixed-spaces-and-tabs': 'error',
      '@stylistic/no-multi-spaces': 'error',
      '@stylistic/no-multiple-empty-lines': ['error', { max: 1, maxEOF: 1, maxBOF: 0 }],
      '@stylistic/no-tabs': 'error',
      '@stylistic/no-trailing-spaces': 'error',
      '@stylistic/no-whitespace-before-property': 'error',
      '@stylistic/nonblock-statement-body-position': ['error', 'beside'],
      '@stylistic/object-curly-newline': ['error', {
        multiline: true,
        consistent: true,
      }],
      '@stylistic/object-curly-spacing': ['error', 'always'],
      '@stylistic/object-property-newline': ['error', { allowAllPropertiesOnSameLine: true }],
      '@stylistic/one-var-declaration-per-line': ['error', 'always'],
      '@stylistic/operator-linebreak': ['error', 'before', {
        overrides: {
          '=': 'after',
        },
      }],
      '@stylistic/padded-blocks': ['error', 'never'],
      '@stylistic/padding-line-between-statements': [
        'error',
        { blankLine: 'always', prev: 'directive', next: '*' },
        { blankLine: 'any', prev: 'directive', next: 'directive' },
        { blankLine: 'never', prev: ['case', 'default'], next: '*' },
      ],
      '@stylistic/quote-props': ['error', 'as-needed'],
      '@stylistic/quotes': ['error', 'single', { avoidEscape: true }],
      '@stylistic/rest-spread-spacing': ['error', 'never'],
      '@stylistic/semi': ['error', 'always'],
      '@stylistic/semi-spacing': ['error', { before: false, after: true }],
      '@stylistic/semi-style': ['error', 'last'],
      '@stylistic/space-before-blocks': ['error', 'always'],
      '@stylistic/space-before-function-paren': ['error', {
        anonymous: 'never',
        named: 'never',
        asyncArrow: 'always',
        catch: 'always',
      }],
      '@stylistic/space-in-parens': ['error', 'never'],
      '@stylistic/space-infix-ops': 'error',
      '@stylistic/space-unary-ops': ['error', { words: true, nonwords: false }],
      '@stylistic/spaced-comment': ['error', 'always', {
        markers: ['#region', '#endregion'], // Code wrapping.
      }],
      '@stylistic/switch-colon-spacing': ['error', { before: false, after: true }],
      '@stylistic/template-curly-spacing': ['error', 'never'],
      '@stylistic/template-tag-spacing': ['error', 'never'],
      '@stylistic/type-annotation-spacing': ['error'],
      '@stylistic/type-generic-spacing': ['error'],
      '@stylistic/type-named-tuple-spacing': ['error'],
      '@stylistic/wrap-iife': ['error', 'inside'],
      '@stylistic/yield-star-spacing': ['error', { before: false, after: true }],
    },
  },
);

```
---
## File: LICENSE

```text
MIT License

Copyright (c) 2025 Vladislav Kibenko

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

```
---
## File: MOTIVATION.md

```markdown
# Motivation

This document describes the motivation that inspired us to create `@tma.js/sdk`.

Here is the list of problems, we found in the official SDK and decided to create our own:

1. [Unproductive Package Format](#unproductive-package-format)
2. [No Public Review](#no-public-review)
3. [Vanilla JavaScript](#vanilla-javascript)
4. [Possible Security Issues](#possible-security-issues)
5. [Mixed Code Quality](#mixed-code-quality)
6. [Bundle Size](#bundle-size)
7. [Inconsistent Components State](#inconsistent-components-state)
8. [1700 Lines of Code, Single File](#1700-lines-of-code-single-file)
9. [Unused Code](#unused-code)
10. [Implicit Methods Inactivity](#implicit-methods-inactivity)
11. [Uncontrolled Initialization](#uncontrolled-initialization)
12. [Forced CSS Variables](#forced-css-variables)
13. [Forced Logs](#forced-logs)
14. [Ancient Bugs](#ancient-bugs)

## Unproductive Package Format

The Telegram SDK is provided as an IIFE package, which may lead to a variety
of potential issues. Modern development typically avoids this format unless it is genuinely
necessary. Developers tend to prefer more contemporary technologies and formats. The world of
development has advanced significantly beyond the ES5 standard and traditional JavaScript.

### Solution

Despite the issues associated with IIFE, `@tma.js/sdk` is available in three formats:
CommonJS (CJS),
ECMAScript Modules (ESM), and IIFE. Developers have the flexibility to choose any of these formats,
and they can reap the benefits of selecting ESM.

All project packages are available on [npm.js](https://www.npmjs.com/org/tma.js) and can be
installed in the standard manner via `npm i`, `pnpm i`, `yarn add`, etc.

## No Public Review

Developers are unable to track file changes in the usual and familiar way. They must rely on
third-party software such as Telegram Crawler or similar tools to monitor the modifications made.
Additionally, developers are unable to report some problems in code or suggest an enhancement.

### Solution

`@tma.js/sdk` uses GitHub as its codebase repository. Every developer can track changes made
to any
files and review them.

## Vanilla JavaScript

The Telegram SDK is written in ES5 JavaScript, which appears unsuitable for large projects that
necessitate type definitions. While there are external projects that address this issue, the problem
is that **they are external** and might become outdated. The Telegram SDK should be written in
TypeScript, offering type support out of the box.

### Solution

`@tma.js/sdk` is written in TypeScript and doesn't require help of other packages to provide
typings.

## Possible Security Issues

A year later, Telegram SDK still contains "code for testing purposes" (lines 140-143):

```javascript
var trustedTarget = 'https://web.telegram.org';
// For now we don't restrict target, for testing purposes
trustedTarget = '*';
window.parent.postMessage(JSON.stringify({
  eventType: eventType,
  eventData: eventData
}), trustedTarget);
```

This section of code determines which parent iframes can receive `message` events from the
developer's application. For typical developers, this means determining which iframes are capable of
receiving [Telegram Mini Apps methods](https://docs.telegram-mini-apps.com/platform/methods)
data along
with their parameters. Despite the fact that the average developer does not need to disable
this security mechanism, Telegram does it for them for "testing purposes".

### Solution

`@tma.js/sdk` does not disable any security mechanisms. If a developer needs to configure the
list of
allowed parent iframe origins, the package provides corresponding methods.

## Mixed Code Quality

The current code format suggests that there were numerous developers from Telegram involved in its
development. The issue is that the coding approach varies between different parts, giving the
impression that both frontend and backend (or more likely, C++) developers were working on
implementing new features and re-implementing mechanisms and utilities that are already included in
web browsers.

The absence of code comments makes it difficult for external developers to quickly comprehend what
is happening in the code, which, in turn, makes it more challenging to contribute.

### Solution

`@tma.js/sdk` code is extensively documented with various types of comments and
documentation. The
project follows well-established and widely
recognized [ESLint rules as described by Airbnb](https://github.com/airbnb/javascript). External
developers are welcome to explore the code and propose improvements.

## Bundle Size

The SDK provided by Telegram appears more like source code for the package rather than a
production-ready version. In typical web project development, code minification is employed to
reduce the amount of data loaded by browsers. However, it seems that this has not been implemented
here.

### Solution

`@tma.js/sdk` packages are built using Vite (Rollup), which minifies the code and provides
ready-to-use
libraries.

## Inconsistent Components State

The Telegram SDK does not preserve component states between application refreshes (using the 'Reload
Page' button in the top-right three dots menu). It assumes that all components have their initial
states, but this is not always the case.

To verify this, developers can perform the following steps:

1. Open the [Durger King Bot](https://t.me/DurgerKingBot) application (by clicking the Menu Button).
2. Open the console and enter `window.Telegram.WebApp.BackButton.isVisible`. It will return `false`.
3. Add any product and click the MainButton ('View order'). The BackButton should become visible.
4. Click the three dots in the top-right corner of the application interface and select 'Reload
   Page.'
5. Repeat step #2. It will return `false` again, even though the BackButton is currently visible.

So, the SDK lacks awareness of the actual state of components.

### Solution

`@tma.js/sdk` packages consistently provide the current component state.

## 1700 Lines of Code, Single File

Telegram SDK is provided as a single file with 1700 lines of code, which makes it research
way too hard, decreasing code understanding and external developers code contribution.

### Solution

`@tma.js/sdk` packages are finely detailed, with each package being responsible for its
specific part of
the platform and having an intuitive file structure.

## Unused Code

In addition to the fact that the Telegram SDK code is not compressed, it also includes code that is
typically inaccessible in common applications. At first glance, this code appears to be exclusively
utilized by Telegram developers during library development.

To identify this type of code, developers can examine line 743 using a "debug button" that relies on
a launch parameter, such as `tgWebAppDebug`, which is not present in normal applications.

```typescript
 if (initParams.tgWebAppDebug) {
  debugBtn = document.createElement('tg-main-button');
  debugBtnStyle = {
    font: '600 14px/18px sans-serif',
    display: 'none',
    width: '100%',
    height: '48px',
    borderRadius: '0',
    background: 'no-repeat right center',
    position: 'fixed',
    left: '0',
// ...
```

This parameter also involves the definition of certain large functions that are exclusively
associated with this button.

While it is possible to explore further to uncover additional unused code, this particular case is
already a concern.

### Solution

`@tma.js/sdk` does not contain any code specifically oriented towards a distinct group of
developers.
The functionality it provides covers scenarios that all developers are likely to encounter.

## Implicit Methods Inactivity

The Telegram SDK does not offer any functions to check if the called Telegram Mini Apps methods are
supported by the current platform version. Even though each SDK method checks if it's supported,
developers are unable to reuse this type of functionality.

The related issue here is that calling SDK methods does not inform a developer when something is not
functioning as expected. In other words, the called method either performs an action or does
nothing, but developers have no way of knowing it. There will only be a warning in the console,
which cannot and should not be handled by a developer.

Instead, SDK methods should throw an error if the method is unsupported. With this behavior, a
developer will be certain that the method does not work. Otherwise, a developer will either hope
that the called method will work or be required to investigate which methods are supported by which
platform versions and implement the corresponding functionality themselves.

### Solution

The `@tma.js/bridge` package offers utilities to verify whether a specific Telegram Mini Apps
method
is supported in a specified platform version. This ensures that the developer can be confident the
method call will work as intended. It also allows checking if specified method **parameter** is
supported by specified version.

The `@tma.js/sdk` package provides higher-level components that make use of Telegram Mini
Apps. Each
component has a special method, `supports`, which returns `true` if the component's method is
supported in the current platform version. By default, calling methods that are not supported in the
current platform version will result in an error. Nevertheless, this type of behavior is
configurable.

## Uncontrolled Initialization

The process of SDK initialization cannot be controlled by the developer. SDK initialization itself
is synchronous, but it cannot technically be considered as such as long as Telegram Mini Apps does
not provide a synchronous way to receive the state of its components (for example, MainButton,
BackButton, Viewport, etc.). That's why the initialization process is asynchronous - it will take
some time for the code to retrieve the actual state from the Telegram application.

The resulting problem here is that the developer cannot be sure if the current component state
they are working with is up-to-date, and not the initial one. There is no way to know if the
initialization has been completed.

### Solution

`@tma.js/sdk` provides asynchronous initialization to ensure that developers are working with
components in their actual state. However, it does not restrict developers from implementing
their own initialization process.

## Forced CSS Variables

Developers are unable to prevent the creation of CSS variables that could potentially impact
application performance. For instance, the Telegram SDK generates a CSS variable
called `--tg-viewport-height`, which is updated each time a user moves a Mini App window. During
extensive changes in viewport height, the SDK updates this variable frequently, which could
potentially result in a decrease in application performance.

This is not a particularly crucial point of motivation because, in most cases, applications are not
actively processing changes in viewport height. However, it appears that this behavior could be made
configurable.

### Solution

CSS variables feature is configurable in `@tma.js/sdk` packages.

## Forced Logs

Developers are unable to disable logs, related to the package lifecycle.
This makes application debugging a bit harder, and sometimes, may lead
to sending unnecessary logs to external services.

## Ancient Bugs

The Telegram SDK contains bugs that have not been fixed for a long time.

These bugs have existed since the library's inception.

For example, the SDK does not allow a developer to track the closing of a popup when it is closed by
clicking outside it or by clicking the close icon. To handle this, developers must use a
workaround not intended for this purpose.

The main issue here is not the bug itself, but the inability to notify the library owners about it.

### Solution

All `@tma.js` packages are public, and developers are allowed to create an issue for a bug.
The community will then work to fix it.

```
---
## File: package.json

```json
{
  "private": true,
  "scripts": {
    "ci:docs:build": "pnpm run docs:build",
    "ci:packages:build": "pnpm run packages:build",
    "ci:packages:lint": "pnpm run packages:lint",
    "ci:packages:test": "vitest --run",
    "ci:packages:typecheck": "pnpm run packages:typecheck",
    "ci:packages:rollup": "pnpm i && pnpm run ci:packages:build && pnpm run ci:packages:lint && pnpm run ci:packages:typecheck && pnpm run ci:packages:test",
    "commit": "git cz",
    "dev": "turbo run dev",
    "docs:build": "turbo run build --filter=\"./apps/docs\"",
    "docs:dev": "turbo run dev --filter=\"./apps/docs\"",
    "packages:build": "turbo run build --filter=\"./packages/*\"",
    "packages:lint": "turbo run lint --filter=\"./packages/*\"",
    "packages:lint:fix": "turbo run lint:fix --filter=\"./packages/*\"",
    "packages:test": "vitest --run --retry 3",
    "packages:typecheck": "turbo run typecheck --filter=\"./packages/*\"",
    "prepare": "husky"
  },
  "devDependencies": {
    "@changesets/cli": "^2.27.10",
    "@eslint/js": "^9.34.0",
    "@rollup/plugin-node-resolve": "^15.3.0",
    "@stylistic/eslint-plugin": "^5.2.3",
    "@turbo/gen": "^2.3.3",
    "@types/eslint__js": "^8.42.3",
    "@vitest/coverage-v8": "^3.2.4",
    "@vitest/eslint-plugin": "^1.3.4",
    "@vitest/ui": "^3.2.4",
    "commitizen": "^4.3.1",
    "cz-conventional-changelog": "^3.3.0",
    "eslint": "^9.16.0",
    "husky": "^9.1.7",
    "rimraf": "^6.0.1",
    "rollup-plugin-preserve-shebang": "^1.0.1",
    "tslib": "^2.8.1",
    "tsx": "^4.19.2",
    "turbo": "^2.3.3",
    "typescript": "5.9.2",
    "typescript-eslint": "^8.41.0",
    "vite": "^6.3.3",
    "vite-plugin-dts": "^4.5.3",
    "vite-plugin-mkcert": "^1.17.6",
    "vite-plugin-solid": "^2.11.0",
    "vite-tsconfig-paths": "^5.1.4",
    "vitest": "^3.2.4"
  },
  "type": "module",
  "packageManager": "pnpm@10.9.0",
  "name": "monorepo",
  "config": {
    "commitizen": {
      "path": "cz-conventional-changelog"
    }
  },
  "husky": {
    "hooks": {
      "prepare-commit-msg": "exec < /dev/tty && npx cz --hook || true"
    }
  }
}

```
---
## File: pnpm-lock.yaml

```yaml
lockfileVersion: '9.0'

settings:
  autoInstallPeers: true
  excludeLinksFromLockfile: false

importers:

  .:
    devDependencies:
      '@changesets/cli':
        specifier: ^2.27.10
        version: 2.27.10
      '@eslint/js':
        specifier: ^9.34.0
        version: 9.34.0
      '@rollup/plugin-node-resolve':
        specifier: ^15.3.0
        version: 15.3.0(rollup@4.40.0)
      '@stylistic/eslint-plugin':
        specifier: ^5.2.3
        version: 5.2.3(eslint@9.16.0(jiti@1.21.6))
      '@turbo/gen':
        specifier: ^2.3.3
        version: 2.3.3(@swc/core@1.9.2(@swc/helpers@0.5.15))(@types/node@22.10.1)(typescript@5.9.2)
      '@types/eslint__js':
        specifier: ^8.42.3
        version: 8.42.3
      '@vitest/coverage-v8':
        specifier: ^3.2.4
        version: 3.2.4(vitest@3.2.4)
      '@vitest/eslint-plugin':
        specifier: ^1.3.4
        version: 1.3.4(eslint@9.16.0(jiti@1.21.6))(typescript@5.9.2)(vitest@3.2.4)
      '@vitest/ui':
        specifier: ^3.2.4
        version: 3.2.4(vitest@3.2.4)
      commitizen:
        specifier: ^4.3.1
        version: 4.3.1(@types/node@22.10.1)(typescript@5.9.2)
      cz-conventional-changelog:
        specifier: ^3.3.0
        version: 3.3.0(@types/node@22.10.1)(typescript@5.9.2)
      eslint:
        specifier: ^9.16.0
        version: 9.16.0(jiti@1.21.6)
      husky:
        specifier: ^9.1.7
        version: 9.1.7
      rimraf:
        specifier: ^6.0.1
        version: 6.0.1
      rollup-plugin-preserve-shebang:
        specifier: ^1.0.1
        version: 1.0.1
      tslib:
        specifier: ^2.8.1
        version: 2.8.1
      tsx:
        specifier: ^4.19.2
        version: 4.19.2
      turbo:
        specifier: ^2.3.3
        version: 2.3.3
      typescript:
        specifier: 5.9.2
        version: 5.9.2
      typescript-eslint:
        specifier: ^8.41.0
        version: 8.41.0(eslint@9.16.0(jiti@1.21.6))(typescript@5.9.2)
      vite:
        specifier: ^6.3.3
        version: 6.3.3(@types/node@22.10.1)(jiti@1.21.6)(tsx@4.19.2)(yaml@2.6.0)
      vite-plugin-dts:
        specifier: ^4.5.3
        version: 4.5.3(@types/node@22.10.1)(rollup@4.40.0)(typescript@5.9.2)(vite@6.3.3(@types/node@22.10.1)(jiti@1.21.6)(tsx@4.19.2)(yaml@2.6.0))
      vite-plugin-mkcert:
        specifier: ^1.17.6
        version: 1.17.6(vite@6.3.3(@types/node@22.10.1)(jiti@1.21.6)(tsx@4.19.2)(yaml@2.6.0))
      vite-plugin-solid:
        specifier: ^2.11.0
        version: 2.11.0(solid-js@1.9.3)(vite@6.3.3(@types/node@22.10.1)(jiti@1.21.6)(tsx@4.19.2)(yaml@2.6.0))
      vite-tsconfig-paths:
        specifier: ^5.1.4
        version: 5.1.4(typescript@5.9.2)(vite@6.3.3(@types/node@22.10.1)(jiti@1.21.6)(tsx@4.19.2)(yaml@2.6.0))
      vitest:
        specifier: ^3.2.4
        version: 3.2.4(@types/node@22.10.1)(@vitest/ui@3.2.4)(happy-dom@20.0.5)(jiti@1.21.6)(jsdom@25.0.1)(tsx@4.19.2)(yaml@2.6.0)

  apps/docs:
    devDependencies:
      vitepress:
        specifier: 1.5.0
        version: 1.5.0(@algolia/client-search@5.14.2)(@types/node@22.10.1)(@types/react@18.3.12)(axios@1.7.8)(change-case@5.4.4)(postcss@8.5.3)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)(search-insights@2.17.2)(typescript@5.9.2)

  packages/bridge:
    dependencies:
      '@tma.js/signals':
        specifier: workspace:^
        version: link:../signals
      '@tma.js/toolkit':
        specifier: workspace:^
        version: link:../toolkit
      '@tma.js/transformers':
        specifier: workspace:^
        version: link:../transformers
      '@tma.js/types':
        specifier: workspace:^
        version: link:../types
      better-promises:
        specifier: ^1.0.0
        version: 1.0.0
      error-kid:
        specifier: ^1.0.2
        version: 1.0.2
      fp-ts:
        specifier: ^2.16.11
        version: 2.16.11
      mitt:
        specifier: ^3.0.1
        version: 3.0.1
      valibot:
        specifier: ^1.1.0
        version: 1.1.0(typescript@5.9.2)
    devDependencies:
      test-utils:
        specifier: workspace:*
        version: link:../test-utils
      tsconfig:
        specifier: workspace:*
        version: link:../tsconfig

  packages/create-mini-app:
    dependencies:
      '@inquirer/core':
        specifier: ^10.3.0
        version: 10.3.0(@types/node@22.10.1)
      ansi-escapes:
        specifier: ^7.1.1
        version: 7.1.1
      chalk:
        specifier: ^5.6.2
        version: 5.6.2
      commander:
        specifier: ^14.0.1
        version: 14.0.1
      figures:
        specifier: ^6.1.0
        version: 6.1.0
      ora:
        specifier: ^9.0.0
        version: 9.0.0
    devDependencies:
      '@types/node':
        specifier: ^22.9.0
        version: 22.10.1
      tsconfig:
        specifier: workspace:*
        version: link:../tsconfig

  packages/init-data-node:
    dependencies:
      '@tma.js/toolkit':
        specifier: workspace:^
        version: link:../toolkit
      '@tma.js/transformers':
        specifier: workspace:^
        version: link:../transformers
      '@tma.js/types':
        specifier: workspace:^
        version: link:../types
      better-promises:
        specifier: ^1.0.0
        version: 1.0.0
      error-kid:
        specifier: ^1.0.2
        version: 1.0.2
      fp-ts:
        specifier: ^2.16.11
        version: 2.16.11
    devDependencies:
      '@types/node':
        specifier: ^22.9.0
        version: 22.10.1
      test-utils:
        specifier: workspace:*
        version: link:../test-utils
      tsconfig:
        specifier: workspace:*
        version: link:../tsconfig

  packages/sdk:
    dependencies:
      '@tma.js/bridge':
        specifier: workspace:^
        version: link:../bridge
      '@tma.js/signals':
        specifier: workspace:^
        version: link:../signals
      '@tma.js/toolkit':
        specifier: workspace:^
        version: link:../toolkit
      '@tma.js/transformers':
        specifier: workspace:^
        version: link:../transformers
      '@tma.js/types':
        specifier: workspace:^
        version: link:../types
      better-promises:
        specifier: ^1.0.0
        version: 1.0.0
      error-kid:
        specifier: ^1.0.2
        version: 1.0.2
      fp-ts:
        specifier: ^2.16.11
        version: 2.16.11
      valibot:
        specifier: ^1.1.0
        version: 1.1.0(typescript@5.9.2)
    devDependencies:
      test-utils:
        specifier: workspace:*
        version: link:../test-utils
      tsconfig:
        specifier: workspace:*
        version: link:../tsconfig

  packages/sdk-react:
    dependencies:
      '@tma.js/sdk':
        specifier: workspace:^
        version: link:../sdk
    devDependencies:
      '@types/react':
        specifier: ^19.0.0
        version: 19.2.2
      react:
        specifier: ^19.0.0
        version: 19.2.0
      tsconfig:
        specifier: workspace:*
        version: link:../tsconfig

  packages/sdk-solid:
    dependencies:
      '@tma.js/sdk':
        specifier: workspace:^
        version: link:../sdk
      solid-js:
        specifier: ^1.0.0
        version: 1.9.3
    devDependencies:
      tsconfig:
        specifier: workspace:*
        version: link:../tsconfig

  packages/sdk-svelte:
    dependencies:
      '@tma.js/sdk':
        specifier: workspace:^
        version: link:../sdk
      svelte:
        specifier: ^5.2.3
        version: 5.41.0
    devDependencies:
      tsconfig:
        specifier: workspace:*
        version: link:../tsconfig

  packages/sdk-vue:
    dependencies:
      '@tma.js/sdk':
        specifier: workspace:^
        version: link:../sdk
      vue:
        specifier: ^3.0.0
        version: 3.5.13(typescript@5.9.2)
    devDependencies:
      tsconfig:
        specifier: workspace:*
        version: link:../tsconfig

  packages/signals:
    devDependencies:
      test-utils:
        specifier: workspace:*
        version: link:../test-utils
      tsconfig:
        specifier: workspace:*
        version: link:../tsconfig

  packages/test-utils:
    devDependencies:
      tsconfig:
        specifier: workspace:*
        version: link:../tsconfig

  packages/toolkit:
    dependencies:
      better-promises:
        specifier: ^1.0.0
        version: 1.0.0
      fp-ts:
        specifier: ^2.16.11
        version: 2.16.11
    devDependencies:
      test-utils:
        specifier: workspace:*
        version: link:../test-utils
      tsconfig:
        specifier: workspace:*
        version: link:../tsconfig

  packages/transformers:
    dependencies:
      '@tma.js/toolkit':
        specifier: workspace:^
        version: link:../toolkit
      '@tma.js/types':
        specifier: workspace:^
        version: link:../types
      fp-ts:
        specifier: ^2.16.11
        version: 2.16.11
      valibot:
        specifier: ^1.1.0
        version: 1.1.0(typescript@5.9.2)
    devDependencies:
      test-utils:
        specifier: workspace:*
        version: link:../test-utils
      tsconfig:
        specifier: workspace:*
        version: link:../tsconfig

  packages/tsconfig: {}

  packages/types:
    devDependencies:
      tsconfig:
        specifier: workspace:*
        version: link:../tsconfig

  playgrounds/custom:
    dependencies:
      '@tma.js/sdk':
        specifier: workspace:*
        version: link:../../packages/sdk
      fp-ts:
        specifier: ^2.16.11
        version: 2.16.11
      tsconfig:
        specifier: workspace:*
        version: link:../../packages/tsconfig
    devDependencies:
      cross-env:
        specifier: ^7.0.3
        version: 7.0.3

packages:

  '@algolia/autocomplete-core@1.17.7':
    resolution: {integrity: sha512-BjiPOW6ks90UKl7TwMv7oNQMnzU+t/wk9mgIDi6b1tXpUek7MW0lbNOUHpvam9pe3lVCf4xPFT+lK7s+e+fs7Q==}

  '@algolia/autocomplete-plugin-algolia-insights@1.17.7':
    resolution: {integrity: sha512-Jca5Ude6yUOuyzjnz57og7Et3aXjbwCSDf/8onLHSQgw1qW3ALl9mrMWaXb5FmPVkV3EtkD2F/+NkT6VHyPu9A==}
    peerDependencies:
      search-insights: '>= 1 < 3'

  '@algolia/autocomplete-preset-algolia@1.17.7':
    resolution: {integrity: sha512-ggOQ950+nwbWROq2MOCIL71RE0DdQZsceqrg32UqnhDz8FlO9rL8ONHNsI2R1MH0tkgVIDKI/D0sMiUchsFdWA==}
    peerDependencies:
      '@algolia/client-search': '>= 4.9.1 < 6'
      algoliasearch: '>= 4.9.1 < 6'

  '@algolia/autocomplete-shared@1.17.7':
    resolution: {integrity: sha512-o/1Vurr42U/qskRSuhBH+VKxMvkkUVTLU6WZQr+L5lGZZLYWyhdzWjW0iGXY7EkwRTjBqvN2EsR81yCTGV/kmg==}
    peerDependencies:
      '@algolia/client-search': '>= 4.9.1 < 6'
      algoliasearch: '>= 4.9.1 < 6'

  '@algolia/client-abtesting@5.14.2':
    resolution: {integrity: sha512-7fq1tWIy1aNJEaNHxWy3EwDkuo4k22+NBnxq9QlYVSLLXtr6HqmAm6bQgNNzGT3vm21iKqWO9efk+HIhEM1SzQ==}
    engines: {node: '>= 14.0.0'}

  '@algolia/client-analytics@5.14.2':
    resolution: {integrity: sha512-5Nm5cOOyAGcY+hKNJVmR2jgoGn1nvoANS8W5EfB8yAaUqUxL3lFNUHSkFafAMTCOcVKNDkZQYjUDbOOfdYJLqw==}
    engines: {node: '>= 14.0.0'}

  '@algolia/client-common@5.14.2':
    resolution: {integrity: sha512-BW1Qzhh9tMKEsWSQQsiOEcHAd6g7zxq9RpPVmyxbDO/O4eA4vyN+Qz5Jzo686kuYdIQKqIPCEtob/JM89tk57g==}
    engines: {node: '>= 14.0.0'}

  '@algolia/client-insights@5.14.2':
    resolution: {integrity: sha512-17zg6pqifKORvvrMIqW6HhwUry9RKRXLgADrgFjZ6PZvGB4oVs12dwRG2/HMrIlpxd9cjeQfdlEgHj6lbAf6QA==}
    engines: {node: '>= 14.0.0'}

  '@algolia/client-personalization@5.14.2':
    resolution: {integrity: sha512-5IYt8vbmTA52xyuaZKFwiRoDPeh7hiOC9aBZqqp9fVs6BU01djI/T8pGJXawvwczltCPYzNsdbllV3rqiDbxmQ==}
    engines: {node: '>= 14.0.0'}

  '@algolia/client-query-suggestions@5.14.2':
    resolution: {integrity: sha512-gvCX/cczU76Bu1sGcxxTdoIwxe+FnuC1IlW9SF/gzxd3ZzsgzBpzD2puIJqt9fHQsjLxVGkJqKev2FtExnJYZg==}
    engines: {node: '>= 14.0.0'}

  '@algolia/client-search@5.14.2':
    resolution: {integrity: sha512-0imdBZDjqxrshw0+eyJUgnkRAbS2W93UQ3BVj8VjN4xQylIMf0fWs72W7MZFdHlH78JJYydevgzqvGMcV0Z1CA==}
    engines: {node: '>= 14.0.0'}

  '@algolia/ingestion@1.14.2':
    resolution: {integrity: sha512-/p4rBNkW0fgCpCwrwre+jHfzlFQsLemgaAQqyui8NPxw95Wgf3p+DKxYzcmh8dygT7ub7FwztTW+uURLX1uqIQ==}
    engines: {node: '>= 14.0.0'}

  '@algolia/monitoring@1.14.2':
    resolution: {integrity: sha512-81R57Y/mS0uNhWpu6cNEfkbkADLW4bP0BNjuPpxAypobv7WzYycUnbMvv1YkN6OsociB4+3M7HfsVzj4Nc09vA==}
    engines: {node: '>= 14.0.0'}

  '@algolia/recommend@5.14.2':
    resolution: {integrity: sha512-OwELnAZxCUyfjYjqsrFmC7Vfa12kqwbDdLUV0oi4j+4pxDsfPgkiZ6iCH2uPw6X8VK88Hl3InPt+RPaZvcrCWg==}
    engines: {node: '>= 14.0.0'}

  '@algolia/requester-browser-xhr@5.14.2':
    resolution: {integrity: sha512-irUvkK+TGBhyivtNCIIbVgNUgbUoHOSk8m/kFX4ddto/PUPmLFRRNNnMHtJ1+OzrJ/uD3Am4FUK2Yt+xgQr05w==}
    engines: {node: '>= 14.0.0'}

  '@algolia/requester-fetch@5.14.2':
    resolution: {integrity: sha512-UNBg5mM4MIYdxPuVjyDL22BC6P87g7WuM91Z1Ky0J19aEGvCSF+oR+9autthROFXdRnAa1rACOjuqn95iBbKpw==}
    engines: {node: '>= 14.0.0'}

  '@algolia/requester-node-http@5.14.2':
    resolution: {integrity: sha512-CTFA03YiLcnpP+JoLRqjHt5pqDHuKWJpLsIBY/60Gmw8pjALZ3TwvbAquRX4Vy+yrin178NxMuU+ilZ54f2IrQ==}
    engines: {node: '>= 14.0.0'}

  '@ampproject/remapping@2.3.0':
    resolution: {integrity: sha512-30iZtAPgz+LTIYoeivqYo853f02jBYSd5uGnGpkFV0M3xOt9aN73erkgYAmZU43x4VfqcnLxW9Kpg3R5LC4YYw==}
    engines: {node: '>=6.0.0'}

  '@babel/code-frame@7.26.2':
    resolution: {integrity: sha512-RJlIHRueQgwWitWgF8OdFYGZX328Ax5BCemNGlqHfplnRT9ESi8JkFlvaVYbS+UubVY6dpv87Fs2u5M29iNFVQ==}
    engines: {node: '>=6.9.0'}

  '@babel/compat-data@7.26.2':
    resolution: {integrity: sha512-Z0WgzSEa+aUcdiJuCIqgujCshpMWgUpgOxXotrYPSA53hA3qopNaqcJpyr0hVb1FeWdnqFA35/fUtXgBK8srQg==}
    engines: {node: '>=6.9.0'}

  '@babel/core@7.26.0':
    resolution: {integrity: sha512-i1SLeK+DzNnQ3LL/CswPCa/E5u4lh1k6IAEphON8F+cXt0t9euTshDru0q7/IqMa1PMPz5RnHuHscF8/ZJsStg==}
    engines: {node: '>=6.9.0'}

  '@babel/generator@7.26.2':
    resolution: {integrity: sha512-zevQbhbau95nkoxSq3f/DC/SC+EEOUZd3DYqfSkMhY2/wfSeaHV1Ew4vk8e+x8lja31IbyuUa2uQ3JONqKbysw==}
    engines: {node: '>=6.9.0'}

  '@babel/helper-compilation-targets@7.25.9':
    resolution: {integrity: sha512-j9Db8Suy6yV/VHa4qzrj9yZfZxhLWQdVnRlXxmKLYlhWUVB1sB2G5sxuWYXk/whHD9iW76PmNzxZ4UCnTQTVEQ==}
    engines: {node: '>=6.9.0'}

  '@babel/helper-module-imports@7.18.6':
    resolution: {integrity: sha512-0NFvs3VkuSYbFi1x2Vd6tKrywq+z/cLeYC/RJNFrIX/30Bf5aiGYbtvGXolEktzJH8o5E5KJ3tT+nkxuuZFVlA==}
    engines: {node: '>=6.9.0'}

  '@babel/helper-module-imports@7.25.9':
    resolution: {integrity: sha512-tnUA4RsrmflIM6W6RFTLFSXITtl0wKjgpnLgXyowocVPrbYrLUXSBXDgTs8BlbmIzIdlBySRQjINYs2BAkiLtw==}
    engines: {node: '>=6.9.0'}

  '@babel/helper-module-transforms@7.26.0':
    resolution: {integrity: sha512-xO+xu6B5K2czEnQye6BHA7DolFFmS3LB7stHZFaOLb1pAwO1HWLS8fXA+eh0A2yIvltPVmx3eNNDBJA2SLHXFw==}
    engines: {node: '>=6.9.0'}
    peerDependencies:
      '@babel/core': ^7.0.0

  '@babel/helper-plugin-utils@7.25.9':
    resolution: {integrity: sha512-kSMlyUVdWe25rEsRGviIgOWnoT/nfABVWlqt9N19/dIPWViAOW2s9wznP5tURbs/IDuNk4gPy3YdYRgH3uxhBw==}
    engines: {node: '>=6.9.0'}

  '@babel/helper-string-parser@7.25.9':
    resolution: {integrity: sha512-4A/SCr/2KLd5jrtOMFzaKjVtAei3+2r/NChoBNoZ3EyP/+GlhoaEGoWOZUmFmoITP7zOJyHIMm+DYRd8o3PvHA==}
    engines: {node: '>=6.9.0'}

  '@babel/helper-validator-identifier@7.25.9':
    resolution: {integrity: sha512-Ed61U6XJc3CVRfkERJWDz4dJwKe7iLmmJsbOGu9wSloNSFttHV0I8g6UAgb7qnK5ly5bGLPd4oXZlxCdANBOWQ==}
    engines: {node: '>=6.9.0'}

  '@babel/helper-validator-option@7.25.9':
    resolution: {integrity: sha512-e/zv1co8pp55dNdEcCynfj9X7nyUKUXoUEwfXqaZt0omVOmDe9oOTdKStH4GmAw6zxMFs50ZayuMfHDKlO7Tfw==}
    engines: {node: '>=6.9.0'}

  '@babel/helpers@7.26.0':
    resolution: {integrity: sha512-tbhNuIxNcVb21pInl3ZSjksLCvgdZy9KwJ8brv993QtIVKJBBkYXz4q4ZbAv31GdnC+R90np23L5FbEBlthAEw==}
    engines: {node: '>=6.9.0'}

  '@babel/parser@7.26.2':
    resolution: {integrity: sha512-DWMCZH9WA4Maitz2q21SRKHo9QXZxkDsbNZoVD62gusNtNBBqDg9i7uOhASfTfIGNzW+O+r7+jAlM8dwphcJKQ==}
    engines: {node: '>=6.0.0'}
    hasBin: true

  '@babel/plugin-syntax-jsx@7.25.9':
    resolution: {integrity: sha512-ld6oezHQMZsZfp6pWtbjaNDF2tiiCYYDqQszHt5VV437lewP9aSi2Of99CK0D0XB21k7FLgnLcmQKyKzynfeAA==}
    engines: {node: '>=6.9.0'}
    peerDependencies:
      '@babel/core': ^7.0.0-0

  '@babel/runtime-corejs3@7.26.0':
    resolution: {integrity: sha512-YXHu5lN8kJCb1LOb9PgV6pvak43X2h4HvRApcN5SdWeaItQOzfn1hgP6jasD6KWQyJDBxrVmA9o9OivlnNJK/w==}
    engines: {node: '>=6.9.0'}

  '@babel/runtime@7.26.0':
    resolution: {integrity: sha512-FDSOghenHTiToteC/QRlv2q3DhPZ/oOXTBoirfWNx1Cx3TMVcGWQtMMmQcSvb/JjpNeGzx8Pq/b4fKEJuWm1sw==}
    engines: {node: '>=6.9.0'}

  '@babel/template@7.25.9':
    resolution: {integrity: sha512-9DGttpmPvIxBb/2uwpVo3dqJ+O6RooAFOS+lB+xDqoE2PVCE8nfoHMdZLpfCQRLwvohzXISPZcgxt80xLfsuwg==}
    engines: {node: '>=6.9.0'}

  '@babel/traverse@7.25.9':
    resolution: {integrity: sha512-ZCuvfwOwlz/bawvAuvcj8rrithP2/N55Tzz342AkTvq4qaWbGfmCk/tKhNaV2cthijKrPAA8SRJV5WWe7IBMJw==}
    engines: {node: '>=6.9.0'}

  '@babel/types@7.26.0':
    resolution: {integrity: sha512-Z/yiTPj+lDVnF7lWeKCIJzaIkI0vYO87dMpZ4bg4TDrFe4XXLFWL1TbXU27gBP3QccxV9mZICCrnjnYlJjXHOA==}
    engines: {node: '>=6.9.0'}

  '@bcoe/v8-coverage@1.0.2':
    resolution: {integrity: sha512-6zABk/ECA/QYSCQ1NGiVwwbQerUCZ+TQbp64Q3AgmfNvurHH0j8TtXa1qbShXA6qqkpAj4V5W8pP6mLe1mcMqA==}
    engines: {node: '>=18'}

  '@changesets/apply-release-plan@7.0.6':
    resolution: {integrity: sha512-TKhVLtiwtQOgMAC0fCJfmv93faiViKSDqr8oMEqrnNs99gtSC1sZh/aEMS9a+dseU1ESZRCK+ofLgGY7o0fw/Q==}

  '@changesets/assemble-release-plan@6.0.5':
    resolution: {integrity: sha512-IgvBWLNKZd6k4t72MBTBK3nkygi0j3t3zdC1zrfusYo0KpdsvnDjrMM9vPnTCLCMlfNs55jRL4gIMybxa64FCQ==}

  '@changesets/changelog-git@0.2.0':
    resolution: {integrity: sha512-bHOx97iFI4OClIT35Lok3sJAwM31VbUM++gnMBV16fdbtBhgYu4dxsphBF/0AZZsyAHMrnM0yFcj5gZM1py6uQ==}

  '@changesets/cli@2.27.10':
    resolution: {integrity: sha512-PfeXjvs9OfQJV8QSFFHjwHX3QnUL9elPEQ47SgkiwzLgtKGyuikWjrdM+lO9MXzOE22FO9jEGkcs4b+B6D6X0Q==}
    hasBin: true

  '@changesets/config@3.0.4':
    resolution: {integrity: sha512-+DiIwtEBpvvv1z30f8bbOsUQGuccnZl9KRKMM/LxUHuDu5oEjmN+bJQ1RIBKNJjfYMQn8RZzoPiX0UgPaLQyXw==}

  '@changesets/errors@0.2.0':
    resolution: {integrity: sha512-6BLOQUscTpZeGljvyQXlWOItQyU71kCdGz7Pi8H8zdw6BI0g3m43iL4xKUVPWtG+qrrL9DTjpdn8eYuCQSRpow==}

  '@changesets/get-dependents-graph@2.1.2':
    resolution: {integrity: sha512-sgcHRkiBY9i4zWYBwlVyAjEM9sAzs4wYVwJUdnbDLnVG3QwAaia1Mk5P8M7kraTOZN+vBET7n8KyB0YXCbFRLQ==}

  '@changesets/get-release-plan@4.0.5':
    resolution: {integrity: sha512-E6wW7JoSMcctdVakut0UB76FrrN3KIeJSXvB+DHMFo99CnC3ZVnNYDCVNClMlqAhYGmLmAj77QfApaI3ca4Fkw==}

  '@changesets/get-version-range-type@0.4.0':
    resolution: {integrity: sha512-hwawtob9DryoGTpixy1D3ZXbGgJu1Rhr+ySH2PvTLHvkZuQ7sRT4oQwMh0hbqZH1weAooedEjRsbrWcGLCeyVQ==}

  '@changesets/git@3.0.2':
    resolution: {integrity: sha512-r1/Kju9Y8OxRRdvna+nxpQIsMsRQn9dhhAZt94FLDeu0Hij2hnOozW8iqnHBgvu+KdnJppCveQwK4odwfw/aWQ==}

  '@changesets/logger@0.1.1':
    resolution: {integrity: sha512-OQtR36ZlnuTxKqoW4Sv6x5YIhOmClRd5pWsjZsddYxpWs517R0HkyiefQPIytCVh4ZcC5x9XaG8KTdd5iRQUfg==}

  '@changesets/parse@0.4.0':
    resolution: {integrity: sha512-TS/9KG2CdGXS27S+QxbZXgr8uPsP4yNJYb4BC2/NeFUj80Rni3TeD2qwWmabymxmrLo7JEsytXH1FbpKTbvivw==}

  '@changesets/pre@2.0.1':
    resolution: {integrity: sha512-vvBJ/If4jKM4tPz9JdY2kGOgWmCowUYOi5Ycv8dyLnEE8FgpYYUo1mgJZxcdtGGP3aG8rAQulGLyyXGSLkIMTQ==}

  '@changesets/read@0.6.2':
    resolution: {integrity: sha512-wjfQpJvryY3zD61p8jR87mJdyx2FIhEcdXhKUqkja87toMrP/3jtg/Yg29upN+N4Ckf525/uvV7a4tzBlpk6gg==}

  '@changesets/should-skip-package@0.1.1':
    resolution: {integrity: sha512-H9LjLbF6mMHLtJIc/eHR9Na+MifJ3VxtgP/Y+XLn4BF7tDTEN1HNYtH6QMcjP1uxp9sjaFYmW8xqloaCi/ckTg==}

  '@changesets/types@4.1.0':
    resolution: {integrity: sha512-LDQvVDv5Kb50ny2s25Fhm3d9QSZimsoUGBsUioj6MC3qbMUCuC8GPIvk/M6IvXx3lYhAs0lwWUQLb+VIEUCECw==}

  '@changesets/types@6.0.0':
    resolution: {integrity: sha512-b1UkfNulgKoWfqyHtzKS5fOZYSJO+77adgL7DLRDr+/7jhChN+QcHnbjiQVOz/U+Ts3PGNySq7diAItzDgugfQ==}

  '@changesets/write@0.3.2':
    resolution: {integrity: sha512-kDxDrPNpUgsjDbWBvUo27PzKX4gqeKOlhibaOXDJA6kuBisGqNHv/HwGJrAu8U/dSf8ZEFIeHIPtvSlZI1kULw==}

  '@commitlint/config-validator@19.5.0':
    resolution: {integrity: sha512-CHtj92H5rdhKt17RmgALhfQt95VayrUo2tSqY9g2w+laAXyk7K/Ef6uPm9tn5qSIwSmrLjKaXK9eiNuxmQrDBw==}
    engines: {node: '>=v18'}

  '@commitlint/execute-rule@19.5.0':
    resolution: {integrity: sha512-aqyGgytXhl2ejlk+/rfgtwpPexYyri4t8/n4ku6rRJoRhGZpLFMqrZ+YaubeGysCP6oz4mMA34YSTaSOKEeNrg==}
    engines: {node: '>=v18'}

  '@commitlint/load@19.5.0':
    resolution: {integrity: sha512-INOUhkL/qaKqwcTUvCE8iIUf5XHsEPCLY9looJ/ipzi7jtGhgmtH7OOFiNvwYgH7mA8osUWOUDV8t4E2HAi4xA==}
    engines: {node: '>=v18'}

  '@commitlint/resolve-extends@19.5.0':
    resolution: {integrity: sha512-CU/GscZhCUsJwcKTJS9Ndh3AKGZTNFIOoQB2n8CmFnizE0VnEuJoum+COW+C1lNABEeqk6ssfc1Kkalm4bDklA==}
    engines: {node: '>=v18'}

  '@commitlint/types@19.5.0':
    resolution: {integrity: sha512-DSHae2obMSMkAtTBSOulg5X7/z+rGLxcXQIkg3OmWvY6wifojge5uVMydfhUvs7yQj+V7jNmRZ2Xzl8GJyqRgg==}
    engines: {node: '>=v18'}

  '@cspotcode/source-map-support@0.8.1':
    resolution: {integrity: sha512-IchNf6dN4tHoMFIn/7OE8LWZ19Y6q/67Bmf6vnGREv8RSbBVb9LPJxEcnwrcwX6ixSvaiGoomAUvu4YSxXrVgw==}
    engines: {node: '>=12'}

  '@docsearch/css@3.8.0':
    resolution: {integrity: sha512-pieeipSOW4sQ0+bE5UFC51AOZp9NGxg89wAlZ1BAQFaiRAGK1IKUaPQ0UGZeNctJXyqZ1UvBtOQh2HH+U5GtmA==}

  '@docsearch/js@3.8.0':
    resolution: {integrity: sha512-PVuV629f5UcYRtBWqK7ID6vNL5647+2ADJypwTjfeBIrJfwPuHtzLy39hMGMfFK+0xgRyhTR0FZ83EkdEraBlg==}

  '@docsearch/react@3.8.0':
    resolution: {integrity: sha512-WnFK720+iwTVt94CxY3u+FgX6exb3BfN5kE9xUY6uuAH/9W/UFboBZFLlrw/zxFRHoHZCOXRtOylsXF+6LHI+Q==}
    peerDependencies:
      '@types/react': '>= 16.8.0 < 19.0.0'
      react: '>= 16.8.0 < 19.0.0'
      react-dom: '>= 16.8.0 < 19.0.0'
      search-insights: '>= 1 < 3'
    peerDependenciesMeta:
      '@types/react':
        optional: true
      react:
        optional: true
      react-dom:
        optional: true
      search-insights:
        optional: true

  '@esbuild/aix-ppc64@0.21.5':
    resolution: {integrity: sha512-1SDgH6ZSPTlggy1yI6+Dbkiz8xzpHJEVAlF/AM1tHPLsf5STom9rwtjE4hKAF20FfXXNTFqEYXyJNWh1GiZedQ==}
    engines: {node: '>=12'}
    cpu: [ppc64]
    os: [aix]

  '@esbuild/aix-ppc64@0.23.1':
    resolution: {integrity: sha512-6VhYk1diRqrhBAqpJEdjASR/+WVRtfjpqKuNw11cLiaWpAT/Uu+nokB+UJnevzy/P9C/ty6AOe0dwueMrGh/iQ==}
    engines: {node: '>=18'}
    cpu: [ppc64]
    os: [aix]

  '@esbuild/aix-ppc64@0.25.3':
    resolution: {integrity: sha512-W8bFfPA8DowP8l//sxjJLSLkD8iEjMc7cBVyP+u4cEv9sM7mdUCkgsj+t0n/BWPFtv7WWCN5Yzj0N6FJNUUqBQ==}
    engines: {node: '>=18'}
    cpu: [ppc64]
    os: [aix]

  '@esbuild/android-arm64@0.21.5':
    resolution: {integrity: sha512-c0uX9VAUBQ7dTDCjq+wdyGLowMdtR/GoC2U5IYk/7D1H1JYC0qseD7+11iMP2mRLN9RcCMRcjC4YMclCzGwS/A==}
    engines: {node: '>=12'}
    cpu: [arm64]
    os: [android]

  '@esbuild/android-arm64@0.23.1':
    resolution: {integrity: sha512-xw50ipykXcLstLeWH7WRdQuysJqejuAGPd30vd1i5zSyKK3WE+ijzHmLKxdiCMtH1pHz78rOg0BKSYOSB/2Khw==}
    engines: {node: '>=18'}
    cpu: [arm64]
    os: [android]

  '@esbuild/android-arm64@0.25.3':
    resolution: {integrity: sha512-XelR6MzjlZuBM4f5z2IQHK6LkK34Cvv6Rj2EntER3lwCBFdg6h2lKbtRjpTTsdEjD/WSe1q8UyPBXP1x3i/wYQ==}
    engines: {node: '>=18'}
    cpu: [arm64]
    os: [android]

  '@esbuild/android-arm@0.21.5':
    resolution: {integrity: sha512-vCPvzSjpPHEi1siZdlvAlsPxXl7WbOVUBBAowWug4rJHb68Ox8KualB+1ocNvT5fjv6wpkX6o/iEpbDrf68zcg==}
    engines: {node: '>=12'}
    cpu: [arm]
    os: [android]

  '@esbuild/android-arm@0.23.1':
    resolution: {integrity: sha512-uz6/tEy2IFm9RYOyvKl88zdzZfwEfKZmnX9Cj1BHjeSGNuGLuMD1kR8y5bteYmwqKm1tj8m4cb/aKEorr6fHWQ==}
    engines: {node: '>=18'}
    cpu: [arm]
    os: [android]

  '@esbuild/android-arm@0.25.3':
    resolution: {integrity: sha512-PuwVXbnP87Tcff5I9ngV0lmiSu40xw1At6i3GsU77U7cjDDB4s0X2cyFuBiDa1SBk9DnvWwnGvVaGBqoFWPb7A==}
    engines: {node: '>=18'}
    cpu: [arm]
    os: [android]

  '@esbuild/android-x64@0.21.5':
    resolution: {integrity: sha512-D7aPRUUNHRBwHxzxRvp856rjUHRFW1SdQATKXH2hqA0kAZb1hKmi02OpYRacl0TxIGz/ZmXWlbZgjwWYaCakTA==}
    engines: {node: '>=12'}
    cpu: [x64]
    os: [android]

  '@esbuild/android-x64@0.23.1':
    resolution: {integrity: sha512-nlN9B69St9BwUoB+jkyU090bru8L0NA3yFvAd7k8dNsVH8bi9a8cUAUSEcEEgTp2z3dbEDGJGfP6VUnkQnlReg==}
    engines: {node: '>=18'}
    cpu: [x64]
    os: [android]

  '@esbuild/android-x64@0.25.3':
    resolution: {integrity: sha512-ogtTpYHT/g1GWS/zKM0cc/tIebFjm1F9Aw1boQ2Y0eUQ+J89d0jFY//s9ei9jVIlkYi8AfOjiixcLJSGNSOAdQ==}
    engines: {node: '>=18'}
    cpu: [x64]
    os: [android]

  '@esbuild/darwin-arm64@0.21.5':
    resolution: {integrity: sha512-DwqXqZyuk5AiWWf3UfLiRDJ5EDd49zg6O9wclZ7kUMv2WRFr4HKjXp/5t8JZ11QbQfUS6/cRCKGwYhtNAY88kQ==}
    engines: {node: '>=12'}
    cpu: [arm64]
    os: [darwin]

  '@esbuild/darwin-arm64@0.23.1':
    resolution: {integrity: sha512-YsS2e3Wtgnw7Wq53XXBLcV6JhRsEq8hkfg91ESVadIrzr9wO6jJDMZnCQbHm1Guc5t/CdDiFSSfWP58FNuvT3Q==}
    engines: {node: '>=18'}
    cpu: [arm64]
    os: [darwin]

  '@esbuild/darwin-arm64@0.25.3':
    resolution: {integrity: sha512-eESK5yfPNTqpAmDfFWNsOhmIOaQA59tAcF/EfYvo5/QWQCzXn5iUSOnqt3ra3UdzBv073ykTtmeLJZGt3HhA+w==}
    engines: {node: '>=18'}
    cpu: [arm64]
    os: [darwin]

  '@esbuild/darwin-x64@0.21.5':
    resolution: {integrity: sha512-se/JjF8NlmKVG4kNIuyWMV/22ZaerB+qaSi5MdrXtd6R08kvs2qCN4C09miupktDitvh8jRFflwGFBQcxZRjbw==}
    engines: {node: '>=12'}
    cpu: [x64]
    os: [darwin]

  '@esbuild/darwin-x64@0.23.1':
    resolution: {integrity: sha512-aClqdgTDVPSEGgoCS8QDG37Gu8yc9lTHNAQlsztQ6ENetKEO//b8y31MMu2ZaPbn4kVsIABzVLXYLhCGekGDqw==}
    engines: {node: '>=18'}
    cpu: [x64]
    os: [darwin]

  '@esbuild/darwin-x64@0.25.3':
    resolution: {integrity: sha512-Kd8glo7sIZtwOLcPbW0yLpKmBNWMANZhrC1r6K++uDR2zyzb6AeOYtI6udbtabmQpFaxJ8uduXMAo1gs5ozz8A==}
    engines: {node: '>=18'}
    cpu: [x64]
    os: [darwin]

  '@esbuild/freebsd-arm64@0.21.5':
    resolution: {integrity: sha512-5JcRxxRDUJLX8JXp/wcBCy3pENnCgBR9bN6JsY4OmhfUtIHe3ZW0mawA7+RDAcMLrMIZaf03NlQiX9DGyB8h4g==}
    engines: {node: '>=12'}
    cpu: [arm64]
    os: [freebsd]

  '@esbuild/freebsd-arm64@0.23.1':
    resolution: {integrity: sha512-h1k6yS8/pN/NHlMl5+v4XPfikhJulk4G+tKGFIOwURBSFzE8bixw1ebjluLOjfwtLqY0kewfjLSrO6tN2MgIhA==}
    engines: {node: '>=18'}
    cpu: [arm64]
    os: [freebsd]

  '@esbuild/freebsd-arm64@0.25.3':
    resolution: {integrity: sha512-EJiyS70BYybOBpJth3M0KLOus0n+RRMKTYzhYhFeMwp7e/RaajXvP+BWlmEXNk6uk+KAu46j/kaQzr6au+JcIw==}
    engines: {node: '>=18'}
    cpu: [arm64]
    os: [freebsd]

  '@esbuild/freebsd-x64@0.21.5':
    resolution: {integrity: sha512-J95kNBj1zkbMXtHVH29bBriQygMXqoVQOQYA+ISs0/2l3T9/kj42ow2mpqerRBxDJnmkUDCaQT/dfNXWX/ZZCQ==}
    engines: {node: '>=12'}
    cpu: [x64]
    os: [freebsd]

  '@esbuild/freebsd-x64@0.23.1':
    resolution: {integrity: sha512-lK1eJeyk1ZX8UklqFd/3A60UuZ/6UVfGT2LuGo3Wp4/z7eRTRYY+0xOu2kpClP+vMTi9wKOfXi2vjUpO1Ro76g==}
    engines: {node: '>=18'}
    cpu: [x64]
    os: [freebsd]

  '@esbuild/freebsd-x64@0.25.3':
    resolution: {integrity: sha512-Q+wSjaLpGxYf7zC0kL0nDlhsfuFkoN+EXrx2KSB33RhinWzejOd6AvgmP5JbkgXKmjhmpfgKZq24pneodYqE8Q==}
    engines: {node: '>=18'}
    cpu: [x64]
    os: [freebsd]

  '@esbuild/linux-arm64@0.21.5':
    resolution: {integrity: sha512-ibKvmyYzKsBeX8d8I7MH/TMfWDXBF3db4qM6sy+7re0YXya+K1cem3on9XgdT2EQGMu4hQyZhan7TeQ8XkGp4Q==}
    engines: {node: '>=12'}
    cpu: [arm64]
    os: [linux]

  '@esbuild/linux-arm64@0.23.1':
    resolution: {integrity: sha512-/93bf2yxencYDnItMYV/v116zff6UyTjo4EtEQjUBeGiVpMmffDNUyD9UN2zV+V3LRV3/on4xdZ26NKzn6754g==}
    engines: {node: '>=18'}
    cpu: [arm64]
    os: [linux]

  '@esbuild/linux-arm64@0.25.3':
    resolution: {integrity: sha512-xCUgnNYhRD5bb1C1nqrDV1PfkwgbswTTBRbAd8aH5PhYzikdf/ddtsYyMXFfGSsb/6t6QaPSzxtbfAZr9uox4A==}
    engines: {node: '>=18'}
    cpu: [arm64]
    os: [linux]

  '@esbuild/linux-arm@0.21.5':
    resolution: {integrity: sha512-bPb5AHZtbeNGjCKVZ9UGqGwo8EUu4cLq68E95A53KlxAPRmUyYv2D6F0uUI65XisGOL1hBP5mTronbgo+0bFcA==}
    engines: {node: '>=12'}
    cpu: [arm]
    os: [linux]

  '@esbuild/linux-arm@0.23.1':
    resolution: {integrity: sha512-CXXkzgn+dXAPs3WBwE+Kvnrf4WECwBdfjfeYHpMeVxWE0EceB6vhWGShs6wi0IYEqMSIzdOF1XjQ/Mkm5d7ZdQ==}
    engines: {node: '>=18'}
    cpu: [arm]
    os: [linux]

  '@esbuild/linux-arm@0.25.3':
    resolution: {integrity: sha512-dUOVmAUzuHy2ZOKIHIKHCm58HKzFqd+puLaS424h6I85GlSDRZIA5ycBixb3mFgM0Jdh+ZOSB6KptX30DD8YOQ==}
    engines: {node: '>=18'}
    cpu: [arm]
    os: [linux]

  '@esbuild/linux-ia32@0.21.5':
    resolution: {integrity: sha512-YvjXDqLRqPDl2dvRODYmmhz4rPeVKYvppfGYKSNGdyZkA01046pLWyRKKI3ax8fbJoK5QbxblURkwK/MWY18Tg==}
    engines: {node: '>=12'}
    cpu: [ia32]
    os: [linux]

  '@esbuild/linux-ia32@0.23.1':
    resolution: {integrity: sha512-VTN4EuOHwXEkXzX5nTvVY4s7E/Krz7COC8xkftbbKRYAl96vPiUssGkeMELQMOnLOJ8k3BY1+ZY52tttZnHcXQ==}
    engines: {node: '>=18'}
    cpu: [ia32]
    os: [linux]

  '@esbuild/linux-ia32@0.25.3':
    resolution: {integrity: sha512-yplPOpczHOO4jTYKmuYuANI3WhvIPSVANGcNUeMlxH4twz/TeXuzEP41tGKNGWJjuMhotpGabeFYGAOU2ummBw==}
    engines: {node: '>=18'}
    cpu: [ia32]
    os: [linux]

  '@esbuild/linux-loong64@0.21.5':
    resolution: {integrity: sha512-uHf1BmMG8qEvzdrzAqg2SIG/02+4/DHB6a9Kbya0XDvwDEKCoC8ZRWI5JJvNdUjtciBGFQ5PuBlpEOXQj+JQSg==}
    engines: {node: '>=12'}
    cpu: [loong64]
    os: [linux]

  '@esbuild/linux-loong64@0.23.1':
    resolution: {integrity: sha512-Vx09LzEoBa5zDnieH8LSMRToj7ir/Jeq0Gu6qJ/1GcBq9GkfoEAoXvLiW1U9J1qE/Y/Oyaq33w5p2ZWrNNHNEw==}
    engines: {node: '>=18'}
    cpu: [loong64]
    os: [linux]

  '@esbuild/linux-loong64@0.25.3':
    resolution: {integrity: sha512-P4BLP5/fjyihmXCELRGrLd793q/lBtKMQl8ARGpDxgzgIKJDRJ/u4r1A/HgpBpKpKZelGct2PGI4T+axcedf6g==}
    engines: {node: '>=18'}
    cpu: [loong64]
    os: [linux]

  '@esbuild/linux-mips64el@0.21.5':
    resolution: {integrity: sha512-IajOmO+KJK23bj52dFSNCMsz1QP1DqM6cwLUv3W1QwyxkyIWecfafnI555fvSGqEKwjMXVLokcV5ygHW5b3Jbg==}
    engines: {node: '>=12'}
    cpu: [mips64el]
    os: [linux]

  '@esbuild/linux-mips64el@0.23.1':
    resolution: {integrity: sha512-nrFzzMQ7W4WRLNUOU5dlWAqa6yVeI0P78WKGUo7lg2HShq/yx+UYkeNSE0SSfSure0SqgnsxPvmAUu/vu0E+3Q==}
    engines: {node: '>=18'}
    cpu: [mips64el]
    os: [linux]

  '@esbuild/linux-mips64el@0.25.3':
    resolution: {integrity: sha512-eRAOV2ODpu6P5divMEMa26RRqb2yUoYsuQQOuFUexUoQndm4MdpXXDBbUoKIc0iPa4aCO7gIhtnYomkn2x+bag==}
    engines: {node: '>=18'}
    cpu: [mips64el]
    os: [linux]

  '@esbuild/linux-ppc64@0.21.5':
    resolution: {integrity: sha512-1hHV/Z4OEfMwpLO8rp7CvlhBDnjsC3CttJXIhBi+5Aj5r+MBvy4egg7wCbe//hSsT+RvDAG7s81tAvpL2XAE4w==}
    engines: {node: '>=12'}
    cpu: [ppc64]
    os: [linux]

  '@esbuild/linux-ppc64@0.23.1':
    resolution: {integrity: sha512-dKN8fgVqd0vUIjxuJI6P/9SSSe/mB9rvA98CSH2sJnlZ/OCZWO1DJvxj8jvKTfYUdGfcq2dDxoKaC6bHuTlgcw==}
    engines: {node: '>=18'}
    cpu: [ppc64]
    os: [linux]

  '@esbuild/linux-ppc64@0.25.3':
    resolution: {integrity: sha512-ZC4jV2p7VbzTlnl8nZKLcBkfzIf4Yad1SJM4ZMKYnJqZFD4rTI+pBG65u8ev4jk3/MPwY9DvGn50wi3uhdaghg==}
    engines: {node: '>=18'}
    cpu: [ppc64]
    os: [linux]

  '@esbuild/linux-riscv64@0.21.5':
    resolution: {integrity: sha512-2HdXDMd9GMgTGrPWnJzP2ALSokE/0O5HhTUvWIbD3YdjME8JwvSCnNGBnTThKGEB91OZhzrJ4qIIxk/SBmyDDA==}
    engines: {node: '>=12'}
    cpu: [riscv64]
    os: [linux]

  '@esbuild/linux-riscv64@0.23.1':
    resolution: {integrity: sha512-5AV4Pzp80fhHL83JM6LoA6pTQVWgB1HovMBsLQ9OZWLDqVY8MVobBXNSmAJi//Csh6tcY7e7Lny2Hg1tElMjIA==}
    engines: {node: '>=18'}
    cpu: [riscv64]
    os: [linux]

  '@esbuild/linux-riscv64@0.25.3':
    resolution: {integrity: sha512-LDDODcFzNtECTrUUbVCs6j9/bDVqy7DDRsuIXJg6so+mFksgwG7ZVnTruYi5V+z3eE5y+BJZw7VvUadkbfg7QA==}
    engines: {node: '>=18'}
    cpu: [riscv64]
    os: [linux]

  '@esbuild/linux-s390x@0.21.5':
    resolution: {integrity: sha512-zus5sxzqBJD3eXxwvjN1yQkRepANgxE9lgOW2qLnmr8ikMTphkjgXu1HR01K4FJg8h1kEEDAqDcZQtbrRnB41A==}
    engines: {node: '>=12'}
    cpu: [s390x]
    os: [linux]

  '@esbuild/linux-s390x@0.23.1':
    resolution: {integrity: sha512-9ygs73tuFCe6f6m/Tb+9LtYxWR4c9yg7zjt2cYkjDbDpV/xVn+68cQxMXCjUpYwEkze2RcU/rMnfIXNRFmSoDw==}
    engines: {node: '>=18'}
    cpu: [s390x]
    os: [linux]

  '@esbuild/linux-s390x@0.25.3':
    resolution: {integrity: sha512-s+w/NOY2k0yC2p9SLen+ymflgcpRkvwwa02fqmAwhBRI3SC12uiS10edHHXlVWwfAagYSY5UpmT/zISXPMW3tQ==}
    engines: {node: '>=18'}
    cpu: [s390x]
    os: [linux]

  '@esbuild/linux-x64@0.21.5':
    resolution: {integrity: sha512-1rYdTpyv03iycF1+BhzrzQJCdOuAOtaqHTWJZCWvijKD2N5Xu0TtVC8/+1faWqcP9iBCWOmjmhoH94dH82BxPQ==}
    engines: {node: '>=12'}
    cpu: [x64]
    os: [linux]

  '@esbuild/linux-x64@0.23.1':
    resolution: {integrity: sha512-EV6+ovTsEXCPAp58g2dD68LxoP/wK5pRvgy0J/HxPGB009omFPv3Yet0HiaqvrIrgPTBuC6wCH1LTOY91EO5hQ==}
    engines: {node: '>=18'}
    cpu: [x64]
    os: [linux]

  '@esbuild/linux-x64@0.25.3':
    resolution: {integrity: sha512-nQHDz4pXjSDC6UfOE1Fw9Q8d6GCAd9KdvMZpfVGWSJztYCarRgSDfOVBY5xwhQXseiyxapkiSJi/5/ja8mRFFA==}
    engines: {node: '>=18'}
    cpu: [x64]
    os: [linux]

  '@esbuild/netbsd-arm64@0.25.3':
    resolution: {integrity: sha512-1QaLtOWq0mzK6tzzp0jRN3eccmN3hezey7mhLnzC6oNlJoUJz4nym5ZD7mDnS/LZQgkrhEbEiTn515lPeLpgWA==}
    engines: {node: '>=18'}
    cpu: [arm64]
    os: [netbsd]

  '@esbuild/netbsd-x64@0.21.5':
    resolution: {integrity: sha512-Woi2MXzXjMULccIwMnLciyZH4nCIMpWQAs049KEeMvOcNADVxo0UBIQPfSmxB3CWKedngg7sWZdLvLczpe0tLg==}
    engines: {node: '>=12'}
    cpu: [x64]
    os: [netbsd]

  '@esbuild/netbsd-x64@0.23.1':
    resolution: {integrity: sha512-aevEkCNu7KlPRpYLjwmdcuNz6bDFiE7Z8XC4CPqExjTvrHugh28QzUXVOZtiYghciKUacNktqxdpymplil1beA==}
    engines: {node: '>=18'}
    cpu: [x64]
    os: [netbsd]

  '@esbuild/netbsd-x64@0.25.3':
    resolution: {integrity: sha512-i5Hm68HXHdgv8wkrt+10Bc50zM0/eonPb/a/OFVfB6Qvpiirco5gBA5bz7S2SHuU+Y4LWn/zehzNX14Sp4r27g==}
    engines: {node: '>=18'}
    cpu: [x64]
    os: [netbsd]

  '@esbuild/openbsd-arm64@0.23.1':
    resolution: {integrity: sha512-3x37szhLexNA4bXhLrCC/LImN/YtWis6WXr1VESlfVtVeoFJBRINPJ3f0a/6LV8zpikqoUg4hyXw0sFBt5Cr+Q==}
    engines: {node: '>=18'}
    cpu: [arm64]
    os: [openbsd]

  '@esbuild/openbsd-arm64@0.25.3':
    resolution: {integrity: sha512-zGAVApJEYTbOC6H/3QBr2mq3upG/LBEXr85/pTtKiv2IXcgKV0RT0QA/hSXZqSvLEpXeIxah7LczB4lkiYhTAQ==}
    engines: {node: '>=18'}
    cpu: [arm64]
    os: [openbsd]

  '@esbuild/openbsd-x64@0.21.5':
    resolution: {integrity: sha512-HLNNw99xsvx12lFBUwoT8EVCsSvRNDVxNpjZ7bPn947b8gJPzeHWyNVhFsaerc0n3TsbOINvRP2byTZ5LKezow==}
    engines: {node: '>=12'}
    cpu: [x64]
    os: [openbsd]

  '@esbuild/openbsd-x64@0.23.1':
    resolution: {integrity: sha512-aY2gMmKmPhxfU+0EdnN+XNtGbjfQgwZj43k8G3fyrDM/UdZww6xrWxmDkuz2eCZchqVeABjV5BpildOrUbBTqA==}
    engines: {node: '>=18'}
    cpu: [x64]
    os: [openbsd]

  '@esbuild/openbsd-x64@0.25.3':
    resolution: {integrity: sha512-fpqctI45NnCIDKBH5AXQBsD0NDPbEFczK98hk/aa6HJxbl+UtLkJV2+Bvy5hLSLk3LHmqt0NTkKNso1A9y1a4w==}
    engines: {node: '>=18'}
    cpu: [x64]
    os: [openbsd]

  '@esbuild/sunos-x64@0.21.5':
    resolution: {integrity: sha512-6+gjmFpfy0BHU5Tpptkuh8+uw3mnrvgs+dSPQXQOv3ekbordwnzTVEb4qnIvQcYXq6gzkyTnoZ9dZG+D4garKg==}
    engines: {node: '>=12'}
    cpu: [x64]
    os: [sunos]

  '@esbuild/sunos-x64@0.23.1':
    resolution: {integrity: sha512-RBRT2gqEl0IKQABT4XTj78tpk9v7ehp+mazn2HbUeZl1YMdaGAQqhapjGTCe7uw7y0frDi4gS0uHzhvpFuI1sA==}
    engines: {node: '>=18'}
    cpu: [x64]
    os: [sunos]

  '@esbuild/sunos-x64@0.25.3':
    resolution: {integrity: sha512-ROJhm7d8bk9dMCUZjkS8fgzsPAZEjtRJqCAmVgB0gMrvG7hfmPmz9k1rwO4jSiblFjYmNvbECL9uhaPzONMfgA==}
    engines: {node: '>=18'}
    cpu: [x64]
    os: [sunos]

  '@esbuild/win32-arm64@0.21.5':
    resolution: {integrity: sha512-Z0gOTd75VvXqyq7nsl93zwahcTROgqvuAcYDUr+vOv8uHhNSKROyU961kgtCD1e95IqPKSQKH7tBTslnS3tA8A==}
    engines: {node: '>=12'}
    cpu: [arm64]
    os: [win32]

  '@esbuild/win32-arm64@0.23.1':
    resolution: {integrity: sha512-4O+gPR5rEBe2FpKOVyiJ7wNDPA8nGzDuJ6gN4okSA1gEOYZ67N8JPk58tkWtdtPeLz7lBnY6I5L3jdsr3S+A6A==}
    engines: {node: '>=18'}
    cpu: [arm64]
    os: [win32]

  '@esbuild/win32-arm64@0.25.3':
    resolution: {integrity: sha512-YWcow8peiHpNBiIXHwaswPnAXLsLVygFwCB3A7Bh5jRkIBFWHGmNQ48AlX4xDvQNoMZlPYzjVOQDYEzWCqufMQ==}
    engines: {node: '>=18'}
    cpu: [arm64]
    os: [win32]

  '@esbuild/win32-ia32@0.21.5':
    resolution: {integrity: sha512-SWXFF1CL2RVNMaVs+BBClwtfZSvDgtL//G/smwAc5oVK/UPu2Gu9tIaRgFmYFFKrmg3SyAjSrElf0TiJ1v8fYA==}
    engines: {node: '>=12'}
    cpu: [ia32]
    os: [win32]

  '@esbuild/win32-ia32@0.23.1':
    resolution: {integrity: sha512-BcaL0Vn6QwCwre3Y717nVHZbAa4UBEigzFm6VdsVdT/MbZ38xoj1X9HPkZhbmaBGUD1W8vxAfffbDe8bA6AKnQ==}
    engines: {node: '>=18'}
    cpu: [ia32]
    os: [win32]

  '@esbuild/win32-ia32@0.25.3':
    resolution: {integrity: sha512-qspTZOIGoXVS4DpNqUYUs9UxVb04khS1Degaw/MnfMe7goQ3lTfQ13Vw4qY/Nj0979BGvMRpAYbs/BAxEvU8ew==}
    engines: {node: '>=18'}
    cpu: [ia32]
    os: [win32]

  '@esbuild/win32-x64@0.21.5':
    resolution: {integrity: sha512-tQd/1efJuzPC6rCFwEvLtci/xNFcTZknmXs98FYDfGE4wP9ClFV98nyKrzJKVPMhdDnjzLhdUyMX4PsQAPjwIw==}
    engines: {node: '>=12'}
    cpu: [x64]
    os: [win32]

  '@esbuild/win32-x64@0.23.1':
    resolution: {integrity: sha512-BHpFFeslkWrXWyUPnbKm+xYYVYruCinGcftSBaa8zoF9hZO4BcSCFUvHVTtzpIY6YzUnYtuEhZ+C9iEXjxnasg==}
    engines: {node: '>=18'}
    cpu: [x64]
    os: [win32]

  '@esbuild/win32-x64@0.25.3':
    resolution: {integrity: sha512-ICgUR+kPimx0vvRzf+N/7L7tVSQeE3BYY+NhHRHXS1kBuPO7z2+7ea2HbhDyZdTephgvNvKrlDDKUexuCVBVvg==}
    engines: {node: '>=18'}
    cpu: [x64]
    os: [win32]

  '@eslint-community/eslint-utils@4.4.1':
    resolution: {integrity: sha512-s3O3waFUrMV8P/XaF/+ZTp1X9XBZW1a4B97ZnjQF2KYWaFD2A8KyFBsrsfSjEmjn3RGWAIuvlneuZm3CUK3jbA==}
    engines: {node: ^12.22.0 || ^14.17.0 || >=16.0.0}
    peerDependencies:
      eslint: ^6.0.0 || ^7.0.0 || >=8.0.0

  '@eslint-community/eslint-utils@4.7.0':
    resolution: {integrity: sha512-dyybb3AcajC7uha6CvhdVRJqaKyn7w2YKqKyAN37NKYgZT36w+iRb0Dymmc5qEJ549c/S31cMMSFd75bteCpCw==}
    engines: {node: ^12.22.0 || ^14.17.0 || >=16.0.0}
    peerDependencies:
      eslint: ^6.0.0 || ^7.0.0 || >=8.0.0

  '@eslint-community/regexpp@4.12.1':
    resolution: {integrity: sha512-CCZCDJuduB9OUkFkY2IgppNZMi2lBQgD2qzwXkEia16cge2pijY/aXi96CJMquDMn3nJdlPV1A5KrJEXwfLNzQ==}
    engines: {node: ^12.0.0 || ^14.0.0 || >=16.0.0}

  '@eslint/config-array@0.19.0':
    resolution: {integrity: sha512-zdHg2FPIFNKPdcHWtiNT+jEFCHYVplAXRDlQDyqy0zGx/q2parwh7brGJSiTxRk/TSMkbM//zt/f5CHgyTyaSQ==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}

  '@eslint/core@0.9.0':
    resolution: {integrity: sha512-7ATR9F0e4W85D/0w7cU0SNj7qkAexMG+bAHEZOjo9akvGuhHE2m7umzWzfnpa0XAg5Kxc1BWmtPMV67jJ+9VUg==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}

  '@eslint/eslintrc@3.2.0':
    resolution: {integrity: sha512-grOjVNN8P3hjJn/eIETF1wwd12DdnwFDoyceUJLYYdkpbwq3nLi+4fqrTAONx7XDALqlL220wC/RHSC/QTI/0w==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}

  '@eslint/js@9.16.0':
    resolution: {integrity: sha512-tw2HxzQkrbeuvyj1tG2Yqq+0H9wGoI2IMk4EOsQeX+vmd75FtJAzf+gTA69WF+baUKRYQ3x2kbLE08js5OsTVg==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}

  '@eslint/js@9.34.0':
    resolution: {integrity: sha512-EoyvqQnBNsV1CWaEJ559rxXL4c8V92gxirbawSmVUOWXlsRxxQXl6LmCpdUblgxgSkDIqKnhzba2SjRTI/A5Rw==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}

  '@eslint/object-schema@2.1.4':
    resolution: {integrity: sha512-BsWiH1yFGjXXS2yvrf5LyuoSIIbPrGUWob917o+BTKuZ7qJdxX8aJLRxs1fS9n6r7vESrq1OUqb68dANcFXuQQ==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}

  '@eslint/plugin-kit@0.2.3':
    resolution: {integrity: sha512-2b/g5hRmpbb1o4GnTZax9N9m0FXzz9OV42ZzI4rDDMDuHUqigAiQCEWChBWCY4ztAGVRjoWT19v0yMmc5/L5kA==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}

  '@humanfs/core@0.19.1':
    resolution: {integrity: sha512-5DyQ4+1JEUzejeK1JGICcideyfUbGixgS9jNgex5nqkW+cY7WZhxBigmieN5Qnw9ZosSNVC9KQKyb+GUaGyKUA==}
    engines: {node: '>=18.18.0'}

  '@humanfs/node@0.16.6':
    resolution: {integrity: sha512-YuI2ZHQL78Q5HbhDiBA1X4LmYdXCKCMQIfw0pw7piHJwyREFebJUvrQN4cMssyES6x+vfUbx1CIpaQUKYdQZOw==}
    engines: {node: '>=18.18.0'}

  '@humanwhocodes/module-importer@1.0.1':
    resolution: {integrity: sha512-bxveV4V8v5Yb4ncFTT3rPSgZBOpCkjfK0y4oVVVJwIuDVBRMDXrPyXRL988i5ap9m9bnyEEjWfm5WkBmtffLfA==}
    engines: {node: '>=12.22'}

  '@humanwhocodes/retry@0.3.1':
    resolution: {integrity: sha512-JBxkERygn7Bv/GbN5Rv8Ul6LVknS+5Bp6RgDC/O8gEBU/yeH5Ui5C/OlWrTb6qct7LjjfT6Re2NxB0ln0yYybA==}
    engines: {node: '>=18.18'}

  '@humanwhocodes/retry@0.4.1':
    resolution: {integrity: sha512-c7hNEllBlenFTHBky65mhq8WD2kbN9Q6gk0bTk8lSBvc554jpXSkST1iePudpt7+A/AQvuHs9EMqjHDXMY1lrA==}
    engines: {node: '>=18.18'}

  '@iconify-json/simple-icons@1.2.11':
    resolution: {integrity: sha512-AHCGDtBRqP+JzAbBzgO8uN/08CXxEmuaC6lQQZ3b5burKhRU12AJnJczwbUw2K5Mb/U85EpSUNhYMG3F28b8NA==}

  '@iconify/types@2.0.0':
    resolution: {integrity: sha512-+wluvCrRhXrhyOmRDJ3q8mux9JkKy5SJ/v8ol2tu4FVjyYvtEzkc/3pK15ET6RKg4b4w4BmTk1+gsCUhf21Ykg==}

  '@inquirer/ansi@1.0.1':
    resolution: {integrity: sha512-yqq0aJW/5XPhi5xOAL1xRCpe1eh8UFVgYFpFsjEqmIR8rKLyP+HINvFXwUaxYICflJrVlxnp7lLN6As735kVpw==}
    engines: {node: '>=18'}

  '@inquirer/core@10.3.0':
    resolution: {integrity: sha512-Uv2aPPPSK5jeCplQmQ9xadnFx2Zhj9b5Dj7bU6ZeCdDNNY11nhYy4btcSdtDguHqCT2h5oNeQTcUNSGGLA7NTA==}
    engines: {node: '>=18'}
    peerDependencies:
      '@types/node': '>=18'
    peerDependenciesMeta:
      '@types/node':
        optional: true

  '@inquirer/figures@1.0.14':
    resolution: {integrity: sha512-DbFgdt+9/OZYFM+19dbpXOSeAstPy884FPy1KjDu4anWwymZeOYhMY1mdFri172htv6mvc/uvIAAi7b7tvjJBQ==}
    engines: {node: '>=18'}

  '@inquirer/type@3.0.9':
    resolution: {integrity: sha512-QPaNt/nmE2bLGQa9b7wwyRJoLZ7pN6rcyXvzU0YCmivmJyq1BVo94G98tStRWkoD1RgDX5C+dPlhhHzNdu/W/w==}
    engines: {node: '>=18'}
    peerDependencies:
      '@types/node': '>=18'
    peerDependenciesMeta:
      '@types/node':
        optional: true

  '@isaacs/cliui@8.0.2':
    resolution: {integrity: sha512-O8jcjabXaleOG9DQ0+ARXWZBTfnP4WNAqzuiJK7ll44AmxGKv/J2M4TPjxjY3znBCfvBXFzucm1twdyFybFqEA==}
    engines: {node: '>=12'}

  '@istanbuljs/schema@0.1.3':
    resolution: {integrity: sha512-ZXRY4jNvVgSVQ8DL3LTcakaAtXwTVUxE81hslsyD2AtoXW/wVob10HkOJ1X/pAlcI7D+2YoZKg5do8G/w6RYgA==}
    engines: {node: '>=8'}

  '@jridgewell/gen-mapping@0.3.5':
    resolution: {integrity: sha512-IzL8ZoEDIBRWEzlCcRhOaCupYyN5gdIK+Q6fbFdPDg6HqX6jpkItn7DFIpW9LQzXG6Df9sA7+OKnq0qlz/GaQg==}
    engines: {node: '>=6.0.0'}

  '@jridgewell/remapping@2.3.5':
    resolution: {integrity: sha512-LI9u/+laYG4Ds1TDKSJW2YPrIlcVYOwi2fUC6xB43lueCjgxV4lffOCZCtYFiH6TNOX+tQKXx97T4IKHbhyHEQ==}

  '@jridgewell/resolve-uri@3.1.2':
    resolution: {integrity: sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==}
    engines: {node: '>=6.0.0'}

  '@jridgewell/set-array@1.2.1':
    resolution: {integrity: sha512-R8gLRTZeyp03ymzP/6Lil/28tGeGEzhx1q2k703KGWRAI1VdvPIXdG70VJc2pAMw3NA6JKL5hhFu1sJX0Mnn/A==}
    engines: {node: '>=6.0.0'}

  '@jridgewell/sourcemap-codec@1.5.0':
    resolution: {integrity: sha512-gv3ZRaISU3fjPAgNsriBRqGWQL6quFx04YMPW/zD8XMLsU32mhCCbfbO6KZFLjvYpCZ8zyDEgqsgf+PwPaM7GQ==}

  '@jridgewell/trace-mapping@0.3.25':
    resolution: {integrity: sha512-vNk6aEwybGtawWmy/PzwnGDOjCkLWSD2wqvjGGAgOAwCGWySYXfYoxt00IJkTF+8Lb57DwOb3Aa0o9CApepiYQ==}

  '@jridgewell/trace-mapping@0.3.31':
    resolution: {integrity: sha512-zzNR+SdQSDJzc8joaeP8QQoCQr8NuYx2dIIytl1QeBEZHJ9uW6hebsrYgbz8hJwUQao3TWCMtmfV8Nu1twOLAw==}

  '@jridgewell/trace-mapping@0.3.9':
    resolution: {integrity: sha512-3Belt6tdc8bPgAtbcmdtNJlirVoTmEb5e2gC94PnkwEW9jI6CAHUeoG85tjWP5WquqfavoMtMwiG4P926ZKKuQ==}

  '@manypkg/find-root@1.1.0':
    resolution: {integrity: sha512-mki5uBvhHzO8kYYix/WRy2WX8S3B5wdVSc9D6KcU5lQNglP2yt58/VfLuAK49glRXChosY8ap2oJ1qgma3GUVA==}

  '@manypkg/get-packages@1.1.3':
    resolution: {integrity: sha512-fo+QhuU3qE/2TQMQmbVMqaQ6EWbMhi4ABWP+O4AM1NqPBuy0OrApV5LO6BrrgnhtAHS2NH6RrVk9OL181tTi8A==}

  '@microsoft/api-extractor-model@7.30.5':
    resolution: {integrity: sha512-0ic4rcbcDZHz833RaTZWTGu+NpNgrxVNjVaor0ZDUymfDFzjA/Uuk8hYziIUIOEOSTfmIQqyzVwlzxZxPe7tOA==}

  '@microsoft/api-extractor@7.52.5':
    resolution: {integrity: sha512-6WWgjjg6FkoDWpF/O3sjB05OkszpI5wtKJqd8fUIR/JJUv8IqNCGr1lJUZJnc1HegcT9gAvyf98KfH0wFncU0w==}
    hasBin: true

  '@microsoft/tsdoc-config@0.17.1':
    resolution: {integrity: sha512-UtjIFe0C6oYgTnad4q1QP4qXwLhe6tIpNTRStJ2RZEPIkqQPREAwE5spzVxsdn9UaEMUqhh0AqSx3X4nWAKXWw==}

  '@microsoft/tsdoc@0.15.1':
    resolution: {integrity: sha512-4aErSrCR/On/e5G2hDP0wjooqDdauzEbIq8hIkIe5pXV0rtWJZvdCEKL0ykZxex+IxIwBp0eGeV48hQN07dXtw==}

  '@nodelib/fs.scandir@2.1.5':
    resolution: {integrity: sha512-vq24Bq3ym5HEQm2NKCr3yXDwjc7vTsEThRDnkp2DK9p1uqLR+DHurm/NOTo0KG7HYHU7eppKZj3MyqYuMBf62g==}
    engines: {node: '>= 8'}

  '@nodelib/fs.stat@2.0.5':
    resolution: {integrity: sha512-RkhPPp2zrqDAQA/2jNhnztcPAlv64XdhIp7a7454A5ovI7Bukxgt7MX7udwAu3zg1DcpPU0rz3VV1SeaqvY4+A==}
    engines: {node: '>= 8'}

  '@nodelib/fs.walk@1.2.8':
    resolution: {integrity: sha512-oGB+UxlgWcgQkgwo8GcEGwemoTFt3FIO9ababBmaGwXIoBKZ+GTy0pP185beGg7Llih/NSHSV2XAs1lnznocSg==}
    engines: {node: '>= 8'}

  '@octokit/auth-token@4.0.0':
    resolution: {integrity: sha512-tY/msAuJo6ARbK6SPIxZrPBms3xPbfwBrulZe0Wtr/DIY9lje2HeV1uoebShn6mx7SjCHif6EjMvoREj+gZ+SA==}
    engines: {node: '>= 18'}

  '@octokit/core@5.2.0':
    resolution: {integrity: sha512-1LFfa/qnMQvEOAdzlQymH0ulepxbxnCYAKJZfMci/5XJyIHWgEYnDmgnKakbTh7CH2tFQ5O60oYDvns4i9RAIg==}
    engines: {node: '>= 18'}

  '@octokit/endpoint@9.0.5':
    resolution: {integrity: sha512-ekqR4/+PCLkEBF6qgj8WqJfvDq65RH85OAgrtnVp1mSxaXF03u2xW/hUdweGS5654IlC0wkNYC18Z50tSYTAFw==}
    engines: {node: '>= 18'}

  '@octokit/graphql@7.1.0':
    resolution: {integrity: sha512-r+oZUH7aMFui1ypZnAvZmn0KSqAUgE1/tUXIWaqUCa1758ts/Jio84GZuzsvUkme98kv0WFY8//n0J1Z+vsIsQ==}
    engines: {node: '>= 18'}

  '@octokit/openapi-types@22.2.0':
    resolution: {integrity: sha512-QBhVjcUa9W7Wwhm6DBFu6ZZ+1/t/oYxqc2tp81Pi41YNuJinbFRx8B133qVOrAaBbF7D/m0Et6f9/pZt9Rc+tg==}

  '@octokit/plugin-paginate-rest@11.3.1':
    resolution: {integrity: sha512-ryqobs26cLtM1kQxqeZui4v8FeznirUsksiA+RYemMPJ7Micju0WSkv50dBksTuZks9O5cg4wp+t8fZ/cLY56g==}
    engines: {node: '>= 18'}
    peerDependencies:
      '@octokit/core': '5'

  '@octokit/plugin-request-log@4.0.1':
    resolution: {integrity: sha512-GihNqNpGHorUrO7Qa9JbAl0dbLnqJVrV8OXe2Zm5/Y4wFkZQDfTreBzVmiRfJVfE4mClXdihHnbpyyO9FSX4HA==}
    engines: {node: '>= 18'}
    peerDependencies:
      '@octokit/core': '5'

  '@octokit/plugin-rest-endpoint-methods@13.2.2':
    resolution: {integrity: sha512-EI7kXWidkt3Xlok5uN43suK99VWqc8OaIMktY9d9+RNKl69juoTyxmLoWPIZgJYzi41qj/9zU7G/ljnNOJ5AFA==}
    engines: {node: '>= 18'}
    peerDependencies:
      '@octokit/core': ^5

  '@octokit/request-error@5.1.0':
    resolution: {integrity: sha512-GETXfE05J0+7H2STzekpKObFe765O5dlAKUTLNGeH+x47z7JjXHfsHKo5z21D/o/IOZTUEI6nyWyR+bZVP/n5Q==}
    engines: {node: '>= 18'}

  '@octokit/request@8.4.0':
    resolution: {integrity: sha512-9Bb014e+m2TgBeEJGEbdplMVWwPmL1FPtggHQRkV+WVsMggPtEkLKPlcVYm/o8xKLkpJ7B+6N8WfQMtDLX2Dpw==}
    engines: {node: '>= 18'}

  '@octokit/rest@20.1.1':
    resolution: {integrity: sha512-MB4AYDsM5jhIHro/dq4ix1iWTLGToIGk6cWF5L6vanFaMble5jTX/UBQyiv05HsWnwUtY8JrfHy2LWfKwihqMw==}
    engines: {node: '>= 18'}

  '@octokit/types@13.6.2':
    resolution: {integrity: sha512-WpbZfZUcZU77DrSW4wbsSgTPfKcp286q3ItaIgvSbBpZJlu6mnYXAkjZz6LVZPXkEvLIM8McanyZejKTYUHipA==}

  '@pkgjs/parseargs@0.11.0':
    resolution: {integrity: sha512-+1VkjdD0QBLPodGrJUeqarH8VAIvQODIbwh9XpP5Syisf7YoQgsJKPNFoqqLQlu+VQ/tVSshMR6loPMn8U+dPg==}
    engines: {node: '>=14'}

  '@polka/url@1.0.0-next.28':
    resolution: {integrity: sha512-8LduaNlMZGwdZ6qWrKlfa+2M4gahzFkprZiAt2TF8uS0qQgBizKXpXURqvTJ4WtmupWxaLqjRb2UCTe72mu+Aw==}

  '@rollup/plugin-node-resolve@15.3.0':
    resolution: {integrity: sha512-9eO5McEICxMzJpDW9OnMYSv4Sta3hmt7VtBFz5zR9273suNOydOyq/FrGeGy+KsTRFm8w0SLVhzig2ILFT63Ag==}
    engines: {node: '>=14.0.0'}
    peerDependencies:
      rollup: ^2.78.0||^3.0.0||^4.0.0
    peerDependenciesMeta:
      rollup:
        optional: true

  '@rollup/pluginutils@5.1.3':
    resolution: {integrity: sha512-Pnsb6f32CD2W3uCaLZIzDmeFyQ2b8UWMFI7xtwUezpcGBDVDW6y9XgAWIlARiGAo6eNF5FK5aQTr0LFyNyqq5A==}
    engines: {node: '>=14.0.0'}
    peerDependencies:
      rollup: ^1.20.0||^2.0.0||^3.0.0||^4.0.0
    peerDependenciesMeta:
      rollup:
        optional: true

  '@rollup/pluginutils@5.1.4':
    resolution: {integrity: sha512-USm05zrsFxYLPdWWq+K3STlWiT/3ELn3RcV5hJMghpeAIhxfsUIg6mt12CBJBInWMV4VneoV7SfGv8xIwo2qNQ==}
    engines: {node: '>=14.0.0'}
    peerDependencies:
      rollup: ^1.20.0||^2.0.0||^3.0.0||^4.0.0
    peerDependenciesMeta:
      rollup:
        optional: true

  '@rollup/rollup-android-arm-eabi@4.40.0':
    resolution: {integrity: sha512-+Fbls/diZ0RDerhE8kyC6hjADCXA1K4yVNlH0EYfd2XjyH0UGgzaQ8MlT0pCXAThfxv3QUAczHaL+qSv1E4/Cg==}
    cpu: [arm]
    os: [android]

  '@rollup/rollup-android-arm64@4.40.0':
    resolution: {integrity: sha512-PPA6aEEsTPRz+/4xxAmaoWDqh67N7wFbgFUJGMnanCFs0TV99M0M8QhhaSCks+n6EbQoFvLQgYOGXxlMGQe/6w==}
    cpu: [arm64]
    os: [android]

  '@rollup/rollup-darwin-arm64@4.40.0':
    resolution: {integrity: sha512-GwYOcOakYHdfnjjKwqpTGgn5a6cUX7+Ra2HeNj/GdXvO2VJOOXCiYYlRFU4CubFM67EhbmzLOmACKEfvp3J1kQ==}
    cpu: [arm64]
    os: [darwin]

  '@rollup/rollup-darwin-x64@4.40.0':
    resolution: {integrity: sha512-CoLEGJ+2eheqD9KBSxmma6ld01czS52Iw0e2qMZNpPDlf7Z9mj8xmMemxEucinev4LgHalDPczMyxzbq+Q+EtA==}
    cpu: [x64]
    os: [darwin]

  '@rollup/rollup-freebsd-arm64@4.40.0':
    resolution: {integrity: sha512-r7yGiS4HN/kibvESzmrOB/PxKMhPTlz+FcGvoUIKYoTyGd5toHp48g1uZy1o1xQvybwwpqpe010JrcGG2s5nkg==}
    cpu: [arm64]
    os: [freebsd]

  '@rollup/rollup-freebsd-x64@4.40.0':
    resolution: {integrity: sha512-mVDxzlf0oLzV3oZOr0SMJ0lSDd3xC4CmnWJ8Val8isp9jRGl5Dq//LLDSPFrasS7pSm6m5xAcKaw3sHXhBjoRw==}
    cpu: [x64]
    os: [freebsd]

  '@rollup/rollup-linux-arm-gnueabihf@4.40.0':
    resolution: {integrity: sha512-y/qUMOpJxBMy8xCXD++jeu8t7kzjlOCkoxxajL58G62PJGBZVl/Gwpm7JK9+YvlB701rcQTzjUZ1JgUoPTnoQA==}
    cpu: [arm]
    os: [linux]

  '@rollup/rollup-linux-arm-musleabihf@4.40.0':
    resolution: {integrity: sha512-GoCsPibtVdJFPv/BOIvBKO/XmwZLwaNWdyD8TKlXuqp0veo2sHE+A/vpMQ5iSArRUz/uaoj4h5S6Pn0+PdhRjg==}
    cpu: [arm]
    os: [linux]

  '@rollup/rollup-linux-arm64-gnu@4.40.0':
    resolution: {integrity: sha512-L5ZLphTjjAD9leJzSLI7rr8fNqJMlGDKlazW2tX4IUF9P7R5TMQPElpH82Q7eNIDQnQlAyiNVfRPfP2vM5Avvg==}
    cpu: [arm64]
    os: [linux]

  '@rollup/rollup-linux-arm64-musl@4.40.0':
    resolution: {integrity: sha512-ATZvCRGCDtv1Y4gpDIXsS+wfFeFuLwVxyUBSLawjgXK2tRE6fnsQEkE4csQQYWlBlsFztRzCnBvWVfcae/1qxQ==}
    cpu: [arm64]
    os: [linux]

  '@rollup/rollup-linux-loongarch64-gnu@4.40.0':
    resolution: {integrity: sha512-wG9e2XtIhd++QugU5MD9i7OnpaVb08ji3P1y/hNbxrQ3sYEelKJOq1UJ5dXczeo6Hj2rfDEL5GdtkMSVLa/AOg==}
    cpu: [loong64]
    os: [linux]

  '@rollup/rollup-linux-powerpc64le-gnu@4.40.0':
    resolution: {integrity: sha512-vgXfWmj0f3jAUvC7TZSU/m/cOE558ILWDzS7jBhiCAFpY2WEBn5jqgbqvmzlMjtp8KlLcBlXVD2mkTSEQE6Ixw==}
    cpu: [ppc64]
    os: [linux]

  '@rollup/rollup-linux-riscv64-gnu@4.40.0':
    resolution: {integrity: sha512-uJkYTugqtPZBS3Z136arevt/FsKTF/J9dEMTX/cwR7lsAW4bShzI2R0pJVw+hcBTWF4dxVckYh72Hk3/hWNKvA==}
    cpu: [riscv64]
    os: [linux]

  '@rollup/rollup-linux-riscv64-musl@4.40.0':
    resolution: {integrity: sha512-rKmSj6EXQRnhSkE22+WvrqOqRtk733x3p5sWpZilhmjnkHkpeCgWsFFo0dGnUGeA+OZjRl3+VYq+HyCOEuwcxQ==}
    cpu: [riscv64]
    os: [linux]

  '@rollup/rollup-linux-s390x-gnu@4.40.0':
    resolution: {integrity: sha512-SpnYlAfKPOoVsQqmTFJ0usx0z84bzGOS9anAC0AZ3rdSo3snecihbhFTlJZ8XMwzqAcodjFU4+/SM311dqE5Sw==}
    cpu: [s390x]
    os: [linux]

  '@rollup/rollup-linux-x64-gnu@4.40.0':
    resolution: {integrity: sha512-RcDGMtqF9EFN8i2RYN2W+64CdHruJ5rPqrlYw+cgM3uOVPSsnAQps7cpjXe9be/yDp8UC7VLoCoKC8J3Kn2FkQ==}
    cpu: [x64]
    os: [linux]

  '@rollup/rollup-linux-x64-musl@4.40.0':
    resolution: {integrity: sha512-HZvjpiUmSNx5zFgwtQAV1GaGazT2RWvqeDi0hV+AtC8unqqDSsaFjPxfsO6qPtKRRg25SisACWnJ37Yio8ttaw==}
    cpu: [x64]
    os: [linux]

  '@rollup/rollup-win32-arm64-msvc@4.40.0':
    resolution: {integrity: sha512-UtZQQI5k/b8d7d3i9AZmA/t+Q4tk3hOC0tMOMSq2GlMYOfxbesxG4mJSeDp0EHs30N9bsfwUvs3zF4v/RzOeTQ==}
    cpu: [arm64]
    os: [win32]

  '@rollup/rollup-win32-ia32-msvc@4.40.0':
    resolution: {integrity: sha512-+m03kvI2f5syIqHXCZLPVYplP8pQch9JHyXKZ3AGMKlg8dCyr2PKHjwRLiW53LTrN/Nc3EqHOKxUxzoSPdKddA==}
    cpu: [ia32]
    os: [win32]

  '@rollup/rollup-win32-x64-msvc@4.40.0':
    resolution: {integrity: sha512-lpPE1cLfP5oPzVjKMx10pgBmKELQnFJXHgvtHCtuJWOv8MxqdEIMNtgHgBFf7Ea2/7EuVwa9fodWUfXAlXZLZQ==}
    cpu: [x64]
    os: [win32]

  '@rushstack/node-core-library@5.13.0':
    resolution: {integrity: sha512-IGVhy+JgUacAdCGXKUrRhwHMTzqhWwZUI+qEPcdzsb80heOw0QPbhhoVsoiMF7Klp8eYsp7hzpScMXmOa3Uhfg==}
    peerDependencies:
      '@types/node': '*'
    peerDependenciesMeta:
      '@types/node':
        optional: true

  '@rushstack/rig-package@0.5.3':
    resolution: {integrity: sha512-olzSSjYrvCNxUFZowevC3uz8gvKr3WTpHQ7BkpjtRpA3wK+T0ybep/SRUMfr195gBzJm5gaXw0ZMgjIyHqJUow==}

  '@rushstack/terminal@0.15.2':
    resolution: {integrity: sha512-7Hmc0ysK5077R/IkLS9hYu0QuNafm+TbZbtYVzCMbeOdMjaRboLKrhryjwZSRJGJzu+TV1ON7qZHeqf58XfLpA==}
    peerDependencies:
      '@types/node': '*'
    peerDependenciesMeta:
      '@types/node':
        optional: true

  '@rushstack/ts-command-line@5.0.0':
    resolution: {integrity: sha512-SW6nqZVxH26Rxz25+lJQRlnXI/YCrNH7NfDEWPPm9i0rwkSE6Rgtmzw96cuZgQjacOh0sw77d6V4SvgarAfr8g==}

  '@shikijs/core@1.23.1':
    resolution: {integrity: sha512-NuOVgwcHgVC6jBVH5V7iblziw6iQbWWHrj5IlZI3Fqu2yx9awH7OIQkXIcsHsUmY19ckwSgUMgrqExEyP5A0TA==}

  '@shikijs/engine-javascript@1.23.1':
    resolution: {integrity: sha512-i/LdEwT5k3FVu07SiApRFwRcSJs5QM9+tod5vYCPig1Ywi8GR30zcujbxGQFJHwYD7A5BUqagi8o5KS+LEVgBg==}

  '@shikijs/engine-oniguruma@1.23.1':
    resolution: {integrity: sha512-KQ+lgeJJ5m2ISbUZudLR1qHeH3MnSs2mjFg7bnencgs5jDVPeJ2NVDJ3N5ZHbcTsOIh0qIueyAJnwg7lg7kwXQ==}

  '@shikijs/transformers@1.23.1':
    resolution: {integrity: sha512-yQ2Cn0M9i46p30KwbyIzLvKDk+dQNU+lj88RGO0XEj54Hn4Cof1bZoDb9xBRWxFE4R8nmK63w7oHnJwvOtt0NQ==}

  '@shikijs/types@1.23.1':
    resolution: {integrity: sha512-98A5hGyEhzzAgQh2dAeHKrWW4HfCMeoFER2z16p5eJ+vmPeF6lZ/elEne6/UCU551F/WqkopqRsr1l2Yu6+A0g==}

  '@shikijs/vscode-textmate@9.3.0':
    resolution: {integrity: sha512-jn7/7ky30idSkd/O5yDBfAnVt+JJpepofP/POZ1iMOxK59cOfqIgg/Dj0eFsjOTMw+4ycJN0uhZH/Eb0bs/EUA==}

  '@stylistic/eslint-plugin@5.2.3':
    resolution: {integrity: sha512-oY7GVkJGVMI5benlBDCaRrSC1qPasafyv5dOBLLv5MTilMGnErKhO6ziEfodDDIZbo5QxPUNW360VudJOFODMw==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}
    peerDependencies:
      eslint: '>=9.0.0'

  '@sveltejs/acorn-typescript@1.0.6':
    resolution: {integrity: sha512-4awhxtMh4cx9blePWl10HRHj8Iivtqj+2QdDCSMDzxG+XKa9+VCNupQuCuvzEhYPzZSrX+0gC+0lHA/0fFKKQQ==}
    peerDependencies:
      acorn: ^8.9.0

  '@swc/core-darwin-arm64@1.9.2':
    resolution: {integrity: sha512-nETmsCoY29krTF2PtspEgicb3tqw7Ci5sInTI03EU5zpqYbPjoPH99BVTjj0OsF53jP5MxwnLI5Hm21lUn1d6A==}
    engines: {node: '>=10'}
    cpu: [arm64]
    os: [darwin]

  '@swc/core-darwin-x64@1.9.2':
    resolution: {integrity: sha512-9gD+bwBz8ZByjP6nZTXe/hzd0tySIAjpDHgkFiUrc+5zGF+rdTwhcNrzxNHJmy6mw+PW38jqII4uspFHUqqxuQ==}
    engines: {node: '>=10'}
    cpu: [x64]
    os: [darwin]

  '@swc/core-linux-arm-gnueabihf@1.9.2':
    resolution: {integrity: sha512-kYq8ief1Qrn+WmsTWAYo4r+Coul4dXN6cLFjiPZ29Cv5pyU+GFvSPAB4bEdMzwy99rCR0u2P10UExaeCjurjvg==}
    engines: {node: '>=10'}
    cpu: [arm]
    os: [linux]

  '@swc/core-linux-arm64-gnu@1.9.2':
    resolution: {integrity: sha512-n0W4XiXlmEIVqxt+rD3ZpkogsEWUk1jJ+i5bQNgB+1JuWh0fBE8c/blDgTQXa0GB5lTPVDZQussgdNOCnAZwiA==}
    engines: {node: '>=10'}
    cpu: [arm64]
    os: [linux]

  '@swc/core-linux-arm64-musl@1.9.2':
    resolution: {integrity: sha512-8xzrOmsyCC1zrx2Wzx/h8dVsdewO1oMCwBTLc1gSJ/YllZYTb04pNm6NsVbzUX2tKddJVRgSJXV10j/NECLwpA==}
    engines: {node: '>=10'}
    cpu: [arm64]
    os: [linux]

  '@swc/core-linux-x64-gnu@1.9.2':
    resolution: {integrity: sha512-kZrNz/PjRQKcchWF6W292jk3K44EoVu1ad5w+zbS4jekIAxsM8WwQ1kd+yjUlN9jFcF8XBat5NKIs9WphJCVXg==}
    engines: {node: '>=10'}
    cpu: [x64]
    os: [linux]

  '@swc/core-linux-x64-musl@1.9.2':
    resolution: {integrity: sha512-TTIpR4rjMkhX1lnFR+PSXpaL83TrQzp9znRdp2TzYrODlUd/R20zOwSo9vFLCyH6ZoD47bccY7QeGZDYT3nlRg==}
    engines: {node: '>=10'}
    cpu: [x64]
    os: [linux]

  '@swc/core-win32-arm64-msvc@1.9.2':
    resolution: {integrity: sha512-+Eg2d4icItKC0PMjZxH7cSYFLWk0aIp94LNmOw6tPq0e69ax6oh10upeq0D1fjWsKLmOJAWEvnXlayZcijEXDw==}
    engines: {node: '>=10'}
    cpu: [arm64]
    os: [win32]

  '@swc/core-win32-ia32-msvc@1.9.2':
    resolution: {integrity: sha512-nLWBi4vZDdM/LkiQmPCakof8Dh1/t5EM7eudue04V1lIcqx9YHVRS3KMwEaCoHLGg0c312Wm4YgrWQd9vwZ5zQ==}
    engines: {node: '>=10'}
    cpu: [ia32]
    os: [win32]

  '@swc/core-win32-x64-msvc@1.9.2':
    resolution: {integrity: sha512-ik/k+JjRJBFkXARukdU82tSVx0CbExFQoQ78qTO682esbYXzjdB5eLVkoUbwen299pnfr88Kn4kyIqFPTje8Xw==}
    engines: {node: '>=10'}
    cpu: [x64]
    os: [win32]

  '@swc/core@1.9.2':
    resolution: {integrity: sha512-dYyEkO6mRYtZFpnOsnYzv9rY69fHAHoawYOjGOEcxk9WYtaJhowMdP/w6NcOKnz2G7GlZaenjkzkMa6ZeQeMsg==}
    engines: {node: '>=10'}
    peerDependencies:
      '@swc/helpers': '*'
    peerDependenciesMeta:
      '@swc/helpers':
        optional: true

  '@swc/counter@0.1.3':
    resolution: {integrity: sha512-e2BR4lsJkkRlKZ/qCHPw9ZaSxc0MVUd7gtbtaB7aMvHeJVYe8sOB8DBZkP2DtISHGSku9sCK6T6cnY0CtXrOCQ==}

  '@swc/helpers@0.5.15':
    resolution: {integrity: sha512-JQ5TuMi45Owi4/BIMAJBoSQoOJu12oOk/gADqlcUL9JEdHB8vyjUSsxqeNXnmXHjYKMi2WcYtezGEEhqUI/E2g==}

  '@swc/types@0.1.15':
    resolution: {integrity: sha512-XKaZ+dzDIQ9Ot9o89oJQ/aluI17+VvUnIpYJTcZtvv1iYX6MzHh3Ik2CSR7MdPKpPwfZXHBeCingb2b4PoDVdw==}

  '@tootallnate/quickjs-emscripten@0.23.0':
    resolution: {integrity: sha512-C5Mc6rdnsaJDjO3UpGW/CQTHtCKaYlScZTly4JIu97Jxo/odCiH0ITnDXSJPTOrEKk/ycSZ0AOgTmkDtkOsvIA==}

  '@tsconfig/node10@1.0.11':
    resolution: {integrity: sha512-DcRjDCujK/kCk/cUe8Xz8ZSpm8mS3mNNpta+jGCA6USEDfktlNvm1+IuZ9eTcDbNk41BHwpHHeW+N1lKCz4zOw==}

  '@tsconfig/node12@1.0.11':
    resolution: {integrity: sha512-cqefuRsh12pWyGsIoBKJA9luFu3mRxCA+ORZvA4ktLSzIuCUtWVxGIuXigEwO5/ywWFMZ2QEGKWvkZG1zDMTag==}

  '@tsconfig/node14@1.0.3':
    resolution: {integrity: sha512-ysT8mhdixWK6Hw3i1V2AeRqZ5WfXg1G43mqoYlM2nc6388Fq5jcXyr5mRsqViLx/GJYdoL0bfXD8nmF+Zn/Iow==}

  '@tsconfig/node16@1.0.4':
    resolution: {integrity: sha512-vxhUy4J8lyeyinH7Azl1pdd43GJhZH/tP2weN8TntQblOY+A0XbT8DJk1/oCPuOOyg/Ja757rG0CgHcWC8OfMA==}

  '@turbo/gen@2.3.3':
    resolution: {integrity: sha512-MIXXX0sVRvfTWOrLhjDT1KJ15dqzRlNlHIvNeWoS5ZtTMQ9XuBl9D5ek/5vMj77n+84mFRS/VKAoEuScOIWwaw==}
    hasBin: true

  '@turbo/workspaces@2.3.3':
    resolution: {integrity: sha512-PSys7Hy5NuX76HBleOkd8wlRtI4GCzLHS2XUpKeGIj0vpzH4fqE+tpi7fBb5t9U7UiyM6E6pyabSKjoD2zUsoQ==}
    hasBin: true

  '@types/argparse@1.0.38':
    resolution: {integrity: sha512-ebDJ9b0e702Yr7pWgB0jzm+CX4Srzz8RcXtLJDJB+BSccqMa36uyH/zUsSYao5+BD1ytv3k3rPYCq4mAE1hsXA==}

  '@types/babel__core@7.20.5':
    resolution: {integrity: sha512-qoQprZvz5wQFJwMDqeseRXWv3rqMvhgpbXFfVyWhbx9X47POIA6i/+dXefEmZKoAgOaTdaIgNSMqMIU61yRyzA==}

  '@types/babel__generator@7.6.8':
    resolution: {integrity: sha512-ASsj+tpEDsEiFr1arWrlN6V3mdfjRMZt6LtK/Vp/kreFLnr5QH5+DhvD5nINYZXzwJvXeGq+05iUXcAzVrqWtw==}

  '@types/babel__template@7.4.4':
    resolution: {integrity: sha512-h/NUaSyG5EyxBIp8YRxo4RMe2/qQgvyowRwVMzhYhBCONbW8PUsg4lkFMrhgZhUe5z3L3MiLDuvyJ/CaPa2A8A==}

  '@types/babel__traverse@7.20.6':
    resolution: {integrity: sha512-r1bzfrm0tomOI8g1SzvCaQHo6Lcv6zu0EA+W2kHrt8dyrHQxGzBBL4kdkzIS+jBMV+EYcMAEAqXqYaLJq5rOZg==}

  '@types/chai@5.2.2':
    resolution: {integrity: sha512-8kB30R7Hwqf40JPiKhVzodJs2Qc1ZJ5zuT3uzw5Hq/dhNCl3G3l83jfpdI1e20BP348+fV7VIL/+FxaXkqBmWg==}

  '@types/conventional-commits-parser@5.0.1':
    resolution: {integrity: sha512-7uz5EHdzz2TqoMfV7ee61Egf5y6NkcO4FB/1iCCQnbeiI1F3xzv3vK5dBCXUCLQgGYS+mUeigK1iKQzvED+QnQ==}

  '@types/deep-eql@4.0.2':
    resolution: {integrity: sha512-c9h9dVVMigMPc4bwTvC5dxqtqJZwQPePsWjPlpSOnojbor6pGqdk541lfA7AqFQr5pB1BRdq0juY9db81BwyFw==}

  '@types/eslint@9.6.1':
    resolution: {integrity: sha512-FXx2pKgId/WyYo2jXw63kk7/+TY7u7AziEJxJAnSFzHlqTAS3Ync6SvgYAN/k4/PQpnnVuzoMuVnByKK2qp0ag==}

  '@types/eslint__js@8.42.3':
    resolution: {integrity: sha512-alfG737uhmPdnvkrLdZLcEKJ/B8s9Y4hrZ+YAdzUeoArBlSUERA2E87ROfOaS4jd/C45fzOoZzidLc1IPwLqOw==}

  '@types/estree@1.0.6':
    resolution: {integrity: sha512-AYnb1nQyY49te+VRAVgmzfcgjYS91mY5P0TKUDCLEM+gNnA+3T6rWITXRLYCpahpqSQbN5cE+gHpnPyXjHWxcw==}

  '@types/estree@1.0.7':
    resolution: {integrity: sha512-w28IoSUCJpidD/TGviZwwMJckNESJZXFu7NBZ5YJ4mEUnNraUn9Pm8HSZm/jDF1pDWYKspWE7oVphigUPRakIQ==}

  '@types/glob@7.2.0':
    resolution: {integrity: sha512-ZUxbzKl0IfJILTS6t7ip5fQQM/J3TJYubDm3nMbgubNNYS62eXeUpoLUC8/7fJNiFYHTrGPQn7hspDUzIHX3UA==}

  '@types/hast@3.0.4':
    resolution: {integrity: sha512-WPs+bbQw5aCj+x6laNGWLH3wviHtoCv/P3+otBhbOhJgG8qtpdAMlTCxLtsTWA7LH1Oh/bFCHsBn0TPS5m30EQ==}

  '@types/inquirer@6.5.0':
    resolution: {integrity: sha512-rjaYQ9b9y/VFGOpqBEXRavc3jh0a+e6evAbI31tMda8VlPaSy0AZJfXsvmIe3wklc7W6C3zCSfleuMXR7NOyXw==}

  '@types/json-schema@7.0.15':
    resolution: {integrity: sha512-5+fP8P8MFNC+AyZCDxrB2pkZFPGzqQWUzpSeuuVLvm8VMcorNYavBqoFcxK8bQz4Qsbn4oUEEem4wDLfcysGHA==}

  '@types/linkify-it@5.0.0':
    resolution: {integrity: sha512-sVDA58zAw4eWAffKOaQH5/5j3XeayukzDk+ewSsnv3p4yJEZHCCzMDiZM8e0OUrRvmpGZ85jf4yDHkHsgBNr9Q==}

  '@types/markdown-it@14.1.2':
    resolution: {integrity: sha512-promo4eFwuiW+TfGxhi+0x3czqTYJkG8qB17ZUJiVF10Xm7NLVRSLUsfRTU/6h1e24VvRnXCx+hG7li58lkzog==}

  '@types/mdast@4.0.4':
    resolution: {integrity: sha512-kGaNbPh1k7AFzgpud/gMdvIm5xuECykRR+JnWKQno9TAXVa6WIVCGTPvYGekIDL4uwCZQSYbUxNBSb1aUo79oA==}

  '@types/mdurl@2.0.0':
    resolution: {integrity: sha512-RGdgjQUZba5p6QEFAVx2OGb8rQDL/cPRG7GiedRzMcJ1tYnUANBncjbSB1NRGwbvjcPeikRABz2nshyPk1bhWg==}

  '@types/minimatch@5.1.2':
    resolution: {integrity: sha512-K0VQKziLUWkVKiRVrx4a40iPaxTUefQmjtkQofBkYRcoaaL/8rhwDWww9qWbrgicNOgnpIsMxyNIUM4+n6dUIA==}

  '@types/node@12.20.55':
    resolution: {integrity: sha512-J8xLz7q2OFulZ2cyGTLE1TbbZcjpno7FaN6zdJNrgAdrJ+DZzh/uFR6YrTb4C+nXakvud8Q4+rbhoIWlYQbUFQ==}

  '@types/node@20.19.22':
    resolution: {integrity: sha512-hRnu+5qggKDSyWHlnmThnUqg62l29Aj/6vcYgUaSFL9oc7DVjeWEQN3PRgdSc6F8d9QRMWkf36CLMch1Do/+RQ==}

  '@types/node@22.10.1':
    resolution: {integrity: sha512-qKgsUwfHZV2WCWLAnVP1JqnpE6Im6h3Y0+fYgMTasNQ7V++CBX5OT1as0g0f+OyubbFqhf6XVNIsmN4IIhEgGQ==}

  '@types/prop-types@15.7.13':
    resolution: {integrity: sha512-hCZTSvwbzWGvhqxp/RqVqwU999pBf2vp7hzIjiYOsl8wqOmUxkQ6ddw1cV3l8811+kdUFus/q4d1Y3E3SyEifA==}

  '@types/react@18.3.12':
    resolution: {integrity: sha512-D2wOSq/d6Agt28q7rSI3jhU7G6aiuzljDGZ2hTZHIkrTLUI+AF3WMeKkEZ9nN2fkBAlcktT6vcZjDFiIhMYEQw==}

  '@types/react@19.2.2':
    resolution: {integrity: sha512-6mDvHUFSjyT2B2yeNx2nUgMxh9LtOWvkhIU3uePn2I2oyNymUAX1NIsdgviM4CH+JSrp2D2hsMvJOkxY+0wNRA==}

  '@types/resolve@1.20.2':
    resolution: {integrity: sha512-60BCwRFOZCQhDncwQdxxeOEEkbc5dIMccYLwbxsS4TUNeVECQ/pBJ0j09mrHOl/JJvpRPGwO9SvE4nR2Nb/a4Q==}

  '@types/through@0.0.33':
    resolution: {integrity: sha512-HsJ+z3QuETzP3cswwtzt2vEIiHBk/dCcHGhbmG5X3ecnwFD/lPrMpliGXxSCg03L9AhrdwA4Oz/qfspkDW+xGQ==}

  '@types/tinycolor2@1.4.6':
    resolution: {integrity: sha512-iEN8J0BoMnsWBqjVbWH/c0G0Hh7O21lpR2/+PrvAVgWdzL7eexIFm4JN/Wn10PTcmNdtS6U67r499mlWMXOxNw==}

  '@types/unist@3.0.3':
    resolution: {integrity: sha512-ko/gIFJRv177XgZsZcBwnqJN5x/Gien8qNOn0D5bQU/zAzVf9Zt3BlcUiLqhV9y4ARk0GbT3tnUiPNgnTXzc/Q==}

  '@types/web-bluetooth@0.0.20':
    resolution: {integrity: sha512-g9gZnnXVq7gM7v3tJCWV/qw7w+KeOlSHAhgF9RytFyifW6AF61hdT2ucrYhPq9hLs5JIryeupHV3qGk95dH9ow==}

  '@types/whatwg-mimetype@3.0.2':
    resolution: {integrity: sha512-c2AKvDT8ToxLIOUlN51gTiHXflsfIFisS4pO7pDPoKouJCESkhZnEy623gwP9laCy5lnLDAw1vAzu2vM2YLOrA==}

  '@typescript-eslint/eslint-plugin@8.41.0':
    resolution: {integrity: sha512-8fz6oa6wEKZrhXWro/S3n2eRJqlRcIa6SlDh59FXJ5Wp5XRZ8B9ixpJDcjadHq47hMx0u+HW6SNa6LjJQ6NLtw==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}
    peerDependencies:
      '@typescript-eslint/parser': ^8.41.0
      eslint: ^8.57.0 || ^9.0.0
      typescript: '>=4.8.4 <6.0.0'

  '@typescript-eslint/parser@8.41.0':
    resolution: {integrity: sha512-gTtSdWX9xiMPA/7MV9STjJOOYtWwIJIYxkQxnSV1U3xcE+mnJSH3f6zI0RYP+ew66WSlZ5ed+h0VCxsvdC1jJg==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}
    peerDependencies:
      eslint: ^8.57.0 || ^9.0.0
      typescript: '>=4.8.4 <6.0.0'

  '@typescript-eslint/project-service@8.41.0':
    resolution: {integrity: sha512-b8V9SdGBQzQdjJ/IO3eDifGpDBJfvrNTp2QD9P2BeqWTGrRibgfgIlBSw6z3b6R7dPzg752tOs4u/7yCLxksSQ==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}
    peerDependencies:
      typescript: '>=4.8.4 <6.0.0'

  '@typescript-eslint/scope-manager@8.41.0':
    resolution: {integrity: sha512-n6m05bXn/Cd6DZDGyrpXrELCPVaTnLdPToyhBoFkLIMznRUQUEQdSp96s/pcWSQdqOhrgR1mzJ+yItK7T+WPMQ==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}

  '@typescript-eslint/tsconfig-utils@8.41.0':
    resolution: {integrity: sha512-TDhxYFPUYRFxFhuU5hTIJk+auzM/wKvWgoNYOPcOf6i4ReYlOoYN8q1dV5kOTjNQNJgzWN3TUUQMtlLOcUgdUw==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}
    peerDependencies:
      typescript: '>=4.8.4 <6.0.0'

  '@typescript-eslint/type-utils@8.41.0':
    resolution: {integrity: sha512-63qt1h91vg3KsjVVonFJWjgSK7pZHSQFKH6uwqxAH9bBrsyRhO6ONoKyXxyVBzG1lJnFAJcKAcxLS54N1ee1OQ==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}
    peerDependencies:
      eslint: ^8.57.0 || ^9.0.0
      typescript: '>=4.8.4 <6.0.0'

  '@typescript-eslint/types@8.41.0':
    resolution: {integrity: sha512-9EwxsWdVqh42afLbHP90n2VdHaWU/oWgbH2P0CfcNfdKL7CuKpwMQGjwev56vWu9cSKU7FWSu6r9zck6CVfnag==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}

  '@typescript-eslint/typescript-estree@8.41.0':
    resolution: {integrity: sha512-D43UwUYJmGhuwHfY7MtNKRZMmfd8+p/eNSfFe6tH5mbVDto+VQCayeAt35rOx3Cs6wxD16DQtIKw/YXxt5E0UQ==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}
    peerDependencies:
      typescript: '>=4.8.4 <6.0.0'

  '@typescript-eslint/utils@8.41.0':
    resolution: {integrity: sha512-udbCVstxZ5jiPIXrdH+BZWnPatjlYwJuJkDA4Tbo3WyYLh8NvB+h/bKeSZHDOFKfphsZYJQqaFtLeXEqurQn1A==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}
    peerDependencies:
      eslint: ^8.57.0 || ^9.0.0
      typescript: '>=4.8.4 <6.0.0'

  '@typescript-eslint/visitor-keys@8.41.0':
    resolution: {integrity: sha512-+GeGMebMCy0elMNg67LRNoVnUFPIm37iu5CmHESVx56/9Jsfdpsvbv605DQ81Pi/x11IdKUsS5nzgTYbCQU9fg==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}

  '@ungap/structured-clone@1.2.0':
    resolution: {integrity: sha512-zuVdFrMJiuCDQUMCzQaD6KL28MjnqqN8XnAqiEq9PNm/hCPTSGfrXCOfwj1ow4LFb/tNymJPwsNbVePc1xFqrQ==}

  '@vitejs/plugin-vue@5.2.0':
    resolution: {integrity: sha512-7n7KdUEtx/7Yl7I/WVAMZ1bEb0eVvXF3ummWTeLcs/9gvo9pJhuLdouSXGjdZ/MKD1acf1I272+X0RMua4/R3g==}
    engines: {node: ^18.0.0 || >=20.0.0}
    peerDependencies:
      vite: ^5.0.0
      vue: ^3.2.25

  '@vitest/coverage-v8@3.2.4':
    resolution: {integrity: sha512-EyF9SXU6kS5Ku/U82E259WSnvg6c8KTjppUncuNdm5QHpe17mwREHnjDzozC8x9MZ0xfBUFSaLkRv4TMA75ALQ==}
    peerDependencies:
      '@vitest/browser': 3.2.4
      vitest: 3.2.4
    peerDependenciesMeta:
      '@vitest/browser':
        optional: true

  '@vitest/eslint-plugin@1.3.4':
    resolution: {integrity: sha512-EOg8d0jn3BAiKnR55WkFxmxfWA3nmzrbIIuOXyTe6A72duryNgyU+bdBEauA97Aab3ho9kLmAwgPX63Ckj4QEg==}
    peerDependencies:
      eslint: '>= 8.57.0'
      typescript: '>= 5.0.0'
      vitest: '*'
    peerDependenciesMeta:
      typescript:
        optional: true
      vitest:
        optional: true

  '@vitest/expect@3.2.4':
    resolution: {integrity: sha512-Io0yyORnB6sikFlt8QW5K7slY4OjqNX9jmJQ02QDda8lyM6B5oNgVWoSoKPac8/kgnCUzuHQKrSLtu/uOqqrig==}

  '@vitest/mocker@3.2.4':
    resolution: {integrity: sha512-46ryTE9RZO/rfDd7pEqFl7etuyzekzEhUbTW3BvmeO/BcCMEgq59BKhek3dXDWgAj4oMK6OZi+vRr1wPW6qjEQ==}
    peerDependencies:
      msw: ^2.4.9
      vite: ^5.0.0 || ^6.0.0 || ^7.0.0-0
    peerDependenciesMeta:
      msw:
        optional: true
      vite:
        optional: true

  '@vitest/pretty-format@3.2.4':
    resolution: {integrity: sha512-IVNZik8IVRJRTr9fxlitMKeJeXFFFN0JaB9PHPGQ8NKQbGpfjlTx9zO4RefN8gp7eqjNy8nyK3NZmBzOPeIxtA==}

  '@vitest/runner@3.2.4':
    resolution: {integrity: sha512-oukfKT9Mk41LreEW09vt45f8wx7DordoWUZMYdY/cyAk7w5TWkTRCNZYF7sX7n2wB7jyGAl74OxgwhPgKaqDMQ==}

  '@vitest/snapshot@3.2.4':
    resolution: {integrity: sha512-dEYtS7qQP2CjU27QBC5oUOxLE/v5eLkGqPE0ZKEIDGMs4vKWe7IjgLOeauHsR0D5YuuycGRO5oSRXnwnmA78fQ==}

  '@vitest/spy@3.2.4':
    resolution: {integrity: sha512-vAfasCOe6AIK70iP5UD11Ac4siNUNJ9i/9PZ3NKx07sG6sUxeag1LWdNrMWeKKYBLlzuK+Gn65Yd5nyL6ds+nw==}

  '@vitest/ui@3.2.4':
    resolution: {integrity: sha512-hGISOaP18plkzbWEcP/QvtRW1xDXF2+96HbEX6byqQhAUbiS5oH6/9JwW+QsQCIYON2bI6QZBF+2PvOmrRZ9wA==}
    peerDependencies:
      vitest: 3.2.4

  '@vitest/utils@3.2.4':
    resolution: {integrity: sha512-fB2V0JFrQSMsCo9HiSq3Ezpdv4iYaXRG1Sx8edX3MwxfyNn83mKiGzOcH+Fkxt4MHxr3y42fQi1oeAInqgX2QA==}

  '@volar/language-core@2.4.13':
    resolution: {integrity: sha512-MnQJ7eKchJx5Oz+YdbqyFUk8BN6jasdJv31n/7r6/WwlOOv7qzvot6B66887l2ST3bUW4Mewml54euzpJWA6bg==}

  '@volar/source-map@2.4.13':
    resolution: {integrity: sha512-l/EBcc2FkvHgz2ZxV+OZK3kMSroMr7nN3sZLF2/f6kWW66q8+tEL4giiYyFjt0BcubqJhBt6soYIrAPhg/Yr+Q==}

  '@volar/typescript@2.4.13':
    resolution: {integrity: sha512-Ukz4xv84swJPupZeoFsQoeJEOm7U9pqsEnaGGgt5ni3SCTa22m8oJP5Nng3Wed7Uw5RBELdLxxORX8YhJPyOgQ==}

  '@vue/compiler-core@3.5.13':
    resolution: {integrity: sha512-oOdAkwqUfW1WqpwSYJce06wvt6HljgY3fGeM9NcVA1HaYOij3mZG9Rkysn0OHuyUAGMbEbARIpsG+LPVlBJ5/Q==}

  '@vue/compiler-dom@3.5.13':
    resolution: {integrity: sha512-ZOJ46sMOKUjO3e94wPdCzQ6P1Lx/vhp2RSvfaab88Ajexs0AHeV0uasYhi99WPaogmBlRHNRuly8xV75cNTMDA==}

  '@vue/compiler-sfc@3.5.13':
    resolution: {integrity: sha512-6VdaljMpD82w6c2749Zhf5T9u5uLBWKnVue6XWxprDobftnletJ8+oel7sexFfM3qIxNmVE7LSFGTpv6obNyaQ==}

  '@vue/compiler-ssr@3.5.13':
    resolution: {integrity: sha512-wMH6vrYHxQl/IybKJagqbquvxpWCuVYpoUJfCqFZwa/JY1GdATAQ+TgVtgrwwMZ0D07QhA99rs/EAAWfvG6KpA==}

  '@vue/compiler-vue2@2.7.16':
    resolution: {integrity: sha512-qYC3Psj9S/mfu9uVi5WvNZIzq+xnXMhOwbTFKKDD7b1lhpnn71jXSFdTQ+WsIEk0ONCd7VV2IMm7ONl6tbQ86A==}

  '@vue/devtools-api@7.6.4':
    resolution: {integrity: sha512-5AaJ5ELBIuevmFMZYYLuOO9HUuY/6OlkOELHE7oeDhy4XD/hSODIzktlsvBOsn+bto3aD0psj36LGzwVu5Ip8w==}

  '@vue/devtools-kit@7.6.4':
    resolution: {integrity: sha512-Zs86qIXXM9icU0PiGY09PQCle4TI750IPLmAJzW5Kf9n9t5HzSYf6Rz6fyzSwmfMPiR51SUKJh9sXVZu78h2QA==}

  '@vue/devtools-shared@7.6.4':
    resolution: {integrity: sha512-nD6CUvBEel+y7zpyorjiUocy0nh77DThZJ0k1GRnJeOmY3ATq2fWijEp7wk37gb023Cb0R396uYh5qMSBQ5WFg==}

  '@vue/language-core@2.2.0':
    resolution: {integrity: sha512-O1ZZFaaBGkKbsRfnVH1ifOK1/1BUkyK+3SQsfnh6PmMmD4qJcTU8godCeA96jjDRTL6zgnK7YzCHfaUlH2r0Mw==}
    peerDependencies:
      typescript: '*'
    peerDependenciesMeta:
      typescript:
        optional: true

  '@vue/reactivity@3.5.13':
    resolution: {integrity: sha512-NaCwtw8o48B9I6L1zl2p41OHo/2Z4wqYGGIK1Khu5T7yxrn+ATOixn/Udn2m+6kZKB/J7cuT9DbWWhRxqixACg==}

  '@vue/runtime-core@3.5.13':
    resolution: {integrity: sha512-Fj4YRQ3Az0WTZw1sFe+QDb0aXCerigEpw418pw1HBUKFtnQHWzwojaukAs2X/c9DQz4MQ4bsXTGlcpGxU/RCIw==}

  '@vue/runtime-dom@3.5.13':
    resolution: {integrity: sha512-dLaj94s93NYLqjLiyFzVs9X6dWhTdAlEAciC3Moq7gzAc13VJUdCnjjRurNM6uTLFATRHexHCTu/Xp3eW6yoog==}

  '@vue/server-renderer@3.5.13':
    resolution: {integrity: sha512-wAi4IRJV/2SAW3htkTlB+dHeRmpTiVIK1OGLWV1yeStVSebSQQOwGwIq0D3ZIoBj2C2qpgz5+vX9iEBkTdk5YA==}
    peerDependencies:
      vue: 3.5.13

  '@vue/shared@3.5.13':
    resolution: {integrity: sha512-/hnE/qP5ZoGpol0a5mDi45bOd7t3tjYJBjsgCsivow7D48cJeV5l05RD82lPqi7gRiphZM37rnhW1l6ZoCNNnQ==}

  '@vueuse/core@11.2.0':
    resolution: {integrity: sha512-JIUwRcOqOWzcdu1dGlfW04kaJhW3EXnnjJJfLTtddJanymTL7lF1C0+dVVZ/siLfc73mWn+cGP1PE1PKPruRSA==}

  '@vueuse/integrations@11.2.0':
    resolution: {integrity: sha512-zGXz3dsxNHKwiD9jPMvR3DAxQEOV6VWIEYTGVSB9PNpk4pTWR+pXrHz9gvXWcP2sTk3W2oqqS6KwWDdntUvNVA==}
    peerDependencies:
      async-validator: ^4
      axios: ^1
      change-case: ^5
      drauu: ^0.4
      focus-trap: ^7
      fuse.js: ^7
      idb-keyval: ^6
      jwt-decode: ^4
      nprogress: ^0.2
      qrcode: ^1.5
      sortablejs: ^1
      universal-cookie: ^7
    peerDependenciesMeta:
      async-validator:
        optional: true
      axios:
        optional: true
      change-case:
        optional: true
      drauu:
        optional: true
      focus-trap:
        optional: true
      fuse.js:
        optional: true
      idb-keyval:
        optional: true
      jwt-decode:
        optional: true
      nprogress:
        optional: true
      qrcode:
        optional: true
      sortablejs:
        optional: true
      universal-cookie:
        optional: true

  '@vueuse/metadata@11.2.0':
    resolution: {integrity: sha512-L0ZmtRmNx+ZW95DmrgD6vn484gSpVeRbgpWevFKXwqqQxW9hnSi2Ppuh2BzMjnbv4aJRiIw8tQatXT9uOB23dQ==}

  '@vueuse/shared@11.2.0':
    resolution: {integrity: sha512-VxFjie0EanOudYSgMErxXfq6fo8vhr5ICI+BuE3I9FnX7ePllEsVrRQ7O6Q1TLgApeLuPKcHQxAXpP+KnlrJsg==}

  acorn-jsx@5.3.2:
    resolution: {integrity: sha512-rq9s+JNhf0IChjtDXxllJ7g41oZk5SlXtp0LHwyA5cejwn7vKmKp4pPri6YEePv2PU65sAsegbXtIinmDFDXgQ==}
    peerDependencies:
      acorn: ^6.0.0 || ^7.0.0 || ^8.0.0

  acorn-walk@8.3.4:
    resolution: {integrity: sha512-ueEepnujpqee2o5aIYnvHU6C0A42MNdsIDeqy5BydrkuC5R1ZuUFnm27EeFJGoEHJQgn3uleRvmTXaJgfXbt4g==}
    engines: {node: '>=0.4.0'}

  acorn@8.14.0:
    resolution: {integrity: sha512-cl669nCJTZBsL97OF4kUQm5g5hC2uihk0NxY3WENAC0TYdILVkAyHymAntgxGkl7K+t0cXIrH5siy5S4XkFycA==}
    engines: {node: '>=0.4.0'}
    hasBin: true

  acorn@8.15.0:
    resolution: {integrity: sha512-NZyJarBfL7nWwIq+FDL6Zp/yHEhePMNnnJ0y3qfieCrmNvYct8uvtiV41UvlSe6apAfk0fY1FbWx+NwfmpvtTg==}
    engines: {node: '>=0.4.0'}
    hasBin: true

  agent-base@7.1.1:
    resolution: {integrity: sha512-H0TSyFNDMomMNJQBn8wFV5YC/2eJ+VXECwOadZJT554xP6cODZHPX3H9QMQECxvrgiSOP1pHjy1sMWQVYJOUOA==}
    engines: {node: '>= 14'}

  aggregate-error@3.1.0:
    resolution: {integrity: sha512-4I7Td01quW/RpocfNayFdFVk1qSuoh0E7JrbRJ16nH01HhKFQ88INq9Sd+nd72zqRySlr9BmDA8xlEJ6vJMrYA==}
    engines: {node: '>=8'}

  ajv-draft-04@1.0.0:
    resolution: {integrity: sha512-mv00Te6nmYbRp5DCwclxtt7yV/joXJPGS7nM+97GdxvuttCOfgI3K4U25zboyeX0O+myI8ERluxQe5wljMmVIw==}
    peerDependencies:
      ajv: ^8.5.0
    peerDependenciesMeta:
      ajv:
        optional: true

  ajv-formats@3.0.1:
    resolution: {integrity: sha512-8iUql50EUR+uUcdRQ3HDqa6EVyo3docL8g5WJ3FNcWmu62IbkGUue/pEyLBW8VGKKucTPgqeks4fIU1DA4yowQ==}
    peerDependencies:
      ajv: ^8.0.0
    peerDependenciesMeta:
      ajv:
        optional: true

  ajv@6.12.6:
    resolution: {integrity: sha512-j3fVLgvTo527anyYyJOGTYJbG+vnnQYvE0m5mmkc1TK+nxAppkCLMIL0aZ4dblVCNoGShhm+kzE4ZUykBoMg4g==}

  ajv@8.12.0:
    resolution: {integrity: sha512-sRu1kpcO9yLtYxBKvqfTeh9KzZEwO3STyX1HT+4CaDzC6HpTGYhIhPIzj9XuKU7KYDwnaeh5hcOwjy1QuJzBPA==}

  ajv@8.13.0:
    resolution: {integrity: sha512-PRA911Blj99jR5RMeTunVbNXMF6Lp4vZXnk5GQjcnUWUTsrXtekg/pnmFFI2u/I36Y/2bITGS30GZCXei6uNkA==}

  ajv@8.17.1:
    resolution: {integrity: sha512-B/gBuNg5SiMTrPkC+A2+cW0RszwxYmn6VYxB/inlBStS5nx6xHIt/ehKRhIMhqusl7a8LjQoZnjCs5vhwxOQ1g==}

  algoliasearch@5.14.2:
    resolution: {integrity: sha512-aYjI4WLamMxbhdJ2QAA99VbDCJOGzMOdT2agh57bi40n86ufkhZSIAf6mkocr7NmtBLtwCnSHvD5NJ+Ky5elWw==}
    engines: {node: '>= 14.0.0'}

  alien-signals@0.4.14:
    resolution: {integrity: sha512-itUAVzhczTmP2U5yX67xVpsbbOiquusbWVyA9N+sy6+r6YVbFkahXvNCeEPWEOMhwDYwbVbGHFkVL03N9I5g+Q==}

  ansi-colors@4.1.3:
    resolution: {integrity: sha512-/6w/C21Pm1A7aZitlI5Ni/2J6FFQN8i1Cvz3kHABAAbw93v/NlvKdVOqz7CCWz/3iv/JplRSEEZ83XION15ovw==}
    engines: {node: '>=6'}

  ansi-escapes@4.3.2:
    resolution: {integrity: sha512-gKXj5ALrKWQLsYG9jlTRmR/xKluxHV+Z9QEwNIgCfM1/uwPMCuzVVnh5mwTd+OuBZcwSIMbqssNWRm1lE51QaQ==}
    engines: {node: '>=8'}

  ansi-escapes@7.1.1:
    resolution: {integrity: sha512-Zhl0ErHcSRUaVfGUeUdDuLgpkEo8KIFjB4Y9uAc46ScOpdDiU1Dbyplh7qWJeJ/ZHpbyMSM26+X3BySgnIz40Q==}
    engines: {node: '>=18'}

  ansi-regex@5.0.1:
    resolution: {integrity: sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ==}
    engines: {node: '>=8'}

  ansi-regex@6.1.0:
    resolution: {integrity: sha512-7HSX4QQb4CspciLpVFwyRe79O3xsIZDDLER21kERQ71oaPodF8jL725AgJMFAYbooIqolJoRLuM81SpeUkpkvA==}
    engines: {node: '>=12'}

  ansi-styles@3.2.1:
    resolution: {integrity: sha512-VT0ZI6kZRdTh8YyJw3SMbYm/u+NqfsAxEpWO0Pf9sq8/e94WxxOpPKx9FR1FlyCtOVDNOQ+8ntlqFxiRc+r5qA==}
    engines: {node: '>=4'}

  ansi-styles@4.3.0:
    resolution: {integrity: sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==}
    engines: {node: '>=8'}

  ansi-styles@6.2.1:
    resolution: {integrity: sha512-bN798gFfQX+viw3R7yrGWRqnrN2oRkEkUjjl4JNn4E8GxxbjtG3FbrEIIY3l8/hrwUwIeCZvi4QuOTP4MErVug==}
    engines: {node: '>=12'}

  arg@4.1.3:
    resolution: {integrity: sha512-58S9QDqG0Xx27YwPSt9fJxivjYl432YCwfDMfZ+71RAqUrZef7LrKQZ3LHLOwCS4FLNBplP533Zx895SeOCHvA==}

  argparse@1.0.10:
    resolution: {integrity: sha512-o5Roy6tNG4SL/FOkCAN6RzjiakZS25RLYFrcMttJqbdd8BWrnA+fGz57iN5Pb06pvBGvl5gQ0B48dJlslXvoTg==}

  argparse@2.0.1:
    resolution: {integrity: sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==}

  aria-query@5.3.2:
    resolution: {integrity: sha512-COROpnaoap1E2F000S62r6A60uHZnmlvomhfyT2DlTcrY1OrBKn2UhH7qn5wTC9zMvD0AY7csdPSNwKP+7WiQw==}
    engines: {node: '>= 0.4'}

  array-union@2.1.0:
    resolution: {integrity: sha512-HGyxoOTYUyCM6stUe6EJgnd4EoewAI7zMdfqO+kGjnlZmBDz/cR5pf8r/cR4Wq60sL/p0IkcjUEEPwS3GFrIyw==}
    engines: {node: '>=8'}

  assertion-error@2.0.1:
    resolution: {integrity: sha512-Izi8RQcffqCeNVgFigKli1ssklIbpHnCYc6AknXGYoB6grJqyeby7jv12JUQgmTAnIDnbck1uxksT4dzN3PWBA==}
    engines: {node: '>=12'}

  ast-types@0.13.4:
    resolution: {integrity: sha512-x1FCFnFifvYDDzTaLII71vG5uvDwgtmDTEVWAxrgeiR8VjMONcCXJx7E+USjDtHlwFmt9MysbqgF9b9Vjr6w+w==}
    engines: {node: '>=4'}

  ast-v8-to-istanbul@0.3.7:
    resolution: {integrity: sha512-kr1Hy6YRZBkGQSb6puP+D6FQ59Cx4m0siYhAxygMCAgadiWQ6oxAxQXHOMvJx67SJ63jRoVIIg5eXzUbbct1ww==}

  asynckit@0.4.0:
    resolution: {integrity: sha512-Oei9OH4tRh0YqU3GxhX79dM/mwVgvbZJaSNaRk+bshkj0S5cfHcgYakreBjrHwatXKbz+IoIdYLxrKim2MjW0Q==}

  at-least-node@1.0.0:
    resolution: {integrity: sha512-+q/t7Ekv1EDY2l6Gda6LLiX14rU9TV20Wa3ofeQmwPFZbOMo9DXrLbOjFaaclkXKWidIaopwAObQDqwWtGUjqg==}
    engines: {node: '>= 4.0.0'}

  axios@1.7.8:
    resolution: {integrity: sha512-Uu0wb7KNqK2t5K+YQyVCLM76prD5sRFjKHbJYCP1J7JFGEQ6nN7HWn9+04LAeiJ3ji54lgS/gZCH1oxyrf1SPw==}

  axobject-query@4.1.0:
    resolution: {integrity: sha512-qIj0G9wZbMGNLjLmg1PT6v2mE9AH2zlnADJD/2tC6E00hgmhUOfEB6greHPAfLRSufHqROIUTkw6E+M3lH0PTQ==}
    engines: {node: '>= 0.4'}

  babel-plugin-jsx-dom-expressions@0.39.3:
    resolution: {integrity: sha512-6RzmSu21zYPlV2gNwzjGG9FgODtt9hIWnx7L//OIioIEuRcnpDZoY8Tr+I81Cy1SrH4qoDyKpwHHo6uAMAeyPA==}
    peerDependencies:
      '@babel/core': ^7.20.12

  babel-preset-solid@1.9.3:
    resolution: {integrity: sha512-jvlx5wDp8s+bEF9sGFw/84SInXOA51ttkUEroQziKMbxplXThVKt83qB6bDTa1HuLNatdU9FHpFOiQWs1tLQIg==}
    peerDependencies:
      '@babel/core': ^7.0.0

  balanced-match@1.0.2:
    resolution: {integrity: sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==}

  base64-js@1.5.1:
    resolution: {integrity: sha512-AKpaYlHn8t4SVbOHCy+b5+KKgvR4vrsD8vbvrbiQJps7fKDTkjkDry6ji0rUJjC0kzbNePLwzxq8iypo41qeWA==}

  basic-ftp@5.0.5:
    resolution: {integrity: sha512-4Bcg1P8xhUuqcii/S0Z9wiHIrQVPMermM1any+MX5GeGD7faD3/msQUDGLol9wOcz4/jbg/WJnGqoJF6LiBdtg==}
    engines: {node: '>=10.0.0'}

  before-after-hook@2.2.3:
    resolution: {integrity: sha512-NzUnlZexiaH/46WDhANlyR2bXRopNg4F/zuSA3OpZnllCUgRaOF2znDioDWrmbNVsuZk6l9pMquQB38cfBZwkQ==}

  better-path-resolve@1.0.0:
    resolution: {integrity: sha512-pbnl5XzGBdrFU/wT4jqmJVPn2B6UHPBOhzMQkY/SPUPB6QtUXtmBHBIwCbXJol93mOpGMnQyP/+BB19q04xj7g==}
    engines: {node: '>=4'}

  better-promises@1.0.0:
    resolution: {integrity: sha512-gPgL2nRgeSbMIe3QpsYdKR3K0S9OZuphVuos60Eqsw8d/6GivOkyJ5D/zmnolJ6hzh7upnnflBUWUlQh4qpU2A==}

  birpc@0.2.19:
    resolution: {integrity: sha512-5WeXXAvTmitV1RqJFppT5QtUiz2p1mRSYU000Jkft5ZUCLJIk4uQriYNO50HknxKwM6jd8utNc66K1qGIwwWBQ==}

  bl@4.1.0:
    resolution: {integrity: sha512-1W07cM9gS6DcLperZfFSj+bWLtaPGSOHWhPiGzXmvVJbRLdG82sH/Kn8EtW1VqWVA54AKf2h5k5BbnIbwF3h6w==}

  brace-expansion@1.1.11:
    resolution: {integrity: sha512-iCuPHDFgrHX7H2vEI/5xpz07zSHB00TpugqhmYtVmMO6518mCuRMoOYFldEBl0g187ufozdaHgWKcYFb61qGiA==}

  brace-expansion@2.0.1:
    resolution: {integrity: sha512-XnAIvQ8eM+kC6aULx6wuQiwVsnzsi9d3WxzV3FpWTGA19F621kwdbsAcFKXgKUHZWsy+mY6iL1sHTxWEFCytDA==}

  braces@3.0.3:
    resolution: {integrity: sha512-yQbXgO/OSZVD2IsiLlro+7Hf6Q18EJrKSEsdoMzKePKXct3gvD8oLcOQdIzGupr5Fj+EDe8gO/lxc1BzfMpxvA==}
    engines: {node: '>=8'}

  browserslist@4.24.2:
    resolution: {integrity: sha512-ZIc+Q62revdMcqC6aChtW4jz3My3klmCO1fEmINZY/8J3EpBg5/A/D0AKmBveUh6pgoeycoMkVMko84tuYS+Gg==}
    engines: {node: ^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7}
    hasBin: true

  buffer@5.7.1:
    resolution: {integrity: sha512-EHcyIPBQ4BSGlvjB16k5KgAJ27CIsHY/2JBmCRReo48y9rQ3MaUzWX3KVlBa4U7MyX02HdVj0K7C3WaB3ju7FQ==}

  cac@6.7.14:
    resolution: {integrity: sha512-b6Ilus+c3RrdDk+JhLKUAQfzzgLEPy6wcXqS7f/xe1EETvsDP6GORG7SFuOs6cID5YkqchW/LXZbX5bc8j7ZcQ==}
    engines: {node: '>=8'}

  cachedir@2.3.0:
    resolution: {integrity: sha512-A+Fezp4zxnit6FanDmv9EqXNAi3vt9DWp51/71UEhXukb7QUuvtv9344h91dyAxuTLoSYJFU299qzR3tzwPAhw==}
    engines: {node: '>=6'}

  callsites@3.1.0:
    resolution: {integrity: sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==}
    engines: {node: '>=6'}

  camel-case@3.0.0:
    resolution: {integrity: sha512-+MbKztAYHXPr1jNTSKQF52VpcFjwY5RkR7fxksV8Doo4KAYc5Fl4UJRgthBbTmEx8C54DqahhbLJkDwjI3PI/w==}

  caniuse-lite@1.0.30001684:
    resolution: {integrity: sha512-G1LRwLIQjBQoyq0ZJGqGIJUXzJ8irpbjHLpVRXDvBEScFJ9b17sgK6vlx0GAJFE21okD7zXl08rRRUfq6HdoEQ==}

  ccount@2.0.1:
    resolution: {integrity: sha512-eyrF0jiFpY+3drT6383f1qhkbGsLSifNAjA61IUjZjmLCWjItY6LB9ft9YhoDgwfmclB2zhu51Lc7+95b8NRAg==}

  chai@5.2.0:
    resolution: {integrity: sha512-mCuXncKXk5iCLhfhwTc0izo0gtEmpz5CtG2y8GiOINBlMVS6v8TMRc5TaLWKS6692m9+dVVfzgeVxR5UxWHTYw==}
    engines: {node: '>=12'}

  chalk@2.4.2:
    resolution: {integrity: sha512-Mti+f9lpJNcwF4tWV8/OrTTtF1gZi+f8FqlyAdouralcFWFQWF2+NgCHShjkCb+IFBLq9buZwE1xckQU4peSuQ==}
    engines: {node: '>=4'}

  chalk@3.0.0:
    resolution: {integrity: sha512-4D3B6Wf41KOYRFdszmDqMCGq5VV/uMAB273JILmO+3jAlh8X4qDtdtgCR3fxtbLEMzSx22QdhnDcJvu2u1fVwg==}
    engines: {node: '>=8'}

  chalk@4.1.2:
    resolution: {integrity: sha512-oKnbhFyRIXpUuez8iBMmyEa4nbj4IOQyuhc/wy9kY7/WVPcwIO9VA668Pu8RkO7+0G76SLROeyw9CpQ061i4mA==}
    engines: {node: '>=10'}

  chalk@5.6.2:
    resolution: {integrity: sha512-7NzBL0rN6fMUW+f7A6Io4h40qQlG+xGmtMxfbnH/K7TAtt8JQWVQK+6g0UXKMeVJoyV5EkkNsErQ8pVD3bLHbA==}
    engines: {node: ^12.17.0 || ^14.13 || >=16.0.0}

  change-case@3.1.0:
    resolution: {integrity: sha512-2AZp7uJZbYEzRPsFoa+ijKdvp9zsrnnt6+yFokfwEpeJm0xuJDVoxiRCAaTzyJND8GJkofo2IcKWaUZ/OECVzw==}

  change-case@5.4.4:
    resolution: {integrity: sha512-HRQyTk2/YPEkt9TnUPbOpr64Uw3KOicFWPVBb+xiHvd6eBx/qPr9xqfBFDT8P2vWsvvz4jbEkfDe71W3VyNu2w==}

  character-entities-html4@2.1.0:
    resolution: {integrity: sha512-1v7fgQRj6hnSwFpq1Eu0ynr/CDEw0rXo2B61qXrLNdHZmPKgb7fqS1a2JwF0rISo9q77jDI8VMEHoApn8qDoZA==}

  character-entities-legacy@3.0.0:
    resolution: {integrity: sha512-RpPp0asT/6ufRm//AJVwpViZbGM/MkjQFxJccQRHmISF/22NBtsHqAWmL+/pmkPWoIUJdWyeVleTl1wydHATVQ==}

  chardet@0.7.0:
    resolution: {integrity: sha512-mT8iDcrh03qDGRRmoA2hmBJnxpllMR+0/0qlzjqZES6NdiWDcZkCNAk4rPFZ9Q85r27unkiNNg8ZOiwZXBHwcA==}

  check-error@2.1.1:
    resolution: {integrity: sha512-OAlb+T7V4Op9OwdkjmguYRqncdlx5JiofwOAUkmTF+jNdHwzTaTs4sRAGpzLF3oOz5xAyDGrPgeIDFQmDOTiJw==}
    engines: {node: '>= 16'}

  ci-info@3.9.0:
    resolution: {integrity: sha512-NIxF55hv4nSqQswkAeiOi1r83xy8JldOFDTWiug55KBu9Jnblncd2U6ViHmYgHf01TPZS77NJBhBMKdWj9HQMQ==}
    engines: {node: '>=8'}

  clean-stack@2.2.0:
    resolution: {integrity: sha512-4diC9HaTE+KRAMWhDhrGOECgWZxoevMc5TlkObMqNSsVU62PYzXZ/SMTjzyGAFF1YusgxGcSWTEXBhp0CPwQ1A==}
    engines: {node: '>=6'}

  cli-cursor@3.1.0:
    resolution: {integrity: sha512-I/zHAwsKf9FqGoXM4WWRACob9+SNukZTd94DWF57E4toouRulbCxcUh6RKUEOQlYTHJnzkPMySvPNaaSLNfLZw==}
    engines: {node: '>=8'}

  cli-cursor@5.0.0:
    resolution: {integrity: sha512-aCj4O5wKyszjMmDT4tZj93kxyydN/K5zPWSCe6/0AV/AA1pqe5ZBIw0a2ZfPQV7lL5/yb5HsUreJ6UFAF1tEQw==}
    engines: {node: '>=18'}

  cli-spinners@2.9.2:
    resolution: {integrity: sha512-ywqV+5MmyL4E7ybXgKys4DugZbX0FC6LnwrhjuykIjnK9k8OQacQ7axGKnjDXWNhns0xot3bZI5h55H8yo9cJg==}
    engines: {node: '>=6'}

  cli-spinners@3.3.0:
    resolution: {integrity: sha512-/+40ljC3ONVnYIttjMWrlL51nItDAbBrq2upN8BPyvGU/2n5Oxw3tbNwORCaNuNqLJnxGqOfjUuhsv7l5Q4IsQ==}
    engines: {node: '>=18.20'}

  cli-width@3.0.0:
    resolution: {integrity: sha512-FxqpkPPwu1HjuN93Omfm4h8uIanXofW0RxVEW3k5RKx+mJJYSthzNhp32Kzxxy3YAEZ/Dc/EWN1vZRY0+kOhbw==}
    engines: {node: '>= 10'}

  cli-width@4.1.0:
    resolution: {integrity: sha512-ouuZd4/dm2Sw5Gmqy6bGyNNNe1qt9RpmxveLSO7KcgsTnU7RXfsw+/bukWGo1abgBiMAic068rclZsO4IWmmxQ==}
    engines: {node: '>= 12'}

  clone@1.0.4:
    resolution: {integrity: sha512-JQHZ2QMW6l3aH/j6xCqQThY/9OH4D/9ls34cgkUBiEeocRTU04tHfKPBsUK1PqZCUQM7GiA0IIXJSuXHI64Kbg==}
    engines: {node: '>=0.8'}

  clsx@2.1.1:
    resolution: {integrity: sha512-eYm0QWBtUrBWZWG0d386OGAw16Z995PiOVo2B7bjWSbHedGl5e0ZWaq65kOGgUSNesEIDkB9ISbTg/JK9dhCZA==}
    engines: {node: '>=6'}

  color-convert@1.9.3:
    resolution: {integrity: sha512-QfAUtd+vFdAtFQcC8CCyYt1fYWxSqAiK2cSD6zDB8N3cpsEBAvRxp9zOGg6G/SHHJYAT88/az/IuDGALsNVbGg==}

  color-convert@2.0.1:
    resolution: {integrity: sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==}
    engines: {node: '>=7.0.0'}

  color-name@1.1.3:
    resolution: {integrity: sha512-72fSenhMw2HZMTVHeCA9KCmpEIbzWiQsjN+BHcBbS9vr1mtt+vJjPdksIBNUmKAW8TFUDPJK5SUU3QhE9NEXDw==}

  color-name@1.1.4:
    resolution: {integrity: sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA==}

  combined-stream@1.0.8:
    resolution: {integrity: sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==}
    engines: {node: '>= 0.8'}

  comma-separated-tokens@2.0.3:
    resolution: {integrity: sha512-Fu4hJdvzeylCfQPp9SGWidpzrMs7tTrlu6Vb8XGaRGck8QSNZJJp538Wrb60Lax4fPwR64ViY468OIUTbRlGZg==}

  commander@10.0.1:
    resolution: {integrity: sha512-y4Mg2tXshplEbSGzx7amzPwKKOCGuoSRP/CjEdwwk0FOGlUbq6lKuoyDZTNZkmxHdJtp54hdfY/JUrdL7Xfdug==}
    engines: {node: '>=14'}

  commander@14.0.1:
    resolution: {integrity: sha512-2JkV3gUZUVrbNA+1sjBOYLsMZ5cEEl8GTFP2a4AVz5hvasAMCQ1D2l2le/cX+pV4N6ZU17zjUahLpIXRrnWL8A==}
    engines: {node: '>=20'}

  commitizen@4.3.1:
    resolution: {integrity: sha512-gwAPAVTy/j5YcOOebcCRIijn+mSjWJC+IYKivTu6aG8Ei/scoXgfsMRnuAk6b0GRste2J4NGxVdMN3ZpfNaVaw==}
    engines: {node: '>= 12'}
    hasBin: true

  compare-versions@6.1.1:
    resolution: {integrity: sha512-4hm4VPpIecmlg59CHXnRDnqGplJFrbLG4aFEl5vl6cK1u76ws3LLvX7ikFnTDl5vo39sjWD6AaDPYodJp/NNHg==}

  concat-map@0.0.1:
    resolution: {integrity: sha512-/Srv4dswyQNBfohGpz9o6Yb3Gz3SrUDqBH5rTuhGR7ahtlbYKnVxw2bCFMRljaA7EXHaXZ8wsHdodFvbkhKmqg==}

  confbox@0.1.8:
    resolution: {integrity: sha512-RMtmw0iFkeR4YV+fUOSucriAQNb9g8zFR52MWCtl+cCZOFRNL6zeB395vPzFhEjjn4fMxXudmELnl/KF/WrK6w==}

  confbox@0.2.2:
    resolution: {integrity: sha512-1NB+BKqhtNipMsov4xI/NnhCKp9XG9NamYp5PVm9klAT0fsrNPjaFICsCFhNhwZJKNh7zB/3q8qXz0E9oaMNtQ==}

  constant-case@2.0.0:
    resolution: {integrity: sha512-eS0N9WwmjTqrOmR3o83F5vW8Z+9R1HnVz3xmzT2PMFug9ly+Au/fxRWlEBSb6LcZwspSsEn9Xs1uw9YgzAg1EQ==}

  conventional-commit-types@3.0.0:
    resolution: {integrity: sha512-SmmCYnOniSsAa9GqWOeLqc179lfr5TRu5b4QFDkbsrJ5TZjPJx85wtOr3zn+1dbeNiXDKGPbZ72IKbPhLXh/Lg==}

  convert-source-map@2.0.0:
    resolution: {integrity: sha512-Kvp459HrV2FEJ1CAsi1Ku+MY3kasH19TFykTz2xWmMeq6bk2NU3XXvfJ+Q61m0xktWwt+1HSYf3JZsTms3aRJg==}

  copy-anything@3.0.5:
    resolution: {integrity: sha512-yCEafptTtb4bk7GLEQoM8KVJpxAfdBJYaXyzQEgQQQgYrZiDp8SJmGKlYza6CYjEDNstAdNdKA3UuoULlEbS6w==}
    engines: {node: '>=12.13'}

  core-js-pure@3.39.0:
    resolution: {integrity: sha512-7fEcWwKI4rJinnK+wLTezeg2smbFFdSBP6E2kQZNbnzM2s1rpKQ6aaRteZSSg7FLU3P0HGGVo/gbpfanU36urg==}

  cosmiconfig-typescript-loader@5.1.0:
    resolution: {integrity: sha512-7PtBB+6FdsOvZyJtlF3hEPpACq7RQX6BVGsgC7/lfVXnKMvNCu/XY3ykreqG5w/rBNdu2z8LCIKoF3kpHHdHlA==}
    engines: {node: '>=v16'}
    peerDependencies:
      '@types/node': '*'
      cosmiconfig: '>=8.2'
      typescript: '>=4'

  cosmiconfig@9.0.0:
    resolution: {integrity: sha512-itvL5h8RETACmOTFc4UfIyB2RfEHi71Ax6E/PivVxq9NseKbOWpeyHEOIbmAw1rs8Ak0VursQNww7lf7YtUwzg==}
    engines: {node: '>=14'}
    peerDependencies:
      typescript: '>=4.9.5'
    peerDependenciesMeta:
      typescript:
        optional: true

  create-require@1.1.1:
    resolution: {integrity: sha512-dcKFX3jn0MpIaXjisoRvexIJVEKzaq7z2rZKxf+MSr9TkdmHmsU4m2lcLojrj/FHl8mk5VxMmYA+ftRkP/3oKQ==}

  cross-env@7.0.3:
    resolution: {integrity: sha512-+/HKd6EgcQCJGh2PSjZuUitQBQynKor4wrFbRg4DtAgS1aWO+gU52xpH7M9ScGgXSYmAVS9bIJ8EzuaGw0oNAw==}
    engines: {node: '>=10.14', npm: '>=6', yarn: '>=1'}
    hasBin: true

  cross-spawn@7.0.6:
    resolution: {integrity: sha512-uV2QOWP2nWzsy2aMp8aRibhi9dlzF5Hgh5SHaB9OiTGEyDTiJJyx0uy51QXdyWbtAHNua4XJzUKca3OzKUd3vA==}
    engines: {node: '>= 8'}

  cssstyle@4.1.0:
    resolution: {integrity: sha512-h66W1URKpBS5YMI/V8PyXvTMFT8SupJ1IzoIV8IeBC/ji8WVmrO8dGlTi+2dh6whmdk6BiKJLD/ZBkhWbcg6nA==}
    engines: {node: '>=18'}

  csstype@3.1.3:
    resolution: {integrity: sha512-M1uQkMl8rQK/szD0LNhtqxIPLpimGm8sOBwU7lLnCpSbTyY3yeU1Vc7l4KT5zT4s/yOxHH5O7tIuuLOCnLADRw==}

  cz-conventional-changelog@3.3.0:
    resolution: {integrity: sha512-U466fIzU5U22eES5lTNiNbZ+d8dfcHcssH4o7QsdWaCcRs/feIPCxKYSWkYBNs5mny7MvEfwpTLWjvbm94hecw==}
    engines: {node: '>= 10'}

  data-uri-to-buffer@6.0.2:
    resolution: {integrity: sha512-7hvf7/GW8e86rW0ptuwS3OcBGDjIi6SZva7hCyWC0yYry2cOPmLIjXAUHI6DK2HsnwJd9ifmt57i8eV2n4YNpw==}
    engines: {node: '>= 14'}

  data-urls@5.0.0:
    resolution: {integrity: sha512-ZYP5VBHshaDAiVZxjbRVcFJpc+4xGgT0bK3vzy1HLN8jTO975HEbuYzZJcHoQEY5K1a0z8YayJkyVETa08eNTg==}
    engines: {node: '>=18'}

  de-indent@1.0.2:
    resolution: {integrity: sha512-e/1zu3xH5MQryN2zdVaF0OrdNLUbvWxzMbi+iNA6Bky7l1RoP8a2fIbRocyHclXt/arDrrR6lL3TqFD9pMQTsg==}

  debug@4.3.7:
    resolution: {integrity: sha512-Er2nc/H7RrMXZBFCEim6TCmMk02Z8vLC2Rbi1KEBggpo0fS6l0S1nnapwmIi3yW/+GOJap1Krg4w0Hg80oCqgQ==}
    engines: {node: '>=6.0'}
    peerDependencies:
      supports-color: '*'
    peerDependenciesMeta:
      supports-color:
        optional: true

  debug@4.4.0:
    resolution: {integrity: sha512-6WTZ/IxCY/T6BALoZHaE4ctp9xm+Z5kY/pzYaCHRFeyVhojxlrm+46y68HA6hr0TcwEssoxNiDEUJQjfPZ/RYA==}
    engines: {node: '>=6.0'}
    peerDependencies:
      supports-color: '*'
    peerDependenciesMeta:
      supports-color:
        optional: true

  debug@4.4.3:
    resolution: {integrity: sha512-RGwwWnwQvkVfavKVt22FGLw+xYSdzARwm0ru6DhTVA3umU5hZc28V3kO4stgYryrTlLpuvgI9GiijltAjNbcqA==}
    engines: {node: '>=6.0'}
    peerDependencies:
      supports-color: '*'
    peerDependenciesMeta:
      supports-color:
        optional: true

  decimal.js@10.4.3:
    resolution: {integrity: sha512-VBBaLc1MgL5XpzgIP7ny5Z6Nx3UrRkIViUkPUdtl9aya5amy3De1gsUUSB1g3+3sExYNjCAsAznmukyxCb1GRA==}

  dedent@0.7.0:
    resolution: {integrity: sha512-Q6fKUPqnAHAyhiUgFU7BUzLiv0kd8saH9al7tnu5Q/okj6dnupxyTgFIBjVzJATdfIAm9NAsvXNzjaKa+bxVyA==}

  deep-eql@5.0.2:
    resolution: {integrity: sha512-h5k/5U50IJJFpzfL6nO9jaaumfjO/f2NjK/oYB2Djzm4p9L+3T9qWpZqZ2hAbLPuuYq9wrU08WQyBTL5GbPk5Q==}
    engines: {node: '>=6'}

  deep-extend@0.6.0:
    resolution: {integrity: sha512-LOHxIOaPYdHlJRtCQfDIVZtfw/ufM8+rVj649RIHzcm/vGwQRXFt6OPqIFWsm2XEMrNIEtWR64sY1LEKD2vAOA==}
    engines: {node: '>=4.0.0'}

  deep-is@0.1.4:
    resolution: {integrity: sha512-oIPzksmTg4/MriiaYGO+okXDT7ztn/w3Eptv/+gSIdMdKsJo0u4CfYNFJPy+4SKMuCqGw2wxnA+URMg3t8a/bQ==}

  deepmerge@4.3.1:
    resolution: {integrity: sha512-3sUqbMEc77XqpdNO7FRyRog+eW3ph+GYCbj+rK+uYyRMuwsVy0rMiVtPn+QJlKFvWP/1PYpapqYn0Me2knFn+A==}
    engines: {node: '>=0.10.0'}

  defaults@1.0.4:
    resolution: {integrity: sha512-eFuaLoy/Rxalv2kr+lqMlUnrDWV+3j4pljOIJgLIhI058IQfWJ7vXhyEIHu+HtC738klGALYxOKDO0bQP3tg8A==}

  degenerator@5.0.1:
    resolution: {integrity: sha512-TllpMR/t0M5sqCXfj85i4XaAzxmS5tVA16dqvdkMwGmzI+dXLXnw3J+3Vdv7VKw+ThlTMboK6i9rnZ6Nntj5CQ==}
    engines: {node: '>= 14'}

  del@5.1.0:
    resolution: {integrity: sha512-wH9xOVHnczo9jN2IW68BabcecVPxacIA3g/7z6vhSU/4stOKQzeCRK0yD0A24WiAAUJmmVpWqrERcTxnLo3AnA==}
    engines: {node: '>=8'}

  delayed-stream@1.0.0:
    resolution: {integrity: sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==}
    engines: {node: '>=0.4.0'}

  deprecation@2.3.1:
    resolution: {integrity: sha512-xmHIy4F3scKVwMsQ4WnVaS8bHOx0DmVwRywosKhaILI0ywMDWPtBSku2HNxRvF7jtwDRsoEwYQSfbxj8b7RlJQ==}

  dequal@2.0.3:
    resolution: {integrity: sha512-0je+qPKHEMohvfRTCEo3CrPG6cAzAYgmzKyxRiYSSDkS6eGJdyVJm7WaYA5ECaAD9wLB2T4EEeymA5aFVcYXCA==}
    engines: {node: '>=6'}

  detect-file@1.0.0:
    resolution: {integrity: sha512-DtCOLG98P007x7wiiOmfI0fi3eIKyWiLTGJ2MDnVi/E04lWGbf+JzrRHMm0rgIIZJGtHpKpbVgLWHrv8xXpc3Q==}
    engines: {node: '>=0.10.0'}

  detect-indent@6.1.0:
    resolution: {integrity: sha512-reYkTUJAZb9gUuZ2RvVCNhVHdg62RHnJ7WJl8ftMi4diZ6NWlciOzQN88pUhSELEwflJht4oQDv0F0BMlwaYtA==}
    engines: {node: '>=8'}

  devlop@1.1.0:
    resolution: {integrity: sha512-RWmIqhcFf1lRYBvNmr7qTNuyCt/7/ns2jbpp1+PalgE/rDQcBT0fioSMUpJ93irlUhC5hrg4cYqe6U+0ImW0rA==}

  diff@4.0.2:
    resolution: {integrity: sha512-58lmxKSA4BNyLz+HHMUzlOEpg09FV+ev6ZMe3vJihgdxzgcwZ8VoEEPmALCZG9LmqfVoNMMKpttIYTVG6uDY7A==}
    engines: {node: '>=0.3.1'}

  dir-glob@3.0.1:
    resolution: {integrity: sha512-WkrWp9GR4KXfKGYzOLmTuGVi1UWFfws377n9cc55/tb6DuqyF6pcQ5AbiHEshaDpY9v6oaSr2XCDidGmMwdzIA==}
    engines: {node: '>=8'}

  dot-case@2.1.1:
    resolution: {integrity: sha512-HnM6ZlFqcajLsyudHq7LeeLDr2rFAVYtDv/hV5qchQEidSck8j9OPUsXY9KwJv/lHMtYlX4DjRQqwFYa+0r8Ug==}

  eastasianwidth@0.2.0:
    resolution: {integrity: sha512-I88TYZWc9XiYHRQ4/3c5rjjfgkjhLyW2luGIheGERbNQ6OY7yTybanSpDXZa8y7VUP9YmDcYa+eyq4ca7iLqWA==}

  electron-to-chromium@1.5.67:
    resolution: {integrity: sha512-nz88NNBsD7kQSAGGJyp8hS6xSPtWwqNogA0mjtc2nUYeEf3nURK9qpV18TuBdDmEDgVWotS8Wkzf+V52dSQ/LQ==}

  emoji-regex-xs@1.0.0:
    resolution: {integrity: sha512-LRlerrMYoIDrT6jgpeZ2YYl/L8EulRTt5hQcYjy5AInh7HWXKimpqx68aknBFpGL2+/IcogTcaydJEgaTmOpDg==}

  emoji-regex@8.0.0:
    resolution: {integrity: sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==}

  emoji-regex@9.2.2:
    resolution: {integrity: sha512-L18DaJsXSUk2+42pv8mLs5jJT2hqFkFE4j21wOmgbUqsZ2hL72NsUU785g9RXgo3s0ZNgVl42TiHp3ZtOv/Vyg==}

  enquirer@2.4.1:
    resolution: {integrity: sha512-rRqJg/6gd538VHvR3PSrdRBb/1Vy2YfzHqzvbhGIQpDRKIa4FgV/54b5Q1xYSxOOwKvjXweS26E0Q+nAMwp2pQ==}
    engines: {node: '>=8.6'}

  entities@4.5.0:
    resolution: {integrity: sha512-V0hjH4dGPh9Ao5p0MoRY6BVqtwCjhz6vI5LT8AJ55H+4g9/4vbHx1I54fS0XuclLhDHArPQCiMjDxjaL8fPxhw==}
    engines: {node: '>=0.12'}

  env-paths@2.2.1:
    resolution: {integrity: sha512-+h1lkLKhZMTYjog1VEpJNG7NZJWcuc2DDk/qsqSTRRCOXiLjeQ1d1/udrUGhqMxUgAlwKNZ0cf2uqan5GLuS2A==}
    engines: {node: '>=6'}

  environment@1.1.0:
    resolution: {integrity: sha512-xUtoPkMggbz0MPyPiIWr1Kp4aeWJjDZ6SMvURhimjdZgsRuDplF5/s9hcgGhyXMhs+6vpnuoiZ2kFiu3FMnS8Q==}
    engines: {node: '>=18'}

  error-ex@1.3.2:
    resolution: {integrity: sha512-7dFHNmqeFSEt2ZBsCriorKnn3Z2pj+fd9kmI6QoWw4//DL+icEBfc0U7qJCisqrTsKTjw4fNFy2pW9OqStD84g==}

  error-kid@1.0.2:
    resolution: {integrity: sha512-Xvq0ZrY/azCbREWKt9E/3mXDF0MkuEVVvHnOKutUhtq2O8pyneEixQ4nSFkA19Xfn+/OVSg//iVG0dxIDj7DIA==}

  es-module-lexer@1.7.0:
    resolution: {integrity: sha512-jEQoCwk8hyb2AZziIOLhDqpm5+2ww5uIE6lkO/6jcOCusfk6LhMHpXXfBLXTZ7Ydyt0j4VoUQv6uGNYbdW+kBA==}

  esbuild@0.21.5:
    resolution: {integrity: sha512-mg3OPMV4hXywwpoDxu3Qda5xCKQi+vCTZq8S9J/EpkhB2HzKXq4SNFZE3+NK93JYxc8VMSep+lOUSC/RVKaBqw==}
    engines: {node: '>=12'}
    hasBin: true

  esbuild@0.23.1:
    resolution: {integrity: sha512-VVNz/9Sa0bs5SELtn3f7qhJCDPCF5oMEl5cO9/SSinpE9hbPVvxbd572HH5AKiP7WD8INO53GgfDDhRjkylHEg==}
    engines: {node: '>=18'}
    hasBin: true

  esbuild@0.25.3:
    resolution: {integrity: sha512-qKA6Pvai73+M2FtftpNKRxJ78GIjmFXFxd/1DVBqGo/qNhLSfv+G12n9pNoWdytJC8U00TrViOwpjT0zgqQS8Q==}
    engines: {node: '>=18'}
    hasBin: true

  escalade@3.2.0:
    resolution: {integrity: sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==}
    engines: {node: '>=6'}

  escape-string-regexp@1.0.5:
    resolution: {integrity: sha512-vbRorB5FUQWvla16U8R/qgaFIya2qGzwDrNmCZuYKrbdSUMG6I1ZCGQRefkRVhuOkIGVne7BQ35DSfo1qvJqFg==}
    engines: {node: '>=0.8.0'}

  escape-string-regexp@4.0.0:
    resolution: {integrity: sha512-TtpcNJ3XAzx3Gq8sWRzJaVajRs0uVxA2YAkdb1jm2YkPz4G6egUFAyA3n5vtEIZefPk5Wa4UXbKuS5fKkJWdgA==}
    engines: {node: '>=10'}

  escodegen@2.1.0:
    resolution: {integrity: sha512-2NlIDTwUWJN0mRPQOdtQBzbUHvdGY2P1VXSyU83Q3xKxM7WHX2Ql8dKq782Q9TgQUNOLEzEYu9bzLNj1q88I5w==}
    engines: {node: '>=6.0'}
    hasBin: true

  eslint-scope@8.2.0:
    resolution: {integrity: sha512-PHlWUfG6lvPc3yvP5A4PNyBL1W8fkDUccmI21JUu/+GKZBoH/W5u6usENXUrWFRsyoW5ACUjFGgAFQp5gUlb/A==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}

  eslint-visitor-keys@3.4.3:
    resolution: {integrity: sha512-wpc+LXeiyiisxPlEkUzU6svyS1frIO3Mgxj1fdy7Pm8Ygzguax2N3Fa/D/ag1WqbOprdI+uY6wMUl8/a2G+iag==}
    engines: {node: ^12.22.0 || ^14.17.0 || >=16.0.0}

  eslint-visitor-keys@4.2.0:
    resolution: {integrity: sha512-UyLnSehNt62FFhSwjZlHmeokpRK59rcz29j+F1/aDgbkbRTk7wIc9XzdoasMUbRNKDM0qQt/+BJ4BrpFeABemw==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}

  eslint-visitor-keys@4.2.1:
    resolution: {integrity: sha512-Uhdk5sfqcee/9H/rCOJikYz67o0a2Tw2hGRPOG2Y1R2dg7brRe1uG0yaNQDHu+TO/uQPF/5eCapvYSmHUjt7JQ==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}

  eslint@9.16.0:
    resolution: {integrity: sha512-whp8mSQI4C8VXd+fLgSM0lh3UlmcFtVwUQjyKCFfsp+2ItAIYhlq/hqGahGqHE6cv9unM41VlqKk2VtKYR2TaA==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}
    hasBin: true
    peerDependencies:
      jiti: '*'
    peerDependenciesMeta:
      jiti:
        optional: true

  esm-env@1.2.2:
    resolution: {integrity: sha512-Epxrv+Nr/CaL4ZcFGPJIYLWFom+YeV1DqMLHJoEd9SYRxNbaFruBwfEX/kkHUJf55j2+TUbmDcmuilbP1TmXHA==}

  espree@10.3.0:
    resolution: {integrity: sha512-0QYC8b24HWY8zjRnDTL6RiHfDbAWn63qb4LMj1Z4b076A4une81+z03Kg7l7mn/48PUTqoLptSXez8oknU8Clg==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}

  espree@10.4.0:
    resolution: {integrity: sha512-j6PAQ2uUr79PZhBjP5C5fhl8e39FmRnOjsD5lGnWrFU8i2G776tBK7+nP8KuQUTTyAZUwfQqXAgrVH5MbH9CYQ==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}

  esprima@4.0.1:
    resolution: {integrity: sha512-eGuFFw7Upda+g4p+QHvnW0RyTX/SVeJBDM/gCtMARO0cLuT2HcEKnTPvhjV6aGeqrCB/sbNop0Kszm0jsaWU4A==}
    engines: {node: '>=4'}
    hasBin: true

  esquery@1.6.0:
    resolution: {integrity: sha512-ca9pw9fomFcKPvFLXhBKUK90ZvGibiGOvRJNbjljY7s7uq/5YO4BOzcYtJqExdx99rF6aAcnRxHmcUHcz6sQsg==}
    engines: {node: '>=0.10'}

  esrap@2.1.0:
    resolution: {integrity: sha512-yzmPNpl7TBbMRC5Lj2JlJZNPml0tzqoqP5B1JXycNUwtqma9AKCO0M2wHrdgsHcy1WRW7S9rJknAMtByg3usgA==}

  esrecurse@4.3.0:
    resolution: {integrity: sha512-KmfKL3b6G+RXvP8N1vr3Tq1kL/oCFgn2NYXEtqP8/L3pKapUA4G8cFVaoF3SU323CD4XypR/ffioHmkti6/Tag==}
    engines: {node: '>=4.0'}

  estraverse@5.3.0:
    resolution: {integrity: sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==}
    engines: {node: '>=4.0'}

  estree-walker@2.0.2:
    resolution: {integrity: sha512-Rfkk/Mp/DL7JVje3u18FxFujQlTNR2q6QfMSMB7AvCBx91NGj/ba3kCfza0f6dVDbw7YlRf/nDrn7pQrCCyQ/w==}

  estree-walker@3.0.3:
    resolution: {integrity: sha512-7RUKfXgSMMkzt6ZuXmqapOurLGPPfgj6l9uRZ7lRGolvk0y2yocc35LdcxKC5PQZdn2DMqioAQ2NoWcrTKmm6g==}

  esutils@2.0.3:
    resolution: {integrity: sha512-kVscqXk4OCp68SZ0dkgEKVi6/8ij300KBWTJq32P/dYeWTSwK41WyTxalN1eRmA5Z9UU/LX9D7FWSmV9SAYx6g==}
    engines: {node: '>=0.10.0'}

  execa@5.1.1:
    resolution: {integrity: sha512-8uSpZZocAZRBAPIEINJj3Lo9HyGitllczc27Eh5YYojjMFMn8yHMDMaUHE2Jqfq05D/wucwI4JGURyXt1vchyg==}
    engines: {node: '>=10'}

  expand-tilde@2.0.2:
    resolution: {integrity: sha512-A5EmesHW6rfnZ9ysHQjPdJRni0SRar0tjtG5MNtm9n5TUvsYU8oozprtRD4AqHxcZWWlVuAmQo2nWKfN9oyjTw==}
    engines: {node: '>=0.10.0'}

  expect-type@1.2.1:
    resolution: {integrity: sha512-/kP8CAwxzLVEeFrMm4kMmy4CCDlpipyA7MYLVrdJIkV0fYF0UaigQHRsxHiuY/GEea+bh4KSv3TIlgr+2UL6bw==}
    engines: {node: '>=12.0.0'}

  exsolve@1.0.5:
    resolution: {integrity: sha512-pz5dvkYYKQ1AHVrgOzBKWeP4u4FRb3a6DNK2ucr0OoNwYIU4QWsJ+NM36LLzORT+z845MzKHHhpXiUF5nvQoJg==}

  extendable-error@0.1.7:
    resolution: {integrity: sha512-UOiS2in6/Q0FK0R0q6UY9vYpQ21mr/Qn1KOnte7vsACuNJf514WvCCUHSRCPcgjPT2bAhNIJdlE6bVap1GKmeg==}

  external-editor@3.1.0:
    resolution: {integrity: sha512-hMQ4CX1p1izmuLYyZqLMO/qGNw10wSv9QDCPfzXfyFrOaCSSoRfqE1Kf1s5an66J5JZC62NewG+mK49jOCtQew==}
    engines: {node: '>=4'}

  fast-deep-equal@3.1.3:
    resolution: {integrity: sha512-f3qQ9oQy9j2AhBe/H9VC91wLmKBCCU/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==}

  fast-glob@3.3.2:
    resolution: {integrity: sha512-oX2ruAFQwf/Orj8m737Y5adxDQO0LAB7/S5MnxCdTNDd4p6BsyIVsv9JQsATbTSq8KHRpLwIHbVlUNatxd+1Ow==}
    engines: {node: '>=8.6.0'}

  fast-json-stable-stringify@2.1.0:
    resolution: {integrity: sha512-lhd/wF+Lk98HZoTCtlVraHtfh5XYijIjalXck7saUtuanSDyLMxnHhSXEDJqHxD7msR8D0uCmqlkwjCV8xvwHw==}

  fast-levenshtein@2.0.6:
    resolution: {integrity: sha512-DCXu6Ifhqcks7TZKY3Hxp3y6qphY5SJZmrWMDrKcERSOXWQdMhU9Ig/PYrzyw/ul9jOIyh0N4M0tbC5hodg8dw==}

  fast-uri@3.0.3:
    resolution: {integrity: sha512-aLrHthzCjH5He4Z2H9YZ+v6Ujb9ocRuW6ZzkJQOrTxleEijANq4v1TsaPaVG1PZcuurEzrLcWRyYBYXD5cEiaw==}

  fastq@1.17.1:
    resolution: {integrity: sha512-sRVD3lWVIXWg6By68ZN7vho9a1pQcN/WBFaAAsDDFzlJjvoGx0P8z7V1t72grFJfJhu3YPZBuu25f7Kaw2jN1w==}

  fdir@6.4.4:
    resolution: {integrity: sha512-1NZP+GK4GfuAv3PqKvxQRDMjdSRZjnkq7KfhlNrCNNlZ0ygQFpebfrnfnq/W7fpUnAv9aGWmY1zKx7FYL3gwhg==}
    peerDependencies:
      picomatch: ^3 || ^4
    peerDependenciesMeta:
      picomatch:
        optional: true

  fdir@6.5.0:
    resolution: {integrity: sha512-tIbYtZbucOs0BRGqPJkshJUYdL+SDH7dVM8gjy+ERp3WAUjLEFJE+02kanyHtwjWOnwrKYBiwAmM0p4kLJAnXg==}
    engines: {node: '>=12.0.0'}
    peerDependencies:
      picomatch: ^3 || ^4
    peerDependenciesMeta:
      picomatch:
        optional: true

  fflate@0.8.2:
    resolution: {integrity: sha512-cPJU47OaAoCbg0pBvzsgpTPhmhqI5eJjh/JIu8tPj5q+T7iLvW/JAYUqmE7KOB4R1ZyEhzBaIQpQpardBF5z8A==}

  figures@3.2.0:
    resolution: {integrity: sha512-yaduQFRKLXYOGgEn6AZau90j3ggSOyiqXU0F9JZfeXYhNa+Jk4X+s45A2zg5jns87GAFa34BBm2kXw4XpNcbdg==}
    engines: {node: '>=8'}

  figures@6.1.0:
    resolution: {integrity: sha512-d+l3qxjSesT4V7v2fh+QnmFnUWv9lSpjarhShNTgBOfA0ttejbQUAlHLitbjkoRiDulW0OPoQPYIGhIC8ohejg==}
    engines: {node: '>=18'}

  file-entry-cache@8.0.0:
    resolution: {integrity: sha512-XXTUwCvisa5oacNGRP9SfNtYBNAMi+RPwBFmblZEF7N7swHYQS6/Zfk7SRwx4D5j3CH211YNRco1DEMNVfZCnQ==}
    engines: {node: '>=16.0.0'}

  fill-range@7.1.1:
    resolution: {integrity: sha512-YsGpe3WHLK8ZYi4tWDg2Jy3ebRz2rXowDxnld4bkQB00cc/1Zw9AWnC0i9ztDJitivtQvaI9KaLyKrc+hBW0yg==}
    engines: {node: '>=8'}

  find-node-modules@2.1.3:
    resolution: {integrity: sha512-UC2I2+nx1ZuOBclWVNdcnbDR5dlrOdVb7xNjmT/lHE+LsgztWks3dG7boJ37yTS/venXw84B/mAW9uHVoC5QRg==}

  find-root@1.1.0:
    resolution: {integrity: sha512-NKfW6bec6GfKc0SGx1e07QZY9PE99u0Bft/0rzSD5k3sO/vwkVUpDUKVm5Gpp5Ue3YfShPFTX2070tDs5kB9Ng==}

  find-up@4.1.0:
    resolution: {integrity: sha512-PpOwAdQ/YlXQ2vj8a3h8IipDuYRi3wceVQQGYWxNINccq40Anw7BlsEXCMbt1Zt+OLA6Fq9suIpIWD0OsnISlw==}
    engines: {node: '>=8'}

  find-up@5.0.0:
    resolution: {integrity: sha512-78/PXT1wlLLDgTzDs7sjq9hzz0vXD+zn+7wypEe4fXQxCmdmqfGsEPQxmiCSQI3ajFV91bVSsvNtrJRiW6nGng==}
    engines: {node: '>=10'}

  findup-sync@4.0.0:
    resolution: {integrity: sha512-6jvvn/12IC4quLBL1KNokxC7wWTvYncaVUYSoxWw7YykPLuRrnv4qdHcSOywOI5RpkOVGeQRtWM8/q+G6W6qfQ==}
    engines: {node: '>= 8'}

  flat-cache@4.0.1:
    resolution: {integrity: sha512-f7ccFPK3SXFHpx15UIGyRJ/FJQctuKZ0zVuN3frBo4HnK3cay9VEW0R6yPYFHC0AgqhukPzKjq22t5DmAyqGyw==}
    engines: {node: '>=16'}

  flatted@3.3.2:
    resolution: {integrity: sha512-AiwGJM8YcNOaobumgtng+6NHuOqC3A7MixFeDafM3X9cIUM+xUXoS5Vfgf+OihAYe20fxqNM9yPBXJzRtZ/4eA==}

  flatted@3.3.3:
    resolution: {integrity: sha512-GX+ysw4PBCz0PzosHDepZGANEuFCMLrnRTiEy9McGjmkCQYwRq4A/X786G/fjM/+OjsWSU1ZrY5qyARZmO/uwg==}

  focus-trap@7.6.2:
    resolution: {integrity: sha512-9FhUxK1hVju2+AiQIDJ5Dd//9R2n2RAfJ0qfhF4IHGHgcoEUTMpbTeG/zbEuwaiYXfuAH6XE0/aCyxDdRM+W5w==}

  follow-redirects@1.15.9:
    resolution: {integrity: sha512-gew4GsXizNgdoRyqmyfMHyAmXsZDk6mHkSxZFCzW9gwlbtOW44CDtYavM+y+72qD/Vq2l550kMF52DT8fOLJqQ==}
    engines: {node: '>=4.0'}
    peerDependencies:
      debug: '*'
    peerDependenciesMeta:
      debug:
        optional: true

  foreground-child@3.3.0:
    resolution: {integrity: sha512-Ld2g8rrAyMYFXBhEqMz8ZAHBi4J4uS1i/CxGMDnjyFWddMXLVcDp051DZfu+t7+ab7Wv6SMqpWmyFIj5UbfFvg==}
    engines: {node: '>=14'}

  form-data@4.0.1:
    resolution: {integrity: sha512-tzN8e4TX8+kkxGPK8D5u0FNmjPUjw3lwC9lSLxxoB/+GtsJG91CO8bSWy73APlgAZzZbXEYZJuxjkHH2w+Ezhw==}
    engines: {node: '>= 6'}

  fp-ts@2.16.11:
    resolution: {integrity: sha512-LaI+KaX2NFkfn1ZGHoKCmcfv7yrZsC3b8NtWsTVQeHkq4F27vI5igUuO53sxqDEa2gNQMHFPmpojDw/1zmUK7w==}

  fs-extra@10.1.0:
    resolution: {integrity: sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==}
    engines: {node: '>=12'}

  fs-extra@11.2.0:
    resolution: {integrity: sha512-PmDi3uwK5nFuXh7XDTlVnS17xJS7vW36is2+w3xcv8SVxiB4NyATf4ctkVY5bkSjX0Y4nbvZCq1/EjtEyr9ktw==}
    engines: {node: '>=14.14'}

  fs-extra@11.3.0:
    resolution: {integrity: sha512-Z4XaCL6dUDHfP/jT25jJKMmtxvuwbkrD1vNSMFlo9lNLY2c5FHYSQgHPRZUjAB26TpDEoW9HCOgplrdbaPV/ew==}
    engines: {node: '>=14.14'}

  fs-extra@7.0.1:
    resolution: {integrity: sha512-YJDaCJZEnBmcbw13fvdAM9AwNOJwOzrE4pqMqBq5nFiEqXUqHwlK4B+3pUw6JNvfSPtX05xFHtYy/1ni01eGCw==}
    engines: {node: '>=6 <7 || >=8'}

  fs-extra@8.1.0:
    resolution: {integrity: sha512-yhlQgA6mnOJUKOsRUFsgJdQCvkKhcz8tlZG5HBQfReYZy46OwLcY+Zia0mtdHsOo9y/hP+CxMN0TU9QxoOtG4g==}
    engines: {node: '>=6 <7 || >=8'}

  fs-extra@9.1.0:
    resolution: {integrity: sha512-hcg3ZmepS30/7BSFqRvoo3DOMQu7IjqxO5nCDt+zM9XWjb33Wg7ziNT+Qvqbuc3+gWpzO02JubVyk2G4Zvo1OQ==}
    engines: {node: '>=10'}

  fs.realpath@1.0.0:
    resolution: {integrity: sha512-OO0pH2lK6a0hZnAdau5ItzHPI6pUlvI7jMVnxUQRtw4owF2wk8lOSabtGDCTP4Ggrg2MbGnWO9X8K1t4+fGMDw==}

  fsevents@2.3.3:
    resolution: {integrity: sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==}
    engines: {node: ^8.16.0 || ^10.6.0 || >=11.0.0}
    os: [darwin]

  function-bind@1.1.2:
    resolution: {integrity: sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==}

  gensync@1.0.0-beta.2:
    resolution: {integrity: sha512-3hN7NaskYvMDLQY55gnW3NQ+mesEAepTqlg+VEbj7zzqEMBVNhzcGYYeqFo/TlYz6eQiFcp1HcsCZO+nGgS8zg==}
    engines: {node: '>=6.9.0'}

  get-east-asian-width@1.4.0:
    resolution: {integrity: sha512-QZjmEOC+IT1uk6Rx0sX22V6uHWVwbdbxf1faPqJ1QhLdGgsRGCZoyaQBm/piRdJy/D2um6hM1UP7ZEeQ4EkP+Q==}
    engines: {node: '>=18'}

  get-stream@6.0.1:
    resolution: {integrity: sha512-ts6Wi+2j3jQjqi70w5AlN8DFnkSwC+MqmxEzdEALB2qXZYV3X/b1CTfgPLGJNMeAWxdPfU8FO1ms3NUfaHCPYg==}
    engines: {node: '>=10'}

  get-tsconfig@4.8.1:
    resolution: {integrity: sha512-k9PN+cFBmaLWtVz29SkUoqU5O0slLuHJXt/2P+tMVFT+phsSGXGkp9t3rQIqdz0e+06EHNGs3oM6ZX1s2zHxRg==}

  get-uri@6.0.3:
    resolution: {integrity: sha512-BzUrJBS9EcUb4cFol8r4W3v1cPsSyajLSthNkz5BxbpDcHN5tIrM10E2eNvfnvBn3DaT3DUgx0OpsBKkaOpanw==}
    engines: {node: '>= 14'}

  glob-parent@5.1.2:
    resolution: {integrity: sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==}
    engines: {node: '>= 6'}

  glob-parent@6.0.2:
    resolution: {integrity: sha512-XxwI8EOhVQgWp6iDL+3b0r86f4d6AX6zSU55HfB4ydCEuXLXc5FcYeOu+nnGftS4TEju/11rt4KJPTMgbfmv4A==}
    engines: {node: '>=10.13.0'}

  glob@10.4.5:
    resolution: {integrity: sha512-7Bv8RF0k6xjo7d4A/PxYLbUCfb6c+Vpd2/mB2yRDlew7Jb5hEXiCD9ibfO7wpk8i4sevK6DFny9h7EYbM3/sHg==}
    hasBin: true

  glob@11.0.0:
    resolution: {integrity: sha512-9UiX/Bl6J2yaBbxKoEBRm4Cipxgok8kQYcOPEhScPwebu2I0HoQOuYdIO6S3hLuWoZgpDpwQZMzTFxgpkyT76g==}
    engines: {node: 20 || >=22}
    hasBin: true

  glob@7.2.3:
    resolution: {integrity: sha512-nFR0zLpU2YCaRxwoCJvL6UvCH2JFyFVIvwTLsIf21AuHlMskA1hhTdk+LlYJtOlYt9v6dvszD2BGRqBL+iQK9Q==}
    deprecated: Glob versions prior to v9 are no longer supported

  global-directory@4.0.1:
    resolution: {integrity: sha512-wHTUcDUoZ1H5/0iVqEudYW4/kAlN5cZ3j/bXn0Dpbizl9iaUVeWSHqiOjsgk6OW2bkLclbBjzewBz6weQ1zA2Q==}
    engines: {node: '>=18'}

  global-modules@1.0.0:
    resolution: {integrity: sha512-sKzpEkf11GpOFuw0Zzjzmt4B4UZwjOcG757PPvrfhxcLFbq0wpsgpOqxpxtxFiCG4DtG93M6XRVbF2oGdev7bg==}
    engines: {node: '>=0.10.0'}

  global-prefix@1.0.2:
    resolution: {integrity: sha512-5lsx1NUDHtSjfg0eHlmYvZKv8/nVqX4ckFbM+FrGcQ+04KWcWFo9P5MxPZYSzUvyzmdTbI7Eix8Q4IbELDqzKg==}
    engines: {node: '>=0.10.0'}

  globals@11.12.0:
    resolution: {integrity: sha512-WOBp/EEGUiIsJSp7wcv/y6MO+lV9UoncWqxuFfm8eBwzWNgyfBd6Gz+IeKQ9jCmyhoH99g15M3T+QaVHFjizVA==}
    engines: {node: '>=4'}

  globals@14.0.0:
    resolution: {integrity: sha512-oahGvuMGQlPw/ivIYBjVSrWAfWLBeku5tpPE2fOPLi+WHffIWbuh2tCjhyQhTBPMf5E9jDEH4FOmTYgYwbKwtQ==}
    engines: {node: '>=18'}

  globby@10.0.2:
    resolution: {integrity: sha512-7dUi7RvCoT/xast/o/dLN53oqND4yk0nsHkhRgn9w65C4PofCLOoJ39iSOg+qVDdWQPIEj+eszMHQ+aLVwwQSg==}
    engines: {node: '>=8'}

  globby@11.1.0:
    resolution: {integrity: sha512-jhIXaOzy1sb8IyocaruWSn1TjmnBVs8Ayhcy83rmxNJ8q2uWKCAj3CnJY+KpGSXCueAPc0i05kVvVKtP1t9S3g==}
    engines: {node: '>=10'}

  globrex@0.1.2:
    resolution: {integrity: sha512-uHJgbwAMwNFf5mLst7IWLNg14x1CkeqglJb/K3doi4dw6q2IvAAmM/Y81kevy83wP+Sst+nutFTYOGg3d1lsxg==}

  graceful-fs@4.2.11:
    resolution: {integrity: sha512-RbJ5/jmFcNNCcDV5o9eTnBLJ/HszWV0P73bc+Ff4nS/rJj+YaS6IGyiOL0VoBYX+l1Wrl3k63h/KrH+nhJ0XvQ==}

  gradient-string@2.0.2:
    resolution: {integrity: sha512-rEDCuqUQ4tbD78TpzsMtt5OIf0cBCSDWSJtUDaF6JsAh+k0v9r++NzxNEG87oDZx9ZwGhD8DaezR2L/yrw0Jdw==}
    engines: {node: '>=10'}

  graphemer@1.4.0:
    resolution: {integrity: sha512-EtKwoO6kxCL9WO5xipiHTZlSzBm7WLT627TqC/uVRd0HKmq8NXyebnNYxDoBi7wt8eTWrUrKXCOVaFq9x1kgag==}

  handlebars@4.7.8:
    resolution: {integrity: sha512-vafaFqs8MZkRrSX7sFVUdo3ap/eNiLnb4IakshzvP56X5Nr1iGKAIqdX6tMlm6HcNRIkr6AxO5jFEoJzzpT8aQ==}
    engines: {node: '>=0.4.7'}
    hasBin: true

  happy-dom@20.0.5:
    resolution: {integrity: sha512-AiqA0rfS7WR1kihXt9W9aA5LFLaOKzwiL+QoI7BkOQ0r21C7VHTOf4k8QNlnWYaHLhpI2tZzJPLV1lY1obDTmw==}
    engines: {node: '>=20.0.0'}

  has-flag@3.0.0:
    resolution: {integrity: sha512-sKJf1+ceQBr4SMkvQnBDNDtf4TXpVhVGateu0t918bl30FnbE2m4vNLX+VWe/dpjlb+HugGYzW7uQXH98HPEYw==}
    engines: {node: '>=4'}

  has-flag@4.0.0:
    resolution: {integrity: sha512-EykJT/Q1KjTWctppgIAgfSO0tKVuZUjhgMr17kqTumMl6Afv3EISleU7qZUzoXDFTAHTDC4NOoG/ZxU3EvlMPQ==}
    engines: {node: '>=8'}

  hasown@2.0.2:
    resolution: {integrity: sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==}
    engines: {node: '>= 0.4'}

  hast-util-to-html@9.0.3:
    resolution: {integrity: sha512-M17uBDzMJ9RPCqLMO92gNNUDuBSq10a25SDBI08iCCxmorf4Yy6sYHK57n9WAbRAAaU+DuR4W6GN9K4DFZesYg==}

  hast-util-whitespace@3.0.0:
    resolution: {integrity: sha512-88JUN06ipLwsnv+dVn+OIYOvAuvBMy/Qoi6O7mQHxdPXpjy+Cd6xRkWwux7DKO+4sYILtLBRIKgsdpS2gQc7qw==}

  he@1.2.0:
    resolution: {integrity: sha512-F/1DnUGPopORZi0ni+CvrCgHQ5FyEAHRLSApuYWMmrbSwoN2Mn/7k+Gl38gJnR7yyDZk6WLXwiGod1JOWNDKGw==}
    hasBin: true

  header-case@1.0.1:
    resolution: {integrity: sha512-i0q9mkOeSuhXw6bGgiQCCBgY/jlZuV/7dZXyZ9c6LcBrqwvT8eT719E9uxE5LiZftdl+z81Ugbg/VvXV4OJOeQ==}

  homedir-polyfill@1.0.3:
    resolution: {integrity: sha512-eSmmWE5bZTK2Nou4g0AI3zZ9rswp7GRKoKXS1BLUkvPviOqs4YTN1djQIqrXy9k5gEtdLPy86JjRwsNM9tnDcA==}
    engines: {node: '>=0.10.0'}

  hookable@5.5.3:
    resolution: {integrity: sha512-Yc+BQe8SvoXH1643Qez1zqLRmbA5rCL+sSmk6TVos0LWVfNIB7PGncdlId77WzLGSIB5KaWgTaNTs2lNVEI6VQ==}

  html-encoding-sniffer@4.0.0:
    resolution: {integrity: sha512-Y22oTqIU4uuPgEemfz7NDJz6OeKf12Lsu+QC+s3BVpda64lTiMYCyGwg5ki4vFxkMwQdeZDl2adZoqUgdFuTgQ==}
    engines: {node: '>=18'}

  html-entities@2.3.3:
    resolution: {integrity: sha512-DV5Ln36z34NNTDgnz0EWGBLZENelNAtkiFA4kyNOG2tDI6Mz1uSWiq1wAKdyjnJwyDiDO7Fa2SO1CTxPXL8VxA==}

  html-escaper@2.0.2:
    resolution: {integrity: sha512-H2iMtd0I4Mt5eYiapRdIDjp+XzelXQ0tFE4JS7YFwFevXXMmOp9myNrUvCg0D6ws8iqkRPBfKHgbwig1SmlLfg==}

  html-void-elements@3.0.0:
    resolution: {integrity: sha512-bEqo66MRXsUGxWHV5IP0PUiAWwoEjba4VCzg0LjFJBpchPaTfyfCKTG6bc5F8ucKec3q5y6qOdGyYTSBEvhCrg==}

  http-proxy-agent@7.0.2:
    resolution: {integrity: sha512-T1gkAiYYDWYx3V5Bmyu7HcfcvL7mUrTWiM6yOfa3PIphViJ/gFPbvidQ+veqSOHci/PxBcDabeUNCzpOODJZig==}
    engines: {node: '>= 14'}

  https-proxy-agent@7.0.5:
    resolution: {integrity: sha512-1e4Wqeblerz+tMKPIq2EMGiiWW1dIjZOksyHWSUm1rmuvw/how9hBHZ38lAGj5ID4Ik6EdkOw7NmWPy6LAwalw==}
    engines: {node: '>= 14'}

  human-id@1.0.2:
    resolution: {integrity: sha512-UNopramDEhHJD+VR+ehk8rOslwSfByxPIZyJRfV739NDhN5LF1fa1MqnzKm2lGTQRjNrjK19Q5fhkgIfjlVUKw==}

  human-signals@2.1.0:
    resolution: {integrity: sha512-B4FFZ6q/T2jhhksgkbEW3HBvWIfDW85snkQgawt07S7J5QXTk6BkNV+0yAeZrM5QpMAdYlocGoljn0sJ/WQkFw==}
    engines: {node: '>=10.17.0'}

  husky@9.1.7:
    resolution: {integrity: sha512-5gs5ytaNjBrh5Ow3zrvdUUY+0VxIuWVL4i9irt6friV+BqdCfmV11CQTWMiBYWHbXhco+J1kHfTOUkePhCDvMA==}
    engines: {node: '>=18'}
    hasBin: true

  iconv-lite@0.4.24:
    resolution: {integrity: sha512-v3MXnZAcvnywkTUEZomIActle7RXXeedOR31wwl7VlyoXO4Qi9arvSenNQWne1TcRwhCL1HwLI21bEqdpj8/rA==}
    engines: {node: '>=0.10.0'}

  iconv-lite@0.6.3:
    resolution: {integrity: sha512-4fCk79wshMdzMp2rH06qWrJE4iolqLhCUH+OiuIgU++RB0+94NlDL81atO7GX55uUKueo0txHNtvEyI6D7WdMw==}
    engines: {node: '>=0.10.0'}

  ieee754@1.2.1:
    resolution: {integrity: sha512-dcyqhDvX1C46lXZcVqCpK+FtMRQVdIMN6/Df5js2zouUsqG7I6sFxitIC+7KYK29KdXOLHdu9zL4sFnoVQnqaA==}

  ignore@5.3.2:
    resolution: {integrity: sha512-hsBTNUqQTDwkWtcdYI2i06Y/nUBEsNEDJKjWdigLvegy8kDuJAS8uRlpkkcQpyEXL0Z/pjDy5HBmMjRCJ2gq+g==}
    engines: {node: '>= 4'}

  ignore@7.0.5:
    resolution: {integrity: sha512-Hs59xBNfUIunMFgWAbGX5cq6893IbWg4KnrjbYwX3tx0ztorVgTDA6B2sxf8ejHJ4wz8BqGUMYlnzNBer5NvGg==}
    engines: {node: '>= 4'}

  import-fresh@3.3.0:
    resolution: {integrity: sha512-veYYhQa+D1QBKznvhUHxb8faxlrwUnxseDAbAp457E0wLNio2bOSKnjYDhMj+YiAq61xrMGhQk9iXVk5FzgQMw==}
    engines: {node: '>=6'}

  import-lazy@4.0.0:
    resolution: {integrity: sha512-rKtvo6a868b5Hu3heneU+L4yEQ4jYKLtjpnPeUdK7h0yzXGmyBTypknlkCvHFBqfX9YlorEiMM6Dnq/5atfHkw==}
    engines: {node: '>=8'}

  import-meta-resolve@4.1.0:
    resolution: {integrity: sha512-I6fiaX09Xivtk+THaMfAwnA3MVA5Big1WHF1Dfx9hFuvNIWpXnorlkzhcQf6ehrqQiiZECRt1poOAkPmer3ruw==}

  imurmurhash@0.1.4:
    resolution: {integrity: sha512-JmXMZ6wuvDmLiHEml9ykzqO6lwFbof0GG4IkcGaENdCRDDmMVnny7s5HsIgHCbaq0w2MyPhDqkhTUgS2LU2PHA==}
    engines: {node: '>=0.8.19'}

  indent-string@4.0.0:
    resolution: {integrity: sha512-EdDDZu4A2OyIK7Lr/2zG+w5jmbuk1DVBnEwREQvBzspBJkCEbRa8GxU1lghYcaGJCnRWibjDXlq779X1/y5xwg==}
    engines: {node: '>=8'}

  inflight@1.0.6:
    resolution: {integrity: sha512-k92I/b08q4wvFscXCLvqfsHCrjrF7yiXsQuIVvVE7N82W3+aqpzuUdBbfhWcy/FZR3/4IgflMgKLOsvPDrGCJA==}
    deprecated: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.

  inherits@2.0.4:
    resolution: {integrity: sha512-k/vGaX4/Yla3WzyMCvTQOXYeIHvqOKtnqBduzTHpzpQZzAskKMhZ2K+EnBiSM9zGSoIFeMpXKxa4dYeZIQqewQ==}

  ini@1.3.8:
    resolution: {integrity: sha512-JV/yugV2uzW5iMRSiZAyDtQd+nxtUnjeLt0acNdw98kKLrvuRVyB80tsREOE7yvGVgalhZ6RNXCmEHkUKBKxew==}

  ini@4.1.1:
    resolution: {integrity: sha512-QQnnxNyfvmHFIsj7gkPcYymR8Jdw/o7mp5ZFihxn6h8Ci6fh3Dx4E1gPjpQEpIuPo9XVNY/ZUwh4BPMjGyL01g==}
    engines: {node: ^14.17.0 || ^16.13.0 || >=18.0.0}

  inquirer@7.3.3:
    resolution: {integrity: sha512-JG3eIAj5V9CwcGvuOmoo6LB9kbAYT8HXffUl6memuszlwDC/qvFAJw49XJ5NROSFNPxp3iQg1GqkFhaY/CR0IA==}
    engines: {node: '>=8.0.0'}

  inquirer@8.2.5:
    resolution: {integrity: sha512-QAgPDQMEgrDssk1XiwwHoOGYF9BAbUcc1+j+FhEvaOt8/cKRqyLn0U5qA6F74fGhTMGxf92pOvPBeh29jQJDTQ==}
    engines: {node: '>=12.0.0'}

  inquirer@8.2.6:
    resolution: {integrity: sha512-M1WuAmb7pn9zdFRtQYk26ZBoY043Sse0wVDdk4Bppr+JOXyQYybdtvK+l9wUibhtjdjvtoiNy8tk+EgsYIUqKg==}
    engines: {node: '>=12.0.0'}

  ip-address@9.0.5:
    resolution: {integrity: sha512-zHtQzGojZXTwZTHQqra+ETKd4Sn3vgi7uBmlPoXVWZqYvuKmtI0l/VZTjqGmJY9x88GGOaZ9+G9ES8hC4T4X8g==}
    engines: {node: '>= 12'}

  is-arrayish@0.2.1:
    resolution: {integrity: sha512-zz06S8t0ozoDXMG+ube26zeCTNXcKIPJZJi8hBrF4idCLms4CG9QtK7qBl1boi5ODzFpjswb5JPmHCbMpjaYzg==}

  is-core-module@2.15.1:
    resolution: {integrity: sha512-z0vtXSwucUJtANQWldhbtbt7BnL0vxiFjIdDLAatwhDYty2bad6s+rijD6Ri4YuYJubLzIJLUidCh09e1djEVQ==}
    engines: {node: '>= 0.4'}

  is-extglob@2.1.1:
    resolution: {integrity: sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==}
    engines: {node: '>=0.10.0'}

  is-fullwidth-code-point@3.0.0:
    resolution: {integrity: sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==}
    engines: {node: '>=8'}

  is-glob@4.0.3:
    resolution: {integrity: sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==}
    engines: {node: '>=0.10.0'}

  is-interactive@1.0.0:
    resolution: {integrity: sha512-2HvIEKRoqS62guEC+qBjpvRubdX910WCMuJTZ+I9yvqKU2/12eSL549HMwtabb4oupdj2sMP50k+XJfB/8JE6w==}
    engines: {node: '>=8'}

  is-interactive@2.0.0:
    resolution: {integrity: sha512-qP1vozQRI+BMOPcjFzrjXuQvdak2pHNUMZoeG2eRbiSqyvbEf/wQtEOTOX1guk6E3t36RkaqiSt8A/6YElNxLQ==}
    engines: {node: '>=12'}

  is-lower-case@1.1.3:
    resolution: {integrity: sha512-+5A1e/WJpLLXZEDlgz4G//WYSHyQBD32qa4Jd3Lw06qQlv3fJHnp3YIHjTQSGzHMgzmVKz2ZP3rBxTHkPw/lxA==}

  is-module@1.0.0:
    resolution: {integrity: sha512-51ypPSPCoTEIN9dy5Oy+h4pShgJmPCygKfyRCISBI+JoWT/2oJvK8QPxmwv7b/p239jXrm9M1mlQbyKJ5A152g==}

  is-number@7.0.0:
    resolution: {integrity: sha512-41Cifkg6e8TylSpdtTpeLVMqvSBEVzTttHvERD741+pnZ8ANv0004MRL43QKPDlK9cGvNp6NZWZUBlbGXYxxng==}
    engines: {node: '>=0.12.0'}

  is-path-cwd@2.2.0:
    resolution: {integrity: sha512-w942bTcih8fdJPJmQHFzkS76NEP8Kzzvmw92cXsazb8intwLqPibPPdXf4ANdKV3rYMuuQYGIWtvz9JilB3NFQ==}
    engines: {node: '>=6'}

  is-path-inside@3.0.3:
    resolution: {integrity: sha512-Fd4gABb+ycGAmKou8eMftCupSir5lRxqf4aD/vd0cD2qc4HL07OjCeuHMr8Ro4CoMaeCKDB0/ECBOVWjTwUvPQ==}
    engines: {node: '>=8'}

  is-potential-custom-element-name@1.0.1:
    resolution: {integrity: sha512-bCYeRA2rVibKZd+s2625gGnGF/t7DSqDs4dP7CrLA1m7jKWz6pps0LpYLJN8Q64HtmPKJ1hrN3nzPNKFEKOUiQ==}

  is-reference@3.0.3:
    resolution: {integrity: sha512-ixkJoqQvAP88E6wLydLGGqCJsrFUnqoH6HnaczB8XmDH1oaWU+xxdptvikTgaEhtZ53Ky6YXiBuUI2WXLMCwjw==}

  is-stream@2.0.1:
    resolution: {integrity: sha512-hFoiJiTl63nn+kstHGBtewWSKnQLpyb155KHheA1l39uvtO9nWIop1p3udqPcUd/xbF1VLMO4n7OI6p7RbngDg==}
    engines: {node: '>=8'}

  is-subdir@1.2.0:
    resolution: {integrity: sha512-2AT6j+gXe/1ueqbW6fLZJiIw3F8iXGJtt0yDrZaBhAZEG1raiTxKWU+IPqMCzQAXOUCKdA4UDMgacKH25XG2Cw==}
    engines: {node: '>=4'}

  is-unicode-supported@0.1.0:
    resolution: {integrity: sha512-knxG2q4UC3u8stRGyAVJCOdxFmv5DZiRcdlIaAQXAbSfJya+OhopNotLQrstBhququ4ZpuKbDc/8S6mgXgPFPw==}
    engines: {node: '>=10'}

  is-unicode-supported@2.1.0:
    resolution: {integrity: sha512-mE00Gnza5EEB3Ds0HfMyllZzbBrmLOX3vfWoj9A9PEnTfratQ/BcaJOuMhnkhjXvb2+FkY3VuHqtAGpTPmglFQ==}
    engines: {node: '>=18'}

  is-upper-case@1.1.2:
    resolution: {integrity: sha512-GQYSJMgfeAmVwh9ixyk888l7OIhNAGKtY6QA+IrWlu9MDTCaXmeozOZ2S9Knj7bQwBO/H6J2kb+pbyTUiMNbsw==}

  is-utf8@0.2.1:
    resolution: {integrity: sha512-rMYPYvCzsXywIsldgLaSoPlw5PfoB/ssr7hY4pLfcodrA5M/eArza1a9VmTiNIBNMjOGr1Ow9mTyU2o69U6U9Q==}

  is-what@4.1.16:
    resolution: {integrity: sha512-ZhMwEosbFJkA0YhFnNDgTM4ZxDRsS6HqTo7qsZM08fehyRYIYa0yHu5R6mgo1n/8MgaPBXiPimPD77baVFYg+A==}
    engines: {node: '>=12.13'}

  is-windows@1.0.2:
    resolution: {integrity: sha512-eXK1UInq2bPmjyX6e3VHIzMLobc4J94i4AWn+Hpq3OU5KkrRC96OAcR3PRJ/pGu6m8TRnBHP9dkXQVsT/COVIA==}
    engines: {node: '>=0.10.0'}

  isbinaryfile@4.0.10:
    resolution: {integrity: sha512-iHrqe5shvBUcFbmZq9zOQHBoeOhZJu6RQGrDpBgenUm/Am+F3JM2MgQj+rK3Z601fzrL5gLZWtAPH2OBaSVcyw==}
    engines: {node: '>= 8.0.0'}

  isexe@2.0.0:
    resolution: {integrity: sha512-RHxMLp9lnKHGHRng9QFhRCMbYAcVpn69smSGcq3f36xjgVVWThj4qqLbTLlq7Ssj8B+fIQ1EuCEGI2lKsyQeIw==}

  istanbul-lib-coverage@3.2.2:
    resolution: {integrity: sha512-O8dpsF+r0WV/8MNRKfnmrtCWhuKjxrq2w+jpzBL5UZKTi2LeVWnWOmWRxFlesJONmc+wLAGvKQZEOanko0LFTg==}
    engines: {node: '>=8'}

  istanbul-lib-report@3.0.1:
    resolution: {integrity: sha512-GCfE1mtsHGOELCU8e/Z7YWzpmybrx/+dSTfLrvY8qRmaY6zXTKWn6WQIjaAFw069icm6GVMNkgu0NzI4iPZUNw==}
    engines: {node: '>=10'}

  istanbul-lib-source-maps@5.0.6:
    resolution: {integrity: sha512-yg2d+Em4KizZC5niWhQaIomgf5WlL4vOOjZ5xGCmF8SnPE/mDWWXgvRExdcpCgh9lLRRa1/fSYp2ymmbJ1pI+A==}
    engines: {node: '>=10'}

  istanbul-reports@3.1.7:
    resolution: {integrity: sha512-BewmUXImeuRk2YY0PVbxgKAysvhRPUQE0h5QRM++nVWyubKGV0l8qQ5op8+B2DOmwSe63Jivj0BjkPQVf8fP5g==}
    engines: {node: '>=8'}

  jackspeak@3.4.3:
    resolution: {integrity: sha512-OGlZQpz2yfahA/Rd1Y8Cd9SIEsqvXkLVoSw/cgwhnhFMDbsQFeZYoJJ7bIZBS9BcamUW96asq/npPWugM+RQBw==}

  jackspeak@4.0.2:
    resolution: {integrity: sha512-bZsjR/iRjl1Nk1UkjGpAzLNfQtzuijhn2g+pbZb98HQ1Gk8vM9hfbxeMBP+M2/UUdwj0RqGG3mlvk2MsAqwvEw==}
    engines: {node: 20 || >=22}

  jiti@1.21.6:
    resolution: {integrity: sha512-2yTgeWTWzMWkHu6Jp9NKgePDaYHbntiwvYuuJLbbN9vl7DC9DvXKOB2BC3ZZ92D3cvV/aflH0osDfwpHepQ53w==}
    hasBin: true

  jju@1.4.0:
    resolution: {integrity: sha512-8wb9Yw966OSxApiCt0K3yNJL8pnNeIv+OEq2YMidz4FKP6nonSRoOXc80iXY4JaN2FC11B9qsNmDsm+ZOfMROA==}

  js-tokens@4.0.0:
    resolution: {integrity: sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==}

  js-tokens@9.0.1:
    resolution: {integrity: sha512-mxa9E9ITFOt0ban3j6L5MpjwegGz6lBQmM1IJkWeBZGcMxto50+eWdjC/52xDbS2vy0k7vIMK0Fe2wfL9OQSpQ==}

  js-yaml@3.14.1:
    resolution: {integrity: sha512-okMH7OXXJ7YrN9Ok3/SXrnu4iX9yOk+25nqX4imS2npuvTYDmo/QEZoqwZkYaIDk3jVvBOTOIEgEhaLOynBS9g==}
    hasBin: true

  js-yaml@4.1.0:
    resolution: {integrity: sha512-wpxZs9NoxZaJESJGIZTyDEaYpl0FKSA+FB9aJiyemKhMwkxQg63h4T1KJgUGHpTqPDNRcmmYLugrRjJlBtWvRA==}
    hasBin: true

  jsbn@1.1.0:
    resolution: {integrity: sha512-4bYVV3aAMtDTTu4+xsDYa6sy9GyJ69/amsu9sYF2zqjiEoZA5xJi3BrfX3uY+/IekIu7MwdObdbDWpoZdBv3/A==}

  jsdom@25.0.1:
    resolution: {integrity: sha512-8i7LzZj7BF8uplX+ZyOlIz86V6TAsSs+np6m1kpW9u0JWi4z/1t+FzcK1aek+ybTnAC4KhBL4uXCNT0wcUIeCw==}
    engines: {node: '>=18'}
    peerDependencies:
      canvas: ^2.11.2
    peerDependenciesMeta:
      canvas:
        optional: true

  jsesc@3.0.2:
    resolution: {integrity: sha512-xKqzzWXDttJuOcawBt4KnKHHIf5oQ/Cxax+0PWFG+DFDgHNAdi+TXECADI+RYiFUMmx8792xsMbbgXj4CwnP4g==}
    engines: {node: '>=6'}
    hasBin: true

  json-buffer@3.0.1:
    resolution: {integrity: sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==}

  json-parse-even-better-errors@2.3.1:
    resolution: {integrity: sha512-xyFwyhro/JEof6Ghe2iz2NcXoj2sloNsWr/XsERDK/oiPCfaNhl5ONfp+jQdAZRQQ0IJWNzH9zIZF7li91kh2w==}

  json-schema-traverse@0.4.1:
    resolution: {integrity: sha512-xbbCH5dCYU5T8LcEhhuh7HJ88HXuW3qsI3Y0zOZFKfZEHcpWiHU/Jxzk629Brsab/mMiHQti9wMP+845RPe3Vg==}

  json-schema-traverse@1.0.0:
    resolution: {integrity: sha512-NM8/P9n3XjXhIZn1lLhkFaACTOURQXjWhV4BA/RnOv8xvgqtqpAX9IO4mRQxSx1Rlo4tqzeqb0sOlruaOy3dug==}

  json-stable-stringify-without-jsonify@1.0.1:
    resolution: {integrity: sha512-Bdboy+l7tA3OGW6FjyFHWkP5LuByj1Tk33Ljyq0axyzdk9//JSi2u3fP1QSmd1KNwq6VOKYGlAu87CisVir6Pw==}

  json5@2.2.3:
    resolution: {integrity: sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==}
    engines: {node: '>=6'}
    hasBin: true

  jsonfile@4.0.0:
    resolution: {integrity: sha512-m6F1R3z8jjlf2imQHS2Qez5sjKWQzbuuhuJ/FKYFRZvPE3PuHcSMVZzfsLhGVOkfd20obL5SWEBew5ShlquNxg==}

  jsonfile@6.1.0:
    resolution: {integrity: sha512-5dgndWOriYSm5cnYaJNhalLNDKOqFwyDB/rr1E9ZsGciGvKPs8R2xYGCacuf3z6K1YKDz182fd+fY3cn3pMqXQ==}

  keyv@4.5.4:
    resolution: {integrity: sha512-oxVHkHR/EJf2CNXnWxRLW6mg7JyCCUcG0DtEGmL2ctUo1PNTin1PUil+r/+4r5MpVgC/fn1kjsx7mjSujKqIpw==}

  kolorist@1.8.0:
    resolution: {integrity: sha512-Y+60/zizpJ3HRH8DCss+q95yr6145JXZo46OTpFvDZWLfRCE4qChOyk1b26nMaNpfHHgxagk9dXT5OP0Tfe+dQ==}

  levn@0.4.1:
    resolution: {integrity: sha512-+bT2uH4E5LGE7h/n3evcS/sQlJXCpIp6ym8OWJ5eV6+67Dsql/LaaT7qJBAt2rzfoa/5QBGBhxDix1dMt2kQKQ==}
    engines: {node: '>= 0.8.0'}

  lines-and-columns@1.2.4:
    resolution: {integrity: sha512-7ylylesZQ/PV29jhEDl3Ufjo6ZX7gCqJr5F7PKrqc93v7fzSymt1BpwEU8nAUXs8qzzvqhbjhK5QZg6Mt/HkBg==}

  local-pkg@1.1.1:
    resolution: {integrity: sha512-WunYko2W1NcdfAFpuLUoucsgULmgDBRkdxHxWQ7mK0cQqwPiy8E1enjuRBrhLtZkB5iScJ1XIPdhVEFK8aOLSg==}
    engines: {node: '>=14'}

  locate-character@3.0.0:
    resolution: {integrity: sha512-SW13ws7BjaeJ6p7Q6CO2nchbYEc3X3J6WrmTTDto7yMPqVSZTUyY5Tjbid+Ab8gLnATtygYtiDIJGQRRn2ZOiA==}

  locate-path@5.0.0:
    resolution: {integrity: sha512-t7hw9pI+WvuwNJXwk5zVHpyhIqzg2qTlklJOf0mVxGSbe3Fp2VieZcduNYjaLDoy6p9uGpQEGWG87WpMKlNq8g==}
    engines: {node: '>=8'}

  locate-path@6.0.0:
    resolution: {integrity: sha512-iPZK6eYjbxRu3uB4/WZ3EsEIMJFMqAoopl3R+zuq0UjcAm/MO6KCweDgPfP3elTztoKP3KtnVHxTn2NHBSDVUw==}
    engines: {node: '>=10'}

  lodash.get@4.4.2:
    resolution: {integrity: sha512-z+Uw/vLuy6gQe8cfaFWD7p0wVv8fJl3mbzXh33RS+0oW2wvUqiRXiQ69gLWSLpgB5/6sU+r6BlQR0MBILadqTQ==}
    deprecated: This package is deprecated. Use the optional chaining (?.) operator instead.

  lodash.isplainobject@4.0.6:
    resolution: {integrity: sha512-oSXzaWypCMHkPC3NvBEaPHf0KsA5mvPrOPgQWDsbg8n7orZ290M0BmC/jgRZ4vcJ6DTAhjrsSYgdsW/F+MFOBA==}

  lodash.map@4.6.0:
    resolution: {integrity: sha512-worNHGKLDetmcEYDvh2stPCrrQRkP20E4l0iIS7F8EvzMqBBi7ltvFN5m1HvTf1P7Jk1txKhvFcmYsCr8O2F1Q==}

  lodash.merge@4.6.2:
    resolution: {integrity: sha512-0KpjqXRVvrYyCsX1swR/XTK0va6VQkQM6MNo7PqW77ByjAhoARA8EfrP1N4+KlKj8YS0ZUCtRT/YUuhyYDujIQ==}

  lodash.mergewith@4.6.2:
    resolution: {integrity: sha512-GK3g5RPZWTRSeLSpgP8Xhra+pnjBC56q9FZYe1d5RN3TJ35dbkGy3YqBSMbyCrlbi+CM9Z3Jk5yTL7RCsqboyQ==}

  lodash.startcase@4.4.0:
    resolution: {integrity: sha512-+WKqsK294HMSc2jEbNgpHpd0JfIBhp7rEV4aqXWqFr6AlXov+SlcgB1Fv01y2kGe3Gc8nMW7VA0SrGuSkRfIEg==}

  lodash.uniq@4.5.0:
    resolution: {integrity: sha512-xfBaXQd9ryd9dlSDvnvI0lvxfLJlYAZzXomUYzLKtUeOQvOP5piqAWuGtrhWeqaXK9hhoM/iyJc5AV+XfsX3HQ==}

  lodash@4.17.21:
    resolution: {integrity: sha512-v2kDEe57lecTulaDIuNTPy3Ry4gLGJ6Z1O3vE1krgXZNrsQ+LFTGHVxVjcXPs17LhbZVGedAJv8XZ1tvj5FvSg==}

  log-symbols@3.0.0:
    resolution: {integrity: sha512-dSkNGuI7iG3mfvDzUuYZyvk5dD9ocYCYzNU6CYDE6+Xqd+gwme6Z00NS3dUh8mq/73HaEtT7m6W+yUPtU6BZnQ==}
    engines: {node: '>=8'}

  log-symbols@4.1.0:
    resolution: {integrity: sha512-8XPvpAA8uyhfteu8pIvQxpJZ7SYYdpUivZpGy6sFsBuKRY/7rQGavedeB8aK+Zkyq6upMFVL/9AW6vOYzfRyLg==}
    engines: {node: '>=10'}

  log-symbols@7.0.1:
    resolution: {integrity: sha512-ja1E3yCr9i/0hmBVaM0bfwDjnGy8I/s6PP4DFp+yP+a+mrHO4Rm7DtmnqROTUkHIkqffC84YY7AeqX6oFk0WFg==}
    engines: {node: '>=18'}

  longest@2.0.1:
    resolution: {integrity: sha512-Ajzxb8CM6WAnFjgiloPsI3bF+WCxcvhdIG3KNA2KN962+tdBsHcuQ4k4qX/EcS/2CRkcc0iAkR956Nib6aXU/Q==}
    engines: {node: '>=0.10.0'}

  loose-envify@1.4.0:
    resolution: {integrity: sha512-lyuxPGr/Wfhrlem2CL/UcnUc1zcqKAImBDzukY7Y5F/yQiNdko6+fRLevlw1HgMySw7f611UIY408EtxRSoK3Q==}
    hasBin: true

  loupe@3.1.3:
    resolution: {integrity: sha512-kkIp7XSkP78ZxJEsSxW3712C6teJVoeHHwgo9zJ380de7IYyJ2ISlxojcH2pC5OFLewESmnRi/+XCDIEEVyoug==}

  loupe@3.2.1:
    resolution: {integrity: sha512-CdzqowRJCeLU72bHvWqwRBBlLcMEtIvGrlvef74kMnV2AolS9Y8xUv1I0U/MNAWMhBlKIoyuEgoJ0t/bbwHbLQ==}

  lower-case-first@1.0.2:
    resolution: {integrity: sha512-UuxaYakO7XeONbKrZf5FEgkantPf5DUqDayzP5VXZrtRPdH86s4kN47I8B3TW10S4QKiE3ziHNf3kRN//okHjA==}

  lower-case@1.1.4:
    resolution: {integrity: sha512-2Fgx1Ycm599x+WGpIYwJOvsjmXFzTSc34IwDWALRA/8AopUKAVPwfJ+h5+f85BCp0PWmmJcWzEpxOpoXycMpdA==}

  lru-cache@10.4.3:
    resolution: {integrity: sha512-JNAzZcXrCt42VGLuYz0zfAzDfAvJWW6AfYlDBQyDV5DClI2m5sAmK+OIO7s59XfsRsWHp02jAJrRadPRGTt6SQ==}

  lru-cache@11.0.2:
    resolution: {integrity: sha512-123qHRfJBmo2jXDbo/a5YOQrJoHF/GNQTLzQ5+IdK5pWpceK17yRc6ozlWd25FxvGKQbIUs91fDFkXmDHTKcyA==}
    engines: {node: 20 || >=22}

  lru-cache@5.1.1:
    resolution: {integrity: sha512-KpNARQA3Iwv+jTA0utUVVbrh+Jlrr1Fv0e56GGzAFOXN7dk/FviaDW8LHmK52DlcH4WP2n6gI8vN1aesBFgo9w==}

  lru-cache@6.0.0:
    resolution: {integrity: sha512-Jo6dJ04CmSjuznwJSS3pUeWmd/H0ffTlkXXgwZi+eq1UCmqQwCh+eLsYOYCwY991i2Fah4h1BEMCx4qThGbsiA==}
    engines: {node: '>=10'}

  lru-cache@7.18.3:
    resolution: {integrity: sha512-jumlc0BIUrS3qJGgIkWZsyfAM7NCWiBcCDhnd+3NNM5KbBmLTgHVfWBcg6W+rLUsIpzpERPsvwUP7CckAQSOoA==}
    engines: {node: '>=12'}

  magic-string@0.25.9:
    resolution: {integrity: sha512-RmF0AsMzgt25qzqqLc1+MbHmhdx0ojF2Fvs4XnOqz2ZOBXzzkEwc/dJQZCYHAn7v1jbVOjAZfK8msRn4BxO4VQ==}

  magic-string@0.30.17:
    resolution: {integrity: sha512-sNPKHvyjVf7gyjwS4xGTaW/mCnF8wnjtifKBEhxfZ7E/S8tQ0rssrwGNn6q8JH/ohItJfSQp9mBtQYuTlH5QnA==}

  magicast@0.3.5:
    resolution: {integrity: sha512-L0WhttDl+2BOsybvEOLK7fW3UA0OQ0IQ2d6Zl2x/a6vVRs3bAY0ECOSHHeL5jD+SbOpOCUEi0y1DgHEn9Qn1AQ==}

  make-dir@4.0.0:
    resolution: {integrity: sha512-hXdUTZYIVOt1Ex//jAQi+wTZZpUpwBj/0QsOzqegb3rGMMeJiSEu5xLHnYfBrRV4RH2+OCSOO95Is/7x1WJ4bw==}
    engines: {node: '>=10'}

  make-error@1.3.6:
    resolution: {integrity: sha512-s8UhlNe7vPKomQhC1qFelMokr/Sc3AgNbso3n74mVPA5LTZwkB9NlXf4XPamLxJE8h0gh73rM94xvwRT2CVInw==}

  mark.js@8.11.1:
    resolution: {integrity: sha512-1I+1qpDt4idfgLQG+BNWmrqku+7/2bi5nLf4YwF8y8zXvmfiTBY3PV3ZibfrjBueCByROpuBjLLFCajqkgYoLQ==}

  mdast-util-to-hast@13.2.0:
    resolution: {integrity: sha512-QGYKEuUsYT9ykKBCMOEDLsU5JRObWQusAolFMeko/tYPufNkRffBAQjIE+99jbA87xv6FgmjLtwjh9wBWajwAA==}

  merge-anything@5.1.7:
    resolution: {integrity: sha512-eRtbOb1N5iyH0tkQDAoQ4Ipsp/5qSR79Dzrz8hEPxRX10RWWR/iQXdoKmBSRCThY1Fh5EhISDtpSc93fpxUniQ==}
    engines: {node: '>=12.13'}

  merge-stream@2.0.0:
    resolution: {integrity: sha512-abv/qOcuPfk3URPfDzmZU1LKmuw8kT+0nIHvKrKgFrwifol/doWcdA4ZqsWQ8ENrFKkd67Mfpo/LovbIUsbt3w==}

  merge2@1.4.1:
    resolution: {integrity: sha512-8q7VEgMJW4J8tcfVPy8g09NcQwZdbwFEqhe/WZkoIzjn/3TGDwtOCYtXGxA3O8tPzpczCCDgv+P2P5y00ZJOOg==}
    engines: {node: '>= 8'}

  merge@2.1.1:
    resolution: {integrity: sha512-jz+Cfrg9GWOZbQAnDQ4hlVnQky+341Yk5ru8bZSe6sIDTCIg8n9i/u7hSQGSVOF3C7lH6mGtqjkiT9G4wFLL0w==}

  micromark-util-character@2.1.1:
    resolution: {integrity: sha512-wv8tdUTJ3thSFFFJKtpYKOYiGP2+v96Hvk4Tu8KpCAsTMs6yi+nVmGh1syvSCsaxz45J6Jbw+9DD6g97+NV67Q==}

  micromark-util-encode@2.0.1:
    resolution: {integrity: sha512-c3cVx2y4KqUnwopcO9b/SCdo2O67LwJJ/UyqGfbigahfegL9myoEFoDYZgkT7f36T0bLrM9hZTAaAyH+PCAXjw==}

  micromark-util-sanitize-uri@2.0.1:
    resolution: {integrity: sha512-9N9IomZ/YuGGZZmQec1MbgxtlgougxTodVwDzzEouPKo3qFWvymFHWcnDi2vzV1ff6kas9ucW+o3yzJK9YB1AQ==}

  micromark-util-symbol@2.0.1:
    resolution: {integrity: sha512-vs5t8Apaud9N28kgCrRUdEed4UJ+wWNvicHLPxCa9ENlYuAY31M0ETy5y1vA33YoNPDFTghEbnh6efaE8h4x0Q==}

  micromark-util-types@2.0.1:
    resolution: {integrity: sha512-534m2WhVTddrcKVepwmVEVnUAmtrx9bfIjNoQHRqfnvdaHQiFytEhJoTgpWJvDEXCO5gLTQh3wYC1PgOJA4NSQ==}

  micromatch@4.0.8:
    resolution: {integrity: sha512-PXwfBhYu0hBCPw8Dn0E+WDYb7af3dSLVWKi3HGv84IdF4TyFoC0ysxFd0Goxw7nSv4T/PzEJQxsYsEiFCKo2BA==}
    engines: {node: '>=8.6'}

  mime-db@1.52.0:
    resolution: {integrity: sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==}
    engines: {node: '>= 0.6'}

  mime-types@2.1.35:
    resolution: {integrity: sha512-ZDY+bPm5zTTF+YpCrAU9nK0UgICYPT0QtT1NZWFv4s++TNkcgVaT0g6+4R2uI4MjQjzysHB1zxuWL50hzaeXiw==}
    engines: {node: '>= 0.6'}

  mimic-fn@2.1.0:
    resolution: {integrity: sha512-OqbOk5oEQeAZ8WXWydlu9HJjz9WVdEIvamMCcXmuqUYjTknH/sqsWvhQ3vgwKFRR1HpjvNBKQ37nbJgYzGqGcg==}
    engines: {node: '>=6'}

  mimic-function@5.0.1:
    resolution: {integrity: sha512-VP79XUPxV2CigYP3jWwAUFSku2aKqBH7uTAapFWCBqutsbmDo96KY5o8uh6U+/YSIn5OxJnXp73beVkpqMIGhA==}
    engines: {node: '>=18'}

  minimatch@10.0.1:
    resolution: {integrity: sha512-ethXTt3SGGR+95gudmqJ1eNhRO7eGEGIgYA9vnPatK4/etz2MEVDno5GMCibdMTuBMyElzIlgxMna3K94XDIDQ==}
    engines: {node: 20 || >=22}

  minimatch@3.0.8:
    resolution: {integrity: sha512-6FsRAQsxQ61mw+qP1ZzbL9Bc78x2p5OqNgNpnoAFLTrX8n5Kxph0CsnhmKKNXTWjXqU5L0pGPR7hYk+XWZr60Q==}

  minimatch@3.1.2:
    resolution: {integrity: sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==}

  minimatch@9.0.5:
    resolution: {integrity: sha512-G6T0ZX48xgozx7587koeX9Ys2NYy6Gmv//P89sEte9V9whIapMNF4idKxnW2QtCcLiTWlb/wfCabAtAFWhhBow==}
    engines: {node: '>=16 || 14 >=14.17'}

  minimist@1.2.7:
    resolution: {integrity: sha512-bzfL1YUZsP41gmu/qjrEk0Q6i2ix/cVeAhbCbqH9u3zYutS1cLg00qhrD0M2MVdCcx4Sc0UpP2eBWo9rotpq6g==}

  minimist@1.2.8:
    resolution: {integrity: sha512-2yyAR8qBkN3YuheJanUpWC5U3bb5osDywNB8RzDVlDwDHbocAJveqqj1u8+SVD7jkWT4yvsHCpWqqWqAxb0zCA==}

  minipass@7.1.2:
    resolution: {integrity: sha512-qOOzS1cBTWYF4BH8fVePDBOO9iptMnGUEZwNc/cMWnTV2nVLZ7VoNWEPHkYczZA0pdoA7dl6e7FL659nX9S2aw==}
    engines: {node: '>=16 || 14 >=14.17'}

  minisearch@7.1.0:
    resolution: {integrity: sha512-tv7c/uefWdEhcu6hvrfTihflgeEi2tN6VV7HJnCjK6VxM75QQJh4t9FwJCsA2EsRS8LCnu3W87CuGPWMocOLCA==}

  mitt@3.0.1:
    resolution: {integrity: sha512-vKivATfr97l2/QBCYAkXYDbrIWPM2IIKEl7YPhjCvKlG3kE2gm+uBo6nEXK3M5/Ffh/FLpKExzOQ3JJoJGFKBw==}

  mkdirp@0.5.6:
    resolution: {integrity: sha512-FP+p8RB8OWpF3YZBCrP5gtADmtXApB5AMLn+vdyA+PyxCjrCs00mjyUozssO33cwDeT3wNGdLxJ5M//YqtHAJw==}
    hasBin: true

  mlly@1.7.4:
    resolution: {integrity: sha512-qmdSIPC4bDJXgZTCR7XosJiNKySV7O215tsPtDN9iEO/7q/76b/ijtgRu/+epFXSJhijtTCCGp3DWS549P3xKw==}

  mri@1.2.0:
    resolution: {integrity: sha512-tzzskb3bG8LvYGFF/mDTpq3jpI6Q9wc3LEmBaghu+DdCssd1FakN7Bc0hVNmEyGq1bq3RgfkCb3cmQLpNPOroA==}
    engines: {node: '>=4'}

  mrmime@2.0.0:
    resolution: {integrity: sha512-eu38+hdgojoyq63s+yTpN4XMBdt5l8HhMhc4VKLO9KM5caLIBvUm4thi7fFaxyTmCKeNnXZ5pAlBwCUnhA09uw==}
    engines: {node: '>=10'}

  ms@2.1.3:
    resolution: {integrity: sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==}

  muggle-string@0.4.1:
    resolution: {integrity: sha512-VNTrAak/KhO2i8dqqnqnAHOa3cYBwXEZe9h+D5h/1ZqFSTEFHdM65lR7RoIqq3tBBYavsOXV84NoHXZ0AkPyqQ==}

  mute-stream@0.0.8:
    resolution: {integrity: sha512-nnbWWOkoWyUsTjKrhgD0dcz22mdkSnpYqbEjIm2nhwhuxlSkpywJmBo8h0ZqJdkp73mb90SssHkN4rsRaBAfAA==}

  mute-stream@2.0.0:
    resolution: {integrity: sha512-WWdIxpyjEn+FhQJQQv9aQAYlHoNVdzIzUySNV1gHUPDSdZJ3yZn7pAAbQcV7B56Mvu881q9FZV+0Vx2xC44VWA==}
    engines: {node: ^18.17.0 || >=20.5.0}

  nanoid@3.3.11:
    resolution: {integrity: sha512-N8SpfPUnUp1bK+PMYW8qSWdl9U+wwNWI4QKxOYDy9JAro3WMX7p2OeVRF9v+347pnakNevPmiHhNmZ2HbFA76w==}
    engines: {node: ^10 || ^12 || ^13.7 || ^14 || >=15.0.1}
    hasBin: true

  natural-compare@1.4.0:
    resolution: {integrity: sha512-OWND8ei3VtNC9h7V60qff3SVobHr996CTwgxubgyQYEpg290h9J0buyECNNJexkFm5sOajh5G116RYA1c8ZMSw==}

  neo-async@2.6.2:
    resolution: {integrity: sha512-Yd3UES5mWCSqR+qNT93S3UoYUkqAZ9lLg8a7g9rimsWmYGK8cVToA4/sF3RrshdyV3sAGMXVUmpMYOw+dLpOuw==}

  netmask@2.0.2:
    resolution: {integrity: sha512-dBpDMdxv9Irdq66304OLfEmQ9tbNRFnFTuZiLo+bD+r332bBmMJ8GBLXklIXXgxd3+v9+KUnZaUR5PJMa75Gsg==}
    engines: {node: '>= 0.4.0'}

  no-case@2.3.2:
    resolution: {integrity: sha512-rmTZ9kz+f3rCvK2TD1Ue/oZlns7OGoIWP4fc3llxxRXlOkHKoWPPWJOfFYpITabSow43QJbRIoHQXtt10VldyQ==}

  node-plop@0.26.3:
    resolution: {integrity: sha512-Cov028YhBZ5aB7MdMWJEmwyBig43aGL5WT4vdoB28Oitau1zZAcHUn8Sgfk9HM33TqhtLJ9PlM/O0Mv+QpV/4Q==}
    engines: {node: '>=8.9.4'}

  node-releases@2.0.18:
    resolution: {integrity: sha512-d9VeXT4SJ7ZeOqGX6R5EM022wpL+eWPooLI+5UpWn2jCT1aosUQEhQP214x33Wkwx3JQMvIm+tIoVOdodFS40g==}

  npm-run-path@4.0.1:
    resolution: {integrity: sha512-S48WzZW777zhNIrn7gxOlISNAqi9ZC/uQFnRdbeIHhZhCA6UqpkOT8T1G7BvfdgP4Er8gF4sUbaS0i7QvIfCWw==}
    engines: {node: '>=8'}

  nwsapi@2.2.16:
    resolution: {integrity: sha512-F1I/bimDpj3ncaNDhfyMWuFqmQDBwDB0Fogc2qpL3BWvkQteFD/8BzWuIRl83rq0DXfm8SGt/HFhLXZyljTXcQ==}

  once@1.4.0:
    resolution: {integrity: sha512-lNaJgI+2Q5URQBkccEKHTQOPaXdUxnZZElQTZY0MFUAuaEqe1E+Nyvgdz/aIyNi6Z9MzO5dv1H8n58/GELp3+w==}

  onetime@5.1.2:
    resolution: {integrity: sha512-kbpaSSGJTWdAY5KPVeMOKXSrPtr8C8C7wodJbcsd51jRnmD+GZu8Y0VoU6Dm5Z4vWr0Ig/1NKuWRKf7j5aaYSg==}
    engines: {node: '>=6'}

  onetime@7.0.0:
    resolution: {integrity: sha512-VXJjc87FScF88uafS3JllDgvAm+c/Slfz06lorj2uAY34rlUu0Nt+v8wreiImcrgAjjIHp1rXpTDlLOGw29WwQ==}
    engines: {node: '>=18'}

  oniguruma-to-es@0.4.1:
    resolution: {integrity: sha512-rNcEohFz095QKGRovP/yqPIKc+nP+Sjs4YTHMv33nMePGKrq/r2eu9Yh4646M5XluGJsUnmwoXuiXE69KDs+fQ==}

  optionator@0.9.4:
    resolution: {integrity: sha512-6IpQ7mKUxRcZNLIObR0hz7lxsapSSIYNZJwXPGeF0mTVqGKFIXj1DQcMoT22S3ROcLyY/rz0PWaWZ9ayWmad9g==}
    engines: {node: '>= 0.8.0'}

  ora@4.1.1:
    resolution: {integrity: sha512-sjYP8QyVWBpBZWD6Vr1M/KwknSw6kJOz41tvGMlwWeClHBtYKTbHMki1PsLZnxKpXMPbTKv9b3pjQu3REib96A==}
    engines: {node: '>=8'}

  ora@5.4.1:
    resolution: {integrity: sha512-5b6Y85tPxZZ7QytO+BQzysW31HJku27cRIlkbAXaNx+BdcVi+LlRFmVXzeF6a7JCwJpyw5c4b+YSVImQIrBpuQ==}
    engines: {node: '>=10'}

  ora@9.0.0:
    resolution: {integrity: sha512-m0pg2zscbYgWbqRR6ABga5c3sZdEon7bSgjnlXC64kxtxLOyjRcbbUkLj7HFyy/FTD+P2xdBWu8snGhYI0jc4A==}
    engines: {node: '>=20'}

  os-tmpdir@1.0.2:
    resolution: {integrity: sha512-D2FR03Vir7FIu45XBY20mTb+/ZSWB00sjU9jdQXt83gDrI4Ztz5Fs7/yy74g2N5SVQY4xY1qDr4rNddwYRVX0g==}
    engines: {node: '>=0.10.0'}

  outdent@0.5.0:
    resolution: {integrity: sha512-/jHxFIzoMXdqPzTaCpFzAAWhpkSjZPF4Vsn6jAfNpmbH/ymsmd7Qc6VE9BGn0L6YMj6uwpQLxCECpus4ukKS9Q==}

  p-filter@2.1.0:
    resolution: {integrity: sha512-ZBxxZ5sL2HghephhpGAQdoskxplTwr7ICaehZwLIlfL6acuVgZPm8yBNuRAFBGEqtD/hmUeq9eqLg2ys9Xr/yw==}
    engines: {node: '>=8'}

  p-limit@2.3.0:
    resolution: {integrity: sha512-//88mFWSJx8lxCzwdAABTJL2MyWB12+eIY7MDL2SqLmAkeKU9qxRvWuSyTjm3FUmpBEMuFfckAIqEaVGUDxb6w==}
    engines: {node: '>=6'}

  p-limit@3.1.0:
    resolution: {integrity: sha512-TYOanM3wGwNGsZN2cVTYPArw454xnXj5qmWF1bEoAc4+cU/ol7GVh7odevjp1FNHduHc3KZMcFduxU5Xc6uJRQ==}
    engines: {node: '>=10'}

  p-locate@4.1.0:
    resolution: {integrity: sha512-R79ZZ/0wAxKGu3oYMlz8jy/kbhsNrS7SKZ7PxEHBgJ5+F2mtFW2fK2cOtBh1cHYkQsbzFV7I+EoRKe6Yt0oK7A==}
    engines: {node: '>=8'}

  p-locate@5.0.0:
    resolution: {integrity: sha512-LaNjtRWUBY++zB5nE/NwcaoMylSPk+S+ZHNB1TzdbMJMny6dynpAGt7X/tl/QYq3TIeE6nxHppbo2LGymrG5Pw==}
    engines: {node: '>=10'}

  p-map@2.1.0:
    resolution: {integrity: sha512-y3b8Kpd8OAN444hxfBbFfj1FY/RjtTd8tzYwhUqNYXx0fXx2iX4maP4Qr6qhIKbQXI02wTLAda4fYUbDagTUFw==}
    engines: {node: '>=6'}

  p-map@3.0.0:
    resolution: {integrity: sha512-d3qXVTF/s+W+CdJ5A29wywV2n8CQQYahlgz2bFiA+4eVNJbHJodPZ+/gXwPGh0bOqA+j8S+6+ckmvLGPk1QpxQ==}
    engines: {node: '>=8'}

  p-try@2.2.0:
    resolution: {integrity: sha512-R4nPAVTAU0B9D35/Gk3uJf/7XYbQcyohSKdvAxIRSNghFl4e71hVoGnBNQz9cWaXxO2I10KTC+3jMdvvoKw6dQ==}
    engines: {node: '>=6'}

  pac-proxy-agent@7.0.2:
    resolution: {integrity: sha512-BFi3vZnO9X5Qt6NRz7ZOaPja3ic0PhlsmCRYLOpN11+mWBCR6XJDqW5RF3j8jm4WGGQZtBA+bTfxYzeKW73eHg==}
    engines: {node: '>= 14'}

  pac-resolver@7.0.1:
    resolution: {integrity: sha512-5NPgf87AT2STgwa2ntRMr45jTKrYBGkVU36yT0ig/n/GMAa3oPqhZfIQ2kMEimReg0+t9kZViDVZ83qfVUlckg==}
    engines: {node: '>= 14'}

  package-json-from-dist@1.0.1:
    resolution: {integrity: sha512-UEZIS3/by4OC8vL3P2dTXRETpebLI2NiI5vIrjaD/5UtrkFX/tNbwjTSRAGC/+7CAo2pIcBaRgWmcBBHcsaCIw==}

  package-manager-detector@0.2.6:
    resolution: {integrity: sha512-9vPH3qooBlYRJdmdYP00nvjZOulm40r5dhtal8st18ctf+6S1k7pi5yIHLvI4w5D70x0Y+xdVD9qITH0QO/A8A==}

  param-case@2.1.1:
    resolution: {integrity: sha512-eQE845L6ot89sk2N8liD8HAuH4ca6Vvr7VWAWwt7+kvvG5aBcPmmphQ68JsEG2qa9n1TykS2DLeMt363AAH8/w==}

  parent-module@1.0.1:
    resolution: {integrity: sha512-GQ2EWRpQV8/o+Aw8YqtfZZPfNRWZYkbidE9k5rpl/hC3vtHHBfGm2Ifi6qWV+coDGkrUKZAxE3Lot5kcsRlh+g==}
    engines: {node: '>=6'}

  parse-json@5.2.0:
    resolution: {integrity: sha512-ayCKvm/phCGxOkYRSCM82iDwct8/EonSEgCSxWxD7ve6jHggsFl4fZVQBPRNgQoKiuV/odhFrGzQXZwbifC8Rg==}
    engines: {node: '>=8'}

  parse-passwd@1.0.0:
    resolution: {integrity: sha512-1Y1A//QUXEZK7YKz+rD9WydcE1+EuPr6ZBgKecAB8tmoW6UFv0NREVJe1p+jRxtThkcbbKkfwIbWJe/IeE6m2Q==}
    engines: {node: '>=0.10.0'}

  parse5@7.2.1:
    resolution: {integrity: sha512-BuBYQYlv1ckiPdQi/ohiivi9Sagc9JG+Ozs0r7b/0iK3sKmrb0b9FdWdBbOdx6hBCM/F9Ir82ofnBhtZOjCRPQ==}

  pascal-case@2.0.1:
    resolution: {integrity: sha512-qjS4s8rBOJa2Xm0jmxXiyh1+OFf6ekCWOvUaRgAQSktzlTbMotS0nmG9gyYAybCWBcuP4fsBeRCKNwGBnMe2OQ==}

  path-browserify@1.0.1:
    resolution: {integrity: sha512-b7uo2UCUOYZcnF/3ID0lulOJi/bafxa1xPe7ZPsammBSpjSWQkjNxlt635YGS2MiR9GjvuXCtz2emr3jbsz98g==}

  path-case@2.1.1:
    resolution: {integrity: sha512-Ou0N05MioItesaLr9q8TtHVWmJ6fxWdqKB2RohFmNWVyJ+2zeKIeDNWAN6B/Pe7wpzWChhZX6nONYmOnMeJQ/Q==}

  path-exists@4.0.0:
    resolution: {integrity: sha512-ak9Qy5Q7jYb2Wwcey5Fpvg2KoAc/ZIhLSLOSBmRmygPsGwkVVt0fZa0qrtMz+m6tJTAHfZQ8FnmB4MG4LWy7/w==}
    engines: {node: '>=8'}

  path-is-absolute@1.0.1:
    resolution: {integrity: sha512-AVbw3UJ2e9bq64vSaS9Am0fje1Pa8pbGqTTsmXfaIiMpnr5DlDhfJOuLj9Sf95ZPVDAUerDfEk88MPmPe7UCQg==}
    engines: {node: '>=0.10.0'}

  path-key@3.1.1:
    resolution: {integrity: sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==}
    engines: {node: '>=8'}

  path-parse@1.0.7:
    resolution: {integrity: sha512-LDJzPVEEEPR+y48z93A0Ed0yXb8pAByGWo/k5YYdYgpY2/2EsOsksJrq7lOHxryrVOn1ejG6oAp8ahvOIQD8sw==}

  path-scurry@1.11.1:
    resolution: {integrity: sha512-Xa4Nw17FS9ApQFJ9umLiJS4orGjm7ZzwUrwamcGQuHSzDyth9boKDaycYdDcZDuqYATXw4HFXgaqWTctW/v1HA==}
    engines: {node: '>=16 || 14 >=14.18'}

  path-scurry@2.0.0:
    resolution: {integrity: sha512-ypGJsmGtdXUOeM5u93TyeIEfEhM6s+ljAhrk5vAvSx8uyY/02OvrZnA0YNGUrPXfpJMgI1ODd3nwz8Npx4O4cg==}
    engines: {node: 20 || >=22}

  path-type@4.0.0:
    resolution: {integrity: sha512-gDKb8aZMDeD/tZWs9P6+q0J9Mwkdl6xMV8TjnGP3qJVJ06bdMgkbBlLU8IdfOsIsFz2BW1rNVT3XuNEl8zPAvw==}
    engines: {node: '>=8'}

  pathe@2.0.3:
    resolution: {integrity: sha512-WUjGcAqP1gQacoQe+OBJsFA7Ld4DyXuUIjZ5cc75cLHvJ7dtNsTugphxIADwspS+AraAUePCKrSVtPLFj/F88w==}

  pathval@2.0.0:
    resolution: {integrity: sha512-vE7JKRyES09KiunauX7nd2Q9/L7lhok4smP9RZTDeD4MVs72Dp2qNFVz39Nz5a0FVEW0BJR6C0DYrq6unoziZA==}
    engines: {node: '>= 14.16'}

  perfect-debounce@1.0.0:
    resolution: {integrity: sha512-xCy9V055GLEqoFaHoC1SoLIaLmWctgCUaBaWxDZ7/Zx4CTyX7cJQLJOok/orfjZAh9kEYpjJa4d0KcJmCbctZA==}

  picocolors@1.0.1:
    resolution: {integrity: sha512-anP1Z8qwhkbmu7MFP5iTt+wQKXgwzf7zTyGlcdzabySa9vd0Xt392U0rVmz9poOaBj0uHJKyyo9/upk0HrEQew==}

  picocolors@1.1.1:
    resolution: {integrity: sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==}

  picomatch@2.3.1:
    resolution: {integrity: sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==}
    engines: {node: '>=8.6'}

  picomatch@4.0.2:
    resolution: {integrity: sha512-M7BAV6Rlcy5u+m6oPhAPFgJTzAioX/6B0DxyvDlo9l8+T3nLKbrczg2WLUyzd45L8RqfUMyGPzekbMvX2Ldkwg==}
    engines: {node: '>=12'}

  picomatch@4.0.3:
    resolution: {integrity: sha512-5gTmgEY/sqK6gFXLIsQNH19lWb4ebPDLA4SdLP7dsWkIXHWlG66oPuVvXSGFPppYZz8ZDZq0dYYrbHfBCVUb1Q==}
    engines: {node: '>=12'}

  pify@4.0.1:
    resolution: {integrity: sha512-uB80kBFb/tfd68bVleG9T5GGsGPjJrLAUpR5PZIrhBnIaRTQRjqdJSsIKkOP6OAIFbj7GOrcudc5pNjZ+geV2g==}
    engines: {node: '>=6'}

  pkg-types@1.3.1:
    resolution: {integrity: sha512-/Jm5M4RvtBFVkKWRu2BLUTNP8/M2a+UwuAX+ae4770q1qVGtfjG+WTCupoZixokjmHiry8uI+dlY8KXYV5HVVQ==}

  pkg-types@2.1.0:
    resolution: {integrity: sha512-wmJwA+8ihJixSoHKxZJRBQG1oY8Yr9pGLzRmSsNms0iNWyHHAlZCa7mmKiFR10YPZuz/2k169JiS/inOjBCZ2A==}

  postcss@8.5.3:
    resolution: {integrity: sha512-dle9A3yYxlBSrt8Fu+IpjGT8SY8hN0mlaA6GY8t0P5PjIOZemULz/E2Bnm/2dcUOena75OTNkHI76uZBNUUq3A==}
    engines: {node: ^10 || ^12 || >=14}

  preact@10.24.3:
    resolution: {integrity: sha512-Z2dPnBnMUfyQfSQ+GBdsGa16hz35YmLmtTLhM169uW944hYL6xzTYkJjC07j+Wosz733pMWx0fgON3JNw1jJQA==}

  prelude-ls@1.2.1:
    resolution: {integrity: sha512-vkcDPrRZo1QZLbn5RLGPpg/WmIQ65qoWWhcGKf/b5eplkkarX0m9z8ppCat4mlOqUsWpyNuYgO3VRyrYHSzX5g==}
    engines: {node: '>= 0.8.0'}

  prettier@2.8.8:
    resolution: {integrity: sha512-tdN8qQGvNjw4CHbY+XXk0JgCXn9QiF21a55rBe5LJAU+kDyC4WQn4+awm2Xfk2lQMk5fKup9XgzTZtGkjBdP9Q==}
    engines: {node: '>=10.13.0'}
    hasBin: true

  property-information@6.5.0:
    resolution: {integrity: sha512-PgTgs/BlvHxOu8QuEN7wi5A0OmXaBcHpmCSTehcs6Uuu9IkDIEo13Hy7n898RHfrQ49vKCoGeWZSaAK01nwVig==}

  proxy-agent@6.4.0:
    resolution: {integrity: sha512-u0piLU+nCOHMgGjRbimiXmA9kM/L9EHh3zL81xCdp7m+Y2pHIsnmbdDoEDoAz5geaonNR6q6+yOPQs6n4T6sBQ==}
    engines: {node: '>= 14'}

  proxy-from-env@1.1.0:
    resolution: {integrity: sha512-D+zkORCbA9f1tdWRK0RaCR3GPv50cMxcrz4X8k5LTSUD1Dkw47mKJEZQNunItRTkWwgtaUSo1RVFRIG9ZXiFYg==}

  punycode@2.3.1:
    resolution: {integrity: sha512-vYt7UD1U9Wg6138shLtLOvdAu+8DsC/ilFtEVHcH+wydcSpNE20AfSOduf6MkRFahL5FY7X1oU7nKVZFtfq8Fg==}
    engines: {node: '>=6'}

  quansync@0.2.10:
    resolution: {integrity: sha512-t41VRkMYbkHyCYmOvx/6URnN80H7k4X0lLdBMGsz+maAwrJQYB1djpV6vHrQIBE0WBSGqhtEHrK9U3DWWH8v7A==}

  queue-microtask@1.2.3:
    resolution: {integrity: sha512-NuaNSa6flKT5JaSYQzJok04JzTL1CA6aGhv5rfLW3PgqA+M2ChpZQnAC8h8i4ZFkBS8X5RqkDBHA7r4hej3K9A==}

  rc@1.2.8:
    resolution: {integrity: sha512-y3bGgqKj3QBdxLbLkomlohkvsA8gdAiUQlSBJnBhfn+BPxg4bc62d8TcBW15wavDfgexCgccckhcZvywyQYPOw==}
    hasBin: true

  react-dom@18.3.1:
    resolution: {integrity: sha512-5m4nQKp+rZRb09LNH59GM4BxTh9251/ylbKIbpe7TpGxfJ+9kv6BLkLBXIjjspbgbnIBNqlI23tRnTWT0snUIw==}
    peerDependencies:
      react: ^18.3.1

  react@18.3.1:
    resolution: {integrity: sha512-wS+hAgJShR0KhEvPJArfuPVN1+Hz1t0Y6n5jLrGQbkb4urgPE/0Rve+1kMB1v/oWgHgm4WIcV+i7F2pTVj+2iQ==}
    engines: {node: '>=0.10.0'}

  react@19.2.0:
    resolution: {integrity: sha512-tmbWg6W31tQLeB5cdIBOicJDJRR2KzXsV7uSK9iNfLWQ5bIZfxuPEHp7M8wiHyHnn0DD1i7w3Zmin0FtkrwoCQ==}
    engines: {node: '>=0.10.0'}

  read-yaml-file@1.1.0:
    resolution: {integrity: sha512-VIMnQi/Z4HT2Fxuwg5KrY174U1VdUIASQVWXXyqtNRtxSr9IYkn1rsI6Tb6HsrHCmB7gVpNwX6JxPTHcH6IoTA==}
    engines: {node: '>=6'}

  readable-stream@3.6.2:
    resolution: {integrity: sha512-9u/sniCrY3D5WdsERHzHE4G2YCXqoG5FTHUiCC4SIbr6XcLZBY05ya9EKjYek9O5xOAwjGq+1JdGBAS7Q9ScoA==}
    engines: {node: '>= 6'}

  regenerator-runtime@0.14.1:
    resolution: {integrity: sha512-dYnhHh0nJoMfnkZs6GmmhFknAGRrLznOu5nc9ML+EJxGvrx6H7teuevqVqCuPcPK//3eDrrjQhehXVx9cnkGdw==}

  regex-recursion@4.2.1:
    resolution: {integrity: sha512-QHNZyZAeKdndD1G3bKAbBEKOSSK4KOHQrAJ01N1LJeb0SoH4DJIeFhp0uUpETgONifS4+P3sOgoA1dhzgrQvhA==}

  regex-utilities@2.3.0:
    resolution: {integrity: sha512-8VhliFJAWRaUiVvREIiW2NXXTmHs4vMNnSzuJVhscgmGav3g9VDxLrQndI3dZZVVdp0ZO/5v0xmX516/7M9cng==}

  regex@5.0.2:
    resolution: {integrity: sha512-/pczGbKIQgfTMRV0XjABvc5RzLqQmwqxLHdQao2RTXPk+pmTXB2P0IaUHYdYyk412YLwUIkaeMd5T+RzVgTqnQ==}

  registry-auth-token@3.3.2:
    resolution: {integrity: sha512-JL39c60XlzCVgNrO+qq68FoNb56w/m7JYvGR2jT5iR1xBrUA3Mfx5Twk5rqTThPmQKMWydGmq8oFtDlxfrmxnQ==}

  registry-url@3.1.0:
    resolution: {integrity: sha512-ZbgR5aZEdf4UKZVBPYIgaglBmSF2Hi94s2PcIHhRGFjKYu+chjJdYfHn4rt3hB6eCKLJ8giVIIfgMa1ehDfZKA==}
    engines: {node: '>=0.10.0'}

  require-from-string@2.0.2:
    resolution: {integrity: sha512-Xf0nWe6RseziFMu+Ap9biiUbmplq6S9/p+7w7YXP/JBHhrUDDUhwa+vANyubuqfZWTveU//DYVGsDG7RKL/vEw==}
    engines: {node: '>=0.10.0'}

  resolve-dir@1.0.1:
    resolution: {integrity: sha512-R7uiTjECzvOsWSfdM0QKFNBVFcK27aHOUwdvK53BcW8zqnGdYp0Fbj82cy54+2A4P2tFM22J5kRfe1R+lM/1yg==}
    engines: {node: '>=0.10.0'}

  resolve-from@4.0.0:
    resolution: {integrity: sha512-pb/MYmXstAkysRFx8piNI1tGFNQIFA3vkE3Gq4EuA1dF6gHp/+vgZqsCGJapvy8N3Q+4o7FwvquPJcnZ7RYy4g==}
    engines: {node: '>=4'}

  resolve-from@5.0.0:
    resolution: {integrity: sha512-qYg9KP24dD5qka9J47d0aVky0N+b4fTU89LN9iDnjB5waksiC49rvMB0PrUJQGoTmH50XPiqOvAjDfaijGxYZw==}
    engines: {node: '>=8'}

  resolve-pkg-maps@1.0.0:
    resolution: {integrity: sha512-seS2Tj26TBVOC2NIc2rOe2y2ZO7efxITtLZcGSOnHHNOQ7CkiUBfw0Iw2ck6xkIhPwLhKNLS8BO+hEpngQlqzw==}

  resolve@1.22.8:
    resolution: {integrity: sha512-oKWePCxqpd6FlLvGV1VU0x7bkPmmCNolxzjMf4NczoDnQcIWrAF+cPtZn5i6n+RfD2d9i0tzpKnG6Yk168yIyw==}
    hasBin: true

  restore-cursor@3.1.0:
    resolution: {integrity: sha512-l+sSefzHpj5qimhFSE5a8nufZYAM3sBSVMAPtYkmC+4EH2anSGaEMXSD0izRQbu9nfyQ9y5JrVmp7E8oZrUjvA==}
    engines: {node: '>=8'}

  restore-cursor@5.1.0:
    resolution: {integrity: sha512-oMA2dcrw6u0YfxJQXm342bFKX/E4sG9rbTzO9ptUcR/e8A33cHuvStiYOwH7fszkZlZ1z/ta9AAoPk2F4qIOHA==}
    engines: {node: '>=18'}

  reusify@1.0.4:
    resolution: {integrity: sha512-U9nH88a3fc/ekCF1l0/UP1IosiuIjyTh7hBvXVMHYgVcfGvt897Xguj2UOLDeI5BG2m7/uwyaLVT6fbtCwTyzw==}
    engines: {iojs: '>=1.0.0', node: '>=0.10.0'}

  rfdc@1.4.1:
    resolution: {integrity: sha512-q1b3N5QkRUWUl7iyylaaj3kOpIT0N2i9MqIEQXP73GVsN9cw3fdx8X63cEmWhJGi2PPCF23Ijp7ktmd39rawIA==}

  rimraf@3.0.2:
    resolution: {integrity: sha512-JZkJMZkAGFFPP2YqXZXPbMlMBgsxzE8ILs4lMIX/2o0L9UBw9O/Y3o6wFw/i9YLapcUJWwqbi3kdxIPdC62TIA==}
    deprecated: Rimraf versions prior to v4 are no longer supported
    hasBin: true

  rimraf@6.0.1:
    resolution: {integrity: sha512-9dkvaxAsk/xNXSJzMgFqqMCuFgt2+KsOFek3TMLfo8NCPfWpBmqwyNn5Y+NX56QUYfCtsyhF3ayiboEoUmJk/A==}
    engines: {node: 20 || >=22}
    hasBin: true

  rollup-plugin-preserve-shebang@1.0.1:
    resolution: {integrity: sha512-gk7ExGBqvUinhgrvldKHkAKXXwRkWMXMZymNkrtn50uBgHITlhRjhnKmbNGwAIc4Bzgl3yLv7/8Fhi/XeHhFKg==}

  rollup@4.40.0:
    resolution: {integrity: sha512-Noe455xmA96nnqH5piFtLobsGbCij7Tu+tb3c1vYjNbTkfzGqXqQXG3wJaYXkRZuQ0vEYN4bhwg7QnIrqB5B+w==}
    engines: {node: '>=18.0.0', npm: '>=8.0.0'}
    hasBin: true

  rrweb-cssom@0.7.1:
    resolution: {integrity: sha512-TrEMa7JGdVm0UThDJSx7ddw5nVm3UJS9o9CCIZ72B1vSyEZoziDqBYP3XIoi/12lKrJR8rE3jeFHMok2F/Mnsg==}

  run-async@2.4.1:
    resolution: {integrity: sha512-tvVnVv01b8c1RrA6Ep7JkStj85Guv/YrMcwqYQnwjsAS2cTmmPGBBjAjpCW7RrSodNSoE2/qg9O4bceNvUuDgQ==}
    engines: {node: '>=0.12.0'}

  run-parallel@1.2.0:
    resolution: {integrity: sha512-5l4VyZR86LZ/lDxZTR6jqL8AFE2S0IFLMP26AbjsLVADxHdhB/c0GUsH+y39UfCi3dzz8OlQuPmnaJOMoDHQBA==}

  rxjs@6.6.7:
    resolution: {integrity: sha512-hTdwr+7yYNIT5n4AMYp85KA6yw2Va0FLa3Rguvbpa4W3I5xynaBZo41cM3XM+4Q6fRMj3sBYIR1VAmZMXYJvRQ==}
    engines: {npm: '>=2.0.0'}

  rxjs@7.8.1:
    resolution: {integrity: sha512-AA3TVj+0A2iuIoQkWEK/tqFjBq2j+6PO6Y0zJcvzLAFhEFIO3HL0vls9hWLncZbAAbK0mar7oZ4V079I/qPMxg==}

  safe-buffer@5.2.1:
    resolution: {integrity: sha512-rp3So07KcdmmKbGvgaNxQSJr7bGVSVk5S9Eq1F+ppbRo70+YeaDxkw5Dd8NPN+GD6bjnYm2VuPuCXmpuYvmCXQ==}

  safer-buffer@2.1.2:
    resolution: {integrity: sha512-YZo3K82SD7Riyi0E1EQPojLz7kpepnSQI9IyPbHHg1XXXevb5dJI7tpyN2ADxGcQbHG7vcyRHk0cbwqcQriUtg==}

  saxes@6.0.0:
    resolution: {integrity: sha512-xAg7SOnEhrm5zI3puOOKyy1OMcMlIJZYNJY7xLBwSze0UjhPLnWfj2GF2EpT0jmzaJKIWKHLsaSSajf35bcYnA==}
    engines: {node: '>=v12.22.7'}

  scheduler@0.23.2:
    resolution: {integrity: sha512-UOShsPwz7NrMUqhR6t0hWjFduvOzbtv7toDH1/hIrfRNIDBnnBWd0CwJTGvTpngVlmwGCdP9/Zl/tVrDqcuYzQ==}

  search-insights@2.17.2:
    resolution: {integrity: sha512-zFNpOpUO+tY2D85KrxJ+aqwnIfdEGi06UH2+xEb+Bp9Mwznmauqc9djbnBibJO5mpfUPPa8st6Sx65+vbeO45g==}

  semver@6.3.1:
    resolution: {integrity: sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==}
    hasBin: true

  semver@7.5.4:
    resolution: {integrity: sha512-1bCSESV6Pv+i21Hvpxp3Dx+pSD8lIPt8uVjRrxAUt/nbswYc+tK6Y2btiULjd4+fnq15PX+nqQDC7Oft7WkwcA==}
    engines: {node: '>=10'}
    hasBin: true

  semver@7.6.2:
    resolution: {integrity: sha512-FNAIBWCx9qcRhoHcgcJ0gvU7SN1lYU2ZXuSfl04bSC5OpvDHFyJCjdNHomPXxjQlCBU67YW64PzY7/VIEH7F2w==}
    engines: {node: '>=10'}
    hasBin: true

  semver@7.6.3:
    resolution: {integrity: sha512-oVekP1cKtI+CTDvHWYFUcMtsK/00wmAEfyqKfNdARm8u1wNVhSgaX7A8d4UuIlUI5e84iEwOhs7ZPYRmzU9U6A==}
    engines: {node: '>=10'}
    hasBin: true

  sentence-case@2.1.1:
    resolution: {integrity: sha512-ENl7cYHaK/Ktwk5OTD+aDbQ3uC8IByu/6Bkg+HDv8Mm+XnBnppVNalcfJTNsp1ibstKh030/JKQQWglDvtKwEQ==}

  seroval-plugins@1.1.1:
    resolution: {integrity: sha512-qNSy1+nUj7hsCOon7AO4wdAIo9P0jrzAMp18XhiOzA6/uO5TKtP7ScozVJ8T293oRIvi5wyCHSM4TrJo/c/GJA==}
    engines: {node: '>=10'}
    peerDependencies:
      seroval: ^1.0

  seroval@1.1.1:
    resolution: {integrity: sha512-rqEO6FZk8mv7Hyv4UCj3FD3b6Waqft605TLfsCe/BiaylRpyyMC0b+uA5TJKawX3KzMrdi3wsLbCaLplrQmBvQ==}
    engines: {node: '>=10'}

  shebang-command@2.0.0:
    resolution: {integrity: sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==}
    engines: {node: '>=8'}

  shebang-regex@3.0.0:
    resolution: {integrity: sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==}
    engines: {node: '>=8'}

  shiki@1.23.1:
    resolution: {integrity: sha512-8kxV9TH4pXgdKGxNOkrSMydn1Xf6It8lsle0fiqxf7a1149K1WGtdOu3Zb91T5r1JpvRPxqxU3C2XdZZXQnrig==}

  siginfo@2.0.0:
    resolution: {integrity: sha512-ybx0WO1/8bSBLEWXZvEd7gMW3Sn3JFlW3TvX1nREbDLRNQNaeNN8WK0meBwPdAaOI7TtRRRJn/Es1zhrrCHu7g==}

  signal-exit@3.0.7:
    resolution: {integrity: sha512-wnD2ZE+l+SPC/uoS0vXeE9L1+0wuaMqKlfz9AMUo38JsyLSBWSFcHR1Rri62LZc12vLr1gb3jl7iwQhgwpAbGQ==}

  signal-exit@4.1.0:
    resolution: {integrity: sha512-bzyZ1e88w9O1iNJbKnOlvYTrWPDl46O1bG0D3XInv+9tkPrxrN8jUUTiFlDkkmKWgn1M6CfIA13SuGqOa9Korw==}
    engines: {node: '>=14'}

  sirv@3.0.1:
    resolution: {integrity: sha512-FoqMu0NCGBLCcAkS1qA+XJIQTR6/JHfQXl+uGteNCQ76T91DMUjPa9xfmeqMY3z80nLSg9yQmNjK0Px6RWsH/A==}
    engines: {node: '>=18'}

  slash@3.0.0:
    resolution: {integrity: sha512-g9Q1haeby36OSStwb4ntCGGGaKsaVSjQ68fBxoQcutl5fS1vuY18H3wSt3jFyFtrkx+Kz0V1G85A4MyAdDMi2Q==}
    engines: {node: '>=8'}

  smart-buffer@4.2.0:
    resolution: {integrity: sha512-94hK0Hh8rPqQl2xXc3HsaBoOXKV20MToPkcXvwbISWLEs+64sBq5kFgn2kJDHb1Pry9yrP0dxrCI9RRci7RXKg==}
    engines: {node: '>= 6.0.0', npm: '>= 3.0.0'}

  snake-case@2.1.0:
    resolution: {integrity: sha512-FMR5YoPFwOLuh4rRz92dywJjyKYZNLpMn1R5ujVpIYkbA9p01fq8RMg0FkO4M+Yobt4MjHeLTJVm5xFFBHSV2Q==}

  socks-proxy-agent@8.0.4:
    resolution: {integrity: sha512-GNAq/eg8Udq2x0eNiFkr9gRg5bA7PXEWagQdeRX4cPSG+X/8V38v637gim9bjFptMk1QWsCTr0ttrJEiXbNnRw==}
    engines: {node: '>= 14'}

  socks@2.8.3:
    resolution: {integrity: sha512-l5x7VUUWbjVFbafGLxPWkYsHIhEvmF85tbIeFZWc8ZPtoMyybuEhL7Jye/ooC4/d48FgOjSJXgsF/AJPYCW8Zw==}
    engines: {node: '>= 10.0.0', npm: '>= 3.0.0'}

  solid-js@1.9.3:
    resolution: {integrity: sha512-5ba3taPoZGt9GY3YlsCB24kCg0Lv/rie/HTD4kG6h4daZZz7+yK02xn8Vx8dLYBc9i6Ps5JwAbEiqjmKaLB3Ag==}

  solid-refresh@0.6.3:
    resolution: {integrity: sha512-F3aPsX6hVw9ttm5LYlth8Q15x6MlI/J3Dn+o3EQyRTtTxidepSTwAYdozt01/YA+7ObcciagGEyXIopGZzQtbA==}
    peerDependencies:
      solid-js: ^1.3

  source-map-js@1.2.1:
    resolution: {integrity: sha512-UXWMKhLOwVKb728IUtQPXxfYU+usdybtUrK/8uGE8CQMvrhOpwvzDBwj0QhSL7MQc7vIsISBG8VQ8+IDQxpfQA==}
    engines: {node: '>=0.10.0'}

  source-map@0.6.1:
    resolution: {integrity: sha512-UjgapumWlbMhkBgzT7Ykc5YXUT46F0iKu8SGXq0bcwP5dz/h0Plj6enJqjz1Zbq2l5WaqYnrVbwWOWMyF3F47g==}
    engines: {node: '>=0.10.0'}

  sourcemap-codec@1.4.8:
    resolution: {integrity: sha512-9NykojV5Uih4lgo5So5dtw+f0JgJX30KCNI8gwhz2J9A15wD0Ml6tjHKwf6fTSa6fAdVBdZeNOs9eJ71qCk8vA==}
    deprecated: Please use @jridgewell/sourcemap-codec instead

  space-separated-tokens@2.0.2:
    resolution: {integrity: sha512-PEGlAwrG8yXGXRjW32fGbg66JAlOAwbObuqVoJpv/mRgoWDQfgH1wDPvtzWyUSNAXBGSk8h755YDbbcEy3SH2Q==}

  spawndamnit@3.0.1:
    resolution: {integrity: sha512-MmnduQUuHCoFckZoWnXsTg7JaiLBJrKFj9UI2MbRPGaJeVpsLcVBu6P/IGZovziM/YBsellCmsprgNA+w0CzVg==}

  speakingurl@14.0.1:
    resolution: {integrity: sha512-1POYv7uv2gXoyGFpBCmpDVSNV74IfsWlDW216UPjbWufNf+bSU6GdbDsxdcxtfwb4xlI3yxzOTKClUosxARYrQ==}
    engines: {node: '>=0.10.0'}

  sprintf-js@1.0.3:
    resolution: {integrity: sha512-D9cPgkvLlV3t3IzL0D0YLvGA9Ahk4PcvVwUbN0dSGr1aP0Nrt4AEnTUbuGvquEC0mA64Gqt1fzirlRs5ibXx8g==}

  sprintf-js@1.1.3:
    resolution: {integrity: sha512-Oo+0REFV59/rz3gfJNKQiBlwfHaSESl1pcGyABQsnnIfWOFt6JNj5gCog2U6MLZ//IGYD+nA8nI+mTShREReaA==}

  stackback@0.0.2:
    resolution: {integrity: sha512-1XMJE5fQo1jGH6Y/7ebnwPOBEkIEnT4QF32d5R1+VXdXveM0IBMJt8zfaxX1P3QhVwrYe+576+jkANtSS2mBbw==}

  std-env@3.9.0:
    resolution: {integrity: sha512-UGvjygr6F6tpH7o2qyqR6QYpwraIjKSdtzyBdyytFOHmPZY917kwdwLG0RbOjWOnKmnm3PeHjaoLLMie7kPLQw==}

  stdin-discarder@0.2.2:
    resolution: {integrity: sha512-UhDfHmA92YAlNnCfhmq0VeNL5bDbiZGg7sZ2IvPsXubGkiNa9EC+tUTsjBRsYUAz87btI6/1wf4XoVvQ3uRnmQ==}
    engines: {node: '>=18'}

  string-argv@0.3.2:
    resolution: {integrity: sha512-aqD2Q0144Z+/RqG52NeHEkZauTAUWJO8c6yTftGJKO3Tja5tUgIfmIl6kExvhtxSDP7fXB6DvzkfMpCd/F3G+Q==}
    engines: {node: '>=0.6.19'}

  string-width@4.2.3:
    resolution: {integrity: sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==}
    engines: {node: '>=8'}

  string-width@5.1.2:
    resolution: {integrity: sha512-HnLOCR3vjcY8beoNLtcjZ5/nxn2afmME6lhrDrebokqMap+XbeW8n9TXpPDOqdGK5qcI3oT0GKTW6wC7EMiVqA==}
    engines: {node: '>=12'}

  string-width@8.1.0:
    resolution: {integrity: sha512-Kxl3KJGb/gxkaUMOjRsQ8IrXiGW75O4E3RPjFIINOVH8AMl2SQ/yWdTzWwF3FevIX9LcMAjJW+GRwAlAbTSXdg==}
    engines: {node: '>=20'}

  string_decoder@1.3.0:
    resolution: {integrity: sha512-hkRX8U1WjJFd8LsDJ2yQ/wWWxaopEsABU1XfkM8A+j0+85JAGppt16cr1Whg6KIbb4okU6Mql6BOj+uup/wKeA==}

  stringify-entities@4.0.4:
    resolution: {integrity: sha512-IwfBptatlO+QCJUo19AqvrPNqlVMpW9YEL2LIVY+Rpv2qsjCGxaDLNRgeGsQWJhfItebuJhsGSLjaBbNSQ+ieg==}

  strip-ansi@6.0.1:
    resolution: {integrity: sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==}
    engines: {node: '>=8'}

  strip-ansi@7.1.0:
    resolution: {integrity: sha512-iq6eVVI64nQQTRYq2KtEg2d2uU7LElhTJwsH4YzIHZshxlgZms/wIc4VoDQTlG/IvVIrBKG06CrZnp0qv7hkcQ==}
    engines: {node: '>=12'}

  strip-ansi@7.1.2:
    resolution: {integrity: sha512-gmBGslpoQJtgnMAvOVqGZpEz9dyoKTCzy2nfz/n8aIFhN/jCE/rCmcxabB6jOOHV+0WNnylOxaxBQPSvcWklhA==}
    engines: {node: '>=12'}

  strip-bom@3.0.0:
    resolution: {integrity: sha512-vavAMRXOgBVNF6nyEEmL3DBK19iRpDcoIwW+swQ+CbGiu7lju6t+JklA1MHweoWtadgt4ISVUsXLyDq34ddcwA==}
    engines: {node: '>=4'}

  strip-bom@4.0.0:
    resolution: {integrity: sha512-3xurFv5tEgii33Zi8Jtp55wEIILR9eh34FAW00PZf+JnSsTmV/ioewSgQl97JHvgjoRGwPShsWm+IdrxB35d0w==}
    engines: {node: '>=8'}

  strip-final-newline@2.0.0:
    resolution: {integrity: sha512-BrpvfNAE3dcvq7ll3xVumzjKjZQ5tI1sEUIKr3Uoks0XUl45St3FlatVqef9prk4jRDzhW6WZg+3bk93y6pLjA==}
    engines: {node: '>=6'}

  strip-json-comments@2.0.1:
    resolution: {integrity: sha512-4gB8na07fecVVkOI6Rs4e7T6NOTki5EmL7TUduTs6bu3EdnSycntVJ4re8kgZA+wx9IueI2Y11bfbgwtzuE0KQ==}
    engines: {node: '>=0.10.0'}

  strip-json-comments@3.1.1:
    resolution: {integrity: sha512-6fPc+R4ihwqP6N/aIv2f1gMH8lOVtWQHoqC4yK6oSDVVocumAsfCqjkXnqiYMhmMwS/mEHLp7Vehlt3ql6lEig==}
    engines: {node: '>=8'}

  strip-literal@3.1.0:
    resolution: {integrity: sha512-8r3mkIM/2+PpjHoOtiAW8Rg3jJLHaV7xPwG+YRGrv6FP0wwk/toTpATxWYOW0BKdWwl82VT2tFYi5DlROa0Mxg==}

  superjson@2.2.1:
    resolution: {integrity: sha512-8iGv75BYOa0xRJHK5vRLEjE2H/i4lulTjzpUXic3Eg8akftYjkmQDa8JARQ42rlczXyFR3IeRoeFCc7RxHsYZA==}
    engines: {node: '>=16'}

  supports-color@5.5.0:
    resolution: {integrity: sha512-QjVjwdXIt408MIiAqCX4oUKsgU2EqAGzs2Ppkm4aQYbjm+ZEWEcW4SfFNTr4uMNZma0ey4f5lgLrkB0aX0QMow==}
    engines: {node: '>=4'}

  supports-color@7.2.0:
    resolution: {integrity: sha512-qpCAvRl9stuOHveKsn7HncJRvv501qIacKzQlO/+Lwxc9+0q2wLyv4Dfvt80/DPn2pqOBsJdDiogXGR9+OvwRw==}
    engines: {node: '>=8'}

  supports-color@8.1.1:
    resolution: {integrity: sha512-MpUEN2OodtUzxvKQl72cUF7RQ5EiHsGvSsVG0ia9c5RbWGL2CI4C7EpPS8UTBIplnlzZiNuV56w+FuNxy3ty2Q==}
    engines: {node: '>=10'}

  supports-preserve-symlinks-flag@1.0.0:
    resolution: {integrity: sha512-ot0WnXS9fgdkgIcePe6RHNk1WA8+muPa6cSjeR3V8K27q9BB1rTE3R1p7Hv0z1ZyAc8s6Vvv8DIyWf681MAt0w==}
    engines: {node: '>= 0.4'}

  svelte@5.41.0:
    resolution: {integrity: sha512-mP3vFFv5OUM5JN189+nJVW74kQ1dGqUrXTEzvCEVZqessY0GxZDls1nWVvt4Sxyv2USfQvAZO68VRaeIZvpzKg==}
    engines: {node: '>=18'}

  swap-case@1.1.2:
    resolution: {integrity: sha512-BAmWG6/bx8syfc6qXPprof3Mn5vQgf5dwdUNJhsNqU9WdPt5P+ES/wQ5bxfijy8zwZgZZHslC3iAsxsuQMCzJQ==}

  symbol-tree@3.2.4:
    resolution: {integrity: sha512-9QNk5KwDF+Bvz+PyObkmSYjI5ksVUYtjW7AU22r2NKcfLJcXp96hkDWU3+XndOsUb+AQ9QhfzfCT2O+CNWT5Tw==}

  tabbable@6.2.0:
    resolution: {integrity: sha512-Cat63mxsVJlzYvN51JmVXIgNoUokrIaT2zLclCXjRd8boZ0004U4KCs/sToJ75C6sdlByWxpYnb5Boif1VSFew==}

  term-size@2.2.1:
    resolution: {integrity: sha512-wK0Ri4fOGjv/XPy8SBHZChl8CM7uMc5VML7SqiQ0zG7+J5Vr+RMQDoHa2CNT6KHUnTGIXH34UDMkPzAUyapBZg==}
    engines: {node: '>=8'}

  test-exclude@7.0.1:
    resolution: {integrity: sha512-pFYqmTw68LXVjeWJMST4+borgQP2AyMNbg1BpZh9LbyhUeNkeaPF9gzfPGUAnSMV3qPYdWUwDIjjCLiSDOl7vg==}
    engines: {node: '>=18'}

  through@2.3.8:
    resolution: {integrity: sha512-w89qg7PI8wAdvX60bMDP+bFoD5Dvhm9oLheFp5O4a2QF0cSBGsBX4qZmadPMvVqlLJBBci+WqGGOAPvcDeNSVg==}

  tinybench@2.9.0:
    resolution: {integrity: sha512-0+DUvqWMValLmha6lr4kD8iAMK1HzV0/aKnCtWb9v9641TnP/MFb7Pc2bxoxQjTXAErryXVgUOfv2YqNllqGeg==}

  tinycolor2@1.6.0:
    resolution: {integrity: sha512-XPaBkWQJdsf3pLKJV9p4qN/S+fm2Oj8AIPo1BTUhg5oxkvm9+SVEGFdhyOz7tTdUTfvxMiAs4sp6/eZO2Ew+pw==}

  tinyexec@0.3.2:
    resolution: {integrity: sha512-KQQR9yN7R5+OSwaK0XQoj22pwHoTlgYqmUscPYoknOoWCWfj/5/ABTMRi69FrKU5ffPVh5QcFikpWJI/P1ocHA==}

  tinyglobby@0.2.13:
    resolution: {integrity: sha512-mEwzpUgrLySlveBwEVDMKk5B57bhLPYovRfPAXD5gA/98Opn0rCDj3GtLwFvCvH5RK9uPCExUROW5NjDwvqkxw==}
    engines: {node: '>=12.0.0'}

  tinyglobby@0.2.15:
    resolution: {integrity: sha512-j2Zq4NyQYG5XMST4cbs02Ak8iJUdxRM0XI5QyxXuZOzKOINmWurp3smXu3y5wDcJrptwpSjgXHzIQxR0omXljQ==}
    engines: {node: '>=12.0.0'}

  tinygradient@1.1.5:
    resolution: {integrity: sha512-8nIfc2vgQ4TeLnk2lFj4tRLvvJwEfQuabdsmvDdQPT0xlk9TaNtpGd6nNRxXoK6vQhN6RSzj+Cnp5tTQmpxmbw==}

  tinypool@1.1.1:
    resolution: {integrity: sha512-Zba82s87IFq9A9XmjiX5uZA/ARWDrB03OHlq+Vw1fSdt0I+4/Kutwy8BP4Y/y/aORMo61FQ0vIb5j44vSo5Pkg==}
    engines: {node: ^18.0.0 || >=20.0.0}

  tinyrainbow@2.0.0:
    resolution: {integrity: sha512-op4nsTR47R6p0vMUUoYl/a+ljLFVtlfaXkLQmqfLR1qHma1h/ysYk4hEXZ880bf2CYgTskvTa/e196Vd5dDQXw==}
    engines: {node: '>=14.0.0'}

  tinyspy@4.0.4:
    resolution: {integrity: sha512-azl+t0z7pw/z958Gy9svOTuzqIk6xq+NSheJzn5MMWtWTFywIacg2wUlzKFGtt3cthx0r2SxMK0yzJOR0IES7Q==}
    engines: {node: '>=14.0.0'}

  title-case@2.1.1:
    resolution: {integrity: sha512-EkJoZ2O3zdCz3zJsYCsxyq2OC5hrxR9mfdd5I+w8h/tmFfeOxJ+vvkxsKxdmN0WtS9zLdHEgfgVOiMVgv+Po4Q==}

  tldts-core@6.1.65:
    resolution: {integrity: sha512-Uq5t0N0Oj4nQSbU8wFN1YYENvMthvwU13MQrMJRspYCGLSAZjAfoBOJki5IQpnBM/WFskxxC/gIOTwaedmHaSg==}

  tldts@6.1.65:
    resolution: {integrity: sha512-xU9gLTfAGsADQ2PcWee6Hg8RFAv0DnjMGVJmDnUmI8a9+nYmapMQix4afwrdaCtT+AqP4MaxEzu7cCrYmBPbzQ==}
    hasBin: true

  tmp@0.0.33:
    resolution: {integrity: sha512-jRCJlojKnZ3addtTOjdIqoRuPEKBvNXcGYqzO6zWZX8KfKEpnGY5jfggJQ3EjKuu8D4bJRr0y+cYJFmYbImXGw==}
    engines: {node: '>=0.6.0'}

  to-regex-range@5.0.1:
    resolution: {integrity: sha512-65P7iz6X5yEr1cwcgvQxbbIw7Uk3gOy5dIdtZ4rDveLqhrdJP+Li/Hx6tyK0NEb+2GCyneCMJiGqrADCSNk8sQ==}
    engines: {node: '>=8.0'}

  totalist@3.0.1:
    resolution: {integrity: sha512-sf4i37nQ2LBx4m3wB74y+ubopq6W/dIzXg0FDGjsYnZHVa1Da8FH853wlL2gtUhg+xJXjfk3kUZS3BRoQeoQBQ==}
    engines: {node: '>=6'}

  tough-cookie@5.0.0:
    resolution: {integrity: sha512-FRKsF7cz96xIIeMZ82ehjC3xW2E+O2+v11udrDYewUbszngYhsGa8z6YUMMzO9QJZzzyd0nGGXnML/TReX6W8Q==}
    engines: {node: '>=16'}

  tr46@5.0.0:
    resolution: {integrity: sha512-tk2G5R2KRwBd+ZN0zaEXpmzdKyOYksXwywulIX95MBODjSzMIuQnQ3m8JxgbhnL1LeVo7lqQKsYa1O3Htl7K5g==}
    engines: {node: '>=18'}

  trim-lines@3.0.1:
    resolution: {integrity: sha512-kRj8B+YHZCc9kQYdWfJB2/oUl9rA99qbowYYBtr4ui4mZyAQ2JpvVBd/6U2YloATfqBhBTSMhTpgBHtU0Mf3Rg==}

  ts-api-utils@2.1.0:
    resolution: {integrity: sha512-CUgTZL1irw8u29bzrOD/nH85jqyc74D6SshFgujOIA7osm2Rz7dYH77agkx7H4FBNxDq7Cjf+IjaX/8zwFW+ZQ==}
    engines: {node: '>=18.12'}
    peerDependencies:
      typescript: '>=4.8.4'

  ts-node@10.9.2:
    resolution: {integrity: sha512-f0FFpIdcHgn8zcPSbf1dRevwt047YMnaiJM3u2w2RewrB+fob/zePZcrOyQoLMMO7aBIddLcQIEK5dYjkLnGrQ==}
    hasBin: true
    peerDependencies:
      '@swc/core': '>=1.2.50'
      '@swc/wasm': '>=1.2.50'
      '@types/node': '*'
      typescript: '>=2.7'
    peerDependenciesMeta:
      '@swc/core':
        optional: true
      '@swc/wasm':
        optional: true

  tsconfck@3.1.4:
    resolution: {integrity: sha512-kdqWFGVJqe+KGYvlSO9NIaWn9jT1Ny4oKVzAJsKii5eoE9snzTJzL4+MMVOMn+fikWGFmKEylcXL710V/kIPJQ==}
    engines: {node: ^18 || >=20}
    hasBin: true
    peerDependencies:
      typescript: ^5.0.0
    peerDependenciesMeta:
      typescript:
        optional: true

  tslib@1.14.1:
    resolution: {integrity: sha512-Xni35NKzjgMrwevysHTCArtLDpPvye8zV/0E4EyYn43P7/7qvQwPh9BGkHewbMulVntbigmcT7rdX3BNo9wRJg==}

  tslib@2.8.1:
    resolution: {integrity: sha512-oJFu94HQb+KVduSUQL7wnpmqnfmLsOA/nAh6b6EH0wCEoK0/mPeXU6c3wKDV83MkOuHPRHtSXKKU99IBazS/2w==}

  tsx@4.19.2:
    resolution: {integrity: sha512-pOUl6Vo2LUq/bSa8S5q7b91cgNSjctn9ugq/+Mvow99qW6x/UZYwzxy/3NmqoT66eHYfCVvFvACC58UBPFf28g==}
    engines: {node: '>=18.0.0'}
    hasBin: true

  turbo-darwin-64@2.3.3:
    resolution: {integrity: sha512-bxX82xe6du/3rPmm4aCC5RdEilIN99VUld4HkFQuw+mvFg6darNBuQxyWSHZTtc25XgYjQrjsV05888w1grpaA==}
    cpu: [x64]
    os: [darwin]

  turbo-darwin-arm64@2.3.3:
    resolution: {integrity: sha512-DYbQwa3NsAuWkCUYVzfOUBbSUBVQzH5HWUFy2Kgi3fGjIWVZOFk86ss+xsWu//rlEAfYwEmopigsPYSmW4X15A==}
    cpu: [arm64]
    os: [darwin]

  turbo-linux-64@2.3.3:
    resolution: {integrity: sha512-eHj9OIB0dFaP6BxB88jSuaCLsOQSYWBgmhy2ErCu6D2GG6xW3b6e2UWHl/1Ho9FsTg4uVgo4DB9wGsKa5erjUA==}
    cpu: [x64]
    os: [linux]

  turbo-linux-arm64@2.3.3:
    resolution: {integrity: sha512-NmDE/NjZoDj1UWBhMtOPmqFLEBKhzGS61KObfrDEbXvU3lekwHeoPvAMfcovzswzch+kN2DrtbNIlz+/rp8OCg==}
    cpu: [arm64]
    os: [linux]

  turbo-windows-64@2.3.3:
    resolution: {integrity: sha512-O2+BS4QqjK3dOERscXqv7N2GXNcqHr9hXumkMxDj/oGx9oCatIwnnwx34UmzodloSnJpgSqjl8iRWiY65SmYoQ==}
    cpu: [x64]
    os: [win32]

  turbo-windows-arm64@2.3.3:
    resolution: {integrity: sha512-dW4ZK1r6XLPNYLIKjC4o87HxYidtRRcBeo/hZ9Wng2XM/MqqYkAyzJXJGgRMsc0MMEN9z4+ZIfnSNBrA0b08ag==}
    cpu: [arm64]
    os: [win32]

  turbo@2.3.3:
    resolution: {integrity: sha512-DUHWQAcC8BTiUZDRzAYGvpSpGLiaOQPfYXlCieQbwUvmml/LRGIe3raKdrOPOoiX0DYlzxs2nH6BoWJoZrj8hA==}
    hasBin: true

  type-check@0.4.0:
    resolution: {integrity: sha512-XleUoc9uwGXqjWwXaUTZAmzMcFZ5858QA2vvx1Ur5xIcixXIP+8LnFDgRplU30us6teqdlskFfu+ae4K79Ooew==}
    engines: {node: '>= 0.8.0'}

  type-fest@0.21.3:
    resolution: {integrity: sha512-t0rzBq87m3fVcduHDUFhKmyyX+9eo6WQjZvf51Ea/M0Q7+T374Jp1aUiyUl0GKxp8M/OETVHSDvmkyPgvX+X2w==}
    engines: {node: '>=10'}

  typescript-eslint@8.41.0:
    resolution: {integrity: sha512-n66rzs5OBXW3SFSnZHr2T685q1i4ODm2nulFJhMZBotaTavsS8TrI3d7bDlRSs9yWo7HmyWrN9qDu14Qv7Y0Dw==}
    engines: {node: ^18.18.0 || ^20.9.0 || >=21.1.0}
    peerDependencies:
      eslint: ^8.57.0 || ^9.0.0
      typescript: '>=4.8.4 <6.0.0'

  typescript@5.8.2:
    resolution: {integrity: sha512-aJn6wq13/afZp/jT9QZmwEjDqqvSGp1VT5GVg+f/t6/oVyrgXM6BY1h9BRh/O5p3PlUPAe+WuiEZOmb/49RqoQ==}
    engines: {node: '>=14.17'}
    hasBin: true

  typescript@5.9.2:
    resolution: {integrity: sha512-CWBzXQrc/qOkhidw1OzBTQuYRbfyxDXJMVJ1XNwUHGROVmuaeiEm3OslpZ1RV96d7SKKjZKrSJu3+t/xlw3R9A==}
    engines: {node: '>=14.17'}
    hasBin: true

  ufo@1.5.4:
    resolution: {integrity: sha512-UsUk3byDzKd04EyoZ7U4DOlxQaD14JUKQl6/P7wiX4FNvUfm3XL246n9W5AmqwW5RSFJ27NAuM0iLscAOYUiGQ==}

  uglify-js@3.19.3:
    resolution: {integrity: sha512-v3Xu+yuwBXisp6QYTcH4UbH+xYJXqnq2m/LtQVWKWzYc1iehYnLixoQDN9FH6/j9/oybfd6W9Ghwkl8+UMKTKQ==}
    engines: {node: '>=0.8.0'}
    hasBin: true

  undici-types@6.20.0:
    resolution: {integrity: sha512-Ny6QZ2Nju20vw1SRHe3d9jVu6gJ+4e3+MMpqu7pqE5HT6WsTSlce++GQmK5UXS8mzV8DSYHrQH+Xrf2jVcuKNg==}

  undici-types@6.21.0:
    resolution: {integrity: sha512-iwDZqg0QAGrg9Rav5H4n0M64c3mkR59cJ6wQp+7C4nI0gsmExaedaYLNO44eT4AtBBwjbTiGPMlt2Md0T9H9JQ==}

  unist-util-is@6.0.0:
    resolution: {integrity: sha512-2qCTHimwdxLfz+YzdGfkqNlH0tLi9xjTnHddPmJwtIG9MGsdbutfTc4P+haPD7l7Cjxf/WZj+we5qfVPvvxfYw==}

  unist-util-position@5.0.0:
    resolution: {integrity: sha512-fucsC7HjXvkB5R3kTCO7kUjRdrS0BJt3M/FPxmHMBOm8JQi2BsHAHFsy27E0EolP8rp0NzXsJ+jNPyDWvOJZPA==}

  unist-util-stringify-position@4.0.0:
    resolution: {integrity: sha512-0ASV06AAoKCDkS2+xw5RXJywruurpbC4JZSm7nr7MOt1ojAzvyyaO+UxZf18j8FCF6kmzCZKcAgN/yu2gm2XgQ==}

  unist-util-visit-parents@6.0.1:
    resolution: {integrity: sha512-L/PqWzfTP9lzzEa6CKs0k2nARxTdZduw3zyh8d2NVBnsyvHjSX4TWse388YrrQKbvI8w20fGjGlhgT96WwKykw==}

  unist-util-visit@5.0.0:
    resolution: {integrity: sha512-MR04uvD+07cwl/yhVuVWAtw+3GOR/knlL55Nd/wAdblk27GCVt3lqpTivy/tkJcZoNPzTwS1Y+KMojlLDhoTzg==}

  universal-user-agent@6.0.1:
    resolution: {integrity: sha512-yCzhz6FN2wU1NiiQRogkTQszlQSlpWaw8SvVegAc+bDxbzHgh1vX8uIe8OYyMH6DwH+sdTJsgMl36+mSMdRJIQ==}

  universalify@0.1.2:
    resolution: {integrity: sha512-rBJeI5CXAlmy1pV+617WB9J63U6XcazHHF2f2dbJix4XzpUF0RS3Zbj0FGIOCAva5P/d/GBOYaACQ1w+0azUkg==}
    engines: {node: '>= 4.0.0'}

  universalify@2.0.1:
    resolution: {integrity: sha512-gptHNQghINnc/vTGIk0SOFGFNXw7JVrlRUtConJRlvaw6DuX0wO5Jeko9sWrMBhh+PsYAZ7oXAiOnf/UKogyiw==}
    engines: {node: '>= 10.0.0'}

  update-browserslist-db@1.1.1:
    resolution: {integrity: sha512-R8UzCaa9Az+38REPiJ1tXlImTJXlVfgHZsglwBD/k6nj76ctsH1E3q4doGrukiLQd3sGQYu56r5+lo5r94l29A==}
    hasBin: true
    peerDependencies:
      browserslist: '>= 4.21.0'

  update-check@1.5.4:
    resolution: {integrity: sha512-5YHsflzHP4t1G+8WGPlvKbJEbAJGCgw+Em+dGR1KmBUbr1J36SJBqlHLjR7oob7sco5hWHGQVcr9B2poIVDDTQ==}

  upper-case-first@1.1.2:
    resolution: {integrity: sha512-wINKYvI3Db8dtjikdAqoBbZoP6Q+PZUyfMR7pmwHzjC2quzSkUq5DmPrTtPEqHaz8AGtmsB4TqwapMTM1QAQOQ==}

  upper-case@1.1.3:
    resolution: {integrity: sha512-WRbjgmYzgXkCV7zNVpy5YgrHgbBv126rMALQQMrmzOVC4GM2waQ9x7xtm8VU+1yF2kWyPzI9zbZ48n4vSxwfSA==}

  uri-js@4.4.1:
    resolution: {integrity: sha512-7rKUyy33Q1yc98pQ1DAmLtwX109F7TIfWlW1Ydo8Wl1ii1SeHieeh0HHfPeL2fMXK6z0s8ecKs9frCuLJvndBg==}

  util-deprecate@1.0.2:
    resolution: {integrity: sha512-EPD5q1uXyFxJpCrLnCc1nHnq3gOa6DZBocAIiI2TaSCA7VCJ1UJDMagCzIkXNsUYfD1daK//LTEQ8xiIbrHtcw==}

  v8-compile-cache-lib@3.0.1:
    resolution: {integrity: sha512-wa7YjyUGfNZngI/vtK0UHAN+lgDCxBPCylVXGp0zu59Fz5aiGtNXaq3DhIov063MorB+VfufLh3JlF2KdTK3xg==}

  valibot@1.1.0:
    resolution: {integrity: sha512-Nk8lX30Qhu+9txPYTwM0cFlWLdPFsFr6LblzqIySfbZph9+BFsAHsNvHOymEviUepeIW6KFHzpX8TKhbptBXXw==}
    peerDependencies:
      typescript: '>=5'
    peerDependenciesMeta:
      typescript:
        optional: true

  validate-html-nesting@1.2.2:
    resolution: {integrity: sha512-hGdgQozCsQJMyfK5urgFcWEqsSSrK63Awe0t/IMR0bZ0QMtnuaiHzThW81guu3qx9abLi99NEuiaN6P9gVYsNg==}

  validate-npm-package-name@5.0.1:
    resolution: {integrity: sha512-OljLrQ9SQdOUqTaQxqL5dEfZWrXExyyWsozYlAWFawPVNuD83igl7uJD2RTkNMbniIYgt8l81eCJGIdQF7avLQ==}
    engines: {node: ^14.17.0 || ^16.13.0 || >=18.0.0}

  vfile-message@4.0.2:
    resolution: {integrity: sha512-jRDZ1IMLttGj41KcZvlrYAaI3CfqpLpfpf+Mfig13viT6NKvRzWZ+lXz0Y5D60w6uJIBAOGq9mSHf0gktF0duw==}

  vfile@6.0.3:
    resolution: {integrity: sha512-KzIbH/9tXat2u30jf+smMwFCsno4wHVdNmzFyL+T/L3UGqqk6JKfVqOFOZEpZSHADH1k40ab6NUIXZq422ov3Q==}

  vite-node@3.2.4:
    resolution: {integrity: sha512-EbKSKh+bh1E1IFxeO0pg1n4dvoOTt0UDiXMd/qn++r98+jPO1xtJilvXldeuQ8giIB5IkpjCgMleHMNEsGH6pg==}
    engines: {node: ^18.0.0 || ^20.0.0 || >=22.0.0}
    hasBin: true

  vite-plugin-dts@4.5.3:
    resolution: {integrity: sha512-P64VnD00dR+e8S26ESoFELqc17+w7pKkwlBpgXteOljFyT0zDwD8hH4zXp49M/kciy//7ZbVXIwQCekBJjfWzA==}
    peerDependencies:
      typescript: '*'
      vite: '*'
    peerDependenciesMeta:
      vite:
        optional: true

  vite-plugin-mkcert@1.17.6:
    resolution: {integrity: sha512-4JR1RN0HEg/w17eRQJ/Ve2pSa6KCVQcQO6yKtIaKQCFDyd63zGfXHWpygBkvvRSpqa0GcqNKf0fjUJ0HiJQXVQ==}
    engines: {node: '>=v16.7.0'}
    peerDependencies:
      vite: '>=3'

  vite-plugin-solid@2.11.0:
    resolution: {integrity: sha512-G+NiwDj4EAeUE0wt3Ur9f+Lt9oMUuLd0FIxYuqwJSqRacKQRteCwUFzNy8zMEt88xWokngQhiFjfJMhjc1fDXw==}
    peerDependencies:
      '@testing-library/jest-dom': ^5.16.6 || ^5.17.0 || ^6.*
      solid-js: ^1.7.2
      vite: ^3.0.0 || ^4.0.0 || ^5.0.0 || ^6.0.0
    peerDependenciesMeta:
      '@testing-library/jest-dom':
        optional: true

  vite-tsconfig-paths@5.1.4:
    resolution: {integrity: sha512-cYj0LRuLV2c2sMqhqhGpaO3LretdtMn/BVX4cPLanIZuwwrkVl+lK84E/miEXkCHWXuq65rhNN4rXsBcOB3S4w==}
    peerDependencies:
      vite: '*'
    peerDependenciesMeta:
      vite:
        optional: true

  vite@5.4.11:
    resolution: {integrity: sha512-c7jFQRklXua0mTzneGW9QVyxFjUgwcihC4bXEtujIo2ouWCe1Ajt/amn2PCxYnhYfd5k09JX3SB7OYWFKYqj8Q==}
    engines: {node: ^18.0.0 || >=20.0.0}
    hasBin: true
    peerDependencies:
      '@types/node': ^18.0.0 || >=20.0.0
      less: '*'
      lightningcss: ^1.21.0
      sass: '*'
      sass-embedded: '*'
      stylus: '*'
      sugarss: '*'
      terser: ^5.4.0
    peerDependenciesMeta:
      '@types/node':
        optional: true
      less:
        optional: true
      lightningcss:
        optional: true
      sass:
        optional: true
      sass-embedded:
        optional: true
      stylus:
        optional: true
      sugarss:
        optional: true
      terser:
        optional: true

  vite@6.3.3:
    resolution: {integrity: sha512-5nXH+QsELbFKhsEfWLkHrvgRpTdGJzqOZ+utSdmPTvwHmvU6ITTm3xx+mRusihkcI8GeC7lCDyn3kDtiki9scw==}
    engines: {node: ^18.0.0 || ^20.0.0 || >=22.0.0}
    hasBin: true
    peerDependencies:
      '@types/node': ^18.0.0 || ^20.0.0 || >=22.0.0
      jiti: '>=1.21.0'
      less: '*'
      lightningcss: ^1.21.0
      sass: '*'
      sass-embedded: '*'
      stylus: '*'
      sugarss: '*'
      terser: ^5.16.0
      tsx: ^4.8.1
      yaml: ^2.4.2
    peerDependenciesMeta:
      '@types/node':
        optional: true
      jiti:
        optional: true
      less:
        optional: true
      lightningcss:
        optional: true
      sass:
        optional: true
      sass-embedded:
        optional: true
      stylus:
        optional: true
      sugarss:
        optional: true
      terser:
        optional: true
      tsx:
        optional: true
      yaml:
        optional: true

  vitefu@1.0.4:
    resolution: {integrity: sha512-y6zEE3PQf6uu/Mt6DTJ9ih+kyJLr4XcSgHR2zUkM8SWDhuixEJxfJ6CZGMHh1Ec3vPLoEA0IHU5oWzVqw8ulow==}
    peerDependencies:
      vite: ^3.0.0 || ^4.0.0 || ^5.0.0 || ^6.0.0
    peerDependenciesMeta:
      vite:
        optional: true

  vitepress@1.5.0:
    resolution: {integrity: sha512-q4Q/G2zjvynvizdB3/bupdYkCJe2umSAMv9Ju4d92E6/NXJ59z70xB0q5p/4lpRyAwflDsbwy1mLV9Q5+nlB+g==}
    hasBin: true
    peerDependencies:
      markdown-it-mathjax3: ^4
      postcss: ^8
    peerDependenciesMeta:
      markdown-it-mathjax3:
        optional: true
      postcss:
        optional: true

  vitest@3.2.4:
    resolution: {integrity: sha512-LUCP5ev3GURDysTWiP47wRRUpLKMOfPh+yKTx3kVIEiu5KOMeqzpnYNsKyOoVrULivR8tLcks4+lga33Whn90A==}
    engines: {node: ^18.0.0 || ^20.0.0 || >=22.0.0}
    hasBin: true
    peerDependencies:
      '@edge-runtime/vm': '*'
      '@types/debug': ^4.1.12
      '@types/node': ^18.0.0 || ^20.0.0 || >=22.0.0
      '@vitest/browser': 3.2.4
      '@vitest/ui': 3.2.4
      happy-dom: '*'
      jsdom: '*'
    peerDependenciesMeta:
      '@edge-runtime/vm':
        optional: true
      '@types/debug':
        optional: true
      '@types/node':
        optional: true
      '@vitest/browser':
        optional: true
      '@vitest/ui':
        optional: true
      happy-dom:
        optional: true
      jsdom:
        optional: true

  vscode-uri@3.0.8:
    resolution: {integrity: sha512-AyFQ0EVmsOZOlAnxoFOGOq1SQDWAB7C6aqMGS23svWAllfOaxbuFvcT8D1i8z3Gyn8fraVeZNNmN6e9bxxXkKw==}

  vue-demi@0.14.10:
    resolution: {integrity: sha512-nMZBOwuzabUO0nLgIcc6rycZEebF6eeUfaiQx9+WSk8e29IbLvPU9feI6tqW4kTo3hvoYAJkMh8n8D0fuISphg==}
    engines: {node: '>=12'}
    hasBin: true
    peerDependencies:
      '@vue/composition-api': ^1.0.0-rc.1
      vue: ^3.0.0-0 || ^2.6.0
    peerDependenciesMeta:
      '@vue/composition-api':
        optional: true

  vue@3.5.13:
    resolution: {integrity: sha512-wmeiSMxkZCSc+PM2w2VRsOYAZC8GdipNFRTsLSfodVqI9mbejKeXEGr8SckuLnrQPGe3oJN5c3K0vpoU9q/wCQ==}
    peerDependencies:
      typescript: '*'
    peerDependenciesMeta:
      typescript:
        optional: true

  w3c-xmlserializer@5.0.0:
    resolution: {integrity: sha512-o8qghlI8NZHU1lLPrpi2+Uq7abh4GGPpYANlalzWxyWteJOCsr/P+oPBA49TOLu5FTZO4d3F9MnWJfiMo4BkmA==}
    engines: {node: '>=18'}

  wcwidth@1.0.1:
    resolution: {integrity: sha512-XHPEwS0q6TaxcvG85+8EYkbiCux2XtWG2mkc47Ng2A77BQu9+DqIOJldST4HgPkuea7dvKSj5VgX3P1d4rW8Tg==}

  webidl-conversions@7.0.0:
    resolution: {integrity: sha512-VwddBukDzu71offAQR975unBIGqfKZpM+8ZX6ySk8nYhVoo5CYaZyzt3YBvYtRtO+aoGlqxPg/B87NGVZ/fu6g==}
    engines: {node: '>=12'}

  whatwg-encoding@3.1.1:
    resolution: {integrity: sha512-6qN4hJdMwfYBtE3YBTTHhoeuUrDBPZmbQaxWAqSALV/MeEnR5z1xd8UKud2RAkFoPkmB+hli1TZSnyi84xz1vQ==}
    engines: {node: '>=18'}

  whatwg-mimetype@3.0.0:
    resolution: {integrity: sha512-nt+N2dzIutVRxARx1nghPKGv1xHikU7HKdfafKkLNLindmPU/ch3U31NOCGGA/dmPcmb1VlofO0vnKAcsm0o/Q==}
    engines: {node: '>=12'}

  whatwg-mimetype@4.0.0:
    resolution: {integrity: sha512-QaKxh0eNIi2mE9p2vEdzfagOKHCcj1pJ56EEHGQOVxp8r9/iszLUUV7v89x9O1p/T+NlTM5W7jW6+cz4Fq1YVg==}
    engines: {node: '>=18'}

  whatwg-url@14.0.0:
    resolution: {integrity: sha512-1lfMEm2IEr7RIV+f4lUNPOqfFL+pO+Xw3fJSqmjX9AbXcXcYOkCe1P6+9VBZB6n94af16NfZf+sSk0JCBZC9aw==}
    engines: {node: '>=18'}

  which@1.3.1:
    resolution: {integrity: sha512-HxJdYWq1MTIQbJ3nw0cqssHoTNU267KlrDuGZ1WYlxDStUtKUhOaJmh112/TZmHxxUfuJqPXSOm7tDyas0OSIQ==}
    hasBin: true

  which@2.0.2:
    resolution: {integrity: sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==}
    engines: {node: '>= 8'}
    hasBin: true

  why-is-node-running@2.3.0:
    resolution: {integrity: sha512-hUrmaWBdVDcxvYqnyh09zunKzROWjbZTiNy8dBEjkS7ehEDQibXJ7XvlmtbwuTclUiIyN+CyXQD4Vmko8fNm8w==}
    engines: {node: '>=8'}
    hasBin: true

  word-wrap@1.2.5:
    resolution: {integrity: sha512-BN22B5eaMMI9UMtjrGd5g5eCYPpCPDUy0FJXbYsaT5zYxjFOckS53SQDE3pWkVoWpHXVb3BrYcEN4Twa55B5cA==}
    engines: {node: '>=0.10.0'}

  wordwrap@1.0.0:
    resolution: {integrity: sha512-gvVzJFlPycKc5dZN4yPkP8w7Dc37BtP1yczEneOb4uq34pXZcvrtRTmWV8W+Ume+XCxKgbjM+nevkyFPMybd4Q==}

  wrap-ansi@6.2.0:
    resolution: {integrity: sha512-r6lPcBGxZXlIcymEu7InxDMhdW0KDxpLgoFLcguasxCaJ/SOIZwINatK9KY/tf+ZrlywOKU0UDj3ATXUBfxJXA==}
    engines: {node: '>=8'}

  wrap-ansi@7.0.0:
    resolution: {integrity: sha512-YVGIj2kamLSTxw6NsZjoBxfSwsn0ycdesmc4p+Q21c5zPuZ1pl+NfxVdxPtdHvmNVOQ6XSYG4AUtyt/Fi7D16Q==}
    engines: {node: '>=10'}

  wrap-ansi@8.1.0:
    resolution: {integrity: sha512-si7QWI6zUMq56bESFvagtmzMdGOtoxfR+Sez11Mobfc7tm+VkUckk9bW2UeffTGVUbOksxmSw0AA2gs8g71NCQ==}
    engines: {node: '>=12'}

  wrappy@1.0.2:
    resolution: {integrity: sha512-l4Sp/DRseor9wL6EvV2+TuQn63dMkPjZ/sp9XkghTEbV9KlPS1xUsZ3u7/IQO4wxtcFB4bgpQPRcR3QCvezPcQ==}

  ws@8.18.0:
    resolution: {integrity: sha512-8VbfWfHLbbwu3+N6OKsOMpBdT4kXPDDB9cJk2bJ6mh9ucxdlnNvH1e+roYkKmN9Nxw2yjz7VzeO9oOz2zJ04Pw==}
    engines: {node: '>=10.0.0'}
    peerDependencies:
      bufferutil: ^4.0.1
      utf-8-validate: '>=5.0.2'
    peerDependenciesMeta:
      bufferutil:
        optional: true
      utf-8-validate:
        optional: true

  xml-name-validator@5.0.0:
    resolution: {integrity: sha512-EvGK8EJ3DhaHfbRlETOWAS5pO9MZITeauHKJyb8wyajUfQUenkIg2MvLDTZ4T/TgIcm3HU0TFBgWWboAZ30UHg==}
    engines: {node: '>=18'}

  xmlchars@2.2.0:
    resolution: {integrity: sha512-JZnDKK8B0RCDw84FNdDAIpZK+JuJw+s7Lz8nksI7SIuU3UXJJslUthsi+uWBUYOwPFwW7W7PRLRfUKpxjtjFCw==}

  yallist@3.1.1:
    resolution: {integrity: sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==}

  yallist@4.0.0:
    resolution: {integrity: sha512-3wdGidZyq5PB084XLES5TpOSRA3wjXAlIWMhum2kRcv/41Sn2emQ0dycQW4uZXLejwKvg6EsvbdlVL+FYEct7A==}

  yaml@2.6.0:
    resolution: {integrity: sha512-a6ae//JvKDEra2kdi1qzCyrJW/WZCgFi8ydDV+eXExl95t+5R+ijnqHJbz9tmMh8FUjx3iv2fCQ4dclAQlO2UQ==}
    engines: {node: '>= 14'}
    hasBin: true

  yn@3.1.1:
    resolution: {integrity: sha512-Ux4ygGWsu2c7isFWe8Yu1YluJmqVhxqK2cLXNQA5AcC3QfbGNpM7fu0Y8b/z16pXLnFxZYvWhd3fhBY9DLmC6Q==}
    engines: {node: '>=6'}

  yocto-queue@0.1.0:
    resolution: {integrity: sha512-rVksvsnNCdJ/ohGc6xgPwyN8eheCxsiLM8mxuE/t/mOVqJewPuO1miLpTHQiRgTKCLexL4MeAFVagts7HmNZ2Q==}
    engines: {node: '>=10'}

  yoctocolors-cjs@2.1.3:
    resolution: {integrity: sha512-U/PBtDf35ff0D8X8D0jfdzHYEPFxAI7jJlxZXwCSez5M3190m+QobIfh+sWDWSHMCWWJN2AWamkegn6vr6YBTw==}
    engines: {node: '>=18'}

  yoctocolors@2.1.2:
    resolution: {integrity: sha512-CzhO+pFNo8ajLM2d2IW/R93ipy99LWjtwblvC1RsoSUMZgyLbYFr221TnSNT7GjGdYui6P459mw9JH/g/zW2ug==}
    engines: {node: '>=18'}

  zimmerframe@1.1.4:
    resolution: {integrity: sha512-B58NGBEoc8Y9MWWCQGl/gq9xBCe4IiKM0a2x7GZdQKOW5Exr8S1W24J6OgM1njK8xCRGvAJIL/MxXHf6SkmQKQ==}

  zwitch@2.0.4:
    resolution: {integrity: sha512-bXE4cR/kVZhKZX/RjPEflHaKVhUVl85noU3v6b8apfQEc1x4A+zBxjZ4lN8LqGd6WZ3dl98pY4o717VFmoPp+A==}

snapshots:

  '@algolia/autocomplete-core@1.17.7(@algolia/client-search@5.14.2)(algoliasearch@5.14.2)(search-insights@2.17.2)':
    dependencies:
      '@algolia/autocomplete-plugin-algolia-insights': 1.17.7(@algolia/client-search@5.14.2)(algoliasearch@5.14.2)(search-insights@2.17.2)
      '@algolia/autocomplete-shared': 1.17.7(@algolia/client-search@5.14.2)(algoliasearch@5.14.2)
    transitivePeerDependencies:
      - '@algolia/client-search'
      - algoliasearch
      - search-insights

  '@algolia/autocomplete-plugin-algolia-insights@1.17.7(@algolia/client-search@5.14.2)(algoliasearch@5.14.2)(search-insights@2.17.2)':
    dependencies:
      '@algolia/autocomplete-shared': 1.17.7(@algolia/client-search@5.14.2)(algoliasearch@5.14.2)
      search-insights: 2.17.2
    transitivePeerDependencies:
      - '@algolia/client-search'
      - algoliasearch

  '@algolia/autocomplete-preset-algolia@1.17.7(@algolia/client-search@5.14.2)(algoliasearch@5.14.2)':
    dependencies:
      '@algolia/autocomplete-shared': 1.17.7(@algolia/client-search@5.14.2)(algoliasearch@5.14.2)
      '@algolia/client-search': 5.14.2
      algoliasearch: 5.14.2

  '@algolia/autocomplete-shared@1.17.7(@algolia/client-search@5.14.2)(algoliasearch@5.14.2)':
    dependencies:
      '@algolia/client-search': 5.14.2
      algoliasearch: 5.14.2

  '@algolia/client-abtesting@5.14.2':
    dependencies:
      '@algolia/client-common': 5.14.2
      '@algolia/requester-browser-xhr': 5.14.2
      '@algolia/requester-fetch': 5.14.2
      '@algolia/requester-node-http': 5.14.2

  '@algolia/client-analytics@5.14.2':
    dependencies:
      '@algolia/client-common': 5.14.2
      '@algolia/requester-browser-xhr': 5.14.2
      '@algolia/requester-fetch': 5.14.2
      '@algolia/requester-node-http': 5.14.2

  '@algolia/client-common@5.14.2': {}

  '@algolia/client-insights@5.14.2':
    dependencies:
      '@algolia/client-common': 5.14.2
      '@algolia/requester-browser-xhr': 5.14.2
      '@algolia/requester-fetch': 5.14.2
      '@algolia/requester-node-http': 5.14.2

  '@algolia/client-personalization@5.14.2':
    dependencies:
      '@algolia/client-common': 5.14.2
      '@algolia/requester-browser-xhr': 5.14.2
      '@algolia/requester-fetch': 5.14.2
      '@algolia/requester-node-http': 5.14.2

  '@algolia/client-query-suggestions@5.14.2':
    dependencies:
      '@algolia/client-common': 5.14.2
      '@algolia/requester-browser-xhr': 5.14.2
      '@algolia/requester-fetch': 5.14.2
      '@algolia/requester-node-http': 5.14.2

  '@algolia/client-search@5.14.2':
    dependencies:
      '@algolia/client-common': 5.14.2
      '@algolia/requester-browser-xhr': 5.14.2
      '@algolia/requester-fetch': 5.14.2
      '@algolia/requester-node-http': 5.14.2

  '@algolia/ingestion@1.14.2':
    dependencies:
      '@algolia/client-common': 5.14.2
      '@algolia/requester-browser-xhr': 5.14.2
      '@algolia/requester-fetch': 5.14.2
      '@algolia/requester-node-http': 5.14.2

  '@algolia/monitoring@1.14.2':
    dependencies:
      '@algolia/client-common': 5.14.2
      '@algolia/requester-browser-xhr': 5.14.2
      '@algolia/requester-fetch': 5.14.2
      '@algolia/requester-node-http': 5.14.2

  '@algolia/recommend@5.14.2':
    dependencies:
      '@algolia/client-common': 5.14.2
      '@algolia/requester-browser-xhr': 5.14.2
      '@algolia/requester-fetch': 5.14.2
      '@algolia/requester-node-http': 5.14.2

  '@algolia/requester-browser-xhr@5.14.2':
    dependencies:
      '@algolia/client-common': 5.14.2

  '@algolia/requester-fetch@5.14.2':
    dependencies:
      '@algolia/client-common': 5.14.2

  '@algolia/requester-node-http@5.14.2':
    dependencies:
      '@algolia/client-common': 5.14.2

  '@ampproject/remapping@2.3.0':
    dependencies:
      '@jridgewell/gen-mapping': 0.3.5
      '@jridgewell/trace-mapping': 0.3.25

  '@babel/code-frame@7.26.2':
    dependencies:
      '@babel/helper-validator-identifier': 7.25.9
      js-tokens: 4.0.0
      picocolors: 1.1.1

  '@babel/compat-data@7.26.2': {}

  '@babel/core@7.26.0':
    dependencies:
      '@ampproject/remapping': 2.3.0
      '@babel/code-frame': 7.26.2
      '@babel/generator': 7.26.2
      '@babel/helper-compilation-targets': 7.25.9
      '@babel/helper-module-transforms': 7.26.0(@babel/core@7.26.0)
      '@babel/helpers': 7.26.0
      '@babel/parser': 7.26.2
      '@babel/template': 7.25.9
      '@babel/traverse': 7.25.9
      '@babel/types': 7.26.0
      convert-source-map: 2.0.0
      debug: 4.3.7
      gensync: 1.0.0-beta.2
      json5: 2.2.3
      semver: 6.3.1
    transitivePeerDependencies:
      - supports-color

  '@babel/generator@7.26.2':
    dependencies:
      '@babel/parser': 7.26.2
      '@babel/types': 7.26.0
      '@jridgewell/gen-mapping': 0.3.5
      '@jridgewell/trace-mapping': 0.3.25
      jsesc: 3.0.2

  '@babel/helper-compilation-targets@7.25.9':
    dependencies:
      '@babel/compat-data': 7.26.2
      '@babel/helper-validator-option': 7.25.9
      browserslist: 4.24.2
      lru-cache: 5.1.1
      semver: 6.3.1

  '@babel/helper-module-imports@7.18.6':
    dependencies:
      '@babel/types': 7.26.0

  '@babel/helper-module-imports@7.25.9':
    dependencies:
      '@babel/traverse': 7.25.9
      '@babel/types': 7.26.0
    transitivePeerDependencies:
      - supports-color

  '@babel/helper-module-transforms@7.26.0(@babel/core@7.26.0)':
    dependencies:
      '@babel/core': 7.26.0
      '@babel/helper-module-imports': 7.25.9
      '@babel/helper-validator-identifier': 7.25.9
      '@babel/traverse': 7.25.9
    transitivePeerDependencies:
      - supports-color

  '@babel/helper-plugin-utils@7.25.9': {}

  '@babel/helper-string-parser@7.25.9': {}

  '@babel/helper-validator-identifier@7.25.9': {}

  '@babel/helper-validator-option@7.25.9': {}

  '@babel/helpers@7.26.0':
    dependencies:
      '@babel/template': 7.25.9
      '@babel/types': 7.26.0

  '@babel/parser@7.26.2':
    dependencies:
      '@babel/types': 7.26.0

  '@babel/plugin-syntax-jsx@7.25.9(@babel/core@7.26.0)':
    dependencies:
      '@babel/core': 7.26.0
      '@babel/helper-plugin-utils': 7.25.9

  '@babel/runtime-corejs3@7.26.0':
    dependencies:
      core-js-pure: 3.39.0
      regenerator-runtime: 0.14.1

  '@babel/runtime@7.26.0':
    dependencies:
      regenerator-runtime: 0.14.1

  '@babel/template@7.25.9':
    dependencies:
      '@babel/code-frame': 7.26.2
      '@babel/parser': 7.26.2
      '@babel/types': 7.26.0

  '@babel/traverse@7.25.9':
    dependencies:
      '@babel/code-frame': 7.26.2
      '@babel/generator': 7.26.2
      '@babel/parser': 7.26.2
      '@babel/template': 7.25.9
      '@babel/types': 7.26.0
      debug: 4.4.3
      globals: 11.12.0
    transitivePeerDependencies:
      - supports-color

  '@babel/types@7.26.0':
    dependencies:
      '@babel/helper-string-parser': 7.25.9
      '@babel/helper-validator-identifier': 7.25.9

  '@bcoe/v8-coverage@1.0.2': {}

  '@changesets/apply-release-plan@7.0.6':
    dependencies:
      '@changesets/config': 3.0.4
      '@changesets/get-version-range-type': 0.4.0
      '@changesets/git': 3.0.2
      '@changesets/should-skip-package': 0.1.1
      '@changesets/types': 6.0.0
      '@manypkg/get-packages': 1.1.3
      detect-indent: 6.1.0
      fs-extra: 7.0.1
      lodash.startcase: 4.4.0
      outdent: 0.5.0
      prettier: 2.8.8
      resolve-from: 5.0.0
      semver: 7.6.3

  '@changesets/assemble-release-plan@6.0.5':
    dependencies:
      '@changesets/errors': 0.2.0
      '@changesets/get-dependents-graph': 2.1.2
      '@changesets/should-skip-package': 0.1.1
      '@changesets/types': 6.0.0
      '@manypkg/get-packages': 1.1.3
      semver: 7.6.3

  '@changesets/changelog-git@0.2.0':
    dependencies:
      '@changesets/types': 6.0.0

  '@changesets/cli@2.27.10':
    dependencies:
      '@changesets/apply-release-plan': 7.0.6
      '@changesets/assemble-release-plan': 6.0.5
      '@changesets/changelog-git': 0.2.0
      '@changesets/config': 3.0.4
      '@changesets/errors': 0.2.0
      '@changesets/get-dependents-graph': 2.1.2
      '@changesets/get-release-plan': 4.0.5
      '@changesets/git': 3.0.2
      '@changesets/logger': 0.1.1
      '@changesets/pre': 2.0.1
      '@changesets/read': 0.6.2
      '@changesets/should-skip-package': 0.1.1
      '@changesets/types': 6.0.0
      '@changesets/write': 0.3.2
      '@manypkg/get-packages': 1.1.3
      ansi-colors: 4.1.3
      ci-info: 3.9.0
      enquirer: 2.4.1
      external-editor: 3.1.0
      fs-extra: 7.0.1
      mri: 1.2.0
      p-limit: 2.3.0
      package-manager-detector: 0.2.6
      picocolors: 1.1.1
      resolve-from: 5.0.0
      semver: 7.6.3
      spawndamnit: 3.0.1
      term-size: 2.2.1

  '@changesets/config@3.0.4':
    dependencies:
      '@changesets/errors': 0.2.0
      '@changesets/get-dependents-graph': 2.1.2
      '@changesets/logger': 0.1.1
      '@changesets/types': 6.0.0
      '@manypkg/get-packages': 1.1.3
      fs-extra: 7.0.1
      micromatch: 4.0.8

  '@changesets/errors@0.2.0':
    dependencies:
      extendable-error: 0.1.7

  '@changesets/get-dependents-graph@2.1.2':
    dependencies:
      '@changesets/types': 6.0.0
      '@manypkg/get-packages': 1.1.3
      picocolors: 1.1.1
      semver: 7.6.3

  '@changesets/get-release-plan@4.0.5':
    dependencies:
      '@changesets/assemble-release-plan': 6.0.5
      '@changesets/config': 3.0.4
      '@changesets/pre': 2.0.1
      '@changesets/read': 0.6.2
      '@changesets/types': 6.0.0
      '@manypkg/get-packages': 1.1.3

  '@changesets/get-version-range-type@0.4.0': {}

  '@changesets/git@3.0.2':
    dependencies:
      '@changesets/errors': 0.2.0
      '@manypkg/get-packages': 1.1.3
      is-subdir: 1.2.0
      micromatch: 4.0.8
      spawndamnit: 3.0.1

  '@changesets/logger@0.1.1':
    dependencies:
      picocolors: 1.1.1

  '@changesets/parse@0.4.0':
    dependencies:
      '@changesets/types': 6.0.0
      js-yaml: 3.14.1

  '@changesets/pre@2.0.1':
    dependencies:
      '@changesets/errors': 0.2.0
      '@changesets/types': 6.0.0
      '@manypkg/get-packages': 1.1.3
      fs-extra: 7.0.1

  '@changesets/read@0.6.2':
    dependencies:
      '@changesets/git': 3.0.2
      '@changesets/logger': 0.1.1
      '@changesets/parse': 0.4.0
      '@changesets/types': 6.0.0
      fs-extra: 7.0.1
      p-filter: 2.1.0
      picocolors: 1.1.1

  '@changesets/should-skip-package@0.1.1':
    dependencies:
      '@changesets/types': 6.0.0
      '@manypkg/get-packages': 1.1.3

  '@changesets/types@4.1.0': {}

  '@changesets/types@6.0.0': {}

  '@changesets/write@0.3.2':
    dependencies:
      '@changesets/types': 6.0.0
      fs-extra: 7.0.1
      human-id: 1.0.2
      prettier: 2.8.8

  '@commitlint/config-validator@19.5.0':
    dependencies:
      '@commitlint/types': 19.5.0
      ajv: 8.17.1
    optional: true

  '@commitlint/execute-rule@19.5.0':
    optional: true

  '@commitlint/load@19.5.0(@types/node@22.10.1)(typescript@5.9.2)':
    dependencies:
      '@commitlint/config-validator': 19.5.0
      '@commitlint/execute-rule': 19.5.0
      '@commitlint/resolve-extends': 19.5.0
      '@commitlint/types': 19.5.0
      chalk: 5.6.2
      cosmiconfig: 9.0.0(typescript@5.9.2)
      cosmiconfig-typescript-loader: 5.1.0(@types/node@22.10.1)(cosmiconfig@9.0.0(typescript@5.9.2))(typescript@5.9.2)
      lodash.isplainobject: 4.0.6
      lodash.merge: 4.6.2
      lodash.uniq: 4.5.0
    transitivePeerDependencies:
      - '@types/node'
      - typescript
    optional: true

  '@commitlint/resolve-extends@19.5.0':
    dependencies:
      '@commitlint/config-validator': 19.5.0
      '@commitlint/types': 19.5.0
      global-directory: 4.0.1
      import-meta-resolve: 4.1.0
      lodash.mergewith: 4.6.2
      resolve-from: 5.0.0
    optional: true

  '@commitlint/types@19.5.0':
    dependencies:
      '@types/conventional-commits-parser': 5.0.1
      chalk: 5.6.2
    optional: true

  '@cspotcode/source-map-support@0.8.1':
    dependencies:
      '@jridgewell/trace-mapping': 0.3.9

  '@docsearch/css@3.8.0': {}

  '@docsearch/js@3.8.0(@algolia/client-search@5.14.2)(@types/react@18.3.12)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)(search-insights@2.17.2)':
    dependencies:
      '@docsearch/react': 3.8.0(@algolia/client-search@5.14.2)(@types/react@18.3.12)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)(search-insights@2.17.2)
      preact: 10.24.3
    transitivePeerDependencies:
      - '@algolia/client-search'
      - '@types/react'
      - react
      - react-dom
      - search-insights

  '@docsearch/react@3.8.0(@algolia/client-search@5.14.2)(@types/react@18.3.12)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)(search-insights@2.17.2)':
    dependencies:
      '@algolia/autocomplete-core': 1.17.7(@algolia/client-search@5.14.2)(algoliasearch@5.14.2)(search-insights@2.17.2)
      '@algolia/autocomplete-preset-algolia': 1.17.7(@algolia/client-search@5.14.2)(algoliasearch@5.14.2)
      '@docsearch/css': 3.8.0
      algoliasearch: 5.14.2
    optionalDependencies:
      '@types/react': 18.3.12
      react: 18.3.1
      react-dom: 18.3.1(react@18.3.1)
      search-insights: 2.17.2
    transitivePeerDependencies:
      - '@algolia/client-search'

  '@esbuild/aix-ppc64@0.21.5':
    optional: true

  '@esbuild/aix-ppc64@0.23.1':
    optional: true

  '@esbuild/aix-ppc64@0.25.3':
    optional: true

  '@esbuild/android-arm64@0.21.5':
    optional: true

  '@esbuild/android-arm64@0.23.1':
    optional: true

  '@esbuild/android-arm64@0.25.3':
    optional: true

  '@esbuild/android-arm@0.21.5':
    optional: true

  '@esbuild/android-arm@0.23.1':
    optional: true

  '@esbuild/android-arm@0.25.3':
    optional: true

  '@esbuild/android-x64@0.21.5':
    optional: true

  '@esbuild/android-x64@0.23.1':
    optional: true

  '@esbuild/android-x64@0.25.3':
    optional: true

  '@esbuild/darwin-arm64@0.21.5':
    optional: true

  '@esbuild/darwin-arm64@0.23.1':
    optional: true

  '@esbuild/darwin-arm64@0.25.3':
    optional: true

  '@esbuild/darwin-x64@0.21.5':
    optional: true

  '@esbuild/darwin-x64@0.23.1':
    optional: true

  '@esbuild/darwin-x64@0.25.3':
    optional: true

  '@esbuild/freebsd-arm64@0.21.5':
    optional: true

  '@esbuild/freebsd-arm64@0.23.1':
    optional: true

  '@esbuild/freebsd-arm64@0.25.3':
    optional: true

  '@esbuild/freebsd-x64@0.21.5':
    optional: true

  '@esbuild/freebsd-x64@0.23.1':
    optional: true

  '@esbuild/freebsd-x64@0.25.3':
    optional: true

  '@esbuild/linux-arm64@0.21.5':
    optional: true

  '@esbuild/linux-arm64@0.23.1':
    optional: true

  '@esbuild/linux-arm64@0.25.3':
    optional: true

  '@esbuild/linux-arm@0.21.5':
    optional: true

  '@esbuild/linux-arm@0.23.1':
    optional: true

  '@esbuild/linux-arm@0.25.3':
    optional: true

  '@esbuild/linux-ia32@0.21.5':
    optional: true

  '@esbuild/linux-ia32@0.23.1':
    optional: true

  '@esbuild/linux-ia32@0.25.3':
    optional: true

  '@esbuild/linux-loong64@0.21.5':
    optional: true

  '@esbuild/linux-loong64@0.23.1':
    optional: true

  '@esbuild/linux-loong64@0.25.3':
    optional: true

  '@esbuild/linux-mips64el@0.21.5':
    optional: true

  '@esbuild/linux-mips64el@0.23.1':
    optional: true

  '@esbuild/linux-mips64el@0.25.3':
    optional: true

  '@esbuild/linux-ppc64@0.21.5':
    optional: true

  '@esbuild/linux-ppc64@0.23.1':
    optional: true

  '@esbuild/linux-ppc64@0.25.3':
    optional: true

  '@esbuild/linux-riscv64@0.21.5':
    optional: true

  '@esbuild/linux-riscv64@0.23.1':
    optional: true

  '@esbuild/linux-riscv64@0.25.3':
    optional: true

  '@esbuild/linux-s390x@0.21.5':
    optional: true

  '@esbuild/linux-s390x@0.23.1':
    optional: true

  '@esbuild/linux-s390x@0.25.3':
    optional: true

  '@esbuild/linux-x64@0.21.5':
    optional: true

  '@esbuild/linux-x64@0.23.1':
    optional: true

  '@esbuild/linux-x64@0.25.3':
    optional: true

  '@esbuild/netbsd-arm64@0.25.3':
    optional: true

  '@esbuild/netbsd-x64@0.21.5':
    optional: true

  '@esbuild/netbsd-x64@0.23.1':
    optional: true

  '@esbuild/netbsd-x64@0.25.3':
    optional: true

  '@esbuild/openbsd-arm64@0.23.1':
    optional: true

  '@esbuild/openbsd-arm64@0.25.3':
    optional: true

  '@esbuild/openbsd-x64@0.21.5':
    optional: true

  '@esbuild/openbsd-x64@0.23.1':
    optional: true

  '@esbuild/openbsd-x64@0.25.3':
    optional: true

  '@esbuild/sunos-x64@0.21.5':
    optional: true

  '@esbuild/sunos-x64@0.23.1':
    optional: true

  '@esbuild/sunos-x64@0.25.3':
    optional: true

  '@esbuild/win32-arm64@0.21.5':
    optional: true

  '@esbuild/win32-arm64@0.23.1':
    optional: true

  '@esbuild/win32-arm64@0.25.3':
    optional: true

  '@esbuild/win32-ia32@0.21.5':
    optional: true

  '@esbuild/win32-ia32@0.23.1':
    optional: true

  '@esbuild/win32-ia32@0.25.3':
    optional: true

  '@esbuild/win32-x64@0.21.5':
    optional: true

  '@esbuild/win32-x64@0.23.1':
    optional: true

  '@esbuild/win32-x64@0.25.3':
    optional: true

  '@eslint-community/eslint-utils@4.4.1(eslint@9.16.0(jiti@1.21.6))':
    dependencies:
      eslint: 9.16.0(jiti@1.21.6)
      eslint-visitor-keys: 3.4.3

  '@eslint-community/eslint-utils@4.7.0(eslint@9.16.0(jiti@1.21.6))':
    dependencies:
      eslint: 9.16.0(jiti@1.21.6)
      eslint-visitor-keys: 3.4.3

  '@eslint-community/regexpp@4.12.1': {}

  '@eslint/config-array@0.19.0':
    dependencies:
      '@eslint/object-schema': 2.1.4
      debug: 4.3.7
      minimatch: 3.1.2
    transitivePeerDependencies:
      - supports-color

  '@eslint/core@0.9.0': {}

  '@eslint/eslintrc@3.2.0':
    dependencies:
      ajv: 6.12.6
      debug: 4.3.7
      espree: 10.3.0
      globals: 14.0.0
      ignore: 5.3.2
      import-fresh: 3.3.0
      js-yaml: 4.1.0
      minimatch: 3.1.2
      strip-json-comments: 3.1.1
    transitivePeerDependencies:
      - supports-color

  '@eslint/js@9.16.0': {}

  '@eslint/js@9.34.0': {}

  '@eslint/object-schema@2.1.4': {}

  '@eslint/plugin-kit@0.2.3':
    dependencies:
      levn: 0.4.1

  '@humanfs/core@0.19.1': {}

  '@humanfs/node@0.16.6':
    dependencies:
      '@humanfs/core': 0.19.1
      '@humanwhocodes/retry': 0.3.1

  '@humanwhocodes/module-importer@1.0.1': {}

  '@humanwhocodes/retry@0.3.1': {}

  '@humanwhocodes/retry@0.4.1': {}

  '@iconify-json/simple-icons@1.2.11':
    dependencies:
      '@iconify/types': 2.0.0

  '@iconify/types@2.0.0': {}

  '@inquirer/ansi@1.0.1': {}

  '@inquirer/core@10.3.0(@types/node@22.10.1)':
    dependencies:
      '@inquirer/ansi': 1.0.1
      '@inquirer/figures': 1.0.14
      '@inquirer/type': 3.0.9(@types/node@22.10.1)
      cli-width: 4.1.0
      mute-stream: 2.0.0
      signal-exit: 4.1.0
      wrap-ansi: 6.2.0
      yoctocolors-cjs: 2.1.3
    optionalDependencies:
      '@types/node': 22.10.1

  '@inquirer/figures@1.0.14': {}

  '@inquirer/type@3.0.9(@types/node@22.10.1)':
    optionalDependencies:
      '@types/node': 22.10.1

  '@isaacs/cliui@8.0.2':
    dependencies:
      string-width: 5.1.2
      string-width-cjs: string-width@4.2.3
      strip-ansi: 7.1.0
      strip-ansi-cjs: strip-ansi@6.0.1
      wrap-ansi: 8.1.0
      wrap-ansi-cjs: wrap-ansi@7.0.0

  '@istanbuljs/schema@0.1.3': {}

  '@jridgewell/gen-mapping@0.3.5':
    dependencies:
      '@jridgewell/set-array': 1.2.1
      '@jridgewell/sourcemap-codec': 1.5.0
      '@jridgewell/trace-mapping': 0.3.25

  '@jridgewell/remapping@2.3.5':
    dependencies:
      '@jridgewell/gen-mapping': 0.3.5
      '@jridgewell/trace-mapping': 0.3.31

  '@jridgewell/resolve-uri@3.1.2': {}

  '@jridgewell/set-array@1.2.1': {}

  '@jridgewell/sourcemap-codec@1.5.0': {}

  '@jridgewell/trace-mapping@0.3.25':
    dependencies:
      '@jridgewell/resolve-uri': 3.1.2
      '@jridgewell/sourcemap-codec': 1.5.0

  '@jridgewell/trace-mapping@0.3.31':
    dependencies:
      '@jridgewell/resolve-uri': 3.1.2
      '@jridgewell/sourcemap-codec': 1.5.0

  '@jridgewell/trace-mapping@0.3.9':
    dependencies:
      '@jridgewell/resolve-uri': 3.1.2
      '@jridgewell/sourcemap-codec': 1.5.0

  '@manypkg/find-root@1.1.0':
    dependencies:
      '@babel/runtime': 7.26.0
      '@types/node': 12.20.55
      find-up: 4.1.0
      fs-extra: 8.1.0

  '@manypkg/get-packages@1.1.3':
    dependencies:
      '@babel/runtime': 7.26.0
      '@changesets/types': 4.1.0
      '@manypkg/find-root': 1.1.0
      fs-extra: 8.1.0
      globby: 11.1.0
      read-yaml-file: 1.1.0

  '@microsoft/api-extractor-model@7.30.5(@types/node@22.10.1)':
    dependencies:
      '@microsoft/tsdoc': 0.15.1
      '@microsoft/tsdoc-config': 0.17.1
      '@rushstack/node-core-library': 5.13.0(@types/node@22.10.1)
    transitivePeerDependencies:
      - '@types/node'

  '@microsoft/api-extractor@7.52.5(@types/node@22.10.1)':
    dependencies:
      '@microsoft/api-extractor-model': 7.30.5(@types/node@22.10.1)
      '@microsoft/tsdoc': 0.15.1
      '@microsoft/tsdoc-config': 0.17.1
      '@rushstack/node-core-library': 5.13.0(@types/node@22.10.1)
      '@rushstack/rig-package': 0.5.3
      '@rushstack/terminal': 0.15.2(@types/node@22.10.1)
      '@rushstack/ts-command-line': 5.0.0(@types/node@22.10.1)
      lodash: 4.17.21
      minimatch: 3.0.8
      resolve: 1.22.8
      semver: 7.5.4
      source-map: 0.6.1
      typescript: 5.8.2
    transitivePeerDependencies:
      - '@types/node'

  '@microsoft/tsdoc-config@0.17.1':
    dependencies:
      '@microsoft/tsdoc': 0.15.1
      ajv: 8.12.0
      jju: 1.4.0
      resolve: 1.22.8

  '@microsoft/tsdoc@0.15.1': {}

  '@nodelib/fs.scandir@2.1.5':
    dependencies:
      '@nodelib/fs.stat': 2.0.5
      run-parallel: 1.2.0

  '@nodelib/fs.stat@2.0.5': {}

  '@nodelib/fs.walk@1.2.8':
    dependencies:
      '@nodelib/fs.scandir': 2.1.5
      fastq: 1.17.1

  '@octokit/auth-token@4.0.0': {}

  '@octokit/core@5.2.0':
    dependencies:
      '@octokit/auth-token': 4.0.0
      '@octokit/graphql': 7.1.0
      '@octokit/request': 8.4.0
      '@octokit/request-error': 5.1.0
      '@octokit/types': 13.6.2
      before-after-hook: 2.2.3
      universal-user-agent: 6.0.1

  '@octokit/endpoint@9.0.5':
    dependencies:
      '@octokit/types': 13.6.2
      universal-user-agent: 6.0.1

  '@octokit/graphql@7.1.0':
    dependencies:
      '@octokit/request': 8.4.0
      '@octokit/types': 13.6.2
      universal-user-agent: 6.0.1

  '@octokit/openapi-types@22.2.0': {}

  '@octokit/plugin-paginate-rest@11.3.1(@octokit/core@5.2.0)':
    dependencies:
      '@octokit/core': 5.2.0
      '@octokit/types': 13.6.2

  '@octokit/plugin-request-log@4.0.1(@octokit/core@5.2.0)':
    dependencies:
      '@octokit/core': 5.2.0

  '@octokit/plugin-rest-endpoint-methods@13.2.2(@octokit/core@5.2.0)':
    dependencies:
      '@octokit/core': 5.2.0
      '@octokit/types': 13.6.2

  '@octokit/request-error@5.1.0':
    dependencies:
      '@octokit/types': 13.6.2
      deprecation: 2.3.1
      once: 1.4.0

  '@octokit/request@8.4.0':
    dependencies:
      '@octokit/endpoint': 9.0.5
      '@octokit/request-error': 5.1.0
      '@octokit/types': 13.6.2
      universal-user-agent: 6.0.1

  '@octokit/rest@20.1.1':
    dependencies:
      '@octokit/core': 5.2.0
      '@octokit/plugin-paginate-rest': 11.3.1(@octokit/core@5.2.0)
      '@octokit/plugin-request-log': 4.0.1(@octokit/core@5.2.0)
      '@octokit/plugin-rest-endpoint-methods': 13.2.2(@octokit/core@5.2.0)

  '@octokit/types@13.6.2':
    dependencies:
      '@octokit/openapi-types': 22.2.0

  '@pkgjs/parseargs@0.11.0':
    optional: true

  '@polka/url@1.0.0-next.28': {}

  '@rollup/plugin-node-resolve@15.3.0(rollup@4.40.0)':
    dependencies:
      '@rollup/pluginutils': 5.1.3(rollup@4.40.0)
      '@types/resolve': 1.20.2
      deepmerge: 4.3.1
      is-module: 1.0.0
      resolve: 1.22.8
    optionalDependencies:
      rollup: 4.40.0

  '@rollup/pluginutils@5.1.3(rollup@4.40.0)':
    dependencies:
      '@types/estree': 1.0.6
      estree-walker: 2.0.2
      picomatch: 4.0.2
    optionalDependencies:
      rollup: 4.40.0

  '@rollup/pluginutils@5.1.4(rollup@4.40.0)':
    dependencies:
      '@types/estree': 1.0.7
      estree-walker: 2.0.2
      picomatch: 4.0.2
    optionalDependencies:
      rollup: 4.40.0

  '@rollup/rollup-android-arm-eabi@4.40.0':
    optional: true

  '@rollup/rollup-android-arm64@4.40.0':
    optional: true

  '@rollup/rollup-darwin-arm64@4.40.0':
    optional: true

  '@rollup/rollup-darwin-x64@4.40.0':
    optional: true

  '@rollup/rollup-freebsd-arm64@4.40.0':
    optional: true

  '@rollup/rollup-freebsd-x64@4.40.0':
    optional: true

  '@rollup/rollup-linux-arm-gnueabihf@4.40.0':
    optional: true

  '@rollup/rollup-linux-arm-musleabihf@4.40.0':
    optional: true

  '@rollup/rollup-linux-arm64-gnu@4.40.0':
    optional: true

  '@rollup/rollup-linux-arm64-musl@4.40.0':
    optional: true

  '@rollup/rollup-linux-loongarch64-gnu@4.40.0':
    optional: true

  '@rollup/rollup-linux-powerpc64le-gnu@4.40.0':
    optional: true

  '@rollup/rollup-linux-riscv64-gnu@4.40.0':
    optional: true

  '@rollup/rollup-linux-riscv64-musl@4.40.0':
    optional: true

  '@rollup/rollup-linux-s390x-gnu@4.40.0':
    optional: true

  '@rollup/rollup-linux-x64-gnu@4.40.0':
    optional: true

  '@rollup/rollup-linux-x64-musl@4.40.0':
    optional: true

  '@rollup/rollup-win32-arm64-msvc@4.40.0':
    optional: true

  '@rollup/rollup-win32-ia32-msvc@4.40.0':
    optional: true

  '@rollup/rollup-win32-x64-msvc@4.40.0':
    optional: true

  '@rushstack/node-core-library@5.13.0(@types/node@22.10.1)':
    dependencies:
      ajv: 8.13.0
      ajv-draft-04: 1.0.0(ajv@8.13.0)
      ajv-formats: 3.0.1(ajv@8.13.0)
      fs-extra: 11.3.0
      import-lazy: 4.0.0
      jju: 1.4.0
      resolve: 1.22.8
      semver: 7.5.4
    optionalDependencies:
      '@types/node': 22.10.1

  '@rushstack/rig-package@0.5.3':
    dependencies:
      resolve: 1.22.8
      strip-json-comments: 3.1.1

  '@rushstack/terminal@0.15.2(@types/node@22.10.1)':
    dependencies:
      '@rushstack/node-core-library': 5.13.0(@types/node@22.10.1)
      supports-color: 8.1.1
    optionalDependencies:
      '@types/node': 22.10.1

  '@rushstack/ts-command-line@5.0.0(@types/node@22.10.1)':
    dependencies:
      '@rushstack/terminal': 0.15.2(@types/node@22.10.1)
      '@types/argparse': 1.0.38
      argparse: 1.0.10
      string-argv: 0.3.2
    transitivePeerDependencies:
      - '@types/node'

  '@shikijs/core@1.23.1':
    dependencies:
      '@shikijs/engine-javascript': 1.23.1
      '@shikijs/engine-oniguruma': 1.23.1
      '@shikijs/types': 1.23.1
      '@shikijs/vscode-textmate': 9.3.0
      '@types/hast': 3.0.4
      hast-util-to-html: 9.0.3

  '@shikijs/engine-javascript@1.23.1':
    dependencies:
      '@shikijs/types': 1.23.1
      '@shikijs/vscode-textmate': 9.3.0
      oniguruma-to-es: 0.4.1

  '@shikijs/engine-oniguruma@1.23.1':
    dependencies:
      '@shikijs/types': 1.23.1
      '@shikijs/vscode-textmate': 9.3.0

  '@shikijs/transformers@1.23.1':
    dependencies:
      shiki: 1.23.1

  '@shikijs/types@1.23.1':
    dependencies:
      '@shikijs/vscode-textmate': 9.3.0
      '@types/hast': 3.0.4

  '@shikijs/vscode-textmate@9.3.0': {}

  '@stylistic/eslint-plugin@5.2.3(eslint@9.16.0(jiti@1.21.6))':
    dependencies:
      '@eslint-community/eslint-utils': 4.7.0(eslint@9.16.0(jiti@1.21.6))
      '@typescript-eslint/types': 8.41.0
      eslint: 9.16.0(jiti@1.21.6)
      eslint-visitor-keys: 4.2.1
      espree: 10.4.0
      estraverse: 5.3.0
      picomatch: 4.0.3

  '@sveltejs/acorn-typescript@1.0.6(acorn@8.15.0)':
    dependencies:
      acorn: 8.15.0

  '@swc/core-darwin-arm64@1.9.2':
    optional: true

  '@swc/core-darwin-x64@1.9.2':
    optional: true

  '@swc/core-linux-arm-gnueabihf@1.9.2':
    optional: true

  '@swc/core-linux-arm64-gnu@1.9.2':
    optional: true

  '@swc/core-linux-arm64-musl@1.9.2':
    optional: true

  '@swc/core-linux-x64-gnu@1.9.2':
    optional: true

  '@swc/core-linux-x64-musl@1.9.2':
    optional: true

  '@swc/core-win32-arm64-msvc@1.9.2':
    optional: true

  '@swc/core-win32-ia32-msvc@1.9.2':
    optional: true

  '@swc/core-win32-x64-msvc@1.9.2':
    optional: true

  '@swc/core@1.9.2(@swc/helpers@0.5.15)':
    dependencies:
      '@swc/counter': 0.1.3
      '@swc/types': 0.1.15
    optionalDependencies:
      '@swc/core-darwin-arm64': 1.9.2
      '@swc/core-darwin-x64': 1.9.2
      '@swc/core-linux-arm-gnueabihf': 1.9.2
      '@swc/core-linux-arm64-gnu': 1.9.2
      '@swc/core-linux-arm64-musl': 1.9.2
      '@swc/core-linux-x64-gnu': 1.9.2
      '@swc/core-linux-x64-musl': 1.9.2
      '@swc/core-win32-arm64-msvc': 1.9.2
      '@swc/core-win32-ia32-msvc': 1.9.2
      '@swc/core-win32-x64-msvc': 1.9.2
      '@swc/helpers': 0.5.15
    optional: true

  '@swc/counter@0.1.3':
    optional: true

  '@swc/helpers@0.5.15':
    dependencies:
      tslib: 2.8.1
    optional: true

  '@swc/types@0.1.15':
    dependencies:
      '@swc/counter': 0.1.3
    optional: true

  '@tootallnate/quickjs-emscripten@0.23.0': {}

  '@tsconfig/node10@1.0.11': {}

  '@tsconfig/node12@1.0.11': {}

  '@tsconfig/node14@1.0.3': {}

  '@tsconfig/node16@1.0.4': {}

  '@turbo/gen@2.3.3(@swc/core@1.9.2(@swc/helpers@0.5.15))(@types/node@22.10.1)(typescript@5.9.2)':
    dependencies:
      '@turbo/workspaces': 2.3.3
      commander: 10.0.1
      fs-extra: 10.1.0
      inquirer: 8.2.6
      minimatch: 9.0.5
      node-plop: 0.26.3
      picocolors: 1.0.1
      proxy-agent: 6.4.0
      ts-node: 10.9.2(@swc/core@1.9.2(@swc/helpers@0.5.15))(@types/node@22.10.1)(typescript@5.9.2)
      update-check: 1.5.4
      validate-npm-package-name: 5.0.1
    transitivePeerDependencies:
      - '@swc/core'
      - '@swc/wasm'
      - '@types/node'
      - supports-color
      - typescript

  '@turbo/workspaces@2.3.3':
    dependencies:
      commander: 10.0.1
      execa: 5.1.1
      fast-glob: 3.3.2
      fs-extra: 10.1.0
      gradient-string: 2.0.2
      inquirer: 8.2.6
      js-yaml: 4.1.0
      ora: 4.1.1
      picocolors: 1.0.1
      semver: 7.6.2
      update-check: 1.5.4

  '@types/argparse@1.0.38': {}

  '@types/babel__core@7.20.5':
    dependencies:
      '@babel/parser': 7.26.2
      '@babel/types': 7.26.0
      '@types/babel__generator': 7.6.8
      '@types/babel__template': 7.4.4
      '@types/babel__traverse': 7.20.6

  '@types/babel__generator@7.6.8':
    dependencies:
      '@babel/types': 7.26.0

  '@types/babel__template@7.4.4':
    dependencies:
      '@babel/parser': 7.26.2
      '@babel/types': 7.26.0

  '@types/babel__traverse@7.20.6':
    dependencies:
      '@babel/types': 7.26.0

  '@types/chai@5.2.2':
    dependencies:
      '@types/deep-eql': 4.0.2

  '@types/conventional-commits-parser@5.0.1':
    dependencies:
      '@types/node': 22.10.1
    optional: true

  '@types/deep-eql@4.0.2': {}

  '@types/eslint@9.6.1':
    dependencies:
      '@types/estree': 1.0.6
      '@types/json-schema': 7.0.15

  '@types/eslint__js@8.42.3':
    dependencies:
      '@types/eslint': 9.6.1

  '@types/estree@1.0.6': {}

  '@types/estree@1.0.7': {}

  '@types/glob@7.2.0':
    dependencies:
      '@types/minimatch': 5.1.2
      '@types/node': 22.10.1

  '@types/hast@3.0.4':
    dependencies:
      '@types/unist': 3.0.3

  '@types/inquirer@6.5.0':
    dependencies:
      '@types/through': 0.0.33
      rxjs: 6.6.7

  '@types/json-schema@7.0.15': {}

  '@types/linkify-it@5.0.0': {}

  '@types/markdown-it@14.1.2':
    dependencies:
      '@types/linkify-it': 5.0.0
      '@types/mdurl': 2.0.0

  '@types/mdast@4.0.4':
    dependencies:
      '@types/unist': 3.0.3

  '@types/mdurl@2.0.0': {}

  '@types/minimatch@5.1.2': {}

  '@types/node@12.20.55': {}

  '@types/node@20.19.22':
    dependencies:
      undici-types: 6.21.0
    optional: true

  '@types/node@22.10.1':
    dependencies:
      undici-types: 6.20.0

  '@types/prop-types@15.7.13':
    optional: true

  '@types/react@18.3.12':
    dependencies:
      '@types/prop-types': 15.7.13
      csstype: 3.1.3
    optional: true

  '@types/react@19.2.2':
    dependencies:
      csstype: 3.1.3

  '@types/resolve@1.20.2': {}

  '@types/through@0.0.33':
    dependencies:
      '@types/node': 22.10.1

  '@types/tinycolor2@1.4.6': {}

  '@types/unist@3.0.3': {}

  '@types/web-bluetooth@0.0.20': {}

  '@types/whatwg-mimetype@3.0.2':
    optional: true

  '@typescript-eslint/eslint-plugin@8.41.0(@typescript-eslint/parser@8.41.0(eslint@9.16.0(jiti@1.21.6))(typescript@5.9.2))(eslint@9.16.0(jiti@1.21.6))(typescript@5.9.2)':
    dependencies:
      '@eslint-community/regexpp': 4.12.1
      '@typescript-eslint/parser': 8.41.0(eslint@9.16.0(jiti@1.21.6))(typescript@5.9.2)
      '@typescript-eslint/scope-manager': 8.41.0
      '@typescript-eslint/type-utils': 8.41.0(eslint@9.16.0(jiti@1.21.6))(typescript@5.9.2)
      '@typescript-eslint/utils': 8.41.0(eslint@9.16.0(jiti@1.21.6))(typescript@5.9.2)
      '@typescript-eslint/visitor-keys': 8.41.0
      eslint: 9.16.0(jiti@1.21.6)
      graphemer: 1.4.0
      ignore: 7.0.5
      natural-compare: 1.4.0
      ts-api-utils: 2.1.0(typescript@5.9.2)
      typescript: 5.9.2
    transitivePeerDependencies:
      - supports-color

  '@typescript-eslint/parser@8.41.0(eslint@9.16.0(jiti@1.21.6))(typescript@5.9.2)':
    dependencies:
      '@typescript-eslint/scope-manager': 8.41.0
      '@typescript-eslint/types': 8.41.0
      '@typescript-eslint/typescript-estree': 8.41.0(typescript@5.9.2)
      '@typescript-eslint/visitor-keys': 8.41.0
      debug: 4.4.0
      eslint: 9.16.0(jiti@1.21.6)
      typescript: 5.9.2
    transitivePeerDependencies:
      - supports-color

  '@typescript-eslint/project-service@8.41.0(typescript@5.9.2)':
    dependencies:
      '@typescript-eslint/tsconfig-utils': 8.41.0(typescript@5.9.2)
      '@typescript-eslint/types': 8.41.0
      debug: 4.4.3
      typescript: 5.9.2
    transitivePeerDependencies:
      - supports-color

  '@typescript-eslint/scope-manager@8.41.0':
    dependencies:
      '@typescript-eslint/types': 8.41.0
      '@typescript-eslint/visitor-keys': 8.41.0

  '@typescript-eslint/tsconfig-utils@8.41.0(typescript@5.9.2)':
    dependencies:
      typescript: 5.9.2

  '@typescript-eslint/type-utils@8.41.0(eslint@9.16.0(jiti@1.21.6))(typescript@5.9.2)':
    dependencies:
      '@typescript-eslint/types': 8.41.0
      '@typescript-eslint/typescript-estree': 8.41.0(typescript@5.9.2)
      '@typescript-eslint/utils': 8.41.0(eslint@9.16.0(jiti@1.21.6))(typescript@5.9.2)
      debug: 4.4.3
      eslint: 9.16.0(jiti@1.21.6)
      ts-api-utils: 2.1.0(typescript@5.9.2)
      typescript: 5.9.2
    transitivePeerDependencies:
      - supports-color

  '@typescript-eslint/types@8.41.0': {}

  '@typescript-eslint/typescript-estree@8.41.0(typescript@5.9.2)':
    dependencies:
      '@typescript-eslint/project-service': 8.41.0(typescript@5.9.2)
      '@typescript-eslint/tsconfig-utils': 8.41.0(typescript@5.9.2)
      '@typescript-eslint/types': 8.41.0
      '@typescript-eslint/visitor-keys': 8.41.0
      debug: 4.4.0
      fast-glob: 3.3.2
      is-glob: 4.0.3
      minimatch: 9.0.5
      semver: 7.6.3
      ts-api-utils: 2.1.0(typescript@5.9.2)
      typescript: 5.9.2
    transitivePeerDependencies:
      - supports-color

  '@typescript-eslint/utils@8.41.0(eslint@9.16.0(jiti@1.21.6))(typescript@5.9.2)':
    dependencies:
      '@eslint-community/eslint-utils': 4.7.0(eslint@9.16.0(jiti@1.21.6))
      '@typescript-eslint/scope-manager': 8.41.0
      '@typescript-eslint/types': 8.41.0
      '@typescript-eslint/typescript-estree': 8.41.0(typescript@5.9.2)
      eslint: 9.16.0(jiti@1.21.6)
      typescript: 5.9.2
    transitivePeerDependencies:
      - supports-color

  '@typescript-eslint/visitor-keys@8.41.0':
    dependencies:
      '@typescript-eslint/types': 8.41.0
      eslint-visitor-keys: 4.2.1

  '@ungap/structured-clone@1.2.0': {}

  '@vitejs/plugin-vue@5.2.0(vite@5.4.11(@types/node@22.10.1))(vue@3.5.13(typescript@5.9.2))':
    dependencies:
      vite: 5.4.11(@types/node@22.10.1)
      vue: 3.5.13(typescript@5.9.2)

  '@vitest/coverage-v8@3.2.4(vitest@3.2.4)':
    dependencies:
      '@ampproject/remapping': 2.3.0
      '@bcoe/v8-coverage': 1.0.2
      ast-v8-to-istanbul: 0.3.7
      debug: 4.4.3
      istanbul-lib-coverage: 3.2.2
      istanbul-lib-report: 3.0.1
      istanbul-lib-source-maps: 5.0.6
      istanbul-reports: 3.1.7
      magic-string: 0.30.17
      magicast: 0.3.5
      std-env: 3.9.0
      test-exclude: 7.0.1
      tinyrainbow: 2.0.0
      vitest: 3.2.4(@types/node@22.10.1)(@vitest/ui@3.2.4)(happy-dom@20.0.5)(jiti@1.21.6)(jsdom@25.0.1)(tsx@4.19.2)(yaml@2.6.0)
    transitivePeerDependencies:
      - supports-color

  '@vitest/eslint-plugin@1.3.4(eslint@9.16.0(jiti@1.21.6))(typescript@5.9.2)(vitest@3.2.4)':
    dependencies:
      '@typescript-eslint/utils': 8.41.0(eslint@9.16.0(jiti@1.21.6))(typescript@5.9.2)
      eslint: 9.16.0(jiti@1.21.6)
    optionalDependencies:
      typescript: 5.9.2
      vitest: 3.2.4(@types/node@22.10.1)(@vitest/ui@3.2.4)(happy-dom@20.0.5)(jiti@1.21.6)(jsdom@25.0.1)(tsx@4.19.2)(yaml@2.6.0)
    transitivePeerDependencies:
      - supports-color

  '@vitest/expect@3.2.4':
    dependencies:
      '@types/chai': 5.2.2
      '@vitest/spy': 3.2.4
      '@vitest/utils': 3.2.4
      chai: 5.2.0
      tinyrainbow: 2.0.0

  '@vitest/mocker@3.2.4(vite@6.3.3(@types/node@22.10.1)(jiti@1.21.6)(tsx@4.19.2)(yaml@2.6.0))':
    dependencies:
      '@vitest/spy': 3.2.4
      estree-walker: 3.0.3
      magic-string: 0.30.17
    optionalDependencies:
      vite: 6.3.3(@types/node@22.10.1)(jiti@1.21.6)(tsx@4.19.2)(yaml@2.6.0)

  '@vitest/pretty-format@3.2.4':
    dependencies:
      tinyrainbow: 2.0.0

  '@vitest/runner@3.2.4':
    dependencies:
      '@vitest/utils': 3.2.4
      pathe: 2.0.3
      strip-literal: 3.1.0

  '@vitest/snapshot@3.2.4':
    dependencies:
      '@vitest/pretty-format': 3.2.4
      magic-string: 0.30.17
      pathe: 2.0.3

  '@vitest/spy@3.2.4':
    dependencies:
      tinyspy: 4.0.4

  '@vitest/ui@3.2.4(vitest@3.2.4)':
    dependencies:
      '@vitest/utils': 3.2.4
      fflate: 0.8.2
      flatted: 3.3.3
      pathe: 2.0.3
      sirv: 3.0.1
      tinyglobby: 0.2.15
      tinyrainbow: 2.0.0
      vitest: 3.2.4(@types/node@22.10.1)(@vitest/ui@3.2.4)(happy-dom@20.0.5)(jiti@1.21.6)(jsdom@25.0.1)(tsx@4.19.2)(yaml@2.6.0)

  '@vitest/utils@3.2.4':
    dependencies:
      '@vitest/pretty-format': 3.2.4
      loupe: 3.2.1
      tinyrainbow: 2.0.0

  '@volar/language-core@2.4.13':
    dependencies:
      '@volar/source-map': 2.4.13

  '@volar/source-map@2.4.13': {}

  '@volar/typescript@2.4.13':
    dependencies:
      '@volar/language-core': 2.4.13
      path-browserify: 1.0.1
      vscode-uri: 3.0.8

  '@vue/compiler-core@3.5.13':
    dependencies:
      '@babel/parser': 7.26.2
      '@vue/shared': 3.5.13
      entities: 4.5.0
      estree-walker: 2.0.2
      source-map-js: 1.2.1

  '@vue/compiler-dom@3.5.13':
    dependencies:
      '@vue/compiler-core': 3.5.13
      '@vue/shared': 3.5.13

  '@vue/compiler-sfc@3.5.13':
    dependencies:
      '@babel/parser': 7.26.2
      '@vue/compiler-core': 3.5.13
      '@vue/compiler-dom': 3.5.13
      '@vue/compiler-ssr': 3.5.13
      '@vue/shared': 3.5.13
      estree-walker: 2.0.2
      magic-string: 0.30.17
      postcss: 8.5.3
      source-map-js: 1.2.1

  '@vue/compiler-ssr@3.5.13':
    dependencies:
      '@vue/compiler-dom': 3.5.13
      '@vue/shared': 3.5.13

  '@vue/compiler-vue2@2.7.16':
    dependencies:
      de-indent: 1.0.2
      he: 1.2.0

  '@vue/devtools-api@7.6.4':
    dependencies:
      '@vue/devtools-kit': 7.6.4

  '@vue/devtools-kit@7.6.4':
    dependencies:
      '@vue/devtools-shared': 7.6.4
      birpc: 0.2.19
      hookable: 5.5.3
      mitt: 3.0.1
      perfect-debounce: 1.0.0
      speakingurl: 14.0.1
      superjson: 2.2.1

  '@vue/devtools-shared@7.6.4':
    dependencies:
      rfdc: 1.4.1

  '@vue/language-core@2.2.0(typescript@5.9.2)':
    dependencies:
      '@volar/language-core': 2.4.13
      '@vue/compiler-dom': 3.5.13
      '@vue/compiler-vue2': 2.7.16
      '@vue/shared': 3.5.13
      alien-signals: 0.4.14
      minimatch: 9.0.5
      muggle-string: 0.4.1
      path-browserify: 1.0.1
    optionalDependencies:
      typescript: 5.9.2

  '@vue/reactivity@3.5.13':
    dependencies:
      '@vue/shared': 3.5.13

  '@vue/runtime-core@3.5.13':
    dependencies:
      '@vue/reactivity': 3.5.13
      '@vue/shared': 3.5.13

  '@vue/runtime-dom@3.5.13':
    dependencies:
      '@vue/reactivity': 3.5.13
      '@vue/runtime-core': 3.5.13
      '@vue/shared': 3.5.13
      csstype: 3.1.3

  '@vue/server-renderer@3.5.13(vue@3.5.13(typescript@5.9.2))':
    dependencies:
      '@vue/compiler-ssr': 3.5.13
      '@vue/shared': 3.5.13
      vue: 3.5.13(typescript@5.9.2)

  '@vue/shared@3.5.13': {}

  '@vueuse/core@11.2.0(vue@3.5.13(typescript@5.9.2))':
    dependencies:
      '@types/web-bluetooth': 0.0.20
      '@vueuse/metadata': 11.2.0
      '@vueuse/shared': 11.2.0(vue@3.5.13(typescript@5.9.2))
      vue-demi: 0.14.10(vue@3.5.13(typescript@5.9.2))
    transitivePeerDependencies:
      - '@vue/composition-api'
      - vue

  '@vueuse/integrations@11.2.0(axios@1.7.8)(change-case@5.4.4)(focus-trap@7.6.2)(vue@3.5.13(typescript@5.9.2))':
    dependencies:
      '@vueuse/core': 11.2.0(vue@3.5.13(typescript@5.9.2))
      '@vueuse/shared': 11.2.0(vue@3.5.13(typescript@5.9.2))
      vue-demi: 0.14.10(vue@3.5.13(typescript@5.9.2))
    optionalDependencies:
      axios: 1.7.8(debug@4.3.7)
      change-case: 5.4.4
      focus-trap: 7.6.2
    transitivePeerDependencies:
      - '@vue/composition-api'
      - vue

  '@vueuse/metadata@11.2.0': {}

  '@vueuse/shared@11.2.0(vue@3.5.13(typescript@5.9.2))':
    dependencies:
      vue-demi: 0.14.10(vue@3.5.13(typescript@5.9.2))
    transitivePeerDependencies:
      - '@vue/composition-api'
      - vue

  acorn-jsx@5.3.2(acorn@8.14.0):
    dependencies:
      acorn: 8.14.0

  acorn-jsx@5.3.2(acorn@8.15.0):
    dependencies:
      acorn: 8.15.0

  acorn-walk@8.3.4:
    dependencies:
      acorn: 8.14.0

  acorn@8.14.0: {}

  acorn@8.15.0: {}

  agent-base@7.1.1:
    dependencies:
      debug: 4.4.3
    transitivePeerDependencies:
      - supports-color

  aggregate-error@3.1.0:
    dependencies:
      clean-stack: 2.2.0
      indent-string: 4.0.0

  ajv-draft-04@1.0.0(ajv@8.13.0):
    optionalDependencies:
      ajv: 8.13.0

  ajv-formats@3.0.1(ajv@8.13.0):
    optionalDependencies:
      ajv: 8.13.0

  ajv@6.12.6:
    dependencies:
      fast-deep-equal: 3.1.3
      fast-json-stable-stringify: 2.1.0
      json-schema-traverse: 0.4.1
      uri-js: 4.4.1

  ajv@8.12.0:
    dependencies:
      fast-deep-equal: 3.1.3
      json-schema-traverse: 1.0.0
      require-from-string: 2.0.2
      uri-js: 4.4.1

  ajv@8.13.0:
    dependencies:
      fast-deep-equal: 3.1.3
      json-schema-traverse: 1.0.0
      require-from-string: 2.0.2
      uri-js: 4.4.1

  ajv@8.17.1:
    dependencies:
      fast-deep-equal: 3.1.3
      fast-uri: 3.0.3
      json-schema-traverse: 1.0.0
      require-from-string: 2.0.2
    optional: true

  algoliasearch@5.14.2:
    dependencies:
      '@algolia/client-abtesting': 5.14.2
      '@algolia/client-analytics': 5.14.2
      '@algolia/client-common': 5.14.2
      '@algolia/client-insights': 5.14.2
      '@algolia/client-personalization': 5.14.2
      '@algolia/client-query-suggestions': 5.14.2
      '@algolia/client-search': 5.14.2
      '@algolia/ingestion': 1.14.2
      '@algolia/monitoring': 1.14.2
      '@algolia/recommend': 5.14.2
      '@algolia/requester-browser-xhr': 5.14.2
      '@algolia/requester-fetch': 5.14.2
      '@algolia/requester-node-http': 5.14.2

  alien-signals@0.4.14: {}

  ansi-colors@4.1.3: {}

  ansi-escapes@4.3.2:
    dependencies:
      type-fest: 0.21.3

  ansi-escapes@7.1.1:
    dependencies:
      environment: 1.1.0

  ansi-regex@5.0.1: {}

  ansi-regex@6.1.0: {}

  ansi-styles@3.2.1:
    dependencies:
      color-convert: 1.9.3

  ansi-styles@4.3.0:
    dependencies:
      color-convert: 2.0.1

  ansi-styles@6.2.1: {}

  arg@4.1.3: {}

  argparse@1.0.10:
    dependencies:
      sprintf-js: 1.0.3

  argparse@2.0.1: {}

  aria-query@5.3.2: {}

  array-union@2.1.0: {}

  assertion-error@2.0.1: {}

  ast-types@0.13.4:
    dependencies:
      tslib: 2.8.1

  ast-v8-to-istanbul@0.3.7:
    dependencies:
      '@jridgewell/trace-mapping': 0.3.31
      estree-walker: 3.0.3
      js-tokens: 9.0.1

  asynckit@0.4.0: {}

  at-least-node@1.0.0: {}

  axios@1.7.8(debug@4.3.7):
    dependencies:
      follow-redirects: 1.15.9(debug@4.3.7)
      form-data: 4.0.1
      proxy-from-env: 1.1.0
    transitivePeerDependencies:
      - debug

  axobject-query@4.1.0: {}

  babel-plugin-jsx-dom-expressions@0.39.3(@babel/core@7.26.0):
    dependencies:
      '@babel/core': 7.26.0
      '@babel/helper-module-imports': 7.18.6
      '@babel/plugin-syntax-jsx': 7.25.9(@babel/core@7.26.0)
      '@babel/types': 7.26.0
      html-entities: 2.3.3
      parse5: 7.2.1
      validate-html-nesting: 1.2.2

  babel-preset-solid@1.9.3(@babel/core@7.26.0):
    dependencies:
      '@babel/core': 7.26.0
      babel-plugin-jsx-dom-expressions: 0.39.3(@babel/core@7.26.0)

  balanced-match@1.0.2: {}

  base64-js@1.5.1: {}

  basic-ftp@5.0.5: {}

  before-after-hook@2.2.3: {}

  better-path-resolve@1.0.0:
    dependencies:
      is-windows: 1.0.2

  better-promises@1.0.0:
    dependencies:
      error-kid: 1.0.2

  birpc@0.2.19: {}

  bl@4.1.0:
    dependencies:
      buffer: 5.7.1
      inherits: 2.0.4
      readable-stream: 3.6.2

  brace-expansion@1.1.11:
    dependencies:
      balanced-match: 1.0.2
      concat-map: 0.0.1

  brace-expansion@2.0.1:
    dependencies:
      balanced-match: 1.0.2

  braces@3.0.3:
    dependencies:
      fill-range: 7.1.1

  browserslist@4.24.2:
    dependencies:
      caniuse-lite: 1.0.30001684
      electron-to-chromium: 1.5.67
      node-releases: 2.0.18
      update-browserslist-db: 1.1.1(browserslist@4.24.2)

  buffer@5.7.1:
    dependencies:
      base64-js: 1.5.1
      ieee754: 1.2.1

  cac@6.7.14: {}

  cachedir@2.3.0: {}

  callsites@3.1.0: {}

  camel-case@3.0.0:
    dependencies:
      no-case: 2.3.2
      upper-case: 1.1.3

  caniuse-lite@1.0.30001684: {}

  ccount@2.0.1: {}

  chai@5.2.0:
    dependencies:
      assertion-error: 2.0.1
      check-error: 2.1.1
      deep-eql: 5.0.2
      loupe: 3.1.3
      pathval: 2.0.0

  chalk@2.4.2:
    dependencies:
      ansi-styles: 3.2.1
      escape-string-regexp: 1.0.5
      supports-color: 5.5.0

  chalk@3.0.0:
    dependencies:
      ansi-styles: 4.3.0
      supports-color: 7.2.0

  chalk@4.1.2:
    dependencies:
      ansi-styles: 4.3.0
      supports-color: 7.2.0

  chalk@5.6.2: {}

  change-case@3.1.0:
    dependencies:
      camel-case: 3.0.0
      constant-case: 2.0.0
      dot-case: 2.1.1
      header-case: 1.0.1
      is-lower-case: 1.1.3
      is-upper-case: 1.1.2
      lower-case: 1.1.4
      lower-case-first: 1.0.2
      no-case: 2.3.2
      param-case: 2.1.1
      pascal-case: 2.0.1
      path-case: 2.1.1
      sentence-case: 2.1.1
      snake-case: 2.1.0
      swap-case: 1.1.2
      title-case: 2.1.1
      upper-case: 1.1.3
      upper-case-first: 1.1.2

  change-case@5.4.4:
    optional: true

  character-entities-html4@2.1.0: {}

  character-entities-legacy@3.0.0: {}

  chardet@0.7.0: {}

  check-error@2.1.1: {}

  ci-info@3.9.0: {}

  clean-stack@2.2.0: {}

  cli-cursor@3.1.0:
    dependencies:
      restore-cursor: 3.1.0

  cli-cursor@5.0.0:
    dependencies:
      restore-cursor: 5.1.0

  cli-spinners@2.9.2: {}

  cli-spinners@3.3.0: {}

  cli-width@3.0.0: {}

  cli-width@4.1.0: {}

  clone@1.0.4: {}

  clsx@2.1.1: {}

  color-convert@1.9.3:
    dependencies:
      color-name: 1.1.3

  color-convert@2.0.1:
    dependencies:
      color-name: 1.1.4

  color-name@1.1.3: {}

  color-name@1.1.4: {}

  combined-stream@1.0.8:
    dependencies:
      delayed-stream: 1.0.0

  comma-separated-tokens@2.0.3: {}

  commander@10.0.1: {}

  commander@14.0.1: {}

  commitizen@4.3.1(@types/node@22.10.1)(typescript@5.9.2):
    dependencies:
      cachedir: 2.3.0
      cz-conventional-changelog: 3.3.0(@types/node@22.10.1)(typescript@5.9.2)
      dedent: 0.7.0
      detect-indent: 6.1.0
      find-node-modules: 2.1.3
      find-root: 1.1.0
      fs-extra: 9.1.0
      glob: 7.2.3
      inquirer: 8.2.5
      is-utf8: 0.2.1
      lodash: 4.17.21
      minimist: 1.2.7
      strip-bom: 4.0.0
      strip-json-comments: 3.1.1
    transitivePeerDependencies:
      - '@types/node'
      - typescript

  compare-versions@6.1.1: {}

  concat-map@0.0.1: {}

  confbox@0.1.8: {}

  confbox@0.2.2: {}

  constant-case@2.0.0:
    dependencies:
      snake-case: 2.1.0
      upper-case: 1.1.3

  conventional-commit-types@3.0.0: {}

  convert-source-map@2.0.0: {}

  copy-anything@3.0.5:
    dependencies:
      is-what: 4.1.16

  core-js-pure@3.39.0: {}

  cosmiconfig-typescript-loader@5.1.0(@types/node@22.10.1)(cosmiconfig@9.0.0(typescript@5.9.2))(typescript@5.9.2):
    dependencies:
      '@types/node': 22.10.1
      cosmiconfig: 9.0.0(typescript@5.9.2)
      jiti: 1.21.6
      typescript: 5.9.2
    optional: true

  cosmiconfig@9.0.0(typescript@5.9.2):
    dependencies:
      env-paths: 2.2.1
      import-fresh: 3.3.0
      js-yaml: 4.1.0
      parse-json: 5.2.0
    optionalDependencies:
      typescript: 5.9.2
    optional: true

  create-require@1.1.1: {}

  cross-env@7.0.3:
    dependencies:
      cross-spawn: 7.0.6

  cross-spawn@7.0.6:
    dependencies:
      path-key: 3.1.1
      shebang-command: 2.0.0
      which: 2.0.2

  cssstyle@4.1.0:
    dependencies:
      rrweb-cssom: 0.7.1
    optional: true

  csstype@3.1.3: {}

  cz-conventional-changelog@3.3.0(@types/node@22.10.1)(typescript@5.9.2):
    dependencies:
      chalk: 2.4.2
      commitizen: 4.3.1(@types/node@22.10.1)(typescript@5.9.2)
      conventional-commit-types: 3.0.0
      lodash.map: 4.6.0
      longest: 2.0.1
      word-wrap: 1.2.5
    optionalDependencies:
      '@commitlint/load': 19.5.0(@types/node@22.10.1)(typescript@5.9.2)
    transitivePeerDependencies:
      - '@types/node'
      - typescript

  data-uri-to-buffer@6.0.2: {}

  data-urls@5.0.0:
    dependencies:
      whatwg-mimetype: 4.0.0
      whatwg-url: 14.0.0
    optional: true

  de-indent@1.0.2: {}

  debug@4.3.7:
    dependencies:
      ms: 2.1.3

  debug@4.4.0:
    dependencies:
      ms: 2.1.3

  debug@4.4.3:
    dependencies:
      ms: 2.1.3

  decimal.js@10.4.3:
    optional: true

  dedent@0.7.0: {}

  deep-eql@5.0.2: {}

  deep-extend@0.6.0: {}

  deep-is@0.1.4: {}

  deepmerge@4.3.1: {}

  defaults@1.0.4:
    dependencies:
      clone: 1.0.4

  degenerator@5.0.1:
    dependencies:
      ast-types: 0.13.4
      escodegen: 2.1.0
      esprima: 4.0.1

  del@5.1.0:
    dependencies:
      globby: 10.0.2
      graceful-fs: 4.2.11
      is-glob: 4.0.3
      is-path-cwd: 2.2.0
      is-path-inside: 3.0.3
      p-map: 3.0.0
      rimraf: 3.0.2
      slash: 3.0.0

  delayed-stream@1.0.0: {}

  deprecation@2.3.1: {}

  dequal@2.0.3: {}

  detect-file@1.0.0: {}

  detect-indent@6.1.0: {}

  devlop@1.1.0:
    dependencies:
      dequal: 2.0.3

  diff@4.0.2: {}

  dir-glob@3.0.1:
    dependencies:
      path-type: 4.0.0

  dot-case@2.1.1:
    dependencies:
      no-case: 2.3.2

  eastasianwidth@0.2.0: {}

  electron-to-chromium@1.5.67: {}

  emoji-regex-xs@1.0.0: {}

  emoji-regex@8.0.0: {}

  emoji-regex@9.2.2: {}

  enquirer@2.4.1:
    dependencies:
      ansi-colors: 4.1.3
      strip-ansi: 6.0.1

  entities@4.5.0: {}

  env-paths@2.2.1:
    optional: true

  environment@1.1.0: {}

  error-ex@1.3.2:
    dependencies:
      is-arrayish: 0.2.1
    optional: true

  error-kid@1.0.2: {}

  es-module-lexer@1.7.0: {}

  esbuild@0.21.5:
    optionalDependencies:
      '@esbuild/aix-ppc64': 0.21.5
      '@esbuild/android-arm': 0.21.5
      '@esbuild/android-arm64': 0.21.5
      '@esbuild/android-x64': 0.21.5
      '@esbuild/darwin-arm64': 0.21.5
      '@esbuild/darwin-x64': 0.21.5
      '@esbuild/freebsd-arm64': 0.21.5
      '@esbuild/freebsd-x64': 0.21.5
      '@esbuild/linux-arm': 0.21.5
      '@esbuild/linux-arm64': 0.21.5
      '@esbuild/linux-ia32': 0.21.5
      '@esbuild/linux-loong64': 0.21.5
      '@esbuild/linux-mips64el': 0.21.5
      '@esbuild/linux-ppc64': 0.21.5
      '@esbuild/linux-riscv64': 0.21.5
      '@esbuild/linux-s390x': 0.21.5
      '@esbuild/linux-x64': 0.21.5
      '@esbuild/netbsd-x64': 0.21.5
      '@esbuild/openbsd-x64': 0.21.5
      '@esbuild/sunos-x64': 0.21.5
      '@esbuild/win32-arm64': 0.21.5
      '@esbuild/win32-ia32': 0.21.5
      '@esbuild/win32-x64': 0.21.5

  esbuild@0.23.1:
    optionalDependencies:
      '@esbuild/aix-ppc64': 0.23.1
      '@esbuild/android-arm': 0.23.1
      '@esbuild/android-arm64': 0.23.1
      '@esbuild/android-x64': 0.23.1
      '@esbuild/darwin-arm64': 0.23.1
      '@esbuild/darwin-x64': 0.23.1
      '@esbuild/freebsd-arm64': 0.23.1
      '@esbuild/freebsd-x64': 0.23.1
      '@esbuild/linux-arm': 0.23.1
      '@esbuild/linux-arm64': 0.23.1
      '@esbuild/linux-ia32': 0.23.1
      '@esbuild/linux-loong64': 0.23.1
      '@esbuild/linux-mips64el': 0.23.1
      '@esbuild/linux-ppc64': 0.23.1
      '@esbuild/linux-riscv64': 0.23.1
      '@esbuild/linux-s390x': 0.23.1
      '@esbuild/linux-x64': 0.23.1
      '@esbuild/netbsd-x64': 0.23.1
      '@esbuild/openbsd-arm64': 0.23.1
      '@esbuild/openbsd-x64': 0.23.1
      '@esbuild/sunos-x64': 0.23.1
      '@esbuild/win32-arm64': 0.23.1
      '@esbuild/win32-ia32': 0.23.1
      '@esbuild/win32-x64': 0.23.1

  esbuild@0.25.3:
    optionalDependencies:
      '@esbuild/aix-ppc64': 0.25.3
      '@esbuild/android-arm': 0.25.3
      '@esbuild/android-arm64': 0.25.3
      '@esbuild/android-x64': 0.25.3
      '@esbuild/darwin-arm64': 0.25.3
      '@esbuild/darwin-x64': 0.25.3
      '@esbuild/freebsd-arm64': 0.25.3
      '@esbuild/freebsd-x64': 0.25.3
      '@esbuild/linux-arm': 0.25.3
      '@esbuild/linux-arm64': 0.25.3
      '@esbuild/linux-ia32': 0.25.3
      '@esbuild/linux-loong64': 0.25.3
      '@esbuild/linux-mips64el': 0.25.3
      '@esbuild/linux-ppc64': 0.25.3
      '@esbuild/linux-riscv64': 0.25.3
      '@esbuild/linux-s390x': 0.25.3
      '@esbuild/linux-x64': 0.25.3
      '@esbuild/netbsd-arm64': 0.25.3
      '@esbuild/netbsd-x64': 0.25.3
      '@esbuild/openbsd-arm64': 0.25.3
      '@esbuild/openbsd-x64': 0.25.3
      '@esbuild/sunos-x64': 0.25.3
      '@esbuild/win32-arm64': 0.25.3
      '@esbuild/win32-ia32': 0.25.3
      '@esbuild/win32-x64': 0.25.3

  escalade@3.2.0: {}

  escape-string-regexp@1.0.5: {}

  escape-string-regexp@4.0.0: {}

  escodegen@2.1.0:
    dependencies:
      esprima: 4.0.1
      estraverse: 5.3.0
      esutils: 2.0.3
    optionalDependencies:
      source-map: 0.6.1

  eslint-scope@8.2.0:
    dependencies:
      esrecurse: 4.3.0
      estraverse: 5.3.0

  eslint-visitor-keys@3.4.3: {}

  eslint-visitor-keys@4.2.0: {}

  eslint-visitor-keys@4.2.1: {}

  eslint@9.16.0(jiti@1.21.6):
    dependencies:
      '@eslint-community/eslint-utils': 4.4.1(eslint@9.16.0(jiti@1.21.6))
      '@eslint-community/regexpp': 4.12.1
      '@eslint/config-array': 0.19.0
      '@eslint/core': 0.9.0
      '@eslint/eslintrc': 3.2.0
      '@eslint/js': 9.16.0
      '@eslint/plugin-kit': 0.2.3
      '@humanfs/node': 0.16.6
      '@humanwhocodes/module-importer': 1.0.1
      '@humanwhocodes/retry': 0.4.1
      '@types/estree': 1.0.6
      '@types/json-schema': 7.0.15
      ajv: 6.12.6
      chalk: 4.1.2
      cross-spawn: 7.0.6
      debug: 4.3.7
      escape-string-regexp: 4.0.0
      eslint-scope: 8.2.0
      eslint-visitor-keys: 4.2.0
      espree: 10.3.0
      esquery: 1.6.0
      esutils: 2.0.3
      fast-deep-equal: 3.1.3
      file-entry-cache: 8.0.0
      find-up: 5.0.0
      glob-parent: 6.0.2
      ignore: 5.3.2
      imurmurhash: 0.1.4
      is-glob: 4.0.3
      json-stable-stringify-without-jsonify: 1.0.1
      lodash.merge: 4.6.2
      minimatch: 3.1.2
      natural-compare: 1.4.0
      optionator: 0.9.4
    optionalDependencies:
      jiti: 1.21.6
    transitivePeerDependencies:
      - supports-color

  esm-env@1.2.2: {}

  espree@10.3.0:
    dependencies:
      acorn: 8.14.0
      acorn-jsx: 5.3.2(acorn@8.14.0)
      eslint-visitor-keys: 4.2.0

  espree@10.4.0:
    dependencies:
      acorn: 8.15.0
      acorn-jsx: 5.3.2(acorn@8.15.0)
      eslint-visitor-keys: 4.2.1

  esprima@4.0.1: {}

  esquery@1.6.0:
    dependencies:
      estraverse: 5.3.0

  esrap@2.1.0:
    dependencies:
      '@jridgewell/sourcemap-codec': 1.5.0

  esrecurse@4.3.0:
    dependencies:
      estraverse: 5.3.0

  estraverse@5.3.0: {}

  estree-walker@2.0.2: {}

  estree-walker@3.0.3:
    dependencies:
      '@types/estree': 1.0.7

  esutils@2.0.3: {}

  execa@5.1.1:
    dependencies:
      cross-spawn: 7.0.6
      get-stream: 6.0.1
      human-signals: 2.1.0
      is-stream: 2.0.1
      merge-stream: 2.0.0
      npm-run-path: 4.0.1
      onetime: 5.1.2
      signal-exit: 3.0.7
      strip-final-newline: 2.0.0

  expand-tilde@2.0.2:
    dependencies:
      homedir-polyfill: 1.0.3

  expect-type@1.2.1: {}

  exsolve@1.0.5: {}

  extendable-error@0.1.7: {}

  external-editor@3.1.0:
    dependencies:
      chardet: 0.7.0
      iconv-lite: 0.4.24
      tmp: 0.0.33

  fast-deep-equal@3.1.3: {}

  fast-glob@3.3.2:
    dependencies:
      '@nodelib/fs.stat': 2.0.5
      '@nodelib/fs.walk': 1.2.8
      glob-parent: 5.1.2
      merge2: 1.4.1
      micromatch: 4.0.8

  fast-json-stable-stringify@2.1.0: {}

  fast-levenshtein@2.0.6: {}

  fast-uri@3.0.3:
    optional: true

  fastq@1.17.1:
    dependencies:
      reusify: 1.0.4

  fdir@6.4.4(picomatch@4.0.2):
    optionalDependencies:
      picomatch: 4.0.2

  fdir@6.5.0(picomatch@4.0.3):
    optionalDependencies:
      picomatch: 4.0.3

  fflate@0.8.2: {}

  figures@3.2.0:
    dependencies:
      escape-string-regexp: 1.0.5

  figures@6.1.0:
    dependencies:
      is-unicode-supported: 2.1.0

  file-entry-cache@8.0.0:
    dependencies:
      flat-cache: 4.0.1

  fill-range@7.1.1:
    dependencies:
      to-regex-range: 5.0.1

  find-node-modules@2.1.3:
    dependencies:
      findup-sync: 4.0.0
      merge: 2.1.1

  find-root@1.1.0: {}

  find-up@4.1.0:
    dependencies:
      locate-path: 5.0.0
      path-exists: 4.0.0

  find-up@5.0.0:
    dependencies:
      locate-path: 6.0.0
      path-exists: 4.0.0

  findup-sync@4.0.0:
    dependencies:
      detect-file: 1.0.0
      is-glob: 4.0.3
      micromatch: 4.0.8
      resolve-dir: 1.0.1

  flat-cache@4.0.1:
    dependencies:
      flatted: 3.3.2
      keyv: 4.5.4

  flatted@3.3.2: {}

  flatted@3.3.3: {}

  focus-trap@7.6.2:
    dependencies:
      tabbable: 6.2.0

  follow-redirects@1.15.9(debug@4.3.7):
    optionalDependencies:
      debug: 4.3.7

  foreground-child@3.3.0:
    dependencies:
      cross-spawn: 7.0.6
      signal-exit: 4.1.0

  form-data@4.0.1:
    dependencies:
      asynckit: 0.4.0
      combined-stream: 1.0.8
      mime-types: 2.1.35

  fp-ts@2.16.11: {}

  fs-extra@10.1.0:
    dependencies:
      graceful-fs: 4.2.11
      jsonfile: 6.1.0
      universalify: 2.0.1

  fs-extra@11.2.0:
    dependencies:
      graceful-fs: 4.2.11
      jsonfile: 6.1.0
      universalify: 2.0.1

  fs-extra@11.3.0:
    dependencies:
      graceful-fs: 4.2.11
      jsonfile: 6.1.0
      universalify: 2.0.1

  fs-extra@7.0.1:
    dependencies:
      graceful-fs: 4.2.11
      jsonfile: 4.0.0
      universalify: 0.1.2

  fs-extra@8.1.0:
    dependencies:
      graceful-fs: 4.2.11
      jsonfile: 4.0.0
      universalify: 0.1.2

  fs-extra@9.1.0:
    dependencies:
      at-least-node: 1.0.0
      graceful-fs: 4.2.11
      jsonfile: 6.1.0
      universalify: 2.0.1

  fs.realpath@1.0.0: {}

  fsevents@2.3.3:
    optional: true

  function-bind@1.1.2: {}

  gensync@1.0.0-beta.2: {}

  get-east-asian-width@1.4.0: {}

  get-stream@6.0.1: {}

  get-tsconfig@4.8.1:
    dependencies:
      resolve-pkg-maps: 1.0.0

  get-uri@6.0.3:
    dependencies:
      basic-ftp: 5.0.5
      data-uri-to-buffer: 6.0.2
      debug: 4.4.3
      fs-extra: 11.2.0
    transitivePeerDependencies:
      - supports-color

  glob-parent@5.1.2:
    dependencies:
      is-glob: 4.0.3

  glob-parent@6.0.2:
    dependencies:
      is-glob: 4.0.3

  glob@10.4.5:
    dependencies:
      foreground-child: 3.3.0
      jackspeak: 3.4.3
      minimatch: 9.0.5
      minipass: 7.1.2
      package-json-from-dist: 1.0.1
      path-scurry: 1.11.1

  glob@11.0.0:
    dependencies:
      foreground-child: 3.3.0
      jackspeak: 4.0.2
      minimatch: 10.0.1
      minipass: 7.1.2
      package-json-from-dist: 1.0.1
      path-scurry: 2.0.0

  glob@7.2.3:
    dependencies:
      fs.realpath: 1.0.0
      inflight: 1.0.6
      inherits: 2.0.4
      minimatch: 3.1.2
      once: 1.4.0
      path-is-absolute: 1.0.1

  global-directory@4.0.1:
    dependencies:
      ini: 4.1.1
    optional: true

  global-modules@1.0.0:
    dependencies:
      global-prefix: 1.0.2
      is-windows: 1.0.2
      resolve-dir: 1.0.1

  global-prefix@1.0.2:
    dependencies:
      expand-tilde: 2.0.2
      homedir-polyfill: 1.0.3
      ini: 1.3.8
      is-windows: 1.0.2
      which: 1.3.1

  globals@11.12.0: {}

  globals@14.0.0: {}

  globby@10.0.2:
    dependencies:
      '@types/glob': 7.2.0
      array-union: 2.1.0
      dir-glob: 3.0.1
      fast-glob: 3.3.2
      glob: 7.2.3
      ignore: 5.3.2
      merge2: 1.4.1
      slash: 3.0.0

  globby@11.1.0:
    dependencies:
      array-union: 2.1.0
      dir-glob: 3.0.1
      fast-glob: 3.3.2
      ignore: 5.3.2
      merge2: 1.4.1
      slash: 3.0.0

  globrex@0.1.2: {}

  graceful-fs@4.2.11: {}

  gradient-string@2.0.2:
    dependencies:
      chalk: 4.1.2
      tinygradient: 1.1.5

  graphemer@1.4.0: {}

  handlebars@4.7.8:
    dependencies:
      minimist: 1.2.8
      neo-async: 2.6.2
      source-map: 0.6.1
      wordwrap: 1.0.0
    optionalDependencies:
      uglify-js: 3.19.3

  happy-dom@20.0.5:
    dependencies:
      '@types/node': 20.19.22
      '@types/whatwg-mimetype': 3.0.2
      whatwg-mimetype: 3.0.0
    optional: true

  has-flag@3.0.0: {}

  has-flag@4.0.0: {}

  hasown@2.0.2:
    dependencies:
      function-bind: 1.1.2

  hast-util-to-html@9.0.3:
    dependencies:
      '@types/hast': 3.0.4
      '@types/unist': 3.0.3
      ccount: 2.0.1
      comma-separated-tokens: 2.0.3
      hast-util-whitespace: 3.0.0
      html-void-elements: 3.0.0
      mdast-util-to-hast: 13.2.0
      property-information: 6.5.0
      space-separated-tokens: 2.0.2
      stringify-entities: 4.0.4
      zwitch: 2.0.4

  hast-util-whitespace@3.0.0:
    dependencies:
      '@types/hast': 3.0.4

  he@1.2.0: {}

  header-case@1.0.1:
    dependencies:
      no-case: 2.3.2
      upper-case: 1.1.3

  homedir-polyfill@1.0.3:
    dependencies:
      parse-passwd: 1.0.0

  hookable@5.5.3: {}

  html-encoding-sniffer@4.0.0:
    dependencies:
      whatwg-encoding: 3.1.1
    optional: true

  html-entities@2.3.3: {}

  html-escaper@2.0.2: {}

  html-void-elements@3.0.0: {}

  http-proxy-agent@7.0.2:
    dependencies:
      agent-base: 7.1.1
      debug: 4.4.3
    transitivePeerDependencies:
      - supports-color

  https-proxy-agent@7.0.5:
    dependencies:
      agent-base: 7.1.1
      debug: 4.4.3
    transitivePeerDependencies:
      - supports-color

  human-id@1.0.2: {}

  human-signals@2.1.0: {}

  husky@9.1.7: {}

  iconv-lite@0.4.24:
    dependencies:
      safer-buffer: 2.1.2

  iconv-lite@0.6.3:
    dependencies:
      safer-buffer: 2.1.2
    optional: true

  ieee754@1.2.1: {}

  ignore@5.3.2: {}

  ignore@7.0.5: {}

  import-fresh@3.3.0:
    dependencies:
      parent-module: 1.0.1
      resolve-from: 4.0.0

  import-lazy@4.0.0: {}

  import-meta-resolve@4.1.0:
    optional: true

  imurmurhash@0.1.4: {}

  indent-string@4.0.0: {}

  inflight@1.0.6:
    dependencies:
      once: 1.4.0
      wrappy: 1.0.2

  inherits@2.0.4: {}

  ini@1.3.8: {}

  ini@4.1.1:
    optional: true

  inquirer@7.3.3:
    dependencies:
      ansi-escapes: 4.3.2
      chalk: 4.1.2
      cli-cursor: 3.1.0
      cli-width: 3.0.0
      external-editor: 3.1.0
      figures: 3.2.0
      lodash: 4.17.21
      mute-stream: 0.0.8
      run-async: 2.4.1
      rxjs: 6.6.7
      string-width: 4.2.3
      strip-ansi: 6.0.1
      through: 2.3.8

  inquirer@8.2.5:
    dependencies:
      ansi-escapes: 4.3.2
      chalk: 4.1.2
      cli-cursor: 3.1.0
      cli-width: 3.0.0
      external-editor: 3.1.0
      figures: 3.2.0
      lodash: 4.17.21
      mute-stream: 0.0.8
      ora: 5.4.1
      run-async: 2.4.1
      rxjs: 7.8.1
      string-width: 4.2.3
      strip-ansi: 6.0.1
      through: 2.3.8
      wrap-ansi: 7.0.0

  inquirer@8.2.6:
    dependencies:
      ansi-escapes: 4.3.2
      chalk: 4.1.2
      cli-cursor: 3.1.0
      cli-width: 3.0.0
      external-editor: 3.1.0
      figures: 3.2.0
      lodash: 4.17.21
      mute-stream: 0.0.8
      ora: 5.4.1
      run-async: 2.4.1
      rxjs: 7.8.1
      string-width: 4.2.3
      strip-ansi: 6.0.1
      through: 2.3.8
      wrap-ansi: 6.2.0

  ip-address@9.0.5:
    dependencies:
      jsbn: 1.1.0
      sprintf-js: 1.1.3

  is-arrayish@0.2.1:
    optional: true

  is-core-module@2.15.1:
    dependencies:
      hasown: 2.0.2

  is-extglob@2.1.1: {}

  is-fullwidth-code-point@3.0.0: {}

  is-glob@4.0.3:
    dependencies:
      is-extglob: 2.1.1

  is-interactive@1.0.0: {}

  is-interactive@2.0.0: {}

  is-lower-case@1.1.3:
    dependencies:
      lower-case: 1.1.4

  is-module@1.0.0: {}

  is-number@7.0.0: {}

  is-path-cwd@2.2.0: {}

  is-path-inside@3.0.3: {}

  is-potential-custom-element-name@1.0.1:
    optional: true

  is-reference@3.0.3:
    dependencies:
      '@types/estree': 1.0.7

  is-stream@2.0.1: {}

  is-subdir@1.2.0:
    dependencies:
      better-path-resolve: 1.0.0

  is-unicode-supported@0.1.0: {}

  is-unicode-supported@2.1.0: {}

  is-upper-case@1.1.2:
    dependencies:
      upper-case: 1.1.3

  is-utf8@0.2.1: {}

  is-what@4.1.16: {}

  is-windows@1.0.2: {}

  isbinaryfile@4.0.10: {}

  isexe@2.0.0: {}

  istanbul-lib-coverage@3.2.2: {}

  istanbul-lib-report@3.0.1:
    dependencies:
      istanbul-lib-coverage: 3.2.2
      make-dir: 4.0.0
      supports-color: 7.2.0

  istanbul-lib-source-maps@5.0.6:
    dependencies:
      '@jridgewell/trace-mapping': 0.3.25
      debug: 4.4.3
      istanbul-lib-coverage: 3.2.2
    transitivePeerDependencies:
      - supports-color

  istanbul-reports@3.1.7:
    dependencies:
      html-escaper: 2.0.2
      istanbul-lib-report: 3.0.1

  jackspeak@3.4.3:
    dependencies:
      '@isaacs/cliui': 8.0.2
    optionalDependencies:
      '@pkgjs/parseargs': 0.11.0

  jackspeak@4.0.2:
    dependencies:
      '@isaacs/cliui': 8.0.2

  jiti@1.21.6:
    optional: true

  jju@1.4.0: {}

  js-tokens@4.0.0: {}

  js-tokens@9.0.1: {}

  js-yaml@3.14.1:
    dependencies:
      argparse: 1.0.10
      esprima: 4.0.1

  js-yaml@4.1.0:
    dependencies:
      argparse: 2.0.1

  jsbn@1.1.0: {}

  jsdom@25.0.1:
    dependencies:
      cssstyle: 4.1.0
      data-urls: 5.0.0
      decimal.js: 10.4.3
      form-data: 4.0.1
      html-encoding-sniffer: 4.0.0
      http-proxy-agent: 7.0.2
      https-proxy-agent: 7.0.5
      is-potential-custom-element-name: 1.0.1
      nwsapi: 2.2.16
      parse5: 7.2.1
      rrweb-cssom: 0.7.1
      saxes: 6.0.0
      symbol-tree: 3.2.4
      tough-cookie: 5.0.0
      w3c-xmlserializer: 5.0.0
      webidl-conversions: 7.0.0
      whatwg-encoding: 3.1.1
      whatwg-mimetype: 4.0.0
      whatwg-url: 14.0.0
      ws: 8.18.0
      xml-name-validator: 5.0.0
    transitivePeerDependencies:
      - bufferutil
      - supports-color
      - utf-8-validate
    optional: true

  jsesc@3.0.2: {}

  json-buffer@3.0.1: {}

  json-parse-even-better-errors@2.3.1:
    optional: true

  json-schema-traverse@0.4.1: {}

  json-schema-traverse@1.0.0: {}

  json-stable-stringify-without-jsonify@1.0.1: {}

  json5@2.2.3: {}

  jsonfile@4.0.0:
    optionalDependencies:
      graceful-fs: 4.2.11

  jsonfile@6.1.0:
    dependencies:
      universalify: 2.0.1
    optionalDependencies:
      graceful-fs: 4.2.11

  keyv@4.5.4:
    dependencies:
      json-buffer: 3.0.1

  kolorist@1.8.0: {}

  levn@0.4.1:
    dependencies:
      prelude-ls: 1.2.1
      type-check: 0.4.0

  lines-and-columns@1.2.4:
    optional: true

  local-pkg@1.1.1:
    dependencies:
      mlly: 1.7.4
      pkg-types: 2.1.0
      quansync: 0.2.10

  locate-character@3.0.0: {}

  locate-path@5.0.0:
    dependencies:
      p-locate: 4.1.0

  locate-path@6.0.0:
    dependencies:
      p-locate: 5.0.0

  lodash.get@4.4.2: {}

  lodash.isplainobject@4.0.6:
    optional: true

  lodash.map@4.6.0: {}

  lodash.merge@4.6.2: {}

  lodash.mergewith@4.6.2:
    optional: true

  lodash.startcase@4.4.0: {}

  lodash.uniq@4.5.0:
    optional: true

  lodash@4.17.21: {}

  log-symbols@3.0.0:
    dependencies:
      chalk: 2.4.2

  log-symbols@4.1.0:
    dependencies:
      chalk: 4.1.2
      is-unicode-supported: 0.1.0

  log-symbols@7.0.1:
    dependencies:
      is-unicode-supported: 2.1.0
      yoctocolors: 2.1.2

  longest@2.0.1: {}

  loose-envify@1.4.0:
    dependencies:
      js-tokens: 4.0.0
    optional: true

  loupe@3.1.3: {}

  loupe@3.2.1: {}

  lower-case-first@1.0.2:
    dependencies:
      lower-case: 1.1.4

  lower-case@1.1.4: {}

  lru-cache@10.4.3: {}

  lru-cache@11.0.2: {}

  lru-cache@5.1.1:
    dependencies:
      yallist: 3.1.1

  lru-cache@6.0.0:
    dependencies:
      yallist: 4.0.0

  lru-cache@7.18.3: {}

  magic-string@0.25.9:
    dependencies:
      sourcemap-codec: 1.4.8

  magic-string@0.30.17:
    dependencies:
      '@jridgewell/sourcemap-codec': 1.5.0

  magicast@0.3.5:
    dependencies:
      '@babel/parser': 7.26.2
      '@babel/types': 7.26.0
      source-map-js: 1.2.1

  make-dir@4.0.0:
    dependencies:
      semver: 7.6.3

  make-error@1.3.6: {}

  mark.js@8.11.1: {}

  mdast-util-to-hast@13.2.0:
    dependencies:
      '@types/hast': 3.0.4
      '@types/mdast': 4.0.4
      '@ungap/structured-clone': 1.2.0
      devlop: 1.1.0
      micromark-util-sanitize-uri: 2.0.1
      trim-lines: 3.0.1
      unist-util-position: 5.0.0
      unist-util-visit: 5.0.0
      vfile: 6.0.3

  merge-anything@5.1.7:
    dependencies:
      is-what: 4.1.16

  merge-stream@2.0.0: {}

  merge2@1.4.1: {}

  merge@2.1.1: {}

  micromark-util-character@2.1.1:
    dependencies:
      micromark-util-symbol: 2.0.1
      micromark-util-types: 2.0.1

  micromark-util-encode@2.0.1: {}

  micromark-util-sanitize-uri@2.0.1:
    dependencies:
      micromark-util-character: 2.1.1
      micromark-util-encode: 2.0.1
      micromark-util-symbol: 2.0.1

  micromark-util-symbol@2.0.1: {}

  micromark-util-types@2.0.1: {}

  micromatch@4.0.8:
    dependencies:
      braces: 3.0.3
      picomatch: 2.3.1

  mime-db@1.52.0: {}

  mime-types@2.1.35:
    dependencies:
      mime-db: 1.52.0

  mimic-fn@2.1.0: {}

  mimic-function@5.0.1: {}

  minimatch@10.0.1:
    dependencies:
      brace-expansion: 2.0.1

  minimatch@3.0.8:
    dependencies:
      brace-expansion: 1.1.11

  minimatch@3.1.2:
    dependencies:
      brace-expansion: 1.1.11

  minimatch@9.0.5:
    dependencies:
      brace-expansion: 2.0.1

  minimist@1.2.7: {}

  minimist@1.2.8: {}

  minipass@7.1.2: {}

  minisearch@7.1.0: {}

  mitt@3.0.1: {}

  mkdirp@0.5.6:
    dependencies:
      minimist: 1.2.8

  mlly@1.7.4:
    dependencies:
      acorn: 8.14.0
      pathe: 2.0.3
      pkg-types: 1.3.1
      ufo: 1.5.4

  mri@1.2.0: {}

  mrmime@2.0.0: {}

  ms@2.1.3: {}

  muggle-string@0.4.1: {}

  mute-stream@0.0.8: {}

  mute-stream@2.0.0: {}

  nanoid@3.3.11: {}

  natural-compare@1.4.0: {}

  neo-async@2.6.2: {}

  netmask@2.0.2: {}

  no-case@2.3.2:
    dependencies:
      lower-case: 1.1.4

  node-plop@0.26.3:
    dependencies:
      '@babel/runtime-corejs3': 7.26.0
      '@types/inquirer': 6.5.0
      change-case: 3.1.0
      del: 5.1.0
      globby: 10.0.2
      handlebars: 4.7.8
      inquirer: 7.3.3
      isbinaryfile: 4.0.10
      lodash.get: 4.4.2
      mkdirp: 0.5.6
      resolve: 1.22.8

  node-releases@2.0.18: {}

  npm-run-path@4.0.1:
    dependencies:
      path-key: 3.1.1

  nwsapi@2.2.16:
    optional: true

  once@1.4.0:
    dependencies:
      wrappy: 1.0.2

  onetime@5.1.2:
    dependencies:
      mimic-fn: 2.1.0

  onetime@7.0.0:
    dependencies:
      mimic-function: 5.0.1

  oniguruma-to-es@0.4.1:
    dependencies:
      emoji-regex-xs: 1.0.0
      regex: 5.0.2
      regex-recursion: 4.2.1

  optionator@0.9.4:
    dependencies:
      deep-is: 0.1.4
      fast-levenshtein: 2.0.6
      levn: 0.4.1
      prelude-ls: 1.2.1
      type-check: 0.4.0
      word-wrap: 1.2.5

  ora@4.1.1:
    dependencies:
      chalk: 3.0.0
      cli-cursor: 3.1.0
      cli-spinners: 2.9.2
      is-interactive: 1.0.0
      log-symbols: 3.0.0
      mute-stream: 0.0.8
      strip-ansi: 6.0.1
      wcwidth: 1.0.1

  ora@5.4.1:
    dependencies:
      bl: 4.1.0
      chalk: 4.1.2
      cli-cursor: 3.1.0
      cli-spinners: 2.9.2
      is-interactive: 1.0.0
      is-unicode-supported: 0.1.0
      log-symbols: 4.1.0
      strip-ansi: 6.0.1
      wcwidth: 1.0.1

  ora@9.0.0:
    dependencies:
      chalk: 5.6.2
      cli-cursor: 5.0.0
      cli-spinners: 3.3.0
      is-interactive: 2.0.0
      is-unicode-supported: 2.1.0
      log-symbols: 7.0.1
      stdin-discarder: 0.2.2
      string-width: 8.1.0
      strip-ansi: 7.1.2

  os-tmpdir@1.0.2: {}

  outdent@0.5.0: {}

  p-filter@2.1.0:
    dependencies:
      p-map: 2.1.0

  p-limit@2.3.0:
    dependencies:
      p-try: 2.2.0

  p-limit@3.1.0:
    dependencies:
      yocto-queue: 0.1.0

  p-locate@4.1.0:
    dependencies:
      p-limit: 2.3.0

  p-locate@5.0.0:
    dependencies:
      p-limit: 3.1.0

  p-map@2.1.0: {}

  p-map@3.0.0:
    dependencies:
      aggregate-error: 3.1.0

  p-try@2.2.0: {}

  pac-proxy-agent@7.0.2:
    dependencies:
      '@tootallnate/quickjs-emscripten': 0.23.0
      agent-base: 7.1.1
      debug: 4.4.3
      get-uri: 6.0.3
      http-proxy-agent: 7.0.2
      https-proxy-agent: 7.0.5
      pac-resolver: 7.0.1
      socks-proxy-agent: 8.0.4
    transitivePeerDependencies:
      - supports-color

  pac-resolver@7.0.1:
    dependencies:
      degenerator: 5.0.1
      netmask: 2.0.2

  package-json-from-dist@1.0.1: {}

  package-manager-detector@0.2.6: {}

  param-case@2.1.1:
    dependencies:
      no-case: 2.3.2

  parent-module@1.0.1:
    dependencies:
      callsites: 3.1.0

  parse-json@5.2.0:
    dependencies:
      '@babel/code-frame': 7.26.2
      error-ex: 1.3.2
      json-parse-even-better-errors: 2.3.1
      lines-and-columns: 1.2.4
    optional: true

  parse-passwd@1.0.0: {}

  parse5@7.2.1:
    dependencies:
      entities: 4.5.0

  pascal-case@2.0.1:
    dependencies:
      camel-case: 3.0.0
      upper-case-first: 1.1.2

  path-browserify@1.0.1: {}

  path-case@2.1.1:
    dependencies:
      no-case: 2.3.2

  path-exists@4.0.0: {}

  path-is-absolute@1.0.1: {}

  path-key@3.1.1: {}

  path-parse@1.0.7: {}

  path-scurry@1.11.1:
    dependencies:
      lru-cache: 10.4.3
      minipass: 7.1.2

  path-scurry@2.0.0:
    dependencies:
      lru-cache: 11.0.2
      minipass: 7.1.2

  path-type@4.0.0: {}

  pathe@2.0.3: {}

  pathval@2.0.0: {}

  perfect-debounce@1.0.0: {}

  picocolors@1.0.1: {}

  picocolors@1.1.1: {}

  picomatch@2.3.1: {}

  picomatch@4.0.2: {}

  picomatch@4.0.3: {}

  pify@4.0.1: {}

  pkg-types@1.3.1:
    dependencies:
      confbox: 0.1.8
      mlly: 1.7.4
      pathe: 2.0.3

  pkg-types@2.1.0:
    dependencies:
      confbox: 0.2.2
      exsolve: 1.0.5
      pathe: 2.0.3

  postcss@8.5.3:
    dependencies:
      nanoid: 3.3.11
      picocolors: 1.1.1
      source-map-js: 1.2.1

  preact@10.24.3: {}

  prelude-ls@1.2.1: {}

  prettier@2.8.8: {}

  property-information@6.5.0: {}

  proxy-agent@6.4.0:
    dependencies:
      agent-base: 7.1.1
      debug: 4.3.7
      http-proxy-agent: 7.0.2
      https-proxy-agent: 7.0.5
      lru-cache: 7.18.3
      pac-proxy-agent: 7.0.2
      proxy-from-env: 1.1.0
      socks-proxy-agent: 8.0.4
    transitivePeerDependencies:
      - supports-color

  proxy-from-env@1.1.0: {}

  punycode@2.3.1: {}

  quansync@0.2.10: {}

  queue-microtask@1.2.3: {}

  rc@1.2.8:
    dependencies:
      deep-extend: 0.6.0
      ini: 1.3.8
      minimist: 1.2.8
      strip-json-comments: 2.0.1

  react-dom@18.3.1(react@18.3.1):
    dependencies:
      loose-envify: 1.4.0
      react: 18.3.1
      scheduler: 0.23.2
    optional: true

  react@18.3.1:
    dependencies:
      loose-envify: 1.4.0
    optional: true

  react@19.2.0: {}

  read-yaml-file@1.1.0:
    dependencies:
      graceful-fs: 4.2.11
      js-yaml: 3.14.1
      pify: 4.0.1
      strip-bom: 3.0.0

  readable-stream@3.6.2:
    dependencies:
      inherits: 2.0.4
      string_decoder: 1.3.0
      util-deprecate: 1.0.2

  regenerator-runtime@0.14.1: {}

  regex-recursion@4.2.1:
    dependencies:
      regex-utilities: 2.3.0

  regex-utilities@2.3.0: {}

  regex@5.0.2:
    dependencies:
      regex-utilities: 2.3.0

  registry-auth-token@3.3.2:
    dependencies:
      rc: 1.2.8
      safe-buffer: 5.2.1

  registry-url@3.1.0:
    dependencies:
      rc: 1.2.8

  require-from-string@2.0.2: {}

  resolve-dir@1.0.1:
    dependencies:
      expand-tilde: 2.0.2
      global-modules: 1.0.0

  resolve-from@4.0.0: {}

  resolve-from@5.0.0: {}

  resolve-pkg-maps@1.0.0: {}

  resolve@1.22.8:
    dependencies:
      is-core-module: 2.15.1
      path-parse: 1.0.7
      supports-preserve-symlinks-flag: 1.0.0

  restore-cursor@3.1.0:
    dependencies:
      onetime: 5.1.2
      signal-exit: 3.0.7

  restore-cursor@5.1.0:
    dependencies:
      onetime: 7.0.0
      signal-exit: 4.1.0

  reusify@1.0.4: {}

  rfdc@1.4.1: {}

  rimraf@3.0.2:
    dependencies:
      glob: 7.2.3

  rimraf@6.0.1:
    dependencies:
      glob: 11.0.0
      package-json-from-dist: 1.0.1

  rollup-plugin-preserve-shebang@1.0.1:
    dependencies:
      magic-string: 0.25.9

  rollup@4.40.0:
    dependencies:
      '@types/estree': 1.0.7
    optionalDependencies:
      '@rollup/rollup-android-arm-eabi': 4.40.0
      '@rollup/rollup-android-arm64': 4.40.0
      '@rollup/rollup-darwin-arm64': 4.40.0
      '@rollup/rollup-darwin-x64': 4.40.0
      '@rollup/rollup-freebsd-arm64': 4.40.0
      '@rollup/rollup-freebsd-x64': 4.40.0
      '@rollup/rollup-linux-arm-gnueabihf': 4.40.0
      '@rollup/rollup-linux-arm-musleabihf': 4.40.0
      '@rollup/rollup-linux-arm64-gnu': 4.40.0
      '@rollup/rollup-linux-arm64-musl': 4.40.0
      '@rollup/rollup-linux-loongarch64-gnu': 4.40.0
      '@rollup/rollup-linux-powerpc64le-gnu': 4.40.0
      '@rollup/rollup-linux-riscv64-gnu': 4.40.0
      '@rollup/rollup-linux-riscv64-musl': 4.40.0
      '@rollup/rollup-linux-s390x-gnu': 4.40.0
      '@rollup/rollup-linux-x64-gnu': 4.40.0
      '@rollup/rollup-linux-x64-musl': 4.40.0
      '@rollup/rollup-win32-arm64-msvc': 4.40.0
      '@rollup/rollup-win32-ia32-msvc': 4.40.0
      '@rollup/rollup-win32-x64-msvc': 4.40.0
      fsevents: 2.3.3

  rrweb-cssom@0.7.1:
    optional: true

  run-async@2.4.1: {}

  run-parallel@1.2.0:
    dependencies:
      queue-microtask: 1.2.3

  rxjs@6.6.7:
    dependencies:
      tslib: 1.14.1

  rxjs@7.8.1:
    dependencies:
      tslib: 2.8.1

  safe-buffer@5.2.1: {}

  safer-buffer@2.1.2: {}

  saxes@6.0.0:
    dependencies:
      xmlchars: 2.2.0
    optional: true

  scheduler@0.23.2:
    dependencies:
      loose-envify: 1.4.0
    optional: true

  search-insights@2.17.2: {}

  semver@6.3.1: {}

  semver@7.5.4:
    dependencies:
      lru-cache: 6.0.0

  semver@7.6.2: {}

  semver@7.6.3: {}

  sentence-case@2.1.1:
    dependencies:
      no-case: 2.3.2
      upper-case-first: 1.1.2

  seroval-plugins@1.1.1(seroval@1.1.1):
    dependencies:
      seroval: 1.1.1

  seroval@1.1.1: {}

  shebang-command@2.0.0:
    dependencies:
      shebang-regex: 3.0.0

  shebang-regex@3.0.0: {}

  shiki@1.23.1:
    dependencies:
      '@shikijs/core': 1.23.1
      '@shikijs/engine-javascript': 1.23.1
      '@shikijs/engine-oniguruma': 1.23.1
      '@shikijs/types': 1.23.1
      '@shikijs/vscode-textmate': 9.3.0
      '@types/hast': 3.0.4

  siginfo@2.0.0: {}

  signal-exit@3.0.7: {}

  signal-exit@4.1.0: {}

  sirv@3.0.1:
    dependencies:
      '@polka/url': 1.0.0-next.28
      mrmime: 2.0.0
      totalist: 3.0.1

  slash@3.0.0: {}

  smart-buffer@4.2.0: {}

  snake-case@2.1.0:
    dependencies:
      no-case: 2.3.2

  socks-proxy-agent@8.0.4:
    dependencies:
      agent-base: 7.1.1
      debug: 4.4.3
      socks: 2.8.3
    transitivePeerDependencies:
      - supports-color

  socks@2.8.3:
    dependencies:
      ip-address: 9.0.5
      smart-buffer: 4.2.0

  solid-js@1.9.3:
    dependencies:
      csstype: 3.1.3
      seroval: 1.1.1
      seroval-plugins: 1.1.1(seroval@1.1.1)

  solid-refresh@0.6.3(solid-js@1.9.3):
    dependencies:
      '@babel/generator': 7.26.2
      '@babel/helper-module-imports': 7.25.9
      '@babel/types': 7.26.0
      solid-js: 1.9.3
    transitivePeerDependencies:
      - supports-color

  source-map-js@1.2.1: {}

  source-map@0.6.1: {}

  sourcemap-codec@1.4.8: {}

  space-separated-tokens@2.0.2: {}

  spawndamnit@3.0.1:
    dependencies:
      cross-spawn: 7.0.6
      signal-exit: 4.1.0

  speakingurl@14.0.1: {}

  sprintf-js@1.0.3: {}

  sprintf-js@1.1.3: {}

  stackback@0.0.2: {}

  std-env@3.9.0: {}

  stdin-discarder@0.2.2: {}

  string-argv@0.3.2: {}

  string-width@4.2.3:
    dependencies:
      emoji-regex: 8.0.0
      is-fullwidth-code-point: 3.0.0
      strip-ansi: 6.0.1

  string-width@5.1.2:
    dependencies:
      eastasianwidth: 0.2.0
      emoji-regex: 9.2.2
      strip-ansi: 7.1.2

  string-width@8.1.0:
    dependencies:
      get-east-asian-width: 1.4.0
      strip-ansi: 7.1.2

  string_decoder@1.3.0:
    dependencies:
      safe-buffer: 5.2.1

  stringify-entities@4.0.4:
    dependencies:
      character-entities-html4: 2.1.0
      character-entities-legacy: 3.0.0

  strip-ansi@6.0.1:
    dependencies:
      ansi-regex: 5.0.1

  strip-ansi@7.1.0:
    dependencies:
      ansi-regex: 6.1.0

  strip-ansi@7.1.2:
    dependencies:
      ansi-regex: 6.1.0

  strip-bom@3.0.0: {}

  strip-bom@4.0.0: {}

  strip-final-newline@2.0.0: {}

  strip-json-comments@2.0.1: {}

  strip-json-comments@3.1.1: {}

  strip-literal@3.1.0:
    dependencies:
      js-tokens: 9.0.1

  superjson@2.2.1:
    dependencies:
      copy-anything: 3.0.5

  supports-color@5.5.0:
    dependencies:
      has-flag: 3.0.0

  supports-color@7.2.0:
    dependencies:
      has-flag: 4.0.0

  supports-color@8.1.1:
    dependencies:
      has-flag: 4.0.0

  supports-preserve-symlinks-flag@1.0.0: {}

  svelte@5.41.0:
    dependencies:
      '@jridgewell/remapping': 2.3.5
      '@jridgewell/sourcemap-codec': 1.5.0
      '@sveltejs/acorn-typescript': 1.0.6(acorn@8.15.0)
      '@types/estree': 1.0.7
      acorn: 8.15.0
      aria-query: 5.3.2
      axobject-query: 4.1.0
      clsx: 2.1.1
      esm-env: 1.2.2
      esrap: 2.1.0
      is-reference: 3.0.3
      locate-character: 3.0.0
      magic-string: 0.30.17
      zimmerframe: 1.1.4

  swap-case@1.1.2:
    dependencies:
      lower-case: 1.1.4
      upper-case: 1.1.3

  symbol-tree@3.2.4:
    optional: true

  tabbable@6.2.0: {}

  term-size@2.2.1: {}

  test-exclude@7.0.1:
    dependencies:
      '@istanbuljs/schema': 0.1.3
      glob: 10.4.5
      minimatch: 9.0.5

  through@2.3.8: {}

  tinybench@2.9.0: {}

  tinycolor2@1.6.0: {}

  tinyexec@0.3.2: {}

  tinyglobby@0.2.13:
    dependencies:
      fdir: 6.4.4(picomatch@4.0.2)
      picomatch: 4.0.2

  tinyglobby@0.2.15:
    dependencies:
      fdir: 6.5.0(picomatch@4.0.3)
      picomatch: 4.0.3

  tinygradient@1.1.5:
    dependencies:
      '@types/tinycolor2': 1.4.6
      tinycolor2: 1.6.0

  tinypool@1.1.1: {}

  tinyrainbow@2.0.0: {}

  tinyspy@4.0.4: {}

  title-case@2.1.1:
    dependencies:
      no-case: 2.3.2
      upper-case: 1.1.3

  tldts-core@6.1.65:
    optional: true

  tldts@6.1.65:
    dependencies:
      tldts-core: 6.1.65
    optional: true

  tmp@0.0.33:
    dependencies:
      os-tmpdir: 1.0.2

  to-regex-range@5.0.1:
    dependencies:
      is-number: 7.0.0

  totalist@3.0.1: {}

  tough-cookie@5.0.0:
    dependencies:
      tldts: 6.1.65
    optional: true

  tr46@5.0.0:
    dependencies:
      punycode: 2.3.1
    optional: true

  trim-lines@3.0.1: {}

  ts-api-utils@2.1.0(typescript@5.9.2):
    dependencies:
      typescript: 5.9.2

  ts-node@10.9.2(@swc/core@1.9.2(@swc/helpers@0.5.15))(@types/node@22.10.1)(typescript@5.9.2):
    dependencies:
      '@cspotcode/source-map-support': 0.8.1
      '@tsconfig/node10': 1.0.11
      '@tsconfig/node12': 1.0.11
      '@tsconfig/node14': 1.0.3
      '@tsconfig/node16': 1.0.4
      '@types/node': 22.10.1
      acorn: 8.14.0
      acorn-walk: 8.3.4
      arg: 4.1.3
      create-require: 1.1.1
      diff: 4.0.2
      make-error: 1.3.6
      typescript: 5.9.2
      v8-compile-cache-lib: 3.0.1
      yn: 3.1.1
    optionalDependencies:
      '@swc/core': 1.9.2(@swc/helpers@0.5.15)

  tsconfck@3.1.4(typescript@5.9.2):
    optionalDependencies:
      typescript: 5.9.2

  tslib@1.14.1: {}

  tslib@2.8.1: {}

  tsx@4.19.2:
    dependencies:
      esbuild: 0.23.1
      get-tsconfig: 4.8.1
    optionalDependencies:
      fsevents: 2.3.3

  turbo-darwin-64@2.3.3:
    optional: true

  turbo-darwin-arm64@2.3.3:
    optional: true

  turbo-linux-64@2.3.3:
    optional: true

  turbo-linux-arm64@2.3.3:
    optional: true

  turbo-windows-64@2.3.3:
    optional: true

  turbo-windows-arm64@2.3.3:
    optional: true

  turbo@2.3.3:
    optionalDependencies:
      turbo-darwin-64: 2.3.3
      turbo-darwin-arm64: 2.3.3
      turbo-linux-64: 2.3.3
      turbo-linux-arm64: 2.3.3
      turbo-windows-64: 2.3.3
      turbo-windows-arm64: 2.3.3

  type-check@0.4.0:
    dependencies:
      prelude-ls: 1.2.1

  type-fest@0.21.3: {}

  typescript-eslint@8.41.0(eslint@9.16.0(jiti@1.21.6))(typescript@5.9.2):
    dependencies:
      '@typescript-eslint/eslint-plugin': 8.41.0(@typescript-eslint/parser@8.41.0(eslint@9.16.0(jiti@1.21.6))(typescript@5.9.2))(eslint@9.16.0(jiti@1.21.6))(typescript@5.9.2)
      '@typescript-eslint/parser': 8.41.0(eslint@9.16.0(jiti@1.21.6))(typescript@5.9.2)
      '@typescript-eslint/typescript-estree': 8.41.0(typescript@5.9.2)
      '@typescript-eslint/utils': 8.41.0(eslint@9.16.0(jiti@1.21.6))(typescript@5.9.2)
      eslint: 9.16.0(jiti@1.21.6)
      typescript: 5.9.2
    transitivePeerDependencies:
      - supports-color

  typescript@5.8.2: {}

  typescript@5.9.2: {}

  ufo@1.5.4: {}

  uglify-js@3.19.3:
    optional: true

  undici-types@6.20.0: {}

  undici-types@6.21.0:
    optional: true

  unist-util-is@6.0.0:
    dependencies:
      '@types/unist': 3.0.3

  unist-util-position@5.0.0:
    dependencies:
      '@types/unist': 3.0.3

  unist-util-stringify-position@4.0.0:
    dependencies:
      '@types/unist': 3.0.3

  unist-util-visit-parents@6.0.1:
    dependencies:
      '@types/unist': 3.0.3
      unist-util-is: 6.0.0

  unist-util-visit@5.0.0:
    dependencies:
      '@types/unist': 3.0.3
      unist-util-is: 6.0.0
      unist-util-visit-parents: 6.0.1

  universal-user-agent@6.0.1: {}

  universalify@0.1.2: {}

  universalify@2.0.1: {}

  update-browserslist-db@1.1.1(browserslist@4.24.2):
    dependencies:
      browserslist: 4.24.2
      escalade: 3.2.0
      picocolors: 1.1.1

  update-check@1.5.4:
    dependencies:
      registry-auth-token: 3.3.2
      registry-url: 3.1.0

  upper-case-first@1.1.2:
    dependencies:
      upper-case: 1.1.3

  upper-case@1.1.3: {}

  uri-js@4.4.1:
    dependencies:
      punycode: 2.3.1

  util-deprecate@1.0.2: {}

  v8-compile-cache-lib@3.0.1: {}

  valibot@1.1.0(typescript@5.9.2):
    optionalDependencies:
      typescript: 5.9.2

  validate-html-nesting@1.2.2: {}

  validate-npm-package-name@5.0.1: {}

  vfile-message@4.0.2:
    dependencies:
      '@types/unist': 3.0.3
      unist-util-stringify-position: 4.0.0

  vfile@6.0.3:
    dependencies:
      '@types/unist': 3.0.3
      vfile-message: 4.0.2

  vite-node@3.2.4(@types/node@22.10.1)(jiti@1.21.6)(tsx@4.19.2)(yaml@2.6.0):
    dependencies:
      cac: 6.7.14
      debug: 4.4.3
      es-module-lexer: 1.7.0
      pathe: 2.0.3
      vite: 6.3.3(@types/node@22.10.1)(jiti@1.21.6)(tsx@4.19.2)(yaml@2.6.0)
    transitivePeerDependencies:
      - '@types/node'
      - jiti
      - less
      - lightningcss
      - sass
      - sass-embedded
      - stylus
      - sugarss
      - supports-color
      - terser
      - tsx
      - yaml

  vite-plugin-dts@4.5.3(@types/node@22.10.1)(rollup@4.40.0)(typescript@5.9.2)(vite@6.3.3(@types/node@22.10.1)(jiti@1.21.6)(tsx@4.19.2)(yaml@2.6.0)):
    dependencies:
      '@microsoft/api-extractor': 7.52.5(@types/node@22.10.1)
      '@rollup/pluginutils': 5.1.4(rollup@4.40.0)
      '@volar/typescript': 2.4.13
      '@vue/language-core': 2.2.0(typescript@5.9.2)
      compare-versions: 6.1.1
      debug: 4.4.0
      kolorist: 1.8.0
      local-pkg: 1.1.1
      magic-string: 0.30.17
      typescript: 5.9.2
    optionalDependencies:
      vite: 6.3.3(@types/node@22.10.1)(jiti@1.21.6)(tsx@4.19.2)(yaml@2.6.0)
    transitivePeerDependencies:
      - '@types/node'
      - rollup
      - supports-color

  vite-plugin-mkcert@1.17.6(vite@6.3.3(@types/node@22.10.1)(jiti@1.21.6)(tsx@4.19.2)(yaml@2.6.0)):
    dependencies:
      '@octokit/rest': 20.1.1
      axios: 1.7.8(debug@4.3.7)
      debug: 4.3.7
      picocolors: 1.1.1
      vite: 6.3.3(@types/node@22.10.1)(jiti@1.21.6)(tsx@4.19.2)(yaml@2.6.0)
    transitivePeerDependencies:
      - supports-color

  vite-plugin-solid@2.11.0(solid-js@1.9.3)(vite@6.3.3(@types/node@22.10.1)(jiti@1.21.6)(tsx@4.19.2)(yaml@2.6.0)):
    dependencies:
      '@babel/core': 7.26.0
      '@types/babel__core': 7.20.5
      babel-preset-solid: 1.9.3(@babel/core@7.26.0)
      merge-anything: 5.1.7
      solid-js: 1.9.3
      solid-refresh: 0.6.3(solid-js@1.9.3)
      vite: 6.3.3(@types/node@22.10.1)(jiti@1.21.6)(tsx@4.19.2)(yaml@2.6.0)
      vitefu: 1.0.4(vite@6.3.3(@types/node@22.10.1)(jiti@1.21.6)(tsx@4.19.2)(yaml@2.6.0))
    transitivePeerDependencies:
      - supports-color

  vite-tsconfig-paths@5.1.4(typescript@5.9.2)(vite@6.3.3(@types/node@22.10.1)(jiti@1.21.6)(tsx@4.19.2)(yaml@2.6.0)):
    dependencies:
      debug: 4.4.0
      globrex: 0.1.2
      tsconfck: 3.1.4(typescript@5.9.2)
    optionalDependencies:
      vite: 6.3.3(@types/node@22.10.1)(jiti@1.21.6)(tsx@4.19.2)(yaml@2.6.0)
    transitivePeerDependencies:
      - supports-color
      - typescript

  vite@5.4.11(@types/node@22.10.1):
    dependencies:
      esbuild: 0.21.5
      postcss: 8.5.3
      rollup: 4.40.0
    optionalDependencies:
      '@types/node': 22.10.1
      fsevents: 2.3.3

  vite@6.3.3(@types/node@22.10.1)(jiti@1.21.6)(tsx@4.19.2)(yaml@2.6.0):
    dependencies:
      esbuild: 0.25.3
      fdir: 6.4.4(picomatch@4.0.2)
      picomatch: 4.0.2
      postcss: 8.5.3
      rollup: 4.40.0
      tinyglobby: 0.2.13
    optionalDependencies:
      '@types/node': 22.10.1
      fsevents: 2.3.3
      jiti: 1.21.6
      tsx: 4.19.2
      yaml: 2.6.0

  vitefu@1.0.4(vite@6.3.3(@types/node@22.10.1)(jiti@1.21.6)(tsx@4.19.2)(yaml@2.6.0)):
    optionalDependencies:
      vite: 6.3.3(@types/node@22.10.1)(jiti@1.21.6)(tsx@4.19.2)(yaml@2.6.0)

  vitepress@1.5.0(@algolia/client-search@5.14.2)(@types/node@22.10.1)(@types/react@18.3.12)(axios@1.7.8)(change-case@5.4.4)(postcss@8.5.3)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)(search-insights@2.17.2)(typescript@5.9.2):
    dependencies:
      '@docsearch/css': 3.8.0
      '@docsearch/js': 3.8.0(@algolia/client-search@5.14.2)(@types/react@18.3.12)(react-dom@18.3.1(react@18.3.1))(react@18.3.1)(search-insights@2.17.2)
      '@iconify-json/simple-icons': 1.2.11
      '@shikijs/core': 1.23.1
      '@shikijs/transformers': 1.23.1
      '@shikijs/types': 1.23.1
      '@types/markdown-it': 14.1.2
      '@vitejs/plugin-vue': 5.2.0(vite@5.4.11(@types/node@22.10.1))(vue@3.5.13(typescript@5.9.2))
      '@vue/devtools-api': 7.6.4
      '@vue/shared': 3.5.13
      '@vueuse/core': 11.2.0(vue@3.5.13(typescript@5.9.2))
      '@vueuse/integrations': 11.2.0(axios@1.7.8)(change-case@5.4.4)(focus-trap@7.6.2)(vue@3.5.13(typescript@5.9.2))
      focus-trap: 7.6.2
      mark.js: 8.11.1
      minisearch: 7.1.0
      shiki: 1.23.1
      vite: 5.4.11(@types/node@22.10.1)
      vue: 3.5.13(typescript@5.9.2)
    optionalDependencies:
      postcss: 8.5.3
    transitivePeerDependencies:
      - '@algolia/client-search'
      - '@types/node'
      - '@types/react'
      - '@vue/composition-api'
      - async-validator
      - axios
      - change-case
      - drauu
      - fuse.js
      - idb-keyval
      - jwt-decode
      - less
      - lightningcss
      - nprogress
      - qrcode
      - react
      - react-dom
      - sass
      - sass-embedded
      - search-insights
      - sortablejs
      - stylus
      - sugarss
      - terser
      - typescript
      - universal-cookie

  vitest@3.2.4(@types/node@22.10.1)(@vitest/ui@3.2.4)(happy-dom@20.0.5)(jiti@1.21.6)(jsdom@25.0.1)(tsx@4.19.2)(yaml@2.6.0):
    dependencies:
      '@types/chai': 5.2.2
      '@vitest/expect': 3.2.4
      '@vitest/mocker': 3.2.4(vite@6.3.3(@types/node@22.10.1)(jiti@1.21.6)(tsx@4.19.2)(yaml@2.6.0))
      '@vitest/pretty-format': 3.2.4
      '@vitest/runner': 3.2.4
      '@vitest/snapshot': 3.2.4
      '@vitest/spy': 3.2.4
      '@vitest/utils': 3.2.4
      chai: 5.2.0
      debug: 4.4.3
      expect-type: 1.2.1
      magic-string: 0.30.17
      pathe: 2.0.3
      picomatch: 4.0.3
      std-env: 3.9.0
      tinybench: 2.9.0
      tinyexec: 0.3.2
      tinyglobby: 0.2.15
      tinypool: 1.1.1
      tinyrainbow: 2.0.0
      vite: 6.3.3(@types/node@22.10.1)(jiti@1.21.6)(tsx@4.19.2)(yaml@2.6.0)
      vite-node: 3.2.4(@types/node@22.10.1)(jiti@1.21.6)(tsx@4.19.2)(yaml@2.6.0)
      why-is-node-running: 2.3.0
    optionalDependencies:
      '@types/node': 22.10.1
      '@vitest/ui': 3.2.4(vitest@3.2.4)
      happy-dom: 20.0.5
      jsdom: 25.0.1
    transitivePeerDependencies:
      - jiti
      - less
      - lightningcss
      - msw
      - sass
      - sass-embedded
      - stylus
      - sugarss
      - supports-color
      - terser
      - tsx
      - yaml

  vscode-uri@3.0.8: {}

  vue-demi@0.14.10(vue@3.5.13(typescript@5.9.2)):
    dependencies:
      vue: 3.5.13(typescript@5.9.2)

  vue@3.5.13(typescript@5.9.2):
    dependencies:
      '@vue/compiler-dom': 3.5.13
      '@vue/compiler-sfc': 3.5.13
      '@vue/runtime-dom': 3.5.13
      '@vue/server-renderer': 3.5.13(vue@3.5.13(typescript@5.9.2))
      '@vue/shared': 3.5.13
    optionalDependencies:
      typescript: 5.9.2

  w3c-xmlserializer@5.0.0:
    dependencies:
      xml-name-validator: 5.0.0
    optional: true

  wcwidth@1.0.1:
    dependencies:
      defaults: 1.0.4

  webidl-conversions@7.0.0:
    optional: true

  whatwg-encoding@3.1.1:
    dependencies:
      iconv-lite: 0.6.3
    optional: true

  whatwg-mimetype@3.0.0:
    optional: true

  whatwg-mimetype@4.0.0:
    optional: true

  whatwg-url@14.0.0:
    dependencies:
      tr46: 5.0.0
      webidl-conversions: 7.0.0
    optional: true

  which@1.3.1:
    dependencies:
      isexe: 2.0.0

  which@2.0.2:
    dependencies:
      isexe: 2.0.0

  why-is-node-running@2.3.0:
    dependencies:
      siginfo: 2.0.0
      stackback: 0.0.2

  word-wrap@1.2.5: {}

  wordwrap@1.0.0: {}

  wrap-ansi@6.2.0:
    dependencies:
      ansi-styles: 4.3.0
      string-width: 4.2.3
      strip-ansi: 6.0.1

  wrap-ansi@7.0.0:
    dependencies:
      ansi-styles: 4.3.0
      string-width: 4.2.3
      strip-ansi: 6.0.1

  wrap-ansi@8.1.0:
    dependencies:
      ansi-styles: 6.2.1
      string-width: 5.1.2
      strip-ansi: 7.1.2

  wrappy@1.0.2: {}

  ws@8.18.0:
    optional: true

  xml-name-validator@5.0.0:
    optional: true

  xmlchars@2.2.0:
    optional: true

  yallist@3.1.1: {}

  yallist@4.0.0: {}

  yaml@2.6.0:
    optional: true

  yn@3.1.1: {}

  yocto-queue@0.1.0: {}

  yoctocolors-cjs@2.1.3: {}

  yoctocolors@2.1.2: {}

  zimmerframe@1.1.4: {}

  zwitch@2.0.4: {}

```
---
## File: pnpm-workspace.yaml

```yaml
packages:
  - "apps/*"
  - "packages/*"
  - "playgrounds/*"

```
---
## File: README.md

```markdown
[code-badge]: https://img.shields.io/badge/source-black?logo=github

# @tma.js

[![Commitizen friendly](https://img.shields.io/badge/commitizen-friendly-brightgreen.svg)](http://commitizen.github.io/cz-cli/)

Mono-repository, containing all the packages, connected with comfortable and safe TypeScript
development on Telegram Mini Apps platform.

## Getting Started

A great starting point for learning about the platform is the community-built [documentation](https://docs.telegram-mini-apps.com). 
Additionally, the official Telegram [platform documentation](https://core.telegram.org/bots/webapps) can 
provide valuable insights and a different perspective on the platform.

Before diving into development, itâ€™s also advisable to explore the available 
[libraries](https://docs.telegram-mini-apps.com/packages/tma-js-create-mini-app) for 
both client-side and backend development to gain a better understanding of the tools at your
disposal.

## Why not Telegram SDK

Why bother creating a project like `@tma.js` when there are existing solutions from the developers
who own the platform? The answer is rather simple: the currently provided solution (SDK) does not
seem to meet the required minimum quality standards. Of course, the term 'quality' is rather
specific and subjective, but this section should make it more objective.

This project was born during the research of a solution provided by
Telegram - [telegram-web-app.js](https://telegram.org/js/telegram-web-app.js), which is considered
the only existing official SDK for Telegram Mini Apps by Telegram. Therefore, all the points
described in this section will be related to this package.

Because of the large section size, the complete motivation description has been moved to a [separate
document](./MOTIVATION.md).

## Contribution

Any contribution is appreciated. To start contributing, please, follow
the [Contribution Guidelines](./CONTRIBUTING.md).

```
---
## File: turbo.json

```json
{
  "$schema": "https://turbo.build/schema.json",
  "globalDependencies": [
    "**/.env.*local"
  ],
  "tasks": {
    "build": {
      "dependsOn": [
        "^build"
      ]
    },
    "dev": {
      "cache": false,
      "persistent": true
    },
    "lint": {
      "cache": true
    },
    "lint:fix": {
      "cache": true
    },
    "test": {
      "cache": true
    },
    "typecheck": {
      "dependsOn": [
        "^typecheck"
      ],
      "cache": true
    }
  }
}

```
---
## File: vite.config.ts

```typescript
import { defineConfig } from 'vitest/config';

export default defineConfig({
  test: { projects: ['packages/*/vite.config.ts'] },
});
```
